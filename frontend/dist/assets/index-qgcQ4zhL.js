var q1=Object.defineProperty;var nw=a=>{throw TypeError(a)};var K1=(a,e,c)=>e in a?q1(a,e,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[e]=c;var Dn=(a,e,c)=>K1(a,typeof e!="symbol"?e+"":e,c),W0=(a,e,c)=>e.has(a)||nw("Cannot "+c);var ut=(a,e,c)=>(W0(a,e,"read from private field"),c?c.call(a):e.get(a)),Lt=(a,e,c)=>e.has(a)?nw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(a):e.set(a,c),At=(a,e,c,d)=>(W0(a,e,"write to private field"),d?d.call(a,c):e.set(a,c),c),$t=(a,e,c)=>(W0(a,e,"access private method"),c);var as=(a,e,c,d)=>({set _(h){At(a,e,h,c)},get _(){return ut(a,e,d)}});function _mergeNamespaces(a,e){for(var c=0;c<e.length;c++){const d=e[c];if(typeof d!="string"&&!Array.isArray(d)){for(const h in d)if(h!=="default"&&!(h in a)){const g=Object.getOwnPropertyDescriptor(d,h);g&&Object.defineProperty(a,h,g.get?g:{enumerable:!0,get:()=>d[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))d(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function c(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(h){if(h.ep)return;h.ep=!0;const g=c(h);fetch(h.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var e=a.default;if(typeof e=="function"){var c=function d(){return this instanceof d?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};c.prototype=e.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(a).forEach(function(d){var h=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(c,d,h.get?h:{enumerable:!0,get:function(){return a[d]}})}),c}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2(a,e,c){this.props=a,this.context=e,this.refs=D$2,this.updater=c||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(a,e){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,e,"setState")};E$2.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(a,e,c){this.props=a,this.context=e,this.refs=D$2,this.updater=c||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(a,e,c){var d,h={},g=null,b=null;if(e!=null)for(d in e.ref!==void 0&&(b=e.ref),e.key!==void 0&&(g=""+e.key),e)J.call(e,d)&&!L$2.hasOwnProperty(d)&&(h[d]=e[d]);var _e=arguments.length-2;if(_e===1)h.children=c;else if(1<_e){for(var et=Array(_e),rt=0;rt<_e;rt++)et[rt]=arguments[rt+2];h.children=et}if(a&&a.defaultProps)for(d in _e=a.defaultProps,_e)h[d]===void 0&&(h[d]=_e[d]);return{$$typeof:l$1,type:a,key:g,ref:b,props:h,_owner:K$1.current}}function N$1(a,e){return{$$typeof:l$1,type:a.type,key:e,ref:a.ref,props:a.props,_owner:a._owner}}function O$1(a){return typeof a=="object"&&a!==null&&a.$$typeof===l$1}function escape$1(a){var e={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(c){return e[c]})}var P$2=/\/+/g;function Q$1(a,e){return typeof a=="object"&&a!==null&&a.key!=null?escape$1(""+a.key):e.toString(36)}function R$1(a,e,c,d,h){var g=typeof a;(g==="undefined"||g==="boolean")&&(a=null);var b=!1;if(a===null)b=!0;else switch(g){case"string":case"number":b=!0;break;case"object":switch(a.$$typeof){case l$1:case n$2:b=!0}}if(b)return b=a,h=h(b),a=d===""?"."+Q$1(b,0):d,I$1(h)?(c="",a!=null&&(c=a.replace(P$2,"$&/")+"/"),R$1(h,e,c,"",function(rt){return rt})):h!=null&&(O$1(h)&&(h=N$1(h,c+(!h.key||b&&b.key===h.key?"":(""+h.key).replace(P$2,"$&/")+"/")+a)),e.push(h)),1;if(b=0,d=d===""?".":d+":",I$1(a))for(var _e=0;_e<a.length;_e++){g=a[_e];var et=d+Q$1(g,_e);b+=R$1(g,e,c,et,h)}else if(et=A$1(a),typeof et=="function")for(a=et.call(a),_e=0;!(g=a.next()).done;)g=g.value,et=d+Q$1(g,_e++),b+=R$1(g,e,c,et,h);else if(g==="object")throw e=String(a),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(a,e,c){if(a==null)return a;var d=[],h=0;return R$1(a,d,"","",function(g){return e.call(c,g,h++)}),d}function T$1(a){if(a._status===-1){var e=a._result;e=e(),e.then(function(c){(a._status===0||a._status===-1)&&(a._status=1,a._result=c)},function(c){(a._status===0||a._status===-1)&&(a._status=2,a._result=c)}),a._status===-1&&(a._status=0,a._result=e)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(a,e,c){S$1(a,function(){e.apply(this,arguments)},c)},count:function(a){var e=0;return S$1(a,function(){e++}),e},toArray:function(a){return S$1(a,function(e){return e})||[]},only:function(a){if(!O$1(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$2;react_production_min.Fragment=p$2;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(a,e,c){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var d=C$1({},a.props),h=a.key,g=a.ref,b=a._owner;if(e!=null){if(e.ref!==void 0&&(g=e.ref,b=K$1.current),e.key!==void 0&&(h=""+e.key),a.type&&a.type.defaultProps)var _e=a.type.defaultProps;for(et in e)J.call(e,et)&&!L$2.hasOwnProperty(et)&&(d[et]=e[et]===void 0&&_e!==void 0?_e[et]:e[et])}var et=arguments.length-2;if(et===1)d.children=c;else if(1<et){_e=Array(et);for(var rt=0;rt<et;rt++)_e[rt]=arguments[rt+2];d.children=_e}return{$$typeof:l$1,type:a.type,key:h,ref:g,props:d,_owner:b}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t$1,_context:a},a.Consumer=a};react_production_min.createElement=M$2;react_production_min.createFactory=function(a){var e=M$2.bind(null,a);return e.type=a,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$2,render:a}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T$1}};react_production_min.memo=function(a,e){return{$$typeof:x,type:a,compare:e===void 0?null:e}};react_production_min.startTransition=function(a){var e=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(a,e){return U$1.current.useCallback(a,e)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,e){return U$1.current.useEffect(a,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,e,c){return U$1.current.useImperativeHandle(a,e,c)};react_production_min.useInsertionEffect=function(a,e){return U$1.current.useInsertionEffect(a,e)};react_production_min.useLayoutEffect=function(a,e){return U$1.current.useLayoutEffect(a,e)};react_production_min.useMemo=function(a,e){return U$1.current.useMemo(a,e)};react_production_min.useReducer=function(a,e,c){return U$1.current.useReducer(a,e,c)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,e,c){return U$1.current.useSyncExternalStore(a,e,c)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n$1=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(a,e,c){var d,h={},g=null,b=null;c!==void 0&&(g=""+c),e.key!==void 0&&(g=""+e.key),e.ref!==void 0&&(b=e.ref);for(d in e)m$1.call(e,d)&&!p$1.hasOwnProperty(d)&&(h[d]=e[d]);if(a&&a.defaultProps)for(d in e=a.defaultProps,e)h[d]===void 0&&(h[d]=e[d]);return{$$typeof:k,type:a,key:g,ref:b,props:h,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function e(Vt,Bt){var Ct=Vt.length;Vt.push(Bt);e:for(;0<Ct;){var en=Ct-1>>>1,sn=Vt[en];if(0<h(sn,Bt))Vt[en]=Bt,Vt[Ct]=sn,Ct=en;else break e}}function c(Vt){return Vt.length===0?null:Vt[0]}function d(Vt){if(Vt.length===0)return null;var Bt=Vt[0],Ct=Vt.pop();if(Ct!==Bt){Vt[0]=Ct;e:for(var en=0,sn=Vt.length,kt=sn>>>1;en<kt;){var Ut=2*(en+1)-1,Jt=Vt[Ut],tn=Ut+1,Gt=Vt[tn];if(0>h(Jt,Ct))tn<sn&&0>h(Gt,Jt)?(Vt[en]=Gt,Vt[tn]=Ct,en=tn):(Vt[en]=Jt,Vt[Ut]=Ct,en=Ut);else if(tn<sn&&0>h(Gt,Ct))Vt[en]=Gt,Vt[tn]=Ct,en=tn;else break e}}return Bt}function h(Vt,Bt){var Ct=Vt.sortIndex-Bt.sortIndex;return Ct!==0?Ct:Vt.id-Bt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var b=Date,_e=b.now();a.unstable_now=function(){return b.now()-_e}}var et=[],rt=[],st=1,$=null,_=3,nt=!1,it=!1,ot=!1,lt=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ct=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dt(Vt){for(var Bt=c(rt);Bt!==null;){if(Bt.callback===null)d(rt);else if(Bt.startTime<=Vt)d(rt),Bt.sortIndex=Bt.expirationTime,e(et,Bt);else break;Bt=c(rt)}}function ht(Vt){if(ot=!1,dt(Vt),!it)if(c(et)!==null)it=!0,Tt(pt);else{var Bt=c(rt);Bt!==null&&It(ht,Bt.startTime-Vt)}}function pt(Vt,Bt){it=!1,ot&&(ot=!1,at(xt),xt=-1),nt=!0;var Ct=_;try{for(dt(Bt),$=c(et);$!==null&&(!($.expirationTime>Bt)||Vt&&!St());){var en=$.callback;if(typeof en=="function"){$.callback=null,_=$.priorityLevel;var sn=en($.expirationTime<=Bt);Bt=a.unstable_now(),typeof sn=="function"?$.callback=sn:$===c(et)&&d(et),dt(Bt)}else d(et);$=c(et)}if($!==null)var kt=!0;else{var Ut=c(rt);Ut!==null&&It(ht,Ut.startTime-Bt),kt=!1}return kt}finally{$=null,_=Ct,nt=!1}}var ft=!1,mt=null,xt=-1,gt=5,Et=-1;function St(){return!(a.unstable_now()-Et<gt)}function Pt(){if(mt!==null){var Vt=a.unstable_now();Et=Vt;var Bt=!0;try{Bt=mt(!0,Vt)}finally{Bt?Mt():(ft=!1,mt=null)}}else ft=!1}var Mt;if(typeof ct=="function")Mt=function(){ct(Pt)};else if(typeof MessageChannel<"u"){var Rt=new MessageChannel,Dt=Rt.port2;Rt.port1.onmessage=Pt,Mt=function(){Dt.postMessage(null)}}else Mt=function(){lt(Pt,0)};function Tt(Vt){mt=Vt,ft||(ft=!0,Mt())}function It(Vt,Bt){xt=lt(function(){Vt(a.unstable_now())},Bt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Vt){Vt.callback=null},a.unstable_continueExecution=function(){it||nt||(it=!0,Tt(pt))},a.unstable_forceFrameRate=function(Vt){0>Vt||125<Vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<Vt?Math.floor(1e3/Vt):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_getFirstCallbackNode=function(){return c(et)},a.unstable_next=function(Vt){switch(_){case 1:case 2:case 3:var Bt=3;break;default:Bt=_}var Ct=_;_=Bt;try{return Vt()}finally{_=Ct}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Vt,Bt){switch(Vt){case 1:case 2:case 3:case 4:case 5:break;default:Vt=3}var Ct=_;_=Vt;try{return Bt()}finally{_=Ct}},a.unstable_scheduleCallback=function(Vt,Bt,Ct){var en=a.unstable_now();switch(typeof Ct=="object"&&Ct!==null?(Ct=Ct.delay,Ct=typeof Ct=="number"&&0<Ct?en+Ct:en):Ct=en,Vt){case 1:var sn=-1;break;case 2:sn=250;break;case 5:sn=1073741823;break;case 4:sn=1e4;break;default:sn=5e3}return sn=Ct+sn,Vt={id:st++,callback:Bt,priorityLevel:Vt,startTime:Ct,expirationTime:sn,sortIndex:-1},Ct>en?(Vt.sortIndex=Ct,e(rt,Vt),c(et)===null&&Vt===c(rt)&&(ot?(at(xt),xt=-1):ot=!0,It(ht,Ct-en))):(Vt.sortIndex=sn,e(et,Vt),it||nt||(it=!0,Tt(pt))),Vt},a.unstable_shouldYield=St,a.unstable_wrapCallback=function(Vt){var Bt=_;return function(){var Ct=_;_=Bt;try{return Vt.apply(this,arguments)}finally{_=Ct}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(a){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)e+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,e){ha(a,e),ha(a+"Capture",e)}function ha(a,e){for(ea[a]=e,a=0;a<e.length;a++)da.add(e[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,e,c,d){if(c!==null&&c.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,e,c,d){if(e===null||typeof e>"u"||pa(a,e,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(a,e,c,d,h,g,b){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=d,this.attributeNamespace=h,this.mustUseProperty=c,this.propertyName=a,this.type=e,this.sanitizeURL=g,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v$1(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var e=a[0];z[e]=new v$1(e,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v$1(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v$1(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v$1(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v$1(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v$1(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v$1(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v$1(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var e=a.replace(ra,sa);z[e]=new v$1(e,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v$1(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,e,c,d){var h=z.hasOwnProperty(e)?z[e]:null;(h!==null?h.type!==0:d||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,c,h,d)&&(c=null),d||h===null?oa(e)&&(c===null?a.removeAttribute(e):a.setAttribute(e,""+c)):h.mustUseProperty?a[h.propertyName]=c===null?h.type===3?!1:"":c:(e=h.attributeName,d=h.attributeNamespace,c===null?a.removeAttribute(e):(h=h.type,c=h===3||h===4&&c===!0?"":""+c,d?a.setAttributeNS(d,e,c):a.setAttribute(e,c))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(c){var e=c.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+a}var Na=!1;function Oa(a,e){if(!a||Na)return"";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(rt){var d=rt}Reflect.construct(a,[],e)}else{try{e.call()}catch(rt){d=rt}a.call(e.prototype)}else{try{throw Error()}catch(rt){d=rt}a()}}catch(rt){if(rt&&d&&typeof rt.stack=="string"){for(var h=rt.stack.split(`
`),g=d.stack.split(`
`),b=h.length-1,_e=g.length-1;1<=b&&0<=_e&&h[b]!==g[_e];)_e--;for(;1<=b&&0<=_e;b--,_e--)if(h[b]!==g[_e]){if(b!==1||_e!==1)do if(b--,_e--,0>_e||h[b]!==g[_e]){var et=`
`+h[b].replace(" at new "," at ");return a.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",a.displayName)),et}while(1<=b&&0<=_e);break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var e=a.render;return a=a.displayName,a||(a=e.displayName||e.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return e=a.displayName||null,e!==null?e:Qa(a.type)||"Memo";case Ha:e=a._payload,a=a._init;try{return Qa(a(e))}catch{}}return null}function Ra(a){var e=a.type;switch(a.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=e.render,a=a.displayName||a.name||"",e.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var e=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(a){var e=Ta(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,e),d=""+a[e];if(!a.hasOwnProperty(e)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,g=c.set;return Object.defineProperty(a,e,{configurable:!0,get:function(){return h.call(this)},set:function(b){d=""+b,g.call(this,b)}}),Object.defineProperty(a,e,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){a._valueTracker=null,delete a[e]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var e=a._valueTracker;if(!e)return!0;var c=e.getValue(),d="";return a&&(d=Ta(a)?a.checked?"true":"false":a.value),a=d,a!==c?(e.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,e){var c=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??a._wrapperState.initialChecked})}function Za(a,e){var c=e.defaultValue==null?"":e.defaultValue,d=e.checked!=null?e.checked:e.defaultChecked;c=Sa(e.value!=null?e.value:c),a._wrapperState={initialChecked:d,initialValue:c,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(a,e){e=e.checked,e!=null&&ta(a,"checked",e,!1)}function bb(a,e){ab(a,e);var c=Sa(e.value),d=e.type;if(c!=null)d==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+c):a.value!==""+c&&(a.value=""+c);else if(d==="submit"||d==="reset"){a.removeAttribute("value");return}e.hasOwnProperty("value")?cb(a,e.type,c):e.hasOwnProperty("defaultValue")&&cb(a,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(a.defaultChecked=!!e.defaultChecked)}function db(a,e,c){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var d=e.type;if(!(d!=="submit"&&d!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+a._wrapperState.initialValue,c||e===a.value||(a.value=e),a.defaultValue=e}c=a.name,c!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,c!==""&&(a.name=c)}function cb(a,e,c){(e!=="number"||Xa(a.ownerDocument)!==a)&&(c==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c))}var eb=Array.isArray;function fb(a,e,c,d){if(a=a.options,e){e={};for(var h=0;h<c.length;h++)e["$"+c[h]]=!0;for(c=0;c<a.length;c++)h=e.hasOwnProperty("$"+a[c].value),a[c].selected!==h&&(a[c].selected=h),h&&d&&(a[c].defaultSelected=!0)}else{for(c=""+Sa(c),e=null,h=0;h<a.length;h++){if(a[h].value===c){a[h].selected=!0,d&&(a[h].defaultSelected=!0);return}e!==null||a[h].disabled||(e=a[h])}e!==null&&(e.selected=!0)}}function gb(a,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,e){var c=e.value;if(c==null){if(c=e.children,e=e.defaultValue,c!=null){if(e!=null)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}e=c}e==null&&(e=""),c=e}a._wrapperState={initialValue:Sa(c)}}function ib(a,e){var c=Sa(e.value),d=Sa(e.defaultValue);c!=null&&(c=""+c,c!==a.value&&(a.value=c),e.defaultValue==null&&a.defaultValue!==c&&(a.defaultValue=c)),d!=null&&(a.defaultValue=""+d)}function jb(a){var e=a.textContent;e===a._wrapperState.initialValue&&e!==""&&e!==null&&(a.value=e)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,e){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(e):a==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,c,d,h){MSApp.execUnsafeLocalFunction(function(){return a(e,c,d,h)})}:a}(function(a,e){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;e.firstChild;)a.appendChild(e.firstChild)}});function ob(a,e){if(e){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=e;return}}a.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(e){e=e+a.charAt(0).toUpperCase()+a.substring(1),pb[e]=pb[a]})});function rb(a,e,c){return e==null||typeof e=="boolean"||e===""?"":c||typeof e!="number"||e===0||pb.hasOwnProperty(a)&&pb[a]?(""+e).trim():e+"px"}function sb(a,e){a=a.style;for(var c in e)if(e.hasOwnProperty(c)){var d=c.indexOf("--")===0,h=rb(c,e[c],d);c==="float"&&(c="cssFloat"),d?a.setProperty(c,h):a[c]=h}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,e){if(e){if(tb[a]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,a));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(a,e){if(a.indexOf("-")===-1)return typeof e.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p(280));var e=a.stateNode;e&&(e=Db(e),yb(a.stateNode,a.type,e))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,e=Ab;if(Ab=zb=null,Bb(a),e)for(a=0;a<e.length;a++)Bb(e[a])}}function Gb(a,e){return a(e)}function Hb(){}var Ib=!1;function Jb(a,e,c){if(Ib)return a(e,c);Ib=!0;try{return Gb(a,e,c)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,e){var c=a.stateNode;if(c===null)return null;var d=Db(c);if(d===null)return null;c=d[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(p(231,e,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(a,e,c,d,h,g,b,_e,et){var rt=Array.prototype.slice.call(arguments,3);try{e.apply(c,rt)}catch(st){this.onError(st)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,e,c,d,h,g,b,_e,et){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,e,c,d,h,g,b,_e,et){if(Tb.apply(this,arguments),Ob){if(Ob){var rt=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=rt)}}function Vb(a){var e=a,c=a;if(a.alternate)for(;e.return;)e=e.return;else{a=e;do e=a,e.flags&4098&&(c=e.return),a=e.return;while(a)}return e.tag===3?c:null}function Wb(a){if(a.tag===13){var e=a.memoizedState;if(e===null&&(a=a.alternate,a!==null&&(e=a.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188))}function Yb(a){var e=a.alternate;if(!e){if(e=Vb(a),e===null)throw Error(p(188));return e!==a?null:a}for(var c=a,d=e;;){var h=c.return;if(h===null)break;var g=h.alternate;if(g===null){if(d=h.return,d!==null){c=d;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===c)return Xb(h),a;if(g===d)return Xb(h),e;g=g.sibling}throw Error(p(188))}if(c.return!==d.return)c=h,d=g;else{for(var b=!1,_e=h.child;_e;){if(_e===c){b=!0,c=h,d=g;break}if(_e===d){b=!0,d=h,c=g;break}_e=_e.sibling}if(!b){for(_e=g.child;_e;){if(_e===c){b=!0,c=g,d=h;break}if(_e===d){b=!0,d=g,c=h;break}_e=_e.sibling}if(!b)throw Error(p(189))}}if(c.alternate!==d)throw Error(p(190))}if(c.tag!==3)throw Error(p(188));return c.stateNode.current===c?a:e}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var e=$b(a);if(e!==null)return e;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,e){var c=a.pendingLanes;if(c===0)return 0;var d=0,h=a.suspendedLanes,g=a.pingedLanes,b=c&268435455;if(b!==0){var _e=b&~h;_e!==0?d=tc(_e):(g&=b,g!==0&&(d=tc(g)))}else b=c&~h,b!==0?d=tc(b):g!==0&&(d=tc(g));if(d===0)return 0;if(e!==0&&e!==d&&!(e&h)&&(h=d&-d,g=e&-e,h>=g||h===16&&(g&4194240)!==0))return e;if(d&4&&(d|=c&16),e=a.entangledLanes,e!==0)for(a=a.entanglements,e&=d;0<e;)c=31-oc(e),h=1<<c,d|=a[c],e&=~h;return d}function vc(a,e){switch(a){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,e){for(var c=a.suspendedLanes,d=a.pingedLanes,h=a.expirationTimes,g=a.pendingLanes;0<g;){var b=31-oc(g),_e=1<<b,et=h[b];et===-1?(!(_e&c)||_e&d)&&(h[b]=vc(_e,e)):et<=e&&(a.expiredLanes|=_e),g&=~_e}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var e=[],c=0;31>c;c++)e.push(a);return e}function Ac(a,e,c){a.pendingLanes|=e,e!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,e=31-oc(e),a[e]=c}function Bc(a,e){var c=a.pendingLanes&~e;a.pendingLanes=e,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=e,a.mutableReadLanes&=e,a.entangledLanes&=e,e=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var h=31-oc(c),g=1<<h;e[h]=0,d[h]=-1,a[h]=-1,c&=~g}}function Cc(a,e){var c=a.entangledLanes|=e;for(a=a.entanglements;c;){var d=31-oc(c),h=1<<d;h&e|a[d]&e&&(a[d]|=e),c&=~h}}var C=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,e){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(a,e,c,d,h,g){return a===null||a.nativeEvent!==g?(a={blockedOn:e,domEventName:c,eventSystemFlags:d,nativeEvent:g,targetContainers:[h]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),a):(a.eventSystemFlags|=d,e=a.targetContainers,h!==null&&e.indexOf(h)===-1&&e.push(h),a)}function Uc(a,e,c,d,h){switch(e){case"focusin":return Lc=Tc(Lc,a,e,c,d,h),!0;case"dragenter":return Mc=Tc(Mc,a,e,c,d,h),!0;case"mouseover":return Nc=Tc(Nc,a,e,c,d,h),!0;case"pointerover":var g=h.pointerId;return Oc.set(g,Tc(Oc.get(g)||null,a,e,c,d,h)),!0;case"gotpointercapture":return g=h.pointerId,Pc.set(g,Tc(Pc.get(g)||null,a,e,c,d,h)),!0}return!1}function Vc(a){var e=Wc(a.target);if(e!==null){var c=Vb(e);if(c!==null){if(e=c.tag,e===13){if(e=Wb(c),e!==null){a.blockedOn=e,Ic(a.priority,function(){Gc(c)});return}}else if(e===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var e=a.targetContainers;0<e.length;){var c=Yc(a.domEventName,a.eventSystemFlags,e[0],a.nativeEvent);if(c===null){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d,c.target.dispatchEvent(d),wb=null}else return e=Cb(c),e!==null&&Fc(e),a.blockedOn=c,!1;e.shift()}return!0}function Zc(a,e,c){Xc(a)&&c.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,e){a.blockedOn===e&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function e(h){return ad(h,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(e),Pc.forEach(e),c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],c.blockedOn===null);)Vc(c),c.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a,e,c,d){var h=C,g=cd.transition;cd.transition=null;try{C=1,fd(a,e,c,d)}finally{C=h,cd.transition=g}}function gd(a,e,c,d){var h=C,g=cd.transition;cd.transition=null;try{C=4,fd(a,e,c,d)}finally{C=h,cd.transition=g}}function fd(a,e,c,d){if(dd){var h=Yc(a,e,c,d);if(h===null)hd(a,e,d,id,c),Sc(a,d);else if(Uc(h,a,e,c,d))d.stopPropagation();else if(Sc(a,d),e&4&&-1<Rc.indexOf(a)){for(;h!==null;){var g=Cb(h);if(g!==null&&Ec(g),g=Yc(a,e,c,d),g===null&&hd(a,e,d,id,c),g===h)break;h=g}h!==null&&d.stopPropagation()}else hd(a,e,d,null,c)}}var id=null;function Yc(a,e,c,d){if(id=null,a=xb(d),a=Wc(a),a!==null)if(e=Vb(a),e===null)a=null;else if(c=e.tag,c===13){if(a=Wb(e),a!==null)return a;a=null}else if(c===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;a=null}else e!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,e=ld,c=e.length,d,h="value"in kd?kd.value:kd.textContent,g=h.length;for(a=0;a<c&&e[a]===h[a];a++);var b=c-a;for(d=1;d<=b&&e[c-d]===h[g-d];d++);return md=h.slice(a,1<d?1-d:void 0)}function od(a){var e=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&e===13&&(a=13)):a=e,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function e(c,d,h,g,b){this._reactName=c,this._targetInst=h,this.type=d,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var _e in a)a.hasOwnProperty(_e)&&(c=a[_e],this[_e]=c?c(g):g[_e]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(a):(a=Od[a])?!!e[a]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(a){if(a.key){var e=Md[a.key]||a.key;if(e!=="Unidentified")return e}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe=!1;function ge$1(a,e){switch(a){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie$1=!1;function je(a,e){switch(a){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe=!0,ee$1);case"textInput":return a=e.data,a===ee$1&&fe?null:a;default:return null}}function ke(a,e){if(ie$1)return a==="compositionend"||!ae$1&&ge$1(a,e)?(a=nd(),md=ld=kd=null,ie$1=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e==="input"?!!le$1[a.type]:e==="textarea"}function ne$1(a,e,c,d){Eb(d),e=oe$1(e,"onChange"),0<e.length&&(c=new td("onChange","change",null,c,d),a.push({event:c,listeners:e}))}var pe$1=null,qe=null;function re$1(a){se$1(a,0)}function te$1(a){var e=ue(a);if(Wa(e))return a}function ve$1(a,e){if(a==="change")return e}var we$1=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(a){if(a.propertyName==="value"&&te$1(qe)){var e=[];ne$1(e,qe,a,xb(a)),Jb(re$1,e)}}function Ce(a,e,c){a==="focusin"?(Ae(),pe$1=e,qe=c,pe$1.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te$1(qe)}function Ee(a,e){if(a==="click")return te$1(e)}function Fe(a,e){if(a==="input"||a==="change")return te$1(e)}function Ge(a,e){return a===e&&(a!==0||1/a===1/e)||a!==a&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,e){if(He(a,e))return!0;if(typeof a!="object"||a===null||typeof e!="object"||e===null)return!1;var c=Object.keys(a),d=Object.keys(e);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var h=c[d];if(!ja.call(e,h)||!He(a[h],e[h]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,e){var c=Je(a);a=0;for(var d;c;){if(c.nodeType===3){if(d=a+c.textContent.length,a<=e&&d>=e)return{node:c,offset:e-a};a=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,e){return a&&e?a===e?!0:a&&a.nodeType===3?!1:e&&e.nodeType===3?Le(a,e.parentNode):"contains"in a?a.contains(e):a.compareDocumentPosition?!!(a.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var a=window,e=Xa();e instanceof a.HTMLIFrameElement;){try{var c=typeof e.contentWindow.location.href=="string"}catch{c=!1}if(c)a=e.contentWindow;else break;e=Xa(a.document)}return e}function Ne(a){var e=a&&a.nodeName&&a.nodeName.toLowerCase();return e&&(e==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||e==="textarea"||a.contentEditable==="true")}function Oe(a){var e=Me(),c=a.focusedElem,d=a.selectionRange;if(e!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(d!==null&&Ne(c)){if(e=d.start,a=d.end,a===void 0&&(a=e),"selectionStart"in c)c.selectionStart=e,c.selectionEnd=Math.min(a,c.value.length);else if(a=(e=c.ownerDocument||document)&&e.defaultView||window,a.getSelection){a=a.getSelection();var h=c.textContent.length,g=Math.min(d.start,h);d=d.end===void 0?g:Math.min(d.end,h),!a.extend&&g>d&&(h=d,d=g,g=h),h=Ke(c,g);var b=Ke(c,d);h&&b&&(a.rangeCount!==1||a.anchorNode!==h.node||a.anchorOffset!==h.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(e=e.createRange(),e.setStart(h.node,h.offset),a.removeAllRanges(),g>d?(a.addRange(e),a.extend(b.node,b.offset)):(e.setEnd(b.node,b.offset),a.addRange(e)))}}for(e=[],a=c;a=a.parentNode;)a.nodeType===1&&e.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<e.length;c++)a=e[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(a,e,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Te$1||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe$1(Re,"onSelect"),0<d.length&&(e=new td("onSelect","select",null,e,c),a.push({event:e,listeners:d}),e.target=Qe)))}function Ve(a,e){var c={};return c[a.toLowerCase()]=e.toLowerCase(),c["Webkit"+a]="webkit"+e,c["Moz"+a]="moz"+e,c}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var e=We[a],c;for(c in e)if(e.hasOwnProperty(c)&&c in Ye)return Xe[a]=e[c];return a}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,e){df.set(a,e),fa(e,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,e,c){var d=a.type||"unknown-event";a.currentTarget=c,Ub(d,e,void 0,a),a.currentTarget=null}function se$1(a,e){e=(e&4)!==0;for(var c=0;c<a.length;c++){var d=a[c],h=d.event;d=d.listeners;e:{var g=void 0;if(e)for(var b=d.length-1;0<=b;b--){var _e=d[b],et=_e.instance,rt=_e.currentTarget;if(_e=_e.listener,et!==g&&h.isPropagationStopped())break e;nf(h,_e,rt),g=et}else for(b=0;b<d.length;b++){if(_e=d[b],et=_e.instance,rt=_e.currentTarget,_e=_e.listener,et!==g&&h.isPropagationStopped())break e;nf(h,_e,rt),g=et}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D$1(a,e){var c=e[of];c===void 0&&(c=e[of]=new Set);var d=a+"__bubble";c.has(d)||(pf(e,a,2,!1),c.add(d))}function qf(a,e,c){var d=0;e&&(d|=4),pf(c,a,d,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(c){c!=="selectionchange"&&(mf.has(c)||qf(c,!1,a),qf(c,!0,a))});var e=a.nodeType===9?a:a.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(a,e,c,d){switch(jd(e)){case 1:var h=ed;break;case 4:h=gd;break;default:h=fd}c=h.bind(null,e,c,a),h=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(h=!0),d?h!==void 0?a.addEventListener(e,c,{capture:!0,passive:h}):a.addEventListener(e,c,!0):h!==void 0?a.addEventListener(e,c,{passive:h}):a.addEventListener(e,c,!1)}function hd(a,e,c,d,h){var g=d;if(!(e&1)&&!(e&2)&&d!==null)e:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var _e=d.stateNode.containerInfo;if(_e===h||_e.nodeType===8&&_e.parentNode===h)break;if(b===4)for(b=d.return;b!==null;){var et=b.tag;if((et===3||et===4)&&(et=b.stateNode.containerInfo,et===h||et.nodeType===8&&et.parentNode===h))return;b=b.return}for(;_e!==null;){if(b=Wc(_e),b===null)return;if(et=b.tag,et===5||et===6){d=g=b;continue e}_e=_e.parentNode}}d=d.return}Jb(function(){var rt=g,st=xb(c),$=[];e:{var _=df.get(a);if(_!==void 0){var nt=td,it=a;switch(a){case"keypress":if(od(c)===0)break e;case"keydown":case"keyup":nt=Rd;break;case"focusin":it="focus",nt=Fd;break;case"focusout":it="blur",nt=Fd;break;case"beforeblur":case"afterblur":nt=Fd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=Vd;break;case $e$1:case af:case bf:nt=Hd;break;case cf:nt=Xd;break;case"scroll":nt=vd;break;case"wheel":nt=Zd;break;case"copy":case"cut":case"paste":nt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=Td}var ot=(e&4)!==0,lt=!ot&&a==="scroll",at=ot?_!==null?_+"Capture":null:_;ot=[];for(var ct=rt,dt;ct!==null;){dt=ct;var ht=dt.stateNode;if(dt.tag===5&&ht!==null&&(dt=ht,at!==null&&(ht=Kb(ct,at),ht!=null&&ot.push(tf(ct,ht,dt)))),lt)break;ct=ct.return}0<ot.length&&(_=new nt(_,it,null,c,st),$.push({event:_,listeners:ot}))}}if(!(e&7)){e:{if(_=a==="mouseover"||a==="pointerover",nt=a==="mouseout"||a==="pointerout",_&&c!==wb&&(it=c.relatedTarget||c.fromElement)&&(Wc(it)||it[uf]))break e;if((nt||_)&&(_=st.window===st?st:(_=st.ownerDocument)?_.defaultView||_.parentWindow:window,nt?(it=c.relatedTarget||c.toElement,nt=rt,it=it?Wc(it):null,it!==null&&(lt=Vb(it),it!==lt||it.tag!==5&&it.tag!==6)&&(it=null)):(nt=null,it=rt),nt!==it)){if(ot=Bd,ht="onMouseLeave",at="onMouseEnter",ct="mouse",(a==="pointerout"||a==="pointerover")&&(ot=Td,ht="onPointerLeave",at="onPointerEnter",ct="pointer"),lt=nt==null?_:ue(nt),dt=it==null?_:ue(it),_=new ot(ht,ct+"leave",nt,c,st),_.target=lt,_.relatedTarget=dt,ht=null,Wc(st)===rt&&(ot=new ot(at,ct+"enter",it,c,st),ot.target=dt,ot.relatedTarget=lt,ht=ot),lt=ht,nt&&it)t:{for(ot=nt,at=it,ct=0,dt=ot;dt;dt=vf(dt))ct++;for(dt=0,ht=at;ht;ht=vf(ht))dt++;for(;0<ct-dt;)ot=vf(ot),ct--;for(;0<dt-ct;)at=vf(at),dt--;for(;ct--;){if(ot===at||at!==null&&ot===at.alternate)break t;ot=vf(ot),at=vf(at)}ot=null}else ot=null;nt!==null&&wf($,_,nt,ot,!1),it!==null&&lt!==null&&wf($,lt,it,ot,!0)}}e:{if(_=rt?ue(rt):window,nt=_.nodeName&&_.nodeName.toLowerCase(),nt==="select"||nt==="input"&&_.type==="file")var pt=ve$1;else if(me$1(_))if(we$1)pt=Fe;else{pt=De;var ft=Ce}else(nt=_.nodeName)&&nt.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(pt=Ee);if(pt&&(pt=pt(a,rt))){ne$1($,pt,c,st);break e}ft&&ft(a,_,rt),a==="focusout"&&(ft=_._wrapperState)&&ft.controlled&&_.type==="number"&&cb(_,"number",_.value)}switch(ft=rt?ue(rt):window,a){case"focusin":(me$1(ft)||ft.contentEditable==="true")&&(Qe=ft,Re=rt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue($,c,st);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue($,c,st)}var mt;if(ae$1)e:{switch(a){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else ie$1?ge$1(a,c)&&(xt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(xt="onCompositionStart");xt&&(de$1&&c.locale!=="ko"&&(ie$1||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&ie$1&&(mt=nd()):(kd=st,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),ft=oe$1(rt,xt),0<ft.length&&(xt=new Ld(xt,a,null,c,st),$.push({event:xt,listeners:ft}),mt?xt.data=mt:(mt=he$1(c),mt!==null&&(xt.data=mt)))),(mt=ce$1?je(a,c):ke(a,c))&&(rt=oe$1(rt,"onBeforeInput"),0<rt.length&&(st=new Ld("onBeforeInput","beforeinput",null,c,st),$.push({event:st,listeners:rt}),st.data=mt))}se$1($,e)})}function tf(a,e,c){return{instance:a,listener:e,currentTarget:c}}function oe$1(a,e){for(var c=e+"Capture",d=[];a!==null;){var h=a,g=h.stateNode;h.tag===5&&g!==null&&(h=g,g=Kb(a,c),g!=null&&d.unshift(tf(a,g,h)),g=Kb(a,e),g!=null&&d.push(tf(a,g,h))),a=a.return}return d}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,e,c,d,h){for(var g=e._reactName,b=[];c!==null&&c!==d;){var _e=c,et=_e.alternate,rt=_e.stateNode;if(et!==null&&et===d)break;_e.tag===5&&rt!==null&&(_e=rt,h?(et=Kb(c,g),et!=null&&b.unshift(tf(c,et,_e))):h||(et=Kb(c,g),et!=null&&b.push(tf(c,et,_e)))),c=c.return}b.length!==0&&a.push({event:e,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,e,c){if(e=zf(e),zf(a)!==e&&c)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,e){return a==="textarea"||a==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,e){var c=e,d=0;do{var h=c.nextSibling;if(a.removeChild(c),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(d===0){a.removeChild(h),bd(e);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=h}while(c);bd(e)}function Lf(a){for(;a!=null;a=a.nextSibling){var e=a.nodeType;if(e===1||e===3)break;if(e===8){if(e=a.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var e=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"){if(e===0)return a;e--}else c==="/$"&&e++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var e=a[Of];if(e)return e;for(var c=a.parentNode;c;){if(e=c[uf]||c[Of]){if(c=e.alternate,e.child!==null||c!==null&&c.child!==null)for(a=Mf(a);a!==null;){if(c=a[Of])return c;a=Mf(a)}return e}a=c,c=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E$1(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,e){Tf++,Sf[Tf]=a.current,a.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,e){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===e)return d.__reactInternalMemoizedMaskedChildContext;var h={},g;for(g in c)h[g]=e[g];return d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=h),h}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E$1(Wf),E$1(H)}function ag(a,e,c){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,c)}function bg(a,e,c){var d=a.stateNode;if(e=e.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var h in d)if(!(h in e))throw Error(p(108,Ra(a)||"Unknown",h));return A({},c,d)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,a),G(Wf,Wf.current),!0}function dg(a,e,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,e,Xf),d.__reactInternalMemoizedMergedChildContext=a,E$1(Wf),E$1(H),G(H,a)):E$1(Wf),G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,e=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(h){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),h}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,e){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=e}function ug(a,e,c){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var d=rg;a=sg;var h=32-oc(d)-1;d&=~(1<<h),c+=1;var g=32-oc(e)+h;if(30<g){var b=h-h%5;g=(d&(1<<b)-1).toString(32),d>>=b,h-=b,rg=1<<32-oc(e)+h|c<<h|d,sg=g+a}else rg=1<<g|c<<h|d,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,e){var c=Bg(5,null,null,0);c.elementType="DELETED",c.stateNode=e,c.return=a,e=a.deletions,e===null?(a.deletions=[c],a.flags|=16):e.push(c)}function Cg(a,e){switch(a.tag){case 5:var c=a.type;return e=e.nodeType!==1||c.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(a.stateNode=e,xg=a,yg=Lf(e.firstChild),!0):!1;case 6:return e=a.pendingProps===""||e.nodeType!==3?null:e,e!==null?(a.stateNode=e,xg=a,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(c=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:e,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=e,c.return=a,a.child=c,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var e=yg;if(e){var c=e;if(!Cg(a,e)){if(Dg(a))throw Error(p(418));e=Lf(c.nextSibling);var d=xg;e&&Cg(a,e)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var e;if((e=a.tag!==3)&&!(e=a.tag!==5)&&(e=a.type,e=e!=="head"&&e!=="body"&&!Ef(a.type,a.memoizedProps)),e&&(e=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;e;)Ag(a,e),e=Lf(e.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p(317));e:{for(a=a.nextSibling,e=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"){if(e===0){yg=Lf(a.nextSibling);break e}e--}else c!=="$"&&c!=="$!"&&c!=="$?"||e++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,e,c){if(a=c.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var h=d,g=""+a;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===g?e.ref:(e=function(b){var _e=h.refs;b===null?delete _e[g]:_e[g]=b},e._stringRef=g,e)}if(typeof a!="string")throw Error(p(284));if(!c._owner)throw Error(p(290,a))}return a}function Mg(a,e){throw a=Object.prototype.toString.call(e),Error(p(31,a==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":a))}function Ng(a){var e=a._init;return e(a._payload)}function Og(a){function e(at,ct){if(a){var dt=at.deletions;dt===null?(at.deletions=[ct],at.flags|=16):dt.push(ct)}}function c(at,ct){if(!a)return null;for(;ct!==null;)e(at,ct),ct=ct.sibling;return null}function d(at,ct){for(at=new Map;ct!==null;)ct.key!==null?at.set(ct.key,ct):at.set(ct.index,ct),ct=ct.sibling;return at}function h(at,ct){return at=Pg(at,ct),at.index=0,at.sibling=null,at}function g(at,ct,dt){return at.index=dt,a?(dt=at.alternate,dt!==null?(dt=dt.index,dt<ct?(at.flags|=2,ct):dt):(at.flags|=2,ct)):(at.flags|=1048576,ct)}function b(at){return a&&at.alternate===null&&(at.flags|=2),at}function _e(at,ct,dt,ht){return ct===null||ct.tag!==6?(ct=Qg(dt,at.mode,ht),ct.return=at,ct):(ct=h(ct,dt),ct.return=at,ct)}function et(at,ct,dt,ht){var pt=dt.type;return pt===ya?st(at,ct,dt.props.children,ht,dt.key):ct!==null&&(ct.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===ct.type)?(ht=h(ct,dt.props),ht.ref=Lg(at,ct,dt),ht.return=at,ht):(ht=Rg(dt.type,dt.key,dt.props,null,at.mode,ht),ht.ref=Lg(at,ct,dt),ht.return=at,ht)}function rt(at,ct,dt,ht){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==dt.containerInfo||ct.stateNode.implementation!==dt.implementation?(ct=Sg(dt,at.mode,ht),ct.return=at,ct):(ct=h(ct,dt.children||[]),ct.return=at,ct)}function st(at,ct,dt,ht,pt){return ct===null||ct.tag!==7?(ct=Tg(dt,at.mode,ht,pt),ct.return=at,ct):(ct=h(ct,dt),ct.return=at,ct)}function $(at,ct,dt){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return ct=Qg(""+ct,at.mode,dt),ct.return=at,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case va:return dt=Rg(ct.type,ct.key,ct.props,null,at.mode,dt),dt.ref=Lg(at,null,ct),dt.return=at,dt;case wa:return ct=Sg(ct,at.mode,dt),ct.return=at,ct;case Ha:var ht=ct._init;return $(at,ht(ct._payload),dt)}if(eb(ct)||Ka(ct))return ct=Tg(ct,at.mode,dt,null),ct.return=at,ct;Mg(at,ct)}return null}function _(at,ct,dt,ht){var pt=ct!==null?ct.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return pt!==null?null:_e(at,ct,""+dt,ht);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return dt.key===pt?et(at,ct,dt,ht):null;case wa:return dt.key===pt?rt(at,ct,dt,ht):null;case Ha:return pt=dt._init,_(at,ct,pt(dt._payload),ht)}if(eb(dt)||Ka(dt))return pt!==null?null:st(at,ct,dt,ht,null);Mg(at,dt)}return null}function nt(at,ct,dt,ht,pt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return at=at.get(dt)||null,_e(ct,at,""+ht,pt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return at=at.get(ht.key===null?dt:ht.key)||null,et(ct,at,ht,pt);case wa:return at=at.get(ht.key===null?dt:ht.key)||null,rt(ct,at,ht,pt);case Ha:var ft=ht._init;return nt(at,ct,dt,ft(ht._payload),pt)}if(eb(ht)||Ka(ht))return at=at.get(dt)||null,st(ct,at,ht,pt,null);Mg(ct,ht)}return null}function it(at,ct,dt,ht){for(var pt=null,ft=null,mt=ct,xt=ct=0,gt=null;mt!==null&&xt<dt.length;xt++){mt.index>xt?(gt=mt,mt=null):gt=mt.sibling;var Et=_(at,mt,dt[xt],ht);if(Et===null){mt===null&&(mt=gt);break}a&&mt&&Et.alternate===null&&e(at,mt),ct=g(Et,ct,xt),ft===null?pt=Et:ft.sibling=Et,ft=Et,mt=gt}if(xt===dt.length)return c(at,mt),I&&tg(at,xt),pt;if(mt===null){for(;xt<dt.length;xt++)mt=$(at,dt[xt],ht),mt!==null&&(ct=g(mt,ct,xt),ft===null?pt=mt:ft.sibling=mt,ft=mt);return I&&tg(at,xt),pt}for(mt=d(at,mt);xt<dt.length;xt++)gt=nt(mt,at,xt,dt[xt],ht),gt!==null&&(a&&gt.alternate!==null&&mt.delete(gt.key===null?xt:gt.key),ct=g(gt,ct,xt),ft===null?pt=gt:ft.sibling=gt,ft=gt);return a&&mt.forEach(function(St){return e(at,St)}),I&&tg(at,xt),pt}function ot(at,ct,dt,ht){var pt=Ka(dt);if(typeof pt!="function")throw Error(p(150));if(dt=pt.call(dt),dt==null)throw Error(p(151));for(var ft=pt=null,mt=ct,xt=ct=0,gt=null,Et=dt.next();mt!==null&&!Et.done;xt++,Et=dt.next()){mt.index>xt?(gt=mt,mt=null):gt=mt.sibling;var St=_(at,mt,Et.value,ht);if(St===null){mt===null&&(mt=gt);break}a&&mt&&St.alternate===null&&e(at,mt),ct=g(St,ct,xt),ft===null?pt=St:ft.sibling=St,ft=St,mt=gt}if(Et.done)return c(at,mt),I&&tg(at,xt),pt;if(mt===null){for(;!Et.done;xt++,Et=dt.next())Et=$(at,Et.value,ht),Et!==null&&(ct=g(Et,ct,xt),ft===null?pt=Et:ft.sibling=Et,ft=Et);return I&&tg(at,xt),pt}for(mt=d(at,mt);!Et.done;xt++,Et=dt.next())Et=nt(mt,at,xt,Et.value,ht),Et!==null&&(a&&Et.alternate!==null&&mt.delete(Et.key===null?xt:Et.key),ct=g(Et,ct,xt),ft===null?pt=Et:ft.sibling=Et,ft=Et);return a&&mt.forEach(function(Pt){return e(at,Pt)}),I&&tg(at,xt),pt}function lt(at,ct,dt,ht){if(typeof dt=="object"&&dt!==null&&dt.type===ya&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:e:{for(var pt=dt.key,ft=ct;ft!==null;){if(ft.key===pt){if(pt=dt.type,pt===ya){if(ft.tag===7){c(at,ft.sibling),ct=h(ft,dt.props.children),ct.return=at,at=ct;break e}}else if(ft.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===Ha&&Ng(pt)===ft.type){c(at,ft.sibling),ct=h(ft,dt.props),ct.ref=Lg(at,ft,dt),ct.return=at,at=ct;break e}c(at,ft);break}else e(at,ft);ft=ft.sibling}dt.type===ya?(ct=Tg(dt.props.children,at.mode,ht,dt.key),ct.return=at,at=ct):(ht=Rg(dt.type,dt.key,dt.props,null,at.mode,ht),ht.ref=Lg(at,ct,dt),ht.return=at,at=ht)}return b(at);case wa:e:{for(ft=dt.key;ct!==null;){if(ct.key===ft)if(ct.tag===4&&ct.stateNode.containerInfo===dt.containerInfo&&ct.stateNode.implementation===dt.implementation){c(at,ct.sibling),ct=h(ct,dt.children||[]),ct.return=at,at=ct;break e}else{c(at,ct);break}else e(at,ct);ct=ct.sibling}ct=Sg(dt,at.mode,ht),ct.return=at,at=ct}return b(at);case Ha:return ft=dt._init,lt(at,ct,ft(dt._payload),ht)}if(eb(dt))return it(at,ct,dt,ht);if(Ka(dt))return ot(at,ct,dt,ht);Mg(at,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,ct!==null&&ct.tag===6?(c(at,ct.sibling),ct=h(ct,dt),ct.return=at,at=ct):(c(at,ct),ct=Qg(dt,at.mode,ht),ct.return=at,at=ct),b(at)):c(at,ct)}return lt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var e=Wg.current;E$1(Wg),a._currentValue=e}function bh(a,e,c){for(;a!==null;){var d=a.alternate;if((a.childLanes&e)!==e?(a.childLanes|=e,d!==null&&(d.childLanes|=e)):d!==null&&(d.childLanes&e)!==e&&(d.childLanes|=e),a===c)break;a=a.return}}function ch(a,e){Xg=a,Zg=Yg=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&e&&(dh=!0),a.firstContext=null)}function eh(a){var e=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=a,Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return e}var fh=null;function gh(a){fh===null?fh=[a]:fh.push(a)}function hh(a,e,c,d){var h=e.interleaved;return h===null?(c.next=c,gh(e)):(c.next=h.next,h.next=c),e.interleaved=c,ih(a,d)}function ih(a,e){a.lanes|=e;var c=a.alternate;for(c!==null&&(c.lanes|=e),c=a,a=a.return;a!==null;)a.childLanes|=e,c=a.alternate,c!==null&&(c.childLanes|=e),c=a,a=a.return;return c.tag===3?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(a,e){a=a.updateQueue,e.updateQueue===a&&(e.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,e){return{eventTime:a,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(a,e,c){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var h=d.pending;return h===null?e.next=e:(e.next=h.next,h.next=e),d.pending=e,ih(a,c)}return h=d.interleaved,h===null?(e.next=e,gh(d)):(e.next=h.next,h.next=e),d.interleaved=e,ih(a,c)}function oh(a,e,c){if(e=e.updateQueue,e!==null&&(e=e.shared,(c&4194240)!==0)){var d=e.lanes;d&=a.pendingLanes,c|=d,e.lanes=c,Cc(a,c)}}function ph(a,e){var c=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var h=null,g=null;if(c=c.firstBaseUpdate,c!==null){do{var b={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};g===null?h=g=b:g=g.next=b,c=c.next}while(c!==null);g===null?h=g=e:g=g.next=e}else h=g=e;c={baseState:d.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:d.shared,effects:d.effects},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=e:a.next=e,c.lastBaseUpdate=e}function qh(a,e,c,d){var h=a.updateQueue;jh=!1;var g=h.firstBaseUpdate,b=h.lastBaseUpdate,_e=h.shared.pending;if(_e!==null){h.shared.pending=null;var et=_e,rt=et.next;et.next=null,b===null?g=rt:b.next=rt,b=et;var st=a.alternate;st!==null&&(st=st.updateQueue,_e=st.lastBaseUpdate,_e!==b&&(_e===null?st.firstBaseUpdate=rt:_e.next=rt,st.lastBaseUpdate=et))}if(g!==null){var $=h.baseState;b=0,st=rt=et=null,_e=g;do{var _=_e.lane,nt=_e.eventTime;if((d&_)===_){st!==null&&(st=st.next={eventTime:nt,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var it=a,ot=_e;switch(_=e,nt=c,ot.tag){case 1:if(it=ot.payload,typeof it=="function"){$=it.call(nt,$,_);break e}$=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ot.payload,_=typeof it=="function"?it.call(nt,$,_):it,_==null)break e;$=A({},$,_);break e;case 2:jh=!0}}_e.callback!==null&&_e.lane!==0&&(a.flags|=64,_=h.effects,_===null?h.effects=[_e]:_.push(_e))}else nt={eventTime:nt,lane:_,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},st===null?(rt=st=nt,et=$):st=st.next=nt,b|=_;if(_e=_e.next,_e===null){if(_e=h.shared.pending,_e===null)break;_=_e,_e=_.next,_.next=null,h.lastBaseUpdate=_,h.shared.pending=null}}while(!0);if(st===null&&(et=$),h.baseState=et,h.firstBaseUpdate=rt,h.lastBaseUpdate=st,e=h.shared.interleaved,e!==null){h=e;do b|=h.lane,h=h.next;while(h!==e)}else g===null&&(h.shared.lanes=0);rh|=b,a.lanes=b,a.memoizedState=$}}function sh(a,e,c){if(a=e.effects,e.effects=null,a!==null)for(e=0;e<a.length;e++){var d=a[e],h=d.callback;if(h!==null){if(d.callback=null,d=c,typeof h!="function")throw Error(p(191,h));h.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}function yh(a,e){switch(G(wh,e),G(vh,a),G(uh,th),a=e.nodeType,a){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:a=a===8?e.parentNode:e,e=a.namespaceURI||null,a=a.tagName,e=lb(e,a)}E$1(uh),G(uh,e)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(a){xh(wh.current);var e=xh(uh.current),c=lb(e,a.type);e!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(a){for(var e=a;e!==null;){if(e.tag===13){var c=e.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p(321))}function Mh(a,e){if(e===null)return!1;for(var c=0;c<e.length&&c<a.length;c++)if(!He(a[c],e[c]))return!1;return!0}function Nh(a,e,c,d,h,g){if(Hh=g,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=a===null||a.memoizedState===null?Oh:Ph,a=c(d,h),Jh){g=0;do{if(Jh=!1,Kh=0,25<=g)throw Error(p(301));g+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,a=c(d,h)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M$1=null,Ih=!1,e)throw Error(p(300));return a}function Sh(){var a=Kh!==0;return Kh=0,a}function Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M$1.memoizedState=O=a:O=O.next=a,O}function Uh(){if(N===null){var a=M$1.alternate;a=a!==null?a.memoizedState:null}else a=N.next;var e=O===null?M$1.memoizedState:O.next;if(e!==null)O=e,N=a;else{if(a===null)throw Error(p(310));N=a,a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M$1.memoizedState=O=a:O=O.next=a}return O}function Vh(a,e){return typeof e=="function"?e(a):e}function Wh(a){var e=Uh(),c=e.queue;if(c===null)throw Error(p(311));c.lastRenderedReducer=a;var d=N,h=d.baseQueue,g=c.pending;if(g!==null){if(h!==null){var b=h.next;h.next=g.next,g.next=b}d.baseQueue=h=g,c.pending=null}if(h!==null){g=h.next,d=d.baseState;var _e=b=null,et=null,rt=g;do{var st=rt.lane;if((Hh&st)===st)et!==null&&(et=et.next={lane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),d=rt.hasEagerState?rt.eagerState:a(d,rt.action);else{var $={lane:st,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null};et===null?(_e=et=$,b=d):et=et.next=$,M$1.lanes|=st,rh|=st}rt=rt.next}while(rt!==null&&rt!==g);et===null?b=d:et.next=_e,He(d,e.memoizedState)||(dh=!0),e.memoizedState=d,e.baseState=b,e.baseQueue=et,c.lastRenderedState=d}if(a=c.interleaved,a!==null){h=a;do g=h.lane,M$1.lanes|=g,rh|=g,h=h.next;while(h!==a)}else h===null&&(c.lanes=0);return[e.memoizedState,c.dispatch]}function Xh(a){var e=Uh(),c=e.queue;if(c===null)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,h=c.pending,g=e.memoizedState;if(h!==null){c.pending=null;var b=h=h.next;do g=a(g,b.action),b=b.next;while(b!==h);He(g,e.memoizedState)||(dh=!0),e.memoizedState=g,e.baseQueue===null&&(e.baseState=g),c.lastRenderedState=g}return[g,d]}function Yh(){}function Zh(a,e){var c=M$1,d=Uh(),h=e(),g=!He(d.memoizedState,h);if(g&&(d.memoizedState=h,dh=!0),d=d.queue,$h(ai.bind(null,c,d,a),[a]),d.getSnapshot!==e||g||O!==null&&O.memoizedState.tag&1){if(c.flags|=2048,bi(9,ci.bind(null,c,d,h,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(c,e,h)}return h}function di(a,e,c){a.flags|=16384,a={getSnapshot:e,value:c},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[a]):(c=e.stores,c===null?e.stores=[a]:c.push(a))}function ci(a,e,c,d){e.value=c,e.getSnapshot=d,ei(e)&&fi(a)}function ai(a,e,c){return c(function(){ei(e)&&fi(a)})}function ei(a){var e=a.getSnapshot;a=a.value;try{var c=e();return!He(a,c)}catch{return!0}}function fi(a){var e=ih(a,1);e!==null&&gi(e,a,1,-1)}function hi(a){var e=Th();return typeof a=="function"&&(a=a()),e.memoizedState=e.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a},e.queue=a,a=a.dispatch=ii.bind(null,M$1,a),[e.memoizedState,a]}function bi(a,e,c,d){return a={tag:a,create:e,destroy:c,deps:d,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=a.next=a):(c=e.lastEffect,c===null?e.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,e.lastEffect=a)),a}function ji(){return Uh().memoizedState}function ki(a,e,c,d){var h=Th();M$1.flags|=a,h.memoizedState=bi(1|e,c,void 0,d===void 0?null:d)}function li(a,e,c,d){var h=Uh();d=d===void 0?null:d;var g=void 0;if(N!==null){var b=N.memoizedState;if(g=b.destroy,d!==null&&Mh(d,b.deps)){h.memoizedState=bi(e,c,g,d);return}}M$1.flags|=a,h.memoizedState=bi(1|e,c,g,d)}function mi(a,e){return ki(8390656,8,a,e)}function $h(a,e){return li(2048,8,a,e)}function ni(a,e){return li(4,2,a,e)}function oi(a,e){return li(4,4,a,e)}function pi(a,e){if(typeof e=="function")return a=a(),e(a),function(){e(null)};if(e!=null)return a=a(),e.current=a,function(){e.current=null}}function qi(a,e,c){return c=c!=null?c.concat([a]):null,li(4,4,pi.bind(null,e,a),c)}function ri(){}function si(a,e){var c=Uh();e=e===void 0?null:e;var d=c.memoizedState;return d!==null&&e!==null&&Mh(e,d[1])?d[0]:(c.memoizedState=[a,e],a)}function ti(a,e){var c=Uh();e=e===void 0?null:e;var d=c.memoizedState;return d!==null&&e!==null&&Mh(e,d[1])?d[0]:(a=a(),c.memoizedState=[a,e],a)}function ui(a,e,c){return Hh&21?(He(c,e)||(c=yc(),M$1.lanes|=c,rh|=c,a.baseState=!0),e):(a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c)}function vi(a,e){var c=C;C=c!==0&&4>c?c:4,a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),e()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(a,e,c){var d=yi(a);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},zi(a))Ai(e,c);else if(c=hh(a,e,c,d),c!==null){var h=R();gi(c,a,d,h),Bi(c,e,d)}}function ii(a,e,c){var d=yi(a),h={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(e,h);else{var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=e.lastRenderedReducer,g!==null))try{var b=e.lastRenderedState,_e=g(b,c);if(h.hasEagerState=!0,h.eagerState=_e,He(_e,b)){var et=e.interleaved;et===null?(h.next=h,gh(e)):(h.next=et.next,et.next=h),e.interleaved=h;return}}catch{}finally{}c=hh(a,e,h,d),c!==null&&(h=R(),gi(c,a,d,h),Bi(c,e,d))}}function zi(a){var e=a.alternate;return a===M$1||e!==null&&e===M$1}function Ai(a,e){Jh=Ih=!0;var c=a.pending;c===null?e.next=e:(e.next=c.next,c.next=e),a.pending=e}function Bi(a,e,c){if(c&4194240){var d=e.lanes;d&=a.pendingLanes,c|=d,e.lanes=c,Cc(a,c)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,e){return Th().memoizedState=[a,e===void 0?null:e],a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,e,c){return c=c!=null?c.concat([a]):null,ki(4194308,4,pi.bind(null,e,a),c)},useLayoutEffect:function(a,e){return ki(4194308,4,a,e)},useInsertionEffect:function(a,e){return ki(4,2,a,e)},useMemo:function(a,e){var c=Th();return e=e===void 0?null:e,a=a(),c.memoizedState=[a,e],a},useReducer:function(a,e,c){var d=Th();return e=c!==void 0?c(e):e,d.memoizedState=d.baseState=e,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:e},d.queue=a,a=a.dispatch=xi.bind(null,M$1,a),[d.memoizedState,a]},useRef:function(a){var e=Th();return a={current:a},e.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),e=a[0];return a=vi.bind(null,a[1]),Th().memoizedState=a,[e,a]},useMutableSource:function(){},useSyncExternalStore:function(a,e,c){var d=M$1,h=Th();if(I){if(c===void 0)throw Error(p(407));c=c()}else{if(c=e(),Q===null)throw Error(p(349));Hh&30||di(d,e,c)}h.memoizedState=c;var g={value:c,getSnapshot:e};return h.queue=g,mi(ai.bind(null,d,g,a),[a]),d.flags|=2048,bi(9,ci.bind(null,d,g,c,e),void 0,null),c},useId:function(){var a=Th(),e=Q.identifierPrefix;if(I){var c=sg,d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c,e=":"+e+"R"+c,c=Kh++,0<c&&(e+="H"+c.toString(32)),e+=":"}else c=Lh++,e=":"+e+"r"+c.toString(32)+":";return a.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return ui(e,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var e=Uh();return N===null?e.memoizedState=a:ui(e,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],e=Uh().memoizedState;return[a,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,e){if(a&&a.defaultProps){e=A({},e),a=a.defaultProps;for(var c in a)e[c]===void 0&&(e[c]=a[c]);return e}return e}function Di(a,e,c,d){e=a.memoizedState,c=c(d,e),c=c==null?e:A({},e,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,e,c){a=a._reactInternals;var d=R(),h=yi(a),g=mh(d,h);g.payload=e,c!=null&&(g.callback=c),e=nh(a,g,h),e!==null&&(gi(e,a,h,d),oh(e,a,h))},enqueueReplaceState:function(a,e,c){a=a._reactInternals;var d=R(),h=yi(a),g=mh(d,h);g.tag=1,g.payload=e,c!=null&&(g.callback=c),e=nh(a,g,h),e!==null&&(gi(e,a,h,d),oh(e,a,h))},enqueueForceUpdate:function(a,e){a=a._reactInternals;var c=R(),d=yi(a),h=mh(c,d);h.tag=2,e!=null&&(h.callback=e),e=nh(a,h,d),e!==null&&(gi(e,a,d,c),oh(e,a,d))}};function Fi(a,e,c,d,h,g,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,g,b):e.prototype&&e.prototype.isPureReactComponent?!Ie(c,d)||!Ie(h,g):!0}function Gi(a,e,c){var d=!1,h=Vf,g=e.contextType;return typeof g=="object"&&g!==null?g=eh(g):(h=Zf(e)?Xf:H.current,d=e.contextTypes,g=(d=d!=null)?Yf(a,h):Vf),e=new e(c,g),a.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,a.stateNode=e,e._reactInternals=a,d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=h,a.__reactInternalMemoizedMaskedChildContext=g),e}function Hi(a,e,c,d){a=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(c,d),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(c,d),e.state!==a&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(a,e,c,d){var h=a.stateNode;h.props=c,h.state=a.memoizedState,h.refs={},kh(a);var g=e.contextType;typeof g=="object"&&g!==null?h.context=eh(g):(g=Zf(e)?Xf:H.current,h.context=Yf(a,g)),h.state=a.memoizedState,g=e.getDerivedStateFromProps,typeof g=="function"&&(Di(a,e,g,c),h.state=a.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(e=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),e!==h.state&&Ei.enqueueReplaceState(h,h.state,null),qh(a,c,h,d),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308)}function Ji(a,e){try{var c="",d=e;do c+=Pa(d),d=d.return;while(d);var h=c}catch(g){h=`
Error generating stack: `+g.message+`
`+g.stack}return{value:a,source:e,stack:h,digest:null}}function Ki(a,e,c){return{value:a,source:null,stack:c??null,digest:e??null}}function Li(a,e){try{console.error(e.value)}catch(c){setTimeout(function(){throw c})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(a,e,c){c=mh(-1,c),c.tag=3,c.payload={element:null};var d=e.value;return c.callback=function(){Oi||(Oi=!0,Pi=d),Li(a,e)},c}function Qi(a,e,c){c=mh(-1,c),c.tag=3;var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var h=e.value;c.payload=function(){return d(h)},c.callback=function(){Li(a,e)}}var g=a.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(c.callback=function(){Li(a,e),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var b=e.stack;this.componentDidCatch(e.value,{componentStack:b!==null?b:""})}),c}function Si(a,e,c){var d=a.pingCache;if(d===null){d=a.pingCache=new Mi;var h=new Set;d.set(e,h)}else h=d.get(e),h===void 0&&(h=new Set,d.set(e,h));h.has(c)||(h.add(c),a=Ti.bind(null,a,e,c),e.then(a,a))}function Ui(a){do{var e;if((e=a.tag===13)&&(e=a.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return a;a=a.return}while(a!==null);return null}function Vi(a,e,c,d,h){return a.mode&1?(a.flags|=65536,a.lanes=h,a):(a===e?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(e=mh(-1,1),e.tag=2,nh(c,e,1))),c.lanes|=1),a)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,e,c,d){e.child=a===null?Vg(e,null,c,d):Ug(e,a.child,c,d)}function Yi(a,e,c,d,h){c=c.render;var g=e.ref;return ch(e,h),d=Nh(a,e,c,d,g,h),c=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~h,Zi(a,e,h)):(I&&c&&vg(e),e.flags|=1,Xi(a,e,d,h),e.child)}function $i(a,e,c,d,h){if(a===null){var g=c.type;return typeof g=="function"&&!aj(g)&&g.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(e.tag=15,e.type=g,bj(a,e,g,d,h)):(a=Rg(c.type,null,d,e,e.mode,h),a.ref=e.ref,a.return=e,e.child=a)}if(g=a.child,!(a.lanes&h)){var b=g.memoizedProps;if(c=c.compare,c=c!==null?c:Ie,c(b,d)&&a.ref===e.ref)return Zi(a,e,h)}return e.flags|=1,a=Pg(g,d),a.ref=e.ref,a.return=e,e.child=a}function bj(a,e,c,d,h){if(a!==null){var g=a.memoizedProps;if(Ie(g,d)&&a.ref===e.ref)if(dh=!1,e.pendingProps=d=g,(a.lanes&h)!==0)a.flags&131072&&(dh=!0);else return e.lanes=a.lanes,Zi(a,e,h)}return cj(a,e,c,d,h)}function dj(a,e,c){var d=e.pendingProps,h=d.children,g=a!==null?a.memoizedState:null;if(d.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(!(c&1073741824))return a=g!==null?g.baseLanes|c:c,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:a,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=a,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:c,G(ej,fj),fj|=d}else g!==null?(d=g.baseLanes|c,e.memoizedState=null):d=c,G(ej,fj),fj|=d;return Xi(a,e,h,c),e.child}function gj(a,e){var c=e.ref;(a===null&&c!==null||a!==null&&a.ref!==c)&&(e.flags|=512,e.flags|=2097152)}function cj(a,e,c,d,h){var g=Zf(c)?Xf:H.current;return g=Yf(e,g),ch(e,h),c=Nh(a,e,c,d,g,h),d=Sh(),a!==null&&!dh?(e.updateQueue=a.updateQueue,e.flags&=-2053,a.lanes&=~h,Zi(a,e,h)):(I&&d&&vg(e),e.flags|=1,Xi(a,e,c,h),e.child)}function hj(a,e,c,d,h){if(Zf(c)){var g=!0;cg(e)}else g=!1;if(ch(e,h),e.stateNode===null)ij(a,e),Gi(e,c,d),Ii(e,c,d,h),d=!0;else if(a===null){var b=e.stateNode,_e=e.memoizedProps;b.props=_e;var et=b.context,rt=c.contextType;typeof rt=="object"&&rt!==null?rt=eh(rt):(rt=Zf(c)?Xf:H.current,rt=Yf(e,rt));var st=c.getDerivedStateFromProps,$=typeof st=="function"||typeof b.getSnapshotBeforeUpdate=="function";$||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_e!==d||et!==rt)&&Hi(e,b,d,rt),jh=!1;var _=e.memoizedState;b.state=_,qh(e,d,b,h),et=e.memoizedState,_e!==d||_!==et||Wf.current||jh?(typeof st=="function"&&(Di(e,c,st,d),et=e.memoizedState),(_e=jh||Fi(e,c,_e,d,_,et,rt))?($||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(e.flags|=4194308)):(typeof b.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=d,e.memoizedState=et),b.props=d,b.state=et,b.context=rt,d=_e):(typeof b.componentDidMount=="function"&&(e.flags|=4194308),d=!1)}else{b=e.stateNode,lh(a,e),_e=e.memoizedProps,rt=e.type===e.elementType?_e:Ci(e.type,_e),b.props=rt,$=e.pendingProps,_=b.context,et=c.contextType,typeof et=="object"&&et!==null?et=eh(et):(et=Zf(c)?Xf:H.current,et=Yf(e,et));var nt=c.getDerivedStateFromProps;(st=typeof nt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_e!==$||_!==et)&&Hi(e,b,d,et),jh=!1,_=e.memoizedState,b.state=_,qh(e,d,b,h);var it=e.memoizedState;_e!==$||_!==it||Wf.current||jh?(typeof nt=="function"&&(Di(e,c,nt,d),it=e.memoizedState),(rt=jh||Fi(e,c,rt,d,_,it,et)||!1)?(st||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,it,et),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,it,et)),typeof b.componentDidUpdate=="function"&&(e.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof b.componentDidUpdate!="function"||_e===a.memoizedProps&&_===a.memoizedState||(e.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_e===a.memoizedProps&&_===a.memoizedState||(e.flags|=1024),e.memoizedProps=d,e.memoizedState=it),b.props=d,b.state=it,b.context=et,d=rt):(typeof b.componentDidUpdate!="function"||_e===a.memoizedProps&&_===a.memoizedState||(e.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_e===a.memoizedProps&&_===a.memoizedState||(e.flags|=1024),d=!1)}return jj(a,e,c,d,g,h)}function jj(a,e,c,d,h,g){gj(a,e);var b=(e.flags&128)!==0;if(!d&&!b)return h&&dg(e,c,!1),Zi(a,e,g);d=e.stateNode,Wi.current=e;var _e=b&&typeof c.getDerivedStateFromError!="function"?null:d.render();return e.flags|=1,a!==null&&b?(e.child=Ug(e,a.child,null,g),e.child=Ug(e,null,_e,g)):Xi(a,e,_e,g),e.memoizedState=d.state,h&&dg(e,c,!0),e.child}function kj(a){var e=a.stateNode;e.pendingContext?ag(a,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(a,e.context,!1),yh(a,e.containerInfo)}function lj(a,e,c,d,h){return Ig(),Jg(h),e.flags|=256,Xi(a,e,c,d),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}function oj(a,e,c){var d=e.pendingProps,h=L$1.current,g=!1,b=(e.flags&128)!==0,_e;if((_e=b)||(_e=a!==null&&a.memoizedState===null?!1:(h&2)!==0),_e?(g=!0,e.flags&=-129):(a===null||a.memoizedState!==null)&&(h|=1),G(L$1,h&1),a===null)return Eg(e),a=e.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(e.mode&1?a.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(b=d.children,a=d.fallback,g?(d=e.mode,g=e.child,b={mode:"hidden",children:b},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=b):g=pj(b,d,0,null),a=Tg(a,d,c,null),g.return=e,a.return=e,g.sibling=a,e.child=g,e.child.memoizedState=nj(c),e.memoizedState=mj,a):qj(e,b));if(h=a.memoizedState,h!==null&&(_e=h.dehydrated,_e!==null))return rj(a,e,b,d,_e,h,c);if(g){g=d.fallback,b=e.mode,h=a.child,_e=h.sibling;var et={mode:"hidden",children:d.children};return!(b&1)&&e.child!==h?(d=e.child,d.childLanes=0,d.pendingProps=et,e.deletions=null):(d=Pg(h,et),d.subtreeFlags=h.subtreeFlags&14680064),_e!==null?g=Pg(_e,g):(g=Tg(g,b,c,null),g.flags|=2),g.return=e,d.return=e,d.sibling=g,e.child=d,d=g,g=e.child,b=a.child.memoizedState,b=b===null?nj(c):{baseLanes:b.baseLanes|c,cachePool:null,transitions:b.transitions},g.memoizedState=b,g.childLanes=a.childLanes&~c,e.memoizedState=mj,d}return g=a.child,a=g.sibling,d=Pg(g,{mode:"visible",children:d.children}),!(e.mode&1)&&(d.lanes=c),d.return=e,d.sibling=null,a!==null&&(c=e.deletions,c===null?(e.deletions=[a],e.flags|=16):c.push(a)),e.child=d,e.memoizedState=null,d}function qj(a,e){return e=pj({mode:"visible",children:e},a.mode,0,null),e.return=a,a.child=e}function sj(a,e,c,d){return d!==null&&Jg(d),Ug(e,a.child,null,c),a=qj(e,e.pendingProps.children),a.flags|=2,e.memoizedState=null,a}function rj(a,e,c,d,h,g,b){if(c)return e.flags&256?(e.flags&=-257,d=Ki(Error(p(422))),sj(a,e,b,d)):e.memoizedState!==null?(e.child=a.child,e.flags|=128,null):(g=d.fallback,h=e.mode,d=pj({mode:"visible",children:d.children},h,0,null),g=Tg(g,h,b,null),g.flags|=2,d.return=e,g.return=e,d.sibling=g,e.child=d,e.mode&1&&Ug(e,a.child,null,b),e.child.memoizedState=nj(b),e.memoizedState=mj,g);if(!(e.mode&1))return sj(a,e,b,null);if(h.data==="$!"){if(d=h.nextSibling&&h.nextSibling.dataset,d)var _e=d.dgst;return d=_e,g=Error(p(419)),d=Ki(g,d,void 0),sj(a,e,b,d)}if(_e=(b&a.childLanes)!==0,dh||_e){if(d=Q,d!==null){switch(b&-b){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(d.suspendedLanes|b)?0:h,h!==0&&h!==g.retryLane&&(g.retryLane=h,ih(a,h),gi(d,a,h,-1))}return tj(),d=Ki(Error(p(421))),sj(a,e,b,d)}return h.data==="$?"?(e.flags|=128,e.child=a.child,e=uj.bind(null,a),h._reactRetry=e,null):(a=g.treeContext,yg=Lf(h.nextSibling),xg=e,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=e),e=qj(e,d.children),e.flags|=4096,e)}function vj(a,e,c){a.lanes|=e;var d=a.alternate;d!==null&&(d.lanes|=e),bh(a.return,e,c)}function wj(a,e,c,d,h){var g=a.memoizedState;g===null?a.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:h}:(g.isBackwards=e,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailMode=h)}function xj(a,e,c){var d=e.pendingProps,h=d.revealOrder,g=d.tail;if(Xi(a,e,d.children,c),d=L$1.current,d&2)d=d&1|2,e.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=e.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&vj(a,c,e);else if(a.tag===19)vj(a,c,e);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}d&=1}if(G(L$1,d),!(e.mode&1))e.memoizedState=null;else switch(h){case"forwards":for(c=e.child,h=null;c!==null;)a=c.alternate,a!==null&&Ch(a)===null&&(h=c),c=c.sibling;c=h,c===null?(h=e.child,e.child=null):(h=c.sibling,c.sibling=null),wj(e,!1,h,c,g);break;case"backwards":for(c=null,h=e.child,e.child=null;h!==null;){if(a=h.alternate,a!==null&&Ch(a)===null){e.child=h;break}a=h.sibling,h.sibling=c,c=h,h=a}wj(e,!0,c,null,g);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(a,e){!(e.mode&1)&&a!==null&&(a.alternate=null,e.alternate=null,e.flags|=2)}function Zi(a,e,c){if(a!==null&&(e.dependencies=a.dependencies),rh|=e.lanes,!(c&e.childLanes))return null;if(a!==null&&e.child!==a.child)throw Error(p(153));if(e.child!==null){for(a=e.child,c=Pg(a,a.pendingProps),e.child=c,c.return=e;a.sibling!==null;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=e;c.sibling=null}return e.child}function yj(a,e,c){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var d=e.type._context,h=e.memoizedProps.value;G(Wg,d._currentValue),d._currentValue=h;break;case 13:if(d=e.memoizedState,d!==null)return d.dehydrated!==null?(G(L$1,L$1.current&1),e.flags|=128,null):c&e.child.childLanes?oj(a,e,c):(G(L$1,L$1.current&1),a=Zi(a,e,c),a!==null?a.sibling:null);G(L$1,L$1.current&1);break;case 19:if(d=(c&e.childLanes)!==0,a.flags&128){if(d)return xj(a,e,c);e.flags|=128}if(h=e.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),G(L$1,L$1.current),d)break;return null;case 22:case 23:return e.lanes=0,dj(a,e,c)}return Zi(a,e,c)}var zj,Aj,Bj,Cj;zj=function(a,e){for(var c=e.child;c!==null;){if(c.tag===5||c.tag===6)a.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break;for(;c.sibling===null;){if(c.return===null||c.return===e)return;c=c.return}c.sibling.return=c.return,c=c.sibling}};Aj=function(){};Bj=function(a,e,c,d){var h=a.memoizedProps;if(h!==d){a=e.stateNode,xh(uh.current);var g=null;switch(c){case"input":h=Ya(a,h),d=Ya(a,d),g=[];break;case"select":h=A({},h,{value:void 0}),d=A({},d,{value:void 0}),g=[];break;case"textarea":h=gb(a,h),d=gb(a,d),g=[];break;default:typeof h.onClick!="function"&&typeof d.onClick=="function"&&(a.onclick=Bf)}ub(c,d);var b;c=null;for(rt in h)if(!d.hasOwnProperty(rt)&&h.hasOwnProperty(rt)&&h[rt]!=null)if(rt==="style"){var _e=h[rt];for(b in _e)_e.hasOwnProperty(b)&&(c||(c={}),c[b]="")}else rt!=="dangerouslySetInnerHTML"&&rt!=="children"&&rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?g||(g=[]):(g=g||[]).push(rt,null));for(rt in d){var et=d[rt];if(_e=h!=null?h[rt]:void 0,d.hasOwnProperty(rt)&&et!==_e&&(et!=null||_e!=null))if(rt==="style")if(_e){for(b in _e)!_e.hasOwnProperty(b)||et&&et.hasOwnProperty(b)||(c||(c={}),c[b]="");for(b in et)et.hasOwnProperty(b)&&_e[b]!==et[b]&&(c||(c={}),c[b]=et[b])}else c||(g||(g=[]),g.push(rt,c)),c=et;else rt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,_e=_e?_e.__html:void 0,et!=null&&_e!==et&&(g=g||[]).push(rt,et)):rt==="children"?typeof et!="string"&&typeof et!="number"||(g=g||[]).push(rt,""+et):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(rt)?(et!=null&&rt==="onScroll"&&D$1("scroll",a),g||_e===et||(g=[])):(g=g||[]).push(rt,et))}c&&(g=g||[]).push("style",c);var rt=g;(e.updateQueue=rt)&&(e.flags|=4)}};Cj=function(a,e,c,d){c!==d&&(e.flags|=4)};function Dj(a,e){if(!I)switch(a.tailMode){case"hidden":e=a.tail;for(var c=null;e!==null;)e.alternate!==null&&(c=e),e=e.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?e||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function S(a){var e=a.alternate!==null&&a.alternate.child===a.child,c=0,d=0;if(e)for(var h=a.child;h!==null;)c|=h.lanes|h.childLanes,d|=h.subtreeFlags&14680064,d|=h.flags&14680064,h.return=a,h=h.sibling;else for(h=a.child;h!==null;)c|=h.lanes|h.childLanes,d|=h.subtreeFlags,d|=h.flags,h.return=a,h=h.sibling;return a.subtreeFlags|=d,a.childLanes=c,e}function Ej(a,e,c){var d=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return d=e.stateNode,zh(),E$1(Wf),E$1(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Gg(e)?e.flags|=4:a===null||a.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(a,e),S(e),null;case 5:Bh(e);var h=xh(wh.current);if(c=e.type,a!==null&&e.stateNode!=null)Bj(a,e,c,d,h),a.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!d){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(a=xh(uh.current),Gg(e)){d=e.stateNode,c=e.type;var g=e.memoizedProps;switch(d[Of]=e,d[Pf]=g,a=(e.mode&1)!==0,c){case"dialog":D$1("cancel",d),D$1("close",d);break;case"iframe":case"object":case"embed":D$1("load",d);break;case"video":case"audio":for(h=0;h<lf.length;h++)D$1(lf[h],d);break;case"source":D$1("error",d);break;case"img":case"image":case"link":D$1("error",d),D$1("load",d);break;case"details":D$1("toggle",d);break;case"input":Za(d,g),D$1("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},D$1("invalid",d);break;case"textarea":hb(d,g),D$1("invalid",d)}ub(c,g),h=null;for(var b in g)if(g.hasOwnProperty(b)){var _e=g[b];b==="children"?typeof _e=="string"?d.textContent!==_e&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,_e,a),h=["children",_e]):typeof _e=="number"&&d.textContent!==""+_e&&(g.suppressHydrationWarning!==!0&&Af(d.textContent,_e,a),h=["children",""+_e]):ea.hasOwnProperty(b)&&_e!=null&&b==="onScroll"&&D$1("scroll",d)}switch(c){case"input":Va(d),db(d,g,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Bf)}d=h,e.updateQueue=d,d!==null&&(e.flags|=4)}else{b=h.nodeType===9?h:h.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(c)),a==="http://www.w3.org/1999/xhtml"?c==="script"?(a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof d.is=="string"?a=b.createElement(c,{is:d.is}):(a=b.createElement(c),c==="select"&&(b=a,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):a=b.createElementNS(a,c),a[Of]=e,a[Pf]=d,zj(a,e,!1,!1),e.stateNode=a;e:{switch(b=vb(c,d),c){case"dialog":D$1("cancel",a),D$1("close",a),h=d;break;case"iframe":case"object":case"embed":D$1("load",a),h=d;break;case"video":case"audio":for(h=0;h<lf.length;h++)D$1(lf[h],a);h=d;break;case"source":D$1("error",a),h=d;break;case"img":case"image":case"link":D$1("error",a),D$1("load",a),h=d;break;case"details":D$1("toggle",a),h=d;break;case"input":Za(a,d),h=Ya(a,d),D$1("invalid",a);break;case"option":h=d;break;case"select":a._wrapperState={wasMultiple:!!d.multiple},h=A({},d,{value:void 0}),D$1("invalid",a);break;case"textarea":hb(a,d),h=gb(a,d),D$1("invalid",a);break;default:h=d}ub(c,h),_e=h;for(g in _e)if(_e.hasOwnProperty(g)){var et=_e[g];g==="style"?sb(a,et):g==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&nb(a,et)):g==="children"?typeof et=="string"?(c!=="textarea"||et!=="")&&ob(a,et):typeof et=="number"&&ob(a,""+et):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea.hasOwnProperty(g)?et!=null&&g==="onScroll"&&D$1("scroll",a):et!=null&&ta(a,g,et,b))}switch(c){case"input":Va(a),db(a,d,!1);break;case"textarea":Va(a),jb(a);break;case"option":d.value!=null&&a.setAttribute("value",""+Sa(d.value));break;case"select":a.multiple=!!d.multiple,g=d.value,g!=null?fb(a,!!d.multiple,g,!1):d.defaultValue!=null&&fb(a,!!d.multiple,d.defaultValue,!0);break;default:typeof h.onClick=="function"&&(a.onclick=Bf)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(a&&e.stateNode!=null)Cj(a,e,a.memoizedProps,d);else{if(typeof d!="string"&&e.stateNode===null)throw Error(p(166));if(c=xh(wh.current),xh(uh.current),Gg(e)){if(d=e.stateNode,c=e.memoizedProps,d[Of]=e,(g=d.nodeValue!==c)&&(a=xg,a!==null))switch(a.tag){case 3:Af(d.nodeValue,c,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,c,(a.mode&1)!==0)}g&&(e.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Of]=e,e.stateNode=d}return S(e),null;case 13:if(E$1(L$1),d=e.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,g=!1;else if(g=Gg(e),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(p(318));if(g=e.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(p(317));g[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),g=!1}else zg!==null&&(Fj(zg),zg=null),g=!0;if(!g)return e.flags&65536?e:null}return e.flags&128?(e.lanes=c,e):(d=d!==null,d!==(a!==null&&a.memoizedState!==null)&&d&&(e.child.flags|=8192,e.mode&1&&(a===null||L$1.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(a,e),a===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E$1(L$1),g=e.memoizedState,g===null)return S(e),null;if(d=(e.flags&128)!==0,b=g.rendering,b===null)if(d)Dj(g,!1);else{if(T!==0||a!==null&&a.flags&128)for(a=e.child;a!==null;){if(b=Ch(a),b!==null){for(e.flags|=128,Dj(g,!1),d=b.updateQueue,d!==null&&(e.updateQueue=d,e.flags|=4),e.subtreeFlags=0,d=c,c=e.child;c!==null;)g=c,a=d,g.flags&=14680066,b=g.alternate,b===null?(g.childLanes=0,g.lanes=a,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=b.childLanes,g.lanes=b.lanes,g.child=b.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=b.memoizedProps,g.memoizedState=b.memoizedState,g.updateQueue=b.updateQueue,g.type=b.type,a=b.dependencies,g.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;return G(L$1,L$1.current&1|2),e.child}a=a.sibling}g.tail!==null&&B()>Gj&&(e.flags|=128,d=!0,Dj(g,!1),e.lanes=4194304)}else{if(!d)if(a=Ch(b),a!==null){if(e.flags|=128,d=!0,c=a.updateQueue,c!==null&&(e.updateQueue=c,e.flags|=4),Dj(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!I)return S(e),null}else 2*B()-g.renderingStartTime>Gj&&c!==1073741824&&(e.flags|=128,d=!0,Dj(g,!1),e.lanes=4194304);g.isBackwards?(b.sibling=e.child,e.child=b):(c=g.last,c!==null?c.sibling=b:e.child=b,g.last=b)}return g.tail!==null?(e=g.tail,g.rendering=e,g.tail=e.sibling,g.renderingStartTime=B(),e.sibling=null,c=L$1.current,G(L$1,d?c&1|2:c&1),e):(S(e),null);case 22:case 23:return Hj(),d=e.memoizedState!==null,a!==null&&a.memoizedState!==null!==d&&(e.flags|=8192),d&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(a,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),a=e.flags,a&65536&&!(a&128)?(e.flags=a&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$1(L$1),a=e.memoizedState,a!==null&&a.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return a=e.flags,a&65536?(e.flags=a&-65537|128,e):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(a,e){var c=a.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){W(a,e,d)}else c.current=null}function Mj(a,e,c){try{c()}catch(d){W(a,e,d)}}var Nj=!1;function Oj(a,e){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var h=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{c.nodeType,g.nodeType}catch{c=null;break e}var b=0,_e=-1,et=-1,rt=0,st=0,$=a,_=null;t:for(;;){for(var nt;$!==c||h!==0&&$.nodeType!==3||(_e=b+h),$!==g||d!==0&&$.nodeType!==3||(et=b+d),$.nodeType===3&&(b+=$.nodeValue.length),(nt=$.firstChild)!==null;)_=$,$=nt;for(;;){if($===a)break t;if(_===c&&++rt===h&&(_e=b),_===g&&++st===d&&(et=b),(nt=$.nextSibling)!==null)break;$=_,_=$.parentNode}$=nt}c=_e===-1||et===-1?null:{start:_e,end:et}}else c=null}c=c||{start:0,end:0}}else c=null;for(Df={focusedElem:a,selectionRange:c},dd=!1,V=e;V!==null;)if(e=V,a=e.child,(e.subtreeFlags&1028)!==0&&a!==null)a.return=e,V=a;else for(;V!==null;){e=V;try{var it=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var ot=it.memoizedProps,lt=it.memoizedState,at=e.stateNode,ct=at.getSnapshotBeforeUpdate(e.elementType===e.type?ot:Ci(e.type,ot),lt);at.__reactInternalSnapshotBeforeUpdate=ct}break;case 3:var dt=e.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(ht){W(e,e.return,ht)}if(a=e.sibling,a!==null){a.return=e.return,V=a;break}V=e.return}return it=Nj,Nj=!1,it}function Pj(a,e,c){var d=e.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var h=d=d.next;do{if((h.tag&a)===a){var g=h.destroy;h.destroy=void 0,g!==void 0&&Mj(e,c,g)}h=h.next}while(h!==d)}}function Qj(a,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var c=e=e.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==e)}}function Rj(a){var e=a.ref;if(e!==null){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}typeof e=="function"?e(a):e.current=a}}function Sj(a){var e=a.alternate;e!==null&&(a.alternate=null,Sj(e)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(e=a.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Tj(a){return a.tag===5||a.tag===3||a.tag===4}function Uj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Tj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Vj(a,e,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,e?c.nodeType===8?c.parentNode.insertBefore(a,e):c.insertBefore(a,e):(c.nodeType===8?(e=c.parentNode,e.insertBefore(a,c)):(e=c,e.appendChild(a)),c=c._reactRootContainer,c!=null||e.onclick!==null||(e.onclick=Bf));else if(d!==4&&(a=a.child,a!==null))for(Vj(a,e,c),a=a.sibling;a!==null;)Vj(a,e,c),a=a.sibling}function Wj(a,e,c){var d=a.tag;if(d===5||d===6)a=a.stateNode,e?c.insertBefore(a,e):c.appendChild(a);else if(d!==4&&(a=a.child,a!==null))for(Wj(a,e,c),a=a.sibling;a!==null;)Wj(a,e,c),a=a.sibling}var X$1=null,Xj=!1;function Yj(a,e,c){for(c=c.child;c!==null;)Zj(a,e,c),c=c.sibling}function Zj(a,e,c){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,c)}catch{}switch(c.tag){case 5:U||Lj(c,e);case 6:var d=X$1,h=Xj;X$1=null,Yj(a,e,c),X$1=d,Xj=h,X$1!==null&&(Xj?(a=X$1,c=c.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):X$1.removeChild(c.stateNode));break;case 18:X$1!==null&&(Xj?(a=X$1,c=c.stateNode,a.nodeType===8?Kf(a.parentNode,c):a.nodeType===1&&Kf(a,c),bd(a)):Kf(X$1,c.stateNode));break;case 4:d=X$1,h=Xj,X$1=c.stateNode.containerInfo,Xj=!0,Yj(a,e,c),X$1=d,Xj=h;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){h=d=d.next;do{var g=h,b=g.destroy;g=g.tag,b!==void 0&&(g&2||g&4)&&Mj(c,e,b),h=h.next}while(h!==d)}Yj(a,e,c);break;case 1:if(!U&&(Lj(c,e),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(_e){W(c,e,_e)}Yj(a,e,c);break;case 21:Yj(a,e,c);break;case 22:c.mode&1?(U=(d=U)||c.memoizedState!==null,Yj(a,e,c),U=d):Yj(a,e,c);break;default:Yj(a,e,c)}}function ak(a){var e=a.updateQueue;if(e!==null){a.updateQueue=null;var c=a.stateNode;c===null&&(c=a.stateNode=new Kj),e.forEach(function(d){var h=bk.bind(null,a,d);c.has(d)||(c.add(d),d.then(h,h))})}}function ck(a,e){var c=e.deletions;if(c!==null)for(var d=0;d<c.length;d++){var h=c[d];try{var g=a,b=e,_e=b;e:for(;_e!==null;){switch(_e.tag){case 5:X$1=_e.stateNode,Xj=!1;break e;case 3:X$1=_e.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=_e.stateNode.containerInfo,Xj=!0;break e}_e=_e.return}if(X$1===null)throw Error(p(160));Zj(g,b,h),X$1=null,Xj=!1;var et=h.alternate;et!==null&&(et.return=null),h.return=null}catch(rt){W(h,e,rt)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,a),e=e.sibling}function dk(a,e){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ck(e,a),ek(a),d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(ot){W(a,a.return,ot)}try{Pj(5,a,a.return)}catch(ot){W(a,a.return,ot)}}break;case 1:ck(e,a),ek(a),d&512&&c!==null&&Lj(c,c.return);break;case 5:if(ck(e,a),ek(a),d&512&&c!==null&&Lj(c,c.return),a.flags&32){var h=a.stateNode;try{ob(h,"")}catch(ot){W(a,a.return,ot)}}if(d&4&&(h=a.stateNode,h!=null)){var g=a.memoizedProps,b=c!==null?c.memoizedProps:g,_e=a.type,et=a.updateQueue;if(a.updateQueue=null,et!==null)try{_e==="input"&&g.type==="radio"&&g.name!=null&&ab(h,g),vb(_e,b);var rt=vb(_e,g);for(b=0;b<et.length;b+=2){var st=et[b],$=et[b+1];st==="style"?sb(h,$):st==="dangerouslySetInnerHTML"?nb(h,$):st==="children"?ob(h,$):ta(h,st,$,rt)}switch(_e){case"input":bb(h,g);break;case"textarea":ib(h,g);break;case"select":var _=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!g.multiple;var nt=g.value;nt!=null?fb(h,!!g.multiple,nt,!1):_!==!!g.multiple&&(g.defaultValue!=null?fb(h,!!g.multiple,g.defaultValue,!0):fb(h,!!g.multiple,g.multiple?[]:"",!1))}h[Pf]=g}catch(ot){W(a,a.return,ot)}}break;case 6:if(ck(e,a),ek(a),d&4){if(a.stateNode===null)throw Error(p(162));h=a.stateNode,g=a.memoizedProps;try{h.nodeValue=g}catch(ot){W(a,a.return,ot)}}break;case 3:if(ck(e,a),ek(a),d&4&&c!==null&&c.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ot){W(a,a.return,ot)}break;case 4:ck(e,a),ek(a);break;case 13:ck(e,a),ek(a),h=a.child,h.flags&8192&&(g=h.memoizedState!==null,h.stateNode.isHidden=g,!g||h.alternate!==null&&h.alternate.memoizedState!==null||(fk=B())),d&4&&ak(a);break;case 22:if(st=c!==null&&c.memoizedState!==null,a.mode&1?(U=(rt=U)||st,ck(e,a),U=rt):ck(e,a),ek(a),d&8192){if(rt=a.memoizedState!==null,(a.stateNode.isHidden=rt)&&!st&&a.mode&1)for(V=a,st=a.child;st!==null;){for($=V=st;V!==null;){switch(_=V,nt=_.child,_.tag){case 0:case 11:case 14:case 15:Pj(4,_,_.return);break;case 1:Lj(_,_.return);var it=_.stateNode;if(typeof it.componentWillUnmount=="function"){d=_,c=_.return;try{e=d,it.props=e.memoizedProps,it.state=e.memoizedState,it.componentWillUnmount()}catch(ot){W(d,c,ot)}}break;case 5:Lj(_,_.return);break;case 22:if(_.memoizedState!==null){gk($);continue}}nt!==null?(nt.return=_,V=nt):gk($)}st=st.sibling}e:for(st=null,$=a;;){if($.tag===5){if(st===null){st=$;try{h=$.stateNode,rt?(g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(_e=$.stateNode,et=$.memoizedProps.style,b=et!=null&&et.hasOwnProperty("display")?et.display:null,_e.style.display=rb("display",b))}catch(ot){W(a,a.return,ot)}}}else if($.tag===6){if(st===null)try{$.stateNode.nodeValue=rt?"":$.memoizedProps}catch(ot){W(a,a.return,ot)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===a)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===a)break e;for(;$.sibling===null;){if($.return===null||$.return===a)break e;st===$&&(st=null),$=$.return}st===$&&(st=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:ck(e,a),ek(a),d&4&&ak(a);break;case 21:break;default:ck(e,a),ek(a)}}function ek(a){var e=a.flags;if(e&2){try{e:{for(var c=a.return;c!==null;){if(Tj(c)){var d=c;break e}c=c.return}throw Error(p(160))}switch(d.tag){case 5:var h=d.stateNode;d.flags&32&&(ob(h,""),d.flags&=-33);var g=Uj(a);Wj(a,g,h);break;case 3:case 4:var b=d.stateNode.containerInfo,_e=Uj(a);Vj(a,_e,b);break;default:throw Error(p(161))}}catch(et){W(a,a.return,et)}a.flags&=-3}e&4096&&(a.flags&=-4097)}function hk(a,e,c){V=a,ik(a)}function ik(a,e,c){for(var d=(a.mode&1)!==0;V!==null;){var h=V,g=h.child;if(h.tag===22&&d){var b=h.memoizedState!==null||Jj;if(!b){var _e=h.alternate,et=_e!==null&&_e.memoizedState!==null||U;_e=Jj;var rt=U;if(Jj=b,(U=et)&&!rt)for(V=h;V!==null;)b=V,et=b.child,b.tag===22&&b.memoizedState!==null?jk(h):et!==null?(et.return=b,V=et):jk(h);for(;g!==null;)V=g,ik(g),g=g.sibling;V=h,Jj=_e,U=rt}kk(a)}else h.subtreeFlags&8772&&g!==null?(g.return=h,V=g):kk(a)}}function kk(a){for(;V!==null;){var e=V;if(e.flags&8772){var c=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var d=e.stateNode;if(e.flags&4&&!U)if(c===null)d.componentDidMount();else{var h=e.elementType===e.type?c.memoizedProps:Ci(e.type,c.memoizedProps);d.componentDidUpdate(h,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=e.updateQueue;g!==null&&sh(e,g,d);break;case 3:var b=e.updateQueue;if(b!==null){if(c=null,e.child!==null)switch(e.child.tag){case 5:c=e.child.stateNode;break;case 1:c=e.child.stateNode}sh(e,b,c)}break;case 5:var _e=e.stateNode;if(c===null&&e.flags&4){c=_e;var et=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&c.focus();break;case"img":et.src&&(c.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var rt=e.alternate;if(rt!==null){var st=rt.memoizedState;if(st!==null){var $=st.dehydrated;$!==null&&bd($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(_){W(e,e.return,_)}}if(e===a){V=null;break}if(c=e.sibling,c!==null){c.return=e.return,V=c;break}V=e.return}}function gk(a){for(;V!==null;){var e=V;if(e===a){V=null;break}var c=e.sibling;if(c!==null){c.return=e.return,V=c;break}V=e.return}}function jk(a){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var c=e.return;try{Qj(4,e)}catch(et){W(e,c,et)}break;case 1:var d=e.stateNode;if(typeof d.componentDidMount=="function"){var h=e.return;try{d.componentDidMount()}catch(et){W(e,h,et)}}var g=e.return;try{Rj(e)}catch(et){W(e,g,et)}break;case 5:var b=e.return;try{Rj(e)}catch(et){W(e,b,et)}}}catch(et){W(e,e.return,et)}if(e===a){V=null;break}var _e=e.sibling;if(_e!==null){_e.return=e.return,V=_e;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok$2=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(a){return a.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function gi(a,e,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d),(!(K&2)||a!==Q)&&(a===Q&&(!(K&2)&&(qk|=c),T===4&&Ck(a,Z)),Dk(a,d),c===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(a,e){var c=a.callbackNode;wc(a,e);var d=uc(a,a===Q?Z:0);if(d===0)c!==null&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(e=d&-d,a.callbackPriority!==e){if(c!=null&&bc(c),e===1)a.tag===0?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){!(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=e,a.callbackNode=c}}function Gk(a,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(d===0)return null;if(d&30||d&a.expiredLanes||e)e=Ik(a,d);else{e=d;var h=K;K|=2;var g=Jk();(Q!==a||Z!==e)&&(uk=null,Gj=B()+500,Kk(a,e));do try{Lk();break}catch(_e){Mk(a,_e)}while(!0);$g(),mk.current=g,K=h,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(h=xc(a),h!==0&&(d=h,e=Nk(a,h))),e===1)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(e===6)Ck(a,d);else{if(h=a.current.alternate,!(d&30)&&!Ok(h)&&(e=Ik(a,d),e===2&&(g=xc(a),g!==0&&(d=g,e=Nk(a,g))),e===1))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;switch(a.finishedWork=h,a.finishedLanes=d,e){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:if(Ck(a,d),(d&130023424)===d&&(e=fk+500-B(),10<e)){if(uc(a,0)!==0)break;if(h=a.suspendedLanes,(h&d)!==d){R(),a.pingedLanes|=a.suspendedLanes&h;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),e);break}Pk(a,tk,uk);break;case 4:if(Ck(a,d),(d&4194240)===d)break;for(e=a.eventTimes,h=-1;0<d;){var b=31-oc(d);g=1<<b,b=e[b],b>h&&(h=b),d&=~g}if(d=h,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329))}}}return Dk(a,B()),a.callbackNode===c?Gk.bind(null,a):null}function Nk(a,e){var c=sk;return a.current.memoizedState.isDehydrated&&(Kk(a,e).flags|=256),a=Ik(a,e),a!==2&&(e=tk,tk=c,e!==null&&Fj(e)),a}function Fj(a){tk===null?tk=a:tk.push.apply(tk,a)}function Ok(a){for(var e=a;;){if(e.flags&16384){var c=e.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var h=c[d],g=h.getSnapshot;h=h.value;try{if(!He(g(),h))return!1}catch{return!1}}}if(c=e.child,e.subtreeFlags&16384&&c!==null)c.return=e,e=c;else{if(e===a)break;for(;e.sibling===null;){if(e.return===null||e.return===a)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(a,e){for(e&=~rk,e&=~qk,a.suspendedLanes|=e,a.pingedLanes&=~e,a=a.expirationTimes;0<e;){var c=31-oc(e),d=1<<c;a[c]=-1,e&=~d}}function Ek(a){if(K&6)throw Error(p(327));Hk();var e=uc(a,0);if(!(e&1))return Dk(a,B()),null;var c=Ik(a,e);if(a.tag!==0&&c===2){var d=xc(a);d!==0&&(e=d,c=Nk(a,d))}if(c===1)throw c=pk,Kk(a,0),Ck(a,e),Dk(a,B()),c;if(c===6)throw Error(p(345));return a.finishedWork=a.current.alternate,a.finishedLanes=e,Pk(a,tk,uk),Dk(a,B()),null}function Qk(a,e){var c=K;K|=1;try{return a(e)}finally{K=c,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(a){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var c=ok$2.transition,d=C;try{if(ok$2.transition=null,C=1,a)return a()}finally{C=d,ok$2.transition=c,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(a,e){a.finishedWork=null,a.finishedLanes=0;var c=a.timeoutHandle;if(c!==-1&&(a.timeoutHandle=-1,Gf(c)),Y!==null)for(c=Y.return;c!==null;){var d=c;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}if(Q=a,Y=a=Pg(a.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(c=fh[e],d=c.interleaved,d!==null){c.interleaved=null;var h=d.next,g=c.pending;if(g!==null){var b=g.next;g.next=h,d.next=b}c.pending=d}fh=null}return a}function Mk(a,e){do{var c=Y;try{if($g(),Fh.current=Rh,Ih){for(var d=M$1.memoizedState;d!==null;){var h=d.queue;h!==null&&(h.pending=null),d=d.next}Ih=!1}if(Hh=0,O=N=M$1=null,Jh=!1,Kh=0,nk.current=null,c===null||c.return===null){T=1,pk=e,Y=null;break}e:{var g=a,b=c.return,_e=c,et=e;if(e=Z,_e.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var rt=et,st=_e,$=st.tag;if(!(st.mode&1)&&($===0||$===11||$===15)){var _=st.alternate;_?(st.updateQueue=_.updateQueue,st.memoizedState=_.memoizedState,st.lanes=_.lanes):(st.updateQueue=null,st.memoizedState=null)}var nt=Ui(b);if(nt!==null){nt.flags&=-257,Vi(nt,b,_e,g,e),nt.mode&1&&Si(g,rt,e),e=nt,et=rt;var it=e.updateQueue;if(it===null){var ot=new Set;ot.add(et),e.updateQueue=ot}else it.add(et);break e}else{if(!(e&1)){Si(g,rt,e),tj();break e}et=Error(p(426))}}else if(I&&_e.mode&1){var lt=Ui(b);if(lt!==null){!(lt.flags&65536)&&(lt.flags|=256),Vi(lt,b,_e,g,e),Jg(Ji(et,_e));break e}}g=et=Ji(et,_e),T!==4&&(T=2),sk===null?sk=[g]:sk.push(g),g=b;do{switch(g.tag){case 3:g.flags|=65536,e&=-e,g.lanes|=e;var at=Ni(g,et,e);ph(g,at);break e;case 1:_e=et;var ct=g.type,dt=g.stateNode;if(!(g.flags&128)&&(typeof ct.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(Ri===null||!Ri.has(dt)))){g.flags|=65536,e&=-e,g.lanes|=e;var ht=Qi(g,_e,e);ph(g,ht);break e}}g=g.return}while(g!==null)}Sk(c)}catch(pt){e=pt,Y===c&&c!==null&&(Y=c=c.return);continue}break}while(!0)}function Jk(){var a=mk.current;return mk.current=Rh,a===null?Rh:a}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(a,e){var c=K;K|=2;var d=Jk();(Q!==a||Z!==e)&&(uk=null,Kk(a,e));do try{Tk();break}catch(h){Mk(a,h)}while(!0);if($g(),K=c,mk.current=d,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(a){var e=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps,e===null?Sk(a):Y=e,nk.current=null}function Sk(a){var e=a;do{var c=e.alternate;if(a=e.return,e.flags&32768){if(c=Ij(c,e),c!==null){c.flags&=32767,Y=c;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6,Y=null;return}}else if(c=Ej(c,e,fj),c!==null){Y=c;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=a}while(e!==null);T===0&&(T=5)}function Pk(a,e,c){var d=C,h=ok$2.transition;try{ok$2.transition=null,C=1,Wk(a,e,c,d)}finally{ok$2.transition=h,C=d}return null}function Wk(a,e,c,d){do Hk();while(wk!==null);if(K&6)throw Error(p(327));c=a.finishedWork;var h=a.finishedLanes;if(c===null)return null;if(a.finishedWork=null,a.finishedLanes=0,c===a.current)throw Error(p(177));a.callbackNode=null,a.callbackPriority=0;var g=c.lanes|c.childLanes;if(Bc(a,g),a===Q&&(Y=Q=null,Z=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),g=(c.flags&15990)!==0,c.subtreeFlags&15990||g){g=ok$2.transition,ok$2.transition=null;var b=C;C=1;var _e=K;K|=4,nk.current=null,Oj(a,c),dk(c,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=c,hk(c),dc(),K=_e,C=b,ok$2.transition=g}else a.current=c;if(vk&&(vk=!1,wk=a,xk=h),g=a.pendingLanes,g===0&&(Ri=null),mc(c.stateNode),Dk(a,B()),e!==null)for(d=a.onRecoverableError,c=0;c<e.length;c++)h=e[c],d(h.value,{componentStack:h.stack,digest:h.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;return xk&1&&a.tag!==0&&Hk(),g=a.pendingLanes,g&1?a===zk?yk++:(yk=0,zk=a):yk=0,jg(),null}function Hk(){if(wk!==null){var a=Dc(xk),e=ok$2.transition,c=C;try{if(ok$2.transition=null,C=16>a?16:a,wk===null)var d=!1;else{if(a=wk,wk=null,xk=0,K&6)throw Error(p(331));var h=K;for(K|=4,V=a.current;V!==null;){var g=V,b=g.child;if(V.flags&16){var _e=g.deletions;if(_e!==null){for(var et=0;et<_e.length;et++){var rt=_e[et];for(V=rt;V!==null;){var st=V;switch(st.tag){case 0:case 11:case 15:Pj(8,st,g)}var $=st.child;if($!==null)$.return=st,V=$;else for(;V!==null;){st=V;var _=st.sibling,nt=st.return;if(Sj(st),st===rt){V=null;break}if(_!==null){_.return=nt,V=_;break}V=nt}}}var it=g.alternate;if(it!==null){var ot=it.child;if(ot!==null){it.child=null;do{var lt=ot.sibling;ot.sibling=null,ot=lt}while(ot!==null)}}V=g}}if(g.subtreeFlags&2064&&b!==null)b.return=g,V=b;else e:for(;V!==null;){if(g=V,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Pj(9,g,g.return)}var at=g.sibling;if(at!==null){at.return=g.return,V=at;break e}V=g.return}}var ct=a.current;for(V=ct;V!==null;){b=V;var dt=b.child;if(b.subtreeFlags&2064&&dt!==null)dt.return=b,V=dt;else e:for(b=ct;V!==null;){if(_e=V,_e.flags&2048)try{switch(_e.tag){case 0:case 11:case 15:Qj(9,_e)}}catch(pt){W(_e,_e.return,pt)}if(_e===b){V=null;break e}var ht=_e.sibling;if(ht!==null){ht.return=_e.return,V=ht;break e}V=_e.return}}if(K=h,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}d=!0}return d}finally{C=c,ok$2.transition=e}}return!1}function Xk(a,e,c){e=Ji(c,e),e=Ni(a,e,1),a=nh(a,e,1),e=R(),a!==null&&(Ac(a,1,e),Dk(a,e))}function W(a,e,c){if(a.tag===3)Xk(a,a,c);else for(;e!==null;){if(e.tag===3){Xk(e,a,c);break}else if(e.tag===1){var d=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){a=Ji(c,a),a=Qi(e,a,1),e=nh(e,a,1),a=R(),e!==null&&(Ac(e,1,a),Dk(e,a));break}}e=e.return}}function Ti(a,e,c){var d=a.pingCache;d!==null&&d.delete(e),e=R(),a.pingedLanes|=a.suspendedLanes&c,Q===a&&(Z&c)===c&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c),Dk(a,e)}function Yk(a,e){e===0&&(a.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var c=R();a=ih(a,e),a!==null&&(Ac(a,e,c),Dk(a,c))}function uj(a){var e=a.memoizedState,c=0;e!==null&&(c=e.retryLane),Yk(a,c)}function bk(a,e){var c=0;switch(a.tag){case 13:var d=a.stateNode,h=a.memoizedState;h!==null&&(c=h.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314))}d!==null&&d.delete(e),Yk(a,c)}var Vk;Vk=function(a,e,c){if(a!==null)if(a.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(a.lanes&c)&&!(e.flags&128))return dh=!1,yj(a,e,c);dh=!!(a.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var d=e.type;ij(a,e),a=e.pendingProps;var h=Yf(e,H.current);ch(e,c),h=Nh(null,e,d,a,h,c);var g=Sh();return e.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(d)?(g=!0,cg(e)):g=!1,e.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,kh(e),h.updater=Ei,e.stateNode=h,h._reactInternals=e,Ii(e,d,a,c),e=jj(null,e,d,!0,g,c)):(e.tag=0,I&&g&&vg(e),Xi(null,e,h,c),e=e.child),e;case 16:d=e.elementType;e:{switch(ij(a,e),a=e.pendingProps,h=d._init,d=h(d._payload),e.type=d,h=e.tag=Zk(d),a=Ci(d,a),h){case 0:e=cj(null,e,d,a,c);break e;case 1:e=hj(null,e,d,a,c);break e;case 11:e=Yi(null,e,d,a,c);break e;case 14:e=$i(null,e,d,Ci(d.type,a),c);break e}throw Error(p(306,d,""))}return e;case 0:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),cj(a,e,d,h,c);case 1:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),hj(a,e,d,h,c);case 3:e:{if(kj(e),a===null)throw Error(p(387));d=e.pendingProps,g=e.memoizedState,h=g.element,lh(a,e),qh(e,d,null,c);var b=e.memoizedState;if(d=b.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},e.updateQueue.baseState=g,e.memoizedState=g,e.flags&256){h=Ji(Error(p(423)),e),e=lj(a,e,d,c,h);break e}else if(d!==h){h=Ji(Error(p(424)),e),e=lj(a,e,d,c,h);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,c=Vg(e,null,d,c),e.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ig(),d===h){e=Zi(a,e,c);break e}Xi(a,e,d,c)}e=e.child}return e;case 5:return Ah(e),a===null&&Eg(e),d=e.type,h=e.pendingProps,g=a!==null?a.memoizedProps:null,b=h.children,Ef(d,h)?b=null:g!==null&&Ef(d,g)&&(e.flags|=32),gj(a,e),Xi(a,e,b,c),e.child;case 6:return a===null&&Eg(e),null;case 13:return oj(a,e,c);case 4:return yh(e,e.stateNode.containerInfo),d=e.pendingProps,a===null?e.child=Ug(e,null,d,c):Xi(a,e,d,c),e.child;case 11:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),Yi(a,e,d,h,c);case 7:return Xi(a,e,e.pendingProps,c),e.child;case 8:return Xi(a,e,e.pendingProps.children,c),e.child;case 12:return Xi(a,e,e.pendingProps.children,c),e.child;case 10:e:{if(d=e.type._context,h=e.pendingProps,g=e.memoizedProps,b=h.value,G(Wg,d._currentValue),d._currentValue=b,g!==null)if(He(g.value,b)){if(g.children===h.children&&!Wf.current){e=Zi(a,e,c);break e}}else for(g=e.child,g!==null&&(g.return=e);g!==null;){var _e=g.dependencies;if(_e!==null){b=g.child;for(var et=_e.firstContext;et!==null;){if(et.context===d){if(g.tag===1){et=mh(-1,c&-c),et.tag=2;var rt=g.updateQueue;if(rt!==null){rt=rt.shared;var st=rt.pending;st===null?et.next=et:(et.next=st.next,st.next=et),rt.pending=et}}g.lanes|=c,et=g.alternate,et!==null&&(et.lanes|=c),bh(g.return,c,e),_e.lanes|=c;break}et=et.next}}else if(g.tag===10)b=g.type===e.type?null:g.child;else if(g.tag===18){if(b=g.return,b===null)throw Error(p(341));b.lanes|=c,_e=b.alternate,_e!==null&&(_e.lanes|=c),bh(b,c,e),b=g.sibling}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===e){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}Xi(a,e,h.children,c),e=e.child}return e;case 9:return h=e.type,d=e.pendingProps.children,ch(e,c),h=eh(h),d=d(h),e.flags|=1,Xi(a,e,d,c),e.child;case 14:return d=e.type,h=Ci(d,e.pendingProps),h=Ci(d.type,h),$i(a,e,d,h,c);case 15:return bj(a,e,e.type,e.pendingProps,c);case 17:return d=e.type,h=e.pendingProps,h=e.elementType===d?h:Ci(d,h),ij(a,e),e.tag=1,Zf(d)?(a=!0,cg(e)):a=!1,ch(e,c),Gi(e,d,h),Ii(e,d,h,c),jj(null,e,d,!0,a,c);case 19:return xj(a,e,c);case 22:return dj(a,e,c)}throw Error(p(156,e.tag))};function Fk(a,e){return ac(a,e)}function $k(a,e,c,d){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,e,c,d){return new $k(a,e,c,d)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Zk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function Pg(a,e){var c=a.alternate;return c===null?(c=Bg(a.tag,e,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=e,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&14680064,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,e=a.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c}function Rg(a,e,c,d,h,g){var b=2;if(d=a,typeof a=="function")aj(a)&&(b=1);else if(typeof a=="string")b=5;else e:switch(a){case ya:return Tg(c.children,h,g,e);case za:b=8,h|=8;break;case Aa:return a=Bg(12,c,e,h|2),a.elementType=Aa,a.lanes=g,a;case Ea:return a=Bg(13,c,e,h),a.elementType=Ea,a.lanes=g,a;case Fa:return a=Bg(19,c,e,h),a.elementType=Fa,a.lanes=g,a;case Ia:return pj(c,h,g,e);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:b=10;break e;case Ca:b=9;break e;case Da:b=11;break e;case Ga:b=14;break e;case Ha:b=16,d=null;break e}throw Error(p(130,a==null?a:typeof a,""))}return e=Bg(b,c,e,h),e.elementType=a,e.type=d,e.lanes=g,e}function Tg(a,e,c,d){return a=Bg(7,a,d,e),a.lanes=c,a}function pj(a,e,c,d){return a=Bg(22,a,d,e),a.elementType=Ia,a.lanes=c,a.stateNode={isHidden:!1},a}function Qg(a,e,c){return a=Bg(6,a,null,e),a.lanes=c,a}function Sg(a,e,c){return e=Bg(4,a.children!==null?a.children:[],a.key,e),e.lanes=c,e.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},e}function al(a,e,c,d,h){this.tag=e,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bl(a,e,c,d,h,g,b,_e,et){return a=new al(a,e,c,_e,et),e===1?(e=1,g===!0&&(e|=8)):e=0,g=Bg(3,null,null,e),a.current=g,g.stateNode=a,g.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(g),a}function cl(a,e,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:a,containerInfo:e,implementation:c}}function dl(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p(170));var e=a;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(a.tag===1){var c=a.type;if(Zf(c))return bg(a,c,e)}return e}function el(a,e,c,d,h,g,b,_e,et){return a=bl(c,d,!0,a,h,g,b,_e,et),a.context=dl(null),c=a.current,d=R(),h=yi(c),g=mh(d,h),g.callback=e??null,nh(c,g,h),a.current.lanes=h,Ac(a,h,d),Dk(a,d),a}function fl(a,e,c,d){var h=e.current,g=R(),b=yi(h);return c=dl(c),e.context===null?e.context=c:e.pendingContext=c,e=mh(g,b),e.payload={element:a},d=d===void 0?null:d,d!==null&&(e.callback=d),a=nh(h,e,b),a!==null&&(gi(a,h,b,g),oh(a,h,b)),b}function gl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,e){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<e?c:e}}function il(a,e){hl(a,e),(a=a.alternate)&&hl(a,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}ml.prototype.render=ll.prototype.render=function(a){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(a,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var e=a.containerInfo;Rk(function(){fl(null,a,null,null)}),e[uf]=null}};function ml(a){this._internalRoot=a}ml.prototype.unstable_scheduleHydration=function(a){if(a){var e=Hc();a={blockedOn:null,target:a,priority:e};for(var c=0;c<Qc.length&&e!==0&&e<Qc[c].priority;c++);Qc.splice(c,0,a),c===0&&Vc(a)}};function nl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(a,e,c,d,h){if(h){if(typeof d=="function"){var g=d;d=function(){var rt=gl(b);g.call(rt)}}var b=el(e,d,a,0,null,!1,!1,"",pl);return a._reactRootContainer=b,a[uf]=b.current,sf(a.nodeType===8?a.parentNode:a),Rk(),b}for(;h=a.lastChild;)a.removeChild(h);if(typeof d=="function"){var _e=d;d=function(){var rt=gl(et);_e.call(rt)}}var et=bl(a,0,!1,null,null,!1,!1,"",pl);return a._reactRootContainer=et,a[uf]=et.current,sf(a.nodeType===8?a.parentNode:a),Rk(function(){fl(e,et,c,d)}),et}function rl(a,e,c,d,h){var g=c._reactRootContainer;if(g){var b=g;if(typeof h=="function"){var _e=h;h=function(){var et=gl(b);_e.call(et)}}fl(e,b,a,h)}else b=ql(c,e,a,h,d);return gl(b)}Ec=function(a){switch(a.tag){case 3:var e=a.stateNode;if(e.current.memoizedState.isDehydrated){var c=tc(e.pendingLanes);c!==0&&(Cc(e,c|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(a,1);if(d!==null){var h=R();gi(d,a,1,h)}}),il(a,1)}};Fc=function(a){if(a.tag===13){var e=ih(a,134217728);if(e!==null){var c=R();gi(e,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(a.tag===13){var e=yi(a),c=ih(a,e);if(c!==null){var d=R();gi(c,a,e,d)}il(a,e)}};Hc=function(){return C};Ic=function(a,e){var c=C;try{return C=a,e()}finally{C=c}};yb=function(a,e,c){switch(e){case"input":if(bb(a,c),e=c.name,c.type==="radio"&&e!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<c.length;e++){var d=c[e];if(d!==a&&d.form===a.form){var h=Db(d);if(!h)throw Error(p(90));Wa(d),bb(d,h)}}}break;case"textarea":ib(a,c);break;case"select":e=c.value,e!=null&&fb(a,!!c.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(a,e){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(a,e,null,c)};reactDom_production_min.createRoot=function(a,e){if(!nl(a))throw Error(p(299));var c=!1,d="",h=kl;return e!=null&&(e.unstable_strictMode===!0&&(c=!0),e.identifierPrefix!==void 0&&(d=e.identifierPrefix),e.onRecoverableError!==void 0&&(h=e.onRecoverableError)),e=bl(a,1,!1,null,null,c,!1,d,h),a[uf]=e.current,sf(a.nodeType===8?a.parentNode:a),new ll(e)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var e=a._reactInternals;if(e===void 0)throw typeof a.render=="function"?Error(p(188)):(a=Object.keys(a).join(","),Error(p(268,a)));return a=Zb(e),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Rk(a)};reactDom_production_min.hydrate=function(a,e,c){if(!ol(e))throw Error(p(200));return rl(null,a,e,!0,c)};reactDom_production_min.hydrateRoot=function(a,e,c){if(!nl(a))throw Error(p(405));var d=c!=null&&c.hydratedSources||null,h=!1,g="",b=kl;if(c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),e=el(e,null,a,1,c??null,h,!1,g,b),a[uf]=e.current,sf(a),d)for(a=0;a<d.length;a++)c=d[a],h=c._getVersion,h=h(c._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[c,h]:e.mutableSourceEagerHydrationData.push(c,h);return new ml(e)};reactDom_production_min.render=function(a,e,c){if(!ol(e))throw Error(p(200));return rl(null,a,e,!1,c)};reactDom_production_min.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,e,c,d){if(!ol(c))throw Error(p(200));if(a==null||a._reactInternals===void 0)throw Error(p(38));return rl(a,e,c,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const vt=getDefaultExportFromCjs(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$2=0;function genId(){return count$2=(count$2+1)%Number.MAX_SAFE_INTEGER,count$2.toString()}const toastTimeouts=new Map,addToRemoveQueue=a=>{if(toastTimeouts.has(a))return;const e=setTimeout(()=>{toastTimeouts.delete(a),dispatch({type:"REMOVE_TOAST",toastId:a})},TOAST_REMOVE_DELAY);toastTimeouts.set(a,e)},reducer$1=(a,e)=>{switch(e.type){case"ADD_TOAST":return{...a,toasts:[e.toast,...a.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(c=>c.id===e.toast.id?{...c,...e.toast}:c)};case"DISMISS_TOAST":{const{toastId:c}=e;return c?addToRemoveQueue(c):a.toasts.forEach(d=>{addToRemoveQueue(d.id)}),{...a,toasts:a.toasts.map(d=>d.id===c||c===void 0?{...d,open:!1}:d)}}case"REMOVE_TOAST":return e.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(c=>c.id!==e.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(a){memoryState=reducer$1(memoryState,a),listeners.forEach(e=>{e(memoryState)})}function toast({...a}){const e=genId(),c=h=>dispatch({type:"UPDATE_TOAST",toast:{...h,id:e}}),d=()=>dispatch({type:"DISMISS_TOAST",toastId:e});return dispatch({type:"ADD_TOAST",toast:{...a,id:e,open:!0,onOpenChange:h=>{h||d()}}}),{id:e,dismiss:d,update:c}}function useToast(){const[a,e]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push(e),()=>{const c=listeners.indexOf(e);c>-1&&listeners.splice(c,1)}),[a]),{...a,toast,dismiss:c=>dispatch({type:"DISMISS_TOAST",toastId:c})}}function composeEventHandlers(a,e,{checkForDefaultPrevented:c=!0}={}){return function(h){if(a==null||a(h),c===!1||!h.defaultPrevented)return e==null?void 0:e(h)}}function setRef(a,e){if(typeof a=="function")return a(e);a!=null&&(a.current=e)}function composeRefs(...a){return e=>{let c=!1;const d=a.map(h=>{const g=setRef(h,e);return!c&&typeof g=="function"&&(c=!0),g});if(c)return()=>{for(let h=0;h<d.length;h++){const g=d[h];typeof g=="function"?g():setRef(a[h],null)}}}}function useComposedRefs(...a){return reactExports.useCallback(composeRefs(...a),a)}function createContext2(a,e){const c=reactExports.createContext(e),d=g=>{const{children:b,..._e}=g,et=reactExports.useMemo(()=>_e,Object.values(_e));return jsxRuntimeExports.jsx(c.Provider,{value:et,children:b})};d.displayName=a+"Provider";function h(g){const b=reactExports.useContext(c);if(b)return b;if(e!==void 0)return e;throw new Error(`\`${g}\` must be used within \`${a}\``)}return[d,h]}function createContextScope(a,e=[]){let c=[];function d(g,b){const _e=reactExports.createContext(b),et=c.length;c=[...c,b];const rt=$=>{var at;const{scope:_,children:nt,...it}=$,ot=((at=_==null?void 0:_[a])==null?void 0:at[et])||_e,lt=reactExports.useMemo(()=>it,Object.values(it));return jsxRuntimeExports.jsx(ot.Provider,{value:lt,children:nt})};rt.displayName=g+"Provider";function st($,_){var ot;const nt=((ot=_==null?void 0:_[a])==null?void 0:ot[et])||_e,it=reactExports.useContext(nt);if(it)return it;if(b!==void 0)return b;throw new Error(`\`${$}\` must be used within \`${g}\``)}return[rt,st]}const h=()=>{const g=c.map(b=>reactExports.createContext(b));return function(_e){const et=(_e==null?void 0:_e[a])||g;return reactExports.useMemo(()=>({[`__scope${a}`]:{..._e,[a]:et}}),[_e,et])}};return h.scopeName=a,[d,composeContextScopes(h,...e)]}function composeContextScopes(...a){const e=a[0];if(a.length===1)return e;const c=()=>{const d=a.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(g){const b=d.reduce((_e,{useScope:et,scopeName:rt})=>{const $=et(g)[`__scope${rt}`];return{..._e,...$}},{});return reactExports.useMemo(()=>({[`__scope${e.scopeName}`]:b}),[b])}};return c.scopeName=e.scopeName,c}function createSlot(a){const e=createSlotClone(a),c=reactExports.forwardRef((d,h)=>{const{children:g,...b}=d,_e=reactExports.Children.toArray(g),et=_e.find(isSlottable);if(et){const rt=et.props.children,st=_e.map($=>$===et?reactExports.Children.count(rt)>1?reactExports.Children.only(null):reactExports.isValidElement(rt)?rt.props.children:null:$);return jsxRuntimeExports.jsx(e,{...b,ref:h,children:reactExports.isValidElement(rt)?reactExports.cloneElement(rt,void 0,st):null})}return jsxRuntimeExports.jsx(e,{...b,ref:h,children:g})});return c.displayName=`${a}.Slot`,c}var Slot$3=createSlot("Slot");function createSlotClone(a){const e=reactExports.forwardRef((c,d)=>{const{children:h,...g}=c;if(reactExports.isValidElement(h)){const b=getElementRef$1(h),_e=mergeProps(g,h.props);return h.type!==reactExports.Fragment&&(_e.ref=d?composeRefs(d,b):b),reactExports.cloneElement(h,_e)}return reactExports.Children.count(h)>1?reactExports.Children.only(null):null});return e.displayName=`${a}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(a){const e=({children:c})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:c});return e.displayName=`${a}.Slottable`,e.__radixId=SLOTTABLE_IDENTIFIER,e}function isSlottable(a){return reactExports.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(a,e){const c={...e};for(const d in e){const h=a[d],g=e[d];/^on[A-Z]/.test(d)?h&&g?c[d]=(..._e)=>{const et=g(..._e);return h(..._e),et}:h&&(c[d]=h):d==="style"?c[d]={...h,...g}:d==="className"&&(c[d]=[h,g].filter(Boolean).join(" "))}return{...a,...c}}function getElementRef$1(a){var d,h;let e=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=e&&"isReactWarning"in e&&e.isReactWarning;return c?a.ref:(e=(h=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:h.get,c=e&&"isReactWarning"in e&&e.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}function createCollection(a){const e=a+"CollectionProvider",[c,d]=createContextScope(e),[h,g]=c(e,{collectionRef:{current:null},itemMap:new Map}),b=ot=>{const{scope:lt,children:at}=ot,ct=React$1.useRef(null),dt=React$1.useRef(new Map).current;return jsxRuntimeExports.jsx(h,{scope:lt,itemMap:dt,collectionRef:ct,children:at})};b.displayName=e;const _e=a+"CollectionSlot",et=createSlot(_e),rt=React$1.forwardRef((ot,lt)=>{const{scope:at,children:ct}=ot,dt=g(_e,at),ht=useComposedRefs(lt,dt.collectionRef);return jsxRuntimeExports.jsx(et,{ref:ht,children:ct})});rt.displayName=_e;const st=a+"CollectionItemSlot",$="data-radix-collection-item",_=createSlot(st),nt=React$1.forwardRef((ot,lt)=>{const{scope:at,children:ct,...dt}=ot,ht=React$1.useRef(null),pt=useComposedRefs(lt,ht),ft=g(st,at);return React$1.useEffect(()=>(ft.itemMap.set(ht,{ref:ht,...dt}),()=>void ft.itemMap.delete(ht))),jsxRuntimeExports.jsx(_,{[$]:"",ref:pt,children:ct})});nt.displayName=st;function it(ot){const lt=g(a+"CollectionConsumer",ot);return React$1.useCallback(()=>{const ct=lt.collectionRef.current;if(!ct)return[];const dt=Array.from(ct.querySelectorAll(`[${$}]`));return Array.from(lt.itemMap.values()).sort((ft,mt)=>dt.indexOf(ft.ref.current)-dt.indexOf(mt.ref.current))},[lt.collectionRef,lt.itemMap])}return[{Provider:b,Slot:rt,ItemSlot:nt},it,d]}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((a,e)=>{const c=createSlot(`Primitive.${e}`),d=reactExports.forwardRef((h,g)=>{const{asChild:b,..._e}=h,et=b?c:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(et,{..._e,ref:g})});return d.displayName=`Primitive.${e}`,{...a,[e]:d}},{});function dispatchDiscreteCustomEvent(a,e){a&&reactDomExports.flushSync(()=>a.dispatchEvent(e))}function useCallbackRef$1(a){const e=reactExports.useRef(a);return reactExports.useEffect(()=>{e.current=a}),reactExports.useMemo(()=>(...c)=>{var d;return(d=e.current)==null?void 0:d.call(e,...c)},[])}function useEscapeKeydown(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a);reactExports.useEffect(()=>{const d=h=>{h.key==="Escape"&&c(h)};return e.addEventListener("keydown",d,{capture:!0}),()=>e.removeEventListener("keydown",d,{capture:!0})},[c,e])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((a,e)=>{const{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:g,onInteractOutside:b,onDismiss:_e,...et}=a,rt=reactExports.useContext(DismissableLayerContext),[st,$]=reactExports.useState(null),_=(st==null?void 0:st.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,nt]=reactExports.useState({}),it=useComposedRefs(e,mt=>$(mt)),ot=Array.from(rt.layers),[lt]=[...rt.layersWithOutsidePointerEventsDisabled].slice(-1),at=ot.indexOf(lt),ct=st?ot.indexOf(st):-1,dt=rt.layersWithOutsidePointerEventsDisabled.size>0,ht=ct>=at,pt=usePointerDownOutside(mt=>{const xt=mt.target,gt=[...rt.branches].some(Et=>Et.contains(xt));!ht||gt||(h==null||h(mt),b==null||b(mt),mt.defaultPrevented||_e==null||_e())},_),ft=useFocusOutside(mt=>{const xt=mt.target;[...rt.branches].some(Et=>Et.contains(xt))||(g==null||g(mt),b==null||b(mt),mt.defaultPrevented||_e==null||_e())},_);return useEscapeKeydown(mt=>{ct===rt.layers.size-1&&(d==null||d(mt),!mt.defaultPrevented&&_e&&(mt.preventDefault(),_e()))},_),reactExports.useEffect(()=>{if(st)return c&&(rt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),rt.layersWithOutsidePointerEventsDisabled.add(st)),rt.layers.add(st),dispatchUpdate(),()=>{c&&rt.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=originalBodyPointerEvents)}},[st,_,c,rt]),reactExports.useEffect(()=>()=>{st&&(rt.layers.delete(st),rt.layersWithOutsidePointerEventsDisabled.delete(st),dispatchUpdate())},[st,rt]),reactExports.useEffect(()=>{const mt=()=>nt({});return document.addEventListener(CONTEXT_UPDATE,mt),()=>document.removeEventListener(CONTEXT_UPDATE,mt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...et,ref:it,style:{pointerEvents:dt?ht?"auto":"none":void 0,...a.style},onFocusCapture:composeEventHandlers(a.onFocusCapture,ft.onFocusCapture),onBlurCapture:composeEventHandlers(a.onBlurCapture,ft.onBlurCapture),onPointerDownCapture:composeEventHandlers(a.onPointerDownCapture,pt.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((a,e)=>{const c=reactExports.useContext(DismissableLayerContext),d=reactExports.useRef(null),h=useComposedRefs(e,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return c.branches.add(g),()=>{c.branches.delete(g)}},[c.branches]),jsxRuntimeExports.jsx(Primitive.div,{...a,ref:h})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a),d=reactExports.useRef(!1),h=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const g=_e=>{if(_e.target&&!d.current){let et=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,c,rt,{discrete:!0})};const rt={originalEvent:_e};_e.pointerType==="touch"?(e.removeEventListener("click",h.current),h.current=et,e.addEventListener("click",h.current,{once:!0})):et()}else e.removeEventListener("click",h.current);d.current=!1},b=window.setTimeout(()=>{e.addEventListener("pointerdown",g)},0);return()=>{window.clearTimeout(b),e.removeEventListener("pointerdown",g),e.removeEventListener("click",h.current)}},[e,c]),{onPointerDownCapture:()=>d.current=!0}}function useFocusOutside(a,e=globalThis==null?void 0:globalThis.document){const c=useCallbackRef$1(a),d=reactExports.useRef(!1);return reactExports.useEffect(()=>{const h=g=>{g.target&&!d.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,c,{originalEvent:g},{discrete:!1})};return e.addEventListener("focusin",h),()=>e.removeEventListener("focusin",h)},[e,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function dispatchUpdate(){const a=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(a)}function handleAndDispatchCustomEvent$1(a,e,c,{discrete:d}){const h=c.originalEvent.target,g=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});e&&h.addEventListener(a,e,{once:!0}),d?dispatchDiscreteCustomEvent(h,g):h.dispatchEvent(g)}var Root$8=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$6="Portal",Portal$3=reactExports.forwardRef((a,e)=>{var _e;const{container:c,...d}=a,[h,g]=reactExports.useState(!1);useLayoutEffect2(()=>g(!0),[]);const b=c||h&&((_e=globalThis==null?void 0:globalThis.document)==null?void 0:_e.body);return b?vt.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e}),b):null});Portal$3.displayName=PORTAL_NAME$6;function useStateMachine$1(a,e){return reactExports.useReducer((c,d)=>e[c][d]??c,a)}var Presence=a=>{const{present:e,children:c}=a,d=usePresence(e),h=typeof c=="function"?c({present:d.isPresent}):reactExports.Children.only(c),g=useComposedRefs(d.ref,getElementRef(h));return typeof c=="function"||d.isPresent?reactExports.cloneElement(h,{ref:g}):null};Presence.displayName="Presence";function usePresence(a){const[e,c]=reactExports.useState(),d=reactExports.useRef(null),h=reactExports.useRef(a),g=reactExports.useRef("none"),b=a?"mounted":"unmounted",[_e,et]=useStateMachine$1(b,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const rt=getAnimationName(d.current);g.current=_e==="mounted"?rt:"none"},[_e]),useLayoutEffect2(()=>{const rt=d.current,st=h.current;if(st!==a){const _=g.current,nt=getAnimationName(rt);a?et("MOUNT"):nt==="none"||(rt==null?void 0:rt.display)==="none"?et("UNMOUNT"):et(st&&_!==nt?"ANIMATION_OUT":"UNMOUNT"),h.current=a}},[a,et]),useLayoutEffect2(()=>{if(e){let rt;const st=e.ownerDocument.defaultView??window,$=nt=>{const ot=getAnimationName(d.current).includes(nt.animationName);if(nt.target===e&&ot&&(et("ANIMATION_END"),!h.current)){const lt=e.style.animationFillMode;e.style.animationFillMode="forwards",rt=st.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=lt)})}},_=nt=>{nt.target===e&&(g.current=getAnimationName(d.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",$),e.addEventListener("animationend",$),()=>{st.clearTimeout(rt),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",$),e.removeEventListener("animationend",$)}}else et("ANIMATION_END")},[e,et]),{isPresent:["mounted","unmountSuspended"].includes(_e),ref:reactExports.useCallback(rt=>{d.current=rt?getComputedStyle(rt):null,c(rt)},[])}}function getAnimationName(a){return(a==null?void 0:a.animationName)||"none"}function getElementRef(a){var d,h;let e=(d=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:d.get,c=e&&"isReactWarning"in e&&e.isReactWarning;return c?a.ref:(e=(h=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:h.get,c=e&&"isReactWarning"in e&&e.isReactWarning,c?a.props.ref:a.props.ref||a.ref)}var useInsertionEffect=React$2[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:a,defaultProp:e,onChange:c=()=>{},caller:d}){const[h,g,b]=useUncontrolledState({defaultProp:e,onChange:c}),_e=a!==void 0,et=_e?a:h;{const st=reactExports.useRef(a!==void 0);reactExports.useEffect(()=>{const $=st.current;$!==_e&&console.warn(`${d} is changing from ${$?"controlled":"uncontrolled"} to ${_e?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),st.current=_e},[_e,d])}const rt=reactExports.useCallback(st=>{var $;if(_e){const _=isFunction$2(st)?st(a):st;_!==a&&(($=b.current)==null||$.call(b,_))}else g(st)},[_e,a,g,b]);return[et,rt]}function useUncontrolledState({defaultProp:a,onChange:e}){const[c,d]=reactExports.useState(a),h=reactExports.useRef(c),g=reactExports.useRef(e);return useInsertionEffect(()=>{g.current=e},[e]),reactExports.useEffect(()=>{var b;h.current!==c&&((b=g.current)==null||b.call(g,c),h.current=c)},[c,h]),[c,d,g]}function isFunction$2(a){return typeof a=="function"}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME$2="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Primitive.span,{...a,ref:e,style:{...VISUALLY_HIDDEN_STYLES,...a.style}}));VisuallyHidden.displayName=NAME$2;var Root$7=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope("Toast",[createCollectionScope$3]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=a=>{const{__scopeToast:e,label:c="Notification",duration:d=5e3,swipeDirection:h="right",swipeThreshold:g=50,children:b}=a,[_e,et]=reactExports.useState(null),[rt,st]=reactExports.useState(0),$=reactExports.useRef(!1),_=reactExports.useRef(!1);return c.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$3.Provider,{scope:e,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:e,label:c,duration:d,swipeDirection:h,swipeThreshold:g,toastCount:rt,viewport:_e,onViewportChange:et,onToastAdd:reactExports.useCallback(()=>st(nt=>nt+1),[]),onToastRemove:reactExports.useCallback(()=>st(nt=>nt-1),[]),isFocusedToastEscapeKeyDownRef:$,isClosePausedRef:_,children:b})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,hotkey:d=VIEWPORT_DEFAULT_HOTKEY,label:h="Notifications ({hotkey})",...g}=a,b=useToastProviderContext(VIEWPORT_NAME$2,c),_e=useCollection$3(c),et=reactExports.useRef(null),rt=reactExports.useRef(null),st=reactExports.useRef(null),$=reactExports.useRef(null),_=useComposedRefs(e,$,b.onViewportChange),nt=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),it=b.toastCount>0;reactExports.useEffect(()=>{const lt=at=>{var dt;d.length!==0&&d.every(ht=>at[ht]||at.code===ht)&&((dt=$.current)==null||dt.focus())};return document.addEventListener("keydown",lt),()=>document.removeEventListener("keydown",lt)},[d]),reactExports.useEffect(()=>{const lt=et.current,at=$.current;if(it&&lt&&at){const ct=()=>{if(!b.isClosePausedRef.current){const ft=new CustomEvent(VIEWPORT_PAUSE);at.dispatchEvent(ft),b.isClosePausedRef.current=!0}},dt=()=>{if(b.isClosePausedRef.current){const ft=new CustomEvent(VIEWPORT_RESUME);at.dispatchEvent(ft),b.isClosePausedRef.current=!1}},ht=ft=>{!lt.contains(ft.relatedTarget)&&dt()},pt=()=>{lt.contains(document.activeElement)||dt()};return lt.addEventListener("focusin",ct),lt.addEventListener("focusout",ht),lt.addEventListener("pointermove",ct),lt.addEventListener("pointerleave",pt),window.addEventListener("blur",ct),window.addEventListener("focus",dt),()=>{lt.removeEventListener("focusin",ct),lt.removeEventListener("focusout",ht),lt.removeEventListener("pointermove",ct),lt.removeEventListener("pointerleave",pt),window.removeEventListener("blur",ct),window.removeEventListener("focus",dt)}}},[it,b.isClosePausedRef]);const ot=reactExports.useCallback(({tabbingDirection:lt})=>{const ct=_e().map(dt=>{const ht=dt.ref.current,pt=[ht,...getTabbableCandidates$1(ht)];return lt==="forwards"?pt:pt.reverse()});return(lt==="forwards"?ct.reverse():ct).flat()},[_e]);return reactExports.useEffect(()=>{const lt=$.current;if(lt){const at=ct=>{var pt,ft,mt;const dt=ct.altKey||ct.ctrlKey||ct.metaKey;if(ct.key==="Tab"&&!dt){const xt=document.activeElement,gt=ct.shiftKey;if(ct.target===lt&&gt){(pt=rt.current)==null||pt.focus();return}const Pt=ot({tabbingDirection:gt?"backwards":"forwards"}),Mt=Pt.findIndex(Rt=>Rt===xt);focusFirst$3(Pt.slice(Mt+1))?ct.preventDefault():gt?(ft=rt.current)==null||ft.focus():(mt=st.current)==null||mt.focus()}};return lt.addEventListener("keydown",at),()=>lt.removeEventListener("keydown",at)}},[_e,ot]),jsxRuntimeExports.jsxs(Branch,{ref:et,role:"region","aria-label":h.replace("{hotkey}",nt),tabIndex:-1,style:{pointerEvents:it?void 0:"none"},children:[it&&jsxRuntimeExports.jsx(FocusProxy,{ref:rt,onFocusFromOutsideViewport:()=>{const lt=ot({tabbingDirection:"forwards"});focusFirst$3(lt)}}),jsxRuntimeExports.jsx(Collection$3.Slot,{scope:c,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...g,ref:_})}),it&&jsxRuntimeExports.jsx(FocusProxy,{ref:st,onFocusFromOutsideViewport:()=>{const lt=ot({tabbingDirection:"backwards"});focusFirst$3(lt)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,onFocusFromOutsideViewport:d,...h}=a,g=useToastProviderContext(FOCUS_PROXY_NAME,c);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...h,ref:e,style:{position:"fixed"},onFocus:b=>{var rt;const _e=b.relatedTarget;!((rt=g.viewport)!=null&&rt.contains(_e))&&d()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((a,e)=>{const{forceMount:c,open:d,defaultOpen:h,onOpenChange:g,...b}=a,[_e,et]=useControllableState({prop:d,defaultProp:h??!0,onChange:g,caller:TOAST_NAME});return jsxRuntimeExports.jsx(Presence,{present:c||_e,children:jsxRuntimeExports.jsx(ToastImpl,{open:_e,...b,ref:e,onClose:()=>et(!1),onPause:useCallbackRef$1(a.onPause),onResume:useCallbackRef$1(a.onResume),onSwipeStart:composeEventHandlers(a.onSwipeStart,rt=>{rt.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(a.onSwipeMove,rt=>{const{x:st,y:$}=rt.detail.delta;rt.currentTarget.setAttribute("data-swipe","move"),rt.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${st}px`),rt.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${$}px`)}),onSwipeCancel:composeEventHandlers(a.onSwipeCancel,rt=>{rt.currentTarget.setAttribute("data-swipe","cancel"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(a.onSwipeEnd,rt=>{const{x:st,y:$}=rt.detail.delta;rt.currentTarget.setAttribute("data-swipe","end"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),rt.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),rt.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${st}px`),rt.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${$}px`),et(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,type:d="foreground",duration:h,open:g,onClose:b,onEscapeKeyDown:_e,onPause:et,onResume:rt,onSwipeStart:st,onSwipeMove:$,onSwipeCancel:_,onSwipeEnd:nt,...it}=a,ot=useToastProviderContext(TOAST_NAME,c),[lt,at]=reactExports.useState(null),ct=useComposedRefs(e,Rt=>at(Rt)),dt=reactExports.useRef(null),ht=reactExports.useRef(null),pt=h||ot.duration,ft=reactExports.useRef(0),mt=reactExports.useRef(pt),xt=reactExports.useRef(0),{onToastAdd:gt,onToastRemove:Et}=ot,St=useCallbackRef$1(()=>{var Dt;(lt==null?void 0:lt.contains(document.activeElement))&&((Dt=ot.viewport)==null||Dt.focus()),b()}),Pt=reactExports.useCallback(Rt=>{!Rt||Rt===1/0||(window.clearTimeout(xt.current),ft.current=new Date().getTime(),xt.current=window.setTimeout(St,Rt))},[St]);reactExports.useEffect(()=>{const Rt=ot.viewport;if(Rt){const Dt=()=>{Pt(mt.current),rt==null||rt()},Tt=()=>{const It=new Date().getTime()-ft.current;mt.current=mt.current-It,window.clearTimeout(xt.current),et==null||et()};return Rt.addEventListener(VIEWPORT_PAUSE,Tt),Rt.addEventListener(VIEWPORT_RESUME,Dt),()=>{Rt.removeEventListener(VIEWPORT_PAUSE,Tt),Rt.removeEventListener(VIEWPORT_RESUME,Dt)}}},[ot.viewport,pt,et,rt,Pt]),reactExports.useEffect(()=>{g&&!ot.isClosePausedRef.current&&Pt(pt)},[g,pt,ot.isClosePausedRef,Pt]),reactExports.useEffect(()=>(gt(),()=>Et()),[gt,Et]);const Mt=reactExports.useMemo(()=>lt?getAnnounceTextContent(lt):null,[lt]);return ot.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Mt&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:c,role:"status","aria-live":d==="foreground"?"assertive":"polite","aria-atomic":!0,children:Mt}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:c,onClose:St,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:c,children:jsxRuntimeExports.jsx(Root$8,{asChild:!0,onEscapeKeyDown:composeEventHandlers(_e,()=>{ot.isFocusedToastEscapeKeyDownRef.current||St(),ot.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":g?"open":"closed","data-swipe-direction":ot.swipeDirection,...it,ref:ct,style:{userSelect:"none",touchAction:"none",...a.style},onKeyDown:composeEventHandlers(a.onKeyDown,Rt=>{Rt.key==="Escape"&&(_e==null||_e(Rt.nativeEvent),Rt.nativeEvent.defaultPrevented||(ot.isFocusedToastEscapeKeyDownRef.current=!0,St()))}),onPointerDown:composeEventHandlers(a.onPointerDown,Rt=>{Rt.button===0&&(dt.current={x:Rt.clientX,y:Rt.clientY})}),onPointerMove:composeEventHandlers(a.onPointerMove,Rt=>{if(!dt.current)return;const Dt=Rt.clientX-dt.current.x,Tt=Rt.clientY-dt.current.y,It=!!ht.current,Vt=["left","right"].includes(ot.swipeDirection),Bt=["left","up"].includes(ot.swipeDirection)?Math.min:Math.max,Ct=Vt?Bt(0,Dt):0,en=Vt?0:Bt(0,Tt),sn=Rt.pointerType==="touch"?10:2,kt={x:Ct,y:en},Ut={originalEvent:Rt,delta:kt};It?(ht.current=kt,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,$,Ut,{discrete:!1})):isDeltaInDirection(kt,ot.swipeDirection,sn)?(ht.current=kt,handleAndDispatchCustomEvent(TOAST_SWIPE_START,st,Ut,{discrete:!1}),Rt.target.setPointerCapture(Rt.pointerId)):(Math.abs(Dt)>sn||Math.abs(Tt)>sn)&&(dt.current=null)}),onPointerUp:composeEventHandlers(a.onPointerUp,Rt=>{const Dt=ht.current,Tt=Rt.target;if(Tt.hasPointerCapture(Rt.pointerId)&&Tt.releasePointerCapture(Rt.pointerId),ht.current=null,dt.current=null,Dt){const It=Rt.currentTarget,Vt={originalEvent:Rt,delta:Dt};isDeltaInDirection(Dt,ot.swipeDirection,ot.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,nt,Vt,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,_,Vt,{discrete:!0}),It.addEventListener("click",Bt=>Bt.preventDefault(),{once:!0})}})})})}),ot.viewport)})]}):null}),ToastAnnounce=a=>{const{__scopeToast:e,children:c,...d}=a,h=useToastProviderContext(TOAST_NAME,e),[g,b]=reactExports.useState(!1),[_e,et]=reactExports.useState(!1);return useNextFrame(()=>b(!0)),reactExports.useEffect(()=>{const rt=window.setTimeout(()=>et(!0),1e3);return()=>window.clearTimeout(rt)},[]),_e?null:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...d,children:g&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[h.label," ",c]})})})},TITLE_NAME$2="ToastTitle",ToastTitle$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});ToastTitle$1.displayName=TITLE_NAME$2;var DESCRIPTION_NAME$2="ToastDescription",ToastDescription$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});ToastDescription$1.displayName=DESCRIPTION_NAME$2;var ACTION_NAME$1="ToastAction",ToastAction$1=reactExports.forwardRef((a,e)=>{const{altText:c,...d}=a;return c.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:c,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...d,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME$1}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME$1;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,...d}=a,h=useToastInteractiveContext(CLOSE_NAME$1,c);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...d,ref:e,onClick:composeEventHandlers(a.onClick,h.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((a,e)=>{const{__scopeToast:c,altText:d,...h}=a;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":d||void 0,...h,ref:e})});function getAnnounceTextContent(a){const e=[];return Array.from(a.childNodes).forEach(d=>{if(d.nodeType===d.TEXT_NODE&&d.textContent&&e.push(d.textContent),isHTMLElement$2(d)){const h=d.ariaHidden||d.hidden||d.style.display==="none",g=d.dataset.radixToastAnnounceExclude==="";if(!h)if(g){const b=d.dataset.radixToastAnnounceAlt;b&&e.push(b)}else e.push(...getAnnounceTextContent(d))}}),e}function handleAndDispatchCustomEvent(a,e,c,{discrete:d}){const h=c.originalEvent.currentTarget,g=new CustomEvent(a,{bubbles:!0,cancelable:!0,detail:c});e&&h.addEventListener(a,e,{once:!0}),d?dispatchDiscreteCustomEvent(h,g):h.dispatchEvent(g)}var isDeltaInDirection=(a,e,c=0)=>{const d=Math.abs(a.x),h=Math.abs(a.y),g=d>h;return e==="left"||e==="right"?g&&d>c:!g&&h>c};function useNextFrame(a=()=>{}){const e=useCallbackRef$1(a);useLayoutEffect2(()=>{let c=0,d=0;return c=window.requestAnimationFrame(()=>d=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(c),window.cancelAnimationFrame(d)}},[e])}function isHTMLElement$2(a){return a.nodeType===a.ELEMENT_NODE}function getTabbableCandidates$1(a){const e=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const h=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||h?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)e.push(c.currentNode);return e}function focusFirst$3(a){const e=document.activeElement;return a.some(c=>c===e?!0:(c.focus(),document.activeElement!==e))}var Provider$1=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$6=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action$2=ToastAction$1,Close$1=ToastClose$1;function r$1(a){var e,c,d="";if(typeof a=="string"||typeof a=="number")d+=a;else if(typeof a=="object")if(Array.isArray(a)){var h=a.length;for(e=0;e<h;e++)a[e]&&(c=r$1(a[e]))&&(d&&(d+=" "),d+=c)}else for(c in a)a[c]&&(d&&(d+=" "),d+=c);return d}function clsx(){for(var a,e,c=0,d="",h=arguments.length;c<h;c++)(a=arguments[c])&&(e=r$1(a))&&(d&&(d+=" "),d+=e);return d}const falsyToString=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,cx=clsx,cva=(a,e)=>c=>{var d;if((e==null?void 0:e.variants)==null)return cx(a,c==null?void 0:c.class,c==null?void 0:c.className);const{variants:h,defaultVariants:g}=e,b=Object.keys(h).map(rt=>{const st=c==null?void 0:c[rt],$=g==null?void 0:g[rt];if(st===null)return null;const _=falsyToString(st)||falsyToString($);return h[rt][_]}),_e=c&&Object.entries(c).reduce((rt,st)=>{let[$,_]=st;return _===void 0||(rt[$]=_),rt},{}),et=e==null||(d=e.compoundVariants)===null||d===void 0?void 0:d.reduce((rt,st)=>{let{class:$,className:_,...nt}=st;return Object.entries(nt).every(it=>{let[ot,lt]=it;return Array.isArray(lt)?lt.includes({...g,..._e}[ot]):{...g,..._e}[ot]===lt})?[...rt,$,_]:rt},[]);return cx(a,b,et,c==null?void 0:c.class,c==null?void 0:c.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...a)=>a.filter((e,c,d)=>!!e&&e.trim()!==""&&d.indexOf(e)===c).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:h="",children:g,iconNode:b,..._e},et)=>reactExports.createElement("svg",{ref:et,...defaultAttributes,width:e,height:e,stroke:a,strokeWidth:d?Number(c)*24/Number(e):c,className:mergeClasses("lucide",h),..._e},[...b.map(([rt,st])=>reactExports.createElement(rt,st)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(a,e)=>{const c=reactExports.forwardRef(({className:d,...h},g)=>reactExports.createElement(Icon$1,{ref:g,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(a)}`,d),...h}));return c.displayName=`${a}`,c};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookMarked=createLucideIcon("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Brain=createLucideIcon("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleHelp=createLucideIcon("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleX=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EllipsisVertical=createLucideIcon("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EyeOff=createLucideIcon("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileCheck=createLucideIcon("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileImage=createLucideIcon("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileQuestion=createLucideIcon("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const File$1=createLucideIcon("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderOpen=createLucideIcon("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Globe=createLucideIcon("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GraduationCap=createLucideIcon("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Grid3x3=createLucideIcon("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GripVertical=createLucideIcon("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$2=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info$1=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lightbulb=createLucideIcon("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Link2=createLucideIcon("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const List$1=createLucideIcon("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lock=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu$1=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageCircle=createLucideIcon("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MessageSquare=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mic=createLucideIcon("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Palette=createLucideIcon("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelLeftClose=createLucideIcon("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PenLine=createLucideIcon("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PenTool=createLucideIcon("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pencil=createLucideIcon("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Presentation=createLucideIcon("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Send=createLucideIcon("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquareCheckBig=createLucideIcon("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Square=createLucideIcon("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Star=createLucideIcon("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Video=createLucideIcon("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Youtube=createLucideIcon("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=a=>{const e=createClassMap(a),{conflictingClassGroups:c,conflictingClassGroupModifiers:d}=a;return{getClassGroupId:b=>{const _e=b.split(CLASS_PART_SEPARATOR);return _e[0]===""&&_e.length!==1&&_e.shift(),getGroupRecursive(_e,e)||getGroupIdForArbitraryProperty(b)},getConflictingClassGroupIds:(b,_e)=>{const et=c[b]||[];return _e&&d[b]?[...et,...d[b]]:et}}},getGroupRecursive=(a,e)=>{var b;if(a.length===0)return e.classGroupId;const c=a[0],d=e.nextPart.get(c),h=d?getGroupRecursive(a.slice(1),d):void 0;if(h)return h;if(e.validators.length===0)return;const g=a.join(CLASS_PART_SEPARATOR);return(b=e.validators.find(({validator:_e})=>_e(g)))==null?void 0:b.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=a=>{if(arbitraryPropertyRegex.test(a)){const e=arbitraryPropertyRegex.exec(a)[1],c=e==null?void 0:e.substring(0,e.indexOf(":"));if(c)return"arbitrary.."+c}},createClassMap=a=>{const{theme:e,prefix:c}=a,d={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(a.classGroups),c).forEach(([g,b])=>{processClassesRecursively(b,d,g,e)}),d},processClassesRecursively=(a,e,c,d)=>{a.forEach(h=>{if(typeof h=="string"){const g=h===""?e:getPart(e,h);g.classGroupId=c;return}if(typeof h=="function"){if(isThemeGetter(h)){processClassesRecursively(h(d),e,c,d);return}e.validators.push({validator:h,classGroupId:c});return}Object.entries(h).forEach(([g,b])=>{processClassesRecursively(b,getPart(e,g),c,d)})})},getPart=(a,e)=>{let c=a;return e.split(CLASS_PART_SEPARATOR).forEach(d=>{c.nextPart.has(d)||c.nextPart.set(d,{nextPart:new Map,validators:[]}),c=c.nextPart.get(d)}),c},isThemeGetter=a=>a.isThemeGetter,getPrefixedClassGroupEntries=(a,e)=>e?a.map(([c,d])=>{const h=d.map(g=>typeof g=="string"?e+g:typeof g=="object"?Object.fromEntries(Object.entries(g).map(([b,_e])=>[e+b,_e])):g);return[c,h]}):a,createLruCache=a=>{if(a<1)return{get:()=>{},set:()=>{}};let e=0,c=new Map,d=new Map;const h=(g,b)=>{c.set(g,b),e++,e>a&&(e=0,d=c,c=new Map)};return{get(g){let b=c.get(g);if(b!==void 0)return b;if((b=d.get(g))!==void 0)return h(g,b),b},set(g,b){c.has(g)?c.set(g,b):h(g,b)}}},IMPORTANT_MODIFIER="!",createParseClassName=a=>{const{separator:e,experimentalParseClassName:c}=a,d=e.length===1,h=e[0],g=e.length,b=_e=>{const et=[];let rt=0,st=0,$;for(let lt=0;lt<_e.length;lt++){let at=_e[lt];if(rt===0){if(at===h&&(d||_e.slice(lt,lt+g)===e)){et.push(_e.slice(st,lt)),st=lt+g;continue}if(at==="/"){$=lt;continue}}at==="["?rt++:at==="]"&&rt--}const _=et.length===0?_e:_e.substring(st),nt=_.startsWith(IMPORTANT_MODIFIER),it=nt?_.substring(1):_,ot=$&&$>st?$-st:void 0;return{modifiers:et,hasImportantModifier:nt,baseClassName:it,maybePostfixModifierPosition:ot}};return c?_e=>c({className:_e,parseClassName:b}):b},sortModifiers=a=>{if(a.length<=1)return a;const e=[];let c=[];return a.forEach(d=>{d[0]==="["?(e.push(...c.sort(),d),c=[]):c.push(d)}),e.push(...c.sort()),e},createConfigUtils=a=>({cache:createLruCache(a.cacheSize),parseClassName:createParseClassName(a),...createClassGroupUtils(a)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(a,e)=>{const{parseClassName:c,getClassGroupId:d,getConflictingClassGroupIds:h}=e,g=[],b=a.trim().split(SPLIT_CLASSES_REGEX);let _e="";for(let et=b.length-1;et>=0;et-=1){const rt=b[et],{modifiers:st,hasImportantModifier:$,baseClassName:_,maybePostfixModifierPosition:nt}=c(rt);let it=!!nt,ot=d(it?_.substring(0,nt):_);if(!ot){if(!it){_e=rt+(_e.length>0?" "+_e:_e);continue}if(ot=d(_),!ot){_e=rt+(_e.length>0?" "+_e:_e);continue}it=!1}const lt=sortModifiers(st).join(":"),at=$?lt+IMPORTANT_MODIFIER:lt,ct=at+ot;if(g.includes(ct))continue;g.push(ct);const dt=h(ot,it);for(let ht=0;ht<dt.length;++ht){const pt=dt[ht];g.push(at+pt)}_e=rt+(_e.length>0?" "+_e:_e)}return _e};function twJoin(){let a=0,e,c,d="";for(;a<arguments.length;)(e=arguments[a++])&&(c=toValue(e))&&(d&&(d+=" "),d+=c);return d}const toValue=a=>{if(typeof a=="string")return a;let e,c="";for(let d=0;d<a.length;d++)a[d]&&(e=toValue(a[d]))&&(c&&(c+=" "),c+=e);return c};function createTailwindMerge(a,...e){let c,d,h,g=b;function b(et){const rt=e.reduce((st,$)=>$(st),a());return c=createConfigUtils(rt),d=c.cache.get,h=c.cache.set,g=_e,_e(et)}function _e(et){const rt=d(et);if(rt)return rt;const st=mergeClassList(et,c);return h(et,st),st}return function(){return g(twJoin.apply(null,arguments))}}const fromTheme=a=>{const e=c=>c[a]||[];return e.isThemeGetter=!0,e},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength=a=>isNumber(a)||stringLengths.has(a)||fractionRegex.test(a),isArbitraryLength=a=>getIsArbitraryValue(a,"length",isLengthOnly),isNumber=a=>!!a&&!Number.isNaN(Number(a)),isArbitraryNumber=a=>getIsArbitraryValue(a,"number",isNumber),isInteger=a=>!!a&&Number.isInteger(Number(a)),isPercent=a=>a.endsWith("%")&&isNumber(a.slice(0,-1)),isArbitraryValue=a=>arbitraryValueRegex.test(a),isTshirtSize=a=>tshirtUnitRegex.test(a),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=a=>getIsArbitraryValue(a,sizeLabels,isNever),isArbitraryPosition=a=>getIsArbitraryValue(a,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=a=>getIsArbitraryValue(a,imageLabels,isImage),isArbitraryShadow=a=>getIsArbitraryValue(a,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(a,e,c)=>{const d=arbitraryValueRegex.exec(a);return d?d[1]?typeof e=="string"?d[1]===e:e.has(d[1]):c(d[2]):!1},isLengthOnly=a=>lengthUnitRegex.test(a)&&!colorFunctionRegex.test(a),isNever=()=>!1,isShadow=a=>shadowRegex.test(a),isImage=a=>imageRegex.test(a),getDefaultConfig=()=>{const a=fromTheme("colors"),e=fromTheme("spacing"),c=fromTheme("blur"),d=fromTheme("brightness"),h=fromTheme("borderColor"),g=fromTheme("borderRadius"),b=fromTheme("borderSpacing"),_e=fromTheme("borderWidth"),et=fromTheme("contrast"),rt=fromTheme("grayscale"),st=fromTheme("hueRotate"),$=fromTheme("invert"),_=fromTheme("gap"),nt=fromTheme("gradientColorStops"),it=fromTheme("gradientColorStopPositions"),ot=fromTheme("inset"),lt=fromTheme("margin"),at=fromTheme("opacity"),ct=fromTheme("padding"),dt=fromTheme("saturate"),ht=fromTheme("scale"),pt=fromTheme("sepia"),ft=fromTheme("skew"),mt=fromTheme("space"),xt=fromTheme("translate"),gt=()=>["auto","contain","none"],Et=()=>["auto","hidden","clip","visible","scroll"],St=()=>["auto",isArbitraryValue,e],Pt=()=>[isArbitraryValue,e],Mt=()=>["",isLength,isArbitraryLength],Rt=()=>["auto",isNumber,isArbitraryValue],Dt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Tt=()=>["solid","dashed","dotted","double","none"],It=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Vt=()=>["start","end","center","between","around","evenly","stretch"],Bt=()=>["","0",isArbitraryValue],Ct=()=>["auto","avoid","all","avoid-page","page","left","right","column"],en=()=>[isNumber,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:en(),borderColor:[a],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:Pt(),borderWidth:Mt(),contrast:en(),grayscale:Bt(),hueRotate:en(),invert:Bt(),gap:Pt(),gradientColorStops:[a],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:St(),margin:St(),opacity:en(),padding:Pt(),saturate:en(),scale:en(),sepia:Bt(),skew:en(),space:Pt(),translate:Pt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Ct()}],"break-before":[{"break-before":Ct()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Dt(),isArbitraryValue]}],overflow:[{overflow:Et()}],"overflow-x":[{"overflow-x":Et()}],"overflow-y":[{"overflow-y":Et()}],overscroll:[{overscroll:gt()}],"overscroll-x":[{"overscroll-x":gt()}],"overscroll-y":[{"overscroll-y":gt()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[ot]}],"inset-x":[{"inset-x":[ot]}],"inset-y":[{"inset-y":[ot]}],start:[{start:[ot]}],end:[{end:[ot]}],top:[{top:[ot]}],right:[{right:[ot]}],bottom:[{bottom:[ot]}],left:[{left:[ot]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:St()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Bt()}],shrink:[{shrink:Bt()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Rt()}],"col-end":[{"col-end":Rt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Rt()}],"row-end":[{"row-end":Rt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[_]}],"gap-x":[{"gap-x":[_]}],"gap-y":[{"gap-y":[_]}],"justify-content":[{justify:["normal",...Vt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Vt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Vt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ct]}],px:[{px:[ct]}],py:[{py:[ct]}],ps:[{ps:[ct]}],pe:[{pe:[ct]}],pt:[{pt:[ct]}],pr:[{pr:[ct]}],pb:[{pb:[ct]}],pl:[{pl:[ct]}],m:[{m:[lt]}],mx:[{mx:[lt]}],my:[{my:[lt]}],ms:[{ms:[lt]}],me:[{me:[lt]}],mt:[{mt:[lt]}],mr:[{mr:[lt]}],mb:[{mb:[lt]}],ml:[{ml:[lt]}],"space-x":[{"space-x":[mt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[mt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,e]}],"min-w":[{"min-w":[isArbitraryValue,e,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,e,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[a]}],"placeholder-opacity":[{"placeholder-opacity":[at]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[a]}],"text-opacity":[{"text-opacity":[at]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Tt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[a]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Pt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[at]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Dt(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[a]}],"gradient-from-pos":[{from:[it]}],"gradient-via-pos":[{via:[it]}],"gradient-to-pos":[{to:[it]}],"gradient-from":[{from:[nt]}],"gradient-via":[{via:[nt]}],"gradient-to":[{to:[nt]}],rounded:[{rounded:[g]}],"rounded-s":[{"rounded-s":[g]}],"rounded-e":[{"rounded-e":[g]}],"rounded-t":[{"rounded-t":[g]}],"rounded-r":[{"rounded-r":[g]}],"rounded-b":[{"rounded-b":[g]}],"rounded-l":[{"rounded-l":[g]}],"rounded-ss":[{"rounded-ss":[g]}],"rounded-se":[{"rounded-se":[g]}],"rounded-ee":[{"rounded-ee":[g]}],"rounded-es":[{"rounded-es":[g]}],"rounded-tl":[{"rounded-tl":[g]}],"rounded-tr":[{"rounded-tr":[g]}],"rounded-br":[{"rounded-br":[g]}],"rounded-bl":[{"rounded-bl":[g]}],"border-w":[{border:[_e]}],"border-w-x":[{"border-x":[_e]}],"border-w-y":[{"border-y":[_e]}],"border-w-s":[{"border-s":[_e]}],"border-w-e":[{"border-e":[_e]}],"border-w-t":[{"border-t":[_e]}],"border-w-r":[{"border-r":[_e]}],"border-w-b":[{"border-b":[_e]}],"border-w-l":[{"border-l":[_e]}],"border-opacity":[{"border-opacity":[at]}],"border-style":[{border:[...Tt(),"hidden"]}],"divide-x":[{"divide-x":[_e]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[_e]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[at]}],"divide-style":[{divide:Tt()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...Tt()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[a]}],"ring-w":[{ring:Mt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[a]}],"ring-opacity":[{"ring-opacity":[at]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[a]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[at]}],"mix-blend":[{"mix-blend":[...It(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":It()}],filter:[{filter:["","none"]}],blur:[{blur:[c]}],brightness:[{brightness:[d]}],contrast:[{contrast:[et]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[rt]}],"hue-rotate":[{"hue-rotate":[st]}],invert:[{invert:[$]}],saturate:[{saturate:[dt]}],sepia:[{sepia:[pt]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[c]}],"backdrop-brightness":[{"backdrop-brightness":[d]}],"backdrop-contrast":[{"backdrop-contrast":[et]}],"backdrop-grayscale":[{"backdrop-grayscale":[rt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[st]}],"backdrop-invert":[{"backdrop-invert":[$]}],"backdrop-opacity":[{"backdrop-opacity":[at]}],"backdrop-saturate":[{"backdrop-saturate":[dt]}],"backdrop-sepia":[{"backdrop-sepia":[pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[b]}],"border-spacing-x":[{"border-spacing-x":[b]}],"border-spacing-y":[{"border-spacing-y":[b]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:en()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:en()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[ht]}],"scale-x":[{"scale-x":[ht]}],"scale-y":[{"scale-y":[ht]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[xt]}],"translate-y":[{"translate-y":[xt]}],"skew-x":[{"skew-x":[ft]}],"skew-y":[{"skew-y":[ft]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",a]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[a]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Pt()}],"scroll-mx":[{"scroll-mx":Pt()}],"scroll-my":[{"scroll-my":Pt()}],"scroll-ms":[{"scroll-ms":Pt()}],"scroll-me":[{"scroll-me":Pt()}],"scroll-mt":[{"scroll-mt":Pt()}],"scroll-mr":[{"scroll-mr":Pt()}],"scroll-mb":[{"scroll-mb":Pt()}],"scroll-ml":[{"scroll-ml":Pt()}],"scroll-p":[{"scroll-p":Pt()}],"scroll-px":[{"scroll-px":Pt()}],"scroll-py":[{"scroll-py":Pt()}],"scroll-ps":[{"scroll-ps":Pt()}],"scroll-pe":[{"scroll-pe":Pt()}],"scroll-pt":[{"scroll-pt":Pt()}],"scroll-pr":[{"scroll-pr":Pt()}],"scroll-pb":[{"scroll-pb":Pt()}],"scroll-pl":[{"scroll-pl":Pt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[a,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[a,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...a){return twMerge(clsx(a))}const FALLBACK_EMOJIS={math:"📊",calculus:"📊",algebra:"📊",geometry:"📊",physics:"⚡",chemistry:"🧪",biology:"🧬",computer:"💻",programming:"💻",coding:"💻",history:"📜",english:"📖",literature:"📖",art:"🎨",music:"🎵",business:"💰",economics:"💰",engineering:"⚙️",medicine:"🏥",research:"🔬",project:"📁",assignment:"📁",homework:"📁"};function getSubjectEmoji(a){const e=a.toLowerCase().trim();return!e||e.length===0?"📚":e.length===1?"📝":getFallbackEmoji(e)}function getWorkspaceEmoji(a){return a.emoji?a.emoji:getSubjectEmoji(a.name)}function getFallbackEmoji(a){for(const[d,h]of Object.entries(FALLBACK_EMOJIS))if(a.includes(d))return h;const e=a.charAt(0).toLowerCase();return{a:"🌟",b:"🎈",c:"🎪",d:"📁",e:"📚",f:"🎭",g:"🎪",h:"📜",i:"💡",j:"🎪",k:"🎪",l:"📖",m:"📊",n:"📝",o:"🎪",p:"📁",q:"🎪",r:"🔬",s:"📚",t:"📝",u:"🎪",v:"🎪",w:"📚",x:"🎪",y:"🎪",z:"🎪"}[e]||"📚"}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Viewport$2,{ref:c,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...e}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:a,variant:e,...c},d)=>jsxRuntimeExports.jsx(Root2$6,{ref:d,className:cn(toastVariants({variant:e}),a),...c}));Toast.displayName=Root2$6.displayName;const ToastAction=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Action$2,{ref:c,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...e}));ToastAction.displayName=Action$2.displayName;const ToastClose=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Close$1,{ref:c,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...e,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Title$1,{ref:c,className:cn("text-sm font-semibold",a),...e}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Description$1,{ref:c,className:cn("text-sm opacity-90",a),...e}));ToastDescription.displayName=Description$1.displayName;function Toaster$1(){const{toasts:a}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[a.map(function({id:e,title:c,description:d,action:h,...g}){return jsxRuntimeExports.jsxs(Toast,{...g,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[c&&jsxRuntimeExports.jsx(ToastTitle,{children:c}),d&&jsxRuntimeExports.jsx(ToastDescription,{children:d})]}),h,jsxRuntimeExports.jsx(ToastClose,{})]},e)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P=["light","dark"],E="(prefers-color-scheme: dark)",L=reactExports.createContext(void 0),D={setTheme:a=>{},themes:[]},j=()=>{var a;return(a=reactExports.useContext(L))!=null?a:D};reactExports.memo(({forcedTheme:a,storageKey:e,attribute:c,enableSystem:d,enableColorScheme:h,defaultTheme:g,value:b,attrs:_e,nonce:et})=>{let rt=g==="system",st=c==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${_e.map(it=>`'${it}'`).join(",")})`};`:`var d=document.documentElement,n='${c}',s='setAttribute';`,$=h?P.includes(g)&&g?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${g}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",_=(it,ot=!1,lt=!0)=>{let at=b?b[it]:it,ct=ot?it+"|| ''":`'${at}'`,dt="";return h&&lt&&!ot&&P.includes(it)&&(dt+=`d.style.colorScheme = '${it}';`),c==="class"?ot||at?dt+=`c.add(${ct})`:dt+="null":at&&(dt+=`d[s](n,${ct})`),dt},nt=a?`!function(){${st}${_(a)}}()`:d?`!function(){try{${st}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${rt})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${_("dark")}}else{${_("light")}}}else if(e){${b?`var x=${JSON.stringify(b)};`:""}${_(b?"x[e]":"e",!0)}}${rt?"":"else{"+_(g,!1,!1)+"}"}${$}}catch(e){}}()`:`!function(){try{${st}var e=localStorage.getItem('${e}');if(e){${b?`var x=${JSON.stringify(b)};`:""}${_(b?"x[e]":"e",!0)}}else{${_(g,!1,!1)};}${$}}catch(t){}}();`;return reactExports.createElement("script",{nonce:et,dangerouslySetInnerHTML:{__html:nt}})});var jt=a=>{switch(a){case"success":return ee;case"info":return ae;case"warning":return oe;case"error":return se;default:return null}},te=Array(12).fill(0),Yt=({visible:a,className:e})=>React$1.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":a},React$1.createElement("div",{className:"sonner-spinner"},te.map((c,d)=>React$1.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${d}`})))),ee=React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$1.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oe=React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React$1.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ae=React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$1.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),se=React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React$1.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ot=React$1.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React$1.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React$1.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ft=()=>{let[a,e]=React$1.useState(document.hidden);return React$1.useEffect(()=>{let c=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",c),()=>window.removeEventListener("visibilitychange",c)},[]),a},bt=1,yt=class{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{let e=this.subscribers.indexOf(a);this.subscribers.splice(e,1)}),this.publish=a=>{this.subscribers.forEach(e=>e(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var e;let{message:c,...d}=a,h=typeof(a==null?void 0:a.id)=="number"||((e=a.id)==null?void 0:e.length)>0?a.id:bt++,g=this.toasts.find(_e=>_e.id===h),b=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),g?this.toasts=this.toasts.map(_e=>_e.id===h?(this.publish({..._e,...a,id:h,title:c}),{..._e,...a,id:h,dismissible:b,title:c}):_e):this.addToast({title:c,...d,dismissible:b,id:h}),h},this.dismiss=a=>(this.dismissedToasts.add(a),a||this.toasts.forEach(e=>{this.subscribers.forEach(c=>c({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:a,dismiss:!0})),a),this.message=(a,e)=>this.create({...e,message:a}),this.error=(a,e)=>this.create({...e,message:a,type:"error"}),this.success=(a,e)=>this.create({...e,type:"success",message:a}),this.info=(a,e)=>this.create({...e,type:"info",message:a}),this.warning=(a,e)=>this.create({...e,type:"warning",message:a}),this.loading=(a,e)=>this.create({...e,type:"loading",message:a}),this.promise=(a,e)=>{if(!e)return;let c;e.loading!==void 0&&(c=this.create({...e,promise:a,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let d=a instanceof Promise?a:a(),h=c!==void 0,g,b=d.then(async et=>{if(g=["resolve",et],React$1.isValidElement(et))h=!1,this.create({id:c,type:"default",message:et});else if(ie(et)&&!et.ok){h=!1;let rt=typeof e.error=="function"?await e.error(`HTTP error! status: ${et.status}`):e.error,st=typeof e.description=="function"?await e.description(`HTTP error! status: ${et.status}`):e.description;this.create({id:c,type:"error",message:rt,description:st})}else if(e.success!==void 0){h=!1;let rt=typeof e.success=="function"?await e.success(et):e.success,st=typeof e.description=="function"?await e.description(et):e.description;this.create({id:c,type:"success",message:rt,description:st})}}).catch(async et=>{if(g=["reject",et],e.error!==void 0){h=!1;let rt=typeof e.error=="function"?await e.error(et):e.error,st=typeof e.description=="function"?await e.description(et):e.description;this.create({id:c,type:"error",message:rt,description:st})}}).finally(()=>{var et;h&&(this.dismiss(c),c=void 0),(et=e.finally)==null||et.call(e)}),_e=()=>new Promise((et,rt)=>b.then(()=>g[0]==="reject"?rt(g[1]):et(g[1])).catch(rt));return typeof c!="string"&&typeof c!="number"?{unwrap:_e}:Object.assign(c,{unwrap:_e})},this.custom=(a,e)=>{let c=(e==null?void 0:e.id)||bt++;return this.create({jsx:a(c),id:c,...e}),c},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},v=new yt,ne=(a,e)=>{let c=(e==null?void 0:e.id)||bt++;return v.addToast({title:a,...e,id:c}),c},ie=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",le=ne,ce=()=>v.toasts,de=()=>v.getActiveToasts();Object.assign(le,{success:v.success,info:v.info,warning:v.warning,error:v.error,custom:v.custom,message:v.message,promise:v.promise,dismiss:v.dismiss,loading:v.loading},{getHistory:ce,getToasts:de});function wt(a,{insertAt:e}={}){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",e==="top"&&c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a))}wt(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function tt(a){return a.label!==void 0}var pe=3,me="32px",ge="16px",Wt=4e3,he=356,be=14,ye=20,we=200;function M(...a){return a.filter(Boolean).join(" ")}function xe(a){let[e,c]=a.split("-"),d=[];return e&&d.push(e),c&&d.push(c),d}var ve=a=>{var e,c,d,h,g,b,_e,et,rt,st,$;let{invert:_,toast:nt,unstyled:it,interacting:ot,setHeights:lt,visibleToasts:at,heights:ct,index:dt,toasts:ht,expanded:pt,removeToast:ft,defaultRichColors:mt,closeButton:xt,style:gt,cancelButtonStyle:Et,actionButtonStyle:St,className:Pt="",descriptionClassName:Mt="",duration:Rt,position:Dt,gap:Tt,loadingIcon:It,expandByDefault:Vt,classNames:Bt,icons:Ct,closeButtonAriaLabel:en="Close toast",pauseWhenPageIsHidden:sn}=a,[kt,Ut]=React$1.useState(null),[Jt,tn]=React$1.useState(null),[Gt,hn]=React$1.useState(!1),[fn,gn]=React$1.useState(!1),[kn,On]=React$1.useState(!1),[un,Sn]=React$1.useState(!1),[Ln,$n]=React$1.useState(!1),[Wn,Pn]=React$1.useState(0),[or,Kt]=React$1.useState(0),Xt=React$1.useRef(nt.duration||Rt||Wt),on=React$1.useRef(null),vn=React$1.useRef(null),Cn=dt===0,yn=dt+1<=at,nn=nt.type,Qt=nt.dismissible!==!1,bn=nt.className||"",An=nt.descriptionClassName||"",In=React$1.useMemo(()=>ct.findIndex(Nn=>Nn.toastId===nt.id)||0,[ct,nt.id]),Un=React$1.useMemo(()=>{var Nn;return(Nn=nt.closeButton)!=null?Nn:xt},[nt.closeButton,xt]),Vn=React$1.useMemo(()=>nt.duration||Rt||Wt,[nt.duration,Rt]),ir=React$1.useRef(0),Fn=React$1.useRef(0),cr=React$1.useRef(0),Gn=React$1.useRef(null),[Cr,kr]=Dt.split("-"),mr=React$1.useMemo(()=>ct.reduce((Nn,pr,yr)=>yr>=In?Nn:Nn+pr.height,0),[ct,In]),Fs=Ft(),Ao=nt.invert||_,js=nn==="loading";Fn.current=React$1.useMemo(()=>In*Tt+mr,[In,mr]),React$1.useEffect(()=>{Xt.current=Vn},[Vn]),React$1.useEffect(()=>{hn(!0)},[]),React$1.useEffect(()=>{let Nn=vn.current;if(Nn){let pr=Nn.getBoundingClientRect().height;return Kt(pr),lt(yr=>[{toastId:nt.id,height:pr,position:nt.position},...yr]),()=>lt(yr=>yr.filter(zr=>zr.toastId!==nt.id))}},[lt,nt.id]),React$1.useLayoutEffect(()=>{if(!Gt)return;let Nn=vn.current,pr=Nn.style.height;Nn.style.height="auto";let yr=Nn.getBoundingClientRect().height;Nn.style.height=pr,Kt(yr),lt(zr=>zr.find(Lr=>Lr.toastId===nt.id)?zr.map(Lr=>Lr.toastId===nt.id?{...Lr,height:yr}:Lr):[{toastId:nt.id,height:yr,position:nt.position},...zr])},[Gt,nt.title,nt.description,lt,nt.id]);let Xn=React$1.useCallback(()=>{gn(!0),Pn(Fn.current),lt(Nn=>Nn.filter(pr=>pr.toastId!==nt.id)),setTimeout(()=>{ft(nt)},we)},[nt,ft,lt,Fn]);React$1.useEffect(()=>{if(nt.promise&&nn==="loading"||nt.duration===1/0||nt.type==="loading")return;let Nn;return pt||ot||sn&&Fs?(()=>{if(cr.current<ir.current){let pr=new Date().getTime()-ir.current;Xt.current=Xt.current-pr}cr.current=new Date().getTime()})():Xt.current!==1/0&&(ir.current=new Date().getTime(),Nn=setTimeout(()=>{var pr;(pr=nt.onAutoClose)==null||pr.call(nt,nt),Xn()},Xt.current)),()=>clearTimeout(Nn)},[pt,ot,nt,nn,sn,Fs,Xn]),React$1.useEffect(()=>{nt.delete&&Xn()},[Xn,nt.delete]);function Zn(){var Nn,pr,yr;return Ct!=null&&Ct.loading?React$1.createElement("div",{className:M(Bt==null?void 0:Bt.loader,(Nn=nt==null?void 0:nt.classNames)==null?void 0:Nn.loader,"sonner-loader"),"data-visible":nn==="loading"},Ct.loading):It?React$1.createElement("div",{className:M(Bt==null?void 0:Bt.loader,(pr=nt==null?void 0:nt.classNames)==null?void 0:pr.loader,"sonner-loader"),"data-visible":nn==="loading"},It):React$1.createElement(Yt,{className:M(Bt==null?void 0:Bt.loader,(yr=nt==null?void 0:nt.classNames)==null?void 0:yr.loader),visible:nn==="loading"})}return React$1.createElement("li",{tabIndex:0,ref:vn,className:M(Pt,bn,Bt==null?void 0:Bt.toast,(e=nt==null?void 0:nt.classNames)==null?void 0:e.toast,Bt==null?void 0:Bt.default,Bt==null?void 0:Bt[nn],(c=nt==null?void 0:nt.classNames)==null?void 0:c[nn]),"data-sonner-toast":"","data-rich-colors":(d=nt.richColors)!=null?d:mt,"data-styled":!(nt.jsx||nt.unstyled||it),"data-mounted":Gt,"data-promise":!!nt.promise,"data-swiped":Ln,"data-removed":fn,"data-visible":yn,"data-y-position":Cr,"data-x-position":kr,"data-index":dt,"data-front":Cn,"data-swiping":kn,"data-dismissible":Qt,"data-type":nn,"data-invert":Ao,"data-swipe-out":un,"data-swipe-direction":Jt,"data-expanded":!!(pt||Vt&&Gt),style:{"--index":dt,"--toasts-before":dt,"--z-index":ht.length-dt,"--offset":`${fn?Wn:Fn.current}px`,"--initial-height":Vt?"auto":`${or}px`,...gt,...nt.style},onDragEnd:()=>{On(!1),Ut(null),Gn.current=null},onPointerDown:Nn=>{js||!Qt||(on.current=new Date,Pn(Fn.current),Nn.target.setPointerCapture(Nn.pointerId),Nn.target.tagName!=="BUTTON"&&(On(!0),Gn.current={x:Nn.clientX,y:Nn.clientY}))},onPointerUp:()=>{var Nn,pr,yr,zr;if(un||!Qt)return;Gn.current=null;let Lr=Number(((Nn=vn.current)==null?void 0:Nn.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ts=Number(((pr=vn.current)==null?void 0:pr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Vr=new Date().getTime()-((yr=on.current)==null?void 0:yr.getTime()),$r=kt==="x"?Lr:ts,Jr=Math.abs($r)/Vr;if(Math.abs($r)>=ye||Jr>.11){Pn(Fn.current),(zr=nt.onDismiss)==null||zr.call(nt,nt),tn(kt==="x"?Lr>0?"right":"left":ts>0?"down":"up"),Xn(),Sn(!0),$n(!1);return}On(!1),Ut(null)},onPointerMove:Nn=>{var pr,yr,zr,Lr;if(!Gn.current||!Qt||((pr=window.getSelection())==null?void 0:pr.toString().length)>0)return;let ts=Nn.clientY-Gn.current.y,Vr=Nn.clientX-Gn.current.x,$r=(yr=a.swipeDirections)!=null?yr:xe(Dt);!kt&&(Math.abs(Vr)>1||Math.abs(ts)>1)&&Ut(Math.abs(Vr)>Math.abs(ts)?"x":"y");let Jr={x:0,y:0};kt==="y"?($r.includes("top")||$r.includes("bottom"))&&($r.includes("top")&&ts<0||$r.includes("bottom")&&ts>0)&&(Jr.y=ts):kt==="x"&&($r.includes("left")||$r.includes("right"))&&($r.includes("left")&&Vr<0||$r.includes("right")&&Vr>0)&&(Jr.x=Vr),(Math.abs(Jr.x)>0||Math.abs(Jr.y)>0)&&$n(!0),(zr=vn.current)==null||zr.style.setProperty("--swipe-amount-x",`${Jr.x}px`),(Lr=vn.current)==null||Lr.style.setProperty("--swipe-amount-y",`${Jr.y}px`)}},Un&&!nt.jsx?React$1.createElement("button",{"aria-label":en,"data-disabled":js,"data-close-button":!0,onClick:js||!Qt?()=>{}:()=>{var Nn;Xn(),(Nn=nt.onDismiss)==null||Nn.call(nt,nt)},className:M(Bt==null?void 0:Bt.closeButton,(h=nt==null?void 0:nt.classNames)==null?void 0:h.closeButton)},(g=Ct==null?void 0:Ct.close)!=null?g:Ot):null,nt.jsx||reactExports.isValidElement(nt.title)?nt.jsx?nt.jsx:typeof nt.title=="function"?nt.title():nt.title:React$1.createElement(React$1.Fragment,null,nn||nt.icon||nt.promise?React$1.createElement("div",{"data-icon":"",className:M(Bt==null?void 0:Bt.icon,(b=nt==null?void 0:nt.classNames)==null?void 0:b.icon)},nt.promise||nt.type==="loading"&&!nt.icon?nt.icon||Zn():null,nt.type!=="loading"?nt.icon||(Ct==null?void 0:Ct[nn])||jt(nn):null):null,React$1.createElement("div",{"data-content":"",className:M(Bt==null?void 0:Bt.content,(_e=nt==null?void 0:nt.classNames)==null?void 0:_e.content)},React$1.createElement("div",{"data-title":"",className:M(Bt==null?void 0:Bt.title,(et=nt==null?void 0:nt.classNames)==null?void 0:et.title)},typeof nt.title=="function"?nt.title():nt.title),nt.description?React$1.createElement("div",{"data-description":"",className:M(Mt,An,Bt==null?void 0:Bt.description,(rt=nt==null?void 0:nt.classNames)==null?void 0:rt.description)},typeof nt.description=="function"?nt.description():nt.description):null),reactExports.isValidElement(nt.cancel)?nt.cancel:nt.cancel&&tt(nt.cancel)?React$1.createElement("button",{"data-button":!0,"data-cancel":!0,style:nt.cancelButtonStyle||Et,onClick:Nn=>{var pr,yr;tt(nt.cancel)&&Qt&&((yr=(pr=nt.cancel).onClick)==null||yr.call(pr,Nn),Xn())},className:M(Bt==null?void 0:Bt.cancelButton,(st=nt==null?void 0:nt.classNames)==null?void 0:st.cancelButton)},nt.cancel.label):null,reactExports.isValidElement(nt.action)?nt.action:nt.action&&tt(nt.action)?React$1.createElement("button",{"data-button":!0,"data-action":!0,style:nt.actionButtonStyle||St,onClick:Nn=>{var pr,yr;tt(nt.action)&&((yr=(pr=nt.action).onClick)==null||yr.call(pr,Nn),!Nn.defaultPrevented&&Xn())},className:M(Bt==null?void 0:Bt.actionButton,($=nt==null?void 0:nt.classNames)==null?void 0:$.actionButton)},nt.action.label):null))};function _t(){if(typeof window>"u"||typeof document>"u")return"ltr";let a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function Te(a,e){let c={};return[a,e].forEach((d,h)=>{let g=h===1,b=g?"--mobile-offset":"--offset",_e=g?ge:me;function et(rt){["top","right","bottom","left"].forEach(st=>{c[`${b}-${st}`]=typeof rt=="number"?`${rt}px`:rt})}typeof d=="number"||typeof d=="string"?et(d):typeof d=="object"?["top","right","bottom","left"].forEach(rt=>{d[rt]===void 0?c[`${b}-${rt}`]=_e:c[`${b}-${rt}`]=typeof d[rt]=="number"?`${d[rt]}px`:d[rt]}):et(_e)}),c}var $e=reactExports.forwardRef(function(a,e){let{invert:c,position:d="bottom-right",hotkey:h=["altKey","KeyT"],expand:g,closeButton:b,className:_e,offset:et,mobileOffset:rt,theme:st="light",richColors:$,duration:_,style:nt,visibleToasts:it=pe,toastOptions:ot,dir:lt=_t(),gap:at=be,loadingIcon:ct,icons:dt,containerAriaLabel:ht="Notifications",pauseWhenPageIsHidden:pt}=a,[ft,mt]=React$1.useState([]),xt=React$1.useMemo(()=>Array.from(new Set([d].concat(ft.filter(sn=>sn.position).map(sn=>sn.position)))),[ft,d]),[gt,Et]=React$1.useState([]),[St,Pt]=React$1.useState(!1),[Mt,Rt]=React$1.useState(!1),[Dt,Tt]=React$1.useState(st!=="system"?st:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),It=React$1.useRef(null),Vt=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),Bt=React$1.useRef(null),Ct=React$1.useRef(!1),en=React$1.useCallback(sn=>{mt(kt=>{var Ut;return(Ut=kt.find(Jt=>Jt.id===sn.id))!=null&&Ut.delete||v.dismiss(sn.id),kt.filter(({id:Jt})=>Jt!==sn.id)})},[]);return React$1.useEffect(()=>v.subscribe(sn=>{if(sn.dismiss){mt(kt=>kt.map(Ut=>Ut.id===sn.id?{...Ut,delete:!0}:Ut));return}setTimeout(()=>{vt.flushSync(()=>{mt(kt=>{let Ut=kt.findIndex(Jt=>Jt.id===sn.id);return Ut!==-1?[...kt.slice(0,Ut),{...kt[Ut],...sn},...kt.slice(Ut+1)]:[sn,...kt]})})})}),[]),React$1.useEffect(()=>{if(st!=="system"){Tt(st);return}if(st==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Tt("dark"):Tt("light")),typeof window>"u")return;let sn=window.matchMedia("(prefers-color-scheme: dark)");try{sn.addEventListener("change",({matches:kt})=>{Tt(kt?"dark":"light")})}catch{sn.addListener(({matches:Ut})=>{try{Tt(Ut?"dark":"light")}catch(Jt){console.error(Jt)}})}},[st]),React$1.useEffect(()=>{ft.length<=1&&Pt(!1)},[ft]),React$1.useEffect(()=>{let sn=kt=>{var Ut,Jt;h.every(tn=>kt[tn]||kt.code===tn)&&(Pt(!0),(Ut=It.current)==null||Ut.focus()),kt.code==="Escape"&&(document.activeElement===It.current||(Jt=It.current)!=null&&Jt.contains(document.activeElement))&&Pt(!1)};return document.addEventListener("keydown",sn),()=>document.removeEventListener("keydown",sn)},[h]),React$1.useEffect(()=>{if(It.current)return()=>{Bt.current&&(Bt.current.focus({preventScroll:!0}),Bt.current=null,Ct.current=!1)}},[It.current]),React$1.createElement("section",{ref:e,"aria-label":`${ht} ${Vt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},xt.map((sn,kt)=>{var Ut;let[Jt,tn]=sn.split("-");return ft.length?React$1.createElement("ol",{key:sn,dir:lt==="auto"?_t():lt,tabIndex:-1,ref:It,className:_e,"data-sonner-toaster":!0,"data-theme":Dt,"data-y-position":Jt,"data-lifted":St&&ft.length>1&&!g,"data-x-position":tn,style:{"--front-toast-height":`${((Ut=gt[0])==null?void 0:Ut.height)||0}px`,"--width":`${he}px`,"--gap":`${at}px`,...nt,...Te(et,rt)},onBlur:Gt=>{Ct.current&&!Gt.currentTarget.contains(Gt.relatedTarget)&&(Ct.current=!1,Bt.current&&(Bt.current.focus({preventScroll:!0}),Bt.current=null))},onFocus:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||Ct.current||(Ct.current=!0,Bt.current=Gt.relatedTarget)},onMouseEnter:()=>Pt(!0),onMouseMove:()=>Pt(!0),onMouseLeave:()=>{Mt||Pt(!1)},onDragEnd:()=>Pt(!1),onPointerDown:Gt=>{Gt.target instanceof HTMLElement&&Gt.target.dataset.dismissible==="false"||Rt(!0)},onPointerUp:()=>Rt(!1)},ft.filter(Gt=>!Gt.position&&kt===0||Gt.position===sn).map((Gt,hn)=>{var fn,gn;return React$1.createElement(ve,{key:Gt.id,icons:dt,index:hn,toast:Gt,defaultRichColors:$,duration:(fn=ot==null?void 0:ot.duration)!=null?fn:_,className:ot==null?void 0:ot.className,descriptionClassName:ot==null?void 0:ot.descriptionClassName,invert:c,visibleToasts:it,closeButton:(gn=ot==null?void 0:ot.closeButton)!=null?gn:b,interacting:Mt,position:sn,style:ot==null?void 0:ot.style,unstyled:ot==null?void 0:ot.unstyled,classNames:ot==null?void 0:ot.classNames,cancelButtonStyle:ot==null?void 0:ot.cancelButtonStyle,actionButtonStyle:ot==null?void 0:ot.actionButtonStyle,removeToast:en,toasts:ft.filter(kn=>kn.position==Gt.position),heights:gt.filter(kn=>kn.position==Gt.position),setHeights:Et,expandByDefault:g,gap:at,loadingIcon:ct,expanded:St,pauseWhenPageIsHidden:pt,swipeDirections:a.swipeDirections})})):null}))});const Toaster=({...a})=>{const{theme:e="system"}=j();return jsxRuntimeExports.jsx($e,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})};var useReactId=React$2[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId$1(a){const[e,c]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{c(d=>d??String(count$1++))},[a]),e?`radix-${e}`:""}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=a=>({x:a,y:a}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(a,e,c){return max(a,min(e,c))}function evaluate(a,e){return typeof a=="function"?a(e):a}function getSide(a){return a.split("-")[0]}function getAlignment(a){return a.split("-")[1]}function getOppositeAxis(a){return a==="x"?"y":"x"}function getAxisLength(a){return a==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(a){return yAxisSides.has(getSide(a))?"y":"x"}function getAlignmentAxis(a){return getOppositeAxis(getSideAxis(a))}function getAlignmentSides(a,e,c){c===void 0&&(c=!1);const d=getAlignment(a),h=getAlignmentAxis(a),g=getAxisLength(h);let b=h==="x"?d===(c?"end":"start")?"right":"left":d==="start"?"bottom":"top";return e.reference[g]>e.floating[g]&&(b=getOppositePlacement(b)),[b,getOppositePlacement(b)]}function getExpandedPlacements(a){const e=getOppositePlacement(a);return[getOppositeAlignmentPlacement(a),e,getOppositeAlignmentPlacement(e)]}function getOppositeAlignmentPlacement(a){return a.replace(/start|end/g,e=>oppositeAlignmentMap[e])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(a,e,c){switch(a){case"top":case"bottom":return c?e?rlPlacement:lrPlacement:e?lrPlacement:rlPlacement;case"left":case"right":return e?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(a,e,c,d){const h=getAlignment(a);let g=getSideList(getSide(a),c==="start",d);return h&&(g=g.map(b=>b+"-"+h),e&&(g=g.concat(g.map(getOppositeAlignmentPlacement)))),g}function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,e=>oppositeSideMap[e])}function expandPaddingObject(a){return{top:0,right:0,bottom:0,left:0,...a}}function getPaddingObject(a){return typeof a!="number"?expandPaddingObject(a):{top:a,right:a,bottom:a,left:a}}function rectToClientRect(a){const{x:e,y:c,width:d,height:h}=a;return{width:d,height:h,top:c,left:e,right:e+d,bottom:c+h,x:e,y:c}}function computeCoordsFromPlacement(a,e,c){let{reference:d,floating:h}=a;const g=getSideAxis(e),b=getAlignmentAxis(e),_e=getAxisLength(b),et=getSide(e),rt=g==="y",st=d.x+d.width/2-h.width/2,$=d.y+d.height/2-h.height/2,_=d[_e]/2-h[_e]/2;let nt;switch(et){case"top":nt={x:st,y:d.y-h.height};break;case"bottom":nt={x:st,y:d.y+d.height};break;case"right":nt={x:d.x+d.width,y:$};break;case"left":nt={x:d.x-h.width,y:$};break;default:nt={x:d.x,y:d.y}}switch(getAlignment(e)){case"start":nt[b]-=_*(c&&rt?-1:1);break;case"end":nt[b]+=_*(c&&rt?-1:1);break}return nt}const computePosition$1=async(a,e,c)=>{const{placement:d="bottom",strategy:h="absolute",middleware:g=[],platform:b}=c,_e=g.filter(Boolean),et=await(b.isRTL==null?void 0:b.isRTL(e));let rt=await b.getElementRects({reference:a,floating:e,strategy:h}),{x:st,y:$}=computeCoordsFromPlacement(rt,d,et),_=d,nt={},it=0;for(let ot=0;ot<_e.length;ot++){const{name:lt,fn:at}=_e[ot],{x:ct,y:dt,data:ht,reset:pt}=await at({x:st,y:$,initialPlacement:d,placement:_,strategy:h,middlewareData:nt,rects:rt,platform:b,elements:{reference:a,floating:e}});st=ct??st,$=dt??$,nt={...nt,[lt]:{...nt[lt],...ht}},pt&&it<=50&&(it++,typeof pt=="object"&&(pt.placement&&(_=pt.placement),pt.rects&&(rt=pt.rects===!0?await b.getElementRects({reference:a,floating:e,strategy:h}):pt.rects),{x:st,y:$}=computeCoordsFromPlacement(rt,_,et)),ot=-1)}return{x:st,y:$,placement:_,strategy:h,middlewareData:nt}};async function detectOverflow(a,e){var c;e===void 0&&(e={});const{x:d,y:h,platform:g,rects:b,elements:_e,strategy:et}=a,{boundary:rt="clippingAncestors",rootBoundary:st="viewport",elementContext:$="floating",altBoundary:_=!1,padding:nt=0}=evaluate(e,a),it=getPaddingObject(nt),lt=_e[_?$==="floating"?"reference":"floating":$],at=rectToClientRect(await g.getClippingRect({element:(c=await(g.isElement==null?void 0:g.isElement(lt)))==null||c?lt:lt.contextElement||await(g.getDocumentElement==null?void 0:g.getDocumentElement(_e.floating)),boundary:rt,rootBoundary:st,strategy:et})),ct=$==="floating"?{x:d,y:h,width:b.floating.width,height:b.floating.height}:b.reference,dt=await(g.getOffsetParent==null?void 0:g.getOffsetParent(_e.floating)),ht=await(g.isElement==null?void 0:g.isElement(dt))?await(g.getScale==null?void 0:g.getScale(dt))||{x:1,y:1}:{x:1,y:1},pt=rectToClientRect(g.convertOffsetParentRelativeRectToViewportRelativeRect?await g.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_e,rect:ct,offsetParent:dt,strategy:et}):ct);return{top:(at.top-pt.top+it.top)/ht.y,bottom:(pt.bottom-at.bottom+it.bottom)/ht.y,left:(at.left-pt.left+it.left)/ht.x,right:(pt.right-at.right+it.right)/ht.x}}const arrow$3=a=>({name:"arrow",options:a,async fn(e){const{x:c,y:d,placement:h,rects:g,platform:b,elements:_e,middlewareData:et}=e,{element:rt,padding:st=0}=evaluate(a,e)||{};if(rt==null)return{};const $=getPaddingObject(st),_={x:c,y:d},nt=getAlignmentAxis(h),it=getAxisLength(nt),ot=await b.getDimensions(rt),lt=nt==="y",at=lt?"top":"left",ct=lt?"bottom":"right",dt=lt?"clientHeight":"clientWidth",ht=g.reference[it]+g.reference[nt]-_[nt]-g.floating[it],pt=_[nt]-g.reference[nt],ft=await(b.getOffsetParent==null?void 0:b.getOffsetParent(rt));let mt=ft?ft[dt]:0;(!mt||!await(b.isElement==null?void 0:b.isElement(ft)))&&(mt=_e.floating[dt]||g.floating[it]);const xt=ht/2-pt/2,gt=mt/2-ot[it]/2-1,Et=min($[at],gt),St=min($[ct],gt),Pt=Et,Mt=mt-ot[it]-St,Rt=mt/2-ot[it]/2+xt,Dt=clamp$1(Pt,Rt,Mt),Tt=!et.arrow&&getAlignment(h)!=null&&Rt!==Dt&&g.reference[it]/2-(Rt<Pt?Et:St)-ot[it]/2<0,It=Tt?Rt<Pt?Rt-Pt:Rt-Mt:0;return{[nt]:_[nt]+It,data:{[nt]:Dt,centerOffset:Rt-Dt-It,...Tt&&{alignmentOffset:It}},reset:Tt}}}),flip$2=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(e){var c,d;const{placement:h,middlewareData:g,rects:b,initialPlacement:_e,platform:et,elements:rt}=e,{mainAxis:st=!0,crossAxis:$=!0,fallbackPlacements:_,fallbackStrategy:nt="bestFit",fallbackAxisSideDirection:it="none",flipAlignment:ot=!0,...lt}=evaluate(a,e);if((c=g.arrow)!=null&&c.alignmentOffset)return{};const at=getSide(h),ct=getSideAxis(_e),dt=getSide(_e)===_e,ht=await(et.isRTL==null?void 0:et.isRTL(rt.floating)),pt=_||(dt||!ot?[getOppositePlacement(_e)]:getExpandedPlacements(_e)),ft=it!=="none";!_&&ft&&pt.push(...getOppositeAxisPlacements(_e,ot,it,ht));const mt=[_e,...pt],xt=await detectOverflow(e,lt),gt=[];let Et=((d=g.flip)==null?void 0:d.overflows)||[];if(st&&gt.push(xt[at]),$){const Rt=getAlignmentSides(h,b,ht);gt.push(xt[Rt[0]],xt[Rt[1]])}if(Et=[...Et,{placement:h,overflows:gt}],!gt.every(Rt=>Rt<=0)){var St,Pt;const Rt=(((St=g.flip)==null?void 0:St.index)||0)+1,Dt=mt[Rt];if(Dt&&(!($==="alignment"?ct!==getSideAxis(Dt):!1)||Et.every(Vt=>Vt.overflows[0]>0&&getSideAxis(Vt.placement)===ct)))return{data:{index:Rt,overflows:Et},reset:{placement:Dt}};let Tt=(Pt=Et.filter(It=>It.overflows[0]<=0).sort((It,Vt)=>It.overflows[1]-Vt.overflows[1])[0])==null?void 0:Pt.placement;if(!Tt)switch(nt){case"bestFit":{var Mt;const It=(Mt=Et.filter(Vt=>{if(ft){const Bt=getSideAxis(Vt.placement);return Bt===ct||Bt==="y"}return!0}).map(Vt=>[Vt.placement,Vt.overflows.filter(Bt=>Bt>0).reduce((Bt,Ct)=>Bt+Ct,0)]).sort((Vt,Bt)=>Vt[1]-Bt[1])[0])==null?void 0:Mt[0];It&&(Tt=It);break}case"initialPlacement":Tt=_e;break}if(h!==Tt)return{reset:{placement:Tt}}}return{}}}};function getSideOffsets(a,e){return{top:a.top-e.height,right:a.right-e.width,bottom:a.bottom-e.height,left:a.left-e.width}}function isAnySideFullyClipped(a){return sides.some(e=>a[e]>=0)}const hide$2=function(a){return a===void 0&&(a={}),{name:"hide",options:a,async fn(e){const{rects:c}=e,{strategy:d="referenceHidden",...h}=evaluate(a,e);switch(d){case"referenceHidden":{const g=await detectOverflow(e,{...h,elementContext:"reference"}),b=getSideOffsets(g,c.reference);return{data:{referenceHiddenOffsets:b,referenceHidden:isAnySideFullyClipped(b)}}}case"escaped":{const g=await detectOverflow(e,{...h,altBoundary:!0}),b=getSideOffsets(g,c.floating);return{data:{escapedOffsets:b,escaped:isAnySideFullyClipped(b)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(a,e){const{placement:c,platform:d,elements:h}=a,g=await(d.isRTL==null?void 0:d.isRTL(h.floating)),b=getSide(c),_e=getAlignment(c),et=getSideAxis(c)==="y",rt=originSides.has(b)?-1:1,st=g&&et?-1:1,$=evaluate(e,a);let{mainAxis:_,crossAxis:nt,alignmentAxis:it}=typeof $=="number"?{mainAxis:$,crossAxis:0,alignmentAxis:null}:{mainAxis:$.mainAxis||0,crossAxis:$.crossAxis||0,alignmentAxis:$.alignmentAxis};return _e&&typeof it=="number"&&(nt=_e==="end"?it*-1:it),et?{x:nt*st,y:_*rt}:{x:_*rt,y:nt*st}}const offset$2=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(e){var c,d;const{x:h,y:g,placement:b,middlewareData:_e}=e,et=await convertValueToCoords(e,a);return b===((c=_e.offset)==null?void 0:c.placement)&&(d=_e.arrow)!=null&&d.alignmentOffset?{}:{x:h+et.x,y:g+et.y,data:{...et,placement:b}}}}},shift$2=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(e){const{x:c,y:d,placement:h}=e,{mainAxis:g=!0,crossAxis:b=!1,limiter:_e={fn:lt=>{let{x:at,y:ct}=lt;return{x:at,y:ct}}},...et}=evaluate(a,e),rt={x:c,y:d},st=await detectOverflow(e,et),$=getSideAxis(getSide(h)),_=getOppositeAxis($);let nt=rt[_],it=rt[$];if(g){const lt=_==="y"?"top":"left",at=_==="y"?"bottom":"right",ct=nt+st[lt],dt=nt-st[at];nt=clamp$1(ct,nt,dt)}if(b){const lt=$==="y"?"top":"left",at=$==="y"?"bottom":"right",ct=it+st[lt],dt=it-st[at];it=clamp$1(ct,it,dt)}const ot=_e.fn({...e,[_]:nt,[$]:it});return{...ot,data:{x:ot.x-c,y:ot.y-d,enabled:{[_]:g,[$]:b}}}}}},limitShift$2=function(a){return a===void 0&&(a={}),{options:a,fn(e){const{x:c,y:d,placement:h,rects:g,middlewareData:b}=e,{offset:_e=0,mainAxis:et=!0,crossAxis:rt=!0}=evaluate(a,e),st={x:c,y:d},$=getSideAxis(h),_=getOppositeAxis($);let nt=st[_],it=st[$];const ot=evaluate(_e,e),lt=typeof ot=="number"?{mainAxis:ot,crossAxis:0}:{mainAxis:0,crossAxis:0,...ot};if(et){const dt=_==="y"?"height":"width",ht=g.reference[_]-g.floating[dt]+lt.mainAxis,pt=g.reference[_]+g.reference[dt]-lt.mainAxis;nt<ht?nt=ht:nt>pt&&(nt=pt)}if(rt){var at,ct;const dt=_==="y"?"width":"height",ht=originSides.has(getSide(h)),pt=g.reference[$]-g.floating[dt]+(ht&&((at=b.offset)==null?void 0:at[$])||0)+(ht?0:lt.crossAxis),ft=g.reference[$]+g.reference[dt]+(ht?0:((ct=b.offset)==null?void 0:ct[$])||0)-(ht?lt.crossAxis:0);it<pt?it=pt:it>ft&&(it=ft)}return{[_]:nt,[$]:it}}}},size$2=function(a){return a===void 0&&(a={}),{name:"size",options:a,async fn(e){var c,d;const{placement:h,rects:g,platform:b,elements:_e}=e,{apply:et=()=>{},...rt}=evaluate(a,e),st=await detectOverflow(e,rt),$=getSide(h),_=getAlignment(h),nt=getSideAxis(h)==="y",{width:it,height:ot}=g.floating;let lt,at;$==="top"||$==="bottom"?(lt=$,at=_===(await(b.isRTL==null?void 0:b.isRTL(_e.floating))?"start":"end")?"left":"right"):(at=$,lt=_==="end"?"top":"bottom");const ct=ot-st.top-st.bottom,dt=it-st.left-st.right,ht=min(ot-st[lt],ct),pt=min(it-st[at],dt),ft=!e.middlewareData.shift;let mt=ht,xt=pt;if((c=e.middlewareData.shift)!=null&&c.enabled.x&&(xt=dt),(d=e.middlewareData.shift)!=null&&d.enabled.y&&(mt=ct),ft&&!_){const Et=max(st.left,0),St=max(st.right,0),Pt=max(st.top,0),Mt=max(st.bottom,0);nt?xt=it-2*(Et!==0||St!==0?Et+St:max(st.left,st.right)):mt=ot-2*(Pt!==0||Mt!==0?Pt+Mt:max(st.top,st.bottom))}await et({...e,availableWidth:xt,availableHeight:mt});const gt=await b.getDimensions(_e.floating);return it!==gt.width||ot!==gt.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(a){return isNode(a)?(a.nodeName||"").toLowerCase():"#document"}function getWindow(a){var e;return(a==null||(e=a.ownerDocument)==null?void 0:e.defaultView)||window}function getDocumentElement(a){var e;return(e=(isNode(a)?a.ownerDocument:a.document)||window.document)==null?void 0:e.documentElement}function isNode(a){return hasWindow()?a instanceof Node||a instanceof getWindow(a).Node:!1}function isElement(a){return hasWindow()?a instanceof Element||a instanceof getWindow(a).Element:!1}function isHTMLElement$1(a){return hasWindow()?a instanceof HTMLElement||a instanceof getWindow(a).HTMLElement:!1}function isShadowRoot(a){return!hasWindow()||typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof getWindow(a).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(a){const{overflow:e,overflowX:c,overflowY:d,display:h}=getComputedStyle$1(a);return/auto|scroll|overlay|hidden|clip/.test(e+d+c)&&!invalidOverflowDisplayValues.has(h)}const tableElements$1=new Set(["table","td","th"]);function isTableElement(a){return tableElements$1.has(getNodeName(a))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(a){return topLayerSelectors.some(e=>{try{return a.matches(e)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(a){const e=isWebKit(),c=isElement(a)?getComputedStyle$1(a):a;return transformProperties.some(d=>c[d]?c[d]!=="none":!1)||(c.containerType?c.containerType!=="normal":!1)||!e&&(c.backdropFilter?c.backdropFilter!=="none":!1)||!e&&(c.filter?c.filter!=="none":!1)||willChangeValues.some(d=>(c.willChange||"").includes(d))||containValues.some(d=>(c.contain||"").includes(d))}function getContainingBlock(a){let e=getParentNode(a);for(;isHTMLElement$1(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;if(isTopLayer(e))return null;e=getParentNode(e)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(a){return lastTraversableNodeNames.has(getNodeName(a))}function getComputedStyle$1(a){return getWindow(a).getComputedStyle(a)}function getNodeScroll(a){return isElement(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function getParentNode(a){if(getNodeName(a)==="html")return a;const e=a.assignedSlot||a.parentNode||isShadowRoot(a)&&a.host||getDocumentElement(a);return isShadowRoot(e)?e.host:e}function getNearestOverflowAncestor(a){const e=getParentNode(a);return isLastTraversableNode(e)?a.ownerDocument?a.ownerDocument.body:a.body:isHTMLElement$1(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(a,e,c){var d;e===void 0&&(e=[]),c===void 0&&(c=!0);const h=getNearestOverflowAncestor(a),g=h===((d=a.ownerDocument)==null?void 0:d.body),b=getWindow(h);if(g){const _e=getFrameElement(b);return e.concat(b,b.visualViewport||[],isOverflowElement(h)?h:[],_e&&c?getOverflowAncestors(_e):[])}return e.concat(h,getOverflowAncestors(h,[],c))}function getFrameElement(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function getCssDimensions(a){const e=getComputedStyle$1(a);let c=parseFloat(e.width)||0,d=parseFloat(e.height)||0;const h=isHTMLElement$1(a),g=h?a.offsetWidth:c,b=h?a.offsetHeight:d,_e=round(c)!==g||round(d)!==b;return _e&&(c=g,d=b),{width:c,height:d,$:_e}}function unwrapElement(a){return isElement(a)?a:a.contextElement}function getScale(a){const e=unwrapElement(a);if(!isHTMLElement$1(e))return createCoords(1);const c=e.getBoundingClientRect(),{width:d,height:h,$:g}=getCssDimensions(e);let b=(g?round(c.width):c.width)/d,_e=(g?round(c.height):c.height)/h;return(!b||!Number.isFinite(b))&&(b=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:b,y:_e}}const noOffsets=createCoords(0);function getVisualOffsets(a){const e=getWindow(a);return!isWebKit()||!e.visualViewport?noOffsets:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function shouldAddVisualOffsets(a,e,c){return e===void 0&&(e=!1),!c||e&&c!==getWindow(a)?!1:e}function getBoundingClientRect(a,e,c,d){e===void 0&&(e=!1),c===void 0&&(c=!1);const h=a.getBoundingClientRect(),g=unwrapElement(a);let b=createCoords(1);e&&(d?isElement(d)&&(b=getScale(d)):b=getScale(a));const _e=shouldAddVisualOffsets(g,c,d)?getVisualOffsets(g):createCoords(0);let et=(h.left+_e.x)/b.x,rt=(h.top+_e.y)/b.y,st=h.width/b.x,$=h.height/b.y;if(g){const _=getWindow(g),nt=d&&isElement(d)?getWindow(d):d;let it=_,ot=getFrameElement(it);for(;ot&&d&&nt!==it;){const lt=getScale(ot),at=ot.getBoundingClientRect(),ct=getComputedStyle$1(ot),dt=at.left+(ot.clientLeft+parseFloat(ct.paddingLeft))*lt.x,ht=at.top+(ot.clientTop+parseFloat(ct.paddingTop))*lt.y;et*=lt.x,rt*=lt.y,st*=lt.x,$*=lt.y,et+=dt,rt+=ht,it=getWindow(ot),ot=getFrameElement(it)}}return rectToClientRect({width:st,height:$,x:et,y:rt})}function getWindowScrollBarX(a,e){const c=getNodeScroll(a).scrollLeft;return e?e.left+c:getBoundingClientRect(getDocumentElement(a)).left+c}function getHTMLOffset(a,e,c){c===void 0&&(c=!1);const d=a.getBoundingClientRect(),h=d.left+e.scrollLeft-(c?0:getWindowScrollBarX(a,d)),g=d.top+e.scrollTop;return{x:h,y:g}}function convertOffsetParentRelativeRectToViewportRelativeRect(a){let{elements:e,rect:c,offsetParent:d,strategy:h}=a;const g=h==="fixed",b=getDocumentElement(d),_e=e?isTopLayer(e.floating):!1;if(d===b||_e&&g)return c;let et={scrollLeft:0,scrollTop:0},rt=createCoords(1);const st=createCoords(0),$=isHTMLElement$1(d);if(($||!$&&!g)&&((getNodeName(d)!=="body"||isOverflowElement(b))&&(et=getNodeScroll(d)),isHTMLElement$1(d))){const nt=getBoundingClientRect(d);rt=getScale(d),st.x=nt.x+d.clientLeft,st.y=nt.y+d.clientTop}const _=b&&!$&&!g?getHTMLOffset(b,et,!0):createCoords(0);return{width:c.width*rt.x,height:c.height*rt.y,x:c.x*rt.x-et.scrollLeft*rt.x+st.x+_.x,y:c.y*rt.y-et.scrollTop*rt.y+st.y+_.y}}function getClientRects(a){return Array.from(a.getClientRects())}function getDocumentRect(a){const e=getDocumentElement(a),c=getNodeScroll(a),d=a.ownerDocument.body,h=max(e.scrollWidth,e.clientWidth,d.scrollWidth,d.clientWidth),g=max(e.scrollHeight,e.clientHeight,d.scrollHeight,d.clientHeight);let b=-c.scrollLeft+getWindowScrollBarX(a);const _e=-c.scrollTop;return getComputedStyle$1(d).direction==="rtl"&&(b+=max(e.clientWidth,d.clientWidth)-h),{width:h,height:g,x:b,y:_e}}function getViewportRect(a,e){const c=getWindow(a),d=getDocumentElement(a),h=c.visualViewport;let g=d.clientWidth,b=d.clientHeight,_e=0,et=0;if(h){g=h.width,b=h.height;const rt=isWebKit();(!rt||rt&&e==="fixed")&&(_e=h.offsetLeft,et=h.offsetTop)}return{width:g,height:b,x:_e,y:et}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(a,e){const c=getBoundingClientRect(a,!0,e==="fixed"),d=c.top+a.clientTop,h=c.left+a.clientLeft,g=isHTMLElement$1(a)?getScale(a):createCoords(1),b=a.clientWidth*g.x,_e=a.clientHeight*g.y,et=h*g.x,rt=d*g.y;return{width:b,height:_e,x:et,y:rt}}function getClientRectFromClippingAncestor(a,e,c){let d;if(e==="viewport")d=getViewportRect(a,c);else if(e==="document")d=getDocumentRect(getDocumentElement(a));else if(isElement(e))d=getInnerBoundingClientRect(e,c);else{const h=getVisualOffsets(a);d={x:e.x-h.x,y:e.y-h.y,width:e.width,height:e.height}}return rectToClientRect(d)}function hasFixedPositionAncestor(a,e){const c=getParentNode(a);return c===e||!isElement(c)||isLastTraversableNode(c)?!1:getComputedStyle$1(c).position==="fixed"||hasFixedPositionAncestor(c,e)}function getClippingElementAncestors(a,e){const c=e.get(a);if(c)return c;let d=getOverflowAncestors(a,[],!1).filter(_e=>isElement(_e)&&getNodeName(_e)!=="body"),h=null;const g=getComputedStyle$1(a).position==="fixed";let b=g?getParentNode(a):a;for(;isElement(b)&&!isLastTraversableNode(b);){const _e=getComputedStyle$1(b),et=isContainingBlock(b);!et&&_e.position==="fixed"&&(h=null),(g?!et&&!h:!et&&_e.position==="static"&&!!h&&absoluteOrFixed.has(h.position)||isOverflowElement(b)&&!et&&hasFixedPositionAncestor(a,b))?d=d.filter(st=>st!==b):h=_e,b=getParentNode(b)}return e.set(a,d),d}function getClippingRect(a){let{element:e,boundary:c,rootBoundary:d,strategy:h}=a;const b=[...c==="clippingAncestors"?isTopLayer(e)?[]:getClippingElementAncestors(e,this._c):[].concat(c),d],_e=b[0],et=b.reduce((rt,st)=>{const $=getClientRectFromClippingAncestor(e,st,h);return rt.top=max($.top,rt.top),rt.right=min($.right,rt.right),rt.bottom=min($.bottom,rt.bottom),rt.left=max($.left,rt.left),rt},getClientRectFromClippingAncestor(e,_e,h));return{width:et.right-et.left,height:et.bottom-et.top,x:et.left,y:et.top}}function getDimensions(a){const{width:e,height:c}=getCssDimensions(a);return{width:e,height:c}}function getRectRelativeToOffsetParent(a,e,c){const d=isHTMLElement$1(e),h=getDocumentElement(e),g=c==="fixed",b=getBoundingClientRect(a,!0,g,e);let _e={scrollLeft:0,scrollTop:0};const et=createCoords(0);function rt(){et.x=getWindowScrollBarX(h)}if(d||!d&&!g)if((getNodeName(e)!=="body"||isOverflowElement(h))&&(_e=getNodeScroll(e)),d){const nt=getBoundingClientRect(e,!0,g,e);et.x=nt.x+e.clientLeft,et.y=nt.y+e.clientTop}else h&&rt();g&&!d&&h&&rt();const st=h&&!d&&!g?getHTMLOffset(h,_e):createCoords(0),$=b.left+_e.scrollLeft-et.x-st.x,_=b.top+_e.scrollTop-et.y-st.y;return{x:$,y:_,width:b.width,height:b.height}}function isStaticPositioned(a){return getComputedStyle$1(a).position==="static"}function getTrueOffsetParent(a,e){if(!isHTMLElement$1(a)||getComputedStyle$1(a).position==="fixed")return null;if(e)return e(a);let c=a.offsetParent;return getDocumentElement(a)===c&&(c=c.ownerDocument.body),c}function getOffsetParent(a,e){const c=getWindow(a);if(isTopLayer(a))return c;if(!isHTMLElement$1(a)){let h=getParentNode(a);for(;h&&!isLastTraversableNode(h);){if(isElement(h)&&!isStaticPositioned(h))return h;h=getParentNode(h)}return c}let d=getTrueOffsetParent(a,e);for(;d&&isTableElement(d)&&isStaticPositioned(d);)d=getTrueOffsetParent(d,e);return d&&isLastTraversableNode(d)&&isStaticPositioned(d)&&!isContainingBlock(d)?c:d||getContainingBlock(a)||c}const getElementRects=async function(a){const e=this.getOffsetParent||getOffsetParent,c=this.getDimensions,d=await c(a.floating);return{reference:getRectRelativeToOffsetParent(a.reference,await e(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}};function isRTL(a){return getComputedStyle$1(a).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(a,e){return a.x===e.x&&a.y===e.y&&a.width===e.width&&a.height===e.height}function observeMove(a,e){let c=null,d;const h=getDocumentElement(a);function g(){var _e;clearTimeout(d),(_e=c)==null||_e.disconnect(),c=null}function b(_e,et){_e===void 0&&(_e=!1),et===void 0&&(et=1),g();const rt=a.getBoundingClientRect(),{left:st,top:$,width:_,height:nt}=rt;if(_e||e(),!_||!nt)return;const it=floor($),ot=floor(h.clientWidth-(st+_)),lt=floor(h.clientHeight-($+nt)),at=floor(st),dt={rootMargin:-it+"px "+-ot+"px "+-lt+"px "+-at+"px",threshold:max(0,min(1,et))||1};let ht=!0;function pt(ft){const mt=ft[0].intersectionRatio;if(mt!==et){if(!ht)return b();mt?b(!1,mt):d=setTimeout(()=>{b(!1,1e-7)},1e3)}mt===1&&!rectsAreEqual(rt,a.getBoundingClientRect())&&b(),ht=!1}try{c=new IntersectionObserver(pt,{...dt,root:h.ownerDocument})}catch{c=new IntersectionObserver(pt,dt)}c.observe(a)}return b(!0),g}function autoUpdate(a,e,c,d){d===void 0&&(d={});const{ancestorScroll:h=!0,ancestorResize:g=!0,elementResize:b=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:et=!1}=d,rt=unwrapElement(a),st=h||g?[...rt?getOverflowAncestors(rt):[],...getOverflowAncestors(e)]:[];st.forEach(at=>{h&&at.addEventListener("scroll",c,{passive:!0}),g&&at.addEventListener("resize",c)});const $=rt&&_e?observeMove(rt,c):null;let _=-1,nt=null;b&&(nt=new ResizeObserver(at=>{let[ct]=at;ct&&ct.target===rt&&nt&&(nt.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var dt;(dt=nt)==null||dt.observe(e)})),c()}),rt&&!et&&nt.observe(rt),nt.observe(e));let it,ot=et?getBoundingClientRect(a):null;et&&lt();function lt(){const at=getBoundingClientRect(a);ot&&!rectsAreEqual(ot,at)&&c(),ot=at,it=requestAnimationFrame(lt)}return c(),()=>{var at;st.forEach(ct=>{h&&ct.removeEventListener("scroll",c),g&&ct.removeEventListener("resize",c)}),$==null||$(),(at=nt)==null||at.disconnect(),nt=null,et&&cancelAnimationFrame(it)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(a,e,c)=>{const d=new Map,h={platform,...c},g={...h.platform,_c:d};return computePosition$1(a,e,{...h,platform:g})};var isClient=typeof document<"u",noop$1=function(){},index$1=isClient?reactExports.useLayoutEffect:noop$1;function deepEqual$1(a,e){if(a===e)return!0;if(typeof a!=typeof e)return!1;if(typeof a=="function"&&a.toString()===e.toString())return!0;let c,d,h;if(a&&e&&typeof a=="object"){if(Array.isArray(a)){if(c=a.length,c!==e.length)return!1;for(d=c;d--!==0;)if(!deepEqual$1(a[d],e[d]))return!1;return!0}if(h=Object.keys(a),c=h.length,c!==Object.keys(e).length)return!1;for(d=c;d--!==0;)if(!{}.hasOwnProperty.call(e,h[d]))return!1;for(d=c;d--!==0;){const g=h[d];if(!(g==="_owner"&&a.$$typeof)&&!deepEqual$1(a[g],e[g]))return!1}return!0}return a!==a&&e!==e}function getDPR(a){return typeof window>"u"?1:(a.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(a,e){const c=getDPR(a);return Math.round(e*c)/c}function useLatestRef(a){const e=reactExports.useRef(a);return index$1(()=>{e.current=a}),e}function useFloating(a){a===void 0&&(a={});const{placement:e="bottom",strategy:c="absolute",middleware:d=[],platform:h,elements:{reference:g,floating:b}={},transform:_e=!0,whileElementsMounted:et,open:rt}=a,[st,$]=reactExports.useState({x:0,y:0,strategy:c,placement:e,middlewareData:{},isPositioned:!1}),[_,nt]=reactExports.useState(d);deepEqual$1(_,d)||nt(d);const[it,ot]=reactExports.useState(null),[lt,at]=reactExports.useState(null),ct=reactExports.useCallback(Vt=>{Vt!==ft.current&&(ft.current=Vt,ot(Vt))},[]),dt=reactExports.useCallback(Vt=>{Vt!==mt.current&&(mt.current=Vt,at(Vt))},[]),ht=g||it,pt=b||lt,ft=reactExports.useRef(null),mt=reactExports.useRef(null),xt=reactExports.useRef(st),gt=et!=null,Et=useLatestRef(et),St=useLatestRef(h),Pt=useLatestRef(rt),Mt=reactExports.useCallback(()=>{if(!ft.current||!mt.current)return;const Vt={placement:e,strategy:c,middleware:_};St.current&&(Vt.platform=St.current),computePosition(ft.current,mt.current,Vt).then(Bt=>{const Ct={...Bt,isPositioned:Pt.current!==!1};Rt.current&&!deepEqual$1(xt.current,Ct)&&(xt.current=Ct,reactDomExports.flushSync(()=>{$(Ct)}))})},[_,e,c,St,Pt]);index$1(()=>{rt===!1&&xt.current.isPositioned&&(xt.current.isPositioned=!1,$(Vt=>({...Vt,isPositioned:!1})))},[rt]);const Rt=reactExports.useRef(!1);index$1(()=>(Rt.current=!0,()=>{Rt.current=!1}),[]),index$1(()=>{if(ht&&(ft.current=ht),pt&&(mt.current=pt),ht&&pt){if(Et.current)return Et.current(ht,pt,Mt);Mt()}},[ht,pt,Mt,Et,gt]);const Dt=reactExports.useMemo(()=>({reference:ft,floating:mt,setReference:ct,setFloating:dt}),[ct,dt]),Tt=reactExports.useMemo(()=>({reference:ht,floating:pt}),[ht,pt]),It=reactExports.useMemo(()=>{const Vt={position:c,left:0,top:0};if(!Tt.floating)return Vt;const Bt=roundByDPR(Tt.floating,st.x),Ct=roundByDPR(Tt.floating,st.y);return _e?{...Vt,transform:"translate("+Bt+"px, "+Ct+"px)",...getDPR(Tt.floating)>=1.5&&{willChange:"transform"}}:{position:c,left:Bt,top:Ct}},[c,_e,Tt.floating,st.x,st.y]);return reactExports.useMemo(()=>({...st,update:Mt,refs:Dt,elements:Tt,floatingStyles:It}),[st,Mt,Dt,Tt,It])}const arrow$1=a=>{function e(c){return{}.hasOwnProperty.call(c,"current")}return{name:"arrow",options:a,fn(c){const{element:d,padding:h}=typeof a=="function"?a(c):a;return d&&e(d)?d.current!=null?arrow$2({element:d.current,padding:h}).fn(c):{}:d?arrow$2({element:d,padding:h}).fn(c):{}}}},offset=(a,e)=>({...offset$1(a),options:[a,e]}),shift=(a,e)=>({...shift$1(a),options:[a,e]}),limitShift=(a,e)=>({...limitShift$1(a),options:[a,e]}),flip=(a,e)=>({...flip$1(a),options:[a,e]}),size=(a,e)=>({...size$1(a),options:[a,e]}),hide=(a,e)=>({...hide$1(a),options:[a,e]}),arrow=(a,e)=>({...arrow$1(a),options:[a,e]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((a,e)=>{const{children:c,width:d=10,height:h=5,...g}=a;return jsxRuntimeExports.jsx(Primitive.svg,{...g,ref:e,width:d,height:h,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$6=Arrow$1;function useSize(a){const[e,c]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});const d=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const g=h[0];let b,_e;if("borderBoxSize"in g){const et=g.borderBoxSize,rt=Array.isArray(et)?et[0]:et;b=rt.inlineSize,_e=rt.blockSize}else b=a.offsetWidth,_e=a.offsetHeight;c({width:b,height:_e})});return d.observe(a,{box:"border-box"}),()=>d.unobserve(a)}else c(void 0)},[a]),e}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=a=>{const{__scopePopper:e,children:c}=a,[d,h]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:e,anchor:d,onAnchorChange:h,children:c})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((a,e)=>{const{__scopePopper:c,virtualRef:d,...h}=a,g=usePopperContext(ANCHOR_NAME$1,c),b=reactExports.useRef(null),_e=useComposedRefs(e,b);return reactExports.useEffect(()=>{g.onAnchorChange((d==null?void 0:d.current)||b.current)}),d?null:jsxRuntimeExports.jsx(Primitive.div,{...h,ref:_e})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$7="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$7),PopperContent=reactExports.forwardRef((a,e)=>{var Gt,hn,fn,gn,kn,On;const{__scopePopper:c,side:d="bottom",sideOffset:h=0,align:g="center",alignOffset:b=0,arrowPadding:_e=0,avoidCollisions:et=!0,collisionBoundary:rt=[],collisionPadding:st=0,sticky:$="partial",hideWhenDetached:_=!1,updatePositionStrategy:nt="optimized",onPlaced:it,...ot}=a,lt=usePopperContext(CONTENT_NAME$7,c),[at,ct]=reactExports.useState(null),dt=useComposedRefs(e,un=>ct(un)),[ht,pt]=reactExports.useState(null),ft=useSize(ht),mt=(ft==null?void 0:ft.width)??0,xt=(ft==null?void 0:ft.height)??0,gt=d+(g!=="center"?"-"+g:""),Et=typeof st=="number"?st:{top:0,right:0,bottom:0,left:0,...st},St=Array.isArray(rt)?rt:[rt],Pt=St.length>0,Mt={padding:Et,boundary:St.filter(isNotNull),altBoundary:Pt},{refs:Rt,floatingStyles:Dt,placement:Tt,isPositioned:It,middlewareData:Vt}=useFloating({strategy:"fixed",placement:gt,whileElementsMounted:(...un)=>autoUpdate(...un,{animationFrame:nt==="always"}),elements:{reference:lt.anchor},middleware:[offset({mainAxis:h+xt,alignmentAxis:b}),et&&shift({mainAxis:!0,crossAxis:!1,limiter:$==="partial"?limitShift():void 0,...Mt}),et&&flip({...Mt}),size({...Mt,apply:({elements:un,rects:Sn,availableWidth:Ln,availableHeight:$n})=>{const{width:Wn,height:Pn}=Sn.reference,or=un.floating.style;or.setProperty("--radix-popper-available-width",`${Ln}px`),or.setProperty("--radix-popper-available-height",`${$n}px`),or.setProperty("--radix-popper-anchor-width",`${Wn}px`),or.setProperty("--radix-popper-anchor-height",`${Pn}px`)}}),ht&&arrow({element:ht,padding:_e}),transformOrigin({arrowWidth:mt,arrowHeight:xt}),_&&hide({strategy:"referenceHidden",...Mt})]}),[Bt,Ct]=getSideAndAlignFromPlacement(Tt),en=useCallbackRef$1(it);useLayoutEffect2(()=>{It&&(en==null||en())},[It,en]);const sn=(Gt=Vt.arrow)==null?void 0:Gt.x,kt=(hn=Vt.arrow)==null?void 0:hn.y,Ut=((fn=Vt.arrow)==null?void 0:fn.centerOffset)!==0,[Jt,tn]=reactExports.useState();return useLayoutEffect2(()=>{at&&tn(window.getComputedStyle(at).zIndex)},[at]),jsxRuntimeExports.jsx("div",{ref:Rt.setFloating,"data-radix-popper-content-wrapper":"",style:{...Dt,transform:It?Dt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Jt,"--radix-popper-transform-origin":[(gn=Vt.transformOrigin)==null?void 0:gn.x,(kn=Vt.transformOrigin)==null?void 0:kn.y].join(" "),...((On=Vt.hide)==null?void 0:On.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:c,placedSide:Bt,onArrowChange:pt,arrowX:sn,arrowY:kt,shouldHideArrow:Ut,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Bt,"data-align":Ct,...ot,ref:dt,style:{...ot.style,animation:It?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$7;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(e,c){const{__scopePopper:d,...h}=e,g=useContentContext(ARROW_NAME$4,d),b=OPPOSITE_SIDE[g.placedSide];return jsxRuntimeExports.jsx("span",{ref:g.onArrowChange,style:{position:"absolute",left:g.arrowX,top:g.arrowY,[b]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[g.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[g.placedSide],visibility:g.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$6,{...h,ref:c,style:{...h.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(a){return a!==null}var transformOrigin=a=>({name:"transformOrigin",options:a,fn(e){var lt,at,ct;const{placement:c,rects:d,middlewareData:h}=e,b=((lt=h.arrow)==null?void 0:lt.centerOffset)!==0,_e=b?0:a.arrowWidth,et=b?0:a.arrowHeight,[rt,st]=getSideAndAlignFromPlacement(c),$={start:"0%",center:"50%",end:"100%"}[st],_=(((at=h.arrow)==null?void 0:at.x)??0)+_e/2,nt=(((ct=h.arrow)==null?void 0:ct.y)??0)+et/2;let it="",ot="";return rt==="bottom"?(it=b?$:`${_}px`,ot=`${-et}px`):rt==="top"?(it=b?$:`${_}px`,ot=`${d.floating.height+et}px`):rt==="right"?(it=`${-et}px`,ot=b?$:`${nt}px`):rt==="left"&&(it=`${d.floating.width+et}px`,ot=b?$:`${nt}px`),{data:{x:it,y:ot}}}});function getSideAndAlignFromPlacement(a){const[e,c="center"]=a.split("-");return[e,c]}var Root2$5=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope$2=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=a=>{const{__scopeTooltip:e,delayDuration:c=DEFAULT_DELAY_DURATION,skipDelayDuration:d=300,disableHoverableContent:h=!1,children:g}=a,b=reactExports.useRef(!0),_e=reactExports.useRef(!1),et=reactExports.useRef(0);return reactExports.useEffect(()=>{const rt=et.current;return()=>window.clearTimeout(rt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:e,isOpenDelayedRef:b,delayDuration:c,onOpen:reactExports.useCallback(()=>{window.clearTimeout(et.current),b.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(et.current),et.current=window.setTimeout(()=>b.current=!0,d)},[d]),isPointerInTransitRef:_e,onPointerInTransitChange:reactExports.useCallback(rt=>{_e.current=rt},[]),disableHoverableContent:h,children:g})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=a=>{const{__scopeTooltip:e,children:c,open:d,defaultOpen:h,onOpenChange:g,disableHoverableContent:b,delayDuration:_e}=a,et=useTooltipProviderContext(TOOLTIP_NAME,a.__scopeTooltip),rt=usePopperScope$2(e),[st,$]=reactExports.useState(null),_=useId$1(),nt=reactExports.useRef(0),it=b??et.disableHoverableContent,ot=_e??et.delayDuration,lt=reactExports.useRef(!1),[at,ct]=useControllableState({prop:d,defaultProp:h??!1,onChange:mt=>{mt?(et.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):et.onClose(),g==null||g(mt)},caller:TOOLTIP_NAME}),dt=reactExports.useMemo(()=>at?lt.current?"delayed-open":"instant-open":"closed",[at]),ht=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=0,lt.current=!1,ct(!0)},[ct]),pt=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=0,ct(!1)},[ct]),ft=reactExports.useCallback(()=>{window.clearTimeout(nt.current),nt.current=window.setTimeout(()=>{lt.current=!0,ct(!0),nt.current=0},ot)},[ot,ct]);return reactExports.useEffect(()=>()=>{nt.current&&(window.clearTimeout(nt.current),nt.current=0)},[]),jsxRuntimeExports.jsx(Root2$5,{...rt,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:e,contentId:_,open:at,stateAttribute:dt,trigger:st,onTriggerChange:$,onTriggerEnter:reactExports.useCallback(()=>{et.isOpenDelayedRef.current?ft():ht()},[et.isOpenDelayedRef,ft,ht]),onTriggerLeave:reactExports.useCallback(()=>{it?pt():(window.clearTimeout(nt.current),nt.current=0)},[pt,it]),onOpen:ht,onClose:pt,disableHoverableContent:it,children:c})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME$6="TooltipTrigger",TooltipTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,...d}=a,h=useTooltipContext(TRIGGER_NAME$6,c),g=useTooltipProviderContext(TRIGGER_NAME$6,c),b=usePopperScope$2(c),_e=reactExports.useRef(null),et=useComposedRefs(e,_e,h.onTriggerChange),rt=reactExports.useRef(!1),st=reactExports.useRef(!1),$=reactExports.useCallback(()=>rt.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",$),[$]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...b,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":h.open?h.contentId:void 0,"data-state":h.stateAttribute,...d,ref:et,onPointerMove:composeEventHandlers(a.onPointerMove,_=>{_.pointerType!=="touch"&&!st.current&&!g.isPointerInTransitRef.current&&(h.onTriggerEnter(),st.current=!0)}),onPointerLeave:composeEventHandlers(a.onPointerLeave,()=>{h.onTriggerLeave(),st.current=!1}),onPointerDown:composeEventHandlers(a.onPointerDown,()=>{h.open&&h.onClose(),rt.current=!0,document.addEventListener("pointerup",$,{once:!0})}),onFocus:composeEventHandlers(a.onFocus,()=>{rt.current||h.onOpen()}),onBlur:composeEventHandlers(a.onBlur,h.onClose),onClick:composeEventHandlers(a.onClick,h.onClose)})})});TooltipTrigger$1.displayName=TRIGGER_NAME$6;var PORTAL_NAME$5="TooltipPortal",[PortalProvider$2,usePortalContext$2]=createTooltipContext(PORTAL_NAME$5,{forceMount:void 0}),CONTENT_NAME$6="TooltipContent",TooltipContent$1=reactExports.forwardRef((a,e)=>{const c=usePortalContext$2(CONTENT_NAME$6,a.__scopeTooltip),{forceMount:d=c.forceMount,side:h="top",...g}=a,b=useTooltipContext(CONTENT_NAME$6,a.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:d||b.open,children:b.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:h,...g,ref:e}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:h,...g,ref:e})})}),TooltipContentHoverable=reactExports.forwardRef((a,e)=>{const c=useTooltipContext(CONTENT_NAME$6,a.__scopeTooltip),d=useTooltipProviderContext(CONTENT_NAME$6,a.__scopeTooltip),h=reactExports.useRef(null),g=useComposedRefs(e,h),[b,_e]=reactExports.useState(null),{trigger:et,onClose:rt}=c,st=h.current,{onPointerInTransitChange:$}=d,_=reactExports.useCallback(()=>{_e(null),$(!1)},[$]),nt=reactExports.useCallback((it,ot)=>{const lt=it.currentTarget,at={x:it.clientX,y:it.clientY},ct=getExitSideFromRect(at,lt.getBoundingClientRect()),dt=getPaddedExitPoints(at,ct),ht=getPointsFromRect(ot.getBoundingClientRect()),pt=getHull([...dt,...ht]);_e(pt),$(!0)},[$]);return reactExports.useEffect(()=>()=>_(),[_]),reactExports.useEffect(()=>{if(et&&st){const it=lt=>nt(lt,st),ot=lt=>nt(lt,et);return et.addEventListener("pointerleave",it),st.addEventListener("pointerleave",ot),()=>{et.removeEventListener("pointerleave",it),st.removeEventListener("pointerleave",ot)}}},[et,st,nt,_]),reactExports.useEffect(()=>{if(b){const it=ot=>{const lt=ot.target,at={x:ot.clientX,y:ot.clientY},ct=(et==null?void 0:et.contains(lt))||(st==null?void 0:st.contains(lt)),dt=!isPointInPolygon$1(at,b);ct?_():dt&&(_(),rt())};return document.addEventListener("pointermove",it),()=>document.removeEventListener("pointermove",it)}},[et,st,b,rt,_]),jsxRuntimeExports.jsx(TooltipContentImpl,{...a,ref:g})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable$1=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,children:d,"aria-label":h,onEscapeKeyDown:g,onPointerDownOutside:b,..._e}=a,et=useTooltipContext(CONTENT_NAME$6,c),rt=usePopperScope$2(c),{onClose:st}=et;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,st),()=>document.removeEventListener(TOOLTIP_OPEN,st)),[st]),reactExports.useEffect(()=>{if(et.trigger){const $=_=>{const nt=_.target;nt!=null&&nt.contains(et.trigger)&&st()};return window.addEventListener("scroll",$,{capture:!0}),()=>window.removeEventListener("scroll",$,{capture:!0})}},[et.trigger,st]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:g,onPointerDownOutside:b,onFocusOutside:$=>$.preventDefault(),onDismiss:st,children:jsxRuntimeExports.jsxs(Content$2,{"data-state":et.stateAttribute,...rt,..._e,ref:e,style:{..._e.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable$1,{children:d}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:c,isInside:!0,children:jsxRuntimeExports.jsx(Root$7,{id:et.contentId,role:"tooltip",children:h||d})})]})})});TooltipContent$1.displayName=CONTENT_NAME$6;var ARROW_NAME$3="TooltipArrow",TooltipArrow=reactExports.forwardRef((a,e)=>{const{__scopeTooltip:c,...d}=a,h=usePopperScope$2(c);return useVisuallyHiddenContentContext(ARROW_NAME$3,c).isInside?null:jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e})});TooltipArrow.displayName=ARROW_NAME$3;function getExitSideFromRect(a,e){const c=Math.abs(e.top-a.y),d=Math.abs(e.bottom-a.y),h=Math.abs(e.right-a.x),g=Math.abs(e.left-a.x);switch(Math.min(c,d,h,g)){case g:return"left";case h:return"right";case c:return"top";case d:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(a,e,c=5){const d=[];switch(e){case"top":d.push({x:a.x-c,y:a.y+c},{x:a.x+c,y:a.y+c});break;case"bottom":d.push({x:a.x-c,y:a.y-c},{x:a.x+c,y:a.y-c});break;case"left":d.push({x:a.x+c,y:a.y-c},{x:a.x+c,y:a.y+c});break;case"right":d.push({x:a.x-c,y:a.y-c},{x:a.x-c,y:a.y+c});break}return d}function getPointsFromRect(a){const{top:e,right:c,bottom:d,left:h}=a;return[{x:h,y:e},{x:c,y:e},{x:c,y:d},{x:h,y:d}]}function isPointInPolygon$1(a,e){const{x:c,y:d}=a;let h=!1;for(let g=0,b=e.length-1;g<e.length;b=g++){const _e=e[g],et=e[b],rt=_e.x,st=_e.y,$=et.x,_=et.y;st>d!=_>d&&c<($-rt)*(d-st)/(_-st)+rt&&(h=!h)}return h}function getHull(a){const e=a.slice();return e.sort((c,d)=>c.x<d.x?-1:c.x>d.x?1:c.y<d.y?-1:c.y>d.y?1:0),getHullPresorted(e)}function getHullPresorted(a){if(a.length<=1)return a.slice();const e=[];for(let d=0;d<a.length;d++){const h=a[d];for(;e.length>=2;){const g=e[e.length-1],b=e[e.length-2];if((g.x-b.x)*(h.y-b.y)>=(g.y-b.y)*(h.x-b.x))e.pop();else break}e.push(h)}e.pop();const c=[];for(let d=a.length-1;d>=0;d--){const h=a[d];for(;c.length>=2;){const g=c[c.length-1],b=c[c.length-2];if((g.x-b.x)*(h.y-b.y)>=(g.y-b.y)*(h.x-b.x))c.pop();else break}c.push(h)}return c.pop(),e.length===1&&c.length===1&&e[0].x===c[0].x&&e[0].y===c[0].y?e:e.concat(c)}var Provider=TooltipProvider$1,Root3$1=Tooltip$1,Trigger$4=TooltipTrigger$1,Content2$4=TooltipContent$1;const TooltipProvider=Provider,Tooltip=Root3$1,TooltipTrigger=Trigger$4,TooltipContent=reactExports.forwardRef(({className:a,sideOffset:e=4,...c},d)=>jsxRuntimeExports.jsx(Content2$4,{ref:d,sideOffset:e,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c}));TooltipContent.displayName=Content2$4.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop(){}function functionalUpdate(a,e){return typeof a=="function"?a(e):a}function isValidTimeout(a){return typeof a=="number"&&a>=0&&a!==1/0}function timeUntilStale(a,e){return Math.max(a+(e||0)-Date.now(),0)}function resolveStaleTime(a,e){return typeof a=="function"?a(e):a}function resolveEnabled(a,e){return typeof a=="function"?a(e):a}function matchQuery(a,e){const{type:c="all",exact:d,fetchStatus:h,predicate:g,queryKey:b,stale:_e}=a;if(b){if(d){if(e.queryHash!==hashQueryKeyByOptions(b,e.options))return!1}else if(!partialMatchKey(e.queryKey,b))return!1}if(c!=="all"){const et=e.isActive();if(c==="active"&&!et||c==="inactive"&&et)return!1}return!(typeof _e=="boolean"&&e.isStale()!==_e||h&&h!==e.state.fetchStatus||g&&!g(e))}function matchMutation(a,e){const{exact:c,status:d,predicate:h,mutationKey:g}=a;if(g){if(!e.options.mutationKey)return!1;if(c){if(hashKey(e.options.mutationKey)!==hashKey(g))return!1}else if(!partialMatchKey(e.options.mutationKey,g))return!1}return!(d&&e.state.status!==d||h&&!h(e))}function hashQueryKeyByOptions(a,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(a)}function hashKey(a){return JSON.stringify(a,(e,c)=>isPlainObject$3(c)?Object.keys(c).sort().reduce((d,h)=>(d[h]=c[h],d),{}):c)}function partialMatchKey(a,e){return a===e?!0:typeof a!=typeof e?!1:a&&e&&typeof a=="object"&&typeof e=="object"?Object.keys(e).every(c=>partialMatchKey(a[c],e[c])):!1}function replaceEqualDeep(a,e){if(a===e)return a;const c=isPlainArray(a)&&isPlainArray(e);if(c||isPlainObject$3(a)&&isPlainObject$3(e)){const d=c?a:Object.keys(a),h=d.length,g=c?e:Object.keys(e),b=g.length,_e=c?[]:{},et=new Set(d);let rt=0;for(let st=0;st<b;st++){const $=c?st:g[st];(!c&&et.has($)||c)&&a[$]===void 0&&e[$]===void 0?(_e[$]=void 0,rt++):(_e[$]=replaceEqualDeep(a[$],e[$]),_e[$]===a[$]&&a[$]!==void 0&&rt++)}return h===b&&rt===h?a:_e}return e}function isPlainArray(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function isPlainObject$3(a){if(!hasObjectPrototype(a))return!1;const e=a.constructor;if(e===void 0)return!0;const c=e.prototype;return!(!hasObjectPrototype(c)||!c.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(a)!==Object.prototype)}function hasObjectPrototype(a){return Object.prototype.toString.call(a)==="[object Object]"}function sleep(a){return new Promise(e=>{setTimeout(e,a)})}function replaceData(a,e,c){return typeof c.structuralSharing=="function"?c.structuralSharing(a,e):c.structuralSharing!==!1?replaceEqualDeep(a,e):e}function addToEnd(a,e,c=0){const d=[...a,e];return c&&d.length>c?d.slice(1):d}function addToStart(a,e,c=0){const d=[e,...a];return c&&d.length>c?d.slice(0,-1):d}var skipToken=Symbol();function ensureQueryFn(a,e){return!a.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!a.queryFn||a.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${a.queryHash}'`)):a.queryFn}var Sp,_u,Hm,rw,FocusManager=(rw=class extends Subscribable{constructor(){super();Lt(this,Sp);Lt(this,_u);Lt(this,Hm);At(this,Hm,e=>{if(!isServer&&window.addEventListener){const c=()=>e();return window.addEventListener("visibilitychange",c,!1),()=>{window.removeEventListener("visibilitychange",c)}}})}onSubscribe(){ut(this,_u)||this.setEventListener(ut(this,Hm))}onUnsubscribe(){var e;this.hasListeners()||((e=ut(this,_u))==null||e.call(this),At(this,_u,void 0))}setEventListener(e){var c;At(this,Hm,e),(c=ut(this,_u))==null||c.call(this),At(this,_u,e(d=>{typeof d=="boolean"?this.setFocused(d):this.onFocus()}))}setFocused(e){ut(this,Sp)!==e&&(At(this,Sp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(c=>{c(e)})}isFocused(){var e;return typeof ut(this,Sp)=="boolean"?ut(this,Sp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Sp=new WeakMap,_u=new WeakMap,Hm=new WeakMap,rw),focusManager=new FocusManager,Gm,Ru,Wm,sw,OnlineManager=(sw=class extends Subscribable{constructor(){super();Lt(this,Gm,!0);Lt(this,Ru);Lt(this,Wm);At(this,Wm,e=>{if(!isServer&&window.addEventListener){const c=()=>e(!0),d=()=>e(!1);return window.addEventListener("online",c,!1),window.addEventListener("offline",d,!1),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",d)}}})}onSubscribe(){ut(this,Ru)||this.setEventListener(ut(this,Wm))}onUnsubscribe(){var e;this.hasListeners()||((e=ut(this,Ru))==null||e.call(this),At(this,Ru,void 0))}setEventListener(e){var c;At(this,Wm,e),(c=ut(this,Ru))==null||c.call(this),At(this,Ru,e(this.setOnline.bind(this)))}setOnline(e){ut(this,Gm)!==e&&(At(this,Gm,e),this.listeners.forEach(d=>{d(e)}))}isOnline(){return ut(this,Gm)}},Gm=new WeakMap,Ru=new WeakMap,Wm=new WeakMap,sw),onlineManager=new OnlineManager;function pendingThenable(){let a,e;const c=new Promise((h,g)=>{a=h,e=g});c.status="pending",c.catch(()=>{});function d(h){Object.assign(c,h),delete c.resolve,delete c.reject}return c.resolve=h=>{d({status:"fulfilled",value:h}),a(h)},c.reject=h=>{d({status:"rejected",reason:h}),e(h)},c}function defaultRetryDelay(a){return Math.min(1e3*2**a,3e4)}function canFetch(a){return(a??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(a){super("CancelledError"),this.revert=a==null?void 0:a.revert,this.silent=a==null?void 0:a.silent}};function isCancelledError(a){return a instanceof CancelledError}function createRetryer(a){let e=!1,c=0,d=!1,h;const g=pendingThenable(),b=ot=>{var lt;d||(_(new CancelledError(ot)),(lt=a.abort)==null||lt.call(a))},_e=()=>{e=!0},et=()=>{e=!1},rt=()=>focusManager.isFocused()&&(a.networkMode==="always"||onlineManager.isOnline())&&a.canRun(),st=()=>canFetch(a.networkMode)&&a.canRun(),$=ot=>{var lt;d||(d=!0,(lt=a.onSuccess)==null||lt.call(a,ot),h==null||h(),g.resolve(ot))},_=ot=>{var lt;d||(d=!0,(lt=a.onError)==null||lt.call(a,ot),h==null||h(),g.reject(ot))},nt=()=>new Promise(ot=>{var lt;h=at=>{(d||rt())&&ot(at)},(lt=a.onPause)==null||lt.call(a)}).then(()=>{var ot;h=void 0,d||(ot=a.onContinue)==null||ot.call(a)}),it=()=>{if(d)return;let ot;const lt=c===0?a.initialPromise:void 0;try{ot=lt??a.fn()}catch(at){ot=Promise.reject(at)}Promise.resolve(ot).then($).catch(at=>{var ft;if(d)return;const ct=a.retry??(isServer?0:3),dt=a.retryDelay??defaultRetryDelay,ht=typeof dt=="function"?dt(c,at):dt,pt=ct===!0||typeof ct=="number"&&c<ct||typeof ct=="function"&&ct(c,at);if(e||!pt){_(at);return}c++,(ft=a.onFail)==null||ft.call(a,c,at),sleep(ht).then(()=>rt()?void 0:nt()).then(()=>{e?_(at):it()})})};return{promise:g,cancel:b,continue:()=>(h==null||h(),g),cancelRetry:_e,continueRetry:et,canStart:st,start:()=>(st()?it():nt().then(it),g)}}var defaultScheduler=a=>setTimeout(a,0);function createNotifyManager(){let a=[],e=0,c=_e=>{_e()},d=_e=>{_e()},h=defaultScheduler;const g=_e=>{e?a.push(_e):h(()=>{c(_e)})},b=()=>{const _e=a;a=[],_e.length&&h(()=>{d(()=>{_e.forEach(et=>{c(et)})})})};return{batch:_e=>{let et;e++;try{et=_e()}finally{e--,e||b()}return et},batchCalls:_e=>(...et)=>{g(()=>{_e(...et)})},schedule:g,setNotifyFunction:_e=>{c=_e},setBatchNotifyFunction:_e=>{d=_e},setScheduler:_e=>{h=_e}}}var notifyManager=createNotifyManager(),Tp,iw,Removable=(iw=class{constructor(){Lt(this,Tp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&At(this,Tp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(isServer?1/0:5*60*1e3))}clearGcTimeout(){ut(this,Tp)&&(clearTimeout(ut(this,Tp)),At(this,Tp,void 0))}},Tp=new WeakMap,iw),qm,Ap,fo,_p,As,Sy,Rp,Po,Ll,ow,Query=(ow=class extends Removable{constructor(e){super();Lt(this,Po);Lt(this,qm);Lt(this,Ap);Lt(this,fo);Lt(this,_p);Lt(this,As);Lt(this,Sy);Lt(this,Rp);At(this,Rp,!1),At(this,Sy,e.defaultOptions),this.setOptions(e.options),this.observers=[],At(this,_p,e.client),At(this,fo,ut(this,_p).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,At(this,qm,getDefaultState$1(this.options)),this.state=e.state??ut(this,qm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ut(this,As))==null?void 0:e.promise}setOptions(e){this.options={...ut(this,Sy),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ut(this,fo).remove(this)}setData(e,c){const d=replaceData(this.state.data,e,this.options);return $t(this,Po,Ll).call(this,{data:d,type:"success",dataUpdatedAt:c==null?void 0:c.updatedAt,manual:c==null?void 0:c.manual}),d}setState(e,c){$t(this,Po,Ll).call(this,{type:"setState",state:e,setStateOptions:c})}cancel(e){var d,h;const c=(d=ut(this,As))==null?void 0:d.promise;return(h=ut(this,As))==null||h.cancel(e),c?c.then(noop).catch(noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ut(this,qm))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>resolveStaleTime(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var c;const e=this.observers.find(d=>d.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(c=ut(this,As))==null||c.continue()}onOnline(){var c;const e=this.observers.find(d=>d.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(c=ut(this,As))==null||c.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ut(this,fo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(c=>c!==e),this.observers.length||(ut(this,As)&&(ut(this,Rp)?ut(this,As).cancel({revert:!0}):ut(this,As).cancelRetry()),this.scheduleGc()),ut(this,fo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||$t(this,Po,Ll).call(this,{type:"invalidate"})}fetch(e,c){var rt,st,$;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(c!=null&&c.cancelRefetch))this.cancel({silent:!0});else if(ut(this,As))return ut(this,As).continueRetry(),ut(this,As).promise}if(e&&this.setOptions(e),!this.options.queryFn){const _=this.observers.find(nt=>nt.options.queryFn);_&&this.setOptions(_.options)}const d=new AbortController,h=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(At(this,Rp,!0),d.signal)})},g=()=>{const _=ensureQueryFn(this.options,c),it=(()=>{const ot={client:ut(this,_p),queryKey:this.queryKey,meta:this.meta};return h(ot),ot})();return At(this,Rp,!1),this.options.persister?this.options.persister(_,it,this):_(it)},_e=(()=>{const _={fetchOptions:c,options:this.options,queryKey:this.queryKey,client:ut(this,_p),state:this.state,fetchFn:g};return h(_),_})();(rt=this.options.behavior)==null||rt.onFetch(_e,this),At(this,Ap,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((st=_e.fetchOptions)==null?void 0:st.meta))&&$t(this,Po,Ll).call(this,{type:"fetch",meta:($=_e.fetchOptions)==null?void 0:$.meta});const et=_=>{var nt,it,ot,lt;isCancelledError(_)&&_.silent||$t(this,Po,Ll).call(this,{type:"error",error:_}),isCancelledError(_)||((it=(nt=ut(this,fo).config).onError)==null||it.call(nt,_,this),(lt=(ot=ut(this,fo).config).onSettled)==null||lt.call(ot,this.state.data,_,this)),this.scheduleGc()};return At(this,As,createRetryer({initialPromise:c==null?void 0:c.initialPromise,fn:_e.fetchFn,abort:d.abort.bind(d),onSuccess:_=>{var nt,it,ot,lt;if(_===void 0){et(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(_)}catch(at){et(at);return}(it=(nt=ut(this,fo).config).onSuccess)==null||it.call(nt,_,this),(lt=(ot=ut(this,fo).config).onSettled)==null||lt.call(ot,_,this.state.error,this),this.scheduleGc()},onError:et,onFail:(_,nt)=>{$t(this,Po,Ll).call(this,{type:"failed",failureCount:_,error:nt})},onPause:()=>{$t(this,Po,Ll).call(this,{type:"pause"})},onContinue:()=>{$t(this,Po,Ll).call(this,{type:"continue"})},retry:_e.options.retry,retryDelay:_e.options.retryDelay,networkMode:_e.options.networkMode,canRun:()=>!0})),ut(this,As).start()}},qm=new WeakMap,Ap=new WeakMap,fo=new WeakMap,_p=new WeakMap,As=new WeakMap,Sy=new WeakMap,Rp=new WeakMap,Po=new WeakSet,Ll=function(e){const c=d=>{switch(e.type){case"failed":return{...d,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...d,fetchStatus:"paused"};case"continue":return{...d,fetchStatus:"fetching"};case"fetch":return{...d,...fetchState(d.data,this.options),fetchMeta:e.meta??null};case"success":return At(this,Ap,void 0),{...d,data:e.data,dataUpdateCount:d.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const h=e.error;return isCancelledError(h)&&h.revert&&ut(this,Ap)?{...ut(this,Ap),fetchStatus:"idle"}:{...d,error:h,errorUpdateCount:d.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:d.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...d,isInvalidated:!0};case"setState":return{...d,...e.state}}};this.state=c(this.state),notifyManager.batch(()=>{this.observers.forEach(d=>{d.onQueryUpdate()}),ut(this,fo).notify({query:this,type:"updated",action:e})})},ow);function fetchState(a,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...a===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(a){const e=typeof a.initialData=="function"?a.initialData():a.initialData,c=e!==void 0,d=c?typeof a.initialDataUpdatedAt=="function"?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}var Zo,aw,QueryCache=(aw=class extends Subscribable{constructor(e={}){super();Lt(this,Zo);this.config=e,At(this,Zo,new Map)}build(e,c,d){const h=c.queryKey,g=c.queryHash??hashQueryKeyByOptions(h,c);let b=this.get(g);return b||(b=new Query({client:e,queryKey:h,queryHash:g,options:e.defaultQueryOptions(c),state:d,defaultOptions:e.getQueryDefaults(h)}),this.add(b)),b}add(e){ut(this,Zo).has(e.queryHash)||(ut(this,Zo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const c=ut(this,Zo).get(e.queryHash);c&&(e.destroy(),c===e&&ut(this,Zo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ut(this,Zo).get(e)}getAll(){return[...ut(this,Zo).values()]}find(e){const c={exact:!0,...e};return this.getAll().find(d=>matchQuery(c,d))}findAll(e={}){const c=this.getAll();return Object.keys(e).length>0?c.filter(d=>matchQuery(e,d)):c}notify(e){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zo=new WeakMap,aw),Qo,Is,Cp,Jo,Tu,lw,Mutation=(lw=class extends Removable{constructor(e){super();Lt(this,Jo);Lt(this,Qo);Lt(this,Is);Lt(this,Cp);this.mutationId=e.mutationId,At(this,Is,e.mutationCache),At(this,Qo,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ut(this,Qo).includes(e)||(ut(this,Qo).push(e),this.clearGcTimeout(),ut(this,Is).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){At(this,Qo,ut(this,Qo).filter(c=>c!==e)),this.scheduleGc(),ut(this,Is).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ut(this,Qo).length||(this.state.status==="pending"?this.scheduleGc():ut(this,Is).remove(this))}continue(){var e;return((e=ut(this,Cp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var g,b,_e,et,rt,st,$,_,nt,it,ot,lt,at,ct,dt,ht,pt,ft,mt,xt;const c=()=>{$t(this,Jo,Tu).call(this,{type:"continue"})};At(this,Cp,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(gt,Et)=>{$t(this,Jo,Tu).call(this,{type:"failed",failureCount:gt,error:Et})},onPause:()=>{$t(this,Jo,Tu).call(this,{type:"pause"})},onContinue:c,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ut(this,Is).canRun(this)}));const d=this.state.status==="pending",h=!ut(this,Cp).canStart();try{if(d)c();else{$t(this,Jo,Tu).call(this,{type:"pending",variables:e,isPaused:h}),await((b=(g=ut(this,Is).config).onMutate)==null?void 0:b.call(g,e,this));const Et=await((et=(_e=this.options).onMutate)==null?void 0:et.call(_e,e));Et!==this.state.context&&$t(this,Jo,Tu).call(this,{type:"pending",context:Et,variables:e,isPaused:h})}const gt=await ut(this,Cp).start();return await((st=(rt=ut(this,Is).config).onSuccess)==null?void 0:st.call(rt,gt,e,this.state.context,this)),await((_=($=this.options).onSuccess)==null?void 0:_.call($,gt,e,this.state.context)),await((it=(nt=ut(this,Is).config).onSettled)==null?void 0:it.call(nt,gt,null,this.state.variables,this.state.context,this)),await((lt=(ot=this.options).onSettled)==null?void 0:lt.call(ot,gt,null,e,this.state.context)),$t(this,Jo,Tu).call(this,{type:"success",data:gt}),gt}catch(gt){try{throw await((ct=(at=ut(this,Is).config).onError)==null?void 0:ct.call(at,gt,e,this.state.context,this)),await((ht=(dt=this.options).onError)==null?void 0:ht.call(dt,gt,e,this.state.context)),await((ft=(pt=ut(this,Is).config).onSettled)==null?void 0:ft.call(pt,void 0,gt,this.state.variables,this.state.context,this)),await((xt=(mt=this.options).onSettled)==null?void 0:xt.call(mt,void 0,gt,e,this.state.context)),gt}finally{$t(this,Jo,Tu).call(this,{type:"error",error:gt})}}finally{ut(this,Is).runNext(this)}}},Qo=new WeakMap,Is=new WeakMap,Cp=new WeakMap,Jo=new WeakSet,Tu=function(e){const c=d=>{switch(e.type){case"failed":return{...d,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...d,isPaused:!0};case"continue":return{...d,isPaused:!1};case"pending":return{...d,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...d,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...d,data:void 0,error:e.error,failureCount:d.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=c(this.state),notifyManager.batch(()=>{ut(this,Qo).forEach(d=>{d.onMutationUpdate(e)}),ut(this,Is).notify({mutation:this,type:"updated",action:e})})},lw);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var zl,No,Ty,cw,MutationCache=(cw=class extends Subscribable{constructor(e={}){super();Lt(this,zl);Lt(this,No);Lt(this,Ty);this.config=e,At(this,zl,new Set),At(this,No,new Map),At(this,Ty,0)}build(e,c,d){const h=new Mutation({mutationCache:this,mutationId:++as(this,Ty)._,options:e.defaultMutationOptions(c),state:d});return this.add(h),h}add(e){ut(this,zl).add(e);const c=scopeFor(e);if(typeof c=="string"){const d=ut(this,No).get(c);d?d.push(e):ut(this,No).set(c,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ut(this,zl).delete(e)){const c=scopeFor(e);if(typeof c=="string"){const d=ut(this,No).get(c);if(d)if(d.length>1){const h=d.indexOf(e);h!==-1&&d.splice(h,1)}else d[0]===e&&ut(this,No).delete(c)}}this.notify({type:"removed",mutation:e})}canRun(e){const c=scopeFor(e);if(typeof c=="string"){const d=ut(this,No).get(c),h=d==null?void 0:d.find(g=>g.state.status==="pending");return!h||h===e}else return!0}runNext(e){var d;const c=scopeFor(e);if(typeof c=="string"){const h=(d=ut(this,No).get(c))==null?void 0:d.find(g=>g!==e&&g.state.isPaused);return(h==null?void 0:h.continue())??Promise.resolve()}else return Promise.resolve()}clear(){notifyManager.batch(()=>{ut(this,zl).forEach(e=>{this.notify({type:"removed",mutation:e})}),ut(this,zl).clear(),ut(this,No).clear()})}getAll(){return Array.from(ut(this,zl))}find(e){const c={exact:!0,...e};return this.getAll().find(d=>matchMutation(c,d))}findAll(e={}){return this.getAll().filter(c=>matchMutation(e,c))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(c=>{c(e)})})}resumePausedMutations(){const e=this.getAll().filter(c=>c.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(c=>c.continue().catch(noop))))}},zl=new WeakMap,No=new WeakMap,Ty=new WeakMap,cw);function scopeFor(a){var e;return(e=a.options.scope)==null?void 0:e.id}function infiniteQueryBehavior(a){return{onFetch:(e,c)=>{var st,$,_,nt,it;const d=e.options,h=(_=($=(st=e.fetchOptions)==null?void 0:st.meta)==null?void 0:$.fetchMore)==null?void 0:_.direction,g=((nt=e.state.data)==null?void 0:nt.pages)||[],b=((it=e.state.data)==null?void 0:it.pageParams)||[];let _e={pages:[],pageParams:[]},et=0;const rt=async()=>{let ot=!1;const lt=dt=>{Object.defineProperty(dt,"signal",{enumerable:!0,get:()=>(e.signal.aborted?ot=!0:e.signal.addEventListener("abort",()=>{ot=!0}),e.signal)})},at=ensureQueryFn(e.options,e.fetchOptions),ct=async(dt,ht,pt)=>{if(ot)return Promise.reject();if(ht==null&&dt.pages.length)return Promise.resolve(dt);const mt=(()=>{const St={client:e.client,queryKey:e.queryKey,pageParam:ht,direction:pt?"backward":"forward",meta:e.options.meta};return lt(St),St})(),xt=await at(mt),{maxPages:gt}=e.options,Et=pt?addToStart:addToEnd;return{pages:Et(dt.pages,xt,gt),pageParams:Et(dt.pageParams,ht,gt)}};if(h&&g.length){const dt=h==="backward",ht=dt?getPreviousPageParam:getNextPageParam,pt={pages:g,pageParams:b},ft=ht(d,pt);_e=await ct(pt,ft,dt)}else{const dt=a??g.length;do{const ht=et===0?b[0]??d.initialPageParam:getNextPageParam(d,_e);if(et>0&&ht==null)break;_e=await ct(_e,ht),et++}while(et<dt)}return _e};e.options.persister?e.fetchFn=()=>{var ot,lt;return(lt=(ot=e.options).persister)==null?void 0:lt.call(ot,rt,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},c)}:e.fetchFn=rt}}}function getNextPageParam(a,{pages:e,pageParams:c}){const d=e.length-1;return e.length>0?a.getNextPageParam(e[d],e,c[d],c):void 0}function getPreviousPageParam(a,{pages:e,pageParams:c}){var d;return e.length>0?(d=a.getPreviousPageParam)==null?void 0:d.call(a,e[0],e,c[0],c):void 0}var Kr,Cu,ku,Km,Xm,ju,Ym,Zm,uw,QueryClient=(uw=class{constructor(a={}){Lt(this,Kr);Lt(this,Cu);Lt(this,ku);Lt(this,Km);Lt(this,Xm);Lt(this,ju);Lt(this,Ym);Lt(this,Zm);At(this,Kr,a.queryCache||new QueryCache),At(this,Cu,a.mutationCache||new MutationCache),At(this,ku,a.defaultOptions||{}),At(this,Km,new Map),At(this,Xm,new Map),At(this,ju,0)}mount(){as(this,ju)._++,ut(this,ju)===1&&(At(this,Ym,focusManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),ut(this,Kr).onFocus())})),At(this,Zm,onlineManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),ut(this,Kr).onOnline())})))}unmount(){var a,e;as(this,ju)._--,ut(this,ju)===0&&((a=ut(this,Ym))==null||a.call(this),At(this,Ym,void 0),(e=ut(this,Zm))==null||e.call(this),At(this,Zm,void 0))}isFetching(a){return ut(this,Kr).findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return ut(this,Cu).findAll({...a,status:"pending"}).length}getQueryData(a){var c;const e=this.defaultQueryOptions({queryKey:a});return(c=ut(this,Kr).get(e.queryHash))==null?void 0:c.state.data}ensureQueryData(a){const e=this.defaultQueryOptions(a),c=ut(this,Kr).build(this,e),d=c.state.data;return d===void 0?this.fetchQuery(a):(a.revalidateIfStale&&c.isStaleByTime(resolveStaleTime(e.staleTime,c))&&this.prefetchQuery(e),Promise.resolve(d))}getQueriesData(a){return ut(this,Kr).findAll(a).map(({queryKey:e,state:c})=>{const d=c.data;return[e,d]})}setQueryData(a,e,c){const d=this.defaultQueryOptions({queryKey:a}),h=ut(this,Kr).get(d.queryHash),g=h==null?void 0:h.state.data,b=functionalUpdate(e,g);if(b!==void 0)return ut(this,Kr).build(this,d).setData(b,{...c,manual:!0})}setQueriesData(a,e,c){return notifyManager.batch(()=>ut(this,Kr).findAll(a).map(({queryKey:d})=>[d,this.setQueryData(d,e,c)]))}getQueryState(a){var c;const e=this.defaultQueryOptions({queryKey:a});return(c=ut(this,Kr).get(e.queryHash))==null?void 0:c.state}removeQueries(a){const e=ut(this,Kr);notifyManager.batch(()=>{e.findAll(a).forEach(c=>{e.remove(c)})})}resetQueries(a,e){const c=ut(this,Kr);return notifyManager.batch(()=>(c.findAll(a).forEach(d=>{d.reset()}),this.refetchQueries({type:"active",...a},e)))}cancelQueries(a,e={}){const c={revert:!0,...e},d=notifyManager.batch(()=>ut(this,Kr).findAll(a).map(h=>h.cancel(c)));return Promise.all(d).then(noop).catch(noop)}invalidateQueries(a,e={}){return notifyManager.batch(()=>(ut(this,Kr).findAll(a).forEach(c=>{c.invalidate()}),(a==null?void 0:a.refetchType)==="none"?Promise.resolve():this.refetchQueries({...a,type:(a==null?void 0:a.refetchType)??(a==null?void 0:a.type)??"active"},e)))}refetchQueries(a,e={}){const c={...e,cancelRefetch:e.cancelRefetch??!0},d=notifyManager.batch(()=>ut(this,Kr).findAll(a).filter(h=>!h.isDisabled()&&!h.isStatic()).map(h=>{let g=h.fetch(void 0,c);return c.throwOnError||(g=g.catch(noop)),h.state.fetchStatus==="paused"?Promise.resolve():g}));return Promise.all(d).then(noop)}fetchQuery(a){const e=this.defaultQueryOptions(a);e.retry===void 0&&(e.retry=!1);const c=ut(this,Kr).build(this,e);return c.isStaleByTime(resolveStaleTime(e.staleTime,c))?c.fetch(e):Promise.resolve(c.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(noop).catch(noop)}fetchInfiniteQuery(a){return a.behavior=infiniteQueryBehavior(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(noop).catch(noop)}ensureInfiniteQueryData(a){return a.behavior=infiniteQueryBehavior(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return onlineManager.isOnline()?ut(this,Cu).resumePausedMutations():Promise.resolve()}getQueryCache(){return ut(this,Kr)}getMutationCache(){return ut(this,Cu)}getDefaultOptions(){return ut(this,ku)}setDefaultOptions(a){At(this,ku,a)}setQueryDefaults(a,e){ut(this,Km).set(hashKey(a),{queryKey:a,defaultOptions:e})}getQueryDefaults(a){const e=[...ut(this,Km).values()],c={};return e.forEach(d=>{partialMatchKey(a,d.queryKey)&&Object.assign(c,d.defaultOptions)}),c}setMutationDefaults(a,e){ut(this,Xm).set(hashKey(a),{mutationKey:a,defaultOptions:e})}getMutationDefaults(a){const e=[...ut(this,Xm).values()],c={};return e.forEach(d=>{partialMatchKey(a,d.mutationKey)&&Object.assign(c,d.defaultOptions)}),c}defaultQueryOptions(a){if(a._defaulted)return a;const e={...ut(this,ku).queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(a){return a!=null&&a._defaulted?a:{...ut(this,ku).mutations,...(a==null?void 0:a.mutationKey)&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){ut(this,Kr).clear(),ut(this,Cu).clear()}},Kr=new WeakMap,Cu=new WeakMap,ku=new WeakMap,Km=new WeakMap,Xm=new WeakMap,ju=new WeakMap,Ym=new WeakMap,Zm=new WeakMap,uw),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:a,children:e})=>(reactExports.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:a,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends$1.apply(this,arguments)}var Action$1;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createBrowserHistory(a){a===void 0&&(a={});function e(d,h){let{pathname:g,search:b,hash:_e}=d.location;return createLocation("",{pathname:g,search:b,hash:_e},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function c(d,h){return typeof h=="string"?h:createPath(h)}return getUrlBasedHistory(e,c,null,a)}function invariant$1(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function warning$2(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(a,e){return{usr:a.state,key:a.key,idx:e}}function createLocation(a,e,c,d){return c===void 0&&(c=null),_extends$1({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:c,key:e&&e.key||d||createKey()})}function createPath(a){let{pathname:e="/",search:c="",hash:d=""}=a;return c&&c!=="?"&&(e+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(e+=d.charAt(0)==="#"?d:"#"+d),e}function parsePath(a){let e={};if(a){let c=a.indexOf("#");c>=0&&(e.hash=a.substr(c),a=a.substr(0,c));let d=a.indexOf("?");d>=0&&(e.search=a.substr(d),a=a.substr(0,d)),a&&(e.pathname=a)}return e}function getUrlBasedHistory(a,e,c,d){d===void 0&&(d={});let{window:h=document.defaultView,v5Compat:g=!1}=d,b=h.history,_e=Action$1.Pop,et=null,rt=st();rt==null&&(rt=0,b.replaceState(_extends$1({},b.state,{idx:rt}),""));function st(){return(b.state||{idx:null}).idx}function $(){_e=Action$1.Pop;let lt=st(),at=lt==null?null:lt-rt;rt=lt,et&&et({action:_e,location:ot.location,delta:at})}function _(lt,at){_e=Action$1.Push;let ct=createLocation(ot.location,lt,at);rt=st()+1;let dt=getHistoryState(ct,rt),ht=ot.createHref(ct);try{b.pushState(dt,"",ht)}catch(pt){if(pt instanceof DOMException&&pt.name==="DataCloneError")throw pt;h.location.assign(ht)}g&&et&&et({action:_e,location:ot.location,delta:1})}function nt(lt,at){_e=Action$1.Replace;let ct=createLocation(ot.location,lt,at);rt=st();let dt=getHistoryState(ct,rt),ht=ot.createHref(ct);b.replaceState(dt,"",ht),g&&et&&et({action:_e,location:ot.location,delta:0})}function it(lt){let at=h.location.origin!=="null"?h.location.origin:h.location.href,ct=typeof lt=="string"?lt:createPath(lt);return ct=ct.replace(/ $/,"%20"),invariant$1(at,"No window.location.(origin|href) available to create URL for href: "+ct),new URL(ct,at)}let ot={get action(){return _e},get location(){return a(h,b)},listen(lt){if(et)throw new Error("A history only accepts one active listener");return h.addEventListener(PopStateEventType,$),et=lt,()=>{h.removeEventListener(PopStateEventType,$),et=null}},createHref(lt){return e(h,lt)},createURL:it,encodeLocation(lt){let at=it(lt);return{pathname:at.pathname,search:at.search,hash:at.hash}},push:_,replace:nt,go(lt){return b.go(lt)}};return ot}var ResultType;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(ResultType||(ResultType={}));function matchRoutes(a,e,c){return c===void 0&&(c="/"),matchRoutesImpl(a,e,c)}function matchRoutesImpl(a,e,c,d){let h=typeof e=="string"?parsePath(e):e,g=stripBasename(h.pathname||"/",c);if(g==null)return null;let b=flattenRoutes(a);rankRouteBranches(b);let _e=null;for(let et=0;_e==null&&et<b.length;++et){let rt=decodePath(g);_e=matchRouteBranch(b[et],rt)}return _e}function flattenRoutes(a,e,c,d){e===void 0&&(e=[]),c===void 0&&(c=[]),d===void 0&&(d="");let h=(g,b,_e)=>{let et={relativePath:_e===void 0?g.path||"":_e,caseSensitive:g.caseSensitive===!0,childrenIndex:b,route:g};et.relativePath.startsWith("/")&&(invariant$1(et.relativePath.startsWith(d),'Absolute route path "'+et.relativePath+'" nested under path '+('"'+d+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),et.relativePath=et.relativePath.slice(d.length));let rt=joinPaths([d,et.relativePath]),st=c.concat(et);g.children&&g.children.length>0&&(invariant$1(g.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+rt+'".')),flattenRoutes(g.children,e,st,rt)),!(g.path==null&&!g.index)&&e.push({path:rt,score:computeScore(rt,g.index),routesMeta:st})};return a.forEach((g,b)=>{var _e;if(g.path===""||!((_e=g.path)!=null&&_e.includes("?")))h(g,b);else for(let et of explodeOptionalSegments(g.path))h(g,b,et)}),e}function explodeOptionalSegments(a){let e=a.split("/");if(e.length===0)return[];let[c,...d]=e,h=c.endsWith("?"),g=c.replace(/\?$/,"");if(d.length===0)return h?[g,""]:[g];let b=explodeOptionalSegments(d.join("/")),_e=[];return _e.push(...b.map(et=>et===""?g:[g,et].join("/"))),h&&_e.push(...b),_e.map(et=>a.startsWith("/")&&et===""?"/":et)}function rankRouteBranches(a){a.sort((e,c)=>e.score!==c.score?c.score-e.score:compareIndexes(e.routesMeta.map(d=>d.childrenIndex),c.routesMeta.map(d=>d.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=a=>a==="*";function computeScore(a,e){let c=a.split("/"),d=c.length;return c.some(isSplat)&&(d+=splatPenalty),e&&(d+=indexRouteValue),c.filter(h=>!isSplat(h)).reduce((h,g)=>h+(paramRe.test(g)?dynamicSegmentValue:g===""?emptySegmentValue:staticSegmentValue),d)}function compareIndexes(a,e){return a.length===e.length&&a.slice(0,-1).every((d,h)=>d===e[h])?a[a.length-1]-e[e.length-1]:0}function matchRouteBranch(a,e,c){let{routesMeta:d}=a,h={},g="/",b=[];for(let _e=0;_e<d.length;++_e){let et=d[_e],rt=_e===d.length-1,st=g==="/"?e:e.slice(g.length)||"/",$=matchPath({path:et.relativePath,caseSensitive:et.caseSensitive,end:rt},st),_=et.route;if(!$)return null;Object.assign(h,$.params),b.push({params:h,pathname:joinPaths([g,$.pathname]),pathnameBase:normalizePathname(joinPaths([g,$.pathnameBase])),route:_}),$.pathnameBase!=="/"&&(g=joinPaths([g,$.pathnameBase]))}return b}function matchPath(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[c,d]=compilePath(a.path,a.caseSensitive,a.end),h=e.match(c);if(!h)return null;let g=h[0],b=g.replace(/(.)\/+$/,"$1"),_e=h.slice(1);return{params:d.reduce((rt,st,$)=>{let{paramName:_,isOptional:nt}=st;if(_==="*"){let ot=_e[$]||"";b=g.slice(0,g.length-ot.length).replace(/(.)\/+$/,"$1")}const it=_e[$];return nt&&!it?rt[_]=void 0:rt[_]=(it||"").replace(/%2F/g,"/"),rt},{}),pathname:g,pathnameBase:b,pattern:a}}function compilePath(a,e,c){e===void 0&&(e=!1),c===void 0&&(c=!0),warning$2(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let d=[],h="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(b,_e,et)=>(d.push({paramName:_e,isOptional:et!=null}),et?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(d.push({paramName:"*"}),h+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?h+="\\/*$":a!==""&&a!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,e?void 0:"i"),d]}function decodePath(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$2(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),a}}function stripBasename(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let c=e.endsWith("/")?e.length-1:e.length,d=a.charAt(c);return d&&d!=="/"?null:a.slice(c)||"/"}function resolvePath(a,e){e===void 0&&(e="/");let{pathname:c,search:d="",hash:h=""}=typeof a=="string"?parsePath(a):a;return{pathname:c?c.startsWith("/")?c:resolvePathname(c,e):e,search:normalizeSearch(d),hash:normalizeHash(h)}}function resolvePathname(a,e){let c=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(h=>{h===".."?c.length>1&&c.pop():h!=="."&&c.push(h)}),c.length>1?c.join("/"):"/"}function getInvalidPathError(a,e,c,d){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(d)+"].  Please separate it out to the ")+("`to."+c+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(a){return a.filter((e,c)=>c===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(a,e){let c=getPathContributingMatches(a);return e?c.map((d,h)=>h===c.length-1?d.pathname:d.pathnameBase):c.map(d=>d.pathnameBase)}function resolveTo(a,e,c,d){d===void 0&&(d=!1);let h;typeof a=="string"?h=parsePath(a):(h=_extends$1({},a),invariant$1(!h.pathname||!h.pathname.includes("?"),getInvalidPathError("?","pathname","search",h)),invariant$1(!h.pathname||!h.pathname.includes("#"),getInvalidPathError("#","pathname","hash",h)),invariant$1(!h.search||!h.search.includes("#"),getInvalidPathError("#","search","hash",h)));let g=a===""||h.pathname==="",b=g?"/":h.pathname,_e;if(b==null)_e=c;else{let $=e.length-1;if(!d&&b.startsWith("..")){let _=b.split("/");for(;_[0]==="..";)_.shift(),$-=1;h.pathname=_.join("/")}_e=$>=0?e[$]:"/"}let et=resolvePath(h,_e),rt=b&&b!=="/"&&b.endsWith("/"),st=(g||b===".")&&c.endsWith("/");return!et.pathname.endsWith("/")&&(rt||st)&&(et.pathname+="/"),et}const joinPaths=a=>a.join("/").replace(/\/\/+/g,"/"),normalizePathname=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,normalizeHash=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function isRouteErrorResponse(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var c=arguments[e];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},_extends.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$3(a){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(a)}function useNavigate(){let{isDataRoute:a}=reactExports.useContext(RouteContext);return a?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let a=reactExports.useContext(DataRouterContext),{basename:e,future:c,navigator:d}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),{pathname:g}=useLocation(),b=JSON.stringify(getResolveToMatches(h,c.v7_relativeSplatPath)),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{_e.current=!0}),reactExports.useCallback(function(rt,st){if(st===void 0&&(st={}),!_e.current)return;if(typeof rt=="number"){d.go(rt);return}let $=resolveTo(rt,JSON.parse(b),g,st.relative==="path");a==null&&e!=="/"&&($.pathname=$.pathname==="/"?e:joinPaths([e,$.pathname])),(st.replace?d.replace:d.push)($,st.state,st)},[e,d,b,g,a])}function useParams(){let{matches:a}=reactExports.useContext(RouteContext),e=a[a.length-1];return e?e.params:{}}function useRoutes(a,e){return useRoutesImpl(a,e)}function useRoutesImpl(a,e,c,d){useInRouterContext()||invariant$1(!1);let{navigator:h}=reactExports.useContext(NavigationContext),{matches:g}=reactExports.useContext(RouteContext),b=g[g.length-1],_e=b?b.params:{};b&&b.pathname;let et=b?b.pathnameBase:"/";b&&b.route;let rt=useLocation(),st;if(e){var $;let lt=typeof e=="string"?parsePath(e):e;et==="/"||($=lt.pathname)!=null&&$.startsWith(et)||invariant$1(!1),st=lt}else st=rt;let _=st.pathname||"/",nt=_;if(et!=="/"){let lt=et.replace(/^\//,"").split("/");nt="/"+_.replace(/^\//,"").split("/").slice(lt.length).join("/")}let it=matchRoutes(a,{pathname:nt}),ot=_renderMatches(it&&it.map(lt=>Object.assign({},lt,{params:Object.assign({},_e,lt.params),pathname:joinPaths([et,h.encodeLocation?h.encodeLocation(lt.pathname).pathname:lt.pathname]),pathnameBase:lt.pathnameBase==="/"?et:joinPaths([et,h.encodeLocation?h.encodeLocation(lt.pathnameBase).pathname:lt.pathnameBase])})),g,c,d);return e&&ot?reactExports.createElement(LocationContext.Provider,{value:{location:_extends({pathname:"/",search:"",hash:"",state:null,key:"default"},st),navigationType:Action$1.Pop}},ot):ot}function DefaultErrorComponent(){let a=useRouteError(),e=isRouteErrorResponse(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),c=a instanceof Error?a.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),c?reactExports.createElement("pre",{style:h},c):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,c){return c.location!==e.location||c.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:c.error,location:c.location,revalidation:e.revalidation||c.revalidation}}componentDidCatch(e,c){console.error("React Router caught the following error during render",e,c)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(a){let{routeContext:e,match:c,children:d}=a,h=reactExports.useContext(DataRouterContext);return h&&h.static&&h.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=c.route.id),reactExports.createElement(RouteContext.Provider,{value:e},d)}function _renderMatches(a,e,c,d){var h;if(e===void 0&&(e=[]),c===void 0&&(c=null),d===void 0&&(d=null),a==null){var g;if(!c)return null;if(c.errors)a=c.matches;else if((g=d)!=null&&g.v7_partialHydration&&e.length===0&&!c.initialized&&c.matches.length>0)a=c.matches;else return null}let b=a,_e=(h=c)==null?void 0:h.errors;if(_e!=null){let st=b.findIndex($=>$.route.id&&(_e==null?void 0:_e[$.route.id])!==void 0);st>=0||invariant$1(!1),b=b.slice(0,Math.min(b.length,st+1))}let et=!1,rt=-1;if(c&&d&&d.v7_partialHydration)for(let st=0;st<b.length;st++){let $=b[st];if(($.route.HydrateFallback||$.route.hydrateFallbackElement)&&(rt=st),$.route.id){let{loaderData:_,errors:nt}=c,it=$.route.loader&&_[$.route.id]===void 0&&(!nt||nt[$.route.id]===void 0);if($.route.lazy||it){et=!0,rt>=0?b=b.slice(0,rt+1):b=[b[0]];break}}}return b.reduceRight((st,$,_)=>{let nt,it=!1,ot=null,lt=null;c&&(nt=_e&&$.route.id?_e[$.route.id]:void 0,ot=$.route.errorElement||defaultErrorElement,et&&(rt<0&&_===0?(warningOnce("route-fallback"),it=!0,lt=null):rt===_&&(it=!0,lt=$.route.hydrateFallbackElement||null)));let at=e.concat(b.slice(0,_+1)),ct=()=>{let dt;return nt?dt=ot:it?dt=lt:$.route.Component?dt=reactExports.createElement($.route.Component,null):$.route.element?dt=$.route.element:dt=st,reactExports.createElement(RenderedRoute,{match:$,routeContext:{outlet:st,matches:at,isDataRoute:c!=null},children:dt})};return c&&($.route.ErrorBoundary||$.route.errorElement||_===0)?reactExports.createElement(RenderErrorBoundary,{location:c.location,revalidation:c.revalidation,component:ot,error:nt,children:ct(),routeContext:{outlet:null,matches:at,isDataRoute:!0}}):ct()},null)}var DataRouterHook$1=function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a}(DataRouterHook$1||{}),DataRouterStateHook$1=function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a}(DataRouterStateHook$1||{});function useDataRouterContext(a){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(a){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(a){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(a){let e=useRouteContext(),c=e.matches[e.matches.length-1];return c.route.id||invariant$1(!1),c.route.id}function useRouteError(){var a;let e=reactExports.useContext(RouteErrorContext),c=useDataRouterState(),d=useCurrentRouteId();return e!==void 0?e:(a=c.errors)==null?void 0:a[d]}function useNavigateStable(){let{router:a}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{c.current=!0}),reactExports.useCallback(function(h,g){g===void 0&&(g={}),c.current&&(typeof h=="number"?a.navigate(h):a.navigate(h,_extends({fromRouteId:e},g)))},[a,e])}const alreadyWarned$1={};function warningOnce(a,e,c){alreadyWarned$1[a]||(alreadyWarned$1[a]=!0)}function logV6DeprecationWarnings(a,e){a==null||a.v7_startTransition,a==null||a.v7_relativeSplatPath}function Navigate(a){let{to:e,replace:c,state:d,relative:h}=a;useInRouterContext()||invariant$1(!1);let{future:g,static:b}=reactExports.useContext(NavigationContext),{matches:_e}=reactExports.useContext(RouteContext),{pathname:et}=useLocation(),rt=useNavigate(),st=resolveTo(e,getResolveToMatches(_e,g.v7_relativeSplatPath),et,h==="path"),$=JSON.stringify(st);return reactExports.useEffect(()=>rt(JSON.parse($),{replace:c,state:d,relative:h}),[rt,$,h,c,d]),null}function Route(a){invariant$1(!1)}function Router(a){let{basename:e="/",children:c=null,location:d,navigationType:h=Action$1.Pop,navigator:g,static:b=!1,future:_e}=a;useInRouterContext()&&invariant$1(!1);let et=e.replace(/^\/*/,"/"),rt=reactExports.useMemo(()=>({basename:et,navigator:g,static:b,future:_extends({v7_relativeSplatPath:!1},_e)}),[et,_e,g,b]);typeof d=="string"&&(d=parsePath(d));let{pathname:st="/",search:$="",hash:_="",state:nt=null,key:it="default"}=d,ot=reactExports.useMemo(()=>{let lt=stripBasename(st,et);return lt==null?null:{location:{pathname:lt,search:$,hash:_,state:nt,key:it},navigationType:h}},[et,st,$,_,nt,it,h]);return ot==null?null:reactExports.createElement(NavigationContext.Provider,{value:rt},reactExports.createElement(LocationContext.Provider,{children:c,value:ot}))}function Routes(a){let{children:e,location:c}=a;return useRoutes(createRoutesFromChildren(e),c)}new Promise(()=>{});function createRoutesFromChildren(a,e){e===void 0&&(e=[]);let c=[];return reactExports.Children.forEach(a,(d,h)=>{if(!reactExports.isValidElement(d))return;let g=[...e,h];if(d.type===reactExports.Fragment){c.push.apply(c,createRoutesFromChildren(d.props.children,g));return}d.type!==Route&&invariant$1(!1),!d.props.index||!d.props.children||invariant$1(!1);let b={id:d.props.id||g.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,loader:d.props.loader,action:d.props.action,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(b.children=createRoutesFromChildren(d.props.children,g)),c.push(b)}),c}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createSearchParams(a){return a===void 0&&(a=""),new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((e,c)=>{let d=a[c];return e.concat(Array.isArray(d)?d.map(h=>[c,h]):[[c,d]])},[]))}function getSearchParamsForLocation(a,e){let c=createSearchParams(a);return e&&e.forEach((d,h)=>{c.has(h)||e.getAll(h).forEach(g=>{c.append(h,g)})}),c}const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(a){let{basename:e,children:c,future:d,window:h}=a,g=reactExports.useRef();g.current==null&&(g.current=createBrowserHistory({window:h,v5Compat:!0}));let b=g.current,[_e,et]=reactExports.useState({action:b.action,location:b.location}),{v7_startTransition:rt}=d||{},st=reactExports.useCallback($=>{rt&&startTransitionImpl?startTransitionImpl(()=>et($)):et($)},[et,rt]);return reactExports.useLayoutEffect(()=>b.listen(st),[b,st]),reactExports.useEffect(()=>logV6DeprecationWarnings(d),[d]),reactExports.createElement(Router,{basename:e,children:c,location:_e.location,navigationType:_e.action,navigator:b,future:d})}var DataRouterHook;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useSearchParams(a){let e=reactExports.useRef(createSearchParams(a)),c=reactExports.useRef(!1),d=useLocation(),h=reactExports.useMemo(()=>getSearchParamsForLocation(d.search,c.current?null:e.current),[d.search]),g=useNavigate(),b=reactExports.useCallback((_e,et)=>{const rt=createSearchParams(typeof _e=="function"?_e(h):_e);c.current=!0,g("?"+rt,et)},[g,h]);return[h,b]}const getApiBaseUrl=()=>{const a="http://localhost:5002";return a.startsWith("http://")||a.startsWith("https://")?a:`https://${a}`},API_BASE_URL=getApiBaseUrl();console.log("🔧 API Configuration:");console.log("  - VITE_API_URL:","http://localhost:5002");console.log("  - API_BASE_URL:",API_BASE_URL);const buildApiUrl=a=>`${API_BASE_URL}/api${a.startsWith("/")?a:`/${a}`}`,API_ENDPOINTS={AUTH:{LOGIN:"/auth/login",REGISTER:"/auth/register",VERIFY:"/auth/verify"},WORKSPACES:{LIST:"/workspaces",CREATE:"/workspaces",UPDATE:a=>`/workspaces/${a}`,DELETE:a=>`/workspaces/${a}`,THEME:a=>`/workspaces/${a}/theme`,FILES:a=>`/workspaces/${a}/files`,TODOS:a=>`/workspaces/${a}/todos`,CATEGORIES:a=>`/workspaces/${a}/categories`},FILES:{UPLOAD:a=>`/files/upload/${a}`,WORKSPACE:a=>`/files/workspace/${a}`,DOWNLOAD:a=>`/files/${a}/download`,PREVIEW:a=>`/files/${a}/preview`,DELETE:a=>`/files/${a}`,CATEGORY:a=>`/files/${a}/category`},CHAT:{SESSIONS:"/chat-sessions/sessions",RECENT_SESSIONS:"/chat-sessions/recent-sessions",SESSION:a=>`/chat-sessions/sessions/${a}`,MESSAGES:a=>`/chat-sessions/sessions/${a}/messages`,STAR:a=>`/chat-sessions/sessions/${a}/star`,MODELS:"/chat/models"},RAG:{MESSAGE:"/rag/message"},GENERATE:{CONTENT:"/generate-new/content",FILE:a=>`/generate-new/file/${a}`},URLS:{PROCESS:a=>`/urls/process/${a}`},HANDWRITING:{UPLOAD:a=>`/handwriting/upload/${a}`,PREVIEW_PDF:"/handwriting/preview-pdf",SAVE_PDFS:"/handwriting/save-pdfs"},TRANSCRIBE:{TRANSCRIBE:"/transcribe",TRANSCRIPT:a=>`/transcript/${a}`},TTS:{TTS:"/tts"},FEEDBACK:{SUBMIT:"/feedback/submit"},TODOS:{LIST:a=>`/workspaces/${a}/todos`,CREATE:a=>`/workspaces/${a}/todos`,UPDATE:(a,e)=>`/workspaces/${a}/todos/${e}`,DELETE:(a,e)=>`/workspaces/${a}/todos/${e}`,TOGGLE:(a,e)=>`/workspaces/${a}/todos/${e}/toggle`}},AuthContext=reactExports.createContext(void 0),useAuth=()=>{const a=reactExports.useContext(AuthContext);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},AuthProvider=({children:a})=>{const[e,c]=reactExports.useState(null),[d,h]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{const st=localStorage.getItem("authToken");if(st){const $=await fetch(buildApiUrl(API_ENDPOINTS.AUTH.VERIFY),{headers:{Authorization:`Bearer ${st}`,"Content-Type":"application/json"}});if($.ok){const _=await $.json();c(_.user)}else localStorage.removeItem("authToken")}}catch(st){console.error("Auth check failed:",st),localStorage.removeItem("authToken")}finally{h(!1)}})()},[]);const et={user:e,isLoading:d,login:async(rt,st)=>{try{const $=await fetch(buildApiUrl(API_ENDPOINTS.AUTH.LOGIN),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:rt,password:st})}),_=await $.json();return $.ok&&_.success?(localStorage.setItem("authToken",_.token),c(_.user),{success:!0}):{success:!1,error:_.message||"Login failed"}}catch($){return console.error("Login error:",$),{success:!1,error:"Network error. Please try again."}}},logout:()=>{localStorage.removeItem("authToken"),c(null)},register:async(rt,st,$)=>{try{const _=await fetch(buildApiUrl(API_ENDPOINTS.AUTH.REGISTER),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:rt,password:st,name:$})}),nt=await _.json();return _.ok&&nt.success?(localStorage.setItem("authToken",nt.token),c(nt.user),{success:!0}):{success:!1,error:nt.message||"Registration failed"}}catch(_){return console.error("Registration error:",_),{success:!1,error:"Network error. Please try again."}}},isAuthenticated:!!e};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:et,children:a})},FileContext=reactExports.createContext(void 0),useFile=()=>{const a=reactExports.useContext(FileContext);if(a===void 0)throw new Error("useFile must be used within a FileProvider");return a},FileProvider=({children:a})=>{const[e,c]=reactExports.useState([]),[d,h]=reactExports.useState(!1),[g,b]=reactExports.useState(null),{user:_e}=useAuth(),it={files:e,isLoading:d,error:g,uploadFile:async(ot,lt,at)=>{if(!_e)return{success:!1,error:"User not authenticated"};try{const ct=localStorage.getItem("authToken"),dt=new FormData;dt.append("file",lt),at&&dt.append("category",at);const ht=await fetch(buildApiUrl(API_ENDPOINTS.FILES.UPLOAD(ot.toString())),{method:"POST",headers:{Authorization:`Bearer ${ct}`},body:dt}),pt=await ht.json();return ht.ok&&pt.success?(c(ft=>[pt.data,...ft]),{success:!0,file:pt.data}):{success:!1,error:pt.message||"Failed to upload file"}}catch(ct){return console.error("Upload file error:",ct),{success:!1,error:"Network error. Please try again."}}},fetchFiles:async ot=>{if(_e){h(!0),b(null);try{const lt=localStorage.getItem("authToken"),at=await fetch(buildApiUrl(API_ENDPOINTS.FILES.WORKSPACE(ot.toString())),{headers:{Authorization:`Bearer ${lt}`,"Content-Type":"application/json"}}),ct=await at.json();if(at.ok&&ct.success){const dt=ct.data.filter(ht=>{var pt,ft;return((pt=ht.metadata)==null?void 0:pt.type)!=="generated"||!((ft=ht.metadata)!=null&&ft.sourceFileId)});c(dt)}else b(ct.message||"Failed to fetch files")}catch(lt){console.error("Fetch files error:",lt),b("Network error. Please try again.")}finally{h(!1)}}},deleteFile:async ot=>{if(!_e)return{success:!1,error:"User not authenticated"};try{const lt=localStorage.getItem("authToken"),at=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DELETE(ot.toString())),{method:"DELETE",headers:{Authorization:`Bearer ${lt}`,"Content-Type":"application/json"}}),ct=await at.json();return at.ok&&ct.success?(c(dt=>dt.filter(ht=>ht.id!==ot)),{success:!0}):{success:!1,error:ct.message||"Failed to delete file"}}catch(lt){return console.error("Delete file error:",lt),{success:!1,error:"Network error. Please try again."}}},getFile:ot=>e.find(lt=>lt.id===ot),getFilesByWorkspace:ot=>e.filter(lt=>lt.workspaceId===ot),downloadFile:async ot=>{if(!_e)return{success:!1,error:"User not authenticated"};try{const lt=localStorage.getItem("authToken"),at=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DOWNLOAD(ot.toString())),{headers:{Authorization:`Bearer ${lt}`,"Content-Type":"application/json"}}),ct=await at.json();return at.ok&&ct.success?{success:!0,downloadUrl:ct.data.downloadUrl}:{success:!1,error:ct.message||"Failed to generate download URL"}}catch(lt){return console.error("Download file error:",lt),{success:!1,error:"Network error. Please try again."}}}};return jsxRuntimeExports.jsx(FileContext.Provider,{value:it,children:a})},SidebarContext=reactExports.createContext(void 0),useSidebar=()=>{const a=reactExports.useContext(SidebarContext);if(a===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return a},SidebarProvider=({children:a})=>{const[e,c]=reactExports.useState(!1),d=()=>{c(!e)},h=g=>{c(g)};return jsxRuntimeExports.jsx(SidebarContext.Provider,{value:{isCollapsed:e,toggleCollapse:d,setCollapsed:h},children:a})},ProtectedRoute=({children:a})=>{const{isAuthenticated:e,isLoading:c}=useAuth();return c?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):e?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})},buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:a,variant:e,size:c,asChild:d=!1,...h},g)=>{const b=d?Slot$3:"button";return jsxRuntimeExports.jsx(b,{className:cn(buttonVariants({variant:e,size:c,className:a})),ref:g,...h})});Button.displayName="Button";const Input=reactExports.forwardRef(({className:a,type:e,...c},d)=>jsxRuntimeExports.jsx("input",{type:e,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:d,...c}));Input.displayName="Input";var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((a,e)=>{const{loop:c=!1,trapped:d=!1,onMountAutoFocus:h,onUnmountAutoFocus:g,...b}=a,[_e,et]=reactExports.useState(null),rt=useCallbackRef$1(h),st=useCallbackRef$1(g),$=reactExports.useRef(null),_=useComposedRefs(e,ot=>et(ot)),nt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(d){let ot=function(dt){if(nt.paused||!_e)return;const ht=dt.target;_e.contains(ht)?$.current=ht:focus($.current,{select:!0})},lt=function(dt){if(nt.paused||!_e)return;const ht=dt.relatedTarget;ht!==null&&(_e.contains(ht)||focus($.current,{select:!0}))},at=function(dt){if(document.activeElement===document.body)for(const pt of dt)pt.removedNodes.length>0&&focus(_e)};document.addEventListener("focusin",ot),document.addEventListener("focusout",lt);const ct=new MutationObserver(at);return _e&&ct.observe(_e,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ot),document.removeEventListener("focusout",lt),ct.disconnect()}}},[d,_e,nt.paused]),reactExports.useEffect(()=>{if(_e){focusScopesStack.add(nt);const ot=document.activeElement;if(!_e.contains(ot)){const at=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);_e.addEventListener(AUTOFOCUS_ON_MOUNT,rt),_e.dispatchEvent(at),at.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(_e)),{select:!0}),document.activeElement===ot&&focus(_e))}return()=>{_e.removeEventListener(AUTOFOCUS_ON_MOUNT,rt),setTimeout(()=>{const at=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);_e.addEventListener(AUTOFOCUS_ON_UNMOUNT,st),_e.dispatchEvent(at),at.defaultPrevented||focus(ot??document.body,{select:!0}),_e.removeEventListener(AUTOFOCUS_ON_UNMOUNT,st),focusScopesStack.remove(nt)},0)}}},[_e,rt,st,nt]);const it=reactExports.useCallback(ot=>{if(!c&&!d||nt.paused)return;const lt=ot.key==="Tab"&&!ot.altKey&&!ot.ctrlKey&&!ot.metaKey,at=document.activeElement;if(lt&&at){const ct=ot.currentTarget,[dt,ht]=getTabbableEdges(ct);dt&&ht?!ot.shiftKey&&at===ht?(ot.preventDefault(),c&&focus(dt,{select:!0})):ot.shiftKey&&at===dt&&(ot.preventDefault(),c&&focus(ht,{select:!0})):at===ct&&ot.preventDefault()}},[c,d,nt.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...b,ref:_,onKeyDown:it})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(a,{select:e=!1}={}){const c=document.activeElement;for(const d of a)if(focus(d,{select:e}),document.activeElement!==c)return}function getTabbableEdges(a){const e=getTabbableCandidates(a),c=findVisible(e,a),d=findVisible(e.reverse(),a);return[c,d]}function getTabbableCandidates(a){const e=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:d=>{const h=d.tagName==="INPUT"&&d.type==="hidden";return d.disabled||d.hidden||h?NodeFilter.FILTER_SKIP:d.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)e.push(c.currentNode);return e}function findVisible(a,e){for(const c of a)if(!isHidden(c,{upTo:e}))return c}function isHidden(a,{upTo:e}){if(getComputedStyle(a).visibility==="hidden")return!0;for(;a;){if(e!==void 0&&a===e)return!1;if(getComputedStyle(a).display==="none")return!0;a=a.parentElement}return!1}function isSelectableInput(a){return a instanceof HTMLInputElement&&"select"in a}function focus(a,{select:e=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0}),a!==c&&isSelectableInput(a)&&e&&a.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let a=[];return{add(e){const c=a[0];e!==c&&(c==null||c.pause()),a=arrayRemove(a,e),a.unshift(e)},remove(e){var c;a=arrayRemove(a,e),(c=a[0])==null||c.resume()}}}function arrayRemove(a,e){const c=[...a],d=c.indexOf(e);return d!==-1&&c.splice(d,1),c}function removeLinks(a){return a.filter(e=>e.tagName!=="A")}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",a[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",a[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),count--}},[])}function createFocusGuard(){const a=document.createElement("span");return a.setAttribute("data-radix-focus-guard",""),a.tabIndex=0,a.style.outline="none",a.style.opacity="0",a.style.position="fixed",a.style.pointerEvents="none",a}var __assign=function(){return __assign=Object.assign||function(e){for(var c,d=1,h=arguments.length;d<h;d++){c=arguments[d];for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(e[g]=c[g])}return e},__assign.apply(this,arguments)};function __rest$2(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c}function __spreadArray(a,e,c){if(c||arguments.length===2)for(var d=0,h=e.length,g;d<h;d++)(g||!(d in e))&&(g||(g=Array.prototype.slice.call(e,0,d)),g[d]=e[d]);return a.concat(g||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(a,e){return typeof a=="function"?a(e):a&&(a.current=e),a}function useCallbackRef(a,e){var c=reactExports.useState(function(){return{value:a,callback:e,facade:{get current(){return c.value},set current(d){var h=c.value;h!==d&&(c.value=d,c.callback(d,h))}}}})[0];return c.callback=e,c.facade}var useIsomorphicLayoutEffect$2=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(a,e){var c=useCallbackRef(null,function(d){return a.forEach(function(h){return assignRef(h,d)})});return useIsomorphicLayoutEffect$2(function(){var d=currentValues.get(c);if(d){var h=new Set(d),g=new Set(a),b=c.current;h.forEach(function(_e){g.has(_e)||assignRef(_e,null)}),g.forEach(function(_e){h.has(_e)||assignRef(_e,b)})}currentValues.set(c,a)},[a]),c}function ItoI(a){return a}function innerCreateMedium(a,e){e===void 0&&(e=ItoI);var c=[],d=!1,h={read:function(){if(d)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:a},useMedium:function(g){var b=e(g,d);return c.push(b),function(){c=c.filter(function(_e){return _e!==b})}},assignSyncMedium:function(g){for(d=!0;c.length;){var b=c;c=[],b.forEach(g)}c={push:function(_e){return g(_e)},filter:function(){return c}}},assignMedium:function(g){d=!0;var b=[];if(c.length){var _e=c;c=[],_e.forEach(g),b=c}var et=function(){var st=b;b=[],st.forEach(g)},rt=function(){return Promise.resolve().then(et)};rt(),c={push:function(st){b.push(st),rt()},filter:function(st){return b=b.filter(st),c}}}};return h}function createSidecarMedium(a){a===void 0&&(a={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},a),e}var SideCar$1=function(a){var e=a.sideCar,c=__rest$2(a,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var d=e.read();if(!d)throw new Error("Sidecar medium not found");return reactExports.createElement(d,__assign({},c))};SideCar$1.isSideCarExport=!0;function exportSidecar(a,e){return a.useMedium(e),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(a,e){var c=reactExports.useRef(null),d=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),h=d[0],g=d[1],b=a.forwardProps,_e=a.children,et=a.className,rt=a.removeScrollBar,st=a.enabled,$=a.shards,_=a.sideCar,nt=a.noRelative,it=a.noIsolation,ot=a.inert,lt=a.allowPinchZoom,at=a.as,ct=at===void 0?"div":at,dt=a.gapMode,ht=__rest$2(a,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),pt=_,ft=useMergeRefs([c,e]),mt=__assign(__assign({},ht),h);return reactExports.createElement(reactExports.Fragment,null,st&&reactExports.createElement(pt,{sideCar:effectCar,removeScrollBar:rt,shards:$,noRelative:nt,noIsolation:it,inert:ot,setCallbacks:g,allowPinchZoom:!!lt,lockRef:c,gapMode:dt}),b?reactExports.cloneElement(reactExports.Children.only(_e),__assign(__assign({},mt),{ref:ft})):reactExports.createElement(ct,__assign({},mt,{className:et,ref:ft}),_e))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var a=document.createElement("style");a.type="text/css";var e=getNonce();return e&&a.setAttribute("nonce",e),a}function injectStyles(a,e){a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}function insertStyleTag(a){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(a)}var stylesheetSingleton=function(){var a=0,e=null;return{add:function(c){a==0&&(e=makeStyleTag())&&(injectStyles(e,c),insertStyleTag(e)),a++},remove:function(){a--,!a&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var a=stylesheetSingleton();return function(e,c){reactExports.useEffect(function(){return a.add(e),function(){a.remove()}},[e&&c])}},styleSingleton=function(){var a=styleHookSingleton(),e=function(c){var d=c.styles,h=c.dynamic;return a(d,h),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(a){return parseInt(a||"",10)||0},getOffset=function(a){var e=window.getComputedStyle(document.body),c=e[a==="padding"?"paddingLeft":"marginLeft"],d=e[a==="padding"?"paddingTop":"marginTop"],h=e[a==="padding"?"paddingRight":"marginRight"];return[parse$1(c),parse$1(d),parse$1(h)]},getGapWidth=function(a){if(a===void 0&&(a="margin"),typeof window>"u")return zeroGap;var e=getOffset(a),c=document.documentElement.clientWidth,d=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,d-c+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(a,e,c,d){var h=a.left,g=a.top,b=a.right,_e=a.gap;return c===void 0&&(c="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(d,`;
   padding-right: `).concat(_e,"px ").concat(d,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(d,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(d,";"),c==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(g,`px;
    padding-right: `).concat(b,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(_e,"px ").concat(d,`;
    `),c==="padding"&&"padding-right: ".concat(_e,"px ").concat(d,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(_e,"px ").concat(d,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(_e,"px ").concat(d,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(d,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(d,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(_e,`px;
  }
`)},getCurrentUseCounter=function(){var a=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(a)?a:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var a=getCurrentUseCounter()-1;a<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,a.toString())}},[])},RemoveScrollBar=function(a){var e=a.noRelative,c=a.noImportant,d=a.gapMode,h=d===void 0?"margin":d;useLockAttribute();var g=reactExports.useMemo(function(){return getGapWidth(h)},[h]);return reactExports.createElement(Style,{styles:getStyles(g,!e,h,c?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(a){return a.tagName==="TEXTAREA"},elementCanBeScrolled=function(a,e){if(!(a instanceof Element))return!1;var c=window.getComputedStyle(a);return c[e]!=="hidden"&&!(c.overflowY===c.overflowX&&!alwaysContainsScroll(a)&&c[e]==="visible")},elementCouldBeVScrolled=function(a){return elementCanBeScrolled(a,"overflowY")},elementCouldBeHScrolled=function(a){return elementCanBeScrolled(a,"overflowX")},locationCouldBeScrolled=function(a,e){var c=e.ownerDocument,d=e;do{typeof ShadowRoot<"u"&&d instanceof ShadowRoot&&(d=d.host);var h=elementCouldBeScrolled(a,d);if(h){var g=getScrollVariables(a,d),b=g[1],_e=g[2];if(b>_e)return!0}d=d.parentNode}while(d&&d!==c.body);return!1},getVScrollVariables=function(a){var e=a.scrollTop,c=a.scrollHeight,d=a.clientHeight;return[e,c,d]},getHScrollVariables=function(a){var e=a.scrollLeft,c=a.scrollWidth,d=a.clientWidth;return[e,c,d]},elementCouldBeScrolled=function(a,e){return a==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(a,e){return a==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(a,e){return a==="h"&&e==="rtl"?-1:1},handleScroll=function(a,e,c,d,h){var g=getDirectionFactor(a,window.getComputedStyle(e).direction),b=g*d,_e=c.target,et=e.contains(_e),rt=!1,st=b>0,$=0,_=0;do{if(!_e)break;var nt=getScrollVariables(a,_e),it=nt[0],ot=nt[1],lt=nt[2],at=ot-lt-g*it;(it||at)&&elementCouldBeScrolled(a,_e)&&($+=at,_+=it);var ct=_e.parentNode;_e=ct&&ct.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ct.host:ct}while(!et&&_e!==document.body||et&&(e.contains(_e)||e===_e));return(st&&Math.abs($)<1||!st&&Math.abs(_)<1)&&(rt=!0),rt},getTouchXY=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(a){return[a.deltaX,a.deltaY]},extractRef=function(a){return a&&"current"in a?a.current:a},deltaCompare=function(a,e){return a[0]===e[0]&&a[1]===e[1]},generateStyle=function(a){return`
  .block-interactivity-`.concat(a,` {pointer-events: none;}
  .allow-interactivity-`).concat(a,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(a){var e=reactExports.useRef([]),c=reactExports.useRef([0,0]),d=reactExports.useRef(),h=reactExports.useState(idCounter++)[0],g=reactExports.useState(styleSingleton)[0],b=reactExports.useRef(a);reactExports.useEffect(function(){b.current=a},[a]),reactExports.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(h));var ot=__spreadArray([a.lockRef.current],(a.shards||[]).map(extractRef),!0).filter(Boolean);return ot.forEach(function(lt){return lt.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),ot.forEach(function(lt){return lt.classList.remove("allow-interactivity-".concat(h))})}}},[a.inert,a.lockRef.current,a.shards]);var _e=reactExports.useCallback(function(ot,lt){if("touches"in ot&&ot.touches.length===2||ot.type==="wheel"&&ot.ctrlKey)return!b.current.allowPinchZoom;var at=getTouchXY(ot),ct=c.current,dt="deltaX"in ot?ot.deltaX:ct[0]-at[0],ht="deltaY"in ot?ot.deltaY:ct[1]-at[1],pt,ft=ot.target,mt=Math.abs(dt)>Math.abs(ht)?"h":"v";if("touches"in ot&&mt==="h"&&ft.type==="range")return!1;var xt=locationCouldBeScrolled(mt,ft);if(!xt)return!0;if(xt?pt=mt:(pt=mt==="v"?"h":"v",xt=locationCouldBeScrolled(mt,ft)),!xt)return!1;if(!d.current&&"changedTouches"in ot&&(dt||ht)&&(d.current=pt),!pt)return!0;var gt=d.current||pt;return handleScroll(gt,lt,ot,gt==="h"?dt:ht)},[]),et=reactExports.useCallback(function(ot){var lt=ot;if(!(!lockStack.length||lockStack[lockStack.length-1]!==g)){var at="deltaY"in lt?getDeltaXY(lt):getTouchXY(lt),ct=e.current.filter(function(pt){return pt.name===lt.type&&(pt.target===lt.target||lt.target===pt.shadowParent)&&deltaCompare(pt.delta,at)})[0];if(ct&&ct.should){lt.cancelable&&lt.preventDefault();return}if(!ct){var dt=(b.current.shards||[]).map(extractRef).filter(Boolean).filter(function(pt){return pt.contains(lt.target)}),ht=dt.length>0?_e(lt,dt[0]):!b.current.noIsolation;ht&&lt.cancelable&&lt.preventDefault()}}},[]),rt=reactExports.useCallback(function(ot,lt,at,ct){var dt={name:ot,delta:lt,target:at,should:ct,shadowParent:getOutermostShadowParent(at)};e.current.push(dt),setTimeout(function(){e.current=e.current.filter(function(ht){return ht!==dt})},1)},[]),st=reactExports.useCallback(function(ot){c.current=getTouchXY(ot),d.current=void 0},[]),$=reactExports.useCallback(function(ot){rt(ot.type,getDeltaXY(ot),ot.target,_e(ot,a.lockRef.current))},[]),_=reactExports.useCallback(function(ot){rt(ot.type,getTouchXY(ot),ot.target,_e(ot,a.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(g),a.setCallbacks({onScrollCapture:$,onWheelCapture:$,onTouchMoveCapture:_}),document.addEventListener("wheel",et,nonPassive),document.addEventListener("touchmove",et,nonPassive),document.addEventListener("touchstart",st,nonPassive),function(){lockStack=lockStack.filter(function(ot){return ot!==g}),document.removeEventListener("wheel",et,nonPassive),document.removeEventListener("touchmove",et,nonPassive),document.removeEventListener("touchstart",st,nonPassive)}},[]);var nt=a.removeScrollBar,it=a.inert;return reactExports.createElement(reactExports.Fragment,null,it?reactExports.createElement(g,{styles:generateStyle(h)}):null,nt?reactExports.createElement(RemoveScrollBar,{noRelative:a.noRelative,gapMode:a.gapMode}):null)}function getOutermostShadowParent(a){for(var e=null;a!==null;)a instanceof ShadowRoot&&(e=a.host,a=a.host),a=a.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(a,e){return reactExports.createElement(RemoveScroll,__assign({},a,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(a){if(typeof document>"u")return null;var e=Array.isArray(a)?a[0]:a;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(a){return a&&(a.host||unwrapHost(a.parentNode))},correctTargets=function(a,e){return e.map(function(c){if(a.contains(c))return c;var d=unwrapHost(c);return d&&a.contains(d)?d:(console.error("aria-hidden",c,"in not contained inside",a,". Doing nothing"),null)}).filter(function(c){return!!c})},applyAttributeToOthers=function(a,e,c,d){var h=correctTargets(e,Array.isArray(a)?a:[a]);markerMap[c]||(markerMap[c]=new WeakMap);var g=markerMap[c],b=[],_e=new Set,et=new Set(h),rt=function($){!$||_e.has($)||(_e.add($),rt($.parentNode))};h.forEach(rt);var st=function($){!$||et.has($)||Array.prototype.forEach.call($.children,function(_){if(_e.has(_))st(_);else try{var nt=_.getAttribute(d),it=nt!==null&&nt!=="false",ot=(counterMap.get(_)||0)+1,lt=(g.get(_)||0)+1;counterMap.set(_,ot),g.set(_,lt),b.push(_),ot===1&&it&&uncontrolledNodes.set(_,!0),lt===1&&_.setAttribute(c,"true"),it||_.setAttribute(d,"true")}catch(at){console.error("aria-hidden: cannot operate on ",_,at)}})};return st(e),_e.clear(),lockCount++,function(){b.forEach(function($){var _=counterMap.get($)-1,nt=g.get($)-1;counterMap.set($,_),g.set($,nt),_||(uncontrolledNodes.has($)||$.removeAttribute(d),uncontrolledNodes.delete($)),nt||$.removeAttribute(c)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(a,e,c){c===void 0&&(c="data-aria-hidden");var d=Array.from(Array.isArray(a)?a:[a]),h=getDefaultParent(a);return h?(d.push.apply(d,Array.from(h.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(d,h,c,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=a=>{const{__scopeDialog:e,children:c,open:d,defaultOpen:h,onOpenChange:g,modal:b=!0}=a,_e=reactExports.useRef(null),et=reactExports.useRef(null),[rt,st]=useControllableState({prop:d,defaultProp:h??!1,onChange:g,caller:DIALOG_NAME});return jsxRuntimeExports.jsx(DialogProvider,{scope:e,triggerRef:_e,contentRef:et,contentId:useId$1(),titleId:useId$1(),descriptionId:useId$1(),open:rt,onOpenChange:st,onOpenToggle:reactExports.useCallback(()=>st($=>!$),[st]),modal:b,children:c})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$5="DialogTrigger",DialogTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,...d}=a,h=useDialogContext(TRIGGER_NAME$5,c),g=useComposedRefs(e,h.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":h.open,"aria-controls":h.contentId,"data-state":getState$3(h.open),...d,ref:g,onClick:composeEventHandlers(a.onClick,h.onOpenToggle)})});DialogTrigger$1.displayName=TRIGGER_NAME$5;var PORTAL_NAME$4="DialogPortal",[PortalProvider$1,usePortalContext$1]=createDialogContext(PORTAL_NAME$4,{forceMount:void 0}),DialogPortal$1=a=>{const{__scopeDialog:e,forceMount:c,children:d,container:h}=a,g=useDialogContext(PORTAL_NAME$4,e);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:e,forceMount:c,children:reactExports.Children.map(d,b=>jsxRuntimeExports.jsx(Presence,{present:c||g.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:h,children:b})}))})};DialogPortal$1.displayName=PORTAL_NAME$4;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((a,e)=>{const c=usePortalContext$1(OVERLAY_NAME$1,a.__scopeDialog),{forceMount:d=c.forceMount,...h}=a,g=useDialogContext(OVERLAY_NAME$1,a.__scopeDialog);return g.modal?jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...h,ref:e})}):null});DialogOverlay$1.displayName=OVERLAY_NAME$1;var Slot$2=createSlot("DialogOverlay.RemoveScroll"),DialogOverlayImpl=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,...d}=a,h=useDialogContext(OVERLAY_NAME$1,c);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot$2,allowPinchZoom:!0,shards:[h.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$3(h.open),...d,ref:e,style:{pointerEvents:"auto",...d.style}})})}),CONTENT_NAME$5="DialogContent",DialogContent$1=reactExports.forwardRef((a,e)=>{const c=usePortalContext$1(CONTENT_NAME$5,a.__scopeDialog),{forceMount:d=c.forceMount,...h}=a,g=useDialogContext(CONTENT_NAME$5,a.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:g.modal?jsxRuntimeExports.jsx(DialogContentModal,{...h,ref:e}):jsxRuntimeExports.jsx(DialogContentNonModal,{...h,ref:e})})});DialogContent$1.displayName=CONTENT_NAME$5;var DialogContentModal=reactExports.forwardRef((a,e)=>{const c=useDialogContext(CONTENT_NAME$5,a.__scopeDialog),d=reactExports.useRef(null),h=useComposedRefs(e,c.contentRef,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return hideOthers(g)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...a,ref:h,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(a.onCloseAutoFocus,g=>{var b;g.preventDefault(),(b=c.triggerRef.current)==null||b.focus()}),onPointerDownOutside:composeEventHandlers(a.onPointerDownOutside,g=>{const b=g.detail.originalEvent,_e=b.button===0&&b.ctrlKey===!0;(b.button===2||_e)&&g.preventDefault()}),onFocusOutside:composeEventHandlers(a.onFocusOutside,g=>g.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((a,e)=>{const c=useDialogContext(CONTENT_NAME$5,a.__scopeDialog),d=reactExports.useRef(!1),h=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:g=>{var b,_e;(b=a.onCloseAutoFocus)==null||b.call(a,g),g.defaultPrevented||(d.current||(_e=c.triggerRef.current)==null||_e.focus(),g.preventDefault()),d.current=!1,h.current=!1},onInteractOutside:g=>{var et,rt;(et=a.onInteractOutside)==null||et.call(a,g),g.defaultPrevented||(d.current=!0,g.detail.originalEvent.type==="pointerdown"&&(h.current=!0));const b=g.target;((rt=c.triggerRef.current)==null?void 0:rt.contains(b))&&g.preventDefault(),g.detail.originalEvent.type==="focusin"&&h.current&&g.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,trapFocus:d,onOpenAutoFocus:h,onCloseAutoFocus:g,...b}=a,_e=useDialogContext(CONTENT_NAME$5,c),et=reactExports.useRef(null),rt=useComposedRefs(e,et);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:h,onUnmountAutoFocus:g,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:_e.contentId,"aria-describedby":_e.descriptionId,"aria-labelledby":_e.titleId,"data-state":getState$3(_e.open),...b,ref:rt,onDismiss:()=>_e.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:_e.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:et,descriptionId:_e.descriptionId})]})]})}),TITLE_NAME$1="DialogTitle",DialogTitle$1=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,...d}=a,h=useDialogContext(TITLE_NAME$1,c);return jsxRuntimeExports.jsx(Primitive.h2,{id:h.titleId,...d,ref:e})});DialogTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="DialogDescription",DialogDescription$1=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,...d}=a,h=useDialogContext(DESCRIPTION_NAME$1,c);return jsxRuntimeExports.jsx(Primitive.p,{id:h.descriptionId,...d,ref:e})});DialogDescription$1.displayName=DESCRIPTION_NAME$1;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((a,e)=>{const{__scopeDialog:c,...d}=a,h=useDialogContext(CLOSE_NAME,c);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...d,ref:e,onClick:composeEventHandlers(a.onClick,()=>h.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState$3(a){return a?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$5,titleName:TITLE_NAME$1,docsSlug:"dialog"}),TitleWarning=({titleId:a})=>{const e=useWarningContext(TITLE_WARNING_NAME),c=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return reactExports.useEffect(()=>{a&&(document.getElementById(a)||console.error(c))},[c,a]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:a,descriptionId:e})=>{const d=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var g;const h=(g=a.current)==null?void 0:g.getAttribute("aria-describedby");e&&h&&(document.getElementById(e)||console.warn(d))},[d,a,e]),null},Root$5=Dialog$1,Trigger$3=DialogTrigger$1,Portal$2=DialogPortal$1,Overlay=DialogOverlay$1,Content$1=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$5,DialogTrigger=Trigger$3,DialogPortal=Portal$2,DialogOverlay=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Overlay,{ref:c,className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...e}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content$1,{ref:d,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[e,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content$1.displayName;const DialogHeader=({className:a,...e})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",a),...e});DialogHeader.displayName="DialogHeader";const DialogFooter=({className:a,...e})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...e});DialogFooter.displayName="DialogFooter";const DialogTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Title,{ref:c,className:cn("text-lg font-semibold leading-none tracking-tight",a),...e}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Description,{ref:c,className:cn("text-sm text-muted-foreground",a),...e}));DialogDescription.displayName=Description.displayName;var NAME="Label",Label$3=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Primitive.label,{...a,ref:e,onMouseDown:c=>{var h;c.target.closest("button, input, select, textarea")||((h=a.onMouseDown)==null||h.call(a,c),!c.defaultPrevented&&c.detail>1&&c.preventDefault())}}));Label$3.displayName=NAME;var Root$4=Label$3;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$2=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root$4,{ref:c,className:cn(labelVariants(),a),...e}));Label$2.displayName=Root$4.displayName;var shim$1={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports;function is(a,e){return a===e&&(a!==0||1/a===1/e)||a!==a&&e!==e}var objectIs=typeof Object.is=="function"?Object.is:is,useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function useSyncExternalStore$2(a,e){var c=e(),d=useState({inst:{value:c,getSnapshot:e}}),h=d[0].inst,g=d[1];return useLayoutEffect(function(){h.value=c,h.getSnapshot=e,checkIfSnapshotChanged(h)&&g({inst:h})},[a,c,e]),useEffect(function(){return checkIfSnapshotChanged(h)&&g({inst:h}),a(function(){checkIfSnapshotChanged(h)&&g({inst:h})})},[a]),useDebugValue(c),c}function checkIfSnapshotChanged(a){var e=a.getSnapshot;a=a.value;try{var c=e();return!objectIs(a,c)}catch{return!0}}function useSyncExternalStore$1(a,e){return e()}var shim=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React.useSyncExternalStore!==void 0?React.useSyncExternalStore:shim;shim$1.exports=useSyncExternalStoreShim_production;var shimExports=shim$1.exports;function useIsHydrated(){return shimExports.useSyncExternalStore(subscribe,()=>!0,()=>!1)}function subscribe(){return()=>{}}var AVATAR_NAME="Avatar",[createAvatarContext,createAvatarScope]=createContextScope(AVATAR_NAME),[AvatarProvider,useAvatarContext]=createAvatarContext(AVATAR_NAME),Avatar$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,...d}=a,[h,g]=reactExports.useState("idle");return jsxRuntimeExports.jsx(AvatarProvider,{scope:c,imageLoadingStatus:h,onImageLoadingStatusChange:g,children:jsxRuntimeExports.jsx(Primitive.span,{...d,ref:e})})});Avatar$1.displayName=AVATAR_NAME;var IMAGE_NAME="AvatarImage",AvatarImage$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,src:d,onLoadingStatusChange:h=()=>{},...g}=a,b=useAvatarContext(IMAGE_NAME,c),_e=useImageLoadingStatus(d,g),et=useCallbackRef$1(rt=>{h(rt),b.onImageLoadingStatusChange(rt)});return useLayoutEffect2(()=>{_e!=="idle"&&et(_e)},[_e,et]),_e==="loaded"?jsxRuntimeExports.jsx(Primitive.img,{...g,ref:e,src:d}):null});AvatarImage$1.displayName=IMAGE_NAME;var FALLBACK_NAME="AvatarFallback",AvatarFallback$1=reactExports.forwardRef((a,e)=>{const{__scopeAvatar:c,delayMs:d,...h}=a,g=useAvatarContext(FALLBACK_NAME,c),[b,_e]=reactExports.useState(d===void 0);return reactExports.useEffect(()=>{if(d!==void 0){const et=window.setTimeout(()=>_e(!0),d);return()=>window.clearTimeout(et)}},[d]),b&&g.imageLoadingStatus!=="loaded"?jsxRuntimeExports.jsx(Primitive.span,{...h,ref:e}):null});AvatarFallback$1.displayName=FALLBACK_NAME;function resolveLoadingStatus(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function useImageLoadingStatus(a,{referrerPolicy:e,crossOrigin:c}){const d=useIsHydrated(),h=reactExports.useRef(null),g=d?(h.current||(h.current=new window.Image),h.current):null,[b,_e]=reactExports.useState(()=>resolveLoadingStatus(g,a));return useLayoutEffect2(()=>{_e(resolveLoadingStatus(g,a))},[g,a]),useLayoutEffect2(()=>{const et=$=>()=>{_e($)};if(!g)return;const rt=et("loaded"),st=et("error");return g.addEventListener("load",rt),g.addEventListener("error",st),e&&(g.referrerPolicy=e),typeof c=="string"&&(g.crossOrigin=c),()=>{g.removeEventListener("load",rt),g.removeEventListener("error",st)}},[g,c,e]),b}var Root$3=Avatar$1,Image$1=AvatarImage$1,Fallback=AvatarFallback$1;const Avatar=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root$3,{ref:c,className:cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...e}));Avatar.displayName=Root$3.displayName;const AvatarImage=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Image$1,{ref:c,className:cn("aspect-square h-full w-full",a),...e}));AvatarImage.displayName=Image$1.displayName;const AvatarFallback=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Fallback,{ref:c,className:cn("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...e}));AvatarFallback.displayName=Fallback.displayName;var DirectionContext=reactExports.createContext(void 0);function useDirection(a){const e=reactExports.useContext(DirectionContext);return a||e||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$2]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((a,e)=>jsxRuntimeExports.jsx(Collection$2.Provider,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:a.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...a,ref:e})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:c,orientation:d,loop:h=!1,dir:g,currentTabStopId:b,defaultCurrentTabStopId:_e,onCurrentTabStopIdChange:et,onEntryFocus:rt,preventScrollOnEntryFocus:st=!1,...$}=a,_=reactExports.useRef(null),nt=useComposedRefs(e,_),it=useDirection(g),[ot,lt]=useControllableState({prop:b,defaultProp:_e??null,onChange:et,caller:GROUP_NAME$3}),[at,ct]=reactExports.useState(!1),dt=useCallbackRef$1(rt),ht=useCollection$2(c),pt=reactExports.useRef(!1),[ft,mt]=reactExports.useState(0);return reactExports.useEffect(()=>{const xt=_.current;if(xt)return xt.addEventListener(ENTRY_FOCUS,dt),()=>xt.removeEventListener(ENTRY_FOCUS,dt)},[dt]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:c,orientation:d,dir:it,loop:h,currentTabStopId:ot,onItemFocus:reactExports.useCallback(xt=>lt(xt),[lt]),onItemShiftTab:reactExports.useCallback(()=>ct(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>mt(xt=>xt+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>mt(xt=>xt-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:at||ft===0?-1:0,"data-orientation":d,...$,ref:nt,style:{outline:"none",...a.style},onMouseDown:composeEventHandlers(a.onMouseDown,()=>{pt.current=!0}),onFocus:composeEventHandlers(a.onFocus,xt=>{const gt=!pt.current;if(xt.target===xt.currentTarget&&gt&&!at){const Et=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(xt.currentTarget.dispatchEvent(Et),!Et.defaultPrevented){const St=ht().filter(Tt=>Tt.focusable),Pt=St.find(Tt=>Tt.active),Mt=St.find(Tt=>Tt.id===ot),Dt=[Pt,Mt,...St].filter(Boolean).map(Tt=>Tt.ref.current);focusFirst$1(Dt,st)}}pt.current=!1}),onBlur:composeEventHandlers(a.onBlur,()=>ct(!1))})})}),ITEM_NAME$4="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((a,e)=>{const{__scopeRovingFocusGroup:c,focusable:d=!0,active:h=!1,tabStopId:g,children:b,..._e}=a,et=useId$1(),rt=g||et,st=useRovingFocusContext(ITEM_NAME$4,c),$=st.currentTabStopId===rt,_=useCollection$2(c),{onFocusableItemAdd:nt,onFocusableItemRemove:it,currentTabStopId:ot}=st;return reactExports.useEffect(()=>{if(d)return nt(),()=>it()},[d,nt,it]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:c,id:rt,focusable:d,active:h,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:$?0:-1,"data-orientation":st.orientation,..._e,ref:e,onMouseDown:composeEventHandlers(a.onMouseDown,lt=>{d?st.onItemFocus(rt):lt.preventDefault()}),onFocus:composeEventHandlers(a.onFocus,()=>st.onItemFocus(rt)),onKeyDown:composeEventHandlers(a.onKeyDown,lt=>{if(lt.key==="Tab"&&lt.shiftKey){st.onItemShiftTab();return}if(lt.target!==lt.currentTarget)return;const at=getFocusIntent(lt,st.orientation,st.dir);if(at!==void 0){if(lt.metaKey||lt.ctrlKey||lt.altKey||lt.shiftKey)return;lt.preventDefault();let dt=_().filter(ht=>ht.focusable).map(ht=>ht.ref.current);if(at==="last")dt.reverse();else if(at==="prev"||at==="next"){at==="prev"&&dt.reverse();const ht=dt.indexOf(lt.currentTarget);dt=st.loop?wrapArray$2(dt,ht+1):dt.slice(ht+1)}setTimeout(()=>focusFirst$1(dt))}}),children:typeof b=="function"?b({isCurrentTabStop:$,hasTabStop:ot!=null}):b})})});RovingFocusGroupItem.displayName=ITEM_NAME$4;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(a,e){return e!=="rtl"?a:a==="ArrowLeft"?"ArrowRight":a==="ArrowRight"?"ArrowLeft":a}function getFocusIntent(a,e,c){const d=getDirectionAwareKey(a.key,c);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(d))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(d)))return MAP_KEY_TO_FOCUS_INTENT[d]}function focusFirst$1(a,e=!1){const c=document.activeElement;for(const d of a)if(d===c||(d.focus({preventScroll:e}),document.activeElement!==c))return}function wrapArray$2(a,e){return a.map((c,d)=>a[(e+d)%a.length])}var Root$2=RovingFocusGroup,Item$1=RovingFocusGroupItem,SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$1,createPopperScope,createRovingFocusGroupScope]),usePopperScope$1=createPopperScope(),useRovingFocusGroupScope$2=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=a=>{const{__scopeMenu:e,open:c=!1,children:d,dir:h,onOpenChange:g,modal:b=!0}=a,_e=usePopperScope$1(e),[et,rt]=reactExports.useState(null),st=reactExports.useRef(!1),$=useCallbackRef$1(g),_=useDirection(h);return reactExports.useEffect(()=>{const nt=()=>{st.current=!0,document.addEventListener("pointerdown",it,{capture:!0,once:!0}),document.addEventListener("pointermove",it,{capture:!0,once:!0})},it=()=>st.current=!1;return document.addEventListener("keydown",nt,{capture:!0}),()=>{document.removeEventListener("keydown",nt,{capture:!0}),document.removeEventListener("pointerdown",it,{capture:!0}),document.removeEventListener("pointermove",it,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$5,{..._e,children:jsxRuntimeExports.jsx(MenuProvider,{scope:e,open:c,onOpenChange:$,content:et,onContentChange:rt,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:e,onClose:reactExports.useCallback(()=>$(!1),[$]),isUsingKeyboardRef:st,dir:_,modal:b,children:d})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a,h=usePopperScope$1(c);return jsxRuntimeExports.jsx(Anchor,{...h,...d,ref:e})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$3="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$3,{forceMount:void 0}),MenuPortal=a=>{const{__scopeMenu:e,forceMount:c,children:d,container:h}=a,g=useMenuContext(PORTAL_NAME$3,e);return jsxRuntimeExports.jsx(PortalProvider,{scope:e,forceMount:c,children:jsxRuntimeExports.jsx(Presence,{present:c||g.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:h,children:d})})})};MenuPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$4="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$4),MenuContent=reactExports.forwardRef((a,e)=>{const c=usePortalContext(CONTENT_NAME$4,a.__scopeMenu),{forceMount:d=c.forceMount,...h}=a,g=useMenuContext(CONTENT_NAME$4,a.__scopeMenu),b=useMenuRootContext(CONTENT_NAME$4,a.__scopeMenu);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:b.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...h,ref:e}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...h,ref:e})})})})}),MenuRootContentModal=reactExports.forwardRef((a,e)=>{const c=useMenuContext(CONTENT_NAME$4,a.__scopeMenu),d=reactExports.useRef(null),h=useComposedRefs(e,d);return reactExports.useEffect(()=>{const g=d.current;if(g)return hideOthers(g)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:h,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(a.onFocusOutside,g=>g.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((a,e)=>{const c=useMenuContext(CONTENT_NAME$4,a.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...a,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),Slot$1=createSlot("MenuContent.ScrollLock"),MenuContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,loop:d=!1,trapFocus:h,onOpenAutoFocus:g,onCloseAutoFocus:b,disableOutsidePointerEvents:_e,onEntryFocus:et,onEscapeKeyDown:rt,onPointerDownOutside:st,onFocusOutside:$,onInteractOutside:_,onDismiss:nt,disableOutsideScroll:it,...ot}=a,lt=useMenuContext(CONTENT_NAME$4,c),at=useMenuRootContext(CONTENT_NAME$4,c),ct=usePopperScope$1(c),dt=useRovingFocusGroupScope$2(c),ht=useCollection$1(c),[pt,ft]=reactExports.useState(null),mt=reactExports.useRef(null),xt=useComposedRefs(e,mt,lt.onContentChange),gt=reactExports.useRef(0),Et=reactExports.useRef(""),St=reactExports.useRef(0),Pt=reactExports.useRef(null),Mt=reactExports.useRef("right"),Rt=reactExports.useRef(0),Dt=it?ReactRemoveScroll:reactExports.Fragment,Tt=it?{as:Slot$1,allowPinchZoom:!0}:void 0,It=Bt=>{var Gt,hn;const Ct=Et.current+Bt,en=ht().filter(fn=>!fn.disabled),sn=document.activeElement,kt=(Gt=en.find(fn=>fn.ref.current===sn))==null?void 0:Gt.textValue,Ut=en.map(fn=>fn.textValue),Jt=getNextMatch(Ut,Ct,kt),tn=(hn=en.find(fn=>fn.textValue===Jt))==null?void 0:hn.ref.current;(function fn(gn){Et.current=gn,window.clearTimeout(gt.current),gn!==""&&(gt.current=window.setTimeout(()=>fn(""),1e3))})(Ct),tn&&setTimeout(()=>tn.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(gt.current),[]),useFocusGuards();const Vt=reactExports.useCallback(Bt=>{var en,sn;return Mt.current===((en=Pt.current)==null?void 0:en.side)&&isPointerInGraceArea(Bt,(sn=Pt.current)==null?void 0:sn.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:c,searchRef:Et,onItemEnter:reactExports.useCallback(Bt=>{Vt(Bt)&&Bt.preventDefault()},[Vt]),onItemLeave:reactExports.useCallback(Bt=>{var Ct;Vt(Bt)||((Ct=mt.current)==null||Ct.focus(),ft(null))},[Vt]),onTriggerLeave:reactExports.useCallback(Bt=>{Vt(Bt)&&Bt.preventDefault()},[Vt]),pointerGraceTimerRef:St,onPointerGraceIntentChange:reactExports.useCallback(Bt=>{Pt.current=Bt},[]),children:jsxRuntimeExports.jsx(Dt,{...Tt,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:h,onMountAutoFocus:composeEventHandlers(g,Bt=>{var Ct;Bt.preventDefault(),(Ct=mt.current)==null||Ct.focus({preventScroll:!0})}),onUnmountAutoFocus:b,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:_e,onEscapeKeyDown:rt,onPointerDownOutside:st,onFocusOutside:$,onInteractOutside:_,onDismiss:nt,children:jsxRuntimeExports.jsx(Root$2,{asChild:!0,...dt,dir:at.dir,orientation:"vertical",loop:d,currentTabStopId:pt,onCurrentTabStopIdChange:ft,onEntryFocus:composeEventHandlers(et,Bt=>{at.isUsingKeyboardRef.current||Bt.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$2,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(lt.open),"data-radix-menu-content":"",dir:at.dir,...ct,...ot,ref:xt,style:{outline:"none",...ot.style},onKeyDown:composeEventHandlers(ot.onKeyDown,Bt=>{const en=Bt.target.closest("[data-radix-menu-content]")===Bt.currentTarget,sn=Bt.ctrlKey||Bt.altKey||Bt.metaKey,kt=Bt.key.length===1;en&&(Bt.key==="Tab"&&Bt.preventDefault(),!sn&&kt&&It(Bt.key));const Ut=mt.current;if(Bt.target!==Ut||!FIRST_LAST_KEYS.includes(Bt.key))return;Bt.preventDefault();const tn=ht().filter(Gt=>!Gt.disabled).map(Gt=>Gt.ref.current);LAST_KEYS.includes(Bt.key)&&tn.reverse(),focusFirst(tn)}),onBlur:composeEventHandlers(a.onBlur,Bt=>{Bt.currentTarget.contains(Bt.target)||(window.clearTimeout(gt.current),Et.current="")}),onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(Bt=>{const Ct=Bt.target,en=Rt.current!==Bt.clientX;if(Bt.currentTarget.contains(Ct)&&en){const sn=Bt.clientX>Rt.current?"right":"left";Mt.current=sn,Rt.current=Bt.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$4;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...d,ref:e})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$3="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((a,e)=>{const{disabled:c=!1,onSelect:d,...h}=a,g=reactExports.useRef(null),b=useMenuRootContext(ITEM_NAME$3,a.__scopeMenu),_e=useMenuContentContext(ITEM_NAME$3,a.__scopeMenu),et=useComposedRefs(e,g),rt=reactExports.useRef(!1),st=()=>{const $=g.current;if(!c&&$){const _=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});$.addEventListener(ITEM_SELECT,nt=>d==null?void 0:d(nt),{once:!0}),dispatchDiscreteCustomEvent($,_),_.defaultPrevented?rt.current=!1:b.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...h,ref:et,disabled:c,onClick:composeEventHandlers(a.onClick,st),onPointerDown:$=>{var _;(_=a.onPointerDown)==null||_.call(a,$),rt.current=!0},onPointerUp:composeEventHandlers(a.onPointerUp,$=>{var _;rt.current||(_=$.currentTarget)==null||_.click()}),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{const _=_e.searchRef.current!=="";c||_&&$.key===" "||SELECTION_KEYS$1.includes($.key)&&($.currentTarget.click(),$.preventDefault())})})});MenuItem.displayName=ITEM_NAME$3;var MenuItemImpl=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,disabled:d=!1,textValue:h,...g}=a,b=useMenuContentContext(ITEM_NAME$3,c),_e=useRovingFocusGroupScope$2(c),et=reactExports.useRef(null),rt=useComposedRefs(e,et),[st,$]=reactExports.useState(!1),[_,nt]=reactExports.useState("");return reactExports.useEffect(()=>{const it=et.current;it&&nt((it.textContent??"").trim())},[g.children]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:c,disabled:d,textValue:h??_,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":st?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...g,ref:rt,onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse(it=>{d?b.onItemLeave(it):(b.onItemEnter(it),it.defaultPrevented||it.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse(it=>b.onItemLeave(it))),onFocus:composeEventHandlers(a.onFocus,()=>$(!0)),onBlur:composeEventHandlers(a.onBlur,()=>$(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((a,e)=>{const{checked:c=!1,onCheckedChange:d,...h}=a;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:c,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate$1(c)?"mixed":c,...h,ref:e,"data-state":getCheckedState(c),onSelect:composeEventHandlers(h.onSelect,()=>d==null?void 0:d(isIndeterminate$1(c)?!0:!c),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$2="MenuRadioGroup",[RadioGroupProvider$1,useRadioGroupContext$1]=createMenuContext(RADIO_GROUP_NAME$2,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((a,e)=>{const{value:c,onValueChange:d,...h}=a,g=useCallbackRef$1(d);return jsxRuntimeExports.jsx(RadioGroupProvider$1,{scope:a.__scopeMenu,value:c,onValueChange:g,children:jsxRuntimeExports.jsx(MenuGroup,{...h,ref:e})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$2;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((a,e)=>{const{value:c,...d}=a,h=useRadioGroupContext$1(RADIO_ITEM_NAME$1,a.__scopeMenu),g=c===h.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:a.__scopeMenu,checked:g,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":g,...d,ref:e,"data-state":getCheckedState(g),onSelect:composeEventHandlers(d.onSelect,()=>{var b;return(b=h.onValueChange)==null?void 0:b.call(h,c)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,forceMount:d,...h}=a,g=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,c);return jsxRuntimeExports.jsx(Presence,{present:d||isIndeterminate$1(g.checked)||g.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...h,ref:e,"data-state":getCheckedState(g.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...d,ref:e})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$2="MenuArrow",MenuArrow=reactExports.forwardRef((a,e)=>{const{__scopeMenu:c,...d}=a,h=usePopperScope$1(c);return jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e})});MenuArrow.displayName=ARROW_NAME$2;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),MenuSub=a=>{const{__scopeMenu:e,children:c,open:d=!1,onOpenChange:h}=a,g=useMenuContext(SUB_NAME,e),b=usePopperScope$1(e),[_e,et]=reactExports.useState(null),[rt,st]=reactExports.useState(null),$=useCallbackRef$1(h);return reactExports.useEffect(()=>(g.open===!1&&$(!1),()=>$(!1)),[g.open,$]),jsxRuntimeExports.jsx(Root2$5,{...b,children:jsxRuntimeExports.jsx(MenuProvider,{scope:e,open:d,onOpenChange:$,content:rt,onContentChange:st,children:jsxRuntimeExports.jsx(MenuSubProvider,{scope:e,contentId:useId$1(),triggerId:useId$1(),trigger:_e,onTriggerChange:et,children:c})})})};MenuSub.displayName=SUB_NAME;var SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((a,e)=>{const c=useMenuContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),d=useMenuRootContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),h=useMenuSubContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),g=useMenuContentContext(SUB_TRIGGER_NAME$1,a.__scopeMenu),b=reactExports.useRef(null),{pointerGraceTimerRef:_e,onPointerGraceIntentChange:et}=g,rt={__scopeMenu:a.__scopeMenu},st=reactExports.useCallback(()=>{b.current&&window.clearTimeout(b.current),b.current=null},[]);return reactExports.useEffect(()=>st,[st]),reactExports.useEffect(()=>{const $=_e.current;return()=>{window.clearTimeout($),et(null)}},[_e,et]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...rt,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:h.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":h.contentId,"data-state":getOpenState(c.open),...a,ref:composeRefs(e,h.onTriggerChange),onClick:$=>{var _;(_=a.onClick)==null||_.call(a,$),!(a.disabled||$.defaultPrevented)&&($.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:composeEventHandlers(a.onPointerMove,whenMouse($=>{g.onItemEnter($),!$.defaultPrevented&&!a.disabled&&!c.open&&!b.current&&(g.onPointerGraceIntentChange(null),b.current=window.setTimeout(()=>{c.onOpenChange(!0),st()},100))})),onPointerLeave:composeEventHandlers(a.onPointerLeave,whenMouse($=>{var nt,it;st();const _=(nt=c.content)==null?void 0:nt.getBoundingClientRect();if(_){const ot=(it=c.content)==null?void 0:it.dataset.side,lt=ot==="right",at=lt?-5:5,ct=_[lt?"left":"right"],dt=_[lt?"right":"left"];g.onPointerGraceIntentChange({area:[{x:$.clientX+at,y:$.clientY},{x:ct,y:_.top},{x:dt,y:_.top},{x:dt,y:_.bottom},{x:ct,y:_.bottom}],side:ot}),window.clearTimeout(_e.current),_e.current=window.setTimeout(()=>g.onPointerGraceIntentChange(null),300)}else{if(g.onTriggerLeave($),$.defaultPrevented)return;g.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{var nt;const _=g.searchRef.current!=="";a.disabled||_&&$.key===" "||SUB_OPEN_KEYS[d.dir].includes($.key)&&(c.onOpenChange(!0),(nt=c.content)==null||nt.focus(),$.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((a,e)=>{const c=usePortalContext(CONTENT_NAME$4,a.__scopeMenu),{forceMount:d=c.forceMount,...h}=a,g=useMenuContext(CONTENT_NAME$4,a.__scopeMenu),b=useMenuRootContext(CONTENT_NAME$4,a.__scopeMenu),_e=useMenuSubContext(SUB_CONTENT_NAME$1,a.__scopeMenu),et=reactExports.useRef(null),rt=useComposedRefs(e,et);return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:d||g.open,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:a.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:_e.contentId,"aria-labelledby":_e.triggerId,...h,ref:rt,align:"start",side:b.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:st=>{var $;b.isUsingKeyboardRef.current&&(($=et.current)==null||$.focus()),st.preventDefault()},onCloseAutoFocus:st=>st.preventDefault(),onFocusOutside:composeEventHandlers(a.onFocusOutside,st=>{st.target!==_e.trigger&&g.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(a.onEscapeKeyDown,st=>{b.onClose(),st.preventDefault()}),onKeyDown:composeEventHandlers(a.onKeyDown,st=>{var nt;const $=st.currentTarget.contains(st.target),_=SUB_CLOSE_KEYS[b.dir].includes(st.key);$&&_&&(g.onOpenChange(!1),(nt=_e.trigger)==null||nt.focus(),st.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(a){return a?"open":"closed"}function isIndeterminate$1(a){return a==="indeterminate"}function getCheckedState(a){return isIndeterminate$1(a)?"indeterminate":a?"checked":"unchecked"}function focusFirst(a){const e=document.activeElement;for(const c of a)if(c===e||(c.focus(),document.activeElement!==e))return}function wrapArray$1(a,e){return a.map((c,d)=>a[(e+d)%a.length])}function getNextMatch(a,e,c){const h=e.length>1&&Array.from(e).every(rt=>rt===e[0])?e[0]:e,g=c?a.indexOf(c):-1;let b=wrapArray$1(a,Math.max(g,0));h.length===1&&(b=b.filter(rt=>rt!==c));const et=b.find(rt=>rt.toLowerCase().startsWith(h.toLowerCase()));return et!==c?et:void 0}function isPointInPolygon(a,e){const{x:c,y:d}=a;let h=!1;for(let g=0,b=e.length-1;g<e.length;b=g++){const _e=e[g],et=e[b],rt=_e.x,st=_e.y,$=et.x,_=et.y;st>d!=_>d&&c<($-rt)*(d-st)/(_-st)+rt&&(h=!h)}return h}function isPointerInGraceArea(a,e){if(!e)return!1;const c={x:a.clientX,y:a.clientY};return isPointInPolygon(c,e)}function whenMouse(a){return e=>e.pointerType==="mouse"?a(e):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$3=MenuContent,Group=MenuGroup,Label$1=MenuLabel,Item2$2=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup$2=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$1=MenuSeparator,Arrow2=MenuArrow,Sub=MenuSub,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=a=>{const{__scopeDropdownMenu:e,children:c,dir:d,open:h,defaultOpen:g,onOpenChange:b,modal:_e=!0}=a,et=useMenuScope(e),rt=reactExports.useRef(null),[st,$]=useControllableState({prop:h,defaultProp:g??!1,onChange:b,caller:DROPDOWN_MENU_NAME});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:e,triggerId:useId$1(),triggerRef:rt,contentId:useId$1(),open:st,onOpenChange:$,onOpenToggle:reactExports.useCallback(()=>$(_=>!_),[$]),modal:_e,children:jsxRuntimeExports.jsx(Root3,{...et,open:st,onOpenChange:$,dir:d,modal:_e,children:c})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$4="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,disabled:d=!1,...h}=a,g=useDropdownMenuContext(TRIGGER_NAME$4,c),b=useMenuScope(c);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...b,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:g.triggerId,"aria-haspopup":"menu","aria-expanded":g.open,"aria-controls":g.open?g.contentId:void 0,"data-state":g.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...h,ref:composeRefs(e,g.triggerRef),onPointerDown:composeEventHandlers(a.onPointerDown,_e=>{!d&&_e.button===0&&_e.ctrlKey===!1&&(g.onOpenToggle(),g.open||_e.preventDefault())}),onKeyDown:composeEventHandlers(a.onKeyDown,_e=>{d||(["Enter"," "].includes(_e.key)&&g.onOpenToggle(),_e.key==="ArrowDown"&&g.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(_e.key)&&_e.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$4;var PORTAL_NAME$2="DropdownMenuPortal",DropdownMenuPortal=a=>{const{__scopeDropdownMenu:e,...c}=a,d=useMenuScope(e);return jsxRuntimeExports.jsx(Portal$1,{...d,...c})};DropdownMenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$3="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useDropdownMenuContext(CONTENT_NAME$3,c),g=useMenuScope(c),b=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$3,{id:h.contentId,"aria-labelledby":h.triggerId,...g,...d,ref:e,onCloseAutoFocus:composeEventHandlers(a.onCloseAutoFocus,_e=>{var et;b.current||(et=h.triggerRef.current)==null||et.focus(),b.current=!1,_e.preventDefault()}),onInteractOutside:composeEventHandlers(a.onInteractOutside,_e=>{const et=_e.detail.originalEvent,rt=et.button===0&&et.ctrlKey===!0,st=et.button===2||rt;(!h.modal||st)&&(b.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$3;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Group,{...h,...d,ref:e})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Label$1,{...h,...d,ref:e})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$2="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Item2$2,{...h,...d,ref:e})});DropdownMenuItem$1.displayName=ITEM_NAME$2;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(CheckboxItem,{...h,...d,ref:e})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME$1="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(RadioGroup$2,{...h,...d,ref:e})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(RadioItem,{...h,...d,ref:e})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME$2="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(ItemIndicator$1,{...h,...d,ref:e})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME$2;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Separator$1,{...h,...d,ref:e})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(Arrow2,{...h,...d,ref:e})});DropdownMenuArrow.displayName=ARROW_NAME$1;var DropdownMenuSub$1=a=>{const{__scopeDropdownMenu:e,children:c,open:d,onOpenChange:h,defaultOpen:g}=a,b=useMenuScope(e),[_e,et]=useControllableState({prop:d,defaultProp:g??!1,onChange:h,caller:"DropdownMenuSub"});return jsxRuntimeExports.jsx(Sub,{...b,open:_e,onOpenChange:et,children:c})},SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(SubTrigger,{...h,...d,ref:e})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((a,e)=>{const{__scopeDropdownMenu:c,...d}=a,h=useMenuScope(c);return jsxRuntimeExports.jsx(SubContent,{...h,...d,ref:e,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$4=DropdownMenu$1,Trigger$2=DropdownMenuTrigger$1,Portal2$1=DropdownMenuPortal,Content2$2=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2$1=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,Sub2=DropdownMenuSub$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$4,DropdownMenuTrigger=Trigger$2,DropdownMenuSub=Sub2,DropdownMenuSubTrigger=reactExports.forwardRef(({className:a,inset:e,children:c,...d},h)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:h,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",a),...d,children:[c,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(SubContent2,{ref:c,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...e}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:a,sideOffset:e=4,...c},d)=>jsxRuntimeExports.jsx(Portal2$1,{children:jsxRuntimeExports.jsx(Content2$2,{ref:d,sideOffset:e,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));DropdownMenuContent.displayName=Content2$2.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:a,inset:e,...c},d)=>jsxRuntimeExports.jsx(Item2$1,{ref:d,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",a),...c}));DropdownMenuItem.displayName=Item2$1.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:a,children:e,checked:c,...d},h)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:h,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),e]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:d,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),e]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:a,inset:e,...c},d)=>jsxRuntimeExports.jsx(Label2,{ref:d,className:cn("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",a),...c}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Separator2,{ref:c,className:cn("-mx-1 my-1 h-px bg-muted",a),...e}));DropdownMenuSeparator.displayName=Separator2.displayName;var ROOT_NAME="AlertDialog",[createAlertDialogContext,createAlertDialogScope]=createContextScope(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog$1=a=>{const{__scopeAlertDialog:e,...c}=a,d=useDialogScope(e);return jsxRuntimeExports.jsx(Root$5,{...d,...c,modal:!0})};AlertDialog$1.displayName=ROOT_NAME;var TRIGGER_NAME$3="AlertDialogTrigger",AlertDialogTrigger=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,h=useDialogScope(c);return jsxRuntimeExports.jsx(Trigger$3,{...h,...d,ref:e})});AlertDialogTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$1="AlertDialogPortal",AlertDialogPortal$1=a=>{const{__scopeAlertDialog:e,...c}=a,d=useDialogScope(e);return jsxRuntimeExports.jsx(Portal$2,{...d,...c})};AlertDialogPortal$1.displayName=PORTAL_NAME$1;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,h=useDialogScope(c);return jsxRuntimeExports.jsx(Overlay,{...h,...d,ref:e})});AlertDialogOverlay$1.displayName=OVERLAY_NAME;var CONTENT_NAME$2="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME$2),Slottable=createSlottable("AlertDialogContent"),AlertDialogContent$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,children:d,...h}=a,g=useDialogScope(c),b=reactExports.useRef(null),_e=useComposedRefs(e,b),et=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME$2,titleName:TITLE_NAME,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:c,cancelRef:et,children:jsxRuntimeExports.jsxs(Content$1,{role:"alertdialog",...g,...h,ref:_e,onOpenAutoFocus:composeEventHandlers(h.onOpenAutoFocus,rt=>{var st;rt.preventDefault(),(st=et.current)==null||st.focus({preventScroll:!0})}),onPointerDownOutside:rt=>rt.preventDefault(),onInteractOutside:rt=>rt.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable,{children:d}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:b})]})})})});AlertDialogContent$1.displayName=CONTENT_NAME$2;var TITLE_NAME="AlertDialogTitle",AlertDialogTitle$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,h=useDialogScope(c);return jsxRuntimeExports.jsx(Title,{...h,...d,ref:e})});AlertDialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="AlertDialogDescription",AlertDialogDescription$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,h=useDialogScope(c);return jsxRuntimeExports.jsx(Description,{...h,...d,ref:e})});AlertDialogDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="AlertDialogAction",AlertDialogAction$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,h=useDialogScope(c);return jsxRuntimeExports.jsx(Close,{...h,...d,ref:e})});AlertDialogAction$1.displayName=ACTION_NAME;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel$1=reactExports.forwardRef((a,e)=>{const{__scopeAlertDialog:c,...d}=a,{cancelRef:h}=useAlertDialogContentContext(CANCEL_NAME,c),g=useDialogScope(c),b=useComposedRefs(e,h);return jsxRuntimeExports.jsx(Close,{...g,...d,ref:b})});AlertDialogCancel$1.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:a})=>{const e=`\`${CONTENT_NAME$2}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME$2}\` by passing a \`${DESCRIPTION_NAME}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME$2}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{var d;document.getElementById((d=a.current)==null?void 0:d.getAttribute("aria-describedby"))||console.warn(e)},[e,a]),null},Root2$3=AlertDialog$1,Portal2=AlertDialogPortal$1,Overlay2=AlertDialogOverlay$1,Content2$1=AlertDialogContent$1,Action=AlertDialogAction$1,Cancel=AlertDialogCancel$1,Title2=AlertDialogTitle$1,Description2=AlertDialogDescription$1;const AlertDialog=Root2$3,AlertDialogPortal=Portal2,AlertDialogOverlay=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Overlay2,{className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...e,ref:c}));AlertDialogOverlay.displayName=Overlay2.displayName;const AlertDialogContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsxs(AlertDialogPortal,{children:[jsxRuntimeExports.jsx(AlertDialogOverlay,{}),jsxRuntimeExports.jsx(Content2$1,{ref:c,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...e})]}));AlertDialogContent.displayName=Content2$1.displayName;const AlertDialogHeader=({className:a,...e})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-2 text-center sm:text-left",a),...e});AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogFooter=({className:a,...e})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...e});AlertDialogFooter.displayName="AlertDialogFooter";const AlertDialogTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Title2,{ref:c,className:cn("text-lg font-semibold",a),...e}));AlertDialogTitle.displayName=Title2.displayName;const AlertDialogDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Description2,{ref:c,className:cn("text-sm text-muted-foreground",a),...e}));AlertDialogDescription.displayName=Description2.displayName;const AlertDialogAction=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Action,{ref:c,className:cn(buttonVariants(),a),...e}));AlertDialogAction.displayName=Action.displayName;const AlertDialogCancel=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Cancel,{ref:c,className:cn(buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",a),...e}));AlertDialogCancel.displayName=Cancel.displayName;const Textarea=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...e}));Textarea.displayName="Textarea";function clamp(a,[e,c]){return Math.min(c,Math.max(e,a))}function usePrevious(a){const e=reactExports.useRef({value:a,previous:a});return reactExports.useMemo(()=>(e.current.value!==a&&(e.current.previous=e.current.value,e.current.value=a),e.current.previous),[a])}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=a=>{const{__scopeSelect:e,children:c,open:d,defaultOpen:h,onOpenChange:g,value:b,defaultValue:_e,onValueChange:et,dir:rt,name:st,autoComplete:$,disabled:_,required:nt,form:it}=a,ot=usePopperScope(e),[lt,at]=reactExports.useState(null),[ct,dt]=reactExports.useState(null),[ht,pt]=reactExports.useState(!1),ft=useDirection(rt),[mt,xt]=useControllableState({prop:d,defaultProp:h??!1,onChange:g,caller:SELECT_NAME}),[gt,Et]=useControllableState({prop:b,defaultProp:_e,onChange:et,caller:SELECT_NAME}),St=reactExports.useRef(null),Pt=lt?it||!!lt.closest("form"):!0,[Mt,Rt]=reactExports.useState(new Set),Dt=Array.from(Mt).map(Tt=>Tt.props.value).join(";");return jsxRuntimeExports.jsx(Root2$5,{...ot,children:jsxRuntimeExports.jsxs(SelectProvider,{required:nt,scope:e,trigger:lt,onTriggerChange:at,valueNode:ct,onValueNodeChange:dt,valueNodeHasChildren:ht,onValueNodeHasChildrenChange:pt,contentId:useId$1(),value:gt,onValueChange:Et,open:mt,onOpenChange:xt,dir:ft,triggerPointerDownPosRef:St,disabled:_,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:e,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:a.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Tt=>{Rt(It=>new Set(It).add(Tt))},[]),onNativeOptionRemove:reactExports.useCallback(Tt=>{Rt(It=>{const Vt=new Set(It);return Vt.delete(Tt),Vt})},[]),children:c})}),Pt?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:nt,tabIndex:-1,name:st,autoComplete:$,value:gt,onChange:Tt=>Et(Tt.target.value),disabled:_,form:it,children:[gt===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(Mt)]},Dt):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$2="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,disabled:d=!1,...h}=a,g=usePopperScope(c),b=useSelectContext(TRIGGER_NAME$2,c),_e=b.disabled||d,et=useComposedRefs(e,b.onTriggerChange),rt=useCollection(c),st=reactExports.useRef("touch"),[$,_,nt]=useTypeaheadSearch(ot=>{const lt=rt().filter(dt=>!dt.disabled),at=lt.find(dt=>dt.value===b.value),ct=findNextItem(lt,ot,at);ct!==void 0&&b.onValueChange(ct.value)}),it=ot=>{_e||(b.onOpenChange(!0),nt()),ot&&(b.triggerPointerDownPosRef.current={x:Math.round(ot.pageX),y:Math.round(ot.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...g,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":b.contentId,"aria-expanded":b.open,"aria-required":b.required,"aria-autocomplete":"none",dir:b.dir,"data-state":b.open?"open":"closed",disabled:_e,"data-disabled":_e?"":void 0,"data-placeholder":shouldShowPlaceholder(b.value)?"":void 0,...h,ref:et,onClick:composeEventHandlers(h.onClick,ot=>{ot.currentTarget.focus(),st.current!=="mouse"&&it(ot)}),onPointerDown:composeEventHandlers(h.onPointerDown,ot=>{st.current=ot.pointerType;const lt=ot.target;lt.hasPointerCapture(ot.pointerId)&&lt.releasePointerCapture(ot.pointerId),ot.button===0&&ot.ctrlKey===!1&&ot.pointerType==="mouse"&&(it(ot),ot.preventDefault())}),onKeyDown:composeEventHandlers(h.onKeyDown,ot=>{const lt=$.current!=="";!(ot.ctrlKey||ot.altKey||ot.metaKey)&&ot.key.length===1&&_(ot.key),!(lt&&ot.key===" ")&&OPEN_KEYS.includes(ot.key)&&(it(),ot.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$2;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,className:d,style:h,children:g,placeholder:b="",..._e}=a,et=useSelectContext(VALUE_NAME,c),{onValueNodeHasChildrenChange:rt}=et,st=g!==void 0,$=useComposedRefs(e,et.onValueNodeChange);return useLayoutEffect2(()=>{rt(st)},[rt,st]),jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:$,style:{pointerEvents:"none"},children:shouldShowPlaceholder(et.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:b}):g})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,children:d,...h}=a;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...h,ref:e,children:d||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=a=>jsxRuntimeExports.jsx(Portal$3,{asChild:!0,...a});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME$1="SelectContent",SelectContent$1=reactExports.forwardRef((a,e)=>{const c=useSelectContext(CONTENT_NAME$1,a.__scopeSelect),[d,h]=reactExports.useState();if(useLayoutEffect2(()=>{h(new DocumentFragment)},[]),!c.open){const g=d;return g?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:a.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:a.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:a.children})})}),g):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...a,ref:e})});SelectContent$1.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:h,onEscapeKeyDown:g,onPointerDownOutside:b,side:_e,sideOffset:et,align:rt,alignOffset:st,arrowPadding:$,collisionBoundary:_,collisionPadding:nt,sticky:it,hideWhenDetached:ot,avoidCollisions:lt,...at}=a,ct=useSelectContext(CONTENT_NAME$1,c),[dt,ht]=reactExports.useState(null),[pt,ft]=reactExports.useState(null),mt=useComposedRefs(e,Gt=>ht(Gt)),[xt,gt]=reactExports.useState(null),[Et,St]=reactExports.useState(null),Pt=useCollection(c),[Mt,Rt]=reactExports.useState(!1),Dt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(dt)return hideOthers(dt)},[dt]),useFocusGuards();const Tt=reactExports.useCallback(Gt=>{const[hn,...fn]=Pt().map(On=>On.ref.current),[gn]=fn.slice(-1),kn=document.activeElement;for(const On of Gt)if(On===kn||(On==null||On.scrollIntoView({block:"nearest"}),On===hn&&pt&&(pt.scrollTop=0),On===gn&&pt&&(pt.scrollTop=pt.scrollHeight),On==null||On.focus(),document.activeElement!==kn))return},[Pt,pt]),It=reactExports.useCallback(()=>Tt([xt,dt]),[Tt,xt,dt]);reactExports.useEffect(()=>{Mt&&It()},[Mt,It]);const{onOpenChange:Vt,triggerPointerDownPosRef:Bt}=ct;reactExports.useEffect(()=>{if(dt){let Gt={x:0,y:0};const hn=gn=>{var kn,On;Gt={x:Math.abs(Math.round(gn.pageX)-(((kn=Bt.current)==null?void 0:kn.x)??0)),y:Math.abs(Math.round(gn.pageY)-(((On=Bt.current)==null?void 0:On.y)??0))}},fn=gn=>{Gt.x<=10&&Gt.y<=10?gn.preventDefault():dt.contains(gn.target)||Vt(!1),document.removeEventListener("pointermove",hn),Bt.current=null};return Bt.current!==null&&(document.addEventListener("pointermove",hn),document.addEventListener("pointerup",fn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",hn),document.removeEventListener("pointerup",fn,{capture:!0})}}},[dt,Vt,Bt]),reactExports.useEffect(()=>{const Gt=()=>Vt(!1);return window.addEventListener("blur",Gt),window.addEventListener("resize",Gt),()=>{window.removeEventListener("blur",Gt),window.removeEventListener("resize",Gt)}},[Vt]);const[Ct,en]=useTypeaheadSearch(Gt=>{const hn=Pt().filter(kn=>!kn.disabled),fn=hn.find(kn=>kn.ref.current===document.activeElement),gn=findNextItem(hn,Gt,fn);gn&&setTimeout(()=>gn.ref.current.focus())}),sn=reactExports.useCallback((Gt,hn,fn)=>{const gn=!Dt.current&&!fn;(ct.value!==void 0&&ct.value===hn||gn)&&(gt(Gt),gn&&(Dt.current=!0))},[ct.value]),kt=reactExports.useCallback(()=>dt==null?void 0:dt.focus(),[dt]),Ut=reactExports.useCallback((Gt,hn,fn)=>{const gn=!Dt.current&&!fn;(ct.value!==void 0&&ct.value===hn||gn)&&St(Gt)},[ct.value]),Jt=d==="popper"?SelectPopperPosition:SelectItemAlignedPosition,tn=Jt===SelectPopperPosition?{side:_e,sideOffset:et,align:rt,alignOffset:st,arrowPadding:$,collisionBoundary:_,collisionPadding:nt,sticky:it,hideWhenDetached:ot,avoidCollisions:lt}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:c,content:dt,viewport:pt,onViewportChange:ft,itemRefCallback:sn,selectedItem:xt,onItemLeave:kt,itemTextRefCallback:Ut,focusSelectedItem:It,selectedItemText:Et,position:d,isPositioned:Mt,searchRef:Ct,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:ct.open,onMountAutoFocus:Gt=>{Gt.preventDefault()},onUnmountAutoFocus:composeEventHandlers(h,Gt=>{var hn;(hn=ct.trigger)==null||hn.focus({preventScroll:!0}),Gt.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:g,onPointerDownOutside:b,onFocusOutside:Gt=>Gt.preventDefault(),onDismiss:()=>ct.onOpenChange(!1),children:jsxRuntimeExports.jsx(Jt,{role:"listbox",id:ct.contentId,"data-state":ct.open?"open":"closed",dir:ct.dir,onContextMenu:Gt=>Gt.preventDefault(),...at,...tn,onPlaced:()=>Rt(!0),ref:mt,style:{display:"flex",flexDirection:"column",outline:"none",...at.style},onKeyDown:composeEventHandlers(at.onKeyDown,Gt=>{const hn=Gt.ctrlKey||Gt.altKey||Gt.metaKey;if(Gt.key==="Tab"&&Gt.preventDefault(),!hn&&Gt.key.length===1&&en(Gt.key),["ArrowUp","ArrowDown","Home","End"].includes(Gt.key)){let gn=Pt().filter(kn=>!kn.disabled).map(kn=>kn.ref.current);if(["ArrowUp","End"].includes(Gt.key)&&(gn=gn.slice().reverse()),["ArrowUp","ArrowDown"].includes(Gt.key)){const kn=Gt.target,On=gn.indexOf(kn);gn=gn.slice(On+1)}setTimeout(()=>Tt(gn)),Gt.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,onPlaced:d,...h}=a,g=useSelectContext(CONTENT_NAME$1,c),b=useSelectContentContext(CONTENT_NAME$1,c),[_e,et]=reactExports.useState(null),[rt,st]=reactExports.useState(null),$=useComposedRefs(e,mt=>st(mt)),_=useCollection(c),nt=reactExports.useRef(!1),it=reactExports.useRef(!0),{viewport:ot,selectedItem:lt,selectedItemText:at,focusSelectedItem:ct}=b,dt=reactExports.useCallback(()=>{if(g.trigger&&g.valueNode&&_e&&rt&&ot&&lt&&at){const mt=g.trigger.getBoundingClientRect(),xt=rt.getBoundingClientRect(),gt=g.valueNode.getBoundingClientRect(),Et=at.getBoundingClientRect();if(g.dir!=="rtl"){const kn=Et.left-xt.left,On=gt.left-kn,un=mt.left-On,Sn=mt.width+un,Ln=Math.max(Sn,xt.width),$n=window.innerWidth-CONTENT_MARGIN,Wn=clamp(On,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,$n-Ln)]);_e.style.minWidth=Sn+"px",_e.style.left=Wn+"px"}else{const kn=xt.right-Et.right,On=window.innerWidth-gt.right-kn,un=window.innerWidth-mt.right-On,Sn=mt.width+un,Ln=Math.max(Sn,xt.width),$n=window.innerWidth-CONTENT_MARGIN,Wn=clamp(On,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,$n-Ln)]);_e.style.minWidth=Sn+"px",_e.style.right=Wn+"px"}const St=_(),Pt=window.innerHeight-CONTENT_MARGIN*2,Mt=ot.scrollHeight,Rt=window.getComputedStyle(rt),Dt=parseInt(Rt.borderTopWidth,10),Tt=parseInt(Rt.paddingTop,10),It=parseInt(Rt.borderBottomWidth,10),Vt=parseInt(Rt.paddingBottom,10),Bt=Dt+Tt+Mt+Vt+It,Ct=Math.min(lt.offsetHeight*5,Bt),en=window.getComputedStyle(ot),sn=parseInt(en.paddingTop,10),kt=parseInt(en.paddingBottom,10),Ut=mt.top+mt.height/2-CONTENT_MARGIN,Jt=Pt-Ut,tn=lt.offsetHeight/2,Gt=lt.offsetTop+tn,hn=Dt+Tt+Gt,fn=Bt-hn;if(hn<=Ut){const kn=St.length>0&&lt===St[St.length-1].ref.current;_e.style.bottom="0px";const On=rt.clientHeight-ot.offsetTop-ot.offsetHeight,un=Math.max(Jt,tn+(kn?kt:0)+On+It),Sn=hn+un;_e.style.height=Sn+"px"}else{const kn=St.length>0&&lt===St[0].ref.current;_e.style.top="0px";const un=Math.max(Ut,Dt+ot.offsetTop+(kn?sn:0)+tn)+fn;_e.style.height=un+"px",ot.scrollTop=hn-Ut+ot.offsetTop}_e.style.margin=`${CONTENT_MARGIN}px 0`,_e.style.minHeight=Ct+"px",_e.style.maxHeight=Pt+"px",d==null||d(),requestAnimationFrame(()=>nt.current=!0)}},[_,g.trigger,g.valueNode,_e,rt,ot,lt,at,g.dir,d]);useLayoutEffect2(()=>dt(),[dt]);const[ht,pt]=reactExports.useState();useLayoutEffect2(()=>{rt&&pt(window.getComputedStyle(rt).zIndex)},[rt]);const ft=reactExports.useCallback(mt=>{mt&&it.current===!0&&(dt(),ct==null||ct(),it.current=!1)},[dt,ct]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:c,contentWrapper:_e,shouldExpandOnScrollRef:nt,onScrollButtonChange:ft,children:jsxRuntimeExports.jsx("div",{ref:et,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ht},children:jsxRuntimeExports.jsx(Primitive.div,{...h,ref:$,style:{boxSizing:"border-box",maxHeight:"100%",...h.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,align:d="start",collisionPadding:h=CONTENT_MARGIN,...g}=a,b=usePopperScope(c);return jsxRuntimeExports.jsx(Content$2,{...b,...g,ref:e,align:d,collisionPadding:h,style:{boxSizing:"border-box",...g.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,nonce:d,...h}=a,g=useSelectContentContext(VIEWPORT_NAME$1,c),b=useSelectViewportContext(VIEWPORT_NAME$1,c),_e=useComposedRefs(e,g.onViewportChange),et=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),jsxRuntimeExports.jsx(Collection.Slot,{scope:c,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...h,ref:_e,style:{position:"relative",flex:1,overflow:"hidden auto",...h.style},onScroll:composeEventHandlers(h.onScroll,rt=>{const st=rt.currentTarget,{contentWrapper:$,shouldExpandOnScrollRef:_}=b;if(_!=null&&_.current&&$){const nt=Math.abs(et.current-st.scrollTop);if(nt>0){const it=window.innerHeight-CONTENT_MARGIN*2,ot=parseFloat($.style.minHeight),lt=parseFloat($.style.height),at=Math.max(ot,lt);if(at<it){const ct=at+nt,dt=Math.min(it,ct),ht=ct-dt;$.style.height=dt+"px",$.style.bottom==="0px"&&(st.scrollTop=ht>0?ht:0,$.style.justifyContent="flex-end")}}}et.current=st.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=useId$1();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:c,id:h,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":h,...d,ref:e})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=useSelectGroupContext(LABEL_NAME,c);return jsxRuntimeExports.jsx(Primitive.div,{id:h.id,...d,ref:e})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME$1="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME$1),SelectItem$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,value:d,disabled:h=!1,textValue:g,...b}=a,_e=useSelectContext(ITEM_NAME$1,c),et=useSelectContentContext(ITEM_NAME$1,c),rt=_e.value===d,[st,$]=reactExports.useState(g??""),[_,nt]=reactExports.useState(!1),it=useComposedRefs(e,ct=>{var dt;return(dt=et.itemRefCallback)==null?void 0:dt.call(et,ct,d,h)}),ot=useId$1(),lt=reactExports.useRef("touch"),at=()=>{h||(_e.onValueChange(d),_e.onOpenChange(!1))};if(d==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:c,value:d,disabled:h,textId:ot,isSelected:rt,onItemTextChange:reactExports.useCallback(ct=>{$(dt=>dt||((ct==null?void 0:ct.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:c,value:d,disabled:h,textValue:st,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":ot,"data-highlighted":_?"":void 0,"aria-selected":rt&&_,"data-state":rt?"checked":"unchecked","aria-disabled":h||void 0,"data-disabled":h?"":void 0,tabIndex:h?void 0:-1,...b,ref:it,onFocus:composeEventHandlers(b.onFocus,()=>nt(!0)),onBlur:composeEventHandlers(b.onBlur,()=>nt(!1)),onClick:composeEventHandlers(b.onClick,()=>{lt.current!=="mouse"&&at()}),onPointerUp:composeEventHandlers(b.onPointerUp,()=>{lt.current==="mouse"&&at()}),onPointerDown:composeEventHandlers(b.onPointerDown,ct=>{lt.current=ct.pointerType}),onPointerMove:composeEventHandlers(b.onPointerMove,ct=>{var dt;lt.current=ct.pointerType,h?(dt=et.onItemLeave)==null||dt.call(et):lt.current==="mouse"&&ct.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(b.onPointerLeave,ct=>{var dt;ct.currentTarget===document.activeElement&&((dt=et.onItemLeave)==null||dt.call(et))}),onKeyDown:composeEventHandlers(b.onKeyDown,ct=>{var ht;((ht=et.searchRef)==null?void 0:ht.current)!==""&&ct.key===" "||(SELECTION_KEYS.includes(ct.key)&&at(),ct.key===" "&&ct.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME$1;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,className:d,style:h,...g}=a,b=useSelectContext(ITEM_TEXT_NAME,c),_e=useSelectContentContext(ITEM_TEXT_NAME,c),et=useSelectItemContext(ITEM_TEXT_NAME,c),rt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,c),[st,$]=reactExports.useState(null),_=useComposedRefs(e,at=>$(at),et.onItemTextChange,at=>{var ct;return(ct=_e.itemTextRefCallback)==null?void 0:ct.call(_e,at,et.value,et.disabled)}),nt=st==null?void 0:st.textContent,it=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:et.value,disabled:et.disabled,children:nt},et.value),[et.disabled,et.value,nt]),{onNativeOptionAdd:ot,onNativeOptionRemove:lt}=rt;return useLayoutEffect2(()=>(ot(it),()=>lt(it)),[ot,lt,it]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:et.textId,...g,ref:_}),et.isSelected&&b.valueNode&&!b.valueNodeHasChildren?reactDomExports.createPortal(g.children,b.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a;return useSelectItemContext(ITEM_INDICATOR_NAME,c).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...d,ref:e}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((a,e)=>{const c=useSelectContentContext(SCROLL_UP_BUTTON_NAME,a.__scopeSelect),d=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,a.__scopeSelect),[h,g]=reactExports.useState(!1),b=useComposedRefs(e,d.onScrollButtonChange);return useLayoutEffect2(()=>{if(c.viewport&&c.isPositioned){let _e=function(){const rt=et.scrollTop>0;g(rt)};const et=c.viewport;return _e(),et.addEventListener("scroll",_e),()=>et.removeEventListener("scroll",_e)}},[c.viewport,c.isPositioned]),h?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...a,ref:b,onAutoScroll:()=>{const{viewport:_e,selectedItem:et}=c;_e&&et&&(_e.scrollTop=_e.scrollTop-et.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((a,e)=>{const c=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),d=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,a.__scopeSelect),[h,g]=reactExports.useState(!1),b=useComposedRefs(e,d.onScrollButtonChange);return useLayoutEffect2(()=>{if(c.viewport&&c.isPositioned){let _e=function(){const rt=et.scrollHeight-et.clientHeight,st=Math.ceil(et.scrollTop)<rt;g(st)};const et=c.viewport;return _e(),et.addEventListener("scroll",_e),()=>et.removeEventListener("scroll",_e)}},[c.viewport,c.isPositioned]),h?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...a,ref:b,onAutoScroll:()=>{const{viewport:_e,selectedItem:et}=c;_e&&et&&(_e.scrollTop=_e.scrollTop+et.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,onAutoScroll:d,...h}=a,g=useSelectContentContext("SelectScrollButton",c),b=reactExports.useRef(null),_e=useCollection(c),et=reactExports.useCallback(()=>{b.current!==null&&(window.clearInterval(b.current),b.current=null)},[]);return reactExports.useEffect(()=>()=>et(),[et]),useLayoutEffect2(()=>{var st;const rt=_e().find($=>$.ref.current===document.activeElement);(st=rt==null?void 0:rt.ref.current)==null||st.scrollIntoView({block:"nearest"})},[_e]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...h,ref:e,style:{flexShrink:0,...h.style},onPointerDown:composeEventHandlers(h.onPointerDown,()=>{b.current===null&&(b.current=window.setInterval(d,50))}),onPointerMove:composeEventHandlers(h.onPointerMove,()=>{var rt;(rt=g.onItemLeave)==null||rt.call(g),b.current===null&&(b.current=window.setInterval(d,50))}),onPointerLeave:composeEventHandlers(h.onPointerLeave,()=>{et()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...d,ref:e})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((a,e)=>{const{__scopeSelect:c,...d}=a,h=usePopperScope(c),g=useSelectContext(ARROW_NAME,c),b=useSelectContentContext(ARROW_NAME,c);return g.open&&b.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...h,...d,ref:e}):null});SelectArrow.displayName=ARROW_NAME;var BUBBLE_INPUT_NAME$3="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:a,value:e,...c},d)=>{const h=reactExports.useRef(null),g=useComposedRefs(d,h),b=usePrevious(e);return reactExports.useEffect(()=>{const _e=h.current;if(!_e)return;const et=window.HTMLSelectElement.prototype,st=Object.getOwnPropertyDescriptor(et,"value").set;if(b!==e&&st){const $=new Event("change",{bubbles:!0});st.call(_e,e),_e.dispatchEvent($)}},[b,e]),jsxRuntimeExports.jsx(Primitive.select,{...c,style:{...VISUALLY_HIDDEN_STYLES,...c.style},ref:g,defaultValue:e})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME$3;function shouldShowPlaceholder(a){return a===""||a===void 0}function useTypeaheadSearch(a){const e=useCallbackRef$1(a),c=reactExports.useRef(""),d=reactExports.useRef(0),h=reactExports.useCallback(b=>{const _e=c.current+b;e(_e),function et(rt){c.current=rt,window.clearTimeout(d.current),rt!==""&&(d.current=window.setTimeout(()=>et(""),1e3))}(_e)},[e]),g=reactExports.useCallback(()=>{c.current="",window.clearTimeout(d.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),[c,h,g]}function findNextItem(a,e,c){const h=e.length>1&&Array.from(e).every(rt=>rt===e[0])?e[0]:e,g=c?a.indexOf(c):-1;let b=wrapArray(a,Math.max(g,0));h.length===1&&(b=b.filter(rt=>rt!==c));const et=b.find(rt=>rt.textValue.toLowerCase().startsWith(h.toLowerCase()));return et!==c?et:void 0}function wrapArray(a,e){return a.map((c,d)=>a[(e+d)%a.length])}var Root2$2=Select$1,Trigger$1=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2$2,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Trigger$1,{ref:d,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[e,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$1.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:c,className:cn("flex cursor-default items-center justify-center py-1",a),...e,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:c,className:cn("flex cursor-default items-center justify-center py-1",a),...e,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:a,children:e,position:c="popper",...d},h)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:h,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1",c==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Label,{ref:c,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...e}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Item,{ref:d,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:e})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Separator,{ref:c,className:cn("-mx-1 my-1 h-px bg-muted",a),...e}));SelectSeparator.displayName=Separator.displayName;const submitFeedback=async a=>{const e=localStorage.getItem("authToken");if(!e)throw new Error("Authentication required");const c=await fetch(buildApiUrl(API_ENDPOINTS.FEEDBACK.SUBMIT),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(a)});if(!c.ok)try{const d=await c.json();throw new Error(d.message||"Failed to submit feedback")}catch{throw new Error(`Failed to submit feedback: ${c.statusText}`)}try{return await c.json()}catch{throw new Error("Invalid response from server")}};function FeedbackDialog({isCollapsed:a=!1}){const[e,c]=reactExports.useState(!1),[d,h]=reactExports.useState(""),[g,b]=reactExports.useState(""),[_e,et]=reactExports.useState(!1),{toast:rt}=useToast(),st=async()=>{if(!d.trim()){rt({title:"Feedback required",description:"Please provide your feedback before submitting.",variant:"destructive"});return}if(!g){rt({title:"Feedback type required",description:"Please select a feedback type before submitting.",variant:"destructive"});return}try{et(!0),await submitFeedback({feedbackType:g,feedback:d.trim()}),rt({title:"Feedback submitted",description:"Thank you for your feedback! We appreciate your input."}),h(""),b(""),c(!1)}catch($){rt({title:"Submission failed",description:$ instanceof Error?$.message:"Failed to submit feedback. Please try again.",variant:"destructive"})}finally{et(!1)}};return jsxRuntimeExports.jsxs(Dialog,{open:e,onOpenChange:c,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",className:"w-full justify-start gap-2 text-muted-foreground hover:text-foreground min-w-0",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-4 h-4 flex-shrink-0"}),!a&&jsxRuntimeExports.jsx("span",{className:"truncate",children:"Feedback"})]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-5 h-5"}),"Share Your Feedback"]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"feedback-type",children:"What type of feedback is this?"}),jsxRuntimeExports.jsxs(Select,{value:g,onValueChange:b,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select feedback type"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"bug",children:"Bug"}),jsxRuntimeExports.jsx(SelectItem,{value:"feature",children:"Feature Add On"}),jsxRuntimeExports.jsx(SelectItem,{value:"layout",children:"Layout Change"}),jsxRuntimeExports.jsx(SelectItem,{value:"other",children:"Other"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"feedback",children:"Your feedback"}),jsxRuntimeExports.jsx(Textarea,{id:"feedback",value:d,onChange:$=>h($.target.value),placeholder:"Tell us what you think about Sparqit...",className:"min-h-[120px] resize-none"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>c(!1),disabled:_e,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:st,disabled:!d.trim()||_e,className:"gap-2",children:_e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"}),"Submit Feedback"]})})]})]})]})]})}function AppSidebar({workspaces:a,onWorkspaceSelect:e,onCreateWorkspace:c,onDeleteWorkspace:d,onRenameWorkspace:h,onHomeSelect:g,isHomeActive:b,isCollapsed:_e=!1,onToggleCollapse:et}){const[rt,st]=reactExports.useState(null),[$,_]=reactExports.useState(null),[nt,it]=reactExports.useState(""),[ot,lt]=reactExports.useState(!1),[at,ct]=reactExports.useState(!1),[dt,ht]=reactExports.useState(!1),[pt,ft]=reactExports.useState(""),[mt,xt]=reactExports.useState(!0),{user:gt,logout:Et}=useAuth(),{toast:St}=useToast(),Pt=()=>{pt.trim()&&c&&(c(pt.trim()),ft(""),ht(!1))},Mt=()=>{Et()},Rt=async It=>{try{lt(!0),await d(It.id),st(null)}catch{St({title:"Delete failed",description:"Failed to delete workspace",variant:"destructive"})}finally{lt(!1)}},Dt=async It=>{try{ct(!0),await h(It.id,nt.trim()),_(null),it("")}catch{St({title:"Rename failed",description:"Failed to rename workspace",variant:"destructive"})}finally{ct(!1)}},Tt=({children:It,content:Vt})=>_e?jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:It}),jsxRuntimeExports.jsx(TooltipContent,{side:"right",className:"ml-2",children:Vt})]})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:It});return jsxRuntimeExports.jsxs("div",{className:`h-screen bg-surface border-r border-border flex flex-col transition-all duration-300 ease-in-out ${_e?"w-16":"w-60"}`,style:{width:_e?"4rem":"15rem",minWidth:_e?"4rem":"15rem",maxWidth:_e?"4rem":"15rem"},children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b border-border flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between",children:_e?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full space-y-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center flex-shrink-0 hover:opacity-80 transition-opacity cursor-pointer",children:jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 text-primary-foreground"})}),jsxRuntimeExports.jsx("button",{onClick:et,className:"p-2 hover:bg-surface-hover rounded-lg transition-colors",children:jsxRuntimeExports.jsx(Menu$1,{className:"w-6 h-6 text-foreground"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{onClick:g,className:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 text-primary-foreground"})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Sparqit"})]}),et&&jsxRuntimeExports.jsx(Tt,{content:"Collapse sidebar",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:et,className:"h-8 w-8 p-0 hover:bg-surface-hover",children:jsxRuntimeExports.jsx(PanelLeftClose,{className:"w-4 h-4"})})})]})})}),!_e&&jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:jsxRuntimeExports.jsx("div",{className:"p-4 min-w-0",children:jsxRuntimeExports.jsxs("div",{className:"space-y-1 min-w-0",children:[!_e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2 min-w-0",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>xt(!mt),className:"flex items-center gap-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors min-w-0",children:[jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 transition-transform flex-shrink-0 ${mt?"rotate-0":"-rotate-90"}`}),jsxRuntimeExports.jsx("span",{className:"truncate",children:"Workspaces"})]}),c&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>ht(!0),className:"h-6 w-6 p-0 hover:bg-surface-hover",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})})]}),mt&&jsxRuntimeExports.jsx("div",{className:"space-y-1",children:a.map(It=>jsxRuntimeExports.jsx(Tt,{content:It.name,children:jsxRuntimeExports.jsx("div",{className:`w-full px-3 py-2 rounded-lg transition-quick group ${It.isActive?"bg-primary text-primary-foreground shadow-sm":"text-foreground hover:bg-surface-hover"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e(It.id),className:"flex items-center gap-2 flex-1 text-left overflow-hidden",children:[jsxRuntimeExports.jsx("span",{className:"text-lg flex-shrink-0",children:getWorkspaceEmoji(It)}),!_e&&jsxRuntimeExports.jsx("span",{className:"text-sm font-medium truncate overflow-hidden",children:It.name})]}),!_e&&jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx(EllipsisVertical,{className:"w-3 h-3"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>_(It),children:[jsxRuntimeExports.jsx(PenLine,{className:"mr-2 h-4 w-4"}),"Rename"]}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>st(It),className:"text-red-600",children:[jsxRuntimeExports.jsx(Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})},It.id))})]})})}),!_e&&jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-border space-y-1 flex-shrink-0 min-w-0",children:[jsxRuntimeExports.jsx(FeedbackDialog,{isCollapsed:_e}),jsxRuntimeExports.jsx(Tt,{content:"Settings",children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",className:"w-full justify-start gap-2 text-muted-foreground hover:text-foreground min-w-0",children:[jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4 flex-shrink-0"}),!_e&&jsxRuntimeExports.jsx("span",{className:"truncate",children:"Settings"})]})}),jsxRuntimeExports.jsx(Tt,{content:"Help & Tools",children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",className:"w-full justify-start gap-2 text-muted-foreground hover:text-foreground min-w-0",children:[jsxRuntimeExports.jsx(CircleHelp,{className:"w-4 h-4 flex-shrink-0"}),!_e&&jsxRuntimeExports.jsx("span",{className:"truncate",children:"Help & Tools"})]})}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t border-border mt-4",children:jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"ghost",className:"w-full justify-start gap-2 text-foreground hover:text-foreground min-w-0",children:[jsxRuntimeExports.jsxs(Avatar,{className:"w-6 h-6 flex-shrink-0",children:[jsxRuntimeExports.jsx(AvatarImage,{src:gt==null?void 0:gt.avatar}),jsxRuntimeExports.jsx(AvatarFallback,{children:jsxRuntimeExports.jsx(User,{className:"w-3 h-3"})})]}),!_e&&jsxRuntimeExports.jsx("span",{className:"text-sm font-medium truncate",children:(gt==null?void 0:gt.name)||"User"})]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"w-56",children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium leading-none",children:(gt==null?void 0:gt.name)||"Unknown User"}),jsxRuntimeExports.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:(gt==null?void 0:gt.email)||"No email"})]})}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:Mt,children:[jsxRuntimeExports.jsx(LogOut,{className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Log out"})]})]})]})})]}),jsxRuntimeExports.jsx(Dialog,{open:dt,onOpenChange:ht,children:jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Create New Workspace"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"workspace-name",children:"Workspace Name"}),jsxRuntimeExports.jsx(Input,{id:"workspace-name",value:pt,onChange:It=>ft(It.target.value),placeholder:"Enter workspace name",onKeyDown:It=>{It.key==="Enter"&&Pt()}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>ht(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:Pt,disabled:!pt.trim(),children:"Create"})]})]})]})}),jsxRuntimeExports.jsx(AlertDialog,{open:!!rt,onOpenChange:()=>st(null),children:jsxRuntimeExports.jsxs(AlertDialogContent,{children:[jsxRuntimeExports.jsxs(AlertDialogHeader,{children:[jsxRuntimeExports.jsx(AlertDialogTitle,{children:"Delete Workspace"}),jsxRuntimeExports.jsxs(AlertDialogDescription,{children:['Are you sure you want to delete "',rt==null?void 0:rt.name,'"? This action cannot be undone.']})]}),jsxRuntimeExports.jsxs(AlertDialogFooter,{children:[jsxRuntimeExports.jsx(AlertDialogCancel,{children:"Cancel"}),jsxRuntimeExports.jsx(AlertDialogAction,{onClick:()=>rt&&Rt(rt),disabled:ot,className:"bg-red-600 hover:bg-red-700",children:ot?"Deleting...":"Delete"})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:!!$,onOpenChange:()=>_(null),children:jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Rename Workspace"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"rename-workspace-name",children:"Workspace Name"}),jsxRuntimeExports.jsx(Input,{id:"rename-workspace-name",value:nt,onChange:It=>it(It.target.value),placeholder:"Enter new workspace name",onKeyDown:It=>{It.key==="Enter"&&$&&Dt($)}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>_(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>$&&Dt($),disabled:!nt.trim()||at,children:at?"Renaming...":"Rename"})]})]})]})})]})}function TodoList({todos:a,onToggleTodo:e,onDeleteTodo:c,onUpdateTodo:d,onAddTodo:h,workspaceId:g,workspaceName:b,showWorkspaceInfo:_e=!1,workspaces:et=[],isDashboard:rt=!1,theme:st}){const[$,_]=reactExports.useState(!1),[nt,it]=reactExports.useState(""),[ot,lt]=reactExports.useState(""),[at,ct]=reactExports.useState(""),[dt,ht]=reactExports.useState("todo"),[pt,ft]=reactExports.useState({}),[mt,xt]=reactExports.useState(!1),[gt,Et]=reactExports.useState(!1),[St,Pt]=reactExports.useState(null),[Mt,Rt]=reactExports.useState(""),[Dt,Tt]=reactExports.useState(""),{toast:It}=useToast(),Vt=(un=!1)=>{if(st)return un?st.colors.muted:st.colors.text},Bt=a.filter(un=>!un.completed),Ct=a.filter(un=>un.completed),en=async()=>{if(nt.trim()){if(rt&&!at){It({title:"Select Workspace",description:"Please select a workspace to add a todo",variant:"destructive"});return}try{await h({text:nt.trim(),dueDate:ot||void 0,workspaceId:rt?at:void 0}),it(""),lt(""),ct(""),_(!1)}catch{It({title:"Error adding todo",description:"Failed to add todo",variant:"destructive"})}}},sn=()=>{_(!1),it(""),lt(""),ct("")},kt=async un=>{xt(!0);try{await c(un)}catch{It({title:"Error deleting todo",description:"Failed to delete todo",variant:"destructive"})}finally{xt(!1)}},Ut=un=>{Pt(un.id),Rt(un.text),Tt(un.dueDate||""),setTimeout(()=>{const Sn=document.querySelector(`[data-todo-id="${un.id}"] input`);Sn&&(Sn.focus(),Sn.select())},10)},Jt=un=>{Pt(un.id),Rt(un.text),Tt(un.dueDate||""),setTimeout(()=>{const Sn=document.querySelector(`[data-todo-id="${un.id}"] input[type="date"]`);Sn&&Sn.focus()},10)},tn=async()=>{if(!St)return;const un=Mt.trim(),Sn=Dt,Ln=a.find($n=>$n.id===St);if(!(!un&&!Sn)){Et(!0);try{await d(St,{text:un?Mt.trim():Ln==null?void 0:Ln.text,dueDate:Sn?Dt:void 0}),Pt(null),Rt(""),Tt("")}catch{It({title:"Error updating todo",description:"Failed to update todo",variant:"destructive"})}finally{Et(!1)}}},Gt=()=>{Pt(null),Rt(""),Tt("")},hn=un=>{const Sn=new Date(un),Ln=new Date,$n=Sn.getTime()-Ln.getTime(),Wn=Math.ceil($n/(1e3*60*60*24));return Wn<0?`Overdue by ${Math.abs(Wn)} days`:Wn===0?"Due today":Wn===1?"Due tomorrow":`Due in ${Wn} days`},fn=un=>{const Sn=new Date(un),Ln=new Date,$n=Sn.getTime()-Ln.getTime(),Wn=Math.ceil($n/(1e3*60*60*24));return Wn<0?"text-red-600":Wn===0?"text-orange-600":Wn===1?"text-yellow-600":"text-navy"},gn=un=>{const Sn=["bg-blue-100 text-blue-700 border-blue-200","bg-purple-100 text-purple-700 border-purple-200","bg-green-100 text-green-700 border-green-200","bg-orange-100 text-orange-700 border-orange-200","bg-pink-100 text-pink-700 border-pink-200","bg-indigo-100 text-indigo-700 border-indigo-200","bg-teal-100 text-teal-700 border-teal-200","bg-red-100 text-red-700 border-red-200","bg-yellow-100 text-yellow-700 border-yellow-200","bg-cyan-100 text-cyan-700 border-cyan-200","bg-emerald-100 text-emerald-700 border-emerald-200","bg-amber-100 text-amber-700 border-amber-200","bg-rose-100 text-rose-700 border-rose-200","bg-sky-100 text-sky-700 border-sky-200","bg-violet-100 text-violet-700 border-violet-200"],Ln=new Map;if(et.forEach((Wn,Pn)=>{Ln.has(Wn.id)||Ln.set(Wn.id,Sn[Pn%Sn.length])}),Ln.has(un))return Ln.get(un);const $n=un.split("").reduce((Wn,Pn)=>(Wn=(Wn<<5)-Wn+Pn.charCodeAt(0),Wn&Wn),0);return Sn[Math.abs($n)%Sn.length]},kn=(un,Sn)=>{const $n=un.touches[0].clientX,Wn=or=>{const Xt=or.touches[0].clientX,on=$n-Xt;on>0&&ft(vn=>({...vn,[Sn]:Math.min(on,100)}))},Pn=()=>{(pt[Sn]||0)>50&&kt(Sn),ft(Kt=>({...Kt,[Sn]:0})),document.removeEventListener("touchmove",Wn),document.removeEventListener("touchend",Pn)};document.addEventListener("touchmove",Wn),document.addEventListener("touchend",Pn)},On=({todo:un,isCompleted:Sn=!1})=>{const Ln=pt[un.id]||0,$n=St===un.id,Wn=Pn=>{Sn||(Pn.dataTransfer.setData("application/json",JSON.stringify({type:"todo",item:un})),Pn.dataTransfer.effectAllowed="move")};return jsxRuntimeExports.jsxs("div",{className:`relative flex items-center gap-3 p-2 rounded-md hover:bg-muted/50 transition-all duration-200 ${Sn?"opacity-75":""}`,style:{transform:`translateX(-${Ln}px)`},onTouchStart:Pn=>kn(Pn,un.id),draggable:!Sn,onDragStart:Wn,children:[Ln>0&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 bottom-0 bg-red-500 text-white flex items-center justify-center px-4 rounded-r-md",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>e(un.id),className:"flex-shrink-0",children:un.completed?jsxRuntimeExports.jsx(SquareCheckBig,{className:"w-5 h-5",style:{color:st==null?void 0:st.colors.primary}}):jsxRuntimeExports.jsx(Square,{className:"w-5 h-5 hover:text-foreground",style:{color:Vt(!0)}})}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col",children:$n?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input,{value:Mt,onChange:Pn=>Rt(Pn.target.value),placeholder:"Todo text",className:"text-sm border-2 border-primary/50 focus:border-primary transition-colors","data-todo-id":un.id,onKeyDown:Pn=>{Pn.key==="Enter"?tn():Pn.key==="Escape"&&Gt()},onBlur:Pn=>{if(Pn.relatedTarget&&(Pn.relatedTarget.tagName==="INPUT"||Pn.relatedTarget.tagName==="BUTTON"||Pn.relatedTarget.closest("button")))return;const or=Mt.trim()&&Mt!==un.text,Kt=Dt!==un.dueDate;or||Kt?tn():!Mt.trim()&&!Dt&&Gt()},autoFocus:!0}),gt&&jsxRuntimeExports.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-3 h-3 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{type:"date",value:Dt,onChange:Pn=>Tt(Pn.target.value),className:"text-xs border border-border focus:border-primary focus:ring-1 focus:ring-primary",onKeyDown:Pn=>{Pn.key==="Enter"?tn():Pn.key==="Escape"&&Gt()},autoFocus:!0})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:Gt,disabled:gt,className:"h-6 text-xs text-muted-foreground hover:text-foreground",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"group relative",onClick:()=>!Sn&&Ut(un),children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium cursor-text hover:bg-muted/30 px-1 py-0.5 rounded transition-colors",style:{color:Vt()},children:un.text}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-muted/20 opacity-0 group-hover:opacity-100 transition-opacity rounded pointer-events-none"}),jsxRuntimeExports.jsx("div",{className:"absolute right-1 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),!$n&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",className:"absolute right-6 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity h-6 w-6 p-0 hover:bg-red-100 hover:text-red-600",onClick:Pn=>{Pn.stopPropagation(),kt(un.id)},disabled:mt,children:mt?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-red-600"}):jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[_e&&un.workspaceName&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium border ${gn(un.workspaceId||"default")}`,style:{color:Vt()},children:un.workspaceName}),un.dueDate&&jsxRuntimeExports.jsx("span",{style:{color:Vt(!0)},children:"•"})]}),un.dueDate&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 cursor-pointer hover:bg-muted/50 px-1 py-0.5 rounded transition-colors",onClick:Pn=>{Pn.stopPropagation(),Jt(un)},title:"Click to edit date",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-3 h-3",style:{color:fn(un.dueDate)}}),jsxRuntimeExports.jsx("span",{className:"font-medium",style:{color:fn(un.dueDate)},children:hn(un.dueDate)})]})]})]})})]})};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display flex items-center gap-2",style:{color:Vt()},children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),"To-Do List"]}),!$&&jsxRuntimeExports.jsx(Button,{onClick:()=>_(!0),size:"sm",variant:"outline",className:"h-8 w-8 p-0",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex border-b",style:{borderColor:st==null?void 0:st.colors.border},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ht("todo"),className:`flex-1 py-2 px-4 text-sm font-medium transition-colors ${dt==="todo"?"border-b-2":"hover:text-foreground"}`,style:{color:dt==="todo"?st==null?void 0:st.colors.primary:Vt(!0),borderColor:dt==="todo"?st==null?void 0:st.colors.primary:"transparent"},children:["To Do (",Bt.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ht("completed"),className:`flex-1 py-2 px-4 text-sm font-medium transition-colors ${dt==="completed"?"border-b-2":"hover:text-foreground"}`,style:{color:dt==="completed"?st==null?void 0:st.colors.primary:Vt(!0),borderColor:dt==="completed"?st==null?void 0:st.colors.primary:"transparent"},children:["Completed (",Ct.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"h-48 overflow-y-auto",children:dt==="todo"?jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Bt.length===0&&!$?jsxRuntimeExports.jsx("p",{className:"text-sm text-center py-4",style:{color:Vt(!0)},children:"No active todos. Click the + button to add one!"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Bt.sort((un,Sn)=>new Date(un.createdAt).getTime()-new Date(Sn.createdAt).getTime()).map(un=>jsxRuntimeExports.jsx(On,{todo:un},un.id)),$&&jsxRuntimeExports.jsx("div",{className:"space-y-2 p-2 border border-border rounded-md bg-muted/20",children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(Input,{value:nt,onChange:un=>it(un.target.value),placeholder:"Enter your todo...",className:"text-sm border-2 border-primary/50 focus:border-primary transition-colors",onKeyDown:un=>{un.key==="Enter"?en():un.key==="Escape"&&sn()},onBlur:()=>{nt.trim()?en():sn()},autoFocus:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[rt&&et.length>0&&jsxRuntimeExports.jsxs("select",{value:at,onChange:un=>ct(un.target.value),className:"text-xs border border-border rounded px-2 py-1 bg-background",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select workspace"}),et.map(un=>jsxRuntimeExports.jsx("option",{value:un.id,children:un.name},un.id))]}),jsxRuntimeExports.jsx(Input,{type:"date",value:ot,onChange:un=>lt(un.target.value),className:"text-xs border border-border",onKeyDown:un=>{un.key==="Enter"?en():un.key==="Escape"&&sn()}}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:sn,className:"h-6 text-xs text-muted-foreground hover:text-foreground",children:"Cancel"})]})]})})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Ct.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-center py-4",style:{color:Vt(!0)},children:"No completed todos yet."}):Ct.sort((un,Sn)=>new Date(un.createdAt).getTime()-new Date(Sn.createdAt).getTime()).map(un=>jsxRuntimeExports.jsx(On,{todo:un,isCompleted:!0},un.id))})})]})}function Planner({todos:a,workspaces:e,onScheduleItem:c,onRemoveScheduledItem:d,userId:h}){const[g,b]=reactExports.useState(()=>{const Dt=h?`planner-scheduled-items-${h}`:"planner-scheduled-items",Tt=localStorage.getItem(Dt);return Tt?JSON.parse(Tt):[]}),[_e,et]=reactExports.useState(()=>{const Dt=new Date,Tt=new Date(Dt);return Tt.setDate(Dt.getDate()-Dt.getDay()),Tt}),[rt,st]=reactExports.useState(null),[$,_]=reactExports.useState(null),[nt,it]=reactExports.useState({x:0,y:0}),ot=["6:00 AM","7:00 AM","8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM","6:00 PM","7:00 PM","8:00 PM","9:00 PM"],lt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],at=()=>{const Dt=[];for(let Tt=0;Tt<7;Tt++){const It=new Date(_e);It.setDate(_e.getDate()+Tt),Dt.push(It)}return Dt},ct=Dt=>{Dt.preventDefault(),Dt.dataTransfer.dropEffect="move"},dt=(Dt,Tt,It)=>{Dt.preventDefault();const Vt=Dt.dataTransfer.getData("application/json");if(Vt)try{const Bt=JSON.parse(Vt),Ct=ot.indexOf(Tt),en={id:`${Bt.type}-${Bt.item.id}-${Date.now()}`,type:Bt.type,itemId:Bt.item.id,title:Bt.type==="todo"?Bt.item.text:Bt.item.name,workspaceName:Bt.type==="todo"?Bt.item.workspaceName:Bt.item.name,timeSlot:Tt,date:It,duration:1,startTimeIndex:Ct};Et([...g,en]),c(en)}catch(Bt){console.error("Error parsing dragged data:",Bt)}},ht=Dt=>{Et(g.filter(Tt=>Tt.id!==Dt)),d(Dt)},pt=Dt=>Dt.toLocaleDateString("en-US",{month:"short",day:"numeric"}),ft=Dt=>{const Tt=new Date;return Dt.toDateString()===Tt.toDateString()},mt=Dt=>{const Tt=["bg-blue-100 text-blue-700 border-blue-200","bg-purple-100 text-purple-700 border-purple-200","bg-green-100 text-green-700 border-green-200","bg-orange-100 text-orange-700 border-orange-200","bg-pink-100 text-pink-700 border-pink-200","bg-indigo-100 text-indigo-700 border-indigo-200","bg-teal-100 text-teal-700 border-teal-200","bg-red-100 text-red-700 border-red-200","bg-yellow-100 text-yellow-700 border-yellow-200","bg-cyan-100 text-cyan-700 border-cyan-200","bg-emerald-100 text-emerald-700 border-emerald-200","bg-amber-100 text-amber-700 border-amber-200","bg-rose-100 text-rose-700 border-rose-200","bg-sky-100 text-sky-700 border-sky-200","bg-violet-100 text-violet-700 border-violet-200"],It=new Map;if(e.forEach((Bt,Ct)=>{It.has(Bt.id)||It.set(Bt.id,Tt[Ct%Tt.length])}),It.has(Dt))return It.get(Dt);const Vt=Dt.split("").reduce((Bt,Ct)=>(Bt=(Bt<<5)-Bt+Ct.charCodeAt(0),Bt&Bt),0);return Tt[Math.abs(Vt)%Tt.length]},xt=Dt=>{if(Dt.type==="workspace")return mt(Dt.itemId);{const Tt=a.find(It=>It.id===Dt.itemId);return Tt&&Tt.workspaceId?mt(Tt.workspaceId):"bg-blue-100 text-blue-800 border-blue-200"}},gt=Dt=>{const Tt=h?`planner-scheduled-items-${h}`:"planner-scheduled-items";localStorage.setItem(Tt,JSON.stringify(Dt))},Et=Dt=>{b(Dt),gt(Dt)},St=(Dt,Tt,It)=>{Dt.stopPropagation(),st(Tt),Dt.currentTarget.setAttribute("data-resize-type",It)},Pt=()=>{st(null)};reactExports.useEffect(()=>{const Dt=It=>{var Vt;if(rt){const Bt=g.find(Ct=>Ct.id===rt);if(Bt)if(((Vt=document.querySelector("[data-resize-type]"))==null?void 0:Vt.getAttribute("data-resize-type"))==="top"){const en=document.querySelector(".planner-grid");if(en){const sn=en.getBoundingClientRect(),kt=It.clientY-sn.top,Jt=Math.max(0,Math.min(ot.length-1,Math.floor(kt/60))),tn=Math.max(1,Bt.startTimeIndex+Bt.duration-Jt),Gt=ot[Jt];Et(g.map(hn=>hn.id===rt?{...hn,startTimeIndex:Jt,timeSlot:Gt,duration:tn}:hn))}}else{const en=document.querySelector(".planner-grid");if(en){const sn=en.getBoundingClientRect(),kt=It.clientY-sn.top,Jt=Math.max(0,Math.min(ot.length-1,Math.floor(kt/60))),tn=Math.max(1,Jt-Bt.startTimeIndex+1);Et(g.map(Gt=>Gt.id===rt?{...Gt,duration:tn}:Gt))}}}if($&&g.find(Ct=>Ct.id===$)){const Ct=document.querySelector(".planner-grid");if(Ct){const en=Ct.getBoundingClientRect(),sn=It.clientX-en.left,kt=It.clientY-en.top,Ut=en.width/8,Jt=Math.max(0,Math.min(6,Math.floor((sn-Ut)/Ut))),Gt=Math.max(0,Math.min(ot.length-1,Math.floor(kt/60))),hn=ot[Gt],fn=at()[Jt].toISOString().split("T")[0];Et(g.map(gn=>gn.id===$?{...gn,timeSlot:hn,startTimeIndex:Gt,date:fn}:gn))}}},Tt=()=>{rt&&st(null),$&&_(null)};return(rt||$)&&(document.addEventListener("mousemove",Dt),document.addEventListener("mouseup",Tt)),()=>{document.removeEventListener("mousemove",Dt),document.removeEventListener("mouseup",Tt)}},[rt,$,g,ot]);const Mt=(Dt,Tt)=>{Dt.stopPropagation(),_(Tt);const It=Dt.currentTarget.getBoundingClientRect();it({x:Dt.clientX-It.left,y:Dt.clientY-It.top})},Rt=()=>{_(null)};return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display text-foreground flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5"}),"Weekly Planner"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const Dt=new Date(_e);Dt.setDate(_e.getDate()-7),et(Dt)},children:"← Previous"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{const Dt=new Date(_e);Dt.setDate(_e.getDate()+7),et(Dt)},children:"Next →"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg overflow-hidden planner-grid",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-8 gap-px bg-border",children:[jsxRuntimeExports.jsx("div",{className:"bg-background p-2",children:jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Time"})}),at().map(Dt=>jsxRuntimeExports.jsxs("div",{className:"bg-background p-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:lt[Dt.getDay()]}),jsxRuntimeExports.jsx("div",{className:`text-sm font-medium ${ft(Dt)?"text-primary":"text-foreground"}`,children:pt(Dt)})]},Dt.toISOString()))]}),ot.map((Dt,Tt)=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-8 gap-px bg-border",children:[jsxRuntimeExports.jsxs("div",{className:"bg-background p-2 flex items-center",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3 h-3 mr-1 text-muted-foreground"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:Dt})]}),at().map(It=>{const Vt=It.toISOString().split("T")[0],Bt=g.filter(Ct=>Ct.date===Vt&&Ct.startTimeIndex===Tt);return jsxRuntimeExports.jsx("div",{className:`bg-background p-2 min-h-[60px] relative ${ft(It)?"bg-primary/5":""}`,onDragOver:ct,onDrop:Ct=>dt(Ct,Dt,Vt),onMouseUp:()=>{rt&&Pt(),$&&Rt()},children:Bt.map(Ct=>jsxRuntimeExports.jsxs("div",{className:`absolute left-0 right-0 mx-1 rounded text-xs cursor-move border ${xt(Ct)}`,style:{top:"2px",height:`${Ct.duration*60-4}px`,zIndex:rt===Ct.id||$===Ct.id?10:1},onMouseDown:en=>Mt(en,Ct.id),children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-current hover:opacity-20 transition-opacity",onMouseDown:en=>St(en,Ct.id,"top"),title:"Resize top"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 cursor-ns-resize hover:bg-current hover:opacity-20 transition-opacity",onMouseDown:en=>St(en,Ct.id,"bottom"),title:"Resize bottom"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-full p-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium truncate",children:Ct.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs opacity-75",children:[Ct.workspaceName&&jsxRuntimeExports.jsx("span",{className:"truncate",children:Ct.workspaceName}),Ct.duration>1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ct.workspaceName&&jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsxs("span",{children:[Ct.duration,"h"]})]}),Ct.type==="todo"&&Ct.workspaceName&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-60",children:"todo"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",className:"h-4 w-4 p-0 hover:bg-red-100 hover:text-red-600",onClick:en=>{en.stopPropagation(),ht(Ct.id)},children:jsxRuntimeExports.jsx(X,{className:"w-3 h-3"})})})]})]},Ct.id))},It.toISOString())})]},Dt))]})]})}const DashboardIndex=()=>{const a=useNavigate(),[e,c]=reactExports.useState([]),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState([]),[_e,et]=reactExports.useState([]),[rt,st]=reactExports.useState(!1),[$,_]=reactExports.useState(""),[nt,it]=reactExports.useState(!1),[ot,lt]=reactExports.useState([]),{toast:at}=useToast(),{isCollapsed:ct,toggleCollapse:dt}=useSidebar(),{user:ht}=useAuth();reactExports.useEffect(()=>{(async()=>{try{const Dt=localStorage.getItem("authToken"),Tt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"}}),It=await Tt.json();Tt.ok&&It.success?c(It.data.map(Vt=>({id:Vt.id.toString(),name:Vt.name,description:Vt.description||null,isActive:!1}))):at({title:"Error fetching workspaces",description:It.message||"Failed to load workspaces",variant:"destructive"})}catch{at({title:"Error fetching workspaces",description:"Network error occurred",variant:"destructive"})}})()},[at]),reactExports.useEffect(()=>{const Rt=async()=>{try{const Dt=localStorage.getItem("authToken"),Tt=[];for(const It of e){const Vt=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.LIST(It.id)),{headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"}}),Bt=await Vt.json();if(Vt.ok&&Bt.success){const Ct=Bt.data.map(en=>({...en,workspaceId:It.id,workspaceName:It.name}));Tt.push(...Ct)}}h(Tt)}catch(Dt){console.error("Error fetching todos:",Dt)}};e.length>0&&Rt()},[e]),reactExports.useEffect(()=>{const Rt=async()=>{try{const Dt=localStorage.getItem("authToken"),Tt=[];for(const It of e){const Vt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.FILES(It.id)),{headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"}}),Bt=await Vt.json();if(Vt.ok&&Bt.success){const en=Bt.data.filter(sn=>{var kt,Ut;return((kt=sn.metadata)==null?void 0:kt.type)!=="generated"||!((Ut=sn.metadata)!=null&&Ut.sourceFileId)}).map(sn=>({...sn,workspaceName:It.name}));Tt.push(...en)}}b(Tt)}catch(Dt){console.error("Error fetching files:",Dt)}};e.length>0&&Rt()},[e]),reactExports.useEffect(()=>{(async()=>{console.log("🔍 [DASHBOARD-DEBUG] Fetching recent chat sessions");try{const Dt=localStorage.getItem("authToken"),Tt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.RECENT_SESSIONS+"?limit=10"),{headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"}}),It=await Tt.json();Tt.ok&&It.success?(console.log(`✅ [DASHBOARD-DEBUG] Received ${It.data.length} chat sessions:`,It.data),et(It.data)):console.error("Error fetching recent chat sessions:",It.message)}catch(Dt){console.error("Error fetching recent chat sessions:",Dt)}})()},[]);const pt=Rt=>{a(`/workspace/${Rt}`)},ft=()=>{},mt=Rt=>{lt(Dt=>[...Dt,Rt]),at({title:"Item scheduled",description:`${Rt.title} has been scheduled for ${Rt.timeSlot} on ${Rt.date}`})},xt=Rt=>{lt(Dt=>Dt.filter(Tt=>Tt.id!==Rt)),at({title:"Item removed",description:"Item has been removed from the schedule"})},gt=async Rt=>{try{const Dt=localStorage.getItem("authToken"),Tt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{method:"POST",headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"},body:JSON.stringify({name:Rt})}),It=await Tt.json();if(Tt.ok&&It.success){const Vt={id:It.data.id.toString(),name:It.data.name,description:It.data.description||null,isActive:!1};c([...e,Vt]),_(""),st(!1),at({title:"Workspace created",description:`Workspace "${Rt}" has been created successfully!`})}else at({title:"Error creating workspace",description:It.message||"Failed to create workspace",variant:"destructive"})}catch{at({title:"Error creating workspace",description:"Network error occurred",variant:"destructive"})}},Et=async Rt=>{var Dt;if(Rt.workspaceId)try{const Tt=localStorage.getItem("authToken"),It=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.CREATE(Rt.workspaceId)),{method:"POST",headers:{Authorization:`Bearer ${Tt}`,"Content-Type":"application/json"},body:JSON.stringify({text:Rt.text,dueDate:Rt.dueDate||null})}),Vt=await It.json();if(It.ok&&Vt.success){const Bt={...Vt.data,workspaceId:Rt.workspaceId,workspaceName:((Dt=e.find(Ct=>Ct.id===Rt.workspaceId))==null?void 0:Dt.name)||""};h([Bt,...d]),at({title:"Todo added",description:"Todo has been added successfully!"})}else at({title:"Error adding todo",description:Vt.message||"Failed to add todo",variant:"destructive"})}catch{at({title:"Error adding todo",description:"Network error occurred",variant:"destructive"})}},St=async Rt=>{try{const Dt=d.find(Bt=>Bt.id===Rt);if(!Dt)return;const Tt=localStorage.getItem("authToken"),It=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.TOGGLE(Dt.workspaceId,Rt)),{method:"PUT",headers:{Authorization:`Bearer ${Tt}`,"Content-Type":"application/json"}}),Vt=await It.json();It.ok&&Vt.success?h(d.map(Bt=>Bt.id===Rt?{...Bt,completed:!Bt.completed}:Bt)):at({title:"Error updating todo",description:Vt.message||"Failed to update todo",variant:"destructive"})}catch{at({title:"Error updating todo",description:"Network error occurred",variant:"destructive"})}},Pt=async Rt=>{try{const Dt=d.find(Bt=>Bt.id===Rt);if(!Dt)return;const Tt=localStorage.getItem("authToken"),It=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.DELETE(Dt.workspaceId,Rt)),{method:"DELETE",headers:{Authorization:`Bearer ${Tt}`,"Content-Type":"application/json"}}),Vt=await It.json();It.ok&&Vt.success?(h(d.filter(Bt=>Bt.id!==Rt)),at({title:"Todo deleted",description:"Todo has been deleted successfully!"})):at({title:"Error deleting todo",description:Vt.message||"Failed to delete todo",variant:"destructive"})}catch{at({title:"Error deleting todo",description:"Network error occurred",variant:"destructive"})}},Mt=async(Rt,Dt)=>{try{const Tt=d.find(Ct=>Ct.id===Rt);if(!Tt)return;const It=localStorage.getItem("authToken"),Vt=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.UPDATE(Tt.workspaceId,Rt)),{method:"PUT",headers:{Authorization:`Bearer ${It}`,"Content-Type":"application/json"},body:JSON.stringify(Dt)}),Bt=await Vt.json();Vt.ok&&Bt.success?h(d.map(Ct=>Ct.id===Rt?{...Ct,...Dt}:Ct)):at({title:"Error updating todo",description:Bt.message||"Failed to update todo",variant:"destructive"})}catch{at({title:"Error updating todo",description:"Network error occurred",variant:"destructive"})}};return d.filter(Rt=>!Rt.completed),d.filter(Rt=>Rt.completed),g.sort((Rt,Dt)=>new Date(Dt.createdAt).getTime()-new Date(Rt.createdAt).getTime()).slice(0,5),jsxRuntimeExports.jsxs("div",{className:"flex flex-1 h-screen",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:e,onWorkspaceSelect:pt,onCreateWorkspace:gt,onDeleteWorkspace:()=>{},onRenameWorkspace:()=>{},onHomeSelect:ft,isHomeActive:!0,isCollapsed:ct,onToggleCollapse:dt}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-background transition-all duration-300 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"bg-surface/50 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"px-8 pt-12 pb-8 pl-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl font-display text-foreground text-balance",children:["Welcome to Sparqit",ht!=null&&ht.name?`, ${ht.name.split(" ")[0]}`:""]}),jsxRuntimeExports.jsx("div",{className:"text-4xl animate-pulse",children:"✨"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-muted-foreground text-pretty",children:"Study less. Learn more. Enjoy the ride."})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-8 space-y-6 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 -mt-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/2 bg-card border border-border rounded-lg p-6",children:jsxRuntimeExports.jsx(TodoList,{todos:d,onToggleTodo:St,onDeleteTodo:Pt,onUpdateTodo:Mt,onAddTodo:Et,showWorkspaceInfo:!0,workspaces:e,isDashboard:!0})}),jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-1/2 bg-card border border-border rounded-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display text-foreground flex items-center gap-2",children:[jsxRuntimeExports.jsx(FolderOpen,{className:"w-5 h-5"}),"Your Workspaces"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>st(!0),size:"sm",variant:"outline",className:"gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"New Workspace"]})]}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto",children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map(Rt=>{const Dt=Tt=>{Tt.dataTransfer.setData("application/json",JSON.stringify({type:"workspace",item:Rt})),Tt.dataTransfer.effectAllowed="move"};return jsxRuntimeExports.jsxs("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>pt(Rt.id),draggable:!0,onDragStart:Dt,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl",children:getWorkspaceEmoji(Rt)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-display font-semibold text-foreground truncate",children:Rt.name}),Rt.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground truncate",children:Rt.description})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[jsxRuntimeExports.jsxs("span",{children:[d.filter(Tt=>Tt.workspaceId===Rt.id&&!Tt.completed).length," active todos"]}),jsxRuntimeExports.jsxs("span",{children:[g.filter(Tt=>Tt.workspaceId.toString()===Rt.id).length," files"]})]})]},Rt.id)})})})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-card border border-border rounded-lg p-6",children:jsxRuntimeExports.jsx(Planner,{todos:d,workspaces:e,onScheduleItem:mt,onRemoveScheduledItem:xt,userId:ht==null?void 0:ht.id})})]}),jsxRuntimeExports.jsx(Dialog,{open:rt,onOpenChange:st,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Create New Workspace"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"workspace-name",children:"Workspace Name"}),jsxRuntimeExports.jsx(Input,{id:"workspace-name",value:$,onChange:Rt=>_(Rt.target.value),placeholder:"Enter workspace name...",onKeyDown:Rt=>{Rt.key==="Enter"&&$.trim()&&gt($.trim())}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{st(!1),_("")},children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>gt($.trim()),disabled:!$.trim()||nt,children:nt?"Creating...":"Create Workspace"})]})]})]})})]})]})};var TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,onValueChange:h,defaultValue:g,orientation:b="horizontal",dir:_e,activationMode:et="automatic",...rt}=a,st=useDirection(_e),[$,_]=useControllableState({prop:d,onChange:h,defaultProp:g??"",caller:TABS_NAME});return jsxRuntimeExports.jsx(TabsProvider,{scope:c,baseId:useId$1(),value:$,onValueChange:_,orientation:b,dir:st,activationMode:et,children:jsxRuntimeExports.jsx(Primitive.div,{dir:st,"data-orientation":b,...rt,ref:e})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,loop:d=!0,...h}=a,g=useTabsContext(TAB_LIST_NAME,c),b=useRovingFocusGroupScope$1(c);return jsxRuntimeExports.jsx(Root$2,{asChild:!0,...b,orientation:g.orientation,dir:g.dir,loop:d,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":g.orientation,...h,ref:e})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$1="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,disabled:h=!1,...g}=a,b=useTabsContext(TRIGGER_NAME$1,c),_e=useRovingFocusGroupScope$1(c),et=makeTriggerId(b.baseId,d),rt=makeContentId(b.baseId,d),st=d===b.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!h,active:st,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":st,"aria-controls":rt,"data-state":st?"active":"inactive","data-disabled":h?"":void 0,disabled:h,id:et,...g,ref:e,onMouseDown:composeEventHandlers(a.onMouseDown,$=>{!h&&$.button===0&&$.ctrlKey===!1?b.onValueChange(d):$.preventDefault()}),onKeyDown:composeEventHandlers(a.onKeyDown,$=>{[" ","Enter"].includes($.key)&&b.onValueChange(d)}),onFocus:composeEventHandlers(a.onFocus,()=>{const $=b.activationMode!=="manual";!st&&!h&&$&&b.onValueChange(d)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME="TabsContent",TabsContent$1=reactExports.forwardRef((a,e)=>{const{__scopeTabs:c,value:d,forceMount:h,children:g,...b}=a,_e=useTabsContext(CONTENT_NAME,c),et=makeTriggerId(_e.baseId,d),rt=makeContentId(_e.baseId,d),st=d===_e.value,$=reactExports.useRef(st);return reactExports.useEffect(()=>{const _=requestAnimationFrame(()=>$.current=!1);return()=>cancelAnimationFrame(_)},[]),jsxRuntimeExports.jsx(Presence,{present:h||st,children:({present:_})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":st?"active":"inactive","data-orientation":_e.orientation,role:"tabpanel","aria-labelledby":et,hidden:!_,id:rt,tabIndex:0,...b,ref:e,style:{...a.style,animationDuration:$.current?"0s":void 0},children:_&&g})})});TabsContent$1.displayName=CONTENT_NAME;function makeTriggerId(a,e){return`${a}-trigger-${e}`}function makeContentId(a,e){return`${a}-content-${e}`}var Root2$1=Tabs$1,List=TabsList$1,Trigger=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2$1,TabsList=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(List,{ref:c,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...e}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Trigger,{ref:c,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...e}));TabsTrigger.displayName=Trigger.displayName;const TabsContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Content,{ref:c,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...e}));TabsContent.displayName=Content.displayName;function UrlPasteDialog({workspaceId:a,workspaceName:e,onSuccess:c,trigger:d}){const[h,g]=reactExports.useState(!1),[b,_e]=reactExports.useState("url"),[et,rt]=reactExports.useState(""),[st,$]=reactExports.useState(""),[_,nt]=reactExports.useState(!1),[it,ot]=reactExports.useState(!1),[lt,at]=reactExports.useState(0),[ct,dt]=reactExports.useState(null),{toast:ht}=useToast(),pt=St=>{const Pt=St.target.value;rt(Pt),Pt?/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(Pt)?dt("youtube"):Pt.match(/^https?:\/\//)?dt("website"):dt(null):dt(null)},ft=async()=>{if(!et.trim()||!a){ht({title:"Invalid URL",description:"Please enter a valid URL and ensure you're in a workspace.",variant:"destructive"});return}try{new URL(et)}catch{ht({title:"Invalid URL",description:"Please enter a valid URL format (e.g., https://example.com)",variant:"destructive"});return}nt(!0),at(0);try{const St=localStorage.getItem("authToken"),Pt=setInterval(()=>{at(Dt=>Dt>=90?(clearInterval(Pt),90):Dt+10)},500),Mt=await fetch(buildApiUrl(API_ENDPOINTS.URLS.PROCESS(a)),{method:"POST",headers:{Authorization:`Bearer ${St}`,"Content-Type":"application/json"},body:JSON.stringify({url:et.trim()})});clearInterval(Pt),at(100);const Rt=await Mt.json();Mt.ok&&Rt.success?(ht({title:"URL processed successfully!",description:`${Rt.data.urlContent.title} has been added to ${e||"your workspace"}`}),rt(""),g(!1),at(0),dt(null),c&&c()):ht({title:"Processing failed",description:Rt.message||"An error occurred while processing the URL.",variant:"destructive"})}catch{ht({title:"Processing failed",description:"Network error occurred while processing the URL.",variant:"destructive"})}finally{nt(!1),at(0)}},mt=async()=>{if(!st.trim()||!a){ht({title:"Invalid text",description:"Please enter some text and ensure you're in a workspace.",variant:"destructive"});return}ot(!0);try{const St=localStorage.getItem("authToken"),Pt=`${Date.now()}_pasted_text.txt`,Mt=st,Rt=Buffer.from(Mt,"utf8"),Dt=new FormData;Dt.append("file",new Blob([Rt],{type:"text/plain"}),Pt);const Tt=await fetch(buildApiUrl(API_ENDPOINTS.FILES.UPLOAD(a)),{method:"POST",headers:{Authorization:`Bearer ${St}`},body:Dt}),It=await Tt.json();Tt.ok&&It.success?(ht({title:"Text saved successfully!",description:`Your text has been saved to ${e||"your workspace"}`}),$(""),g(!1),c&&c()):ht({title:"Save failed",description:It.message||"An error occurred while saving the text.",variant:"destructive"})}catch{ht({title:"Save failed",description:"Network error occurred while saving the text.",variant:"destructive"})}finally{ot(!1)}},xt=async()=>{try{const St=await navigator.clipboard.readText();St&&(rt(St),pt({target:{value:St}}))}catch{ht({title:"Clipboard access denied",description:"Please paste the URL manually.",variant:"destructive"})}},gt=async()=>{try{const St=await navigator.clipboard.readText();St&&$(St)}catch{ht({title:"Clipboard access denied",description:"Please paste the text manually.",variant:"destructive"})}},Et=jsxRuntimeExports.jsx("div",{className:"group cursor-pointer",children:jsxRuntimeExports.jsxs("div",{className:"bg-card border border-border rounded-xl p-8 text-center hover:shadow-md transition-all duration-300 hover:border-primary/20",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:bg-primary/20 transition-colors",children:jsxRuntimeExports.jsx(Link2,{className:"w-6 h-6 text-primary"})}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Paste"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"YouTube, website, text"})]})});return jsxRuntimeExports.jsxs(Dialog,{open:h,onOpenChange:g,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:d||Et}),jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Paste URL or Content"}),jsxRuntimeExports.jsx(DialogDescription,{children:"Paste a YouTube video URL, website URL, or plain text to save to your workspace"})]}),jsxRuntimeExports.jsxs(Tabs,{value:b,onValueChange:_e,children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"url",children:"URL"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"text",children:"Text"})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"url",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"url-input",children:"URL"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{id:"url-input",value:et,onChange:pt,placeholder:"https://youtube.com/watch?v=... or https://example.com",className:"flex-1"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:xt,disabled:_,children:"Paste"})]}),ct&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:ct==="youtube"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Youtube,{className:"w-4 h-4 text-red-500"}),"YouTube Video"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Globe,{className:"w-4 h-4 text-blue-500"}),"Website"]})})]}),_&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsxs("span",{children:["Processing ",ct==="youtube"?"YouTube video":"website","..."]}),jsxRuntimeExports.jsxs("span",{children:[lt,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${lt}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-end",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{g(!1),rt(""),at(0),dt(null)},disabled:_,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:ft,disabled:!et.trim()||_,children:_?"Processing...":"Process URL"})]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"text",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"text-input",children:"Text Content"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Textarea,{id:"text-input",value:st,onChange:St=>$(St.target.value),placeholder:"Paste or type your text content here...",className:"flex-1 min-h-[120px]"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:gt,disabled:it,children:"Paste"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-end",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{g(!1),$("")},disabled:it,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:mt,disabled:!st.trim()||it,children:it?"Saving...":"Save Text"})]})]})]})]})]})}const Card=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",a),...e}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("flex flex-col space-y-1.5 p-6",a),...e}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("h3",{ref:c,className:cn("text-2xl font-semibold leading-none tracking-tight",a),...e}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("p",{ref:c,className:cn("text-sm text-muted-foreground",a),...e}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("p-6 pt-0",a),...e}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("flex items-center p-6 pt-0",a),...e}));CardFooter.displayName="CardFooter";var RADIO_NAME="Radio",[createRadioContext,createRadioScope]=createContextScope(RADIO_NAME),[RadioProvider,useRadioContext]=createRadioContext(RADIO_NAME),Radio=reactExports.forwardRef((a,e)=>{const{__scopeRadio:c,name:d,checked:h=!1,required:g,disabled:b,value:_e="on",onCheck:et,form:rt,...st}=a,[$,_]=reactExports.useState(null),nt=useComposedRefs(e,lt=>_(lt)),it=reactExports.useRef(!1),ot=$?rt||!!$.closest("form"):!0;return jsxRuntimeExports.jsxs(RadioProvider,{scope:c,checked:h,disabled:b,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"radio","aria-checked":h,"data-state":getState$2(h),"data-disabled":b?"":void 0,disabled:b,value:_e,...st,ref:nt,onClick:composeEventHandlers(a.onClick,lt=>{h||et==null||et(),ot&&(it.current=lt.isPropagationStopped(),it.current||lt.stopPropagation())})}),ot&&jsxRuntimeExports.jsx(RadioBubbleInput,{control:$,bubbles:!it.current,name:d,value:_e,checked:h,required:g,disabled:b,form:rt,style:{transform:"translateX(-100%)"}})]})});Radio.displayName=RADIO_NAME;var INDICATOR_NAME$1="RadioIndicator",RadioIndicator=reactExports.forwardRef((a,e)=>{const{__scopeRadio:c,forceMount:d,...h}=a,g=useRadioContext(INDICATOR_NAME$1,c);return jsxRuntimeExports.jsx(Presence,{present:d||g.checked,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$2(g.checked),"data-disabled":g.disabled?"":void 0,...h,ref:e})})});RadioIndicator.displayName=INDICATOR_NAME$1;var BUBBLE_INPUT_NAME$2="RadioBubbleInput",RadioBubbleInput=reactExports.forwardRef(({__scopeRadio:a,control:e,checked:c,bubbles:d=!0,...h},g)=>{const b=reactExports.useRef(null),_e=useComposedRefs(b,g),et=usePrevious(c),rt=useSize(e);return reactExports.useEffect(()=>{const st=b.current;if(!st)return;const $=window.HTMLInputElement.prototype,nt=Object.getOwnPropertyDescriptor($,"checked").set;if(et!==c&&nt){const it=new Event("click",{bubbles:d});nt.call(st,c),st.dispatchEvent(it)}},[et,c,d]),jsxRuntimeExports.jsx(Primitive.input,{type:"radio","aria-hidden":!0,defaultChecked:c,...h,tabIndex:-1,ref:_e,style:{...h.style,...rt,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});RadioBubbleInput.displayName=BUBBLE_INPUT_NAME$2;function getState$2(a){return a?"checked":"unchecked"}var ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RADIO_GROUP_NAME="RadioGroup",[createRadioGroupContext,createRadioGroupScope]=createContextScope(RADIO_GROUP_NAME,[createRovingFocusGroupScope,createRadioScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),useRadioScope=createRadioScope(),[RadioGroupProvider,useRadioGroupContext]=createRadioGroupContext(RADIO_GROUP_NAME),RadioGroup$1=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,name:d,defaultValue:h,value:g,required:b=!1,disabled:_e=!1,orientation:et,dir:rt,loop:st=!0,onValueChange:$,..._}=a,nt=useRovingFocusGroupScope(c),it=useDirection(rt),[ot,lt]=useControllableState({prop:g,defaultProp:h??null,onChange:$,caller:RADIO_GROUP_NAME});return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:c,name:d,required:b,disabled:_e,value:ot,onValueChange:lt,children:jsxRuntimeExports.jsx(Root$2,{asChild:!0,...nt,orientation:et,dir:it,loop:st,children:jsxRuntimeExports.jsx(Primitive.div,{role:"radiogroup","aria-required":b,"aria-orientation":et,"data-disabled":_e?"":void 0,dir:it,..._,ref:e})})})});RadioGroup$1.displayName=RADIO_GROUP_NAME;var ITEM_NAME="RadioGroupItem",RadioGroupItem$1=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,disabled:d,...h}=a,g=useRadioGroupContext(ITEM_NAME,c),b=g.disabled||d,_e=useRovingFocusGroupScope(c),et=useRadioScope(c),rt=reactExports.useRef(null),st=useComposedRefs(e,rt),$=g.value===h.value,_=reactExports.useRef(!1);return reactExports.useEffect(()=>{const nt=ot=>{ARROW_KEYS.includes(ot.key)&&(_.current=!0)},it=()=>_.current=!1;return document.addEventListener("keydown",nt),document.addEventListener("keyup",it),()=>{document.removeEventListener("keydown",nt),document.removeEventListener("keyup",it)}},[]),jsxRuntimeExports.jsx(Item$1,{asChild:!0,..._e,focusable:!b,active:$,children:jsxRuntimeExports.jsx(Radio,{disabled:b,required:g.required,checked:$,...et,...h,name:g.name,ref:st,onCheck:()=>g.onValueChange(h.value),onKeyDown:composeEventHandlers(nt=>{nt.key==="Enter"&&nt.preventDefault()}),onFocus:composeEventHandlers(h.onFocus,()=>{var nt;_.current&&((nt=rt.current)==null||nt.click())})})})});RadioGroupItem$1.displayName=ITEM_NAME;var INDICATOR_NAME2="RadioGroupIndicator",RadioGroupIndicator=reactExports.forwardRef((a,e)=>{const{__scopeRadioGroup:c,...d}=a,h=useRadioScope(c);return jsxRuntimeExports.jsx(RadioIndicator,{...h,...d,ref:e})});RadioGroupIndicator.displayName=INDICATOR_NAME2;var Root2=RadioGroup$1,Item2=RadioGroupItem$1,Indicator=RadioGroupIndicator;const RadioGroup=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root2,{className:cn("grid gap-2",a),...e,ref:c}));RadioGroup.displayName=Root2.displayName;const RadioGroupItem=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Item2,{ref:c,className:cn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...e,children:jsxRuntimeExports.jsx(Indicator,{className:"flex items-center justify-center",children:jsxRuntimeExports.jsx(Circle,{className:"h-2.5 w-2.5 fill-current text-current"})})}));RadioGroupItem.displayName=Item2.displayName;const categoryOptions=[{value:"Slides",label:"Slides",icon:Presentation,description:"Presentation slides and lecture materials"},{value:"Notes",label:"Notes",icon:FileText,description:"Study notes and summaries"},{value:"Homeworks",label:"Homeworks",icon:FileCheck,description:"Homework assignments and problem sets"},{value:"Exams",label:"Exams",icon:GraduationCap,description:"Exam papers and test materials"},{value:"Syllabus",label:"Syllabus",icon:BookMarked,description:"Course syllabus and outlines"},{value:"Others",label:"Others",icon:CircleHelp,description:"Other academic materials"}],CategorySelectionDialog=({isOpen:a,onClose:e,onConfirm:c,fileName:d})=>{const[h,g]=reactExports.useState(""),b=()=>{h&&(c(h),g(""))},_e=()=>{g(""),e()};return jsxRuntimeExports.jsx(Dialog,{open:a,onOpenChange:_e,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Select Category"}),jsxRuntimeExports.jsxs(DialogDescription,{children:["Please select the category for your uploaded file: ",jsxRuntimeExports.jsx("strong",{children:d})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx(RadioGroup,{value:h,onValueChange:g,children:categoryOptions.map(et=>{const rt=et.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx(RadioGroupItem,{value:et.value,id:et.value}),jsxRuntimeExports.jsxs(Label$2,{htmlFor:et.value,className:"flex items-center space-x-2 cursor-pointer",children:[jsxRuntimeExports.jsx(rt,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:et.label}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:et.description})]})]})]},et.value)})})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:_e,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:b,disabled:!h,children:"Confirm"})]})]})})},FileUpload=({workspaceId:a,onUploadComplete:e})=>{const[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState([]),[b,_e]=reactExports.useState([]),[et,rt]=reactExports.useState(""),[st,$]=reactExports.useState(!1),[_,nt]=reactExports.useState(0),[it,ot]=reactExports.useState(!1),[lt,at]=reactExports.useState(null),[ct,dt]=reactExports.useState("Others"),ht=reactExports.useRef(null),pt=reactExports.useRef(null),{uploadFile:ft}=useFile(),{toast:mt}=useToast(),xt=Ct=>{if(!Ct)return;const en=Array.from(Ct).filter(sn=>sn.type==="application/pdf");if(en.length===0){mt({title:"Error",description:"Please select PDF files only",variant:"destructive"});return}en.length===1?(at(en[0]),ot(!0)):(gt(en[0],"Others"),en.length>1&&mt({title:"Multiple files",description:"Please upload files one at a time to select categories",variant:"destructive"}))},gt=(Ct,en)=>{const sn=[{file:Ct,progress:0,status:"uploading"}];g(kt=>[...kt,...sn]),Pt(Ct,sn.length-1,en)},Et=Ct=>{lt&&(gt(lt,Ct),at(null),ot(!1))},St=()=>{at(null),ot(!1)},Pt=async(Ct,en,sn)=>{try{const kt=setInterval(()=>{g(Jt=>Jt.map((tn,Gt)=>Gt===en&&tn.status==="uploading"?{...tn,progress:Math.min(tn.progress+10,90)}:tn))},100),Ut=await ft(a,Ct,sn);clearInterval(kt),Ut.success?(g(Jt=>Jt.map((tn,Gt)=>Gt===en?{...tn,progress:100,status:"success"}:tn)),mt({title:"Success",description:`${Ct.name} uploaded successfully`}),e==null||e()):(g(Jt=>Jt.map((tn,Gt)=>Gt===en?{...tn,status:"error",error:Ut.error}:tn)),mt({title:"Error",description:Ut.error||"Failed to upload file",variant:"destructive"}))}catch{g(Ut=>Ut.map((Jt,tn)=>tn===en?{...Jt,status:"error",error:"Upload failed"}:Jt)),mt({title:"Error",description:"Failed to upload file",variant:"destructive"})}},Mt=Ct=>{if(!Ct)return;const en=["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/tiff","image/webp","application/pdf"],sn=Array.from(Ct).filter(kt=>en.includes(kt.type)?kt.type==="application/pdf"&&kt.size>20*1024*1024||kt.type!=="application/pdf"&&kt.size>10*1024*1024?(mt({title:"File too large",description:"Maximum size is 10MB for images and 20MB for PDFs.",variant:"destructive"}),!1):!0:(mt({title:"Invalid file type",description:"Please select image or PDF files only.",variant:"destructive"}),!1));if(sn.length>0){const kt=sn.map(Ut=>({file:Ut,progress:0,status:"uploading"}));_e(Ut=>[...Ut,...kt])}},Rt=async()=>{if(b.length===0){mt({title:"Error",description:"Please select files to convert",variant:"destructive"});return}$(!0),nt(0);try{const Ct=localStorage.getItem("authToken"),en=new FormData;b.forEach(kt=>en.append("files",kt.file)),et.trim()&&en.append("pdfFileName",et.trim()),en.append("directSave","true"),en.append("category",ct);const sn=new XMLHttpRequest;sn.upload.addEventListener("progress",kt=>{if(kt.lengthComputable){const Ut=Math.round(kt.loaded/kt.total*50);nt(Ut)}}),sn.addEventListener("load",()=>{if(sn.status===200||sn.status===201)try{const kt=JSON.parse(sn.responseText);kt.success?(nt(100),console.log("Handwriting conversion and save response:",kt.data),mt({title:"Success",description:kt.message||"Handwriting converted and saved successfully"}),_e([]),rt(""),e&&e()):mt({title:"Error",description:kt.message||"Failed to convert handwriting",variant:"destructive"})}catch{mt({title:"Error",description:"Failed to parse response",variant:"destructive"})}else mt({title:"Error",description:"Failed to convert handwriting",variant:"destructive"});$(!1)}),sn.addEventListener("error",()=>{mt({title:"Error",description:"Network error occurred",variant:"destructive"}),$(!1)}),sn.open("POST",buildApiUrl(API_ENDPOINTS.HANDWRITING.UPLOAD(a.toString()))),sn.setRequestHeader("Authorization",`Bearer ${Ct}`),sn.send(en)}catch{mt({title:"Error",description:"Failed to upload files",variant:"destructive"}),$(!1)}},Dt=Ct=>{g(en=>en.filter((sn,kt)=>kt!==Ct))},Tt=Ct=>{_e(en=>en.filter((sn,kt)=>kt!==Ct))},It=Ct=>{Ct.preventDefault(),d(!0)},Vt=Ct=>{Ct.preventDefault(),d(!1)},Bt=Ct=>{if(Ct===0)return"0 Bytes";const en=1024,sn=["Bytes","KB","MB","GB"],kt=Math.floor(Math.log(Ct)/Math.log(en));return parseFloat((Ct/Math.pow(en,kt)).toFixed(2))+" "+sn[kt]};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Card,{className:"w-full",children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"h-5 w-5"}),"Upload Files"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Choose between direct PDF upload or convert handwritten content to LaTeX PDF"})]}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-4",children:jsxRuntimeExports.jsxs(Tabs,{defaultValue:"direct",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"direct",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4"}),"Direct Upload"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"handwriting",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(PenTool,{className:"h-4 w-4"}),"Handwriting"]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"direct",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${c?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:It,onDragLeave:Vt,onDrop:Ct=>{Ct.preventDefault(),d(!1),xt(Ct.dataTransfer.files)},onClick:()=>{var Ct;return(Ct=ht.current)==null?void 0:Ct.click()},children:[jsxRuntimeExports.jsx(Upload,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop PDF files here"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse files"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 mr-2"}),"Select PDF Files"]})]}),jsxRuntimeExports.jsx("input",{ref:ht,type:"file",multiple:!0,accept:".pdf",onChange:Ct=>xt(Ct.target.files),className:"hidden"}),h.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Uploading Files"}),h.map((Ct,en)=>jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:Ct.file.name}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["(",Bt(Ct.file.size),")"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Ct.status==="success"&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 text-green-500"}),Ct.status==="error"&&jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 text-red-500"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>Dt(en),children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]})]}),Ct.status==="error"&&Ct.error&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-1",children:Ct.error})]},en))]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"handwriting",className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${c?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:It,onDragLeave:Vt,onDrop:Ct=>{Ct.preventDefault(),d(!1),Mt(Ct.dataTransfer.files)},onClick:()=>{var Ct;return(Ct=pt.current)==null?void 0:Ct.click()},children:[jsxRuntimeExports.jsx(PenTool,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-gray-700 mb-2",children:"Drop handwritten images here"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"or click to browse files (images or PDFs)"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",children:[jsxRuntimeExports.jsx(Image$2,{className:"h-4 w-4 mr-2"}),"Select Images/PDFs"]})]}),jsxRuntimeExports.jsx("input",{ref:pt,type:"file",multiple:!0,accept:"image/*,.pdf",onChange:Ct=>Mt(Ct.target.files),className:"hidden"}),b.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Category"}),jsxRuntimeExports.jsxs("select",{value:ct,onChange:Ct=>dt(Ct.target.value),className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground",children:[jsxRuntimeExports.jsx("option",{value:"Others",children:"Others"}),jsxRuntimeExports.jsx("option",{value:"Notes",children:"Notes"}),jsxRuntimeExports.jsx("option",{value:"Homework",children:"Homework"}),jsxRuntimeExports.jsx("option",{value:"Exams",children:"Exams"}),jsxRuntimeExports.jsx("option",{value:"Quiz",children:"Quiz"}),jsxRuntimeExports.jsx("option",{value:"Slides",children:"Slides"}),jsxRuntimeExports.jsx("option",{value:"Syllabus",children:"Syllabus"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium",children:"Output PDF Name (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"e.g., Math_Notes",value:et,onChange:Ct=>rt(Ct.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),jsxRuntimeExports.jsx(Button,{onClick:Rt,disabled:st,className:"mt-6",children:st?"Converting...":"Convert to PDF"}),st&&jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),jsxRuntimeExports.jsx("span",{children:"Converting handwriting to LaTeX PDF..."})]})})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Selected Files"}),b.map((Ct,en)=>jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileImage,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:Ct.file.name}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500",children:["(",Bt(Ct.file.size),")"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Ct.status==="success"&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-4 w-4 text-green-500"}),Ct.status==="error"&&jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 text-red-500"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>Tt(en),children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]})]}),Ct.status==="error"&&Ct.error&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-1",children:Ct.error})]},en))]})]})]})]})})]}),it&&lt&&jsxRuntimeExports.jsx(CategorySelectionDialog,{isOpen:it,onClose:St,onConfirm:Et,fileName:lt.name})]})},scriptRel="modulepreload",assetsURL=function(a){return"/"+a},seen={},__vitePreload=function(e,c,d){let h=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),_e=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));h=Promise.allSettled(c.map(et=>{if(et=assetsURL(et),et in seen)return;seen[et]=!0;const rt=et.endsWith(".css"),st=rt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${et}"]${st}`))return;const $=document.createElement("link");if($.rel=rt?"stylesheet":scriptRel,rt||($.as="script"),$.crossOrigin="",$.href=et,_e&&$.setAttribute("nonce",_e),document.head.appendChild($),rt)return new Promise((_,nt)=>{$.addEventListener("load",_),$.addEventListener("error",()=>nt(new Error(`Unable to preload CSS for ${et}`)))})}))}function g(b){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=b,window.dispatchEvent(_e),!_e.defaultPrevented)throw b}return h.then(b=>{for(const _e of b||[])_e.status==="rejected"&&g(_e.reason);return e().catch(g)})};function FileCard({file:a,viewMode:e,onPreview:c,onDownload:d,onRename:h,onDelete:g,onUpdateCategory:b,categories:_e,isGenerationMode:et=!1,isSelected:rt=!1,onSelectionToggle:st}){var ft,mt;const[$,_]=reactExports.useState(null),[nt,it]=reactExports.useState(!1),ot=xt=>{var gt,Et,St;if(((gt=xt.metadata)==null?void 0:gt.type)==="youtube")return jsxRuntimeExports.jsx(Youtube,{className:"w-8 h-8 text-red-500"});if(((Et=xt.metadata)==null?void 0:Et.type)==="website")return jsxRuntimeExports.jsx(Globe,{className:"w-8 h-8 text-blue-500"});if(((St=xt.metadata)==null?void 0:St.type)==="generated"){const Pt=xt.metadata.generationType;return Pt==="practice_questions"?jsxRuntimeExports.jsx(Target,{className:"w-8 h-8 text-green-500"}):Pt==="exam"?jsxRuntimeExports.jsx(FileQuestion,{className:"w-8 h-8 text-orange-500"}):Pt==="quiz"?jsxRuntimeExports.jsx(SquareCheckBig,{className:"w-8 h-8 text-purple-500"}):Pt==="flashcards"?jsxRuntimeExports.jsx(BookOpen,{className:"w-8 h-8 text-indigo-500"}):Pt==="cheat_sheet"?jsxRuntimeExports.jsx(Brain,{className:"w-8 h-8 text-pink-500"}):Pt==="study_guide"?jsxRuntimeExports.jsx(FileText,{className:"w-8 h-8 text-teal-500"}):Pt==="notes"?jsxRuntimeExports.jsx(PenLine,{className:"w-8 h-8 text-cyan-500"}):jsxRuntimeExports.jsx(FileText,{className:"w-8 h-8 text-primary"})}else return jsxRuntimeExports.jsx(FileText,{className:"w-8 h-8 text-primary"})},lt=xt=>{var gt,Et,St,Pt;if(xt.category&&xt.category!=="All")return xt.category;if(((gt=xt.metadata)==null?void 0:gt.type)==="youtube")return"YouTube Video";if(((Et=xt.metadata)==null?void 0:Et.type)==="website")return"Website";if(((St=xt.metadata)==null?void 0:St.type)==="generated"){const Mt=xt.metadata.generationType;return Mt==="practice_questions"?"Practice Questions":Mt==="exam"?"Exam":Mt==="quiz"?"Quiz":Mt==="flashcards"?"Flashcards":Mt==="cheat_sheet"?"Cheat Sheet":Mt==="study_guide"?"Study Guide":Mt==="notes"?"Notes":"Generated Content"}else{const Mt=(Pt=xt.originalName.split(".").pop())==null?void 0:Pt.toLowerCase();return Mt==="pdf"?"PDF Document":Mt==="doc"||Mt==="docx"?"Word Document":Mt==="xls"||Mt==="xlsx"?"Excel Spreadsheet":Mt==="ppt"||Mt==="pptx"?"PowerPoint Presentation":Mt==="txt"?"Text Document":Mt==="jpg"||Mt==="jpeg"||Mt==="png"||Mt==="gif"?"Image":"Document"}},at=xt=>{if(xt===0)return"0 Bytes";const gt=1024,Et=["Bytes","KB","MB","GB"],St=Math.floor(Math.log(xt)/Math.log(gt));return parseFloat((xt/Math.pow(gt,St)).toFixed(2))+" "+Et[St]},ct=xt=>{const gt=new Date(xt),St=Math.floor((new Date().getTime()-gt.getTime())/(1e3*60*60));return St<24?St<1?"Just now":`${St} hour${St===1?"":"s"} ago`:St<48?"Yesterday":gt.toLocaleDateString()},dt=async()=>{var xt,gt,Et;if(((xt=a.metadata)==null?void 0:xt.type)==="youtube"&&a.metadata.thumbnail){_(a.metadata.thumbnail);return}if(!((gt=a.metadata)!=null&&gt.type)||a.metadata.type==="generated"||a.metadata.type==="handwriting_pdf"){it(!0);const St=new Promise((Pt,Mt)=>{setTimeout(()=>Mt(new Error("Preview generation timeout")),1e4)});try{const Pt=localStorage.getItem("authToken"),Mt=`${buildApiUrl(API_ENDPOINTS.FILES.PREVIEW(a.id))}?token=${Pt}`,Rt=(async()=>{const Tt=await __vitePreload(()=>Promise.resolve().then(()=>pdfjs),[]);Tt.GlobalWorkerOptions.workerSrc="/pdf.worker.js";const Vt=await(await Tt.getDocument(Mt).promise).getPage(1),Bt=document.createElement("canvas"),Ct=Bt.getContext("2d"),en=Vt.getViewport({scale:.5});return Bt.width=en.width,Bt.height=en.height,await Vt.render({canvasContext:Ct,viewport:en}).promise,Bt.toDataURL("image/png")})(),Dt=await Promise.race([Rt,St]);_(Dt)}catch(Pt){console.error("Failed to generate PDF preview:",Pt),_(null)}finally{it(!1)}return}if(((Et=a.metadata)==null?void 0:Et.type)==="website"){it(!0);const St=new Promise((Pt,Mt)=>{setTimeout(()=>Mt(new Error("Website preview timeout")),1e4)});try{const Pt=localStorage.getItem("authToken"),Mt=`${buildApiUrl(API_ENDPOINTS.FILES.PREVIEW(a.id))}?token=${Pt}`,Rt=(async()=>{const It=await(await fetch(Mt)).text(),Vt=document.createElement("canvas"),Bt=Vt.getContext("2d");Vt.width=1200,Vt.height=800,Bt.fillStyle="#ffffff",Bt.fillRect(0,0,Vt.width,Vt.height);const Ct=(kt,Ut)=>{const Jt=kt.split(" "),tn=[];let Gt=Jt[0]||"";for(let hn=1;hn<Jt.length;hn++){const fn=Jt[hn];Bt.measureText(Gt+" "+fn).width<Ut?Gt+=" "+fn:(tn.push(Gt),Gt=fn)}return tn.push(Gt),tn};Bt.font="16px Arial, sans-serif",Bt.fillStyle="#000000";const en=It.split(`
`);let sn=40;return en.forEach(kt=>{kt.trim()&&sn<760&&Ct(kt,1160).forEach(Jt=>{sn<760&&(Bt.fillText(Jt,20,sn),sn+=24)})}),Vt.toDataURL("image/png")})(),Dt=await Promise.race([Rt,St]);_(Dt)}catch(Pt){console.error("Failed to generate website preview:",Pt),_(null)}finally{it(!1)}return}_(null)};React$1.useEffect(()=>{dt()},[a.id]);const ht=xt=>{xt.stopPropagation(),et&&st?st(a.id):c(a)},pt={"File Name":a.originalName,Type:lt(a),Size:at(a.fileSize),"Date Added":ct(a.createdAt),Category:a.category||"All",Status:a.processingStatus};return jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs("div",{className:`bg-card border border-border rounded-xl p-4 hover:shadow-md transition-all duration-300 hover:border-primary/20 cursor-pointer min-w-0 ${e==="list"?"flex items-center gap-4":""}`,onClick:ht,children:[jsxRuntimeExports.jsx("div",{className:`${e==="list"?"flex-shrink-0":"mb-4"}`,children:jsxRuntimeExports.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden",children:[et&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 z-10",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:`h-8 w-8 p-0 rounded-full transition-all ${rt?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-background/80 text-muted-foreground hover:bg-background"}`,onClick:xt=>{xt.stopPropagation(),st==null||st(a.id)},children:rt?jsxRuntimeExports.jsx(SquareCheckBig,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Square,{className:"h-4 w-4"})})}),nt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):$?jsxRuntimeExports.jsx("img",{src:$,alt:a.originalName,className:"w-full h-full object-cover",onError:()=>_(null)}):jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center h-full p-4",children:((ft=a.metadata)==null?void 0:ft.type)==="website"?jsxRuntimeExports.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx(Globe,{className:"w-12 h-12 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Website"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-700 mb-2",children:(()=>{var xt,gt;if((xt=a.metadata)!=null&&xt.originalUrl)try{return new URL(a.metadata.originalUrl).hostname}catch{return a.metadata.originalUrl.length>20?a.metadata.originalUrl.substring(0,20)+"...":a.metadata.originalUrl}else return(gt=a.metadata)!=null&&gt.title?a.metadata.title.length>25?a.metadata.title.substring(0,25)+"...":a.metadata.title:a.originalName&&a.originalName!==a.fileName?a.originalName.length>25?a.originalName.substring(0,25)+"...":a.originalName:"External Link"})()}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600",children:at(a.fileSize)})]})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-full rounded-lg flex flex-col items-center justify-center",children:((mt=a.metadata)==null?void 0:mt.type)==="generated"?jsxRuntimeExports.jsxs("div",{className:`w-full h-full rounded-lg flex flex-col items-center justify-center ${a.metadata.generationType==="practice_questions"?"bg-gradient-to-br from-green-50 to-green-100":a.metadata.generationType==="exam"?"bg-gradient-to-br from-orange-50 to-orange-100":a.metadata.generationType==="quiz"?"bg-gradient-to-br from-purple-50 to-purple-100":a.metadata.generationType==="flashcards"?"bg-gradient-to-br from-indigo-50 to-indigo-100":a.metadata.generationType==="cheat_sheet"?"bg-gradient-to-br from-pink-50 to-pink-100":a.metadata.generationType==="study_guide"?"bg-gradient-to-br from-teal-50 to-teal-100":a.metadata.generationType==="notes"?"bg-gradient-to-br from-cyan-50 to-cyan-100":"bg-gradient-to-br from-gray-50 to-gray-100"}`,children:[jsxRuntimeExports.jsx("div",{className:"mb-3",children:ot(a)}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-medium mb-1 ${a.metadata.generationType==="practice_questions"?"text-green-900":a.metadata.generationType==="exam"?"text-orange-900":a.metadata.generationType==="quiz"?"text-purple-900":a.metadata.generationType==="flashcards"?"text-indigo-900":a.metadata.generationType==="cheat_sheet"?"text-pink-900":a.metadata.generationType==="study_guide"?"text-teal-900":a.metadata.generationType==="notes"?"text-cyan-900":"text-gray-900"}`,children:lt(a)}),jsxRuntimeExports.jsx("p",{className:`text-xs ${a.metadata.generationType==="practice_questions"?"text-green-700":a.metadata.generationType==="exam"?"text-orange-700":a.metadata.generationType==="quiz"?"text-purple-700":a.metadata.generationType==="flashcards"?"text-indigo-700":a.metadata.generationType==="cheat_sheet"?"text-pink-700":a.metadata.generationType==="study_guide"?"text-teal-700":a.metadata.generationType==="notes"?"text-cyan-700":"text-gray-700"}`,children:at(a.fileSize)})]})]}):jsxRuntimeExports.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-primary/5 to-primary/10 rounded-lg flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"mb-2",children:ot(a)}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs font-medium text-foreground mb-1",children:lt(a)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:at(a.fileSize)})]})]})})}),jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 h-8 w-8 p-0 bg-background/80 hover:bg-background",onClick:xt=>xt.stopPropagation(),children:jsxRuntimeExports.jsx(Info$1,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{side:"left",className:"w-64",children:jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Object.entries(pt).map(([xt,gt])=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium text-xs",children:[xt,":"]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:gt})]},xt))})})]})]})}),jsxRuntimeExports.jsx("div",{className:e==="list"?"flex-1":"",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-foreground line-clamp-2 text-sm",children:a.originalName}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:lt(a)})]}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-100",onClick:xt=>xt.stopPropagation(),children:jsxRuntimeExports.jsx(EllipsisVertical,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",children:[a.metadata&&(a.metadata.type==="youtube"||a.metadata.type==="website")?jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:xt=>{xt.stopPropagation(),c(a)},children:[jsxRuntimeExports.jsx(Eye,{className:"mr-2 h-4 w-4"}),"Preview"]}):jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:xt=>{xt.stopPropagation(),c(a)},children:[jsxRuntimeExports.jsx(Eye,{className:"mr-2 h-4 w-4"}),"Preview"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:xt=>{xt.stopPropagation(),d(a)},children:[jsxRuntimeExports.jsx(Download,{className:"mr-2 h-4 w-4"}),"Download"]}),jsxRuntimeExports.jsxs(DropdownMenuSub,{children:[jsxRuntimeExports.jsxs(DropdownMenuSubTrigger,{children:[jsxRuntimeExports.jsx(PenLine,{className:"mr-2 h-4 w-4"})," Change Category",a.category&&a.category!=="All"&&jsxRuntimeExports.jsxs("span",{className:"ml-auto text-xs text-muted-foreground",children:["(",a.category,")"]})]}),jsxRuntimeExports.jsx(DropdownMenuSubContent,{children:_e.filter(xt=>xt!=="All").map(xt=>jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:gt=>{gt.stopPropagation(),b(a,xt)},className:a.category===xt?"bg-primary/10":"",children:[xt,a.category===xt&&jsxRuntimeExports.jsx("span",{className:"ml-auto text-xs text-primary",children:"✓"})]},xt))})]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:xt=>{xt.stopPropagation(),h(a)},children:[jsxRuntimeExports.jsx(PenLine,{className:"mr-2 h-4 w-4"}),"Rename"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:xt=>{xt.stopPropagation(),g(a)},className:"text-red-600 focus:text-red-600",children:[jsxRuntimeExports.jsx(Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]})})}const QuizConfigDialog=({isOpen:a,onClose:e,onConfirm:c,isGenerating:d=!1})=>{console.log("🔍 [QUIZ DIALOG] Dialog rendered, isOpen:",a);const[h,g]=reactExports.useState({numQuestions:10,questionType:"both"});console.log("🔍 [QUIZ DIALOG] Current config state:",h);const b=()=>{console.log("🔍 [QUIZ DIALOG] handleConfirm called"),console.log("🔍 [QUIZ DIALOG] Config being sent to parent:",h),h.numQuestions>=1&&h.numQuestions<=50?(console.log("🔍 [QUIZ DIALOG] Config is valid, calling onConfirm"),c(h)):console.log("🔍 [QUIZ DIALOG] Config is invalid, not calling onConfirm")},_e=et=>{et.key==="Enter"&&b()};return jsxRuntimeExports.jsx(Dialog,{open:a,onOpenChange:e,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Configure Quiz"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"num-questions",className:"text-sm font-medium",children:["Number of Questions ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"num-questions",type:"number",min:"1",max:"50",value:h.numQuestions,onChange:et=>{const rt=parseInt(et.target.value)||1;console.log("🔍 [QUIZ DIALOG] Number input changed"),console.log("🔍 [QUIZ DIALOG] Raw input value:",et.target.value),console.log("🔍 [QUIZ DIALOG] Parsed value:",rt),g(st=>{const $={...st,numQuestions:rt};return console.log("🔍 [QUIZ DIALOG] Updated config:",$),$})},onKeyDown:_e,placeholder:"e.g., 10"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose between 1 and 50 questions"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"question-type",className:"text-sm font-medium",children:["Question Type ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsxs(Select,{value:h.questionType,onValueChange:et=>{console.log("🔍 [QUIZ DIALOG] Question type changed to:",et),g(rt=>{const st={...rt,questionType:et};return console.log("🔍 [QUIZ DIALOG] Updated config after question type change:",st),st})},children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select question type"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"multiple_choice",children:"Multiple Choice"}),jsxRuntimeExports.jsx(SelectItem,{value:"free_response",children:"Free Response"}),jsxRuntimeExports.jsx(SelectItem,{value:"both",children:"Both"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.questionType==="multiple_choice"&&"Multiple choice questions with A, B, C, D options for quick assessment",h.questionType==="free_response"&&"Open-ended questions requiring detailed written answers for deeper understanding",h.questionType==="both"&&"Mix of multiple choice (60%) and free response (40%) questions for comprehensive testing"]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center pt-4",children:jsxRuntimeExports.jsx(Button,{onClick:b,disabled:d||h.numQuestions<1||h.numQuestions>50,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8",children:d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Generate Quiz ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})})})]})]})})},ExamConfigDialog=({isOpen:a,onClose:e,onConfirm:c,isGenerating:d=!1})=>{const[h,g]=reactExports.useState({numMultipleChoice:5,numShortAnswer:3,numEssay:2,totalPoints:100}),b=()=>{h.numMultipleChoice>=0&&h.numShortAnswer>=0&&h.numEssay>=0&&h.totalPoints>0&&c(h)},_e=et=>{et.key==="Enter"&&b()};return jsxRuntimeExports.jsx(Dialog,{open:a,onOpenChange:e,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Configure Exam"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"num-multiple-choice",className:"text-sm font-medium",children:["Multiple Choice Questions ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"num-multiple-choice",type:"number",min:"0",max:"20",value:h.numMultipleChoice,onChange:et=>g(rt=>({...rt,numMultipleChoice:parseInt(et.target.value)||0})),onKeyDown:_e,placeholder:"e.g., 5"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of multiple choice questions (A, B, C, D options)"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"num-short-answer",className:"text-sm font-medium",children:["Short Answer Questions ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"num-short-answer",type:"number",min:"0",max:"10",value:h.numShortAnswer,onChange:et=>g(rt=>({...rt,numShortAnswer:parseInt(et.target.value)||0})),onKeyDown:_e,placeholder:"e.g., 3"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of short answer questions (2-3 sentences expected)"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"num-essay",className:"text-sm font-medium",children:["Essay Questions ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"num-essay",type:"number",min:"0",max:"5",value:h.numEssay,onChange:et=>g(rt=>({...rt,numEssay:parseInt(et.target.value)||0})),onKeyDown:_e,placeholder:"e.g., 2"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of essay questions (detailed responses expected)"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label$2,{htmlFor:"total-points",className:"text-sm font-medium",children:["Total Points ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{id:"total-points",type:"number",min:"1",max:"200",value:h.totalPoints,onChange:et=>g(rt=>({...rt,totalPoints:parseInt(et.target.value)||100})),onKeyDown:_e,placeholder:"e.g., 100"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Total points for the exam (typically 100)"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center pt-4",children:jsxRuntimeExports.jsx(Button,{onClick:b,disabled:d||h.numMultipleChoice<0||h.numShortAnswer<0||h.numEssay<0||h.totalPoints<=0,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8",children:d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Generate Exam ",jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 ml-2"})]})})})]})]})})},badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:a,variant:e,...c}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:e}),a),...c})}const workspaceThemes=[{id:"navy",name:"Navy Blue",description:"Professional and trustworthy",colors:{primary:"#1e3a8a",secondary:"#3b82f6",accent:"#60a5fa",background:"#ffffff",surface:"#f8fafc",border:"#e2e8f0",text:"#1e293b",muted:"#64748b",card:"#ffffff",cardBorder:"#e2e8f0",gradient:{from:"#1e3a8a",to:"#3b82f6"}}},{id:"pink",name:"Pink Dream",description:"Soft and creative",colors:{primary:"#ec4899",secondary:"#f472b6",accent:"#f9a8d4",background:"#fdf2f8",surface:"#fce7f3",border:"#fbcfe8",text:"#831843",muted:"#be185d",card:"#ffffff",cardBorder:"#fbcfe8",gradient:{from:"#ec4899",to:"#f472b6"}}},{id:"cream",name:"Academic Cream",description:"Classic and scholarly",colors:{primary:"#92400e",secondary:"#d97706",accent:"#f59e0b",background:"#fefce8",surface:"#fef3c7",border:"#fde68a",text:"#451a03",muted:"#92400e",card:"#ffffff",cardBorder:"#fde68a",gradient:{from:"#92400e",to:"#d97706"}}},{id:"forest",name:"Forest Green",description:"Natural and calming",colors:{primary:"#059669",secondary:"#10b981",accent:"#34d399",background:"#f0fdf4",surface:"#dcfce7",border:"#bbf7d0",text:"#064e3b",muted:"#047857",card:"#ffffff",cardBorder:"#bbf7d0",gradient:{from:"#059669",to:"#10b981"}}},{id:"sunset",name:"Sunset Orange",description:"Warm and energetic",colors:{primary:"#ea580c",secondary:"#f97316",accent:"#fb923c",background:"#fff7ed",surface:"#fed7aa",border:"#fdba74",text:"#7c2d12",muted:"#c2410c",card:"#ffffff",cardBorder:"#fdba74",gradient:{from:"#ea580c",to:"#f97316"}}},{id:"lavender",name:"Lavender",description:"Soft and peaceful",colors:{primary:"#7c3aed",secondary:"#a855f7",accent:"#c084fc",background:"#faf5ff",surface:"#f3e8ff",border:"#e9d5ff",text:"#581c87",muted:"#7c3aed",card:"#ffffff",cardBorder:"#e9d5ff",gradient:{from:"#7c3aed",to:"#a855f7"}}},{id:"ocean",name:"Ocean Blue",description:"Deep and serene",colors:{primary:"#0891b2",secondary:"#06b6d4",accent:"#22d3ee",background:"#f0f9ff",surface:"#e0f2fe",border:"#bae6fd",text:"#0e7490",muted:"#0891b2",card:"#ffffff",cardBorder:"#bae6fd",gradient:{from:"#0891b2",to:"#06b6d4"}}}],getThemeById=a=>workspaceThemes.find(e=>e.id===a)||workspaceThemes[0];function ThemeSelector({workspaceId:a,currentThemeId:e,onThemeChange:c,trigger:d}){const[h,g]=reactExports.useState(!1),[b,_e]=reactExports.useState(e),[et,rt]=reactExports.useState(!1),{toast:st}=useToast(),$=getThemeById(e),_=ot=>{_e(ot)},nt=async()=>{if(b===e){g(!1);return}rt(!0);try{const ot=localStorage.getItem("authToken"),lt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(a)+"/theme"),{method:"PATCH",headers:{Authorization:`Bearer ${ot}`,"Content-Type":"application/json"},body:JSON.stringify({themeId:b})}),at=await lt.json();lt.ok&&at.success?(c(b),st({title:"Theme updated",description:"Your workspace theme has been updated successfully."}),g(!1)):st({title:"Error updating theme",description:at.message||"Failed to update theme",variant:"destructive"})}catch{st({title:"Error updating theme",description:"Network error occurred",variant:"destructive"})}finally{rt(!1)}},it=({theme:ot})=>{const lt=b===ot.id,at=(ct=!1)=>ct?ot.colors.muted:ot.colors.text;return jsxRuntimeExports.jsxs("div",{className:`relative p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:scale-105 ${lt?"border-primary shadow-lg":"border-border hover:border-primary/50"}`,onClick:()=>_(ot.id),style:{backgroundColor:ot.colors.card,borderColor:lt?ot.colors.primary:ot.colors.cardBorder},children:[lt&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full flex items-center justify-center",style:{backgroundColor:ot.colors.primary},children:jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm",style:{color:at()},children:ot.name}),jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"text-xs",style:{backgroundColor:ot.colors.surface,color:at(),borderColor:ot.colors.border},children:ot.id})]}),jsxRuntimeExports.jsx("p",{className:"text-xs",style:{color:at(!0)},children:ot.description}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full border border-border",style:{backgroundColor:ot.colors.primary}}),jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full border border-border",style:{backgroundColor:ot.colors.secondary}}),jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full border border-border",style:{backgroundColor:ot.colors.accent}}),jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full border border-border",style:{backgroundColor:ot.colors.surface}})]}),jsxRuntimeExports.jsx("div",{className:"h-8 rounded-md",style:{background:`linear-gradient(135deg, ${ot.colors.gradient.from}, ${ot.colors.gradient.to})`}})]})]})};return jsxRuntimeExports.jsxs(Dialog,{open:h,onOpenChange:g,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:d||jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"gap-2",children:[jsxRuntimeExports.jsx(Palette,{className:"w-4 h-4"}),"Theme"]})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Palette,{className:"w-5 h-5"}),"Choose Workspace Theme"]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border",style:{backgroundColor:$.colors.surface,borderColor:$.colors.border},children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold mb-2",style:{color:$.colors.text},children:["Current Theme: ",$.name]}),jsxRuntimeExports.jsx("p",{className:"text-sm",style:{color:$.colors.muted},children:$.description})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:workspaceThemes.map(ot=>jsxRuntimeExports.jsx(it,{theme:ot},ot.id))}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:nt,disabled:et||b===e,children:et?"Updating...":"Apply Theme"})]})]})]})]})}function MainContent({activeWorkspace:a,workspaceName:e,workspaceDescription:c,onDescriptionUpdate:d,onChatClick:h,isChatOpen:g,onCallClick:b,isCallOpen:_e,isGenerating:et,onGeneratingChange:rt,currentThemeId:st="navy"}){const $=useNavigate(),[_,nt]=reactExports.useState("grid"),[it,ot]=reactExports.useState(!1),[lt,at]=reactExports.useState([]),[ct,dt]=reactExports.useState(!1),[ht,pt]=reactExports.useState(null),[ft,mt]=reactExports.useState(null),[xt,gt]=reactExports.useState(""),[Et,St]=reactExports.useState(!1),[Pt,Mt]=reactExports.useState(!1),[Rt,Dt]=reactExports.useState(!1),[Tt,It]=reactExports.useState(!1),[Vt,Bt]=reactExports.useState(c||""),[Ct,en]=reactExports.useState(null),[sn,kt]=reactExports.useState([]),[Ut,Jt]=reactExports.useState("All"),[tn,Gt]=reactExports.useState(!1),[hn,fn]=reactExports.useState(null),[gn,kn]=reactExports.useState(""),[On,un]=reactExports.useState(""),[Sn,Ln]=reactExports.useState(!1),[$n,Wn]=reactExports.useState(st),[Pn,or]=reactExports.useState(getThemeById(st));reactExports.useEffect(()=>{Wn(st),or(getThemeById(st))},[st]);const[Kt,Xt]=reactExports.useState(!1),[on,vn]=reactExports.useState(new Set),[Cn,yn]=reactExports.useState(""),[nn,Qt]=reactExports.useState(!1),[bn,An]=reactExports.useState({numQuestions:10,questionType:"both"});console.log("🔍 [MAIN CONTENT] Current quizConfig state:",bn);const[In,Un]=reactExports.useState(!1),[Vn,ir]=reactExports.useState({numMultipleChoice:5,numShortAnswer:3,numEssay:2,totalPoints:100}),[Fn,cr]=reactExports.useState([]),{toast:Gn}=useToast(),Cr=async an=>{if(a)try{const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.CREATE(a)),{method:"POST",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"},body:JSON.stringify({text:an.text,dueDate:an.dueDate||null})}),qn=await Rn.json();Rn.ok&&qn.success?(cr(rr=>[...rr,qn.data]),Gn({title:"Todo added",description:"Todo has been added successfully"})):Gn({title:"Error adding todo",description:qn.message||"Failed to add todo",variant:"destructive"})}catch{Gn({title:"Error adding todo",description:"Network error occurred",variant:"destructive"})}},kr=async an=>{try{const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.TOGGLE(a,an)),{method:"PUT",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"}}),qn=await Rn.json();Rn.ok&&qn.success&&cr(rr=>rr.map(ar=>ar.id===an?{...ar,completed:!ar.completed}:ar))}catch{Gn({title:"Error updating todo",description:"Failed to update todo",variant:"destructive"})}},mr=async an=>{try{const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.DELETE(a,an)),{method:"DELETE",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"}}),qn=await Rn.json();Rn.ok&&qn.success&&(cr(rr=>rr.filter(ar=>ar.id!==an)),Gn({title:"Todo deleted",description:"Todo has been deleted successfully"}))}catch{Gn({title:"Error deleting todo",description:"Failed to delete todo",variant:"destructive"})}},Fs=async(an,jn)=>{try{const Rn=localStorage.getItem("authToken"),qn=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.UPDATE(a,an)),{method:"PUT",headers:{Authorization:`Bearer ${Rn}`,"Content-Type":"application/json"},body:JSON.stringify(jn)}),rr=await qn.json();qn.ok&&rr.success?cr(ar=>ar.map(wr=>wr.id===an?{...wr,...jn}:wr)):Gn({title:"Error updating todo",description:rr.message||"Failed to update todo",variant:"destructive"})}catch{Gn({title:"Error updating todo",description:"Network error occurred",variant:"destructive"})}},Ao=async()=>{if(a)try{const an=localStorage.getItem("authToken"),jn=await fetch(buildApiUrl(API_ENDPOINTS.TODOS.LIST(a)),{headers:{Authorization:`Bearer ${an}`,"Content-Type":"application/json"}}),Rn=await jn.json();jn.ok&&Rn.success&&cr(Rn.data)}catch(an){console.error("Error fetching todos:",an)}};reactExports.useEffect(()=>{a&&(js(),Ao())},[a]);const js=async()=>{if(a)try{const an=localStorage.getItem("authToken"),jn=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.CATEGORIES(a)),{headers:{Authorization:`Bearer ${an}`,"Content-Type":"application/json"}}),Rn=await jn.json();jn.ok&&Rn.success&&(kt(Rn.data.categories),Rn.data.categories.includes(Ut)||Jt("All"))}catch{kt(["All","Websites","Youtube","Syllabus","Homeworks","Notes","Slides","Exams","Quiz","Others"])}};reactExports.useEffect(()=>{a&&Xn()},[a,Ut]);const Xn=async()=>{if(a){dt(!0);try{const an=localStorage.getItem("authToken"),jn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.WORKSPACE(a)),{headers:{Authorization:`Bearer ${an}`,"Content-Type":"application/json"}}),Rn=await jn.json();jn.ok&&Rn.success?at(Rn.data):console.error("Error fetching files:",Rn.message)}catch(an){console.error("Error fetching files:",an)}finally{dt(!1)}}};reactExports.useEffect(()=>{Bt(c||"")},[c]);const Zn=an=>{$(`/file/${an.id}`)},Nn=async an=>{try{const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DOWNLOAD(an.id)),{headers:{Authorization:`Bearer ${jn}`}}),qn=await Rn.json();Rn.ok&&qn.success?(window.open(qn.data.downloadUrl,"_blank"),Gn({title:"File opened",description:`${an.originalName} has been opened in a new tab`})):Gn({title:"Download failed",description:qn.message||"Failed to get download URL",variant:"destructive"})}catch{Gn({title:"Download failed",description:"Network error occurred",variant:"destructive"})}},pr=async an=>{try{St(!0);const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DELETE(an.id)),{method:"DELETE",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"}}),qn=await Rn.json();Rn.ok&&qn.success?(Gn({title:"File deleted",description:`${an.originalName} has been deleted successfully`}),at(rr=>rr.filter(ar=>ar.id!==an.id))):Gn({title:"Delete failed",description:qn.message||"Failed to delete file",variant:"destructive"})}catch{Gn({title:"Delete failed",description:"Network error occurred",variant:"destructive"})}finally{St(!1),pt(null)}},yr=async an=>{if(!xt.trim()||xt.trim()===an.originalName){mt(null),gt("");return}try{Mt(!0);const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(`/files/${an.id}`),{method:"PUT",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"},body:JSON.stringify({originalName:xt.trim()})}),qn=await Rn.json();Rn.ok&&qn.success?(Gn({title:"File renamed",description:`File has been renamed to "${xt.trim()}"`}),at(rr=>rr.map(ar=>ar.id===an.id?{...ar,originalName:xt.trim()}:ar)),mt(null),gt("")):Gn({title:"Rename failed",description:qn.message||"Failed to rename file",variant:"destructive"})}catch{Gn({title:"Rename failed",description:"Network error occurred",variant:"destructive"})}finally{Mt(!1)}},zr=an=>{mt(an),gt(an.originalName)},Lr=async()=>{if(a){It(!0);try{const an=localStorage.getItem("authToken"),jn=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(a)),{method:"PUT",headers:{Authorization:`Bearer ${an}`,"Content-Type":"application/json"},body:JSON.stringify({description:Vt.trim()||null})}),Rn=await jn.json();jn.ok&&Rn.success?(Gn({title:"Description updated",description:"Workspace description has been updated successfully"}),Dt(!1),d&&d(Vt.trim())):Gn({title:"Update failed",description:Rn.message||"Failed to update description",variant:"destructive"})}catch{Gn({title:"Update failed",description:"Network error occurred",variant:"destructive"})}finally{It(!1)}}},ts=async()=>{if(!a||!On.trim())return;const an=[...sn,On.trim()];await Jr(an),un("")},Vr=async an=>{if(!a||!gn.trim()||an==="All")return;const jn=sn.map(Rn=>Rn===an?gn.trim():Rn);await Jr(jn),fn(null),kn("")},$r=async an=>{if(!a||an==="All")return;const jn=sn.filter(Rn=>Rn!==an);await Jr(jn),Ut===an&&Jt("All")},Jr=async an=>{try{const jn=localStorage.getItem("authToken"),Rn=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.CATEGORIES(a)),{method:"PUT",headers:{Authorization:`Bearer ${jn}`,"Content-Type":"application/json"},body:JSON.stringify({categories:an})}),qn=await Rn.json();Rn.ok&&qn.success?kt(qn.data.categories):Gn({title:"Category update failed",description:qn.message||"Failed to update categories",variant:"destructive"})}catch{Gn({title:"Category update failed",description:"Network error",variant:"destructive"})}},_o=async(an,jn)=>{try{const Rn=localStorage.getItem("authToken"),qn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.CATEGORY(an.id)),{method:"PUT",headers:{Authorization:`Bearer ${Rn}`,"Content-Type":"application/json"},body:JSON.stringify({category:jn})}),rr=await qn.json();qn.ok&&rr.success?(at(ar=>ar.map(wr=>wr.id===an.id?{...wr,category:jn}:wr)),Gn({title:"Category updated",description:`File category changed to "${jn}"`})):Gn({title:"Update failed",description:rr.message||"Failed to update file category",variant:"destructive"})}catch{Gn({title:"Update failed",description:"Network error occurred",variant:"destructive"})}},Bs=async an=>{if(Ln(!1),!a){Gn({title:"Error",description:"No workspace selected",variant:"destructive"});return}const Rn={Exams:"exam",Quizzes:"quiz",Flashcards:"flashcards","Cheat Sheet":"cheat_sheet","Study Guide":"study_guide",Notes:"notes"}[an];if(!Rn){Gn({title:"Generate Feature",description:`${an} generation will be available soon!`});return}yn(Rn),Xt(!0),vn(new Set)},Ro=async(an,jn)=>{if(!a)return;const Rn=Cn,rr={exam:"Exam",quiz:"Quiz",flashcards:"Flashcards",cheat_sheet:"Cheat Sheet",study_guide:"Study Guide",notes:"Notes"}[Rn]||Rn,ar=rr.toLowerCase();try{rt==null||rt(!0),Gn({title:`Generating ${rr}`,description:`Creating ${ar} based on selected files...`});const wr=localStorage.getItem("authToken"),En={workspaceId:a,type:Rn,fileIds:an};if(Rn==="quiz"){console.log("🔍 [MAIN CONTENT] Adding quiz config to request body");const Hr=jn||bn;console.log("🔍 [MAIN CONTENT] quizConfig being used:",Hr),En.numQuestions=Hr.numQuestions,En.questionType=Hr.questionType,console.log("🔍 [MAIN CONTENT] Final request body for quiz:",En)}if(Rn==="exam"){const Hr=jn||Vn;En.numMultipleChoice=Hr.numMultipleChoice,En.numShortAnswer=Hr.numShortAnswer,En.numEssay=Hr.numEssay,En.totalPoints=Hr.totalPoints}const dr=await fetch(buildApiUrl(API_ENDPOINTS.GENERATE.CONTENT),{method:"POST",headers:{Authorization:`Bearer ${wr}`,"Content-Type":"application/json"},body:JSON.stringify(En)}),Sr=await dr.json();dr.ok&&Sr.success?(Gn({title:`${rr} Generated!`,description:`Your ${ar} has been created and added to the workspace`}),Xn()):Gn({title:"Generation Failed",description:Sr.message||`Failed to generate ${ar}`,variant:"destructive"})}catch(wr){console.error(`Generate ${ar} error:`,wr),Gn({title:"Generation Failed",description:"Network error occurred",variant:"destructive"})}finally{rt==null||rt(!1)}},Il=an=>{vn(jn=>{const Rn=new Set(jn);return Rn.has(an)?Rn.delete(an):Rn.add(an),Rn})},Ol=async()=>{if(on.size===0){Gn({title:"No files selected",description:"Please select at least one file to generate content from",variant:"destructive"});return}if(Cn==="quiz"){console.log("🔍 [MAIN CONTENT] Opening quiz config dialog"),Qt(!0);return}if(Cn==="exam"){Un(!0);return}const an=Array.from(on);await Ro(an),Xt(!1),vn(new Set),yn("")},Dl=()=>{Xt(!1),vn(new Set),yn("")},Ht=async an=>{console.log("🔍 [MAIN CONTENT] handleQuizConfigConfirm called"),console.log("🔍 [MAIN CONTENT] Received config from dialog:",an),An(an),Qt(!1);const jn=Array.from(on);console.log("🔍 [MAIN CONTENT] Selected file IDs:",jn),await Ro(jn,an),Xt(!1),vn(new Set),yn("")},Zt=async an=>{ir(an),Un(!1);const jn=Array.from(on);await Ro(jn,an),Xt(!1),vn(new Set),yn("")},ln=an=>{Wn(an),or(getThemeById(an))},dn=(an=!1)=>an?Pn.colors.muted:Pn.colors.text,xn=()=>Pn.colors.card,wn=()=>Pn.colors.surface;return a?jsxRuntimeExports.jsx("div",{className:"flex flex-1 h-screen overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-background transition-all duration-300 flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"backdrop-blur-sm",style:{backgroundColor:`${Pn.colors.surface}80`},children:jsxRuntimeExports.jsxs("div",{className:"px-8 pt-12 pb-6 group pl-12",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold",style:{color:dn()},children:e}),jsxRuntimeExports.jsx("span",{className:"text-3xl",children:getWorkspaceEmoji({name:e})})]}),jsxRuntimeExports.jsx(ThemeSelector,{workspaceId:a||"",currentThemeId:$n,onThemeChange:ln,trigger:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"gap-2",children:[jsxRuntimeExports.jsx(Palette,{className:"w-4 h-4"}),"Theme"]})})]}),Rt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 pl-4",children:[jsxRuntimeExports.jsx(Input,{value:Vt,onChange:an=>Bt(an.target.value),placeholder:"Add description (e.g., 'Maths A Levels', 'NYU Calc 3')",className:"max-w-md",onKeyDown:an=>{an.key==="Enter"?Lr():an.key==="Escape"&&(Dt(!1),Bt(c||""))},autoFocus:!0}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:Lr,disabled:Tt,children:Tt?"Saving...":"Save"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Dt(!1),Bt(c||"")},disabled:Tt,children:"Cancel"})]}):jsxRuntimeExports.jsxs("div",{className:"cursor-pointer hover:text-foreground transition-colors flex items-center gap-2 pl-4",onClick:()=>Dt(!0),style:{color:dn(!0)},children:[jsxRuntimeExports.jsx("span",{children:c||"Add Description"}),jsxRuntimeExports.jsx(PenLine,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-8 space-y-6 overflow-y-auto min-w-0",style:{backgroundColor:Pn.colors.background},children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 -mt-6",children:[jsxRuntimeExports.jsx("div",{className:"w-full lg:w-1/3 lg:flex-shrink-0 rounded-lg p-6 min-w-0",style:{backgroundColor:xn(),border:`1px solid ${Pn.colors.cardBorder}`},children:jsxRuntimeExports.jsx(TodoList,{todos:Fn,onToggleTodo:kr,onDeleteTodo:mr,onUpdateTodo:Fs,onAddTodo:Cr,workspaceId:a,workspaceName:e,showWorkspaceInfo:!1,theme:Pn})}),jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-2/3 rounded-lg p-6 min-w-0",style:{backgroundColor:xn(),border:`1px solid ${Pn.colors.cardBorder}`},children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-6",children:jsxRuntimeExports.jsxs("h3",{className:"text-xl font-display flex items-center gap-2",style:{color:dn()},children:[jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5",style:{color:Pn.colors.accent}}),"Quick Actions"]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx("div",{className:"group",children:jsxRuntimeExports.jsxs(Dialog,{open:it,onOpenChange:ot,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-6 rounded-xl hover:scale-105 transition-all duration-200 cursor-pointer group-hover:shadow-md",style:{background:`linear-gradient(135deg, ${wn()}, ${Pn.colors.background})`,border:`1px solid ${Pn.colors.border}`},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",style:{backgroundColor:Pn.colors.primary},children:jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-1",style:{color:dn()},children:"Upload Files"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center",style:{color:dn(!0)},children:"Add PDFs, images, or documents"})]})}),it&&jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{children:["Upload Files to ",e]})}),jsxRuntimeExports.jsx(FileUpload,{workspaceId:parseInt(a||"0"),onUploadComplete:()=>{ot(!1),Xn()}})]})]})}),jsxRuntimeExports.jsx("div",{className:"group",children:jsxRuntimeExports.jsx(UrlPasteDialog,{workspaceId:a,workspaceName:e,onSuccess:Xn,trigger:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-6 rounded-xl hover:scale-105 transition-all duration-200 cursor-pointer group-hover:shadow-md",style:{background:`linear-gradient(135deg, ${wn()}, ${Pn.colors.background})`,border:`1px solid ${Pn.colors.border}`},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",style:{backgroundColor:Pn.colors.secondary},children:jsxRuntimeExports.jsx(Link2,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-1",style:{color:dn()},children:"Paste URL"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center",style:{color:dn(!0)},children:"Import from websites or YouTube"})]})})}),h&&jsxRuntimeExports.jsx("div",{className:"group",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-6 rounded-xl hover:scale-105 transition-all duration-200 cursor-pointer group-hover:shadow-md",onClick:h,style:{background:`linear-gradient(135deg, ${wn()}, ${Pn.colors.background})`,border:`1px solid ${Pn.colors.border}`},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",style:{backgroundColor:g?Pn.colors.accent:Pn.colors.primary},children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-1",style:{color:dn()},children:"Chat"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center",style:{color:dn(!0)},children:"Ask questions about your files"})]})}),b&&jsxRuntimeExports.jsx("div",{className:"group",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-6 rounded-xl hover:scale-105 transition-all duration-200 cursor-pointer group-hover:shadow-md",onClick:b,style:{background:`linear-gradient(135deg, ${wn()}, ${Pn.colors.background})`,border:`1px solid ${Pn.colors.border}`},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",style:{backgroundColor:_e?Pn.colors.accent:Pn.colors.secondary},children:jsxRuntimeExports.jsx(Mic,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-1",style:{color:dn()},children:"Speech"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center",style:{color:dn(!0)},children:"Voice conversations"})]})}),jsxRuntimeExports.jsx("div",{className:"group",children:jsxRuntimeExports.jsxs(DropdownMenu,{open:Sn,onOpenChange:Ln,children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center p-6 rounded-xl hover:scale-105 transition-all duration-200 cursor-pointer group-hover:shadow-md",style:{background:`linear-gradient(135deg, ${wn()}, ${Pn.colors.background})`,border:`1px solid ${Pn.colors.border}`},children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",style:{backgroundColor:Pn.colors.accent},children:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-1",style:{color:dn()},children:"Generate"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center",style:{color:dn(!0)},children:"Create study materials"})]})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"w-48",children:[jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Exams"),children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 mr-2"}),"Exams"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Quizzes"),children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4 mr-2"}),"Quizzes"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Flashcards"),children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4 mr-2"}),"Flashcards"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Cheat Sheet"),children:[jsxRuntimeExports.jsx(Lightbulb,{className:"w-4 h-4 mr-2"}),"Cheat Sheet"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Study Guide"),children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4 mr-2"}),"Study Guide"]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Bs("Notes"),children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 mr-2"}),"Notes"]})]})]})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between min-w-0",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",style:{color:dn()},children:Kt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{children:"Select Files for Generation"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:`${Pn.colors.primary}20`,color:Pn.colors.primary},children:[jsxRuntimeExports.jsx(Brain,{className:"w-4 h-4"}),Cn==="exam"&&"Exam",Cn==="quiz"&&"Quiz",Cn==="flashcards"&&"Flashcards",Cn==="cheatsheet"&&"Cheat Sheet",Cn==="studyguide"&&"Study Guide",Cn==="notes"&&"Notes"]})]}):Ut}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:Kt?`${on.size} file${on.size!==1?"s":""} selected for generation`:`${lt.length} file${lt.length!==1?"s":""} in ${Ut}`})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 relative",children:Kt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:Dl,className:"gap-2",children:[jsxRuntimeExports.jsx(X,{className:"w-4 h-4"}),"Cancel"]}),jsxRuntimeExports.jsxs(Button,{onClick:Ol,disabled:on.size===0,className:"gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"w-4 h-4"}),Cn==="quiz"||Cn==="exam"?"Next":"Generate"," (",on.size,")"]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("label",{htmlFor:"category-select",className:"text-sm text-muted-foreground mr-2",children:"Category:"}),jsxRuntimeExports.jsx("select",{id:"category-select",className:"border rounded px-2 py-1 text-sm",value:Ut,onChange:an=>Jt(an.target.value),children:sn.map(an=>jsxRuntimeExports.jsx("option",{value:an,children:an},an))}),jsxRuntimeExports.jsxs(DropdownMenu,{open:tn,onOpenChange:Gt,children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:jsxRuntimeExports.jsx(EllipsisVertical,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(DropdownMenuContent,{align:"end",className:"min-w-[220px]",children:jsxRuntimeExports.jsxs("div",{className:"px-2 py-1",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-xs text-muted-foreground mb-1",children:"Manage Categories"}),sn.map(an=>jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 py-1 group",children:hn===an?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Input,{value:gn,onChange:jn=>kn(jn.target.value),onKeyDown:jn=>{jn.key==="Enter"&&Vr(an),jn.key==="Escape"&&fn(null)},className:"h-7 text-xs px-2 py-1",autoFocus:!0}),jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>Vr(an),children:jsxRuntimeExports.jsx(Pencil,{className:"w-3 h-3"})}),an!=="All"&&jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",className:"h-6 w-6 text-destructive",onClick:()=>$r(an),children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"flex-1 text-xs truncate",children:an}),an!=="All"&&jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>{fn(an),kn(an)},children:jsxRuntimeExports.jsx(Pencil,{className:"w-3 h-3"})}),an!=="All"&&jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",className:"h-6 w-6 text-destructive",onClick:()=>$r(an),children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]})},an)),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[jsxRuntimeExports.jsx(Input,{value:On,onChange:an=>un(an.target.value),placeholder:"Add category",className:"h-7 text-xs px-2 py-1",onKeyDown:an=>{an.key==="Enter"&&ts()}}),jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:ts,children:jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"})})]})]})})]}),jsxRuntimeExports.jsx(Button,{variant:_==="grid"?"default":"outline",size:"sm",onClick:()=>nt("grid"),children:jsxRuntimeExports.jsx(Grid3x3,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:_==="list"?"default":"outline",size:"sm",onClick:()=>nt("list"),children:jsxRuntimeExports.jsx(List$1,{className:"w-4 h-4"})})]})})]}),ct&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{borderColor:Pn.colors.primary}}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-2",style:{color:dn(!0)},children:"Loading files..."})]}),et&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto",style:{borderColor:Pn.colors.primary}}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-2",style:{color:dn(!0)},children:"Generating..."})]}),!ct&&!et&&lt.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 mx-auto mb-4",style:{color:dn(!0)}}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",style:{color:dn()},children:"No files yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm mb-4",style:{color:dn(!0)},children:"Upload your first PDF to get started"}),jsxRuntimeExports.jsx(Button,{onClick:()=>ot(!0),children:"Upload File"})]}),!ct&&!et&&lt.length>0&&jsxRuntimeExports.jsx("div",{className:_==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 min-w-0":"space-y-4 min-w-0",children:lt.map(an=>jsxRuntimeExports.jsx(FileCard,{file:an,viewMode:_,onPreview:Zn,onDownload:Nn,onRename:zr,onDelete:pt,onUpdateCategory:_o,categories:sn,isGenerationMode:Kt,isSelected:on.has(an.id),onSelectionToggle:Il},an.id))}),jsxRuntimeExports.jsx(AlertDialog,{open:!!ht,onOpenChange:an=>!an&&pt(null),children:jsxRuntimeExports.jsxs(AlertDialogContent,{children:[jsxRuntimeExports.jsxs(AlertDialogHeader,{children:[jsxRuntimeExports.jsx(AlertDialogTitle,{children:"Delete File"}),jsxRuntimeExports.jsxs(AlertDialogDescription,{children:['Are you sure you want to delete "',ht==null?void 0:ht.originalName,'"? This action cannot be undone.']})]}),jsxRuntimeExports.jsxs(AlertDialogFooter,{children:[jsxRuntimeExports.jsx(AlertDialogCancel,{disabled:Et,children:"Cancel"}),jsxRuntimeExports.jsx(AlertDialogAction,{onClick:()=>ht&&pr(ht),disabled:Et,className:"bg-red-600 hover:bg-red-700",children:Et?"Deleting...":"Delete"})]})]})}),jsxRuntimeExports.jsx(Dialog,{open:!!ft,onOpenChange:an=>!an&&mt(null),children:jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Rename File"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"rename-file-name",children:"New Name"}),jsxRuntimeExports.jsx(Input,{id:"rename-file-name",value:xt,onChange:an=>gt(an.target.value),placeholder:"Enter new file name",onKeyDown:an=>an.key==="Enter"&&ft&&yr(ft)})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-end",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{mt(null),gt("")},disabled:Pt,children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>ft&&yr(ft),disabled:!xt.trim()||xt.trim()===(ft==null?void 0:ft.originalName)||Pt,children:Pt?"Renaming...":"Rename"})]})]})]})})]})]}),jsxRuntimeExports.jsx(QuizConfigDialog,{isOpen:nn,onClose:()=>Qt(!1),onConfirm:Ht,isGenerating:!1}),jsxRuntimeExports.jsx(ExamConfigDialog,{isOpen:In,onClose:()=>Un(!1),onConfirm:Zt,isGenerating:!1}),jsxRuntimeExports.jsx("div",{className:"border-t border-border bg-surface/50 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground",children:[lt.length," File",lt.length!==1?"s":""]})})})]})}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center bg-background",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-full flex items-center justify-center mx-auto",children:jsxRuntimeExports.jsx(Upload,{className:"w-8 h-8 text-primary-foreground"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Welcome to Sparqit"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground max-w-md",children:"Create a workspace to start organizing your learning materials and collaborate with others."})]})})}function ok$1(){}function unreachable$1(){}function stringify$1(a,e){const c={};return(a[a.length-1]===""?[...a,""]:a).join((c.padRight?" ":"")+","+(c.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$3={};function name$1(a,e){return(emptyOptions$3.jsx?nameReJsx:nameRe).test(a)}const re=/[ \t\n\f\r]/g;function whitespace(a){return typeof a=="object"?a.type==="text"?empty$1(a.value):!1:empty$1(a)}function empty$1(a){return a.replace(re,"")===""}class Schema{constructor(e,c,d){this.normal=c,this.property=e,d&&(this.space=d)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(a,e){const c={},d={};for(const h of a)Object.assign(c,h.property),Object.assign(d,h.normal);return new Schema(c,d,e)}function normalize$1(a){return a.toLowerCase()}class Info{constructor(e,c){this.attribute=c,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,c,d,h){let g=-1;if(super(e,c),mark(this,"space",h),typeof d=="number")for(;++g<checks.length;){const b=checks[g];mark(this,checks[g],(d&types[b])===types[b])}}}DefinedInfo.prototype.defined=!0;function mark(a,e,c){c&&(a[e]=c)}function create(a){const e={},c={};for(const[d,h]of Object.entries(a.properties)){const g=new DefinedInfo(d,a.transform(a.attributes||{},d),h,a.space);a.mustUseProperty&&a.mustUseProperty.includes(d)&&(g.mustUseProperty=!0),e[d]=g,c[normalize$1(d)]=d,c[normalize$1(g.attribute)]=d}return new Schema(e,c,a.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(a,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(a,e){return e in a?a[e]:e}function caseInsensitiveTransform(a,e){return caseSensitiveTransform(a,e.toLowerCase())}const html$3=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(a,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(a,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find$1(a,e){const c=normalize$1(e);let d=e,h=Info;if(c in a.normal)return a.property[a.normal[c]];if(c.length>4&&c.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const g=e.slice(5).replace(dash,camelcase);d="data"+g.charAt(0).toUpperCase()+g.slice(1)}else{const g=e.slice(4);if(!dash.test(g)){let b=g.replace(cap$1,kebab);b.charAt(0)!=="-"&&(b="-"+b),e="data"+b}}h=DefinedInfo}return new h(d,e)}function kebab(a){return"-"+a.toLowerCase()}function camelcase(a){return a.charAt(1).toUpperCase()}const html$2=merge([aria,html$3,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(a){return a.join(" ").trim()}var cjs$1={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(a,e){if(typeof a!="string")throw new TypeError("First argument must be a string");if(!a)return[];e=e||{};var c=1,d=1;function h(it){var ot=it.match(NEWLINE_REGEX);ot&&(c+=ot.length);var lt=it.lastIndexOf(NEWLINE);d=~lt?it.length-lt:d+it.length}function g(){var it={line:c,column:d};return function(ot){return ot.position=new b(it),rt(),ot}}function b(it){this.start=it,this.end={line:c,column:d},this.source=e.source}b.prototype.content=a;function _e(it){var ot=new Error(e.source+":"+c+":"+d+": "+it);if(ot.reason=it,ot.filename=e.source,ot.line=c,ot.column=d,ot.source=a,!e.silent)throw ot}function et(it){var ot=it.exec(a);if(ot){var lt=ot[0];return h(lt),a=a.slice(lt.length),ot}}function rt(){et(WHITESPACE_REGEX)}function st(it){var ot;for(it=it||[];ot=$();)ot!==!1&&it.push(ot);return it}function $(){var it=g();if(!(FORWARD_SLASH!=a.charAt(0)||ASTERISK!=a.charAt(1))){for(var ot=2;EMPTY_STRING!=a.charAt(ot)&&(ASTERISK!=a.charAt(ot)||FORWARD_SLASH!=a.charAt(ot+1));)++ot;if(ot+=2,EMPTY_STRING===a.charAt(ot-1))return _e("End of comment missing");var lt=a.slice(2,ot-2);return d+=2,h(lt),a=a.slice(ot),d+=2,it({type:TYPE_COMMENT,comment:lt})}}function _(){var it=g(),ot=et(PROPERTY_REGEX);if(ot){if($(),!et(COLON_REGEX))return _e("property missing ':'");var lt=et(VALUE_REGEX),at=it({type:TYPE_DECLARATION,property:trim(ot[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:lt?trim(lt[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return et(SEMICOLON_REGEX),at}}function nt(){var it=[];st(it);for(var ot;ot=_();)ot!==!1&&(it.push(ot),st(it));return it}return rt(),nt()};function trim(a){return a?a.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(cjs$1,"__esModule",{value:!0});cjs$1.default=StyleToObject;var inline_style_parser_1=__importDefault$1(inlineStyleParser);function StyleToObject(a,e){var c=null;if(!a||typeof a!="string")return c;var d=(0,inline_style_parser_1.default)(a),h=typeof e=="function";return d.forEach(function(g){if(g.type==="declaration"){var b=g.property,_e=g.value;h?e(b,_e,g):_e&&(c=c||{},c[b]=_e)}}),c}var utilities={};Object.defineProperty(utilities,"__esModule",{value:!0});utilities.camelCase=void 0;var CUSTOM_PROPERTY_REGEX=/^--[a-zA-Z0-9_-]+$/,HYPHEN_REGEX=/-([a-z])/g,NO_HYPHEN_REGEX=/^[^-]+$/,VENDOR_PREFIX_REGEX=/^-(webkit|moz|ms|o|khtml)-/,MS_VENDOR_PREFIX_REGEX=/^-(ms)-/,skipCamelCase=function(a){return!a||NO_HYPHEN_REGEX.test(a)||CUSTOM_PROPERTY_REGEX.test(a)},capitalize=function(a,e){return e.toUpperCase()},trimHyphen=function(a,e){return"".concat(e,"-")},camelCase=function(a,e){return e===void 0&&(e={}),skipCamelCase(a)?a:(a=a.toLowerCase(),e.reactCompat?a=a.replace(MS_VENDOR_PREFIX_REGEX,trimHyphen):a=a.replace(VENDOR_PREFIX_REGEX,trimHyphen),a.replace(HYPHEN_REGEX,capitalize))};utilities.camelCase=camelCase;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},style_to_object_1=__importDefault(cjs$1),utilities_1=utilities;function StyleToJS(a,e){var c={};return!a||typeof a!="string"||(0,style_to_object_1.default)(a,function(d,h){d&&h&&(c[(0,utilities_1.camelCase)(d,e)]=h)}),c}StyleToJS.default=StyleToJS;var cjs=StyleToJS;const styleToJs=getDefaultExportFromCjs(cjs),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(a){return e;function e(c){const d=c&&c.position&&c.position[a]||{};if(typeof d.line=="number"&&d.line>0&&typeof d.column=="number"&&d.column>0)return{line:d.line,column:d.column,offset:typeof d.offset=="number"&&d.offset>-1?d.offset:void 0}}}function position$1(a){const e=pointStart(a),c=pointEnd(a);if(e&&c)return{start:e,end:c}}function stringifyPosition(a){return!a||typeof a!="object"?"":"position"in a||"type"in a?position(a.position):"start"in a||"end"in a?position(a):"line"in a||"column"in a?point$1(a):""}function point$1(a){return index(a&&a.line)+":"+index(a&&a.column)}function position(a){return point$1(a&&a.start)+"-"+point$1(a&&a.end)}function index(a){return a&&typeof a=="number"?a:1}class VFileMessage extends Error{constructor(e,c,d){super(),typeof c=="string"&&(d=c,c=void 0);let h="",g={},b=!1;if(c&&("line"in c&&"column"in c?g={place:c}:"start"in c&&"end"in c?g={place:c}:"type"in c?g={ancestors:[c],place:c.position}:g={...c}),typeof e=="string"?h=e:!g.cause&&e&&(b=!0,h=e.message,g.cause=e),!g.ruleId&&!g.source&&typeof d=="string"){const et=d.indexOf(":");et===-1?g.ruleId=d:(g.source=d.slice(0,et),g.ruleId=d.slice(et+1))}if(!g.place&&g.ancestors&&g.ancestors){const et=g.ancestors[g.ancestors.length-1];et&&(g.place=et.position)}const _e=g.place&&"start"in g.place?g.place.start:g.place;this.ancestors=g.ancestors||void 0,this.cause=g.cause||void 0,this.column=_e?_e.column:void 0,this.fatal=void 0,this.file="",this.message=h,this.line=_e?_e.line:void 0,this.name=stringifyPosition(g.place)||"1:1",this.place=g.place||void 0,this.reason=this.message,this.ruleId=g.ruleId||void 0,this.source=g.source||void 0,this.stack=b&&g.cause&&typeof g.cause.stack=="string"?g.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(a,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const c=e.filePath||void 0;let d;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");d=developmentCreate(c,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");d=productionCreate(c,e.jsx,e.jsxs)}const h={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:d,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:c,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$2,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},g=one$1(h,a,void 0);return g&&typeof g!="string"?g:h.create(a,h.Fragment,{children:g||void 0},void 0)}function one$1(a,e,c){if(e.type==="element")return element$1(a,e,c);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(a,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(a,e,c);if(e.type==="mdxjsEsm")return mdxEsm(a,e);if(e.type==="root")return root$2(a,e,c);if(e.type==="text")return text$5(a,e)}function element$1(a,e,c){const d=a.schema;let h=d;e.tagName.toLowerCase()==="svg"&&d.space==="html"&&(h=svg,a.schema=h),a.ancestors.push(e);const g=findComponentFromName(a,e.tagName,!1),b=createElementProps(a,e);let _e=createChildren(a,e);return tableElements.has(e.tagName)&&(_e=_e.filter(function(et){return typeof et=="string"?!whitespace(et):!0})),addNode(a,b,g,e),addChildren(b,_e),a.ancestors.pop(),a.schema=d,a.create(e,g,b,c)}function mdxExpression(a,e){if(e.data&&e.data.estree&&a.evaluater){const d=e.data.estree.body[0];return d.type,a.evaluater.evaluateExpression(d.expression)}crashEstree(a,e.position)}function mdxEsm(a,e){if(e.data&&e.data.estree&&a.evaluater)return a.evaluater.evaluateProgram(e.data.estree);crashEstree(a,e.position)}function mdxJsxElement(a,e,c){const d=a.schema;let h=d;e.name==="svg"&&d.space==="html"&&(h=svg,a.schema=h),a.ancestors.push(e);const g=e.name===null?a.Fragment:findComponentFromName(a,e.name,!0),b=createJsxElementProps(a,e),_e=createChildren(a,e);return addNode(a,b,g,e),addChildren(b,_e),a.ancestors.pop(),a.schema=d,a.create(e,g,b,c)}function root$2(a,e,c){const d={};return addChildren(d,createChildren(a,e)),a.create(e,a.Fragment,d,c)}function text$5(a,e){return e.value}function addNode(a,e,c,d){typeof c!="string"&&c!==a.Fragment&&a.passNode&&(e.node=d)}function addChildren(a,e){if(e.length>0){const c=e.length>1?e:e[0];c&&(a.children=c)}}function productionCreate(a,e,c){return d;function d(h,g,b,_e){const rt=Array.isArray(b.children)?c:e;return _e?rt(g,b,_e):rt(g,b)}}function developmentCreate(a,e){return c;function c(d,h,g,b){const _e=Array.isArray(g.children),et=pointStart(d);return e(h,g,b,_e,{columnNumber:et?et.column-1:void 0,fileName:a,lineNumber:et?et.line:void 0},void 0)}}function createElementProps(a,e){const c={};let d,h;for(h in e.properties)if(h!=="children"&&own$3.call(e.properties,h)){const g=createProperty(a,h,e.properties[h]);if(g){const[b,_e]=g;a.tableCellAlignToStyle&&b==="align"&&typeof _e=="string"&&tableCellElement.has(e.tagName)?d=_e:c[b]=_e}}if(d){const g=c.style||(c.style={});g[a.stylePropertyNameCase==="css"?"text-align":"textAlign"]=d}return c}function createJsxElementProps(a,e){const c={};for(const d of e.attributes)if(d.type==="mdxJsxExpressionAttribute")if(d.data&&d.data.estree&&a.evaluater){const g=d.data.estree.body[0];g.type;const b=g.expression;b.type;const _e=b.properties[0];_e.type,Object.assign(c,a.evaluater.evaluateExpression(_e.argument))}else crashEstree(a,e.position);else{const h=d.name;let g;if(d.value&&typeof d.value=="object")if(d.value.data&&d.value.data.estree&&a.evaluater){const _e=d.value.data.estree.body[0];_e.type,g=a.evaluater.evaluateExpression(_e.expression)}else crashEstree(a,e.position);else g=d.value===null?!0:d.value;c[h]=g}return c}function createChildren(a,e){const c=[];let d=-1;const h=a.passKeys?new Map:emptyMap;for(;++d<e.children.length;){const g=e.children[d];let b;if(a.passKeys){const et=g.type==="element"?g.tagName:g.type==="mdxJsxFlowElement"||g.type==="mdxJsxTextElement"?g.name:void 0;if(et){const rt=h.get(et)||0;b=et+"-"+rt,h.set(et,rt+1)}}const _e=one$1(a,g,b);_e!==void 0&&c.push(_e)}return c}function createProperty(a,e,c){const d=find$1(a.schema,e);if(!(c==null||typeof c=="number"&&Number.isNaN(c))){if(Array.isArray(c)&&(c=d.commaSeparated?stringify$1(c):stringify(c)),d.property==="style"){let h=typeof c=="object"?c:parseStyle(a,String(c));return a.stylePropertyNameCase==="css"&&(h=transformStylesToCssCasing(h)),["style",h]}return[a.elementAttributeNameCase==="react"&&d.space?hastToReact[d.property]||d.property:d.attribute,c]}}function parseStyle(a,e){try{return styleToJs(e,{reactCompat:!0})}catch(c){if(a.ignoreInvalidStyle)return{};const d=c,h=new VFileMessage("Cannot parse `style` attribute",{ancestors:a.ancestors,cause:d,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw h.file=a.filePath||void 0,h.url=docs+"#cannot-parse-style-attribute",h}}function findComponentFromName(a,e,c){let d;if(!c)d={type:"Literal",value:e};else if(e.includes(".")){const h=e.split(".");let g=-1,b;for(;++g<h.length;){const _e=name$1(h[g])?{type:"Identifier",name:h[g]}:{type:"Literal",value:h[g]};b=b?{type:"MemberExpression",object:b,property:_e,computed:!!(g&&_e.type==="Literal"),optional:!1}:_e}d=b}else d=name$1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(d.type==="Literal"){const h=d.value;return own$3.call(a.components,h)?a.components[h]:h}if(a.evaluater)return a.evaluater.evaluateExpression(d);crashEstree(a)}function crashEstree(a,e){const c=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:a.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw c.file=a.filePath||void 0,c.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",c}function transformStylesToCssCasing(a){const e={};let c;for(c in a)own$3.call(a,c)&&(e[transformStyleToCssCasing(c)]=a[c]);return e}function transformStyleToCssCasing(a){let e=a.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(a){return"-"+a.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$2={};function toString$1(a,e){const c=emptyOptions$2,d=typeof c.includeImageAlt=="boolean"?c.includeImageAlt:!0,h=typeof c.includeHtml=="boolean"?c.includeHtml:!0;return one(a,d,h)}function one(a,e,c){if(node(a)){if("value"in a)return a.type==="html"&&!c?"":a.value;if(e&&"alt"in a&&a.alt)return a.alt;if("children"in a)return all(a.children,e,c)}return Array.isArray(a)?all(a,e,c):""}function all(a,e,c){const d=[];let h=-1;for(;++h<a.length;)d[h]=one(a[h],e,c);return d.join("")}function node(a){return!!(a&&typeof a=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(a){const e="&"+a+";";element.innerHTML=e;const c=element.textContent;return c.charCodeAt(c.length-1)===59&&a!=="semi"||c===e?!1:c}function splice(a,e,c,d){const h=a.length;let g=0,b;if(e<0?e=-e>h?0:h+e:e=e>h?h:e,c=c>0?c:0,d.length<1e4)b=Array.from(d),b.unshift(e,c),a.splice(...b);else for(c&&a.splice(e,c);g<d.length;)b=d.slice(g,g+1e4),b.unshift(e,0),a.splice(...b),g+=1e4,e+=1e4}function push(a,e){return a.length>0?(splice(a,a.length,0,e),a):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(a){const e={};let c=-1;for(;++c<a.length;)syntaxExtension(e,a[c]);return e}function syntaxExtension(a,e){let c;for(c in e){const h=(hasOwnProperty.call(a,c)?a[c]:void 0)||(a[c]={}),g=e[c];let b;if(g)for(b in g){hasOwnProperty.call(h,b)||(h[b]=[]);const _e=g[b];constructs(h[b],Array.isArray(_e)?_e:_e?[_e]:[])}}}function constructs(a,e){let c=-1;const d=[];for(;++c<e.length;)(e[c].add==="after"?a:d).push(e[c]);splice(a,0,0,d)}function decodeNumericCharacterReference(a,e){const c=Number.parseInt(a,e);return c<9||c===11||c>13&&c<32||c>126&&c<160||c>55295&&c<57344||c>64975&&c<65008||(c&65535)===65535||(c&65535)===65534||c>1114111?"�":String.fromCodePoint(c)}function normalizeIdentifier(a){return a.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(a){return a!==null&&(a<32||a===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(a){return a!==null&&a<-2}function markdownLineEndingOrSpace(a){return a!==null&&(a<0||a===32)}function markdownSpace(a){return a===-2||a===-1||a===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(a){return e;function e(c){return c!==null&&c>-1&&a.test(String.fromCharCode(c))}}function normalizeUri(a){const e=[];let c=-1,d=0,h=0;for(;++c<a.length;){const g=a.charCodeAt(c);let b="";if(g===37&&asciiAlphanumeric(a.charCodeAt(c+1))&&asciiAlphanumeric(a.charCodeAt(c+2)))h=2;else if(g<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(g))||(b=String.fromCharCode(g));else if(g>55295&&g<57344){const _e=a.charCodeAt(c+1);g<56320&&_e>56319&&_e<57344?(b=String.fromCharCode(g,_e),h=1):b="�"}else b=String.fromCharCode(g);b&&(e.push(a.slice(d,c),encodeURIComponent(b)),d=c+h+1,b=""),h&&(c+=h,h=0)}return e.join("")+a.slice(d)}function factorySpace(a,e,c,d){const h=d?d-1:Number.POSITIVE_INFINITY;let g=0;return b;function b(et){return markdownSpace(et)?(a.enter(c),_e(et)):e(et)}function _e(et){return markdownSpace(et)&&g++<h?(a.consume(et),_e):(a.exit(c),e(et))}}const content$1={tokenize:initializeContent};function initializeContent(a){const e=a.attempt(this.parser.constructs.contentInitial,d,h);let c;return e;function d(_e){if(_e===null){a.consume(_e);return}return a.enter("lineEnding"),a.consume(_e),a.exit("lineEnding"),factorySpace(a,e,"linePrefix")}function h(_e){return a.enter("paragraph"),g(_e)}function g(_e){const et=a.enter("chunkText",{contentType:"text",previous:c});return c&&(c.next=et),c=et,b(_e)}function b(_e){if(_e===null){a.exit("chunkText"),a.exit("paragraph"),a.consume(_e);return}return markdownLineEnding(_e)?(a.consume(_e),a.exit("chunkText"),g):(a.consume(_e),b)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(a){const e=this,c=[];let d=0,h,g,b;return _e;function _e(dt){if(d<c.length){const ht=c[d];return e.containerState=ht[1],a.attempt(ht[0].continuation,et,rt)(dt)}return rt(dt)}function et(dt){if(d++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,h&&ct();const ht=e.events.length;let pt=ht,ft;for(;pt--;)if(e.events[pt][0]==="exit"&&e.events[pt][1].type==="chunkFlow"){ft=e.events[pt][1].end;break}at(d);let mt=ht;for(;mt<e.events.length;)e.events[mt][1].end={...ft},mt++;return splice(e.events,pt+1,0,e.events.slice(ht)),e.events.length=mt,rt(dt)}return _e(dt)}function rt(dt){if(d===c.length){if(!h)return _(dt);if(h.currentConstruct&&h.currentConstruct.concrete)return it(dt);e.interrupt=!!(h.currentConstruct&&!h._gfmTableDynamicInterruptHack)}return e.containerState={},a.check(containerConstruct,st,$)(dt)}function st(dt){return h&&ct(),at(d),_(dt)}function $(dt){return e.parser.lazy[e.now().line]=d!==c.length,b=e.now().offset,it(dt)}function _(dt){return e.containerState={},a.attempt(containerConstruct,nt,it)(dt)}function nt(dt){return d++,c.push([e.currentConstruct,e.containerState]),_(dt)}function it(dt){if(dt===null){h&&ct(),at(0),a.consume(dt);return}return h=h||e.parser.flow(e.now()),a.enter("chunkFlow",{_tokenizer:h,contentType:"flow",previous:g}),ot(dt)}function ot(dt){if(dt===null){lt(a.exit("chunkFlow"),!0),at(0),a.consume(dt);return}return markdownLineEnding(dt)?(a.consume(dt),lt(a.exit("chunkFlow")),d=0,e.interrupt=void 0,_e):(a.consume(dt),ot)}function lt(dt,ht){const pt=e.sliceStream(dt);if(ht&&pt.push(null),dt.previous=g,g&&(g.next=dt),g=dt,h.defineSkip(dt.start),h.write(pt),e.parser.lazy[dt.start.line]){let ft=h.events.length;for(;ft--;)if(h.events[ft][1].start.offset<b&&(!h.events[ft][1].end||h.events[ft][1].end.offset>b))return;const mt=e.events.length;let xt=mt,gt,Et;for(;xt--;)if(e.events[xt][0]==="exit"&&e.events[xt][1].type==="chunkFlow"){if(gt){Et=e.events[xt][1].end;break}gt=!0}for(at(d),ft=mt;ft<e.events.length;)e.events[ft][1].end={...Et},ft++;splice(e.events,xt+1,0,e.events.slice(mt)),e.events.length=ft}}function at(dt){let ht=c.length;for(;ht-- >dt;){const pt=c[ht];e.containerState=pt[1],pt[0].exit.call(e,a)}c.length=dt}function ct(){h.write([null]),g=void 0,h=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(a,e,c){return factorySpace(a,a.attempt(this.parser.constructs.document,e,c),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(a){if(a===null||markdownLineEndingOrSpace(a)||unicodeWhitespace(a))return 1;if(unicodePunctuation(a))return 2}function resolveAll(a,e,c){const d=[];let h=-1;for(;++h<a.length;){const g=a[h].resolveAll;g&&!d.includes(g)&&(e=g(e,c),d.push(g))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(a,e){let c=-1,d,h,g,b,_e,et,rt,st;for(;++c<a.length;)if(a[c][0]==="enter"&&a[c][1].type==="attentionSequence"&&a[c][1]._close){for(d=c;d--;)if(a[d][0]==="exit"&&a[d][1].type==="attentionSequence"&&a[d][1]._open&&e.sliceSerialize(a[d][1]).charCodeAt(0)===e.sliceSerialize(a[c][1]).charCodeAt(0)){if((a[d][1]._close||a[c][1]._open)&&(a[c][1].end.offset-a[c][1].start.offset)%3&&!((a[d][1].end.offset-a[d][1].start.offset+a[c][1].end.offset-a[c][1].start.offset)%3))continue;et=a[d][1].end.offset-a[d][1].start.offset>1&&a[c][1].end.offset-a[c][1].start.offset>1?2:1;const $={...a[d][1].end},_={...a[c][1].start};movePoint($,-et),movePoint(_,et),b={type:et>1?"strongSequence":"emphasisSequence",start:$,end:{...a[d][1].end}},_e={type:et>1?"strongSequence":"emphasisSequence",start:{...a[c][1].start},end:_},g={type:et>1?"strongText":"emphasisText",start:{...a[d][1].end},end:{...a[c][1].start}},h={type:et>1?"strong":"emphasis",start:{...b.start},end:{..._e.end}},a[d][1].end={...b.start},a[c][1].start={..._e.end},rt=[],a[d][1].end.offset-a[d][1].start.offset&&(rt=push(rt,[["enter",a[d][1],e],["exit",a[d][1],e]])),rt=push(rt,[["enter",h,e],["enter",b,e],["exit",b,e],["enter",g,e]]),rt=push(rt,resolveAll(e.parser.constructs.insideSpan.null,a.slice(d+1,c),e)),rt=push(rt,[["exit",g,e],["enter",_e,e],["exit",_e,e],["exit",h,e]]),a[c][1].end.offset-a[c][1].start.offset?(st=2,rt=push(rt,[["enter",a[c][1],e],["exit",a[c][1],e]])):st=0,splice(a,d-1,c-d+3,rt),c=d+rt.length-st-2;break}}for(c=-1;++c<a.length;)a[c][1].type==="attentionSequence"&&(a[c][1].type="data");return a}function tokenizeAttention(a,e){const c=this.parser.constructs.attentionMarkers.null,d=this.previous,h=classifyCharacter(d);let g;return b;function b(et){return g=et,a.enter("attentionSequence"),_e(et)}function _e(et){if(et===g)return a.consume(et),_e;const rt=a.exit("attentionSequence"),st=classifyCharacter(et),$=!st||st===2&&h||c.includes(et),_=!h||h===2&&st||c.includes(d);return rt._open=!!(g===42?$:$&&(h||!_)),rt._close=!!(g===42?_:_&&(st||!$)),e(et)}}function movePoint(a,e){a.column+=e,a.offset+=e,a._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(a,e,c){let d=0;return h;function h(nt){return a.enter("autolink"),a.enter("autolinkMarker"),a.consume(nt),a.exit("autolinkMarker"),a.enter("autolinkProtocol"),g}function g(nt){return asciiAlpha(nt)?(a.consume(nt),b):nt===64?c(nt):rt(nt)}function b(nt){return nt===43||nt===45||nt===46||asciiAlphanumeric(nt)?(d=1,_e(nt)):rt(nt)}function _e(nt){return nt===58?(a.consume(nt),d=0,et):(nt===43||nt===45||nt===46||asciiAlphanumeric(nt))&&d++<32?(a.consume(nt),_e):(d=0,rt(nt))}function et(nt){return nt===62?(a.exit("autolinkProtocol"),a.enter("autolinkMarker"),a.consume(nt),a.exit("autolinkMarker"),a.exit("autolink"),e):nt===null||nt===32||nt===60||asciiControl(nt)?c(nt):(a.consume(nt),et)}function rt(nt){return nt===64?(a.consume(nt),st):asciiAtext(nt)?(a.consume(nt),rt):c(nt)}function st(nt){return asciiAlphanumeric(nt)?$(nt):c(nt)}function $(nt){return nt===46?(a.consume(nt),d=0,st):nt===62?(a.exit("autolinkProtocol").type="autolinkEmail",a.enter("autolinkMarker"),a.consume(nt),a.exit("autolinkMarker"),a.exit("autolink"),e):_(nt)}function _(nt){if((nt===45||asciiAlphanumeric(nt))&&d++<63){const it=nt===45?_:$;return a.consume(nt),it}return c(nt)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(a,e,c){return d;function d(g){return markdownSpace(g)?factorySpace(a,h,"linePrefix")(g):h(g)}function h(g){return g===null||markdownLineEnding(g)?e(g):c(g)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit$1,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(a,e,c){const d=this;return h;function h(b){if(b===62){const _e=d.containerState;return _e.open||(a.enter("blockQuote",{_container:!0}),_e.open=!0),a.enter("blockQuotePrefix"),a.enter("blockQuoteMarker"),a.consume(b),a.exit("blockQuoteMarker"),g}return c(b)}function g(b){return markdownSpace(b)?(a.enter("blockQuotePrefixWhitespace"),a.consume(b),a.exit("blockQuotePrefixWhitespace"),a.exit("blockQuotePrefix"),e):(a.exit("blockQuotePrefix"),e(b))}}function tokenizeBlockQuoteContinuation(a,e,c){const d=this;return h;function h(b){return markdownSpace(b)?factorySpace(a,g,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):g(b)}function g(b){return a.attempt(blockQuote,e,c)(b)}}function exit$1(a){a.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(a,e,c){return d;function d(g){return a.enter("characterEscape"),a.enter("escapeMarker"),a.consume(g),a.exit("escapeMarker"),h}function h(g){return asciiPunctuation(g)?(a.enter("characterEscapeValue"),a.consume(g),a.exit("characterEscapeValue"),a.exit("characterEscape"),e):c(g)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(a,e,c){const d=this;let h=0,g,b;return _e;function _e($){return a.enter("characterReference"),a.enter("characterReferenceMarker"),a.consume($),a.exit("characterReferenceMarker"),et}function et($){return $===35?(a.enter("characterReferenceMarkerNumeric"),a.consume($),a.exit("characterReferenceMarkerNumeric"),rt):(a.enter("characterReferenceValue"),g=31,b=asciiAlphanumeric,st($))}function rt($){return $===88||$===120?(a.enter("characterReferenceMarkerHexadecimal"),a.consume($),a.exit("characterReferenceMarkerHexadecimal"),a.enter("characterReferenceValue"),g=6,b=asciiHexDigit,st):(a.enter("characterReferenceValue"),g=7,b=asciiDigit,st($))}function st($){if($===59&&h){const _=a.exit("characterReferenceValue");return b===asciiAlphanumeric&&!decodeNamedCharacterReference(d.sliceSerialize(_))?c($):(a.enter("characterReferenceMarker"),a.consume($),a.exit("characterReferenceMarker"),a.exit("characterReference"),e)}return b($)&&h++<g?(a.consume($),st):c($)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(a,e,c){const d=this,h={partial:!0,tokenize:pt};let g=0,b=0,_e;return et;function et(ft){return rt(ft)}function rt(ft){const mt=d.events[d.events.length-1];return g=mt&&mt[1].type==="linePrefix"?mt[2].sliceSerialize(mt[1],!0).length:0,_e=ft,a.enter("codeFenced"),a.enter("codeFencedFence"),a.enter("codeFencedFenceSequence"),st(ft)}function st(ft){return ft===_e?(b++,a.consume(ft),st):b<3?c(ft):(a.exit("codeFencedFenceSequence"),markdownSpace(ft)?factorySpace(a,$,"whitespace")(ft):$(ft))}function $(ft){return ft===null||markdownLineEnding(ft)?(a.exit("codeFencedFence"),d.interrupt?e(ft):a.check(nonLazyContinuation,ot,ht)(ft)):(a.enter("codeFencedFenceInfo"),a.enter("chunkString",{contentType:"string"}),_(ft))}function _(ft){return ft===null||markdownLineEnding(ft)?(a.exit("chunkString"),a.exit("codeFencedFenceInfo"),$(ft)):markdownSpace(ft)?(a.exit("chunkString"),a.exit("codeFencedFenceInfo"),factorySpace(a,nt,"whitespace")(ft)):ft===96&&ft===_e?c(ft):(a.consume(ft),_)}function nt(ft){return ft===null||markdownLineEnding(ft)?$(ft):(a.enter("codeFencedFenceMeta"),a.enter("chunkString",{contentType:"string"}),it(ft))}function it(ft){return ft===null||markdownLineEnding(ft)?(a.exit("chunkString"),a.exit("codeFencedFenceMeta"),$(ft)):ft===96&&ft===_e?c(ft):(a.consume(ft),it)}function ot(ft){return a.attempt(h,ht,lt)(ft)}function lt(ft){return a.enter("lineEnding"),a.consume(ft),a.exit("lineEnding"),at}function at(ft){return g>0&&markdownSpace(ft)?factorySpace(a,ct,"linePrefix",g+1)(ft):ct(ft)}function ct(ft){return ft===null||markdownLineEnding(ft)?a.check(nonLazyContinuation,ot,ht)(ft):(a.enter("codeFlowValue"),dt(ft))}function dt(ft){return ft===null||markdownLineEnding(ft)?(a.exit("codeFlowValue"),ct(ft)):(a.consume(ft),dt)}function ht(ft){return a.exit("codeFenced"),e(ft)}function pt(ft,mt,xt){let gt=0;return Et;function Et(Dt){return ft.enter("lineEnding"),ft.consume(Dt),ft.exit("lineEnding"),St}function St(Dt){return ft.enter("codeFencedFence"),markdownSpace(Dt)?factorySpace(ft,Pt,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Dt):Pt(Dt)}function Pt(Dt){return Dt===_e?(ft.enter("codeFencedFenceSequence"),Mt(Dt)):xt(Dt)}function Mt(Dt){return Dt===_e?(gt++,ft.consume(Dt),Mt):gt>=b?(ft.exit("codeFencedFenceSequence"),markdownSpace(Dt)?factorySpace(ft,Rt,"whitespace")(Dt):Rt(Dt)):xt(Dt)}function Rt(Dt){return Dt===null||markdownLineEnding(Dt)?(ft.exit("codeFencedFence"),mt(Dt)):xt(Dt)}}}function tokenizeNonLazyContinuation(a,e,c){const d=this;return h;function h(b){return b===null?c(b):(a.enter("lineEnding"),a.consume(b),a.exit("lineEnding"),g)}function g(b){return d.parser.lazy[d.now().line]?c(b):e(b)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(a,e,c){const d=this;return h;function h(rt){return a.enter("codeIndented"),factorySpace(a,g,"linePrefix",5)(rt)}function g(rt){const st=d.events[d.events.length-1];return st&&st[1].type==="linePrefix"&&st[2].sliceSerialize(st[1],!0).length>=4?b(rt):c(rt)}function b(rt){return rt===null?et(rt):markdownLineEnding(rt)?a.attempt(furtherStart,b,et)(rt):(a.enter("codeFlowValue"),_e(rt))}function _e(rt){return rt===null||markdownLineEnding(rt)?(a.exit("codeFlowValue"),b(rt)):(a.consume(rt),_e)}function et(rt){return a.exit("codeIndented"),e(rt)}}function tokenizeFurtherStart(a,e,c){const d=this;return h;function h(b){return d.parser.lazy[d.now().line]?c(b):markdownLineEnding(b)?(a.enter("lineEnding"),a.consume(b),a.exit("lineEnding"),h):factorySpace(a,g,"linePrefix",5)(b)}function g(b){const _e=d.events[d.events.length-1];return _e&&_e[1].type==="linePrefix"&&_e[2].sliceSerialize(_e[1],!0).length>=4?e(b):markdownLineEnding(b)?h(b):c(b)}}const codeText={name:"codeText",previous:previous$1,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(a){let e=a.length-4,c=3,d,h;if((a[c][1].type==="lineEnding"||a[c][1].type==="space")&&(a[e][1].type==="lineEnding"||a[e][1].type==="space")){for(d=c;++d<e;)if(a[d][1].type==="codeTextData"){a[c][1].type="codeTextPadding",a[e][1].type="codeTextPadding",c+=2,e-=2;break}}for(d=c-1,e++;++d<=e;)h===void 0?d!==e&&a[d][1].type!=="lineEnding"&&(h=d):(d===e||a[d][1].type==="lineEnding")&&(a[h][1].type="codeTextData",d!==h+2&&(a[h][1].end=a[d-1][1].end,a.splice(h+2,d-h-2),e-=d-h-2,d=h+2),h=void 0);return a}function previous$1(a){return a!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(a,e,c){let d=0,h,g;return b;function b($){return a.enter("codeText"),a.enter("codeTextSequence"),_e($)}function _e($){return $===96?(a.consume($),d++,_e):(a.exit("codeTextSequence"),et($))}function et($){return $===null?c($):$===32?(a.enter("space"),a.consume($),a.exit("space"),et):$===96?(g=a.enter("codeTextSequence"),h=0,st($)):markdownLineEnding($)?(a.enter("lineEnding"),a.consume($),a.exit("lineEnding"),et):(a.enter("codeTextData"),rt($))}function rt($){return $===null||$===32||$===96||markdownLineEnding($)?(a.exit("codeTextData"),et($)):(a.consume($),rt)}function st($){return $===96?(a.consume($),h++,st):h===d?(a.exit("codeTextSequence"),a.exit("codeText"),e($)):(g.type="codeTextData",rt($))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,c){const d=c??Number.POSITIVE_INFINITY;return d<this.left.length?this.left.slice(e,d):e>this.left.length?this.right.slice(this.right.length-d+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-d+this.left.length).reverse())}splice(e,c,d){const h=c||0;this.setCursor(Math.trunc(e));const g=this.right.splice(this.right.length-h,Number.POSITIVE_INFINITY);return d&&chunkedPush(this.left,d),g.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const c=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,c.reverse())}else{const c=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,c.reverse())}}}function chunkedPush(a,e){let c=0;if(e.length<1e4)a.push(...e);else for(;c<e.length;)a.push(...e.slice(c,c+1e4)),c+=1e4}function subtokenize(a){const e={};let c=-1,d,h,g,b,_e,et,rt;const st=new SpliceBuffer(a);for(;++c<st.length;){for(;c in e;)c=e[c];if(d=st.get(c),c&&d[1].type==="chunkFlow"&&st.get(c-1)[1].type==="listItemPrefix"&&(et=d[1]._tokenizer.events,g=0,g<et.length&&et[g][1].type==="lineEndingBlank"&&(g+=2),g<et.length&&et[g][1].type==="content"))for(;++g<et.length&&et[g][1].type!=="content";)et[g][1].type==="chunkText"&&(et[g][1]._isInFirstContentOfListItem=!0,g++);if(d[0]==="enter")d[1].contentType&&(Object.assign(e,subcontent(st,c)),c=e[c],rt=!0);else if(d[1]._container){for(g=c,h=void 0;g--;)if(b=st.get(g),b[1].type==="lineEnding"||b[1].type==="lineEndingBlank")b[0]==="enter"&&(h&&(st.get(h)[1].type="lineEndingBlank"),b[1].type="lineEnding",h=g);else if(!(b[1].type==="linePrefix"||b[1].type==="listItemIndent"))break;h&&(d[1].end={...st.get(h)[1].start},_e=st.slice(h,c),_e.unshift(d),st.splice(h,c-h+1,_e))}}return splice(a,0,Number.POSITIVE_INFINITY,st.slice(0)),!rt}function subcontent(a,e){const c=a.get(e)[1],d=a.get(e)[2];let h=e-1;const g=[];let b=c._tokenizer;b||(b=d.parser[c.contentType](c.start),c._contentTypeTextTrailing&&(b._contentTypeTextTrailing=!0));const _e=b.events,et=[],rt={};let st,$,_=-1,nt=c,it=0,ot=0;const lt=[ot];for(;nt;){for(;a.get(++h)[1]!==nt;);g.push(h),nt._tokenizer||(st=d.sliceStream(nt),nt.next||st.push(null),$&&b.defineSkip(nt.start),nt._isInFirstContentOfListItem&&(b._gfmTasklistFirstContentOfListItem=!0),b.write(st),nt._isInFirstContentOfListItem&&(b._gfmTasklistFirstContentOfListItem=void 0)),$=nt,nt=nt.next}for(nt=c;++_<_e.length;)_e[_][0]==="exit"&&_e[_-1][0]==="enter"&&_e[_][1].type===_e[_-1][1].type&&_e[_][1].start.line!==_e[_][1].end.line&&(ot=_+1,lt.push(ot),nt._tokenizer=void 0,nt.previous=void 0,nt=nt.next);for(b.events=[],nt?(nt._tokenizer=void 0,nt.previous=void 0):lt.pop(),_=lt.length;_--;){const at=_e.slice(lt[_],lt[_+1]),ct=g.pop();et.push([ct,ct+at.length-1]),a.splice(ct,2,at)}for(et.reverse(),_=-1;++_<et.length;)rt[it+et[_][0]]=it+et[_][1],it+=et[_][1]-et[_][0]-1;return rt}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(a){return subtokenize(a),a}function tokenizeContent(a,e){let c;return d;function d(_e){return a.enter("content"),c=a.enter("chunkContent",{contentType:"content"}),h(_e)}function h(_e){return _e===null?g(_e):markdownLineEnding(_e)?a.check(continuationConstruct,b,g)(_e):(a.consume(_e),h)}function g(_e){return a.exit("chunkContent"),a.exit("content"),e(_e)}function b(_e){return a.consume(_e),a.exit("chunkContent"),c.next=a.enter("chunkContent",{contentType:"content",previous:c}),c=c.next,h}}function tokenizeContinuation(a,e,c){const d=this;return h;function h(b){return a.exit("chunkContent"),a.enter("lineEnding"),a.consume(b),a.exit("lineEnding"),factorySpace(a,g,"linePrefix")}function g(b){if(b===null||markdownLineEnding(b))return c(b);const _e=d.events[d.events.length-1];return!d.parser.constructs.disable.null.includes("codeIndented")&&_e&&_e[1].type==="linePrefix"&&_e[2].sliceSerialize(_e[1],!0).length>=4?e(b):a.interrupt(d.parser.constructs.flow,c,e)(b)}}function factoryDestination(a,e,c,d,h,g,b,_e,et){const rt=et||Number.POSITIVE_INFINITY;let st=0;return $;function $(at){return at===60?(a.enter(d),a.enter(h),a.enter(g),a.consume(at),a.exit(g),_):at===null||at===32||at===41||asciiControl(at)?c(at):(a.enter(d),a.enter(b),a.enter(_e),a.enter("chunkString",{contentType:"string"}),ot(at))}function _(at){return at===62?(a.enter(g),a.consume(at),a.exit(g),a.exit(h),a.exit(d),e):(a.enter(_e),a.enter("chunkString",{contentType:"string"}),nt(at))}function nt(at){return at===62?(a.exit("chunkString"),a.exit(_e),_(at)):at===null||at===60||markdownLineEnding(at)?c(at):(a.consume(at),at===92?it:nt)}function it(at){return at===60||at===62||at===92?(a.consume(at),nt):nt(at)}function ot(at){return!st&&(at===null||at===41||markdownLineEndingOrSpace(at))?(a.exit("chunkString"),a.exit(_e),a.exit(b),a.exit(d),e(at)):st<rt&&at===40?(a.consume(at),st++,ot):at===41?(a.consume(at),st--,ot):at===null||at===32||at===40||asciiControl(at)?c(at):(a.consume(at),at===92?lt:ot)}function lt(at){return at===40||at===41||at===92?(a.consume(at),ot):ot(at)}}function factoryLabel(a,e,c,d,h,g){const b=this;let _e=0,et;return rt;function rt(nt){return a.enter(d),a.enter(h),a.consume(nt),a.exit(h),a.enter(g),st}function st(nt){return _e>999||nt===null||nt===91||nt===93&&!et||nt===94&&!_e&&"_hiddenFootnoteSupport"in b.parser.constructs?c(nt):nt===93?(a.exit(g),a.enter(h),a.consume(nt),a.exit(h),a.exit(d),e):markdownLineEnding(nt)?(a.enter("lineEnding"),a.consume(nt),a.exit("lineEnding"),st):(a.enter("chunkString",{contentType:"string"}),$(nt))}function $(nt){return nt===null||nt===91||nt===93||markdownLineEnding(nt)||_e++>999?(a.exit("chunkString"),st(nt)):(a.consume(nt),et||(et=!markdownSpace(nt)),nt===92?_:$)}function _(nt){return nt===91||nt===92||nt===93?(a.consume(nt),_e++,$):$(nt)}}function factoryTitle(a,e,c,d,h,g){let b;return _e;function _e(_){return _===34||_===39||_===40?(a.enter(d),a.enter(h),a.consume(_),a.exit(h),b=_===40?41:_,et):c(_)}function et(_){return _===b?(a.enter(h),a.consume(_),a.exit(h),a.exit(d),e):(a.enter(g),rt(_))}function rt(_){return _===b?(a.exit(g),et(b)):_===null?c(_):markdownLineEnding(_)?(a.enter("lineEnding"),a.consume(_),a.exit("lineEnding"),factorySpace(a,rt,"linePrefix")):(a.enter("chunkString",{contentType:"string"}),st(_))}function st(_){return _===b||_===null||markdownLineEnding(_)?(a.exit("chunkString"),rt(_)):(a.consume(_),_===92?$:st)}function $(_){return _===b||_===92?(a.consume(_),st):st(_)}}function factoryWhitespace(a,e){let c;return d;function d(h){return markdownLineEnding(h)?(a.enter("lineEnding"),a.consume(h),a.exit("lineEnding"),c=!0,d):markdownSpace(h)?factorySpace(a,d,c?"linePrefix":"lineSuffix")(h):e(h)}}const definition$1={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(a,e,c){const d=this;let h;return g;function g(nt){return a.enter("definition"),b(nt)}function b(nt){return factoryLabel.call(d,a,_e,c,"definitionLabel","definitionLabelMarker","definitionLabelString")(nt)}function _e(nt){return h=normalizeIdentifier(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)),nt===58?(a.enter("definitionMarker"),a.consume(nt),a.exit("definitionMarker"),et):c(nt)}function et(nt){return markdownLineEndingOrSpace(nt)?factoryWhitespace(a,rt)(nt):rt(nt)}function rt(nt){return factoryDestination(a,st,c,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(nt)}function st(nt){return a.attempt(titleBefore,$,$)(nt)}function $(nt){return markdownSpace(nt)?factorySpace(a,_,"whitespace")(nt):_(nt)}function _(nt){return nt===null||markdownLineEnding(nt)?(a.exit("definition"),d.parser.defined.push(h),e(nt)):c(nt)}}function tokenizeTitleBefore(a,e,c){return d;function d(_e){return markdownLineEndingOrSpace(_e)?factoryWhitespace(a,h)(_e):c(_e)}function h(_e){return factoryTitle(a,g,c,"definitionTitle","definitionTitleMarker","definitionTitleString")(_e)}function g(_e){return markdownSpace(_e)?factorySpace(a,b,"whitespace")(_e):b(_e)}function b(_e){return _e===null||markdownLineEnding(_e)?e(_e):c(_e)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(a,e,c){return d;function d(g){return a.enter("hardBreakEscape"),a.consume(g),h}function h(g){return markdownLineEnding(g)?(a.exit("hardBreakEscape"),e(g)):c(g)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(a,e){let c=a.length-2,d=3,h,g;return a[d][1].type==="whitespace"&&(d+=2),c-2>d&&a[c][1].type==="whitespace"&&(c-=2),a[c][1].type==="atxHeadingSequence"&&(d===c-1||c-4>d&&a[c-2][1].type==="whitespace")&&(c-=d+1===c?2:4),c>d&&(h={type:"atxHeadingText",start:a[d][1].start,end:a[c][1].end},g={type:"chunkText",start:a[d][1].start,end:a[c][1].end,contentType:"text"},splice(a,d,c-d+1,[["enter",h,e],["enter",g,e],["exit",g,e],["exit",h,e]])),a}function tokenizeHeadingAtx(a,e,c){let d=0;return h;function h(st){return a.enter("atxHeading"),g(st)}function g(st){return a.enter("atxHeadingSequence"),b(st)}function b(st){return st===35&&d++<6?(a.consume(st),b):st===null||markdownLineEndingOrSpace(st)?(a.exit("atxHeadingSequence"),_e(st)):c(st)}function _e(st){return st===35?(a.enter("atxHeadingSequence"),et(st)):st===null||markdownLineEnding(st)?(a.exit("atxHeading"),e(st)):markdownSpace(st)?factorySpace(a,_e,"whitespace")(st):(a.enter("atxHeadingText"),rt(st))}function et(st){return st===35?(a.consume(st),et):(a.exit("atxHeadingSequence"),_e(st))}function rt(st){return st===null||st===35||markdownLineEndingOrSpace(st)?(a.exit("atxHeadingText"),_e(st)):(a.consume(st),rt)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(a){let e=a.length;for(;e--&&!(a[e][0]==="enter"&&a[e][1].type==="htmlFlow"););return e>1&&a[e-2][1].type==="linePrefix"&&(a[e][1].start=a[e-2][1].start,a[e+1][1].start=a[e-2][1].start,a.splice(e-2,2)),a}function tokenizeHtmlFlow(a,e,c){const d=this;let h,g,b,_e,et;return rt;function rt(kt){return st(kt)}function st(kt){return a.enter("htmlFlow"),a.enter("htmlFlowData"),a.consume(kt),$}function $(kt){return kt===33?(a.consume(kt),_):kt===47?(a.consume(kt),g=!0,ot):kt===63?(a.consume(kt),h=3,d.interrupt?e:Ct):asciiAlpha(kt)?(a.consume(kt),b=String.fromCharCode(kt),lt):c(kt)}function _(kt){return kt===45?(a.consume(kt),h=2,nt):kt===91?(a.consume(kt),h=5,_e=0,it):asciiAlpha(kt)?(a.consume(kt),h=4,d.interrupt?e:Ct):c(kt)}function nt(kt){return kt===45?(a.consume(kt),d.interrupt?e:Ct):c(kt)}function it(kt){const Ut="CDATA[";return kt===Ut.charCodeAt(_e++)?(a.consume(kt),_e===Ut.length?d.interrupt?e:Pt:it):c(kt)}function ot(kt){return asciiAlpha(kt)?(a.consume(kt),b=String.fromCharCode(kt),lt):c(kt)}function lt(kt){if(kt===null||kt===47||kt===62||markdownLineEndingOrSpace(kt)){const Ut=kt===47,Jt=b.toLowerCase();return!Ut&&!g&&htmlRawNames.includes(Jt)?(h=1,d.interrupt?e(kt):Pt(kt)):htmlBlockNames.includes(b.toLowerCase())?(h=6,Ut?(a.consume(kt),at):d.interrupt?e(kt):Pt(kt)):(h=7,d.interrupt&&!d.parser.lazy[d.now().line]?c(kt):g?ct(kt):dt(kt))}return kt===45||asciiAlphanumeric(kt)?(a.consume(kt),b+=String.fromCharCode(kt),lt):c(kt)}function at(kt){return kt===62?(a.consume(kt),d.interrupt?e:Pt):c(kt)}function ct(kt){return markdownSpace(kt)?(a.consume(kt),ct):Et(kt)}function dt(kt){return kt===47?(a.consume(kt),Et):kt===58||kt===95||asciiAlpha(kt)?(a.consume(kt),ht):markdownSpace(kt)?(a.consume(kt),dt):Et(kt)}function ht(kt){return kt===45||kt===46||kt===58||kt===95||asciiAlphanumeric(kt)?(a.consume(kt),ht):pt(kt)}function pt(kt){return kt===61?(a.consume(kt),ft):markdownSpace(kt)?(a.consume(kt),pt):dt(kt)}function ft(kt){return kt===null||kt===60||kt===61||kt===62||kt===96?c(kt):kt===34||kt===39?(a.consume(kt),et=kt,mt):markdownSpace(kt)?(a.consume(kt),ft):xt(kt)}function mt(kt){return kt===et?(a.consume(kt),et=null,gt):kt===null||markdownLineEnding(kt)?c(kt):(a.consume(kt),mt)}function xt(kt){return kt===null||kt===34||kt===39||kt===47||kt===60||kt===61||kt===62||kt===96||markdownLineEndingOrSpace(kt)?pt(kt):(a.consume(kt),xt)}function gt(kt){return kt===47||kt===62||markdownSpace(kt)?dt(kt):c(kt)}function Et(kt){return kt===62?(a.consume(kt),St):c(kt)}function St(kt){return kt===null||markdownLineEnding(kt)?Pt(kt):markdownSpace(kt)?(a.consume(kt),St):c(kt)}function Pt(kt){return kt===45&&h===2?(a.consume(kt),Tt):kt===60&&h===1?(a.consume(kt),It):kt===62&&h===4?(a.consume(kt),en):kt===63&&h===3?(a.consume(kt),Ct):kt===93&&h===5?(a.consume(kt),Bt):markdownLineEnding(kt)&&(h===6||h===7)?(a.exit("htmlFlowData"),a.check(blankLineBefore,sn,Mt)(kt)):kt===null||markdownLineEnding(kt)?(a.exit("htmlFlowData"),Mt(kt)):(a.consume(kt),Pt)}function Mt(kt){return a.check(nonLazyContinuationStart,Rt,sn)(kt)}function Rt(kt){return a.enter("lineEnding"),a.consume(kt),a.exit("lineEnding"),Dt}function Dt(kt){return kt===null||markdownLineEnding(kt)?Mt(kt):(a.enter("htmlFlowData"),Pt(kt))}function Tt(kt){return kt===45?(a.consume(kt),Ct):Pt(kt)}function It(kt){return kt===47?(a.consume(kt),b="",Vt):Pt(kt)}function Vt(kt){if(kt===62){const Ut=b.toLowerCase();return htmlRawNames.includes(Ut)?(a.consume(kt),en):Pt(kt)}return asciiAlpha(kt)&&b.length<8?(a.consume(kt),b+=String.fromCharCode(kt),Vt):Pt(kt)}function Bt(kt){return kt===93?(a.consume(kt),Ct):Pt(kt)}function Ct(kt){return kt===62?(a.consume(kt),en):kt===45&&h===2?(a.consume(kt),Ct):Pt(kt)}function en(kt){return kt===null||markdownLineEnding(kt)?(a.exit("htmlFlowData"),sn(kt)):(a.consume(kt),en)}function sn(kt){return a.exit("htmlFlow"),e(kt)}}function tokenizeNonLazyContinuationStart(a,e,c){const d=this;return h;function h(b){return markdownLineEnding(b)?(a.enter("lineEnding"),a.consume(b),a.exit("lineEnding"),g):c(b)}function g(b){return d.parser.lazy[d.now().line]?c(b):e(b)}}function tokenizeBlankLineBefore(a,e,c){return d;function d(h){return a.enter("lineEnding"),a.consume(h),a.exit("lineEnding"),a.attempt(blankLine,e,c)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(a,e,c){const d=this;let h,g,b;return _e;function _e(Ct){return a.enter("htmlText"),a.enter("htmlTextData"),a.consume(Ct),et}function et(Ct){return Ct===33?(a.consume(Ct),rt):Ct===47?(a.consume(Ct),pt):Ct===63?(a.consume(Ct),dt):asciiAlpha(Ct)?(a.consume(Ct),xt):c(Ct)}function rt(Ct){return Ct===45?(a.consume(Ct),st):Ct===91?(a.consume(Ct),g=0,it):asciiAlpha(Ct)?(a.consume(Ct),ct):c(Ct)}function st(Ct){return Ct===45?(a.consume(Ct),nt):c(Ct)}function $(Ct){return Ct===null?c(Ct):Ct===45?(a.consume(Ct),_):markdownLineEnding(Ct)?(b=$,It(Ct)):(a.consume(Ct),$)}function _(Ct){return Ct===45?(a.consume(Ct),nt):$(Ct)}function nt(Ct){return Ct===62?Tt(Ct):Ct===45?_(Ct):$(Ct)}function it(Ct){const en="CDATA[";return Ct===en.charCodeAt(g++)?(a.consume(Ct),g===en.length?ot:it):c(Ct)}function ot(Ct){return Ct===null?c(Ct):Ct===93?(a.consume(Ct),lt):markdownLineEnding(Ct)?(b=ot,It(Ct)):(a.consume(Ct),ot)}function lt(Ct){return Ct===93?(a.consume(Ct),at):ot(Ct)}function at(Ct){return Ct===62?Tt(Ct):Ct===93?(a.consume(Ct),at):ot(Ct)}function ct(Ct){return Ct===null||Ct===62?Tt(Ct):markdownLineEnding(Ct)?(b=ct,It(Ct)):(a.consume(Ct),ct)}function dt(Ct){return Ct===null?c(Ct):Ct===63?(a.consume(Ct),ht):markdownLineEnding(Ct)?(b=dt,It(Ct)):(a.consume(Ct),dt)}function ht(Ct){return Ct===62?Tt(Ct):dt(Ct)}function pt(Ct){return asciiAlpha(Ct)?(a.consume(Ct),ft):c(Ct)}function ft(Ct){return Ct===45||asciiAlphanumeric(Ct)?(a.consume(Ct),ft):mt(Ct)}function mt(Ct){return markdownLineEnding(Ct)?(b=mt,It(Ct)):markdownSpace(Ct)?(a.consume(Ct),mt):Tt(Ct)}function xt(Ct){return Ct===45||asciiAlphanumeric(Ct)?(a.consume(Ct),xt):Ct===47||Ct===62||markdownLineEndingOrSpace(Ct)?gt(Ct):c(Ct)}function gt(Ct){return Ct===47?(a.consume(Ct),Tt):Ct===58||Ct===95||asciiAlpha(Ct)?(a.consume(Ct),Et):markdownLineEnding(Ct)?(b=gt,It(Ct)):markdownSpace(Ct)?(a.consume(Ct),gt):Tt(Ct)}function Et(Ct){return Ct===45||Ct===46||Ct===58||Ct===95||asciiAlphanumeric(Ct)?(a.consume(Ct),Et):St(Ct)}function St(Ct){return Ct===61?(a.consume(Ct),Pt):markdownLineEnding(Ct)?(b=St,It(Ct)):markdownSpace(Ct)?(a.consume(Ct),St):gt(Ct)}function Pt(Ct){return Ct===null||Ct===60||Ct===61||Ct===62||Ct===96?c(Ct):Ct===34||Ct===39?(a.consume(Ct),h=Ct,Mt):markdownLineEnding(Ct)?(b=Pt,It(Ct)):markdownSpace(Ct)?(a.consume(Ct),Pt):(a.consume(Ct),Rt)}function Mt(Ct){return Ct===h?(a.consume(Ct),h=void 0,Dt):Ct===null?c(Ct):markdownLineEnding(Ct)?(b=Mt,It(Ct)):(a.consume(Ct),Mt)}function Rt(Ct){return Ct===null||Ct===34||Ct===39||Ct===60||Ct===61||Ct===96?c(Ct):Ct===47||Ct===62||markdownLineEndingOrSpace(Ct)?gt(Ct):(a.consume(Ct),Rt)}function Dt(Ct){return Ct===47||Ct===62||markdownLineEndingOrSpace(Ct)?gt(Ct):c(Ct)}function Tt(Ct){return Ct===62?(a.consume(Ct),a.exit("htmlTextData"),a.exit("htmlText"),e):c(Ct)}function It(Ct){return a.exit("htmlTextData"),a.enter("lineEnding"),a.consume(Ct),a.exit("lineEnding"),Vt}function Vt(Ct){return markdownSpace(Ct)?factorySpace(a,Bt,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ct):Bt(Ct)}function Bt(Ct){return a.enter("htmlTextData"),b(Ct)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(a){let e=-1;const c=[];for(;++e<a.length;){const d=a[e][1];if(c.push(a[e]),d.type==="labelImage"||d.type==="labelLink"||d.type==="labelEnd"){const h=d.type==="labelImage"?4:2;d.type="data",e+=h}}return a.length!==c.length&&splice(a,0,a.length,c),a}function resolveToLabelEnd(a,e){let c=a.length,d=0,h,g,b,_e;for(;c--;)if(h=a[c][1],g){if(h.type==="link"||h.type==="labelLink"&&h._inactive)break;a[c][0]==="enter"&&h.type==="labelLink"&&(h._inactive=!0)}else if(b){if(a[c][0]==="enter"&&(h.type==="labelImage"||h.type==="labelLink")&&!h._balanced&&(g=c,h.type!=="labelLink")){d=2;break}}else h.type==="labelEnd"&&(b=c);const et={type:a[g][1].type==="labelLink"?"link":"image",start:{...a[g][1].start},end:{...a[a.length-1][1].end}},rt={type:"label",start:{...a[g][1].start},end:{...a[b][1].end}},st={type:"labelText",start:{...a[g+d+2][1].end},end:{...a[b-2][1].start}};return _e=[["enter",et,e],["enter",rt,e]],_e=push(_e,a.slice(g+1,g+d+3)),_e=push(_e,[["enter",st,e]]),_e=push(_e,resolveAll(e.parser.constructs.insideSpan.null,a.slice(g+d+4,b-3),e)),_e=push(_e,[["exit",st,e],a[b-2],a[b-1],["exit",rt,e]]),_e=push(_e,a.slice(b+1)),_e=push(_e,[["exit",et,e]]),splice(a,g,a.length,_e),a}function tokenizeLabelEnd(a,e,c){const d=this;let h=d.events.length,g,b;for(;h--;)if((d.events[h][1].type==="labelImage"||d.events[h][1].type==="labelLink")&&!d.events[h][1]._balanced){g=d.events[h][1];break}return _e;function _e(_){return g?g._inactive?$(_):(b=d.parser.defined.includes(normalizeIdentifier(d.sliceSerialize({start:g.end,end:d.now()}))),a.enter("labelEnd"),a.enter("labelMarker"),a.consume(_),a.exit("labelMarker"),a.exit("labelEnd"),et):c(_)}function et(_){return _===40?a.attempt(resourceConstruct,st,b?st:$)(_):_===91?a.attempt(referenceFullConstruct,st,b?rt:$)(_):b?st(_):$(_)}function rt(_){return a.attempt(referenceCollapsedConstruct,st,$)(_)}function st(_){return e(_)}function $(_){return g._balanced=!0,c(_)}}function tokenizeResource(a,e,c){return d;function d($){return a.enter("resource"),a.enter("resourceMarker"),a.consume($),a.exit("resourceMarker"),h}function h($){return markdownLineEndingOrSpace($)?factoryWhitespace(a,g)($):g($)}function g($){return $===41?st($):factoryDestination(a,b,_e,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)($)}function b($){return markdownLineEndingOrSpace($)?factoryWhitespace(a,et)($):st($)}function _e($){return c($)}function et($){return $===34||$===39||$===40?factoryTitle(a,rt,c,"resourceTitle","resourceTitleMarker","resourceTitleString")($):st($)}function rt($){return markdownLineEndingOrSpace($)?factoryWhitespace(a,st)($):st($)}function st($){return $===41?(a.enter("resourceMarker"),a.consume($),a.exit("resourceMarker"),a.exit("resource"),e):c($)}}function tokenizeReferenceFull(a,e,c){const d=this;return h;function h(_e){return factoryLabel.call(d,a,g,b,"reference","referenceMarker","referenceString")(_e)}function g(_e){return d.parser.defined.includes(normalizeIdentifier(d.sliceSerialize(d.events[d.events.length-1][1]).slice(1,-1)))?e(_e):c(_e)}function b(_e){return c(_e)}}function tokenizeReferenceCollapsed(a,e,c){return d;function d(g){return a.enter("reference"),a.enter("referenceMarker"),a.consume(g),a.exit("referenceMarker"),h}function h(g){return g===93?(a.enter("referenceMarker"),a.consume(g),a.exit("referenceMarker"),a.exit("reference"),e):c(g)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(a,e,c){const d=this;return h;function h(_e){return a.enter("labelImage"),a.enter("labelImageMarker"),a.consume(_e),a.exit("labelImageMarker"),g}function g(_e){return _e===91?(a.enter("labelMarker"),a.consume(_e),a.exit("labelMarker"),a.exit("labelImage"),b):c(_e)}function b(_e){return _e===94&&"_hiddenFootnoteSupport"in d.parser.constructs?c(_e):e(_e)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(a,e,c){const d=this;return h;function h(b){return a.enter("labelLink"),a.enter("labelMarker"),a.consume(b),a.exit("labelMarker"),a.exit("labelLink"),g}function g(b){return b===94&&"_hiddenFootnoteSupport"in d.parser.constructs?c(b):e(b)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(a,e){return c;function c(d){return a.enter("lineEnding"),a.consume(d),a.exit("lineEnding"),factorySpace(a,e,"linePrefix")}}const thematicBreak$2={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(a,e,c){let d=0,h;return g;function g(rt){return a.enter("thematicBreak"),b(rt)}function b(rt){return h=rt,_e(rt)}function _e(rt){return rt===h?(a.enter("thematicBreakSequence"),et(rt)):d>=3&&(rt===null||markdownLineEnding(rt))?(a.exit("thematicBreak"),e(rt)):c(rt)}function et(rt){return rt===h?(a.consume(rt),d++,et):(a.exit("thematicBreakSequence"),markdownSpace(rt)?factorySpace(a,_e,"whitespace")(rt):_e(rt))}}const list$2={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent$1};function tokenizeListStart(a,e,c){const d=this,h=d.events[d.events.length-1];let g=h&&h[1].type==="linePrefix"?h[2].sliceSerialize(h[1],!0).length:0,b=0;return _e;function _e(nt){const it=d.containerState.type||(nt===42||nt===43||nt===45?"listUnordered":"listOrdered");if(it==="listUnordered"?!d.containerState.marker||nt===d.containerState.marker:asciiDigit(nt)){if(d.containerState.type||(d.containerState.type=it,a.enter(it,{_container:!0})),it==="listUnordered")return a.enter("listItemPrefix"),nt===42||nt===45?a.check(thematicBreak$2,c,rt)(nt):rt(nt);if(!d.interrupt||nt===49)return a.enter("listItemPrefix"),a.enter("listItemValue"),et(nt)}return c(nt)}function et(nt){return asciiDigit(nt)&&++b<10?(a.consume(nt),et):(!d.interrupt||b<2)&&(d.containerState.marker?nt===d.containerState.marker:nt===41||nt===46)?(a.exit("listItemValue"),rt(nt)):c(nt)}function rt(nt){return a.enter("listItemMarker"),a.consume(nt),a.exit("listItemMarker"),d.containerState.marker=d.containerState.marker||nt,a.check(blankLine,d.interrupt?c:st,a.attempt(listItemPrefixWhitespaceConstruct,_,$))}function st(nt){return d.containerState.initialBlankLine=!0,g++,_(nt)}function $(nt){return markdownSpace(nt)?(a.enter("listItemPrefixWhitespace"),a.consume(nt),a.exit("listItemPrefixWhitespace"),_):c(nt)}function _(nt){return d.containerState.size=g+d.sliceSerialize(a.exit("listItemPrefix"),!0).length,e(nt)}}function tokenizeListContinuation(a,e,c){const d=this;return d.containerState._closeFlow=void 0,a.check(blankLine,h,g);function h(_e){return d.containerState.furtherBlankLines=d.containerState.furtherBlankLines||d.containerState.initialBlankLine,factorySpace(a,e,"listItemIndent",d.containerState.size+1)(_e)}function g(_e){return d.containerState.furtherBlankLines||!markdownSpace(_e)?(d.containerState.furtherBlankLines=void 0,d.containerState.initialBlankLine=void 0,b(_e)):(d.containerState.furtherBlankLines=void 0,d.containerState.initialBlankLine=void 0,a.attempt(indentConstruct,e,b)(_e))}function b(_e){return d.containerState._closeFlow=!0,d.interrupt=void 0,factorySpace(a,a.attempt(list$2,e,c),"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_e)}}function tokenizeIndent$1(a,e,c){const d=this;return factorySpace(a,h,"listItemIndent",d.containerState.size+1);function h(g){const b=d.events[d.events.length-1];return b&&b[1].type==="listItemIndent"&&b[2].sliceSerialize(b[1],!0).length===d.containerState.size?e(g):c(g)}}function tokenizeListEnd(a){a.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(a,e,c){const d=this;return factorySpace(a,h,"listItemPrefixWhitespace",d.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function h(g){const b=d.events[d.events.length-1];return!markdownSpace(g)&&b&&b[1].type==="listItemPrefixWhitespace"?e(g):c(g)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(a,e){let c=a.length,d,h,g;for(;c--;)if(a[c][0]==="enter"){if(a[c][1].type==="content"){d=c;break}a[c][1].type==="paragraph"&&(h=c)}else a[c][1].type==="content"&&a.splice(c,1),!g&&a[c][1].type==="definition"&&(g=c);const b={type:"setextHeading",start:{...a[d][1].start},end:{...a[a.length-1][1].end}};return a[h][1].type="setextHeadingText",g?(a.splice(h,0,["enter",b,e]),a.splice(g+1,0,["exit",a[d][1],e]),a[d][1].end={...a[g][1].end}):a[d][1]=b,a.push(["exit",b,e]),a}function tokenizeSetextUnderline(a,e,c){const d=this;let h;return g;function g(rt){let st=d.events.length,$;for(;st--;)if(d.events[st][1].type!=="lineEnding"&&d.events[st][1].type!=="linePrefix"&&d.events[st][1].type!=="content"){$=d.events[st][1].type==="paragraph";break}return!d.parser.lazy[d.now().line]&&(d.interrupt||$)?(a.enter("setextHeadingLine"),h=rt,b(rt)):c(rt)}function b(rt){return a.enter("setextHeadingLineSequence"),_e(rt)}function _e(rt){return rt===h?(a.consume(rt),_e):(a.exit("setextHeadingLineSequence"),markdownSpace(rt)?factorySpace(a,et,"lineSuffix")(rt):et(rt))}function et(rt){return rt===null||markdownLineEnding(rt)?(a.exit("setextHeadingLine"),e(rt)):c(rt)}}const flow$1={tokenize:initializeFlow};function initializeFlow(a){const e=this,c=a.attempt(blankLine,d,a.attempt(this.parser.constructs.flowInitial,h,factorySpace(a,a.attempt(this.parser.constructs.flow,h,a.attempt(content,h)),"linePrefix")));return c;function d(g){if(g===null){a.consume(g);return}return a.enter("lineEndingBlank"),a.consume(g),a.exit("lineEndingBlank"),e.currentConstruct=void 0,c}function h(g){if(g===null){a.consume(g);return}return a.enter("lineEnding"),a.consume(g),a.exit("lineEnding"),e.currentConstruct=void 0,c}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$4=initializeFactory("text");function initializeFactory(a){return{resolveAll:createResolver(a==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(c){const d=this,h=this.parser.constructs[a],g=c.attempt(h,b,_e);return b;function b(st){return rt(st)?g(st):_e(st)}function _e(st){if(st===null){c.consume(st);return}return c.enter("data"),c.consume(st),et}function et(st){return rt(st)?(c.exit("data"),g(st)):(c.consume(st),et)}function rt(st){if(st===null)return!0;const $=h[st];let _=-1;if($)for(;++_<$.length;){const nt=$[_];if(!nt.previous||nt.previous.call(d,d.previous))return!0}return!1}}}function createResolver(a){return e;function e(c,d){let h=-1,g;for(;++h<=c.length;)g===void 0?c[h]&&c[h][1].type==="data"&&(g=h,h++):(!c[h]||c[h][1].type!=="data")&&(h!==g+2&&(c[g][1].end=c[h-1][1].end,c.splice(g+2,h-g-2),h=g+2),g=void 0);return a?a(c,d):c}}function resolveAllLineSuffixes(a,e){let c=0;for(;++c<=a.length;)if((c===a.length||a[c][1].type==="lineEnding")&&a[c-1][1].type==="data"){const d=a[c-1][1],h=e.sliceStream(d);let g=h.length,b=-1,_e=0,et;for(;g--;){const rt=h[g];if(typeof rt=="string"){for(b=rt.length;rt.charCodeAt(b-1)===32;)_e++,b--;if(b)break;b=-1}else if(rt===-2)et=!0,_e++;else if(rt!==-1){g++;break}}if(e._contentTypeTextTrailing&&c===a.length&&(_e=0),_e){const rt={type:c===a.length||et||_e<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:g?b:d.start._bufferIndex+b,_index:d.start._index+g,line:d.end.line,column:d.end.column-_e,offset:d.end.offset-_e},end:{...d.end}};d.end={...rt.start},d.start.offset===d.end.offset?Object.assign(d,rt):(a.splice(c,0,["enter",rt,e],["exit",rt,e]),c+=2)}c++}return a}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition$1},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$2,45:[setextUnderline,thematicBreak$2],60:htmlFlow,61:setextUnderline,95:thematicBreak$2,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$3={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$3},Symbol.toStringTag,{value:"Module"}));function createTokenizer(a,e,c){let d={_bufferIndex:-1,_index:0,line:c&&c.line||1,column:c&&c.column||1,offset:c&&c.offset||0};const h={},g=[];let b=[],_e=[];const et={attempt:mt(pt),check:mt(ft),consume:ct,enter:dt,exit:ht,interrupt:mt(ft,{interrupt:!0})},rt={code:null,containerState:{},defineSkip:ot,events:[],now:it,parser:a,previous:null,sliceSerialize:_,sliceStream:nt,write:$};let st=e.tokenize.call(rt,et);return e.resolveAll&&g.push(e),rt;function $(St){return b=push(b,St),lt(),b[b.length-1]!==null?[]:(xt(e,0),rt.events=resolveAll(g,rt.events,rt),rt.events)}function _(St,Pt){return serializeChunks(nt(St),Pt)}function nt(St){return sliceChunks(b,St)}function it(){const{_bufferIndex:St,_index:Pt,line:Mt,column:Rt,offset:Dt}=d;return{_bufferIndex:St,_index:Pt,line:Mt,column:Rt,offset:Dt}}function ot(St){h[St.line]=St.column,Et()}function lt(){let St;for(;d._index<b.length;){const Pt=b[d._index];if(typeof Pt=="string")for(St=d._index,d._bufferIndex<0&&(d._bufferIndex=0);d._index===St&&d._bufferIndex<Pt.length;)at(Pt.charCodeAt(d._bufferIndex));else at(Pt)}}function at(St){st=st(St)}function ct(St){markdownLineEnding(St)?(d.line++,d.column=1,d.offset+=St===-3?2:1,Et()):St!==-1&&(d.column++,d.offset++),d._bufferIndex<0?d._index++:(d._bufferIndex++,d._bufferIndex===b[d._index].length&&(d._bufferIndex=-1,d._index++)),rt.previous=St}function dt(St,Pt){const Mt=Pt||{};return Mt.type=St,Mt.start=it(),rt.events.push(["enter",Mt,rt]),_e.push(Mt),Mt}function ht(St){const Pt=_e.pop();return Pt.end=it(),rt.events.push(["exit",Pt,rt]),Pt}function pt(St,Pt){xt(St,Pt.from)}function ft(St,Pt){Pt.restore()}function mt(St,Pt){return Mt;function Mt(Rt,Dt,Tt){let It,Vt,Bt,Ct;return Array.isArray(Rt)?sn(Rt):"tokenize"in Rt?sn([Rt]):en(Rt);function en(tn){return Gt;function Gt(hn){const fn=hn!==null&&tn[hn],gn=hn!==null&&tn.null,kn=[...Array.isArray(fn)?fn:fn?[fn]:[],...Array.isArray(gn)?gn:gn?[gn]:[]];return sn(kn)(hn)}}function sn(tn){return It=tn,Vt=0,tn.length===0?Tt:kt(tn[Vt])}function kt(tn){return Gt;function Gt(hn){return Ct=gt(),Bt=tn,tn.partial||(rt.currentConstruct=tn),tn.name&&rt.parser.constructs.disable.null.includes(tn.name)?Jt():tn.tokenize.call(Pt?Object.assign(Object.create(rt),Pt):rt,et,Ut,Jt)(hn)}}function Ut(tn){return St(Bt,Ct),Dt}function Jt(tn){return Ct.restore(),++Vt<It.length?kt(It[Vt]):Tt}}}function xt(St,Pt){St.resolveAll&&!g.includes(St)&&g.push(St),St.resolve&&splice(rt.events,Pt,rt.events.length-Pt,St.resolve(rt.events.slice(Pt),rt)),St.resolveTo&&(rt.events=St.resolveTo(rt.events,rt))}function gt(){const St=it(),Pt=rt.previous,Mt=rt.currentConstruct,Rt=rt.events.length,Dt=Array.from(_e);return{from:Rt,restore:Tt};function Tt(){d=St,rt.previous=Pt,rt.currentConstruct=Mt,rt.events.length=Rt,_e=Dt,Et()}}function Et(){d.line in h&&d.column<2&&(d.column=h[d.line],d.offset+=h[d.line]-1)}}function sliceChunks(a,e){const c=e.start._index,d=e.start._bufferIndex,h=e.end._index,g=e.end._bufferIndex;let b;if(c===h)b=[a[c].slice(d,g)];else{if(b=a.slice(c,h),d>-1){const _e=b[0];typeof _e=="string"?b[0]=_e.slice(d):b.shift()}g>0&&b.push(a[h].slice(0,g))}return b}function serializeChunks(a,e){let c=-1;const d=[];let h;for(;++c<a.length;){const g=a[c];let b;if(typeof g=="string")b=g;else switch(g){case-5:{b="\r";break}case-4:{b=`
`;break}case-3:{b=`\r
`;break}case-2:{b=e?" ":"	";break}case-1:{if(!e&&h)continue;b=" ";break}default:b=String.fromCharCode(g)}h=g===-2,d.push(b)}return d.join("")}function parse(a){const d={constructs:combineExtensions([defaultConstructs,...(a||{}).extensions||[]]),content:h(content$1),defined:[],document:h(document$2),flow:h(flow$1),lazy:{},string:h(string$1),text:h(text$4)};return d;function h(g){return b;function b(_e){return createTokenizer(d,g,_e)}}}function postprocess(a){for(;!subtokenize(a););return a}const search=/[\0\t\n\r]/g;function preprocess(){let a=1,e="",c=!0,d;return h;function h(g,b,_e){const et=[];let rt,st,$,_,nt;for(g=e+(typeof g=="string"?g.toString():new TextDecoder(b||void 0).decode(g)),$=0,e="",c&&(g.charCodeAt(0)===65279&&$++,c=void 0);$<g.length;){if(search.lastIndex=$,rt=search.exec(g),_=rt&&rt.index!==void 0?rt.index:g.length,nt=g.charCodeAt(_),!rt){e=g.slice($);break}if(nt===10&&$===_&&d)et.push(-3),d=void 0;else switch(d&&(et.push(-5),d=void 0),$<_&&(et.push(g.slice($,_)),a+=_-$),nt){case 0:{et.push(65533),a++;break}case 9:{for(st=Math.ceil(a/4)*4,et.push(-2);a++<st;)et.push(-1);break}case 10:{et.push(-4),a=1;break}default:d=!0,a=1}$=_+1}return _e&&(d&&et.push(-5),e&&et.push(e),et.push(null)),et}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(a){return a.replace(characterEscapeOrReference,decode)}function decode(a,e,c){if(e)return e;if(c.charCodeAt(0)===35){const h=c.charCodeAt(1),g=h===120||h===88;return decodeNumericCharacterReference(c.slice(g?2:1),g?16:10)}return decodeNamedCharacterReference(c)||a}const own$2={}.hasOwnProperty;function fromMarkdown(a,e,c){return typeof e!="string"&&(c=e,e=void 0),compiler(c)(postprocess(parse(c).document().write(preprocess()(a,e,!0))))}function compiler(a){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:g(or),autolinkProtocol:gt,autolinkEmail:gt,atxHeading:g(Ln),blockQuote:g(gn),characterEscape:gt,characterReference:gt,codeFenced:g(kn),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:g(kn,b),codeText:g(On,b),codeTextData:gt,data:gt,codeFlowValue:gt,definition:g(un),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:g(Sn),hardBreakEscape:g($n),hardBreakTrailing:g($n),htmlFlow:g(Wn,b),htmlFlowData:gt,htmlText:g(Wn,b),htmlTextData:gt,image:g(Pn),label:b,link:g(or),listItem:g(Xt),listItemValue:_,listOrdered:g(Kt,$),listUnordered:g(Kt),paragraph:g(on),reference:kt,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:g(Ln),strong:g(vn),thematicBreak:g(yn)},exit:{atxHeading:et(),atxHeadingSequence:pt,autolink:et(),autolinkEmail:fn,autolinkProtocol:hn,blockQuote:et(),characterEscapeValue:Et,characterReferenceMarkerHexadecimal:Jt,characterReferenceMarkerNumeric:Jt,characterReferenceValue:tn,characterReference:Gt,codeFenced:et(lt),codeFencedFence:ot,codeFencedFenceInfo:nt,codeFencedFenceMeta:it,codeFlowValue:Et,codeIndented:et(at),codeText:et(Dt),codeTextData:Et,data:Et,definition:et(),definitionDestinationString:ht,definitionLabelString:ct,definitionTitleString:dt,emphasis:et(),hardBreakEscape:et(Pt),hardBreakTrailing:et(Pt),htmlFlow:et(Mt),htmlFlowData:Et,htmlText:et(Rt),htmlTextData:Et,image:et(It),label:Bt,labelText:Vt,lineEnding:St,link:et(Tt),listItem:et(),listOrdered:et(),listUnordered:et(),paragraph:et(),referenceString:Ut,resourceDestinationString:Ct,resourceTitleString:en,resource:sn,setextHeading:et(xt),setextHeadingLineSequence:mt,setextHeadingText:ft,strong:et(),thematicBreak:et()}};configure(e,(a||{}).mdastExtensions||[]);const c={};return d;function d(nn){let Qt={type:"root",children:[]};const bn={stack:[Qt],tokenStack:[],config:e,enter:_e,exit:rt,buffer:b,resume:st,data:c},An=[];let In=-1;for(;++In<nn.length;)if(nn[In][1].type==="listOrdered"||nn[In][1].type==="listUnordered")if(nn[In][0]==="enter")An.push(In);else{const Un=An.pop();In=h(nn,Un,In)}for(In=-1;++In<nn.length;){const Un=e[nn[In][0]];own$2.call(Un,nn[In][1].type)&&Un[nn[In][1].type].call(Object.assign({sliceSerialize:nn[In][2].sliceSerialize},bn),nn[In][1])}if(bn.tokenStack.length>0){const Un=bn.tokenStack[bn.tokenStack.length-1];(Un[1]||defaultOnError).call(bn,void 0,Un[0])}for(Qt.position={start:point(nn.length>0?nn[0][1].start:{line:1,column:1,offset:0}),end:point(nn.length>0?nn[nn.length-2][1].end:{line:1,column:1,offset:0})},In=-1;++In<e.transforms.length;)Qt=e.transforms[In](Qt)||Qt;return Qt}function h(nn,Qt,bn){let An=Qt-1,In=-1,Un=!1,Vn,ir,Fn,cr;for(;++An<=bn;){const Gn=nn[An];switch(Gn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Gn[0]==="enter"?In++:In--,cr=void 0;break}case"lineEndingBlank":{Gn[0]==="enter"&&(Vn&&!cr&&!In&&!Fn&&(Fn=An),cr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:cr=void 0}if(!In&&Gn[0]==="enter"&&Gn[1].type==="listItemPrefix"||In===-1&&Gn[0]==="exit"&&(Gn[1].type==="listUnordered"||Gn[1].type==="listOrdered")){if(Vn){let Cr=An;for(ir=void 0;Cr--;){const kr=nn[Cr];if(kr[1].type==="lineEnding"||kr[1].type==="lineEndingBlank"){if(kr[0]==="exit")continue;ir&&(nn[ir][1].type="lineEndingBlank",Un=!0),kr[1].type="lineEnding",ir=Cr}else if(!(kr[1].type==="linePrefix"||kr[1].type==="blockQuotePrefix"||kr[1].type==="blockQuotePrefixWhitespace"||kr[1].type==="blockQuoteMarker"||kr[1].type==="listItemIndent"))break}Fn&&(!ir||Fn<ir)&&(Vn._spread=!0),Vn.end=Object.assign({},ir?nn[ir][1].start:Gn[1].end),nn.splice(ir||An,0,["exit",Vn,Gn[2]]),An++,bn++}if(Gn[1].type==="listItemPrefix"){const Cr={type:"listItem",_spread:!1,start:Object.assign({},Gn[1].start),end:void 0};Vn=Cr,nn.splice(An,0,["enter",Cr,Gn[2]]),An++,bn++,Fn=void 0,cr=!0}}}return nn[Qt][1]._spread=Un,bn}function g(nn,Qt){return bn;function bn(An){_e.call(this,nn(An),An),Qt&&Qt.call(this,An)}}function b(){this.stack.push({type:"fragment",children:[]})}function _e(nn,Qt,bn){this.stack[this.stack.length-1].children.push(nn),this.stack.push(nn),this.tokenStack.push([Qt,bn||void 0]),nn.position={start:point(Qt.start),end:void 0}}function et(nn){return Qt;function Qt(bn){nn&&nn.call(this,bn),rt.call(this,bn)}}function rt(nn,Qt){const bn=this.stack.pop(),An=this.tokenStack.pop();if(An)An[0].type!==nn.type&&(Qt?Qt.call(this,nn,An[0]):(An[1]||defaultOnError).call(this,nn,An[0]));else throw new Error("Cannot close `"+nn.type+"` ("+stringifyPosition({start:nn.start,end:nn.end})+"): it’s not open");bn.position.end=point(nn.end)}function st(){return toString$1(this.stack.pop())}function $(){this.data.expectingFirstListItemValue=!0}function _(nn){if(this.data.expectingFirstListItemValue){const Qt=this.stack[this.stack.length-2];Qt.start=Number.parseInt(this.sliceSerialize(nn),10),this.data.expectingFirstListItemValue=void 0}}function nt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.lang=nn}function it(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.meta=nn}function ot(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function lt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.value=nn.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function at(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.value=nn.replace(/(\r?\n|\r)$/g,"")}function ct(nn){const Qt=this.resume(),bn=this.stack[this.stack.length-1];bn.label=Qt,bn.identifier=normalizeIdentifier(this.sliceSerialize(nn)).toLowerCase()}function dt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.title=nn}function ht(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.url=nn}function pt(nn){const Qt=this.stack[this.stack.length-1];if(!Qt.depth){const bn=this.sliceSerialize(nn).length;Qt.depth=bn}}function ft(){this.data.setextHeadingSlurpLineEnding=!0}function mt(nn){const Qt=this.stack[this.stack.length-1];Qt.depth=this.sliceSerialize(nn).codePointAt(0)===61?1:2}function xt(){this.data.setextHeadingSlurpLineEnding=void 0}function gt(nn){const bn=this.stack[this.stack.length-1].children;let An=bn[bn.length-1];(!An||An.type!=="text")&&(An=Cn(),An.position={start:point(nn.start),end:void 0},bn.push(An)),this.stack.push(An)}function Et(nn){const Qt=this.stack.pop();Qt.value+=this.sliceSerialize(nn),Qt.position.end=point(nn.end)}function St(nn){const Qt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const bn=Qt.children[Qt.children.length-1];bn.position.end=point(nn.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Qt.type)&&(gt.call(this,nn),Et.call(this,nn))}function Pt(){this.data.atHardBreak=!0}function Mt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.value=nn}function Rt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.value=nn}function Dt(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.value=nn}function Tt(){const nn=this.stack[this.stack.length-1];if(this.data.inReference){const Qt=this.data.referenceType||"shortcut";nn.type+="Reference",nn.referenceType=Qt,delete nn.url,delete nn.title}else delete nn.identifier,delete nn.label;this.data.referenceType=void 0}function It(){const nn=this.stack[this.stack.length-1];if(this.data.inReference){const Qt=this.data.referenceType||"shortcut";nn.type+="Reference",nn.referenceType=Qt,delete nn.url,delete nn.title}else delete nn.identifier,delete nn.label;this.data.referenceType=void 0}function Vt(nn){const Qt=this.sliceSerialize(nn),bn=this.stack[this.stack.length-2];bn.label=decodeString(Qt),bn.identifier=normalizeIdentifier(Qt).toLowerCase()}function Bt(){const nn=this.stack[this.stack.length-1],Qt=this.resume(),bn=this.stack[this.stack.length-1];if(this.data.inReference=!0,bn.type==="link"){const An=nn.children;bn.children=An}else bn.alt=Qt}function Ct(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.url=nn}function en(){const nn=this.resume(),Qt=this.stack[this.stack.length-1];Qt.title=nn}function sn(){this.data.inReference=void 0}function kt(){this.data.referenceType="collapsed"}function Ut(nn){const Qt=this.resume(),bn=this.stack[this.stack.length-1];bn.label=Qt,bn.identifier=normalizeIdentifier(this.sliceSerialize(nn)).toLowerCase(),this.data.referenceType="full"}function Jt(nn){this.data.characterReferenceType=nn.type}function tn(nn){const Qt=this.sliceSerialize(nn),bn=this.data.characterReferenceType;let An;bn?(An=decodeNumericCharacterReference(Qt,bn==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):An=decodeNamedCharacterReference(Qt);const In=this.stack[this.stack.length-1];In.value+=An}function Gt(nn){const Qt=this.stack.pop();Qt.position.end=point(nn.end)}function hn(nn){Et.call(this,nn);const Qt=this.stack[this.stack.length-1];Qt.url=this.sliceSerialize(nn)}function fn(nn){Et.call(this,nn);const Qt=this.stack[this.stack.length-1];Qt.url="mailto:"+this.sliceSerialize(nn)}function gn(){return{type:"blockquote",children:[]}}function kn(){return{type:"code",lang:null,meta:null,value:""}}function On(){return{type:"inlineCode",value:""}}function un(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Sn(){return{type:"emphasis",children:[]}}function Ln(){return{type:"heading",depth:0,children:[]}}function $n(){return{type:"break"}}function Wn(){return{type:"html",value:""}}function Pn(){return{type:"image",title:null,url:"",alt:null}}function or(){return{type:"link",title:null,url:"",children:[]}}function Kt(nn){return{type:"list",ordered:nn.type==="listOrdered",start:null,spread:nn._spread,children:[]}}function Xt(nn){return{type:"listItem",spread:nn._spread,checked:null,children:[]}}function on(){return{type:"paragraph",children:[]}}function vn(){return{type:"strong",children:[]}}function Cn(){return{type:"text",value:""}}function yn(){return{type:"thematicBreak"}}}function point(a){return{line:a.line,column:a.column,offset:a.offset}}function configure(a,e){let c=-1;for(;++c<e.length;){const d=e[c];Array.isArray(d)?configure(a,d):extension(a,d)}}function extension(a,e){let c;for(c in e)if(own$2.call(e,c))switch(c){case"canContainEols":{const d=e[c];d&&a[c].push(...d);break}case"transforms":{const d=e[c];d&&a[c].push(...d);break}case"enter":case"exit":{const d=e[c];d&&Object.assign(a[c],d);break}}}function defaultOnError(a,e){throw a?new Error("Cannot close `"+a.type+"` ("+stringifyPosition({start:a.start,end:a.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(a){const e=this;e.parser=c;function c(d){return fromMarkdown(d,{...e.data("settings"),...a,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote$1(a,e){const c={type:"element",tagName:"blockquote",properties:{},children:a.wrap(a.all(e),!0)};return a.patch(e,c),a.applyData(e,c)}function hardBreak$1(a,e){const c={type:"element",tagName:"br",properties:{},children:[]};return a.patch(e,c),[a.applyData(e,c),{type:"text",value:`
`}]}function code$2(a,e){const c=e.value?e.value+`
`:"",d={};e.lang&&(d.className=["language-"+e.lang]);let h={type:"element",tagName:"code",properties:d,children:[{type:"text",value:c}]};return e.meta&&(h.data={meta:e.meta}),a.patch(e,h),h=a.applyData(e,h),h={type:"element",tagName:"pre",properties:{},children:[h]},a.patch(e,h),h}function strikethrough(a,e){const c={type:"element",tagName:"del",properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}function emphasis$1(a,e){const c={type:"element",tagName:"em",properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}function footnoteReference$1(a,e){const c=typeof a.options.clobberPrefix=="string"?a.options.clobberPrefix:"user-content-",d=String(e.identifier).toUpperCase(),h=normalizeUri(d.toLowerCase()),g=a.footnoteOrder.indexOf(d);let b,_e=a.footnoteCounts.get(d);_e===void 0?(_e=0,a.footnoteOrder.push(d),b=a.footnoteOrder.length):b=g+1,_e+=1,a.footnoteCounts.set(d,_e);const et={type:"element",tagName:"a",properties:{href:"#"+c+"fn-"+h,id:c+"fnref-"+h+(_e>1?"-"+_e:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(b)}]};a.patch(e,et);const rt={type:"element",tagName:"sup",properties:{},children:[et]};return a.patch(e,rt),a.applyData(e,rt)}function heading$1(a,e){const c={type:"element",tagName:"h"+e.depth,properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}function html$1(a,e){if(a.options.allowDangerousHtml){const c={type:"raw",value:e.value};return a.patch(e,c),a.applyData(e,c)}}function revert(a,e){const c=e.referenceType;let d="]";if(c==="collapsed"?d+="[]":c==="full"&&(d+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+d}];const h=a.all(e),g=h[0];g&&g.type==="text"?g.value="["+g.value:h.unshift({type:"text",value:"["});const b=h[h.length-1];return b&&b.type==="text"?b.value+=d:h.push({type:"text",value:d}),h}function imageReference$1(a,e){const c=String(e.identifier).toUpperCase(),d=a.definitionById.get(c);if(!d)return revert(a,e);const h={src:normalizeUri(d.url||""),alt:e.alt};d.title!==null&&d.title!==void 0&&(h.title=d.title);const g={type:"element",tagName:"img",properties:h,children:[]};return a.patch(e,g),a.applyData(e,g)}function image$1(a,e){const c={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(c.alt=e.alt),e.title!==null&&e.title!==void 0&&(c.title=e.title);const d={type:"element",tagName:"img",properties:c,children:[]};return a.patch(e,d),a.applyData(e,d)}function inlineCode$1(a,e){const c={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};a.patch(e,c);const d={type:"element",tagName:"code",properties:{},children:[c]};return a.patch(e,d),a.applyData(e,d)}function linkReference$1(a,e){const c=String(e.identifier).toUpperCase(),d=a.definitionById.get(c);if(!d)return revert(a,e);const h={href:normalizeUri(d.url||"")};d.title!==null&&d.title!==void 0&&(h.title=d.title);const g={type:"element",tagName:"a",properties:h,children:a.all(e)};return a.patch(e,g),a.applyData(e,g)}function link$1(a,e){const c={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(c.title=e.title);const d={type:"element",tagName:"a",properties:c,children:a.all(e)};return a.patch(e,d),a.applyData(e,d)}function listItem$1(a,e,c){const d=a.all(e),h=c?listLoose(c):listItemLoose(e),g={},b=[];if(typeof e.checked=="boolean"){const st=d[0];let $;st&&st.type==="element"&&st.tagName==="p"?$=st:($={type:"element",tagName:"p",properties:{},children:[]},d.unshift($)),$.children.length>0&&$.children.unshift({type:"text",value:" "}),$.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),g.className=["task-list-item"]}let _e=-1;for(;++_e<d.length;){const st=d[_e];(h||_e!==0||st.type!=="element"||st.tagName!=="p")&&b.push({type:"text",value:`
`}),st.type==="element"&&st.tagName==="p"&&!h?b.push(...st.children):b.push(st)}const et=d[d.length-1];et&&(h||et.type!=="element"||et.tagName!=="p")&&b.push({type:"text",value:`
`});const rt={type:"element",tagName:"li",properties:g,children:b};return a.patch(e,rt),a.applyData(e,rt)}function listLoose(a){let e=!1;if(a.type==="list"){e=a.spread||!1;const c=a.children;let d=-1;for(;!e&&++d<c.length;)e=listItemLoose(c[d])}return e}function listItemLoose(a){const e=a.spread;return e??a.children.length>1}function list$1(a,e){const c={},d=a.all(e);let h=-1;for(typeof e.start=="number"&&e.start!==1&&(c.start=e.start);++h<d.length;){const b=d[h];if(b.type==="element"&&b.tagName==="li"&&b.properties&&Array.isArray(b.properties.className)&&b.properties.className.includes("task-list-item")){c.className=["contains-task-list"];break}}const g={type:"element",tagName:e.ordered?"ol":"ul",properties:c,children:a.wrap(d,!0)};return a.patch(e,g),a.applyData(e,g)}function paragraph$1(a,e){const c={type:"element",tagName:"p",properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}function root$1(a,e){const c={type:"root",children:a.wrap(a.all(e))};return a.patch(e,c),a.applyData(e,c)}function strong$1(a,e){const c={type:"element",tagName:"strong",properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}function table(a,e){const c=a.all(e),d=c.shift(),h=[];if(d){const b={type:"element",tagName:"thead",properties:{},children:a.wrap([d],!0)};a.patch(e.children[0],b),h.push(b)}if(c.length>0){const b={type:"element",tagName:"tbody",properties:{},children:a.wrap(c,!0)},_e=pointStart(e.children[1]),et=pointEnd(e.children[e.children.length-1]);_e&&et&&(b.position={start:_e,end:et}),h.push(b)}const g={type:"element",tagName:"table",properties:{},children:a.wrap(h,!0)};return a.patch(e,g),a.applyData(e,g)}function tableRow(a,e,c){const d=c?c.children:void 0,g=(d?d.indexOf(e):1)===0?"th":"td",b=c&&c.type==="table"?c.align:void 0,_e=b?b.length:e.children.length;let et=-1;const rt=[];for(;++et<_e;){const $=e.children[et],_={},nt=b?b[et]:void 0;nt&&(_.align=nt);let it={type:"element",tagName:g,properties:_,children:[]};$&&(it.children=a.all($),a.patch($,it),it=a.applyData($,it)),rt.push(it)}const st={type:"element",tagName:"tr",properties:{},children:a.wrap(rt,!0)};return a.patch(e,st),a.applyData(e,st)}function tableCell(a,e){const c={type:"element",tagName:"td",properties:{},children:a.all(e)};return a.patch(e,c),a.applyData(e,c)}const tab=9,space=32;function trimLines(a){const e=String(a),c=/\r?\n|\r/g;let d=c.exec(e),h=0;const g=[];for(;d;)g.push(trimLine(e.slice(h,d.index),h>0,!0),d[0]),h=d.index+d[0].length,d=c.exec(e);return g.push(trimLine(e.slice(h),h>0,!1)),g.join("")}function trimLine(a,e,c){let d=0,h=a.length;if(e){let g=a.codePointAt(d);for(;g===tab||g===space;)d++,g=a.codePointAt(d)}if(c){let g=a.codePointAt(h-1);for(;g===tab||g===space;)h--,g=a.codePointAt(h-1)}return h>d?a.slice(d,h):""}function text$2(a,e){const c={type:"text",value:trimLines(String(e.value))};return a.patch(e,c),a.applyData(e,c)}function thematicBreak$1(a,e){const c={type:"element",tagName:"hr",properties:{},children:[]};return a.patch(e,c),a.applyData(e,c)}const handlers={blockquote:blockquote$1,break:hardBreak$1,code:code$2,delete:strikethrough,emphasis:emphasis$1,footnoteReference:footnoteReference$1,heading:heading$1,html:html$1,imageReference:imageReference$1,image:image$1,inlineCode:inlineCode$1,linkReference:linkReference$1,link:link$1,listItem:listItem$1,list:list$1,paragraph:paragraph$1,root:root$1,strong:strong$1,table,tableCell,tableRow,text:text$2,thematicBreak:thematicBreak$1,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env$1=typeof self=="object"?self:globalThis,deserializer=(a,e)=>{const c=(h,g)=>(a.set(g,h),h),d=h=>{if(a.has(h))return a.get(h);const[g,b]=e[h];switch(g){case PRIMITIVE:case VOID:return c(b,h);case ARRAY:{const _e=c([],h);for(const et of b)_e.push(d(et));return _e}case OBJECT:{const _e=c({},h);for(const[et,rt]of b)_e[d(et)]=d(rt);return _e}case DATE:return c(new Date(b),h);case REGEXP:{const{source:_e,flags:et}=b;return c(new RegExp(_e,et),h)}case MAP:{const _e=c(new Map,h);for(const[et,rt]of b)_e.set(d(et),d(rt));return _e}case SET:{const _e=c(new Set,h);for(const et of b)_e.add(d(et));return _e}case ERROR:{const{name:_e,message:et}=b;return c(new env$1[_e](et),h)}case BIGINT:return c(BigInt(b),h);case"BigInt":return c(Object(BigInt(b)),h);case"ArrayBuffer":return c(new Uint8Array(b).buffer,b);case"DataView":{const{buffer:_e}=new Uint8Array(b);return c(new DataView(_e),b)}}return c(new env$1[g](b),h)};return d},deserialize=a=>deserializer(new Map,a)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=a=>{const e=typeof a;if(e!=="object"||!a)return[PRIMITIVE,e];const c=toString.call(a).slice(8,-1);switch(c){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,c]}return c.includes("Array")?[ARRAY,c]:c.includes("Error")?[ERROR,c]:[OBJECT,c]},shouldSkip=([a,e])=>a===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(a,e,c,d)=>{const h=(b,_e)=>{const et=d.push(b)-1;return c.set(_e,et),et},g=b=>{if(c.has(b))return c.get(b);let[_e,et]=typeOf(b);switch(_e){case PRIMITIVE:{let st=b;switch(et){case"bigint":_e=BIGINT,st=b.toString();break;case"function":case"symbol":if(a)throw new TypeError("unable to serialize "+et);st=null;break;case"undefined":return h([VOID],b)}return h([_e,st],b)}case ARRAY:{if(et){let _=b;return et==="DataView"?_=new Uint8Array(b.buffer):et==="ArrayBuffer"&&(_=new Uint8Array(b)),h([et,[..._]],b)}const st=[],$=h([_e,st],b);for(const _ of b)st.push(g(_));return $}case OBJECT:{if(et)switch(et){case"BigInt":return h([et,b.toString()],b);case"Boolean":case"Number":case"String":return h([et,b.valueOf()],b)}if(e&&"toJSON"in b)return g(b.toJSON());const st=[],$=h([_e,st],b);for(const _ of keys(b))(a||!shouldSkip(typeOf(b[_])))&&st.push([g(_),g(b[_])]);return $}case DATE:return h([_e,b.toISOString()],b);case REGEXP:{const{source:st,flags:$}=b;return h([_e,{source:st,flags:$}],b)}case MAP:{const st=[],$=h([_e,st],b);for(const[_,nt]of b)(a||!(shouldSkip(typeOf(_))||shouldSkip(typeOf(nt))))&&st.push([g(_),g(nt)]);return $}case SET:{const st=[],$=h([_e,st],b);for(const _ of b)(a||!shouldSkip(typeOf(_)))&&st.push(g(_));return $}}const{message:rt}=b;return h([_e,{name:et,message:rt}],b)};return g},serialize$1=(a,{json:e,lossy:c}={})=>{const d=[];return serializer(!(e||c),!!e,new Map,d)(a),d},structuredClone$1=typeof structuredClone=="function"?(a,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize$1(a,e)):structuredClone(a):(a,e)=>deserialize(serialize$1(a,e));function defaultFootnoteBackContent(a,e){const c=[{type:"text",value:"↩"}];return e>1&&c.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),c}function defaultFootnoteBackLabel(a,e){return"Back to reference "+(a+1)+(e>1?"-"+e:"")}function footer(a){const e=typeof a.options.clobberPrefix=="string"?a.options.clobberPrefix:"user-content-",c=a.options.footnoteBackContent||defaultFootnoteBackContent,d=a.options.footnoteBackLabel||defaultFootnoteBackLabel,h=a.options.footnoteLabel||"Footnotes",g=a.options.footnoteLabelTagName||"h2",b=a.options.footnoteLabelProperties||{className:["sr-only"]},_e=[];let et=-1;for(;++et<a.footnoteOrder.length;){const rt=a.footnoteById.get(a.footnoteOrder[et]);if(!rt)continue;const st=a.all(rt),$=String(rt.identifier).toUpperCase(),_=normalizeUri($.toLowerCase());let nt=0;const it=[],ot=a.footnoteCounts.get($);for(;ot!==void 0&&++nt<=ot;){it.length>0&&it.push({type:"text",value:" "});let ct=typeof c=="string"?c:c(et,nt);typeof ct=="string"&&(ct={type:"text",value:ct}),it.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+_+(nt>1?"-"+nt:""),dataFootnoteBackref:"",ariaLabel:typeof d=="string"?d:d(et,nt),className:["data-footnote-backref"]},children:Array.isArray(ct)?ct:[ct]})}const lt=st[st.length-1];if(lt&&lt.type==="element"&&lt.tagName==="p"){const ct=lt.children[lt.children.length-1];ct&&ct.type==="text"?ct.value+=" ":lt.children.push({type:"text",value:" "}),lt.children.push(...it)}else st.push(...it);const at={type:"element",tagName:"li",properties:{id:e+"fn-"+_},children:a.wrap(st,!0)};a.patch(rt,at),_e.push(at)}if(_e.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:g,properties:{...structuredClone$1(b),id:"footnote-label"},children:[{type:"text",value:h}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:a.wrap(_e,!0)},{type:"text",value:`
`}]}}const convert=function(a){if(a==null)return ok;if(typeof a=="function")return castFactory(a);if(typeof a=="object")return Array.isArray(a)?anyFactory(a):propsFactory(a);if(typeof a=="string")return typeFactory(a);throw new Error("Expected function, string, or object as test")};function anyFactory(a){const e=[];let c=-1;for(;++c<a.length;)e[c]=convert(a[c]);return castFactory(d);function d(...h){let g=-1;for(;++g<e.length;)if(e[g].apply(this,h))return!0;return!1}}function propsFactory(a){const e=a;return castFactory(c);function c(d){const h=d;let g;for(g in a)if(h[g]!==e[g])return!1;return!0}}function typeFactory(a){return castFactory(e);function e(c){return c&&c.type===a}}function castFactory(a){return e;function e(c,d,h){return!!(looksLikeANode(c)&&a.call(this,c,typeof d=="number"?d:void 0,h||void 0))}}function ok(){return!0}function looksLikeANode(a){return a!==null&&typeof a=="object"&&"type"in a}function color(a){return a}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(a,e,c,d){let h;typeof e=="function"&&typeof c!="function"?(d=c,c=e):h=e;const g=convert(h),b=d?-1:1;_e(a,void 0,[])();function _e(et,rt,st){const $=et&&typeof et=="object"?et:{};if(typeof $.type=="string"){const nt=typeof $.tagName=="string"?$.tagName:typeof $.name=="string"?$.name:void 0;Object.defineProperty(_,"name",{value:"node ("+(et.type+(nt?"<"+nt+">":""))+")"})}return _;function _(){let nt=empty,it,ot,lt;if((!e||g(et,rt,st[st.length-1]||void 0))&&(nt=toResult(c(et,st)),nt[0]===EXIT))return nt;if("children"in et&&et.children){const at=et;if(at.children&&nt[0]!==SKIP)for(ot=(d?at.children.length:-1)+b,lt=st.concat(at);ot>-1&&ot<at.children.length;){const ct=at.children[ot];if(it=_e(ct,ot,lt)(),it[0]===EXIT)return it;ot=typeof it[1]=="number"?it[1]:ot+b}}return nt}}}function toResult(a){return Array.isArray(a)?a:typeof a=="number"?[CONTINUE,a]:a==null?empty:[a]}function visit(a,e,c,d){let h,g,b;typeof e=="function"&&typeof c!="function"?(g=void 0,b=e,h=c):(g=e,b=c,h=d),visitParents(a,g,_e,h);function _e(et,rt){const st=rt[rt.length-1],$=st?st.children.indexOf(et):void 0;return b(et,$,st)}}const own$1={}.hasOwnProperty,emptyOptions$1={};function createState(a,e){const c=e||emptyOptions$1,d=new Map,h=new Map,g=new Map,b={...handlers,...c.handlers},_e={all:rt,applyData,definitionById:d,footnoteById:h,footnoteCounts:g,footnoteOrder:[],handlers:b,one:et,options:c,patch,wrap:wrap$1};return visit(a,function(st){if(st.type==="definition"||st.type==="footnoteDefinition"){const $=st.type==="definition"?d:h,_=String(st.identifier).toUpperCase();$.has(_)||$.set(_,st)}}),_e;function et(st,$){const _=st.type,nt=_e.handlers[_];if(own$1.call(_e.handlers,_)&&nt)return nt(_e,st,$);if(_e.options.passThrough&&_e.options.passThrough.includes(_)){if("children"in st){const{children:ot,...lt}=st,at=structuredClone$1(lt);return at.children=_e.all(st),at}return structuredClone$1(st)}return(_e.options.unknownHandler||defaultUnknownHandler)(_e,st,$)}function rt(st){const $=[];if("children"in st){const _=st.children;let nt=-1;for(;++nt<_.length;){const it=_e.one(_[nt],st);if(it){if(nt&&_[nt-1].type==="break"&&(!Array.isArray(it)&&it.type==="text"&&(it.value=trimMarkdownSpaceStart(it.value)),!Array.isArray(it)&&it.type==="element")){const ot=it.children[0];ot&&ot.type==="text"&&(ot.value=trimMarkdownSpaceStart(ot.value))}Array.isArray(it)?$.push(...it):$.push(it)}}}return $}}function patch(a,e){a.position&&(e.position=position$1(a))}function applyData(a,e){let c=e;if(a&&a.data){const d=a.data.hName,h=a.data.hChildren,g=a.data.hProperties;if(typeof d=="string")if(c.type==="element")c.tagName=d;else{const b="children"in c?c.children:[c];c={type:"element",tagName:d,properties:{},children:b}}c.type==="element"&&g&&Object.assign(c.properties,structuredClone$1(g)),"children"in c&&c.children&&h!==null&&h!==void 0&&(c.children=h)}return c}function defaultUnknownHandler(a,e){const c=e.data||{},d="value"in e&&!(own$1.call(c,"hProperties")||own$1.call(c,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:a.all(e)};return a.patch(e,d),a.applyData(e,d)}function wrap$1(a,e){const c=[];let d=-1;for(e&&c.push({type:"text",value:`
`});++d<a.length;)d&&c.push({type:"text",value:`
`}),c.push(a[d]);return e&&a.length>0&&c.push({type:"text",value:`
`}),c}function trimMarkdownSpaceStart(a){let e=0,c=a.charCodeAt(e);for(;c===9||c===32;)e++,c=a.charCodeAt(e);return a.slice(e)}function toHast(a,e){const c=createState(a,e),d=c.one(a,void 0),h=footer(c),g=Array.isArray(d)?{type:"root",children:d}:d||{type:"root",children:[]};return h&&g.children.push({type:"text",value:`
`},h),g}function remarkRehype(a,e){return a&&"run"in a?async function(c,d){const h=toHast(c,{file:d,...e});await a.run(h,d)}:function(c,d){return toHast(c,{file:d,...a||e})}}function bail(a){if(a)throw a}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(e){return typeof Array.isArray=="function"?Array.isArray(e):toStr.call(e)==="[object Array]"},isPlainObject$2=function(e){if(!e||toStr.call(e)!=="[object Object]")return!1;var c=hasOwn.call(e,"constructor"),d=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!c&&!d)return!1;var h;for(h in e);return typeof h>"u"||hasOwn.call(e,h)},setProperty=function(e,c){defineProperty&&c.name==="__proto__"?defineProperty(e,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):e[c.name]=c.newValue},getProperty=function(e,c){if(c==="__proto__")if(hasOwn.call(e,c)){if(gOPD)return gOPD(e,c).value}else return;return e[c]},extend=function a(){var e,c,d,h,g,b,_e=arguments[0],et=1,rt=arguments.length,st=!1;for(typeof _e=="boolean"&&(st=_e,_e=arguments[1]||{},et=2),(_e==null||typeof _e!="object"&&typeof _e!="function")&&(_e={});et<rt;++et)if(e=arguments[et],e!=null)for(c in e)d=getProperty(_e,c),h=getProperty(e,c),_e!==h&&(st&&h&&(isPlainObject$2(h)||(g=isArray(h)))?(g?(g=!1,b=d&&isArray(d)?d:[]):b=d&&isPlainObject$2(d)?d:{},setProperty(_e,{name:c,newValue:a(st,b,h)})):typeof h<"u"&&setProperty(_e,{name:c,newValue:h}));return _e};const extend$1=getDefaultExportFromCjs(extend);function isPlainObject$1(a){if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)}function trough(){const a=[],e={run:c,use:d};return e;function c(...h){let g=-1;const b=h.pop();if(typeof b!="function")throw new TypeError("Expected function as last argument, not "+b);_e(null,...h);function _e(et,...rt){const st=a[++g];let $=-1;if(et){b(et);return}for(;++$<h.length;)(rt[$]===null||rt[$]===void 0)&&(rt[$]=h[$]);h=rt,st?wrap(st,_e)(...rt):b(null,...rt)}}function d(h){if(typeof h!="function")throw new TypeError("Expected `middelware` to be a function, not "+h);return a.push(h),e}}function wrap(a,e){let c;return d;function d(...b){const _e=a.length>b.length;let et;_e&&b.push(h);try{et=a.apply(this,b)}catch(rt){const st=rt;if(_e&&c)throw st;return h(st)}_e||(et&&et.then&&typeof et.then=="function"?et.then(g,h):et instanceof Error?h(et):g(et))}function h(b,..._e){c||(c=!0,e(b,..._e))}function g(b){h(null,b)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(a,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(a);let c=0,d=-1,h=a.length,g;if(e===void 0||e.length===0||e.length>a.length){for(;h--;)if(a.codePointAt(h)===47){if(g){c=h+1;break}}else d<0&&(g=!0,d=h+1);return d<0?"":a.slice(c,d)}if(e===a)return"";let b=-1,_e=e.length-1;for(;h--;)if(a.codePointAt(h)===47){if(g){c=h+1;break}}else b<0&&(g=!0,b=h+1),_e>-1&&(a.codePointAt(h)===e.codePointAt(_e--)?_e<0&&(d=h):(_e=-1,d=b));return c===d?d=b:d<0&&(d=a.length),a.slice(c,d)}function dirname(a){if(assertPath$1(a),a.length===0)return".";let e=-1,c=a.length,d;for(;--c;)if(a.codePointAt(c)===47){if(d){e=c;break}}else d||(d=!0);return e<0?a.codePointAt(0)===47?"/":".":e===1&&a.codePointAt(0)===47?"//":a.slice(0,e)}function extname(a){assertPath$1(a);let e=a.length,c=-1,d=0,h=-1,g=0,b;for(;e--;){const _e=a.codePointAt(e);if(_e===47){if(b){d=e+1;break}continue}c<0&&(b=!0,c=e+1),_e===46?h<0?h=e:g!==1&&(g=1):h>-1&&(g=-1)}return h<0||c<0||g===0||g===1&&h===c-1&&h===d+1?"":a.slice(h,c)}function join(...a){let e=-1,c;for(;++e<a.length;)assertPath$1(a[e]),a[e]&&(c=c===void 0?a[e]:c+"/"+a[e]);return c===void 0?".":normalize(c)}function normalize(a){assertPath$1(a);const e=a.codePointAt(0)===47;let c=normalizeString(a,!e);return c.length===0&&!e&&(c="."),c.length>0&&a.codePointAt(a.length-1)===47&&(c+="/"),e?"/"+c:c}function normalizeString(a,e){let c="",d=0,h=-1,g=0,b=-1,_e,et;for(;++b<=a.length;){if(b<a.length)_e=a.codePointAt(b);else{if(_e===47)break;_e=47}if(_e===47){if(!(h===b-1||g===1))if(h!==b-1&&g===2){if(c.length<2||d!==2||c.codePointAt(c.length-1)!==46||c.codePointAt(c.length-2)!==46){if(c.length>2){if(et=c.lastIndexOf("/"),et!==c.length-1){et<0?(c="",d=0):(c=c.slice(0,et),d=c.length-1-c.lastIndexOf("/")),h=b,g=0;continue}}else if(c.length>0){c="",d=0,h=b,g=0;continue}}e&&(c=c.length>0?c+"/..":"..",d=2)}else c.length>0?c+="/"+a.slice(h+1,b):c=a.slice(h+1,b),d=b-h-1;h=b,g=0}else _e===46&&g>-1?g++:g=-1}return c}function assertPath$1(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}const minproc={cwd};function cwd(){return"/"}function isUrl(a){return!!(a!==null&&typeof a=="object"&&"href"in a&&a.href&&"protocol"in a&&a.protocol&&a.auth===void 0)}function urlToPath(a){if(typeof a=="string")a=new URL(a);else if(!isUrl(a)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+a+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(a.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(a)}function getPathFromURLPosix(a){if(a.hostname!==""){const d=new TypeError('File URL host must be "localhost" or empty on darwin');throw d.code="ERR_INVALID_FILE_URL_HOST",d}const e=a.pathname;let c=-1;for(;++c<e.length;)if(e.codePointAt(c)===37&&e.codePointAt(c+1)===50){const d=e.codePointAt(c+2);if(d===70||d===102){const h=new TypeError("File URL path must not include encoded / characters");throw h.code="ERR_INVALID_FILE_URL_PATH",h}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let c;e?isUrl(e)?c={path:e}:typeof e=="string"||isUint8Array$1(e)?c={value:e}:c=e:c={},this.cwd="cwd"in c?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let d=-1;for(;++d<order.length;){const g=order[d];g in c&&c[g]!==void 0&&c[g]!==null&&(this[g]=g==="history"?[...c[g]]:c[g])}let h;for(h in c)order.includes(h)||(this[h]=c[h])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,c,d){const h=this.message(e,c,d);throw h.fatal=!0,h}info(e,c,d){const h=this.message(e,c,d);return h.fatal=void 0,h}message(e,c,d){const h=new VFileMessage(e,c,d);return this.path&&(h.name=this.path+":"+h.name,h.file=this.path),h.fatal=!1,this.messages.push(h),h}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(a,e){if(a&&a.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(a,e){if(!a)throw new Error("`"+e+"` cannot be empty")}function assertPath(a,e){if(!a)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(a){return!!(a&&typeof a=="object"&&"byteLength"in a&&"byteOffset"in a)}const CallableInstance=function(a){const d=this.constructor.prototype,h=d[a],g=function(){return h.apply(g,arguments)};return Object.setPrototypeOf(g,d),g},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let c=-1;for(;++c<this.attachers.length;){const d=this.attachers[c];e.use(...d)}return e.data(extend$1(!0,{},this.namespace)),e}data(e,c){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=c,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[c,...d]=this.attachers[this.freezeIndex];if(d[0]===!1)continue;d[0]===!0&&(d[0]=void 0);const h=c.call(e,...d);typeof h=="function"&&this.transformers.use(h)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const c=vfile(e),d=this.parser||this.Parser;return assertParser("parse",d),d(String(c),c)}process(e,c){const d=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),c?h(void 0,c):new Promise(h);function h(g,b){const _e=vfile(e),et=d.parse(_e);d.run(et,_e,function(st,$,_){if(st||!$||!_)return rt(st);const nt=$,it=d.stringify(nt,_);looksLikeAValue(it)?_.value=it:_.result=it,rt(st,_)});function rt(st,$){st||!$?b(st):g?g($):c(void 0,$)}}}processSync(e){let c=!1,d;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,h),assertDone("processSync","process",c),d;function h(g,b){c=!0,bail(g),d=b}}run(e,c,d){assertNode(e),this.freeze();const h=this.transformers;return!d&&typeof c=="function"&&(d=c,c=void 0),d?g(void 0,d):new Promise(g);function g(b,_e){const et=vfile(c);h.run(e,et,rt);function rt(st,$,_){const nt=$||e;st?_e(st):b?b(nt):d(void 0,nt,_)}}}runSync(e,c){let d=!1,h;return this.run(e,c,g),assertDone("runSync","run",d),h;function g(b,_e){bail(b),h=_e,d=!0}}stringify(e,c){this.freeze();const d=vfile(c),h=this.compiler||this.Compiler;return assertCompiler("stringify",h),assertNode(e),h(e,d)}use(e,...c){const d=this.attachers,h=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")et(e,c);else if(typeof e=="object")Array.isArray(e)?_e(e):b(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function g(rt){if(typeof rt=="function")et(rt,[]);else if(typeof rt=="object")if(Array.isArray(rt)){const[st,...$]=rt;et(st,$)}else b(rt);else throw new TypeError("Expected usable value, not `"+rt+"`")}function b(rt){if(!("plugins"in rt)&&!("settings"in rt))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");_e(rt.plugins),rt.settings&&(h.settings=extend$1(!0,h.settings,rt.settings))}function _e(rt){let st=-1;if(rt!=null)if(Array.isArray(rt))for(;++st<rt.length;){const $=rt[st];g($)}else throw new TypeError("Expected a list of plugins, not `"+rt+"`")}function et(rt,st){let $=-1,_=-1;for(;++$<d.length;)if(d[$][0]===rt){_=$;break}if(_===-1)d.push([rt,...st]);else if(st.length>0){let[nt,...it]=st;const ot=d[_][1];isPlainObject$1(ot)&&isPlainObject$1(nt)&&(nt=extend$1(!0,ot,nt)),d[_]=[rt,nt,...it]}}}}const unified=new Processor().freeze();function assertParser(a,e){if(typeof e!="function")throw new TypeError("Cannot `"+a+"` without `parser`")}function assertCompiler(a,e){if(typeof e!="function")throw new TypeError("Cannot `"+a+"` without `compiler`")}function assertUnfrozen(a,e){if(e)throw new Error("Cannot call `"+a+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(a){if(!isPlainObject$1(a)||typeof a.type!="string")throw new TypeError("Expected node, got `"+a+"`")}function assertDone(a,e,c){if(!c)throw new Error("`"+a+"` finished async. Use `"+e+"` instead")}function vfile(a){return looksLikeAVFile(a)?a:new VFile(a)}function looksLikeAVFile(a){return!!(a&&typeof a=="object"&&"message"in a&&"messages"in a)}function looksLikeAValue(a){return typeof a=="string"||isUint8Array(a)}function isUint8Array(a){return!!(a&&typeof a=="object"&&"byteLength"in a&&"byteOffset"in a)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(a){const e=createProcessor(a),c=createFile(a);return post(e.runSync(e.parse(c),c),a)}function createProcessor(a){const e=a.rehypePlugins||emptyPlugins,c=a.remarkPlugins||emptyPlugins,d=a.remarkRehypeOptions?{...a.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(c).use(remarkRehype,d).use(e)}function createFile(a){const e=a.children||"",c=new VFile;return typeof e=="string"&&(c.value=e),c}function post(a,e){const c=e.allowedElements,d=e.allowElement,h=e.components,g=e.disallowedElements,b=e.skipHtml,_e=e.unwrapDisallowed,et=e.urlTransform||defaultUrlTransform;for(const st of deprecations)Object.hasOwn(e,st.from)&&(""+st.from+(st.to?"use `"+st.to+"` instead":"remove it")+changelog+st.id,void 0);return visit(a,rt),toJsxRuntime(a,{Fragment:jsxRuntimeExports.Fragment,components:h,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function rt(st,$,_){if(st.type==="raw"&&_&&typeof $=="number")return b?_.children.splice($,1):_.children[$]={type:"text",value:st.value},$;if(st.type==="element"){let nt;for(nt in urlAttributes)if(Object.hasOwn(urlAttributes,nt)&&Object.hasOwn(st.properties,nt)){const it=st.properties[nt],ot=urlAttributes[nt];(ot===null||ot.includes(st.tagName))&&(st.properties[nt]=et(String(it||""),nt,st))}}if(st.type==="element"){let nt=c?!c.includes(st.tagName):g?g.includes(st.tagName):!1;if(!nt&&d&&typeof $=="number"&&(nt=!d(st,$,_)),nt&&_&&typeof $=="number")return _e&&st.children?_.children.splice($,1,...st.children):_.children.splice($,1),$}}}function defaultUrlTransform(a){const e=a.indexOf(":"),c=a.indexOf("?"),d=a.indexOf("#"),h=a.indexOf("/");return e===-1||h!==-1&&e>h||c!==-1&&e>c||d!==-1&&e>d||safeProtocol.test(a.slice(0,e))?a:""}function ccount(a,e){const c=String(a);if(typeof e!="string")throw new TypeError("Expected character");let d=0,h=c.indexOf(e);for(;h!==-1;)d++,h=c.indexOf(e,h+e.length);return d}function escapeStringRegexp(a){if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(a,e,c){const h=convert((c||{}).ignore||[]),g=toPairs(e);let b=-1;for(;++b<g.length;)visitParents(a,"text",_e);function _e(rt,st){let $=-1,_;for(;++$<st.length;){const nt=st[$],it=_?_.children:void 0;if(h(nt,it?it.indexOf(nt):void 0,_))return;_=nt}if(_)return et(rt,st)}function et(rt,st){const $=st[st.length-1],_=g[b][0],nt=g[b][1];let it=0;const lt=$.children.indexOf(rt);let at=!1,ct=[];_.lastIndex=0;let dt=_.exec(rt.value);for(;dt;){const ht=dt.index,pt={index:dt.index,input:dt.input,stack:[...st,rt]};let ft=nt(...dt,pt);if(typeof ft=="string"&&(ft=ft.length>0?{type:"text",value:ft}:void 0),ft===!1?_.lastIndex=ht+1:(it!==ht&&ct.push({type:"text",value:rt.value.slice(it,ht)}),Array.isArray(ft)?ct.push(...ft):ft&&ct.push(ft),it=ht+dt[0].length,at=!0),!_.global)break;dt=_.exec(rt.value)}return at?(it<rt.value.length&&ct.push({type:"text",value:rt.value.slice(it)}),$.children.splice(lt,1,...ct)):ct=[rt],lt+ct.length}}function toPairs(a){const e=[];if(!Array.isArray(a))throw new TypeError("Expected find and replace tuple or list of tuples");const c=!a[0]||Array.isArray(a[0])?a:[a];let d=-1;for(;++d<c.length;){const h=c[d];e.push([toExpression(h[0]),toFunction(h[1])])}return e}function toExpression(a){return typeof a=="string"?new RegExp(escapeStringRegexp(a),"g"):a}function toFunction(a){return typeof a=="function"?a:function(){return a}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(a){this.enter({type:"link",title:null,url:"",children:[]},a)}function enterLiteralAutolinkValue(a){this.config.enter.autolinkProtocol.call(this,a)}function exitLiteralAutolinkHttp(a){this.config.exit.autolinkProtocol.call(this,a)}function exitLiteralAutolinkWww(a){this.config.exit.data.call(this,a);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(a)}function exitLiteralAutolinkEmail(a){this.config.exit.autolinkEmail.call(this,a)}function exitLiteralAutolink(a){this.exit(a)}function transformGfmAutolinkLiterals(a){findAndReplace(a,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),findEmail]],{ignore:["link","linkReference"]})}function findUrl(a,e,c,d,h){let g="";if(!previous(h)||(/^w/i.test(e)&&(c=e+c,e="",g="http://"),!isCorrectDomain(c)))return!1;const b=splitUrl(c+d);if(!b[0])return!1;const _e={type:"link",title:null,url:g+e+b[0],children:[{type:"text",value:e+b[0]}]};return b[1]?[_e,{type:"text",value:b[1]}]:_e}function findEmail(a,e,c,d){return!previous(d,!0)||/[-\d_]$/.test(c)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+c,children:[{type:"text",value:e+"@"+c}]}}function isCorrectDomain(a){const e=a.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function splitUrl(a){const e=/[!"&'),.:;<>?\]}]+$/.exec(a);if(!e)return[a,void 0];a=a.slice(0,e.index);let c=e[0],d=c.indexOf(")");const h=ccount(a,"(");let g=ccount(a,")");for(;d!==-1&&h>g;)a+=c.slice(0,d+1),c=c.slice(d+1),d=c.indexOf(")"),g++;return[a,c]}function previous(a,e){const c=a.input.charCodeAt(a.index-1);return(a.index===0||unicodeWhitespace(c)||unicodePunctuation(c))&&(!e||c!==47)}footnoteReference.peek=footnoteReferencePeek;function enterFootnoteCallString(){this.buffer()}function enterFootnoteCall(a){this.enter({type:"footnoteReference",identifier:"",label:""},a)}function enterFootnoteDefinitionLabelString(){this.buffer()}function enterFootnoteDefinition(a){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},a)}function exitFootnoteCallString(a){const e=this.resume(),c=this.stack[this.stack.length-1];c.type,c.identifier=normalizeIdentifier(this.sliceSerialize(a)).toLowerCase(),c.label=e}function exitFootnoteCall(a){this.exit(a)}function exitFootnoteDefinitionLabelString(a){const e=this.resume(),c=this.stack[this.stack.length-1];c.type,c.identifier=normalizeIdentifier(this.sliceSerialize(a)).toLowerCase(),c.label=e}function exitFootnoteDefinition(a){this.exit(a)}function footnoteReferencePeek(){return"["}function footnoteReference(a,e,c,d){const h=c.createTracker(d);let g=h.move("[^");const b=c.enter("footnoteReference"),_e=c.enter("reference");return g+=h.move(c.safe(c.associationId(a),{after:"]",before:g})),_e(),b(),g+=h.move("]"),g}function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteCallString:enterFootnoteCallString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteDefinition:enterFootnoteDefinition},exit:{gfmFootnoteCallString:exitFootnoteCallString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteDefinition:exitFootnoteDefinition}}}function gfmFootnoteToMarkdown(a){let e=!1;return a&&a.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:c,footnoteReference},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function c(d,h,g,b){const _e=g.createTracker(b);let et=_e.move("[^");const rt=g.enter("footnoteDefinition"),st=g.enter("label");return et+=_e.move(g.safe(g.associationId(d),{before:et,after:"]"})),st(),et+=_e.move("]:"),d.children&&d.children.length>0&&(_e.shift(4),et+=_e.move((e?`
`:" ")+g.indentLines(g.containerFlow(d,_e.current()),e?mapAll:mapExceptFirst))),rt(),et}}function mapExceptFirst(a,e,c){return e===0?a:mapAll(a,e,c)}function mapAll(a,e,c){return(c?"":"    ")+a}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(a){this.enter({type:"delete",children:[]},a)}function exitStrikethrough(a){this.exit(a)}function handleDelete(a,e,c,d){const h=c.createTracker(d),g=c.enter("strikethrough");let b=h.move("~~");return b+=c.containerPhrasing(a,{...h.current(),before:b,after:"~"}),b+=h.move("~~"),g(),b}function peekDelete(){return"~"}function defaultStringLength(a){return a.length}function markdownTable(a,e){const c=e||{},d=(c.align||[]).concat(),h=c.stringLength||defaultStringLength,g=[],b=[],_e=[],et=[];let rt=0,st=-1;for(;++st<a.length;){const ot=[],lt=[];let at=-1;for(a[st].length>rt&&(rt=a[st].length);++at<a[st].length;){const ct=serialize(a[st][at]);if(c.alignDelimiters!==!1){const dt=h(ct);lt[at]=dt,(et[at]===void 0||dt>et[at])&&(et[at]=dt)}ot.push(ct)}b[st]=ot,_e[st]=lt}let $=-1;if(typeof d=="object"&&"length"in d)for(;++$<rt;)g[$]=toAlignment(d[$]);else{const ot=toAlignment(d);for(;++$<rt;)g[$]=ot}$=-1;const _=[],nt=[];for(;++$<rt;){const ot=g[$];let lt="",at="";ot===99?(lt=":",at=":"):ot===108?lt=":":ot===114&&(at=":");let ct=c.alignDelimiters===!1?1:Math.max(1,et[$]-lt.length-at.length);const dt=lt+"-".repeat(ct)+at;c.alignDelimiters!==!1&&(ct=lt.length+ct+at.length,ct>et[$]&&(et[$]=ct),nt[$]=ct),_[$]=dt}b.splice(1,0,_),_e.splice(1,0,nt),st=-1;const it=[];for(;++st<b.length;){const ot=b[st],lt=_e[st];$=-1;const at=[];for(;++$<rt;){const ct=ot[$]||"";let dt="",ht="";if(c.alignDelimiters!==!1){const pt=et[$]-(lt[$]||0),ft=g[$];ft===114?dt=" ".repeat(pt):ft===99?pt%2?(dt=" ".repeat(pt/2+.5),ht=" ".repeat(pt/2-.5)):(dt=" ".repeat(pt/2),ht=dt):ht=" ".repeat(pt)}c.delimiterStart!==!1&&!$&&at.push("|"),c.padding!==!1&&!(c.alignDelimiters===!1&&ct==="")&&(c.delimiterStart!==!1||$)&&at.push(" "),c.alignDelimiters!==!1&&at.push(dt),at.push(ct),c.alignDelimiters!==!1&&at.push(ht),c.padding!==!1&&at.push(" "),(c.delimiterEnd!==!1||$!==rt-1)&&at.push("|")}it.push(c.delimiterEnd===!1?at.join("").replace(/ +$/,""):at.join(""))}return it.join(`
`)}function serialize(a){return a==null?"":String(a)}function toAlignment(a){const e=typeof a=="string"?a.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function blockquote(a,e,c,d){const h=c.enter("blockquote"),g=c.createTracker(d);g.move("> "),g.shift(2);const b=c.indentLines(c.containerFlow(a,g.current()),map$1);return h(),b}function map$1(a,e,c){return">"+(c?"":" ")+a}function patternInScope(a,e){return listInScope(a,e.inConstruct,!0)&&!listInScope(a,e.notInConstruct,!1)}function listInScope(a,e,c){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return c;let d=-1;for(;++d<e.length;)if(a.includes(e[d]))return!0;return!1}function hardBreak(a,e,c,d){let h=-1;for(;++h<c.unsafe.length;)if(c.unsafe[h].character===`
`&&patternInScope(c.stack,c.unsafe[h]))return/[ \t]/.test(d.before)?"":" ";return`\\
`}function longestStreak(a,e){const c=String(a);let d=c.indexOf(e),h=d,g=0,b=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;d!==-1;)d===h?++g>b&&(b=g):g=1,h=d+e.length,d=c.indexOf(e,h);return b}function formatCodeAsIndented(a,e){return!!(e.options.fences===!1&&a.value&&!a.lang&&/[^ \r\n]/.test(a.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(a.value))}function checkFence(a){const e=a.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function code$1(a,e,c,d){const h=checkFence(c),g=a.value||"",b=h==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(a,c)){const $=c.enter("codeIndented"),_=c.indentLines(g,map);return $(),_}const _e=c.createTracker(d),et=h.repeat(Math.max(longestStreak(g,h)+1,3)),rt=c.enter("codeFenced");let st=_e.move(et);if(a.lang){const $=c.enter(`codeFencedLang${b}`);st+=_e.move(c.safe(a.lang,{before:st,after:" ",encode:["`"],..._e.current()})),$()}if(a.lang&&a.meta){const $=c.enter(`codeFencedMeta${b}`);st+=_e.move(" "),st+=_e.move(c.safe(a.meta,{before:st,after:`
`,encode:["`"],..._e.current()})),$()}return st+=_e.move(`
`),g&&(st+=_e.move(g+`
`)),st+=_e.move(et),rt(),st}function map(a,e,c){return(c?"":"    ")+a}function checkQuote(a){const e=a.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function definition(a,e,c,d){const h=checkQuote(c),g=h==='"'?"Quote":"Apostrophe",b=c.enter("definition");let _e=c.enter("label");const et=c.createTracker(d);let rt=et.move("[");return rt+=et.move(c.safe(c.associationId(a),{before:rt,after:"]",...et.current()})),rt+=et.move("]: "),_e(),!a.url||/[\0- \u007F]/.test(a.url)?(_e=c.enter("destinationLiteral"),rt+=et.move("<"),rt+=et.move(c.safe(a.url,{before:rt,after:">",...et.current()})),rt+=et.move(">")):(_e=c.enter("destinationRaw"),rt+=et.move(c.safe(a.url,{before:rt,after:a.title?" ":`
`,...et.current()}))),_e(),a.title&&(_e=c.enter(`title${g}`),rt+=et.move(" "+h),rt+=et.move(c.safe(a.title,{before:rt,after:h,...et.current()})),rt+=et.move(h),_e()),b(),rt}function checkEmphasis(a){const e=a.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function encodeCharacterReference(a){return"&#x"+a.toString(16).toUpperCase()+";"}function encodeInfo(a,e,c){const d=classifyCharacter(a),h=classifyCharacter(e);return d===void 0?h===void 0?c==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:h===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:d===1?h===void 0?{inside:!1,outside:!1}:h===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:h===void 0?{inside:!1,outside:!1}:h===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}emphasis.peek=emphasisPeek;function emphasis(a,e,c,d){const h=checkEmphasis(c),g=c.enter("emphasis"),b=c.createTracker(d),_e=b.move(h);let et=b.move(c.containerPhrasing(a,{after:h,before:_e,...b.current()}));const rt=et.charCodeAt(0),st=encodeInfo(d.before.charCodeAt(d.before.length-1),rt,h);st.inside&&(et=encodeCharacterReference(rt)+et.slice(1));const $=et.charCodeAt(et.length-1),_=encodeInfo(d.after.charCodeAt(0),$,h);_.inside&&(et=et.slice(0,-1)+encodeCharacterReference($));const nt=b.move(h);return g(),c.attentionEncodeSurroundingInfo={after:_.outside,before:st.outside},_e+et+nt}function emphasisPeek(a,e,c){return c.options.emphasis||"*"}function formatHeadingAsSetext(a,e){let c=!1;return visit(a,function(d){if("value"in d&&/\r?\n|\r/.test(d.value)||d.type==="break")return c=!0,EXIT}),!!((!a.depth||a.depth<3)&&toString$1(a)&&(e.options.setext||c))}function heading(a,e,c,d){const h=Math.max(Math.min(6,a.depth||1),1),g=c.createTracker(d);if(formatHeadingAsSetext(a,c)){const st=c.enter("headingSetext"),$=c.enter("phrasing"),_=c.containerPhrasing(a,{...g.current(),before:`
`,after:`
`});return $(),st(),_+`
`+(h===1?"=":"-").repeat(_.length-(Math.max(_.lastIndexOf("\r"),_.lastIndexOf(`
`))+1))}const b="#".repeat(h),_e=c.enter("headingAtx"),et=c.enter("phrasing");g.move(b+" ");let rt=c.containerPhrasing(a,{before:"# ",after:`
`,...g.current()});return/^[\t ]/.test(rt)&&(rt=encodeCharacterReference(rt.charCodeAt(0))+rt.slice(1)),rt=rt?b+" "+rt:b,c.options.closeAtx&&(rt+=" "+b),et(),_e(),rt}html.peek=htmlPeek;function html(a){return a.value||""}function htmlPeek(){return"<"}image.peek=imagePeek;function image(a,e,c,d){const h=checkQuote(c),g=h==='"'?"Quote":"Apostrophe",b=c.enter("image");let _e=c.enter("label");const et=c.createTracker(d);let rt=et.move("![");return rt+=et.move(c.safe(a.alt,{before:rt,after:"]",...et.current()})),rt+=et.move("]("),_e(),!a.url&&a.title||/[\0- \u007F]/.test(a.url)?(_e=c.enter("destinationLiteral"),rt+=et.move("<"),rt+=et.move(c.safe(a.url,{before:rt,after:">",...et.current()})),rt+=et.move(">")):(_e=c.enter("destinationRaw"),rt+=et.move(c.safe(a.url,{before:rt,after:a.title?" ":")",...et.current()}))),_e(),a.title&&(_e=c.enter(`title${g}`),rt+=et.move(" "+h),rt+=et.move(c.safe(a.title,{before:rt,after:h,...et.current()})),rt+=et.move(h),_e()),rt+=et.move(")"),b(),rt}function imagePeek(){return"!"}imageReference.peek=imageReferencePeek;function imageReference(a,e,c,d){const h=a.referenceType,g=c.enter("imageReference");let b=c.enter("label");const _e=c.createTracker(d);let et=_e.move("![");const rt=c.safe(a.alt,{before:et,after:"]",..._e.current()});et+=_e.move(rt+"]["),b();const st=c.stack;c.stack=[],b=c.enter("reference");const $=c.safe(c.associationId(a),{before:et,after:"]",..._e.current()});return b(),c.stack=st,g(),h==="full"||!rt||rt!==$?et+=_e.move($+"]"):h==="shortcut"?et=et.slice(0,-1):et+=_e.move("]"),et}function imageReferencePeek(){return"!"}inlineCode.peek=inlineCodePeek;function inlineCode(a,e,c){let d=a.value||"",h="`",g=-1;for(;new RegExp("(^|[^`])"+h+"([^`]|$)").test(d);)h+="`";for(/[^ \r\n]/.test(d)&&(/^[ \r\n]/.test(d)&&/[ \r\n]$/.test(d)||/^`|`$/.test(d))&&(d=" "+d+" ");++g<c.unsafe.length;){const b=c.unsafe[g],_e=c.compilePattern(b);let et;if(b.atBreak)for(;et=_e.exec(d);){let rt=et.index;d.charCodeAt(rt)===10&&d.charCodeAt(rt-1)===13&&rt--,d=d.slice(0,rt)+" "+d.slice(et.index+1)}}return h+d+h}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(a,e){const c=toString$1(a);return!!(!e.options.resourceLink&&a.url&&!a.title&&a.children&&a.children.length===1&&a.children[0].type==="text"&&(c===a.url||"mailto:"+c===a.url)&&/^[a-z][a-z+.-]+:/i.test(a.url)&&!/[\0- <>\u007F]/.test(a.url))}link.peek=linkPeek;function link(a,e,c,d){const h=checkQuote(c),g=h==='"'?"Quote":"Apostrophe",b=c.createTracker(d);let _e,et;if(formatLinkAsAutolink(a,c)){const st=c.stack;c.stack=[],_e=c.enter("autolink");let $=b.move("<");return $+=b.move(c.containerPhrasing(a,{before:$,after:">",...b.current()})),$+=b.move(">"),_e(),c.stack=st,$}_e=c.enter("link"),et=c.enter("label");let rt=b.move("[");return rt+=b.move(c.containerPhrasing(a,{before:rt,after:"](",...b.current()})),rt+=b.move("]("),et(),!a.url&&a.title||/[\0- \u007F]/.test(a.url)?(et=c.enter("destinationLiteral"),rt+=b.move("<"),rt+=b.move(c.safe(a.url,{before:rt,after:">",...b.current()})),rt+=b.move(">")):(et=c.enter("destinationRaw"),rt+=b.move(c.safe(a.url,{before:rt,after:a.title?" ":")",...b.current()}))),et(),a.title&&(et=c.enter(`title${g}`),rt+=b.move(" "+h),rt+=b.move(c.safe(a.title,{before:rt,after:h,...b.current()})),rt+=b.move(h),et()),rt+=b.move(")"),_e(),rt}function linkPeek(a,e,c){return formatLinkAsAutolink(a,c)?"<":"["}linkReference.peek=linkReferencePeek;function linkReference(a,e,c,d){const h=a.referenceType,g=c.enter("linkReference");let b=c.enter("label");const _e=c.createTracker(d);let et=_e.move("[");const rt=c.containerPhrasing(a,{before:et,after:"]",..._e.current()});et+=_e.move(rt+"]["),b();const st=c.stack;c.stack=[],b=c.enter("reference");const $=c.safe(c.associationId(a),{before:et,after:"]",..._e.current()});return b(),c.stack=st,g(),h==="full"||!rt||rt!==$?et+=_e.move($+"]"):h==="shortcut"?et=et.slice(0,-1):et+=_e.move("]"),et}function linkReferencePeek(){return"["}function checkBullet(a){const e=a.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function checkBulletOther(a){const e=checkBullet(a),c=a.options.bulletOther;if(!c)return e==="*"?"-":"*";if(c!=="*"&&c!=="+"&&c!=="-")throw new Error("Cannot serialize items with `"+c+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(c===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+c+"`) to be different");return c}function checkBulletOrdered(a){const e=a.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function checkRule(a){const e=a.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function list(a,e,c,d){const h=c.enter("list"),g=c.bulletCurrent;let b=a.ordered?checkBulletOrdered(c):checkBullet(c);const _e=a.ordered?b==="."?")":".":checkBulletOther(c);let et=e&&c.bulletLastUsed?b===c.bulletLastUsed:!1;if(!a.ordered){const st=a.children?a.children[0]:void 0;if((b==="*"||b==="-")&&st&&(!st.children||!st.children[0])&&c.stack[c.stack.length-1]==="list"&&c.stack[c.stack.length-2]==="listItem"&&c.stack[c.stack.length-3]==="list"&&c.stack[c.stack.length-4]==="listItem"&&c.indexStack[c.indexStack.length-1]===0&&c.indexStack[c.indexStack.length-2]===0&&c.indexStack[c.indexStack.length-3]===0&&(et=!0),checkRule(c)===b&&st){let $=-1;for(;++$<a.children.length;){const _=a.children[$];if(_&&_.type==="listItem"&&_.children&&_.children[0]&&_.children[0].type==="thematicBreak"){et=!0;break}}}}et&&(b=_e),c.bulletCurrent=b;const rt=c.containerFlow(a,d);return c.bulletLastUsed=b,c.bulletCurrent=g,h(),rt}function checkListItemIndent(a){const e=a.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function listItem(a,e,c,d){const h=checkListItemIndent(c);let g=c.bulletCurrent||checkBullet(c);e&&e.type==="list"&&e.ordered&&(g=(typeof e.start=="number"&&e.start>-1?e.start:1)+(c.options.incrementListMarker===!1?0:e.children.indexOf(a))+g);let b=g.length+1;(h==="tab"||h==="mixed"&&(e&&e.type==="list"&&e.spread||a.spread))&&(b=Math.ceil(b/4)*4);const _e=c.createTracker(d);_e.move(g+" ".repeat(b-g.length)),_e.shift(b);const et=c.enter("listItem"),rt=c.indentLines(c.containerFlow(a,_e.current()),st);return et(),rt;function st($,_,nt){return _?(nt?"":" ".repeat(b))+$:(nt?g:g+" ".repeat(b-g.length))+$}}function paragraph(a,e,c,d){const h=c.enter("paragraph"),g=c.enter("phrasing"),b=c.containerPhrasing(a,d);return g(),h(),b}const phrasing=convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function root(a,e,c,d){return(a.children.some(function(b){return phrasing(b)})?c.containerPhrasing:c.containerFlow).call(c,a,d)}function checkStrong(a){const e=a.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}strong.peek=strongPeek;function strong(a,e,c,d){const h=checkStrong(c),g=c.enter("strong"),b=c.createTracker(d),_e=b.move(h+h);let et=b.move(c.containerPhrasing(a,{after:h,before:_e,...b.current()}));const rt=et.charCodeAt(0),st=encodeInfo(d.before.charCodeAt(d.before.length-1),rt,h);st.inside&&(et=encodeCharacterReference(rt)+et.slice(1));const $=et.charCodeAt(et.length-1),_=encodeInfo(d.after.charCodeAt(0),$,h);_.inside&&(et=et.slice(0,-1)+encodeCharacterReference($));const nt=b.move(h+h);return g(),c.attentionEncodeSurroundingInfo={after:_.outside,before:st.outside},_e+et+nt}function strongPeek(a,e,c){return c.options.strong||"*"}function text$1(a,e,c,d){return c.safe(a.value,d)}function checkRuleRepetition(a){const e=a.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function thematicBreak(a,e,c){const d=(checkRule(c)+(c.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(c));return c.options.ruleSpaces?d.slice(0,-1):d}const handle={blockquote,break:hardBreak,code:code$1,definition,emphasis,hardBreak,heading,html,image,imageReference,inlineCode,link,linkReference,list,listItem,paragraph,root,strong,text:text$1,thematicBreak};function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(a){const e=a._align;this.enter({type:"table",align:e.map(function(c){return c==="none"?null:c}),children:[]},a),this.data.inTable=!0}function exitTable(a){this.exit(a),this.data.inTable=void 0}function enterRow(a){this.enter({type:"tableRow",children:[]},a)}function exit(a){this.exit(a)}function enterCell(a){this.enter({type:"tableCell",children:[]},a)}function exitCodeText(a){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,replace));const c=this.stack[this.stack.length-1];c.type,c.value=e,this.exit(a)}function replace(a,e){return e==="|"?e:a}function gfmTableToMarkdown(a){const e=a||{},c=e.tableCellPadding,d=e.tablePipeAlign,h=e.stringLength,g=c?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:_,table:b,tableCell:et,tableRow:_e}};function b(nt,it,ot,lt){return rt(st(nt,ot,lt),nt.align)}function _e(nt,it,ot,lt){const at=$(nt,ot,lt),ct=rt([at]);return ct.slice(0,ct.indexOf(`
`))}function et(nt,it,ot,lt){const at=ot.enter("tableCell"),ct=ot.enter("phrasing"),dt=ot.containerPhrasing(nt,{...lt,before:g,after:g});return ct(),at(),dt}function rt(nt,it){return markdownTable(nt,{align:it,alignDelimiters:d,padding:c,stringLength:h})}function st(nt,it,ot){const lt=nt.children;let at=-1;const ct=[],dt=it.enter("table");for(;++at<lt.length;)ct[at]=$(lt[at],it,ot);return dt(),ct}function $(nt,it,ot){const lt=nt.children;let at=-1;const ct=[],dt=it.enter("tableRow");for(;++at<lt.length;)ct[at]=et(lt[at],nt,it,ot);return dt(),ct}function _(nt,it,ot){let lt=handle.inlineCode(nt,it,ot);return ot.stack.includes("tableCell")&&(lt=lt.replace(/\|/g,"\\$&")),lt}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(a){const e=this.stack[this.stack.length-2];e.type,e.checked=a.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(a){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const c=this.stack[this.stack.length-1];c.type;const d=c.children[0];if(d&&d.type==="text"){const h=e.children;let g=-1,b;for(;++g<h.length;){const _e=h[g];if(_e.type==="paragraph"){b=_e;break}}b===c&&(d.value=d.value.slice(1),d.value.length===0?c.children.shift():c.position&&d.position&&typeof d.position.start.offset=="number"&&(d.position.start.column++,d.position.start.offset++,c.position.start=Object.assign({},d.position.start)))}}this.exit(a)}function listItemWithTaskListItem(a,e,c,d){const h=a.children[0],g=typeof a.checked=="boolean"&&h&&h.type==="paragraph",b="["+(a.checked?"x":" ")+"] ",_e=c.createTracker(d);g&&_e.move(b);let et=handle.listItem(a,e,c,{...d,..._e.current()});return g&&(et=et.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,rt)),et;function rt(st){return st+b}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(a){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(a),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(a),gfmTaskListItemToMarkdown()]}}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={name:"wwwAutolink",tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={name:"protocolAutolink",tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={name:"emailAutolink",tokenize:tokenizeEmailAutolink,previous:previousEmail},text={};function gfmAutolinkLiteral(){return{text}}let code=48;for(;code<123;)text[code]=emailAutolink,code++,code===58?code=65:code===91&&(code=97);text[43]=emailAutolink;text[45]=emailAutolink;text[46]=emailAutolink;text[95]=emailAutolink;text[72]=[emailAutolink,protocolAutolink];text[104]=[emailAutolink,protocolAutolink];text[87]=[emailAutolink,wwwAutolink];text[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(a,e,c){const d=this;let h,g;return b;function b($){return!gfmAtext($)||!previousEmail.call(d,d.previous)||previousUnbalanced(d.events)?c($):(a.enter("literalAutolink"),a.enter("literalAutolinkEmail"),_e($))}function _e($){return gfmAtext($)?(a.consume($),_e):$===64?(a.consume($),et):c($)}function et($){return $===46?a.check(emailDomainDotTrail,st,rt)($):$===45||$===95||asciiAlphanumeric($)?(g=!0,a.consume($),et):st($)}function rt($){return a.consume($),h=!0,et}function st($){return g&&h&&asciiAlpha(d.previous)?(a.exit("literalAutolinkEmail"),a.exit("literalAutolink"),e($)):c($)}}function tokenizeWwwAutolink(a,e,c){const d=this;return h;function h(b){return b!==87&&b!==119||!previousWww.call(d,d.previous)||previousUnbalanced(d.events)?c(b):(a.enter("literalAutolink"),a.enter("literalAutolinkWww"),a.check(wwwPrefix,a.attempt(domain,a.attempt(path,g),c),c)(b))}function g(b){return a.exit("literalAutolinkWww"),a.exit("literalAutolink"),e(b)}}function tokenizeProtocolAutolink(a,e,c){const d=this;let h="",g=!1;return b;function b($){return($===72||$===104)&&previousProtocol.call(d,d.previous)&&!previousUnbalanced(d.events)?(a.enter("literalAutolink"),a.enter("literalAutolinkHttp"),h+=String.fromCodePoint($),a.consume($),_e):c($)}function _e($){if(asciiAlpha($)&&h.length<5)return h+=String.fromCodePoint($),a.consume($),_e;if($===58){const _=h.toLowerCase();if(_==="http"||_==="https")return a.consume($),et}return c($)}function et($){return $===47?(a.consume($),g?rt:(g=!0,et)):c($)}function rt($){return $===null||asciiControl($)||markdownLineEndingOrSpace($)||unicodeWhitespace($)||unicodePunctuation($)?c($):a.attempt(domain,a.attempt(path,st),c)($)}function st($){return a.exit("literalAutolinkHttp"),a.exit("literalAutolink"),e($)}}function tokenizeWwwPrefix(a,e,c){let d=0;return h;function h(b){return(b===87||b===119)&&d<3?(d++,a.consume(b),h):b===46&&d===3?(a.consume(b),g):c(b)}function g(b){return b===null?c(b):e(b)}}function tokenizeDomain(a,e,c){let d,h,g;return b;function b(rt){return rt===46||rt===95?a.check(trail,et,_e)(rt):rt===null||markdownLineEndingOrSpace(rt)||unicodeWhitespace(rt)||rt!==45&&unicodePunctuation(rt)?et(rt):(g=!0,a.consume(rt),b)}function _e(rt){return rt===95?d=!0:(h=d,d=void 0),a.consume(rt),b}function et(rt){return h||d||!g?c(rt):e(rt)}}function tokenizePath(a,e){let c=0,d=0;return h;function h(b){return b===40?(c++,a.consume(b),h):b===41&&d<c?g(b):b===33||b===34||b===38||b===39||b===41||b===42||b===44||b===46||b===58||b===59||b===60||b===63||b===93||b===95||b===126?a.check(trail,e,g)(b):b===null||markdownLineEndingOrSpace(b)||unicodeWhitespace(b)?e(b):(a.consume(b),h)}function g(b){return b===41&&d++,a.consume(b),h}}function tokenizeTrail(a,e,c){return d;function d(_e){return _e===33||_e===34||_e===39||_e===41||_e===42||_e===44||_e===46||_e===58||_e===59||_e===63||_e===95||_e===126?(a.consume(_e),d):_e===38?(a.consume(_e),g):_e===93?(a.consume(_e),h):_e===60||_e===null||markdownLineEndingOrSpace(_e)||unicodeWhitespace(_e)?e(_e):c(_e)}function h(_e){return _e===null||_e===40||_e===91||markdownLineEndingOrSpace(_e)||unicodeWhitespace(_e)?e(_e):d(_e)}function g(_e){return asciiAlpha(_e)?b(_e):c(_e)}function b(_e){return _e===59?(a.consume(_e),d):asciiAlpha(_e)?(a.consume(_e),b):c(_e)}}function tokenizeEmailDomainDotTrail(a,e,c){return d;function d(g){return a.consume(g),h}function h(g){return asciiAlphanumeric(g)?c(g):e(g)}}function previousWww(a){return a===null||a===40||a===42||a===95||a===91||a===93||a===126||markdownLineEndingOrSpace(a)}function previousProtocol(a){return!asciiAlpha(a)}function previousEmail(a){return!(a===47||gfmAtext(a))}function gfmAtext(a){return a===43||a===45||a===46||a===95||asciiAlphanumeric(a)}function previousUnbalanced(a){let e=a.length,c=!1;for(;e--;){const d=a[e][1];if((d.type==="labelLink"||d.type==="labelImage")&&!d._balanced){c=!0;break}if(d._gfmAutolinkLiteralWalkedInto){c=!1;break}}return a.length>0&&!c&&(a[a.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),c}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{name:"gfmFootnoteCall",tokenize:tokenizeGfmFootnoteCall},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(a,e,c){const d=this;let h=d.events.length;const g=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let b;for(;h--;){const et=d.events[h][1];if(et.type==="labelImage"){b=et;break}if(et.type==="gfmFootnoteCall"||et.type==="labelLink"||et.type==="label"||et.type==="image"||et.type==="link")break}return _e;function _e(et){if(!b||!b._balanced)return c(et);const rt=normalizeIdentifier(d.sliceSerialize({start:b.end,end:d.now()}));return rt.codePointAt(0)!==94||!g.includes(rt.slice(1))?c(et):(a.enter("gfmFootnoteCallLabelMarker"),a.consume(et),a.exit("gfmFootnoteCallLabelMarker"),e(et))}}function resolveToPotentialGfmFootnoteCall(a,e){let c=a.length;for(;c--;)if(a[c][1].type==="labelImage"&&a[c][0]==="enter"){a[c][1];break}a[c+1][1].type="data",a[c+3][1].type="gfmFootnoteCallLabelMarker";const d={type:"gfmFootnoteCall",start:Object.assign({},a[c+3][1].start),end:Object.assign({},a[a.length-1][1].end)},h={type:"gfmFootnoteCallMarker",start:Object.assign({},a[c+3][1].end),end:Object.assign({},a[c+3][1].end)};h.end.column++,h.end.offset++,h.end._bufferIndex++;const g={type:"gfmFootnoteCallString",start:Object.assign({},h.end),end:Object.assign({},a[a.length-1][1].start)},b={type:"chunkString",contentType:"string",start:Object.assign({},g.start),end:Object.assign({},g.end)},_e=[a[c+1],a[c+2],["enter",d,e],a[c+3],a[c+4],["enter",h,e],["exit",h,e],["enter",g,e],["enter",b,e],["exit",b,e],["exit",g,e],a[a.length-2],a[a.length-1],["exit",d,e]];return a.splice(c,a.length-c+1,..._e),a}function tokenizeGfmFootnoteCall(a,e,c){const d=this,h=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let g=0,b;return _e;function _e($){return a.enter("gfmFootnoteCall"),a.enter("gfmFootnoteCallLabelMarker"),a.consume($),a.exit("gfmFootnoteCallLabelMarker"),et}function et($){return $!==94?c($):(a.enter("gfmFootnoteCallMarker"),a.consume($),a.exit("gfmFootnoteCallMarker"),a.enter("gfmFootnoteCallString"),a.enter("chunkString").contentType="string",rt)}function rt($){if(g>999||$===93&&!b||$===null||$===91||markdownLineEndingOrSpace($))return c($);if($===93){a.exit("chunkString");const _=a.exit("gfmFootnoteCallString");return h.includes(normalizeIdentifier(d.sliceSerialize(_)))?(a.enter("gfmFootnoteCallLabelMarker"),a.consume($),a.exit("gfmFootnoteCallLabelMarker"),a.exit("gfmFootnoteCall"),e):c($)}return markdownLineEndingOrSpace($)||(b=!0),g++,a.consume($),$===92?st:rt}function st($){return $===91||$===92||$===93?(a.consume($),g++,rt):rt($)}}function tokenizeDefinitionStart(a,e,c){const d=this,h=d.parser.gfmFootnotes||(d.parser.gfmFootnotes=[]);let g,b=0,_e;return et;function et(it){return a.enter("gfmFootnoteDefinition")._container=!0,a.enter("gfmFootnoteDefinitionLabel"),a.enter("gfmFootnoteDefinitionLabelMarker"),a.consume(it),a.exit("gfmFootnoteDefinitionLabelMarker"),rt}function rt(it){return it===94?(a.enter("gfmFootnoteDefinitionMarker"),a.consume(it),a.exit("gfmFootnoteDefinitionMarker"),a.enter("gfmFootnoteDefinitionLabelString"),a.enter("chunkString").contentType="string",st):c(it)}function st(it){if(b>999||it===93&&!_e||it===null||it===91||markdownLineEndingOrSpace(it))return c(it);if(it===93){a.exit("chunkString");const ot=a.exit("gfmFootnoteDefinitionLabelString");return g=normalizeIdentifier(d.sliceSerialize(ot)),a.enter("gfmFootnoteDefinitionLabelMarker"),a.consume(it),a.exit("gfmFootnoteDefinitionLabelMarker"),a.exit("gfmFootnoteDefinitionLabel"),_}return markdownLineEndingOrSpace(it)||(_e=!0),b++,a.consume(it),it===92?$:st}function $(it){return it===91||it===92||it===93?(a.consume(it),b++,st):st(it)}function _(it){return it===58?(a.enter("definitionMarker"),a.consume(it),a.exit("definitionMarker"),h.includes(g)||h.push(g),factorySpace(a,nt,"gfmFootnoteDefinitionWhitespace")):c(it)}function nt(it){return e(it)}}function tokenizeDefinitionContinuation(a,e,c){return a.check(blankLine,e,a.attempt(indent,e,c))}function gfmFootnoteDefinitionEnd(a){a.exit("gfmFootnoteDefinition")}function tokenizeIndent(a,e,c){const d=this;return factorySpace(a,h,"gfmFootnoteDefinitionIndent",5);function h(g){const b=d.events[d.events.length-1];return b&&b[1].type==="gfmFootnoteDefinitionIndent"&&b[2].sliceSerialize(b[1],!0).length===4?e(g):c(g)}}function gfmStrikethrough(a){let c=(a||{}).singleTilde;const d={name:"strikethrough",tokenize:g,resolveAll:h};return c==null&&(c=!0),{text:{126:d},insideSpan:{null:[d]},attentionMarkers:{null:[126]}};function h(b,_e){let et=-1;for(;++et<b.length;)if(b[et][0]==="enter"&&b[et][1].type==="strikethroughSequenceTemporary"&&b[et][1]._close){let rt=et;for(;rt--;)if(b[rt][0]==="exit"&&b[rt][1].type==="strikethroughSequenceTemporary"&&b[rt][1]._open&&b[et][1].end.offset-b[et][1].start.offset===b[rt][1].end.offset-b[rt][1].start.offset){b[et][1].type="strikethroughSequence",b[rt][1].type="strikethroughSequence";const st={type:"strikethrough",start:Object.assign({},b[rt][1].start),end:Object.assign({},b[et][1].end)},$={type:"strikethroughText",start:Object.assign({},b[rt][1].end),end:Object.assign({},b[et][1].start)},_=[["enter",st,_e],["enter",b[rt][1],_e],["exit",b[rt][1],_e],["enter",$,_e]],nt=_e.parser.constructs.insideSpan.null;nt&&splice(_,_.length,0,resolveAll(nt,b.slice(rt+1,et),_e)),splice(_,_.length,0,[["exit",$,_e],["enter",b[et][1],_e],["exit",b[et][1],_e],["exit",st,_e]]),splice(b,rt-1,et-rt+3,_),et=rt+_.length-2;break}}for(et=-1;++et<b.length;)b[et][1].type==="strikethroughSequenceTemporary"&&(b[et][1].type="data");return b}function g(b,_e,et){const rt=this.previous,st=this.events;let $=0;return _;function _(it){return rt===126&&st[st.length-1][1].type!=="characterEscape"?et(it):(b.enter("strikethroughSequenceTemporary"),nt(it))}function nt(it){const ot=classifyCharacter(rt);if(it===126)return $>1?et(it):(b.consume(it),$++,nt);if($<2&&!c)return et(it);const lt=b.exit("strikethroughSequenceTemporary"),at=classifyCharacter(it);return lt._open=!at||at===2&&!!ot,lt._close=!ot||ot===2&&!!at,_e(it)}}}class EditMap{constructor(){this.map=[]}add(e,c,d){addImplementation(this,e,c,d)}consume(e){if(this.map.sort(function(g,b){return g[0]-b[0]}),this.map.length===0)return;let c=this.map.length;const d=[];for(;c>0;)c-=1,d.push(e.slice(this.map[c][0]+this.map[c][1]),this.map[c][2]),e.length=this.map[c][0];d.push(e.slice()),e.length=0;let h=d.pop();for(;h;){for(const g of h)e.push(g);h=d.pop()}this.map.length=0}}function addImplementation(a,e,c,d){let h=0;if(!(c===0&&d.length===0)){for(;h<a.map.length;){if(a.map[h][0]===e){a.map[h][1]+=c,a.map[h][2].push(...d);return}h+=1}a.map.push([e,c,d])}}function gfmTableAlign(a,e){let c=!1;const d=[];for(;e<a.length;){const h=a[e];if(c){if(h[0]==="enter")h[1].type==="tableContent"&&d.push(a[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(h[1].type==="tableContent"){if(a[e-1][1].type==="tableDelimiterMarker"){const g=d.length-1;d[g]=d[g]==="left"?"center":"right"}}else if(h[1].type==="tableDelimiterRow")break}else h[0]==="enter"&&h[1].type==="tableDelimiterRow"&&(c=!0);e+=1}return d}function gfmTable(){return{flow:{null:{name:"table",tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(a,e,c){const d=this;let h=0,g=0,b;return _e;function _e(Et){let St=d.events.length-1;for(;St>-1;){const Rt=d.events[St][1].type;if(Rt==="lineEnding"||Rt==="linePrefix")St--;else break}const Pt=St>-1?d.events[St][1].type:null,Mt=Pt==="tableHead"||Pt==="tableRow"?ft:et;return Mt===ft&&d.parser.lazy[d.now().line]?c(Et):Mt(Et)}function et(Et){return a.enter("tableHead"),a.enter("tableRow"),rt(Et)}function rt(Et){return Et===124||(b=!0,g+=1),st(Et)}function st(Et){return Et===null?c(Et):markdownLineEnding(Et)?g>1?(g=0,d.interrupt=!0,a.exit("tableRow"),a.enter("lineEnding"),a.consume(Et),a.exit("lineEnding"),nt):c(Et):markdownSpace(Et)?factorySpace(a,st,"whitespace")(Et):(g+=1,b&&(b=!1,h+=1),Et===124?(a.enter("tableCellDivider"),a.consume(Et),a.exit("tableCellDivider"),b=!0,st):(a.enter("data"),$(Et)))}function $(Et){return Et===null||Et===124||markdownLineEndingOrSpace(Et)?(a.exit("data"),st(Et)):(a.consume(Et),Et===92?_:$)}function _(Et){return Et===92||Et===124?(a.consume(Et),$):$(Et)}function nt(Et){return d.interrupt=!1,d.parser.lazy[d.now().line]?c(Et):(a.enter("tableDelimiterRow"),b=!1,markdownSpace(Et)?factorySpace(a,it,"linePrefix",d.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Et):it(Et))}function it(Et){return Et===45||Et===58?lt(Et):Et===124?(b=!0,a.enter("tableCellDivider"),a.consume(Et),a.exit("tableCellDivider"),ot):pt(Et)}function ot(Et){return markdownSpace(Et)?factorySpace(a,lt,"whitespace")(Et):lt(Et)}function lt(Et){return Et===58?(g+=1,b=!0,a.enter("tableDelimiterMarker"),a.consume(Et),a.exit("tableDelimiterMarker"),at):Et===45?(g+=1,at(Et)):Et===null||markdownLineEnding(Et)?ht(Et):pt(Et)}function at(Et){return Et===45?(a.enter("tableDelimiterFiller"),ct(Et)):pt(Et)}function ct(Et){return Et===45?(a.consume(Et),ct):Et===58?(b=!0,a.exit("tableDelimiterFiller"),a.enter("tableDelimiterMarker"),a.consume(Et),a.exit("tableDelimiterMarker"),dt):(a.exit("tableDelimiterFiller"),dt(Et))}function dt(Et){return markdownSpace(Et)?factorySpace(a,ht,"whitespace")(Et):ht(Et)}function ht(Et){return Et===124?it(Et):Et===null||markdownLineEnding(Et)?!b||h!==g?pt(Et):(a.exit("tableDelimiterRow"),a.exit("tableHead"),e(Et)):pt(Et)}function pt(Et){return c(Et)}function ft(Et){return a.enter("tableRow"),mt(Et)}function mt(Et){return Et===124?(a.enter("tableCellDivider"),a.consume(Et),a.exit("tableCellDivider"),mt):Et===null||markdownLineEnding(Et)?(a.exit("tableRow"),e(Et)):markdownSpace(Et)?factorySpace(a,mt,"whitespace")(Et):(a.enter("data"),xt(Et))}function xt(Et){return Et===null||Et===124||markdownLineEndingOrSpace(Et)?(a.exit("data"),mt(Et)):(a.consume(Et),Et===92?gt:xt)}function gt(Et){return Et===92||Et===124?(a.consume(Et),xt):xt(Et)}}function resolveTable(a,e){let c=-1,d=!0,h=0,g=[0,0,0,0],b=[0,0,0,0],_e=!1,et=0,rt,st,$;const _=new EditMap;for(;++c<a.length;){const nt=a[c],it=nt[1];nt[0]==="enter"?it.type==="tableHead"?(_e=!1,et!==0&&(flushTableEnd(_,e,et,rt,st),st=void 0,et=0),rt={type:"table",start:Object.assign({},it.start),end:Object.assign({},it.end)},_.add(c,0,[["enter",rt,e]])):it.type==="tableRow"||it.type==="tableDelimiterRow"?(d=!0,$=void 0,g=[0,0,0,0],b=[0,c+1,0,0],_e&&(_e=!1,st={type:"tableBody",start:Object.assign({},it.start),end:Object.assign({},it.end)},_.add(c,0,[["enter",st,e]])),h=it.type==="tableDelimiterRow"?2:st?3:1):h&&(it.type==="data"||it.type==="tableDelimiterMarker"||it.type==="tableDelimiterFiller")?(d=!1,b[2]===0&&(g[1]!==0&&(b[0]=b[1],$=flushCell(_,e,g,h,void 0,$),g=[0,0,0,0]),b[2]=c)):it.type==="tableCellDivider"&&(d?d=!1:(g[1]!==0&&(b[0]=b[1],$=flushCell(_,e,g,h,void 0,$)),g=b,b=[g[1],c,0,0])):it.type==="tableHead"?(_e=!0,et=c):it.type==="tableRow"||it.type==="tableDelimiterRow"?(et=c,g[1]!==0?(b[0]=b[1],$=flushCell(_,e,g,h,c,$)):b[1]!==0&&($=flushCell(_,e,b,h,c,$)),h=0):h&&(it.type==="data"||it.type==="tableDelimiterMarker"||it.type==="tableDelimiterFiller")&&(b[3]=c)}for(et!==0&&flushTableEnd(_,e,et,rt,st),_.consume(e.events),c=-1;++c<e.events.length;){const nt=e.events[c];nt[0]==="enter"&&nt[1].type==="table"&&(nt[1]._align=gfmTableAlign(e.events,c))}return a}function flushCell(a,e,c,d,h,g){const b=d===1?"tableHeader":d===2?"tableDelimiter":"tableData",_e="tableContent";c[0]!==0&&(g.end=Object.assign({},getPoint(e.events,c[0])),a.add(c[0],0,[["exit",g,e]]));const et=getPoint(e.events,c[1]);if(g={type:b,start:Object.assign({},et),end:Object.assign({},et)},a.add(c[1],0,[["enter",g,e]]),c[2]!==0){const rt=getPoint(e.events,c[2]),st=getPoint(e.events,c[3]),$={type:_e,start:Object.assign({},rt),end:Object.assign({},st)};if(a.add(c[2],0,[["enter",$,e]]),d!==2){const _=e.events[c[2]],nt=e.events[c[3]];if(_[1].end=Object.assign({},nt[1].end),_[1].type="chunkText",_[1].contentType="text",c[3]>c[2]+1){const it=c[2]+1,ot=c[3]-c[2]-1;a.add(it,ot,[])}}a.add(c[3]+1,0,[["exit",$,e]])}return h!==void 0&&(g.end=Object.assign({},getPoint(e.events,h)),a.add(h,0,[["exit",g,e]]),g=void 0),g}function flushTableEnd(a,e,c,d,h){const g=[],b=getPoint(e.events,c);h&&(h.end=Object.assign({},b),g.push(["exit",h,e])),d.end=Object.assign({},b),g.push(["exit",d,e]),a.add(c+1,0,g)}function getPoint(a,e){const c=a[e],d=c[0]==="enter"?"start":"end";return c[1][d]}const tasklistCheck={name:"tasklistCheck",tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(a,e,c){const d=this;return h;function h(et){return d.previous!==null||!d._gfmTasklistFirstContentOfListItem?c(et):(a.enter("taskListCheck"),a.enter("taskListCheckMarker"),a.consume(et),a.exit("taskListCheckMarker"),g)}function g(et){return markdownLineEndingOrSpace(et)?(a.enter("taskListCheckValueUnchecked"),a.consume(et),a.exit("taskListCheckValueUnchecked"),b):et===88||et===120?(a.enter("taskListCheckValueChecked"),a.consume(et),a.exit("taskListCheckValueChecked"),b):c(et)}function b(et){return et===93?(a.enter("taskListCheckMarker"),a.consume(et),a.exit("taskListCheckMarker"),a.exit("taskListCheck"),_e):c(et)}function _e(et){return markdownLineEnding(et)?e(et):markdownSpace(et)?a.check({tokenize:spaceThenNonSpace},e,c)(et):c(et)}}function spaceThenNonSpace(a,e,c){return factorySpace(a,d,"whitespace");function d(h){return h===null?c(h):e(h)}}function gfm(a){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(a),gfmTable(),gfmTaskListItem()])}const emptyOptions={};function remarkGfm(a){const e=this,c=a||emptyOptions,d=e.data(),h=d.micromarkExtensions||(d.micromarkExtensions=[]),g=d.fromMarkdownExtensions||(d.fromMarkdownExtensions=[]),b=d.toMarkdownExtensions||(d.toMarkdownExtensions=[]);h.push(gfm(c)),g.push(gfmFromMarkdown()),b.push(gfmToMarkdown(c))}function useStateMachine(a,e){return reactExports.useReducer((c,d)=>e[c][d]??c,a)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,type:d="hover",dir:h,scrollHideDelay:g=600,...b}=a,[_e,et]=reactExports.useState(null),[rt,st]=reactExports.useState(null),[$,_]=reactExports.useState(null),[nt,it]=reactExports.useState(null),[ot,lt]=reactExports.useState(null),[at,ct]=reactExports.useState(0),[dt,ht]=reactExports.useState(0),[pt,ft]=reactExports.useState(!1),[mt,xt]=reactExports.useState(!1),gt=useComposedRefs(e,St=>et(St)),Et=useDirection(h);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:c,type:d,dir:Et,scrollHideDelay:g,scrollArea:_e,viewport:rt,onViewportChange:st,content:$,onContentChange:_,scrollbarX:nt,onScrollbarXChange:it,scrollbarXEnabled:pt,onScrollbarXEnabledChange:ft,scrollbarY:ot,onScrollbarYChange:lt,scrollbarYEnabled:mt,onScrollbarYEnabledChange:xt,onCornerWidthChange:ct,onCornerHeightChange:ht,children:jsxRuntimeExports.jsx(Primitive.div,{dir:Et,...b,ref:gt,style:{position:"relative","--radix-scroll-area-corner-width":at+"px","--radix-scroll-area-corner-height":dt+"px",...a.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,children:d,nonce:h,...g}=a,b=useScrollAreaContext(VIEWPORT_NAME,c),_e=reactExports.useRef(null),et=useComposedRefs(e,_e,b.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:h}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...g,ref:et,style:{overflowX:b.scrollbarXEnabled?"scroll":"hidden",overflowY:b.scrollbarYEnabled?"scroll":"hidden",...a.style},children:jsxRuntimeExports.jsx("div",{ref:b.onContentChange,style:{minWidth:"100%",display:"table"},children:d})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),{onScrollbarXEnabledChange:g,onScrollbarYEnabledChange:b}=h,_e=a.orientation==="horizontal";return reactExports.useEffect(()=>(_e?g(!0):b(!0),()=>{_e?g(!1):b(!1)}),[_e,g,b]),h.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...d,ref:e,forceMount:c}):h.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...d,ref:e,forceMount:c}):h.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...d,ref:e,forceMount:c}):h.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...d,ref:e}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[g,b]=reactExports.useState(!1);return reactExports.useEffect(()=>{const _e=h.scrollArea;let et=0;if(_e){const rt=()=>{window.clearTimeout(et),b(!0)},st=()=>{et=window.setTimeout(()=>b(!1),h.scrollHideDelay)};return _e.addEventListener("pointerenter",rt),_e.addEventListener("pointerleave",st),()=>{window.clearTimeout(et),_e.removeEventListener("pointerenter",rt),_e.removeEventListener("pointerleave",st)}}},[h.scrollArea,h.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:c||g,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":g?"visible":"hidden",...d,ref:e})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),g=a.orientation==="horizontal",b=useDebounceCallback(()=>et("SCROLL_END"),100),[_e,et]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(_e==="idle"){const rt=window.setTimeout(()=>et("HIDE"),h.scrollHideDelay);return()=>window.clearTimeout(rt)}},[_e,h.scrollHideDelay,et]),reactExports.useEffect(()=>{const rt=h.viewport,st=g?"scrollLeft":"scrollTop";if(rt){let $=rt[st];const _=()=>{const nt=rt[st];$!==nt&&(et("SCROLL"),b()),$=nt};return rt.addEventListener("scroll",_),()=>rt.removeEventListener("scroll",_)}},[h.viewport,g,et,b]),jsxRuntimeExports.jsx(Presence,{present:c||_e!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":_e==="hidden"?"hidden":"visible",...d,ref:e,onPointerEnter:composeEventHandlers(a.onPointerEnter,()=>et("POINTER_ENTER")),onPointerLeave:composeEventHandlers(a.onPointerLeave,()=>et("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((a,e)=>{const c=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),{forceMount:d,...h}=a,[g,b]=reactExports.useState(!1),_e=a.orientation==="horizontal",et=useDebounceCallback(()=>{if(c.viewport){const rt=c.viewport.offsetWidth<c.viewport.scrollWidth,st=c.viewport.offsetHeight<c.viewport.scrollHeight;b(_e?rt:st)}},10);return useResizeObserver(c.viewport,et),useResizeObserver(c.content,et),jsxRuntimeExports.jsx(Presence,{present:d||g,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":g?"visible":"hidden",...h,ref:e})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((a,e)=>{const{orientation:c="vertical",...d}=a,h=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),g=reactExports.useRef(null),b=reactExports.useRef(0),[_e,et]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),rt=getThumbRatio(_e.viewport,_e.content),st={...d,sizes:_e,onSizesChange:et,hasThumb:rt>0&&rt<1,onThumbChange:_=>g.current=_,onThumbPointerUp:()=>b.current=0,onThumbPointerDown:_=>b.current=_};function $(_,nt){return getScrollPositionFromPointer(_,b.current,_e,nt)}return c==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...st,ref:e,onThumbPositionChange:()=>{if(h.viewport&&g.current){const _=h.viewport.scrollLeft,nt=getThumbOffsetFromScroll(_,_e,h.dir);g.current.style.transform=`translate3d(${nt}px, 0, 0)`}},onWheelScroll:_=>{h.viewport&&(h.viewport.scrollLeft=_)},onDragScroll:_=>{h.viewport&&(h.viewport.scrollLeft=$(_,h.dir))}}):c==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...st,ref:e,onThumbPositionChange:()=>{if(h.viewport&&g.current){const _=h.viewport.scrollTop,nt=getThumbOffsetFromScroll(_,_e);g.current.style.transform=`translate3d(0, ${nt}px, 0)`}},onWheelScroll:_=>{h.viewport&&(h.viewport.scrollTop=_)},onDragScroll:_=>{h.viewport&&(h.viewport.scrollTop=$(_))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((a,e)=>{const{sizes:c,onSizesChange:d,...h}=a,g=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[b,_e]=reactExports.useState(),et=reactExports.useRef(null),rt=useComposedRefs(e,et,g.onScrollbarXChange);return reactExports.useEffect(()=>{et.current&&_e(getComputedStyle(et.current))},[et]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...h,ref:rt,sizes:c,style:{bottom:0,left:g.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:g.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(c)+"px",...a.style},onThumbPointerDown:st=>a.onThumbPointerDown(st.x),onDragScroll:st=>a.onDragScroll(st.x),onWheelScroll:(st,$)=>{if(g.viewport){const _=g.viewport.scrollLeft+st.deltaX;a.onWheelScroll(_),isScrollingWithinScrollbarBounds(_,$)&&st.preventDefault()}},onResize:()=>{et.current&&g.viewport&&b&&d({content:g.viewport.scrollWidth,viewport:g.viewport.offsetWidth,scrollbar:{size:et.current.clientWidth,paddingStart:toInt(b.paddingLeft),paddingEnd:toInt(b.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((a,e)=>{const{sizes:c,onSizesChange:d,...h}=a,g=useScrollAreaContext(SCROLLBAR_NAME,a.__scopeScrollArea),[b,_e]=reactExports.useState(),et=reactExports.useRef(null),rt=useComposedRefs(e,et,g.onScrollbarYChange);return reactExports.useEffect(()=>{et.current&&_e(getComputedStyle(et.current))},[et]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...h,ref:rt,sizes:c,style:{top:0,right:g.dir==="ltr"?0:void 0,left:g.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(c)+"px",...a.style},onThumbPointerDown:st=>a.onThumbPointerDown(st.y),onDragScroll:st=>a.onDragScroll(st.y),onWheelScroll:(st,$)=>{if(g.viewport){const _=g.viewport.scrollTop+st.deltaY;a.onWheelScroll(_),isScrollingWithinScrollbarBounds(_,$)&&st.preventDefault()}},onResize:()=>{et.current&&g.viewport&&b&&d({content:g.viewport.scrollHeight,viewport:g.viewport.offsetHeight,scrollbar:{size:et.current.clientHeight,paddingStart:toInt(b.paddingTop),paddingEnd:toInt(b.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,sizes:d,hasThumb:h,onThumbChange:g,onThumbPointerUp:b,onThumbPointerDown:_e,onThumbPositionChange:et,onDragScroll:rt,onWheelScroll:st,onResize:$,..._}=a,nt=useScrollAreaContext(SCROLLBAR_NAME,c),[it,ot]=reactExports.useState(null),lt=useComposedRefs(e,gt=>ot(gt)),at=reactExports.useRef(null),ct=reactExports.useRef(""),dt=nt.viewport,ht=d.content-d.viewport,pt=useCallbackRef$1(st),ft=useCallbackRef$1(et),mt=useDebounceCallback($,10);function xt(gt){if(at.current){const Et=gt.clientX-at.current.left,St=gt.clientY-at.current.top;rt({x:Et,y:St})}}return reactExports.useEffect(()=>{const gt=Et=>{const St=Et.target;(it==null?void 0:it.contains(St))&&pt(Et,ht)};return document.addEventListener("wheel",gt,{passive:!1}),()=>document.removeEventListener("wheel",gt,{passive:!1})},[dt,it,ht,pt]),reactExports.useEffect(ft,[d,ft]),useResizeObserver(it,mt),useResizeObserver(nt.content,mt),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:c,scrollbar:it,hasThumb:h,onThumbChange:useCallbackRef$1(g),onThumbPointerUp:useCallbackRef$1(b),onThumbPositionChange:ft,onThumbPointerDown:useCallbackRef$1(_e),children:jsxRuntimeExports.jsx(Primitive.div,{..._,ref:lt,style:{position:"absolute",..._.style},onPointerDown:composeEventHandlers(a.onPointerDown,gt=>{gt.button===0&&(gt.target.setPointerCapture(gt.pointerId),at.current=it.getBoundingClientRect(),ct.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",nt.viewport&&(nt.viewport.style.scrollBehavior="auto"),xt(gt))}),onPointerMove:composeEventHandlers(a.onPointerMove,xt),onPointerUp:composeEventHandlers(a.onPointerUp,gt=>{const Et=gt.target;Et.hasPointerCapture(gt.pointerId)&&Et.releasePointerCapture(gt.pointerId),document.body.style.webkitUserSelect=ct.current,nt.viewport&&(nt.viewport.style.scrollBehavior=""),at.current=null})})})}),THUMB_NAME$1="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((a,e)=>{const{forceMount:c,...d}=a,h=useScrollbarContext(THUMB_NAME$1,a.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:c||h.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:e,...d})})}),ScrollAreaThumbImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,style:d,...h}=a,g=useScrollAreaContext(THUMB_NAME$1,c),b=useScrollbarContext(THUMB_NAME$1,c),{onThumbPositionChange:_e}=b,et=useComposedRefs(e,$=>b.onThumbChange($)),rt=reactExports.useRef(void 0),st=useDebounceCallback(()=>{rt.current&&(rt.current(),rt.current=void 0)},100);return reactExports.useEffect(()=>{const $=g.viewport;if($){const _=()=>{if(st(),!rt.current){const nt=addUnlinkedScrollListener($,_e);rt.current=nt,_e()}};return _e(),$.addEventListener("scroll",_),()=>$.removeEventListener("scroll",_)}},[g.viewport,st,_e]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":b.hasThumb?"visible":"hidden",...h,ref:et,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...d},onPointerDownCapture:composeEventHandlers(a.onPointerDownCapture,$=>{const nt=$.target.getBoundingClientRect(),it=$.clientX-nt.left,ot=$.clientY-nt.top;b.onThumbPointerDown({x:it,y:ot})}),onPointerUp:composeEventHandlers(a.onPointerUp,b.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME$1;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((a,e)=>{const c=useScrollAreaContext(CORNER_NAME,a.__scopeScrollArea),d=!!(c.scrollbarX&&c.scrollbarY);return c.type!=="scroll"&&d?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...a,ref:e}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((a,e)=>{const{__scopeScrollArea:c,...d}=a,h=useScrollAreaContext(CORNER_NAME,c),[g,b]=reactExports.useState(0),[_e,et]=reactExports.useState(0),rt=!!(g&&_e);return useResizeObserver(h.scrollbarX,()=>{var $;const st=(($=h.scrollbarX)==null?void 0:$.offsetHeight)||0;h.onCornerHeightChange(st),et(st)}),useResizeObserver(h.scrollbarY,()=>{var $;const st=(($=h.scrollbarY)==null?void 0:$.offsetWidth)||0;h.onCornerWidthChange(st),b(st)}),rt?jsxRuntimeExports.jsx(Primitive.div,{...d,ref:e,style:{width:g,height:_e,position:"absolute",right:h.dir==="ltr"?0:void 0,left:h.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function toInt(a){return a?parseInt(a,10):0}function getThumbRatio(a,e){const c=a/e;return isNaN(c)?0:c}function getThumbSize(a){const e=getThumbRatio(a.viewport,a.content),c=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,d=(a.scrollbar.size-c)*e;return Math.max(d,18)}function getScrollPositionFromPointer(a,e,c,d="ltr"){const h=getThumbSize(c),g=h/2,b=e||g,_e=h-b,et=c.scrollbar.paddingStart+b,rt=c.scrollbar.size-c.scrollbar.paddingEnd-_e,st=c.content-c.viewport,$=d==="ltr"?[0,st]:[st*-1,0];return linearScale([et,rt],$)(a)}function getThumbOffsetFromScroll(a,e,c="ltr"){const d=getThumbSize(e),h=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,g=e.scrollbar.size-h,b=e.content-e.viewport,_e=g-d,et=c==="ltr"?[0,b]:[b*-1,0],rt=clamp(a,et);return linearScale([0,b],[0,_e])(rt)}function linearScale(a,e){return c=>{if(a[0]===a[1]||e[0]===e[1])return e[0];const d=(e[1]-e[0])/(a[1]-a[0]);return e[0]+d*(c-a[0])}}function isScrollingWithinScrollbarBounds(a,e){return a>0&&a<e}var addUnlinkedScrollListener=(a,e=()=>{})=>{let c={left:a.scrollLeft,top:a.scrollTop},d=0;return function h(){const g={left:a.scrollLeft,top:a.scrollTop},b=c.left!==g.left,_e=c.top!==g.top;(b||_e)&&e(),c=g,d=window.requestAnimationFrame(h)}(),()=>window.cancelAnimationFrame(d)};function useDebounceCallback(a,e){const c=useCallbackRef$1(a),d=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(d.current),[]),reactExports.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(c,e)},[c,e])}function useResizeObserver(a,e){const c=useCallbackRef$1(e);useLayoutEffect2(()=>{let d=0;if(a){const h=new ResizeObserver(()=>{cancelAnimationFrame(d),d=window.requestAnimationFrame(c)});return h.observe(a),()=>{window.cancelAnimationFrame(d),h.unobserve(a)}}},[a,c])}var Root$1=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:a,children:e,...c},d)=>jsxRuntimeExports.jsxs(Root$1,{ref:d,className:cn("relative overflow-hidden",a),...c,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:e}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$1.displayName;const ScrollBar=reactExports.forwardRef(({className:a,orientation:e="vertical",...c},d)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:d,orientation:e,className:cn("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;function ModelSelector({selectedModel:a,onModelChange:e,className:c=""}){const[d,h]=reactExports.useState({}),[g,b]=reactExports.useState(!0),[_e,et]=reactExports.useState("gpt-4o-mini");reactExports.useEffect(()=>{rt()},[]);const rt=async()=>{try{const _=localStorage.getItem("authToken"),nt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MODELS),{headers:{Authorization:`Bearer ${_}`}});if(nt.ok){const it=await nt.json();h(it.models),et(it.defaultModel)}}catch(_){console.error("Error fetching models:",_)}finally{b(!1)}},st=_=>{switch(_){case"openai":return jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4"});case"gemini":return jsxRuntimeExports.jsx(Brain,{className:"w-4 h-4"});default:return jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"})}},$=_=>{const nt=d[_];return nt?jsxRuntimeExports.jsxs(Badge,{variant:"secondary",className:"text-xs font-medium",children:[st(nt.provider),jsxRuntimeExports.jsx("span",{className:"ml-1",children:_})]}):null};return g?jsxRuntimeExports.jsx("div",{className:`flex items-center space-x-2 ${c}`,children:jsxRuntimeExports.jsx(Badge,{variant:"secondary",className:"animate-pulse",children:"Loading models..."})}):jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:`flex items-center space-x-2 ${c}`,children:[$(a),jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})]})}),jsxRuntimeExports.jsx(DropdownMenuContent,{align:"end",className:"w-64 max-h-60 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Select AI Model"}),Object.entries(d).map(([_,nt])=>jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>e(_),className:`flex items-start space-x-3 p-3 cursor-pointer ${a===_?"bg-accent":""}`,children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 mt-0.5",children:st(nt.provider)}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:_}),_===_e&&jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"text-xs",children:"Default"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:nt.description})]})]},_))]})})]})}const modeOptions=[{id:"focused",label:"Focused",icon:GraduationCap,description:"Quick, concise answers",color:"text-blue-600"},{id:"regular",label:"Regular",icon:Sparkles,description:"Natural conversation style",color:"text-red-500"},{id:"socratic",label:"Socratic",icon:Brain,description:"Guides you with questions",color:"text-purple-600"},{id:"deeper",label:"Deeper Dive",icon:Search,description:"Detailed explanations",color:"text-green-600"}];function ChatModeSelector({selectedMode:a,onModeChange:e}){var st;const[c,d]=reactExports.useState(null),[h,g]=reactExports.useState({left:0,width:0}),b=reactExports.useRef({}),_e=reactExports.useRef(null),et=($,_)=>{var ot;d($);const nt=_.getBoundingClientRect(),it=(ot=_e.current)==null?void 0:ot.getBoundingClientRect();if(it){const lt=nt.left-it.left+nt.width/2,at=Math.max(nt.width,200);let ct=lt;lt+at/2>it.width&&(ct=it.width-at/2-10),ct-at/2<0&&(ct=at/2+10),g({left:ct,width:at})}},rt=()=>{d(null)};return jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsxs("div",{ref:_e,className:"bg-gray-100 rounded-lg p-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto scrollbar-hide gap-1 min-w-0",children:modeOptions.map($=>{const _=$.icon,nt=a===$.id;return jsxRuntimeExports.jsxs("button",{ref:it=>b.current[$.id]=it,onClick:()=>e($.id),onMouseEnter:it=>et($.id,it.currentTarget),onMouseLeave:rt,className:cn("flex items-center gap-1.5 px-2.5 py-1.5 rounded-md text-xs font-medium transition-all duration-200 relative flex-shrink-0 whitespace-nowrap",nt?"bg-white shadow-sm text-gray-900 ring-2 ring-blue-500/20":"text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:[jsxRuntimeExports.jsx(_,{className:cn("w-3.5 h-3.5",$.color)}),$.label]},$.id)})}),c&&jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full mb-2 px-3 py-2 bg-white text-gray-600 text-xs rounded-md whitespace-nowrap z-50 pointer-events-none transform -translate-x-1/2 border border-gray-200 shadow-md",style:{left:`${h.left}px`},children:[(st=modeOptions.find($=>$.id===c))==null?void 0:st.description,jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-white"})]})]})})}function MessageWithSources$3({message:a,onSourceClick:e,showFileNames:c=!1}){const d=[/\[SOURCE (\d+)(?:, (\d+))*\]/g,/\[Source (\d+)(?:, (\d+))*\]/g,/\[source (\d+)(?:, (\d+))*\]/g,/SOURCE (\d+)(?:, (\d+))*\b/g,/Source (\d+)(?:, (\d+))*\b/g,/\(SOURCE (\d+)(?:, (\d+))*\)/g,/\(Source (\d+)(?:, (\d+))*\)/g,/"SOURCE (\d+)(?:, (\d+))*"/g,/"Source (\d+)(?:, (\d+))*"/g],h=[];let g=0,b=!1;console.log("Parsing message for sources:",a.content),console.log("Available source citations:",a.sourceCitations),console.log("Message content length:",a.content.length),console.log("First 200 characters:",a.content.substring(0,200));const _e="This is a test with [SOURCE 1] and [SOURCE 2, 3] citations";console.log("Testing regex patterns with:",_e),d.forEach((et,rt)=>{const st=[..._e.matchAll(et)];console.log(`Pattern ${rt+1} test matches:`,st)});for(const et of d){const rt=[...a.content.matchAll(et)];if(rt.length>0){console.log("✅ Found matches with pattern:",et,rt),b=!0;for(const st of rt){st.index>g&&h.push({type:"text",content:a.content.slice(g,st.index)});const $=[parseInt(st[1])];st[2]&&$.push(parseInt(st[2])),console.log("📄 Found source citation:",st[0],"with numbers:",$),h.push({type:"citation",sourceNumbers:$,fullMatch:st[0]}),g=st.index+st[0].length}break}else console.log("❌ No matches found with pattern:",et)}if(g<a.content.length&&h.push({type:"text",content:a.content.slice(g)}),!b){console.log("No source citations found in message");const et=/\[([^\]]+)\]/g,rt=[...a.content.matchAll(et)];if(rt.length>0){console.log("🔍 Found potential citations with fallback pattern:",rt);const st=[];let $=0;return rt.forEach((_,nt)=>{_.index>$&&st.push({type:"text",content:a.content.slice($,_.index)}),st.push({type:"fallback_citation",content:_[0],citationText:_[1]}),$=_.index+_[0].length}),$<a.content.length&&st.push({type:"text",content:a.content.slice($)}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:st.map((_,nt)=>_.type==="text"?jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:_.content},nt):jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{var ot;console.log("Fallback citation clicked:",_.citationText);const it=(ot=a.sourceCitations)==null?void 0:ot[0];it&&e(it)},children:_.content})},nt))})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4 break-words whitespace-normal",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:a.content})})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4 break-words whitespace-normal",children:jsxRuntimeExports.jsx("div",{className:"inline",children:h.map((et,rt)=>{var st;if(et.type==="text")return jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:et.content})},rt);{const $=et.sourceNumbers.map(_=>{var it,ot,lt,at;let nt=(it=a.sourceCitations)==null?void 0:it.find(ct=>ct.chunkIndex===_-1);return!nt&&a.sourceCitations&&a.sourceCitations.length>=_&&(nt=a.sourceCitations[_-1]),!nt&&a.sourceCitations&&a.sourceCitations.length>0&&(nt=a.sourceCitations[0]),console.log(`🔍 Looking for citation ${_}:`),console.log(`   - By chunkIndex ${_-1}:`,(ot=a.sourceCitations)==null?void 0:ot.find(ct=>ct.chunkIndex===_-1)),console.log(`   - By array index ${_-1}:`,(lt=a.sourceCitations)==null?void 0:lt[_-1]),console.log("   - Final result:",nt),console.log("📋 Available citations:",(at=a.sourceCitations)==null?void 0:at.map(ct=>({chunkIndex:ct.chunkIndex,fileName:ct.fileName}))),nt}).filter(Boolean);return console.log(`✅ Citations found for part ${rt}:`,$),jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsxs("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{console.log("🎯 Citation clicked:",et.fullMatch),console.log("📄 Citation data:",$[0]),$[0]&&e($[0])},children:[et.fullMatch,c&&((st=$[0])==null?void 0:st.fileName)&&jsxRuntimeExports.jsxs("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",$[0].fileName,")"]})]})},rt)}})})})}function ChatPanel({isOpen:a,onClose:e,workspaceName:c,workspaceId:d,fileId:h,initialSessionId:g}){const[b,_e]=reactExports.useState([]),[et,rt]=reactExports.useState(""),[st,$]=reactExports.useState(!1),[_,nt]=reactExports.useState(null),[it,ot]=reactExports.useState([]),[lt,at]=reactExports.useState(!1),[ct,dt]=reactExports.useState(!1),[ht,pt]=reactExports.useState(!1),[ft,mt]=reactExports.useState("gpt-4o-mini"),[xt,gt]=reactExports.useState("regular"),[Et,St]=reactExports.useState(!1),Pt=reactExports.useRef(null),{toast:Mt}=useToast(),Rt=useNavigate(),Dt=Ut=>{var Jt,tn;console.log("🚀 [handleSourceClick] Citation clicked:",Ut),console.log("📄 [handleSourceClick] Current fileId:",h),console.log("📄 [handleSourceClick] Citation fileId:",Ut.fileId);try{const Gt=((Jt=Ut.metadata)==null?void 0:Jt.type)==="youtube"&&((tn=Ut.metadata)==null?void 0:tn.timestamp);if(Ut.fileId===parseInt(h||"0")){let hn=`/file/${Ut.fileId}`,fn=`Navigated to ${Ut.fileName}`;if(Gt){const gn=Ut.metadata.timestamp,kn=Math.floor(gn/60),On=Math.floor(gn%60),un=`${kn}:${On.toString().padStart(2,"0")}`;hn+=`?timestamp=${gn}`,fn+=` at ${un}`}else Ut.pageNumber&&(hn+=`?page=${Ut.pageNumber}`,fn+=`, page ${Ut.pageNumber}`);console.log("📍 [handleSourceClick] Navigating to same file:",hn),Rt(hn),Mt({title:"Source found",description:fn})}else{let hn=`/file/${Ut.fileId}`,fn=`Navigated to ${Ut.fileName}`;if(Gt){const gn=Ut.metadata.timestamp,kn=Math.floor(gn/60),On=Math.floor(gn%60),un=`${kn}:${On.toString().padStart(2,"0")}`;hn+=`?timestamp=${gn}&citation=${encodeURIComponent(JSON.stringify(Ut))}`,fn+=` at ${un}`}else hn+=`?citation=${encodeURIComponent(JSON.stringify(Ut))}`,Ut.pageNumber&&(fn+=`, page ${Ut.pageNumber}`);console.log("📍 [handleSourceClick] Navigating to different file:",hn),Rt(hn),Mt({title:"Source found",description:fn})}}catch(Gt){console.error("❌ [handleSourceClick] Error navigating to source:",Gt),Mt({title:"Navigation failed",description:"Could not navigate to the source document",variant:"destructive"})}};reactExports.useEffect(()=>{var Ut;(Ut=Pt.current)==null||Ut.scrollIntoView({behavior:"smooth"})},[b]),reactExports.useEffect(()=>{a&&Tt()},[a,d,h]),reactExports.useEffect(()=>{a&&!_&&b.length===0&&(g?(console.log(`💬 [CHAT-PANEL-DEBUG] Loading initial session: ${g}`),Ct(g)):It())},[a,_,g]);const Tt=async()=>{try{at(!0);const Ut=localStorage.getItem("authToken"),Jt=new URLSearchParams;d&&Jt.append("workspaceId",d),h&&Jt.append("fileId",h);const tn=await fetch(buildApiUrl(`/chat-sessions/sessions?${Jt}`),{headers:{Authorization:`Bearer ${Ut}`}}),Gt=await tn.json();if(tn.ok&&Gt.success){const hn=Gt.data.map(fn=>{var gn;return{...fn,fileName:((gn=fn.file)==null?void 0:gn.originalName)||void 0}});return ot(hn),hn}else return Mt({title:"Error loading chat history",description:Gt.message||"Failed to load chat sessions",variant:"destructive"}),[]}catch{return Mt({title:"Error loading chat history",description:"Network error occurred",variant:"destructive"}),[]}finally{at(!1)}},It=async()=>{try{const Ut=await Tt();if(Ut.length>0){const Jt=Ut[0];console.log(`💬 [ChatPanel] Loading most recent session: ${Jt.id}`),await Ct(Jt.id)}else console.log("💬 [ChatPanel] No existing sessions, creating new session"),Vt()}catch(Ut){console.error("❌ [ChatPanel] Error loading most recent session:",Ut),Vt()}},Vt=async()=>{const Ut={id:Date.now().toString(),content:h?"Hi! I'm your AI assistant for this document. I can help you understand the content, answer questions about it, and provide insights. What would you like to know about this document?":`Hi! I'm your AI assistant for the ${c} workspace. I can help you with questions about your documents, create study plans, and assist with your learning journey. I'll search through all your uploaded documents to find relevant information. What would you like to learn today?`,isUser:!1,timestamp:new Date};_e([Ut]),nt(null)},Bt=async Ut=>{try{console.log(`🆕 [ChatPanel] Creating new session with ${Ut.length} messages`);const Jt=localStorage.getItem("authToken"),tn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{method:"POST",headers:{Authorization:`Bearer ${Jt}`,"Content-Type":"application/json"},body:JSON.stringify({name:"New Chat",workspaceId:d,fileId:h})}),Gt=await tn.json();if(tn.ok&&Gt.success){const hn=Gt.data.id;console.log(`✅ [ChatPanel] Created new session: ${hn}`),nt(hn),await en(hn,Ut),Tt()}else console.error("❌ [ChatPanel] Failed to create session:",Gt.message),Mt({title:"Error creating session",description:Gt.message||"Failed to create new session",variant:"destructive"})}catch(Jt){console.error("❌ [ChatPanel] Error creating session:",Jt),Mt({title:"Error creating session",description:"Network error occurred",variant:"destructive"})}},Ct=async Ut=>{var Jt;try{console.log(`💬 [CHAT-PANEL-DEBUG] Loading session: ${Ut}`);const tn=localStorage.getItem("authToken"),Gt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(Ut)),{headers:{Authorization:`Bearer ${tn}`}}),hn=await Gt.json();if(Gt.ok&&hn.success){const fn=hn.data;console.log("💬 [CHAT-PANEL-DEBUG] Session loaded successfully:",fn),console.log(`💬 [CHAT-PANEL-DEBUG] Session has ${((Jt=fn.messages)==null?void 0:Jt.length)||0} messages`),fn.messages&&fn.messages.length>0&&fn.messages.forEach((kn,On)=>{var un;console.log(`💬 [CHAT-PANEL-DEBUG] Message ${On+1}:`,{id:kn.id,content:((un=kn.content)==null?void 0:un.substring(0,50))+"...",isUser:kn.isUser,sourceCitations:kn.sourceCitations||kn.source_citations})}),nt(fn.id);const gn=fn.messages.map(kn=>{let On=[];if(kn.sourceCitations||kn.source_citations)try{const un=kn.sourceCitations||kn.source_citations;On=typeof un=="string"?JSON.parse(un):un}catch(un){console.error("Error parsing source citations:",un),On=[]}return{id:kn.id.toString(),content:kn.content,isUser:kn.isUser,timestamp:new Date(kn.createdAt),sourceCitations:On}});_e(gn),dt(!1),Tt()}else console.error("💬 [CHAT-PANEL-DEBUG] Failed to load session:",hn.message),Mt({title:"Error loading chat session",description:hn.message||"Failed to load session",variant:"destructive"})}catch(tn){console.error("💬 [CHAT-PANEL-DEBUG] Error loading session:",tn),Mt({title:"Error loading chat session",description:"Network error occurred",variant:"destructive"})}},en=async(Ut,Jt)=>{try{console.log(`💾 [ChatPanel] Updating session ${Ut} with ${Jt.length} messages`);const tn=localStorage.getItem("authToken"),Gt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MESSAGES(Ut)),{method:"PUT",headers:{Authorization:`Bearer ${tn}`,"Content-Type":"application/json"},body:JSON.stringify({messages:Jt.map(fn=>({content:fn.content,isUser:fn.isUser,timestamp:fn.timestamp.toISOString(),sourceCitations:fn.sourceCitations||null}))})}),hn=await Gt.json();Gt.ok&&hn.success?console.log(`✅ [ChatPanel] Session ${Ut} updated successfully`):console.error(`❌ [ChatPanel] Failed to update session ${Ut}:`,hn.message)}catch(tn){console.error(`❌ [ChatPanel] Error updating session ${Ut}:`,tn)}},sn=async Ut=>{try{const Jt=localStorage.getItem("authToken"),tn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(Ut)),{method:"DELETE",headers:{Authorization:`Bearer ${Jt}`}}),Gt=await tn.json();tn.ok&&Gt.success?(ot(hn=>hn.filter(fn=>fn.id!==Ut)),_===Ut&&(nt(null),_e([]),Vt()),Mt({title:"Session deleted",description:"Chat session deleted successfully"})):Mt({title:"Error deleting session",description:Gt.message||"Failed to delete session",variant:"destructive"})}catch{Mt({title:"Error deleting session",description:"Network error occurred",variant:"destructive"})}},kt=async()=>{var Jt,tn;if(!et.trim()||st)return;console.log(`💬 [ChatPanel] Sending message. Current session ID: ${_}`),console.log(`💬 [ChatPanel] Current messages count: ${b.length}`);const Ut={id:Date.now().toString(),content:et,isUser:!0,timestamp:new Date};_e(Gt=>[...Gt,Ut]),rt(""),$(!0);try{const Gt=localStorage.getItem("authToken"),hn=buildApiUrl(API_ENDPOINTS.RAG.MESSAGE),fn={messages:[...b,Ut],workspaceId:d,fileId:h||null,modelName:ft,chatMode:xt,contextOnly:Et};console.log("🎯 [ChatPanel] Sending request with chat mode:",xt),console.log("🎯 [ChatPanel] Request body:",fn);const gn=await fetch(hn,{method:"POST",headers:{Authorization:`Bearer ${Gt}`,"Content-Type":"application/json"},body:JSON.stringify(fn)}),kn=await gn.json();if(gn.ok&&kn.success){console.log("✅ [ChatPanel] RAG response received:",kn),console.log("📄 [ChatPanel] Source citations:",(Jt=kn.context)==null?void 0:Jt.sourceCitations),console.log("🤖 [ChatPanel] AI message content:",kn.message),console.log("🔍 [ChatPanel] Looking for citation patterns in:",kn.message),[/\[SOURCE \d+\]/g,/\[Source \d+\]/g,/SOURCE \d+/g,/Source \d+/g].forEach((Sn,Ln)=>{const $n=kn.message.match(Sn);console.log(`Pattern ${Ln+1} matches:`,$n)});const un={id:(Date.now()+1).toString(),content:kn.message,isUser:!1,timestamp:new Date,sourceCitations:((tn=kn.context)==null?void 0:tn.sourceCitations)||[]};console.log("🤖 [ChatPanel] AI message with citations:",un),_e(Sn=>{const Ln=[...Sn,un];return _?(console.log(`💾 [ChatPanel] Updating session ${_} with ${Ln.length} messages`),en(_,Ln).catch($n=>{console.error("❌ [ChatPanel] Error saving session:",$n)})):(console.log("🆕 [ChatPanel] First user message - creating new session"),Bt(Ln).catch($n=>{console.error("❌ [ChatPanel] Error creating session:",$n)})),Ln})}else console.error("❌ [ChatPanel] RAG response error:",kn),Mt({title:"Error",description:kn.message||"Failed to send message. Please try again.",variant:"destructive"})}catch(Gt){console.error("Error sending message:",Gt),Mt({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}finally{$(!1)}};return a?jsxRuntimeExports.jsxs("div",{className:"bg-background border-l border-border shadow-lg flex flex-col h-screen min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"p-3 border-b border-border flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"w-7 h-7 bg-gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:jsxRuntimeExports.jsx(MessageCircle,{className:"w-3.5 h-3.5 text-primary-foreground"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground text-sm truncate",children:h?"Document Chat":"Workspace Chat"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:h?"Ask about this document":`${c} • Search all documents`})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>{_e([]),nt(null),Vt()},className:"h-7 px-2 text-xs",title:"Start a new chat",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3.5 h-3.5 mr-1"}),"New Chat"]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs(Dialog,{open:ct,onOpenChange:dt,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",children:jsxRuntimeExports.jsx(History,{className:"w-3.5 h-3.5"})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Chat History"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[lt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):it.length===0?jsxRuntimeExports.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No saved chat sessions"}):jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:it.map(Ut=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-muted/50 ${_===Ut.id?"bg-primary/10 border-primary":"border-border"}`,onClick:()=>Ct(Ut.id),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-sm truncate",children:Ut.summary&&Ut.summary!=="null"?Ut.summary.length>30?Ut.summary.substring(0,30)+"...":Ut.summary:Ut.name||"Unnamed Session"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:new Date(Ut.updatedAt).toLocaleDateString()}),!Ut.isStarred&&jsxRuntimeExports.jsx("span",{className:"text-xs text-orange-500 truncate",children:"• Auto-delete in 24h"})]}),Ut.fileName&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 w-fit",children:Ut.fileName})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Jt=>{Jt.stopPropagation(),sn(Ut.id)},className:"h-6 w-6 p-0 text-red-500 hover:text-red-600",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})})]},Ut.id))}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{dt(!1),Vt()},className:"w-full",disabled:ht,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),ht?"Creating...":"New Chat"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:["View chat history and manage sessions",jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900"})]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e,className:"h-7 w-7 p-0",children:jsxRuntimeExports.jsx(X,{className:"w-3.5 h-3.5"})})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-3 py-2 border-b border-border flex-shrink-0",children:jsxRuntimeExports.jsx(ChatModeSelector,{selectedMode:xt,onModeChange:gt})}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full p-3",children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[b.map(Ut=>jsxRuntimeExports.jsx("div",{className:`flex ${Ut.isUser?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[85%] p-2.5 rounded-lg ${Ut.isUser?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[Ut.isUser?jsxRuntimeExports.jsx("p",{className:"text-sm text-primary-foreground break-words",children:Ut.content}):jsxRuntimeExports.jsx(MessageWithSources$3,{message:Ut,onSourceClick:Dt,showFileNames:!h}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70 mt-1",children:Ut.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},Ut.id)),st&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"max-w-[85%] p-2.5 rounded-lg bg-muted text-foreground",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:h?"Analyzing document...":"Searching documents..."})]})})}),jsxRuntimeExports.jsx("div",{ref:Pt})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-border flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-2 flex justify-end items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs(Button,{variant:Et?"default":"outline",size:"sm",onClick:()=>St(!Et),className:"flex items-center gap-1.5 h-8 px-2",children:[jsxRuntimeExports.jsx(Shield,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Context"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[Et?"Context only mode enabled - AI will only respond based on your workspace documents":"Context only mode disabled - AI can use general knowledge",jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),jsxRuntimeExports.jsx(ModelSelector,{selectedModel:ft,onModelChange:mt})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 min-w-0",children:[jsxRuntimeExports.jsx("textarea",{value:et,onChange:Ut=>rt(Ut.target.value),placeholder:"Ask about this workspace...",onKeyDown:Ut=>{Ut.key==="Enter"&&!Ut.shiftKey&&(Ut.preventDefault(),kt())},className:"flex-1 min-h-[40px] max-h-[100px] resize-none rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 min-w-0",disabled:st,rows:1,style:{height:"auto",overflow:"hidden"},onInput:Ut=>{const Jt=Ut.target;Jt.style.height="auto",Jt.style.height=Math.min(Jt.scrollHeight,100)+"px"}}),jsxRuntimeExports.jsx(Button,{onClick:kt,size:"sm",className:"px-3 h-[40px] rounded-lg transition-all duration-200 flex-shrink-0",disabled:st||!et.trim(),children:jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]})]})]}):null}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((a,e)=>{const{__scopeSwitch:c,name:d,checked:h,defaultChecked:g,required:b,disabled:_e,value:et="on",onCheckedChange:rt,form:st,...$}=a,[_,nt]=reactExports.useState(null),it=useComposedRefs(e,dt=>nt(dt)),ot=reactExports.useRef(!1),lt=_?st||!!_.closest("form"):!0,[at,ct]=useControllableState({prop:h,defaultProp:g??!1,onChange:rt,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:c,checked:at,disabled:_e,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":at,"aria-required":b,"data-state":getState$1(at),"data-disabled":_e?"":void 0,disabled:_e,value:et,...$,ref:it,onClick:composeEventHandlers(a.onClick,dt=>{ct(ht=>!ht),lt&&(ot.current=dt.isPropagationStopped(),ot.current||dt.stopPropagation())})}),lt&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:_,bubbles:!ot.current,name:d,value:et,checked:at,required:b,disabled:_e,form:st,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((a,e)=>{const{__scopeSwitch:c,...d}=a,h=useSwitchContext(THUMB_NAME,c);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$1(h.checked),"data-disabled":h.disabled?"":void 0,...d,ref:e})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME$1="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch:a,control:e,checked:c,bubbles:d=!0,...h},g)=>{const b=reactExports.useRef(null),_e=useComposedRefs(b,g),et=usePrevious(c),rt=useSize(e);return reactExports.useEffect(()=>{const st=b.current;if(!st)return;const $=window.HTMLInputElement.prototype,nt=Object.getOwnPropertyDescriptor($,"checked").set;if(et!==c&&nt){const it=new Event("click",{bubbles:d});nt.call(st,c),st.dispatchEvent(it)}},[et,c,d]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...h,tabIndex:-1,ref:_e,style:{...h.style,...rt,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function getState$1(a){return a?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;const Switch=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Root,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...e,ref:c,children:jsxRuntimeExports.jsx(Thumb,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root.displayName;var dist={},assetPath={};Object.defineProperty(assetPath,"__esModule",{value:!0});assetPath.baseAssetPath=void 0;const isWeb$1=typeof window<"u"&&typeof window.document<"u",currentScript=isWeb$1?window.document.currentScript:null;let basePath="/";currentScript&&(basePath=currentScript.src.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"));assetPath.baseAssetPath=basePath;var defaultModelFetcher$1={};Object.defineProperty(defaultModelFetcher$1,"__esModule",{value:!0});defaultModelFetcher$1.defaultModelFetcher=void 0;const defaultModelFetcher=a=>fetch(a).then(e=>e.arrayBuffer());defaultModelFetcher$1.defaultModelFetcher=defaultModelFetcher;var frameProcessor={},logging={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.log=a.LOG_PREFIX=void 0,a.LOG_PREFIX="[VAD]";const e=["error","debug","warn"];function c(h){return(...g)=>{console[h](a.LOG_PREFIX,...g)}}const d=e.reduce((h,g)=>(h[g]=c(g),h),{});a.log=d})(logging);var messages={};Object.defineProperty(messages,"__esModule",{value:!0});messages.Message=void 0;var Message$1;(function(a){a.AudioFrame="AUDIO_FRAME",a.SpeechStart="SPEECH_START",a.VADMisfire="VAD_MISFIRE",a.SpeechEnd="SPEECH_END",a.SpeechStop="SPEECH_STOP",a.SpeechRealStart="SPEECH_REAL_START",a.FrameProcessed="FRAME_PROCESSED"})(Message$1||(messages.Message=Message$1={}));Object.defineProperty(frameProcessor,"__esModule",{value:!0});frameProcessor.FrameProcessor=frameProcessor.validateOptions=frameProcessor.defaultV5FrameProcessorOptions=frameProcessor.defaultLegacyFrameProcessorOptions=void 0;const logging_1$3=logging,messages_1=messages,RECOMMENDED_FRAME_SAMPLES=[512,1024,1536];frameProcessor.defaultLegacyFrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:1,redemptionFrames:8,frameSamples:1536,minSpeechFrames:3,submitUserSpeechOnPause:!1};frameProcessor.defaultV5FrameProcessorOptions={positiveSpeechThreshold:.5,negativeSpeechThreshold:.5-.15,preSpeechPadFrames:3,redemptionFrames:24,frameSamples:512,minSpeechFrames:9,submitUserSpeechOnPause:!1};function validateOptions(a){RECOMMENDED_FRAME_SAMPLES.includes(a.frameSamples)||logging_1$3.log.warn("You are using an unusual frame size"),(a.positiveSpeechThreshold<0||a.positiveSpeechThreshold>1)&&logging_1$3.log.error("positiveSpeechThreshold should be a number between 0 and 1"),(a.negativeSpeechThreshold<0||a.negativeSpeechThreshold>a.positiveSpeechThreshold)&&logging_1$3.log.error("negativeSpeechThreshold should be between 0 and positiveSpeechThreshold"),a.preSpeechPadFrames<0&&logging_1$3.log.error("preSpeechPadFrames should be positive"),a.redemptionFrames<0&&logging_1$3.log.error("redemptionFrames should be positive")}frameProcessor.validateOptions=validateOptions;const concatArrays=a=>{const e=a.reduce((d,h)=>(d.push(d.at(-1)+h.length),d),[0]),c=new Float32Array(e.at(-1));return a.forEach((d,h)=>{const g=e[h];c.set(d,g)}),c};class FrameProcessor{constructor(e,c,d){this.modelProcessFunc=e,this.modelResetFunc=c,this.options=d,this.speaking=!1,this.redemptionCounter=0,this.speechFrameCount=0,this.active=!1,this.speechRealStartFired=!1,this.reset=()=>{this.speaking=!1,this.speechRealStartFired=!1,this.audioBuffer=[],this.modelResetFunc(),this.redemptionCounter=0,this.speechFrameCount=0},this.pause=h=>{this.active=!1,this.options.submitUserSpeechOnPause?this.endSegment(h):this.reset()},this.resume=()=>{this.active=!0},this.endSegment=h=>{const g=this.audioBuffer;this.audioBuffer=[];const b=this.speaking;if(this.reset(),b)if(g.reduce((et,rt)=>rt.isSpeech?et+1:et,0)>=this.options.minSpeechFrames){const et=concatArrays(g.map(rt=>rt.frame));h({msg:messages_1.Message.SpeechEnd,audio:et})}else h({msg:messages_1.Message.VADMisfire});return{}},this.process=async(h,g)=>{if(!this.active)return;const b=await this.modelProcessFunc(h),_e=b.isSpeech>=this.options.positiveSpeechThreshold;if(g({probs:b,msg:messages_1.Message.FrameProcessed,frame:h}),this.audioBuffer.push({frame:h,isSpeech:_e}),_e&&(this.speechFrameCount++,this.redemptionCounter=0),_e&&!this.speaking&&(this.speaking=!0,g({msg:messages_1.Message.SpeechStart})),this.speaking&&this.speechFrameCount===this.options.minSpeechFrames&&!this.speechRealStartFired&&(this.speechRealStartFired=!0,g({msg:messages_1.Message.SpeechRealStart})),b.isSpeech<this.options.negativeSpeechThreshold&&this.speaking&&++this.redemptionCounter>=this.options.redemptionFrames){this.redemptionCounter=0,this.speechFrameCount=0,this.speaking=!1,this.speechRealStartFired=!1;const et=this.audioBuffer;if(this.audioBuffer=[],et.reduce((st,$)=>$.isSpeech?st+1:st,0)>=this.options.minSpeechFrames){const st=concatArrays(et.map($=>$.frame));g({msg:messages_1.Message.SpeechEnd,audio:st})}else g({msg:messages_1.Message.VADMisfire})}if(!this.speaking){for(;this.audioBuffer.length>this.options.preSpeechPadFrames;)this.audioBuffer.shift();this.speechFrameCount=0}},this.audioBuffer=[],this.reset()}}frameProcessor.FrameProcessor=FrameProcessor;var nonRealTimeVad={},ortWeb_min={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(a,e,c)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const d=backends[a];if(d===void 0)backends[a]={backend:e,priority:c};else{if(d.priority>c)return;if(d.priority===c&&d.backend!==e)throw new Error(`cannot register backend "${a}" using priority ${c}`)}if(c>=0){const h=backendsSortedByPriority.indexOf(a);h!==-1&&backendsSortedByPriority.splice(h,1);for(let g=0;g<backendsSortedByPriority.length;g++)if(backends[backendsSortedByPriority[g]].priority<=c){backendsSortedByPriority.splice(g,0,a);return}backendsSortedByPriority.push(a)}return}throw new TypeError("not a valid backend")},resolveBackend=async a=>{const e=a.length===0?backendsSortedByPriority:a,c=[];for(const d of e){const h=backends[d];if(h){if(h.initialized)return h.backend;if(h.aborted)continue;const g=!!h.initPromise;try{return g||(h.initPromise=h.backend.init()),await h.initPromise,h.initialized=!0,h.backend}catch(b){g||c.push({name:d,err:b}),h.aborted=!0}finally{delete h.initPromise}}}throw new Error(`no available backend found. ERR: ${c.map(d=>`[${d.name}] ${d.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=a=>{let e=1;for(let c=0;c<a.length;c++){const d=a[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);e*=d}return e};let Tensor$1=class xp{constructor(e,c,d){let h,g,b;if(typeof e=="string")if(h=e,b=d,e==="string"){if(!Array.isArray(c))throw new TypeError("A string tensor's data must be a string array.");g=c}else{const et=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(et===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(c))g=et.from(c);else if(c instanceof et)g=c;else throw new TypeError(`A ${h} tensor's data must be type of ${et}`)}else if(b=c,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const et=typeof e[0];if(et==="string")h="string",g=e;else if(et==="boolean")h="bool",g=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${et}.`)}else{const et=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(et===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);h=et,g=e}if(b===void 0)b=[g.length];else if(!Array.isArray(b))throw new TypeError("A tensor's dims must be a number array");const _e=calculateSize(b);if(_e!==g.length)throw new Error(`Tensor's size(${_e}) does not match data length(${g.length}).`);this.dims=b,this.type=h,this.data=g,this.size=_e}static bufferToTensor(e,c){if(e===void 0)throw new Error("Image buffer must be defined");if(c.height===void 0||c.width===void 0)throw new Error("Image height and width must be defined");const{height:d,width:h}=c,g=c.norm;let b,_e;g===void 0||g.mean===void 0?b=255:b=g.mean,g===void 0||g.bias===void 0?_e=0:_e=g.bias;const et=c.bitmapFormat!==void 0?c.bitmapFormat:"RGBA",rt=c.tensorFormat!==void 0&&c.tensorFormat!==void 0?c.tensorFormat:"RGB",st=d*h,$=rt==="RGBA"?new Float32Array(st*4):new Float32Array(st*3);let _=4,nt=0,it=1,ot=2,lt=3,at=0,ct=st,dt=st*2,ht=-1;et==="RGB"&&(_=3,nt=0,it=1,ot=2,lt=-1),rt==="RGBA"?ht=st*3:rt==="RBG"?(at=0,dt=st,ct=st*2):rt==="BGR"&&(dt=0,ct=st,at=st*2);for(let ft=0;ft<st;ft++,nt+=_,ot+=_,it+=_,lt+=_)$[at++]=(e[nt]+_e)/b,$[ct++]=(e[it]+_e)/b,$[dt++]=(e[ot]+_e)/b,ht!==-1&&lt!==-1&&($[ht++]=(e[lt]+_e)/b);return rt==="RGBA"?new xp("float32",$,[1,4,d,h]):new xp("float32",$,[1,3,d,h])}static async fromImage(e,c){const d=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,h=typeof ImageData<"u"&&e instanceof ImageData,g=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,b=typeof String<"u"&&(e instanceof String||typeof e=="string");let _e,et={};if(d){const rt=document.createElement("canvas"),st=rt.getContext("2d");if(st!=null){let $=e.naturalHeight,_=e.naturalWidth;if(c!==void 0&&c.resizedHeight!==void 0&&c.resizedWidth!==void 0&&($=c.resizedHeight,_=c.resizedWidth),c!==void 0){if(et=c,c.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(et.tensorFormat="RGBA",c.height!==void 0&&c.height!==$)throw new Error("Image input config height doesn't match HTMLImageElement height");if(et.height=$,c.width!==void 0&&c.width!==_)throw new Error("Image input config width doesn't match HTMLImageElement width");et.width=_}else et.tensorFormat="RGBA",et.height=$,et.width=_;rt.width=_,rt.height=$,st.drawImage(e,0,0,_,$),_e=st.getImageData(0,0,_,$).data}else throw new Error("Can not access image data")}else if(h){const rt="RGBA";let st,$;if(c!==void 0&&c.resizedWidth!==void 0&&c.resizedHeight!==void 0?(st=c.resizedHeight,$=c.resizedWidth):(st=e.height,$=e.width),c!==void 0){if(et=c,c.bitmapFormat!==void 0&&c.bitmapFormat!==rt)throw new Error("Image input config format must be RGBA for ImageData");et.bitmapFormat="RGBA"}else et.bitmapFormat="RGBA";if(et.height=st,et.width=$,c!==void 0){const _=document.createElement("canvas");_.width=$,_.height=st;const nt=_.getContext("2d");if(nt!=null)nt.putImageData(e,0,0),_e=nt.getImageData(0,0,$,st).data;else throw new Error("Can not access image data")}else _e=e.data}else if(g){if(c===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(c.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const rt=document.createElement("canvas").getContext("2d");if(rt!=null){const st=e.height,$=e.width;if(rt.drawImage(e,0,0,$,st),_e=rt.getImageData(0,0,$,st).data,c!==void 0){if(c.height!==void 0&&c.height!==st)throw new Error("Image input config height doesn't match ImageBitmap height");if(et.height=st,c.width!==void 0&&c.width!==$)throw new Error("Image input config width doesn't match ImageBitmap width");et.width=$}else et.height=st,et.width=$;return xp.bufferToTensor(_e,et)}else throw new Error("Can not access image data")}else{if(b)return new Promise((rt,st)=>{const $=document.createElement("canvas"),_=$.getContext("2d");if(!e||!_)return st();const nt=new Image;nt.crossOrigin="Anonymous",nt.src=e,nt.onload=()=>{$.width=nt.width,$.height=nt.height,_.drawImage(nt,0,0,$.width,$.height);const it=_.getImageData(0,0,$.width,$.height);if(c!==void 0){if(c.height!==void 0&&c.height!==$.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(et.height=$.height,c.width!==void 0&&c.width!==$.width)throw new Error("Image input config width doesn't match ImageBitmap width");et.width=$.width}else et.height=$.height,et.width=$.width;rt(xp.bufferToTensor(it.data,et))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(_e!==void 0)return xp.bufferToTensor(_e,et);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var c,d;const h=document.createElement("canvas").getContext("2d");let g;if(h!=null){const b=this.dims[3],_e=this.dims[2],et=this.dims[1],rt=e!==void 0&&e.format!==void 0?e.format:"RGB",st=e!==void 0&&((c=e.norm)===null||c===void 0?void 0:c.mean)!==void 0?e.norm.mean:255,$=e!==void 0&&((d=e.norm)===null||d===void 0?void 0:d.bias)!==void 0?e.norm.bias:0,_=_e*b;if(e!==void 0){if(e.height!==void 0&&e.height!==_e)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==b)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&et===4&&e.format!=="RGBA"||et===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const nt=4;let it=0,ot=1,lt=2,at=3,ct=0,dt=_,ht=_*2,pt=-1;rt==="RGBA"?(ct=0,dt=_,ht=_*2,pt=_*3):rt==="RGB"?(ct=0,dt=_,ht=_*2):rt==="RBG"&&(ct=0,ht=_,dt=_*2),g=h.createImageData(b,_e);for(let ft=0;ft<_e*b;it+=nt,ot+=nt,lt+=nt,at+=nt,ft++)g.data[it]=(this.data[ct++]-$)*st,g.data[ot]=(this.data[dt++]-$)*st,g.data[lt]=(this.data[ht++]-$)*st,g.data[at]=pt===-1?255:(this.data[pt++]-$)*st}else throw new Error("Can not access image data");return g}reshape(e){return new xp(this.type,this.data,e)}};const Tensor=Tensor$1;let InferenceSession$1=class pw{constructor(e){this.handler=e}async run(e,c,d){const h={};let g={};if(typeof e!="object"||e===null||e instanceof Tensor||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let b=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");b=!1;for(const rt of c){if(typeof rt!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(rt)===-1)throw new RangeError(`'fetches' contains invalid output name: ${rt}.`);h[rt]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let rt=!1;const st=Object.getOwnPropertyNames(c);for(const $ of this.outputNames)if(st.indexOf($)!==-1){const _=c[$];(_===null||_ instanceof Tensor)&&(rt=!0,b=!1,h[$]=_)}if(rt){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const rt of this.inputNames)if(typeof e[rt]>"u")throw new Error(`input '${rt}' is missing in 'feeds'.`);if(b)for(const rt of this.outputNames)h[rt]=null;const _e=await this.handler.run(e,h,g),et={};for(const rt in _e)Object.hasOwnProperty.call(_e,rt)&&(et[rt]=new Tensor(_e[rt].type,_e[rt].data,_e[rt].dims));return et}static async create(e,c,d,h){let g,b={};if(typeof e=="string"){if(g=e,typeof c=="object"&&c!==null)b=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(g=e,typeof c=="object"&&c!==null)b=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const $=e;let _=0,nt=e.byteLength;if(typeof c=="object"&&c!==null)b=c;else if(typeof c=="number"){if(_=c,!Number.isSafeInteger(_))throw new RangeError("'byteOffset' must be an integer.");if(_<0||_>=$.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${$.byteLength}).`);if(nt=e.byteLength-_,typeof d=="number"){if(nt=d,!Number.isSafeInteger(nt))throw new RangeError("'byteLength' must be an integer.");if(nt<=0||_+nt>$.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${$.byteLength-_}].`);if(typeof h=="object"&&h!==null)b=h;else if(typeof h<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array($,_,nt)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const et=(b.executionProviders||[]).map($=>typeof $=="string"?$:$.name),st=await(await resolveBackend(et)).createSessionHandler(g,b);return new pw(st)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession=InferenceSession$1,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession,Tensor,env,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/(function(module,exports){(function(a,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(a,e,c)=>{var d,h=(d=(d=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(g){function b(){return Bt.buffer!=en&&un(Bt.buffer),sn}function _e(){return Bt.buffer!=en&&un(Bt.buffer),kt}function et(){return Bt.buffer!=en&&un(Bt.buffer),Ut}function rt(){return Bt.buffer!=en&&un(Bt.buffer),Jt}function st(){return Bt.buffer!=en&&un(Bt.buffer),tn}var $,_,nt;g=g||{},$||($=g!==void 0?g:{}),$.ready=new Promise(function(Nt,zt){_=Nt,nt=zt});var it,ot,lt,at,ct,dt,ht=Object.assign({},$),pt="./this.program",ft=(Nt,zt)=>{throw zt},mt=typeof window=="object",xt=typeof importScripts=="function",gt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Et=$.ENVIRONMENT_IS_PTHREAD||!1,St="";function Pt(Nt){return $.locateFile?$.locateFile(Nt,St):St+Nt}if(gt){let Nt;St=xt?c(908).dirname(St)+"/":"//",dt=()=>{ct||(at=c(1384),ct=c(908))},it=function(zt,qt){return dt(),zt=ct.normalize(zt),at.readFileSync(zt,qt?void 0:"utf8")},lt=zt=>((zt=it(zt,!0)).buffer||(zt=new Uint8Array(zt)),zt),ot=(zt,qt,rn)=>{dt(),zt=ct.normalize(zt),at.readFile(zt,function(pn,Tn){pn?rn(pn):qt(Tn.buffer)})},1<process.argv.length&&(pt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(zt){if(!(zt instanceof An))throw zt}),process.on("unhandledRejection",function(zt){throw zt}),ft=(zt,qt)=>{if(Kt())throw process.exitCode=zt,qt;qt instanceof An||It("exiting due to exception: "+qt),process.exit(zt)},$.inspect=function(){return"[Emscripten Module object]"};try{Nt=c(9925)}catch(zt){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),zt}c.g.Worker=Nt.Worker}else(mt||xt)&&(xt?St=self.location.href:typeof document<"u"&&document.currentScript&&(St=document.currentScript.src),d&&(St=d),St=St.indexOf("blob:")!==0?St.substr(0,St.replace(/[?#].*/,"").lastIndexOf("/")+1):"",gt||(it=Nt=>{var zt=new XMLHttpRequest;return zt.open("GET",Nt,!1),zt.send(null),zt.responseText},xt&&(lt=Nt=>{var zt=new XMLHttpRequest;return zt.open("GET",Nt,!1),zt.responseType="arraybuffer",zt.send(null),new Uint8Array(zt.response)}),ot=(Nt,zt,qt)=>{var rn=new XMLHttpRequest;rn.open("GET",Nt,!0),rn.responseType="arraybuffer",rn.onload=()=>{rn.status==200||rn.status==0&&rn.response?zt(rn.response):qt()},rn.onerror=qt,rn.send(null)}));gt&&typeof performance>"u"&&(c.g.performance=c(6953).performance);var Mt=console.log.bind(console),Rt=console.warn.bind(console);gt&&(dt(),Mt=Nt=>at.writeSync(1,Nt+`
`),Rt=Nt=>at.writeSync(2,Nt+`
`));var Dt,Tt=$.print||Mt,It=$.printErr||Rt;Object.assign($,ht),ht=null,$.thisProgram&&(pt=$.thisProgram),$.quit&&(ft=$.quit),$.wasmBinary&&(Dt=$.wasmBinary);var Vt=$.noExitRuntime||!1;typeof WebAssembly!="object"&&yn("no native wasm support detected");var Bt,Ct,en,sn,kt,Ut,Jt,tn,Gt=!1,hn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function fn(Nt,zt,qt){var rn=(zt>>>=0)+qt;for(qt=zt;Nt[qt]&&!(qt>=rn);)++qt;if(16<qt-zt&&Nt.buffer&&hn)return hn.decode(Nt.buffer instanceof SharedArrayBuffer?Nt.slice(zt,qt):Nt.subarray(zt,qt));for(rn="";zt<qt;){var pn=Nt[zt++];if(128&pn){var Tn=63&Nt[zt++];if((224&pn)==192)rn+=String.fromCharCode((31&pn)<<6|Tn);else{var Bn=63&Nt[zt++];65536>(pn=(240&pn)==224?(15&pn)<<12|Tn<<6|Bn:(7&pn)<<18|Tn<<12|Bn<<6|63&Nt[zt++])?rn+=String.fromCharCode(pn):(pn-=65536,rn+=String.fromCharCode(55296|pn>>10,56320|1023&pn))}}else rn+=String.fromCharCode(pn)}return rn}function gn(Nt,zt){return(Nt>>>=0)?fn(_e(),Nt,zt):""}function kn(Nt,zt,qt,rn){if(!(0<rn))return 0;var pn=qt>>>=0;rn=qt+rn-1;for(var Tn=0;Tn<Nt.length;++Tn){var Bn=Nt.charCodeAt(Tn);if(55296<=Bn&&57343>=Bn&&(Bn=65536+((1023&Bn)<<10)|1023&Nt.charCodeAt(++Tn)),127>=Bn){if(qt>=rn)break;zt[qt++>>>0]=Bn}else{if(2047>=Bn){if(qt+1>=rn)break;zt[qt++>>>0]=192|Bn>>6}else{if(65535>=Bn){if(qt+2>=rn)break;zt[qt++>>>0]=224|Bn>>12}else{if(qt+3>=rn)break;zt[qt++>>>0]=240|Bn>>18,zt[qt++>>>0]=128|Bn>>12&63}zt[qt++>>>0]=128|Bn>>6&63}zt[qt++>>>0]=128|63&Bn}}return zt[qt>>>0]=0,qt-pn}function On(Nt){for(var zt=0,qt=0;qt<Nt.length;++qt){var rn=Nt.charCodeAt(qt);127>=rn?zt++:2047>=rn?zt+=2:55296<=rn&&57343>=rn?(zt+=4,++qt):zt+=3}return zt}function un(Nt){en=Nt,$.HEAP8=sn=new Int8Array(Nt),$.HEAP16=new Int16Array(Nt),$.HEAP32=Ut=new Int32Array(Nt),$.HEAPU8=kt=new Uint8Array(Nt),$.HEAPU16=new Uint16Array(Nt),$.HEAPU32=Jt=new Uint32Array(Nt),$.HEAPF32=new Float32Array(Nt),$.HEAPF64=tn=new Float64Array(Nt)}Et&&(en=$.buffer);var Sn=$.INITIAL_MEMORY||16777216;if(Et)Bt=$.wasmMemory,en=$.buffer;else if($.wasmMemory)Bt=$.wasmMemory;else if(!((Bt=new WebAssembly.Memory({initial:Sn/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw It("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),gt&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Bt&&(en=Bt.buffer),Sn=en.byteLength,un(en);var Ln,$n=[],Wn=[],Pn=[],or=[];function Kt(){return Vt||!1}function Xt(){var Nt=$.preRun.shift();$n.unshift(Nt)}var on,vn=0,Cn=null;function yn(Nt){throw Et?postMessage({cmd:"onAbort",arg:Nt}):$.onAbort&&$.onAbort(Nt),It(Nt="Aborted("+Nt+")"),Gt=!0,Nt=new WebAssembly.RuntimeError(Nt+". Build with -sASSERTIONS for more info."),nt(Nt),Nt}function nn(){return on.startsWith("data:application/octet-stream;base64,")}function Qt(){var Nt=on;try{if(Nt==on&&Dt)return new Uint8Array(Dt);if(lt)return lt(Nt);throw"both async and sync fetching of the wasm failed"}catch(zt){yn(zt)}}on="ort-wasm-threaded.wasm",nn()||(on=Pt(on));var bn={};function An(Nt){this.name="ExitStatus",this.message="Program terminated with exit("+Nt+")",this.status=Nt}function In(Nt){(Nt=Fn.Vb[Nt])||yn(),Fn.mc(Nt)}function Un(Nt){var zt=Fn.Cc();if(!zt)return 6;Fn.ac.push(zt),Fn.Vb[Nt.Ub]=zt,zt.Ub=Nt.Ub;var qt={cmd:"run",start_routine:Nt.Ic,arg:Nt.zc,pthread_ptr:Nt.Ub};return zt.$b=()=>{qt.time=performance.now(),zt.postMessage(qt,Nt.Nc)},zt.loaded&&(zt.$b(),delete zt.$b),0}function Vn(Nt){if(Et)return Rn(1,1,Nt);Kt()||(Fn.oc(),$.onExit&&$.onExit(Nt),Gt=!0),ft(Nt,new An(Nt))}function ir(Nt,zt){if(!zt&&Et)throw Cr(Nt),"unwind";Kt()||Et||(Co(),cr(Pn),Ws(0),Om[1].length&&Dm(1,10),Om[2].length&&Dm(2,10),Fn.oc()),Vn(Nt)}var Fn={Yb:[],ac:[],qc:[],Vb:{},fc:function(){Et&&Fn.Ec()},Pc:function(){},Ec:function(){Fn.receiveObjectTransfer=Fn.Gc,Fn.threadInitTLS=Fn.pc,Fn.setExitStatus=Fn.nc,Vt=!1},nc:function(){},oc:function(){for(var Nt of Object.values(Fn.Vb))Fn.mc(Nt);for(Nt of Fn.Yb)Nt.terminate();Fn.Yb=[]},mc:function(Nt){var zt=Nt.Ub;delete Fn.Vb[zt],Fn.Yb.push(Nt),Fn.ac.splice(Fn.ac.indexOf(Nt),1),Nt.Ub=0,Eu(zt)},Gc:function(){},pc:function(){Fn.qc.forEach(Nt=>Nt())},Fc:function(Nt,zt){Nt.onmessage=qt=>{var rn=(qt=qt.data).cmd;if(Nt.Ub&&(Fn.Bc=Nt.Ub),qt.targetThread&&qt.targetThread!=br()){var pn=Fn.Vb[qt.Qc];pn?pn.postMessage(qt,qt.transferList):It('Internal error! Worker sent a message "'+rn+'" to target pthread '+qt.targetThread+", but that thread no longer exists!")}else rn==="processProxyingQueue"?ln(qt.queue):rn==="spawnThread"?Un(qt):rn==="cleanupThread"?In(qt.thread):rn==="killThread"?(qt=qt.thread,rn=Fn.Vb[qt],delete Fn.Vb[qt],rn.terminate(),Eu(qt),Fn.ac.splice(Fn.ac.indexOf(rn),1),rn.Ub=0):rn==="cancelThread"?Fn.Vb[qt.thread].postMessage({cmd:"cancel"}):rn==="loaded"?(Nt.loaded=!0,zt&&zt(Nt),Nt.$b&&(Nt.$b(),delete Nt.$b)):rn==="print"?Tt("Thread "+qt.threadId+": "+qt.text):rn==="printErr"?It("Thread "+qt.threadId+": "+qt.text):rn==="alert"?alert("Thread "+qt.threadId+": "+qt.text):qt.target==="setimmediate"?Nt.postMessage(qt):rn==="onAbort"?$.onAbort&&$.onAbort(qt.arg):rn&&It("worker sent an unknown command "+rn);Fn.Bc=void 0},Nt.onerror=qt=>{throw It("worker sent an error! "+qt.filename+":"+qt.lineno+": "+qt.message),qt},gt&&(Nt.on("message",function(qt){Nt.onmessage({data:qt})}),Nt.on("error",function(qt){Nt.onerror(qt)}),Nt.on("detachedExit",function(){})),Nt.postMessage({cmd:"load",urlOrBlob:$.mainScriptUrlOrBlob||d,wasmMemory:Bt,wasmModule:Ct})},yc:function(){var Nt=Pt("ort-wasm-threaded.worker.js");Fn.Yb.push(new Worker(Nt))},Cc:function(){return Fn.Yb.length==0&&(Fn.yc(),Fn.Fc(Fn.Yb[0])),Fn.Yb.pop()}};function cr(Nt){for(;0<Nt.length;)Nt.shift()($)}function Gn(Nt){var zt=lr();return Nt=Nt(),tr(zt),Nt}function Cr(Nt){if(Et)return Rn(2,0,Nt);try{ir(Nt)}catch(zt){zt instanceof An||zt=="unwind"||ft(1,zt)}}$.PThread=Fn,$.establishStackSpace=function(){var Nt=br(),zt=et()[Nt+44>>2>>>0];Nt=et()[Nt+48>>2>>>0],ko(zt,zt-Nt),tr(zt)};var kr=[];function mr(Nt){var zt=kr[Nt];return zt||(Nt>=kr.length&&(kr.length=Nt+1),kr[Nt]=zt=Ln.get(Nt)),zt}$.invokeEntryPoint=function(Nt,zt){Nt=mr(Nt)(zt),Kt()?Fn.nc(Nt):uo(Nt)};var Fs,Ao,js=[],Xn=0,Zn=0;function Nn(Nt){this.Zb=Nt,this.Sb=Nt-24,this.xc=function(zt){rt()[this.Sb+4>>2>>>0]=zt},this.bc=function(){return rt()[this.Sb+4>>2>>>0]},this.wc=function(zt){rt()[this.Sb+8>>2>>>0]=zt},this.Dc=function(){return rt()[this.Sb+8>>2>>>0]},this.rc=function(){et()[this.Sb>>2>>>0]=0},this.hc=function(zt){zt=zt?1:0,b()[this.Sb+12>>0>>>0]=zt},this.uc=function(){return b()[this.Sb+12>>0>>>0]!=0},this.ic=function(zt){zt=zt?1:0,b()[this.Sb+13>>0>>>0]=zt},this.kc=function(){return b()[this.Sb+13>>0>>>0]!=0},this.fc=function(zt,qt){this.cc(0),this.xc(zt),this.wc(qt),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(et(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(et(),this.Sb>>2,1)===1},this.cc=function(zt){rt()[this.Sb+16>>2>>>0]=zt},this.tc=function(){return rt()[this.Sb+16>>2>>>0]},this.vc=function(){if(wu(this.bc()))return rt()[this.Zb>>2>>>0];var zt=this.tc();return zt!==0?zt:this.Zb}}function pr(Nt){return Us(new Nn(Nt).Sb)}function yr(Nt,zt,qt,rn){return Et?Rn(3,1,Nt,zt,qt,rn):zr(Nt,zt,qt,rn)}function zr(Nt,zt,qt,rn){if(typeof SharedArrayBuffer>"u")return It("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var pn=[];return Et&&pn.length===0?yr(Nt,zt,qt,rn):(Nt={Ic:qt,Ub:Nt,zc:rn,Nc:pn},Et?(Nt.Oc="spawnThread",postMessage(Nt,pn),0):Un(Nt))}function Lr(Nt,zt,qt){return Et?Rn(4,1,Nt,zt,qt):0}function ts(Nt,zt){if(Et)return Rn(5,1,Nt,zt)}function Vr(Nt,zt){if(Et)return Rn(6,1,Nt,zt)}function $r(Nt,zt,qt){if(Et)return Rn(7,1,Nt,zt,qt)}function Jr(Nt,zt,qt){return Et?Rn(8,1,Nt,zt,qt):0}function _o(Nt,zt){if(Et)return Rn(9,1,Nt,zt)}function Bs(Nt,zt,qt){if(Et)return Rn(10,1,Nt,zt,qt)}function Ro(Nt,zt,qt,rn){if(Et)return Rn(11,1,Nt,zt,qt,rn)}function Il(Nt,zt,qt,rn){if(Et)return Rn(12,1,Nt,zt,qt,rn)}function Ol(Nt,zt,qt,rn){if(Et)return Rn(13,1,Nt,zt,qt,rn)}function Dl(Nt){if(Et)return Rn(14,1,Nt)}function Ht(Nt,zt){if(Et)return Rn(15,1,Nt,zt)}function Zt(Nt,zt,qt){if(Et)return Rn(16,1,Nt,zt,qt)}function ln(Nt){Atomics.store(et(),Nt>>2,1),br()&&gp(Nt),Atomics.compareExchange(et(),Nt>>2,1,0)}function dn(Nt){return rt()[Nt>>>2]+4294967296*et()[Nt+4>>>2]}function xn(Nt,zt,qt,rn,pn,Tn){return Et?Rn(17,1,Nt,zt,qt,rn,pn,Tn):-52}function wn(Nt,zt,qt,rn,pn,Tn){if(Et)return Rn(18,1,Nt,zt,qt,rn,pn,Tn)}function an(Nt){var zt=On(Nt)+1,qt=Dr(zt);return qt&&kn(Nt,b(),qt,zt),qt}function jn(Nt,zt,qt){function rn(vr){return(vr=vr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?vr[1]:"GMT"}if(Et)return Rn(19,1,Nt,zt,qt);var pn=new Date().getFullYear(),Tn=new Date(pn,0,1),Bn=new Date(pn,6,1);pn=Tn.getTimezoneOffset();var er=Bn.getTimezoneOffset(),gr=Math.max(pn,er);et()[Nt>>2>>>0]=60*gr,et()[zt>>2>>>0]=+(pn!=er),Nt=rn(Tn),zt=rn(Bn),Nt=an(Nt),zt=an(zt),er<pn?(rt()[qt>>2>>>0]=Nt,rt()[qt+4>>2>>>0]=zt):(rt()[qt>>2>>>0]=zt,rt()[qt+4>>2>>>0]=Nt)}function Rn(Nt,zt){var qt=arguments.length-2,rn=arguments;return Gn(()=>{for(var pn=ho(8*qt),Tn=pn>>3,Bn=0;Bn<qt;Bn++){var er=rn[2+Bn];st()[Tn+Bn>>>0]=er}return ms(Nt,qt,pn,zt)})}$.executeNotifiedProxyingQueue=ln,Ao=gt?()=>{var Nt=process.hrtime();return 1e3*Nt[0]+Nt[1]/1e6}:Et?()=>performance.now()-$.__performance_now_clock_drift:()=>performance.now();var qn,rr=[],ar={};function wr(){if(!qn){var Nt,zt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:pt||"./this.program"};for(Nt in ar)ar[Nt]===void 0?delete zt[Nt]:zt[Nt]=ar[Nt];var qt=[];for(Nt in zt)qt.push(Nt+"="+zt[Nt]);qn=qt}return qn}function En(Nt,zt){if(Et)return Rn(20,1,Nt,zt);var qt=0;return wr().forEach(function(rn,pn){var Tn=zt+qt;for(pn=rt()[Nt+4*pn>>2>>>0]=Tn,Tn=0;Tn<rn.length;++Tn)b()[pn++>>0>>>0]=rn.charCodeAt(Tn);b()[pn>>0>>>0]=0,qt+=rn.length+1}),0}function dr(Nt,zt){if(Et)return Rn(21,1,Nt,zt);var qt=wr();rt()[Nt>>2>>>0]=qt.length;var rn=0;return qt.forEach(function(pn){rn+=pn.length+1}),rt()[zt>>2>>>0]=rn,0}function Sr(Nt){return Et?Rn(22,1,Nt):52}function Hr(Nt,zt,qt,rn){return Et?Rn(23,1,Nt,zt,qt,rn):52}function co(Nt,zt,qt,rn,pn){return Et?Rn(24,1,Nt,zt,qt,rn,pn):70}var Om=[null,[],[]];function Dm(Nt,zt){var qt=Om[Nt];zt===0||zt===10?((Nt===1?Tt:It)(fn(qt,0)),qt.length=0):qt.push(zt)}function iy(Nt,zt,qt,rn){if(Et)return Rn(25,1,Nt,zt,qt,rn);for(var pn=0,Tn=0;Tn<qt;Tn++){var Bn=rt()[zt>>2>>>0],er=rt()[zt+4>>2>>>0];zt+=8;for(var gr=0;gr<er;gr++)Dm(Nt,_e()[Bn+gr>>>0]);pn+=er}return rt()[rn>>2>>>0]=pn,0}var fs=0;function mp(Nt){return Nt%4==0&&(Nt%100!=0||Nt%400==0)}var mn=[31,29,31,30,31,30,31,31,30,31,30,31],Mn=[31,28,31,30,31,30,31,31,30,31,30,31];function Hn(Nt,zt,qt,rn){function pn(_n,Er,Gr){for(_n=typeof _n=="number"?_n.toString():_n||"";_n.length<Er;)_n=Gr[0]+_n;return _n}function Tn(_n,Er){return pn(_n,Er,"0")}function Bn(_n,Er){function Gr(Mm){return 0>Mm?-1:0<Mm?1:0}var Ml;return(Ml=Gr(_n.getFullYear()-Er.getFullYear()))===0&&(Ml=Gr(_n.getMonth()-Er.getMonth()))===0&&(Ml=Gr(_n.getDate()-Er.getDate())),Ml}function er(_n){switch(_n.getDay()){case 0:return new Date(_n.getFullYear()-1,11,29);case 1:return _n;case 2:return new Date(_n.getFullYear(),0,3);case 3:return new Date(_n.getFullYear(),0,2);case 4:return new Date(_n.getFullYear(),0,1);case 5:return new Date(_n.getFullYear()-1,11,31);case 6:return new Date(_n.getFullYear()-1,11,30)}}function gr(_n){var Er=_n.Wb;for(_n=new Date(new Date(_n.Xb+1900,0,1).getTime());0<Er;){var Gr=_n.getMonth(),Ml=(mp(_n.getFullYear())?mn:Mn)[Gr];if(!(Er>Ml-_n.getDate())){_n.setDate(_n.getDate()+Er);break}Er-=Ml-_n.getDate()+1,_n.setDate(1),11>Gr?_n.setMonth(Gr+1):(_n.setMonth(0),_n.setFullYear(_n.getFullYear()+1))}return Gr=new Date(_n.getFullYear()+1,0,4),Er=er(new Date(_n.getFullYear(),0,4)),Gr=er(Gr),0>=Bn(Er,_n)?0>=Bn(Gr,_n)?_n.getFullYear()+1:_n.getFullYear():_n.getFullYear()-1}var vr=et()[rn+40>>2>>>0];for(var qr in rn={Lc:et()[rn>>2>>>0],Kc:et()[rn+4>>2>>>0],dc:et()[rn+8>>2>>>0],jc:et()[rn+12>>2>>>0],ec:et()[rn+16>>2>>>0],Xb:et()[rn+20>>2>>>0],Tb:et()[rn+24>>2>>>0],Wb:et()[rn+28>>2>>>0],Rc:et()[rn+32>>2>>>0],Jc:et()[rn+36>>2>>>0],Mc:vr?gn(vr):""},qt=gn(qt),vr={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})qt=qt.replace(new RegExp(qr,"g"),vr[qr]);var Xo="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),po="January February March April May June July August September October November December".split(" ");for(qr in vr={"%a":function(_n){return Xo[_n.Tb].substring(0,3)},"%A":function(_n){return Xo[_n.Tb]},"%b":function(_n){return po[_n.ec].substring(0,3)},"%B":function(_n){return po[_n.ec]},"%C":function(_n){return Tn((_n.Xb+1900)/100|0,2)},"%d":function(_n){return Tn(_n.jc,2)},"%e":function(_n){return pn(_n.jc,2," ")},"%g":function(_n){return gr(_n).toString().substring(2)},"%G":function(_n){return gr(_n)},"%H":function(_n){return Tn(_n.dc,2)},"%I":function(_n){return(_n=_n.dc)==0?_n=12:12<_n&&(_n-=12),Tn(_n,2)},"%j":function(_n){for(var Er=0,Gr=0;Gr<=_n.ec-1;Er+=(mp(_n.Xb+1900)?mn:Mn)[Gr++]);return Tn(_n.jc+Er,3)},"%m":function(_n){return Tn(_n.ec+1,2)},"%M":function(_n){return Tn(_n.Kc,2)},"%n":function(){return`
`},"%p":function(_n){return 0<=_n.dc&&12>_n.dc?"AM":"PM"},"%S":function(_n){return Tn(_n.Lc,2)},"%t":function(){return"	"},"%u":function(_n){return _n.Tb||7},"%U":function(_n){return Tn(Math.floor((_n.Wb+7-_n.Tb)/7),2)},"%V":function(_n){var Er=Math.floor((_n.Wb+7-(_n.Tb+6)%7)/7);if(2>=(_n.Tb+371-_n.Wb-2)%7&&Er++,Er)Er==53&&((Gr=(_n.Tb+371-_n.Wb)%7)==4||Gr==3&&mp(_n.Xb)||(Er=1));else{Er=52;var Gr=(_n.Tb+7-_n.Wb-1)%7;(Gr==4||Gr==5&&mp(_n.Xb%400-1))&&Er++}return Tn(Er,2)},"%w":function(_n){return _n.Tb},"%W":function(_n){return Tn(Math.floor((_n.Wb+7-(_n.Tb+6)%7)/7),2)},"%y":function(_n){return(_n.Xb+1900).toString().substring(2)},"%Y":function(_n){return _n.Xb+1900},"%z":function(_n){var Er=0<=(_n=_n.Jc);return _n=Math.abs(_n)/60,(Er?"+":"-")+("0000"+(_n/60*100+_n%60)).slice(-4)},"%Z":function(_n){return _n.Mc},"%%":function(){return"%"}},qt=qt.replace(/%%/g,"\0\0"),vr)qt.includes(qr)&&(qt=qt.replace(new RegExp(qr,"g"),vr[qr](rn)));return qr=function(_n){var Er=Array(On(_n)+1);return kn(_n,Er,0,Er.length),Er}(qt=qt.replace(/\0\0/g,"%")),qr.length>zt?0:(function(_n,Er){b().set(_n,Er>>>0)}(qr,Nt),qr.length-1)}Fn.fc();var Jn=[null,Vn,Cr,yr,Lr,ts,Vr,$r,Jr,_o,Bs,Ro,Il,Ol,Dl,Ht,Zt,xn,wn,jn,En,dr,Sr,Hr,co,iy],nr={b:function(Nt){return Dr(Nt+24)+24},n:function(Nt){return(Nt=new Nn(Nt)).uc()||(Nt.hc(!0),Xn--),Nt.ic(!1),js.push(Nt),Nt.sc(),Nt.vc()},ma:function(Nt){throw It("Unexpected exception thrown, this is not properly supported - aborting"),Gt=!0,Nt},x:function(){ur(0);var Nt=js.pop();if(Nt.Hc()&&!Nt.kc()){var zt=Nt.Dc();zt&&mr(zt)(Nt.Zb),pr(Nt.Zb)}Zn=0},e:function(){var Nt=Zn;if(!Nt)return fs=0;var zt=new Nn(Nt);zt.cc(Nt);var qt=zt.bc();if(!qt)return fs=0,Nt;for(var rn=Array.prototype.slice.call(arguments),pn=0;pn<rn.length;pn++){var Tn=rn[pn];if(Tn===0||Tn===qt)break;if(qs(Tn,qt,zt.Sb+16))return fs=Tn,Nt}return fs=qt,Nt},l:function(){var Nt=Zn;if(!Nt)return fs=0;var zt=new Nn(Nt);zt.cc(Nt);var qt=zt.bc();if(!qt)return fs=0,Nt;for(var rn=Array.prototype.slice.call(arguments),pn=0;pn<rn.length;pn++){var Tn=rn[pn];if(Tn===0||Tn===qt)break;if(qs(Tn,qt,zt.Sb+16))return fs=Tn,Nt}return fs=qt,Nt},h:function(){var Nt=Zn;if(!Nt)return fs=0;var zt=new Nn(Nt);zt.cc(Nt);var qt=zt.bc();if(!qt)return fs=0,Nt;for(var rn=Array.prototype.slice.call(arguments),pn=0;pn<rn.length;pn++){var Tn=rn[pn];if(Tn===0||Tn===qt)break;if(qs(Tn,qt,zt.Sb+16))return fs=Tn,Nt}return fs=qt,Nt},t:pr,M:function(){var Nt=js.pop();Nt||yn("no exception to throw");var zt=Nt.Zb;throw Nt.kc()||(js.push(Nt),Nt.ic(!0),Nt.hc(!1),Xn++),Zn=zt,zt},c:function(Nt,zt,qt){throw new Nn(Nt).fc(zt,qt),Zn=Nt,Xn++,Nt},pa:function(){return Xn},Fa:function(Nt){Ko(Nt,!xt,1,!mt),Fn.pc()},T:function(Nt){Et?postMessage({cmd:"cleanupThread",thread:Nt}):In(Nt)},xa:zr,j:function(Nt){throw Zn||(Zn=Nt),Nt},H:Lr,Ma:ts,ua:Vr,wa:$r,oa:Jr,Ka:_o,Ca:Bs,Ja:Ro,V:Il,va:Ol,sa:Dl,La:Ht,ta:Zt,Ta:function(){},X:function(){yn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){yn("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Nt,zt,qt,rn){if(Nt==zt)setTimeout(()=>ln(rn));else if(Et)postMessage({targetThread:Nt,cmd:"processProxyingQueue",queue:rn});else{if(!(Nt=Fn.Vb[Nt]))return;Nt.postMessage({cmd:"processProxyingQueue",queue:rn})}return 1},Ea:function(){return-1},Pa:function(Nt,zt){Nt=new Date(1e3*dn(Nt)),et()[zt>>2>>>0]=Nt.getUTCSeconds(),et()[zt+4>>2>>>0]=Nt.getUTCMinutes(),et()[zt+8>>2>>>0]=Nt.getUTCHours(),et()[zt+12>>2>>>0]=Nt.getUTCDate(),et()[zt+16>>2>>>0]=Nt.getUTCMonth(),et()[zt+20>>2>>>0]=Nt.getUTCFullYear()-1900,et()[zt+24>>2>>>0]=Nt.getUTCDay(),Nt=(Nt.getTime()-Date.UTC(Nt.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,et()[zt+28>>2>>>0]=Nt},Qa:function(Nt,zt){Nt=new Date(1e3*dn(Nt)),et()[zt>>2>>>0]=Nt.getSeconds(),et()[zt+4>>2>>>0]=Nt.getMinutes(),et()[zt+8>>2>>>0]=Nt.getHours(),et()[zt+12>>2>>>0]=Nt.getDate(),et()[zt+16>>2>>>0]=Nt.getMonth(),et()[zt+20>>2>>>0]=Nt.getFullYear()-1900,et()[zt+24>>2>>>0]=Nt.getDay();var qt=new Date(Nt.getFullYear(),0,1),rn=(Nt.getTime()-qt.getTime())/864e5|0;et()[zt+28>>2>>>0]=rn,et()[zt+36>>2>>>0]=-60*Nt.getTimezoneOffset(),rn=new Date(Nt.getFullYear(),6,1).getTimezoneOffset(),Nt=0|(rn!=(qt=qt.getTimezoneOffset())&&Nt.getTimezoneOffset()==Math.min(qt,rn)),et()[zt+32>>2>>>0]=Nt},Ra:function(Nt){var zt=new Date(et()[Nt+20>>2>>>0]+1900,et()[Nt+16>>2>>>0],et()[Nt+12>>2>>>0],et()[Nt+8>>2>>>0],et()[Nt+4>>2>>>0],et()[Nt>>2>>>0],0),qt=et()[Nt+32>>2>>>0],rn=zt.getTimezoneOffset(),pn=new Date(zt.getFullYear(),0,1),Tn=new Date(zt.getFullYear(),6,1).getTimezoneOffset(),Bn=pn.getTimezoneOffset(),er=Math.min(Bn,Tn);return 0>qt?et()[Nt+32>>2>>>0]=+(Tn!=Bn&&er==rn):0<qt!=(er==rn)&&(Tn=Math.max(Bn,Tn),zt.setTime(zt.getTime()+6e4*((0<qt?er:Tn)-rn))),et()[Nt+24>>2>>>0]=zt.getDay(),qt=(zt.getTime()-pn.getTime())/864e5|0,et()[Nt+28>>2>>>0]=qt,et()[Nt>>2>>>0]=zt.getSeconds(),et()[Nt+4>>2>>>0]=zt.getMinutes(),et()[Nt+8>>2>>>0]=zt.getHours(),et()[Nt+12>>2>>>0]=zt.getDate(),et()[Nt+16>>2>>>0]=zt.getMonth(),zt.getTime()/1e3|0},Aa:xn,Ba:wn,Sa:function Nt(zt,qt,rn){Nt.Ac||(Nt.Ac=!0,jn(zt,qt,rn))},y:function(){yn("")},U:function(){if(!gt&&!xt){var Nt="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Fs||(Fs={}),Fs[Nt]||(Fs[Nt]=1,gt&&(Nt="warning: "+Nt),It(Nt))}},ra:function(){return 4294901760},B:Ao,Ia:function(Nt,zt,qt){_e().copyWithin(Nt>>>0,zt>>>0,zt+qt>>>0)},F:function(){return gt?c(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Nt,zt,qt){rr.length=zt,qt>>=3;for(var rn=0;rn<zt;rn++)rr[rn]=st()[qt+rn>>>0];return(0>Nt?bn[-Nt-1]:Jn[Nt]).apply(null,rr)},qa:function(Nt){var zt=_e().length;if((Nt>>>=0)<=zt||4294901760<Nt)return!1;for(var qt=1;4>=qt;qt*=2){var rn=zt*(1+.2/qt);rn=Math.min(rn,Nt+100663296);var pn=Math;rn=Math.max(Nt,rn),pn=pn.min.call(pn,4294901760,rn+(65536-rn%65536)%65536);e:{try{Bt.grow(pn-en.byteLength+65535>>>16),un(Bt.buffer);var Tn=1;break e}catch{}Tn=void 0}if(Tn)return!0}return!1},Na:function(){throw"unwind"},Ga:En,Ha:dr,J:ir,I:Sr,S:Hr,ga:co,R:iy,d:function(){return fs},na:function Nt(zt,qt){Nt.lc||(Nt.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var pn=new Uint8Array(1);return()=>(crypto.getRandomValues(pn),pn[0])}if(gt)try{var Tn=c(Object(function(){var Bn=new Error("Cannot find module 'crypto'");throw Bn.code="MODULE_NOT_FOUND",Bn}()));return()=>Tn.randomBytes(1)[0]}catch{}return()=>yn("randomDevice")}());for(var rn=0;rn<qt;rn++)b()[zt+rn>>0>>>0]=Nt.lc();return 0},ia:function(Nt,zt,qt){var rn=lr();try{return mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},ja:function(Nt,zt,qt){var rn=lr();try{return mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},K:function(Nt){var zt=lr();try{return mr(Nt)()}catch(qt){if(tr(zt),qt!==qt+0)throw qt;ur(1,0)}},f:function(Nt,zt){var qt=lr();try{return mr(Nt)(zt)}catch(rn){if(tr(qt),rn!==rn+0)throw rn;ur(1,0)}},P:function(Nt,zt,qt){var rn=lr();try{return mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},Q:function(Nt,zt,qt){var rn=lr();try{return mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},k:function(Nt,zt,qt){var rn=lr();try{return mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},p:function(Nt,zt,qt,rn){var pn=lr();try{return mr(Nt)(zt,qt,rn)}catch(Tn){if(tr(pn),Tn!==Tn+0)throw Tn;ur(1,0)}},q:function(Nt,zt,qt,rn,pn){var Tn=lr();try{return mr(Nt)(zt,qt,rn,pn)}catch(Bn){if(tr(Tn),Bn!==Bn+0)throw Bn;ur(1,0)}},N:function(Nt,zt,qt,rn,pn,Tn){var Bn=lr();try{return mr(Nt)(zt,qt,rn,pn,Tn)}catch(er){if(tr(Bn),er!==er+0)throw er;ur(1,0)}},s:function(Nt,zt,qt,rn,pn,Tn){var Bn=lr();try{return mr(Nt)(zt,qt,rn,pn,Tn)}catch(er){if(tr(Bn),er!==er+0)throw er;ur(1,0)}},w:function(Nt,zt,qt,rn,pn,Tn,Bn){var er=lr();try{return mr(Nt)(zt,qt,rn,pn,Tn,Bn)}catch(gr){if(tr(er),gr!==gr+0)throw gr;ur(1,0)}},L:function(Nt,zt,qt,rn,pn,Tn,Bn,er){var gr=lr();try{return mr(Nt)(zt,qt,rn,pn,Tn,Bn,er)}catch(vr){if(tr(gr),vr!==vr+0)throw vr;ur(1,0)}},E:function(Nt,zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo){var po=lr();try{return mr(Nt)(zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo)}catch(_n){if(tr(po),_n!==_n+0)throw _n;ur(1,0)}},aa:function(Nt,zt,qt,rn,pn,Tn,Bn,er){var gr=lr();try{return JE(Nt,zt,qt,rn,pn,Tn,Bn,er)}catch(vr){if(tr(gr),vr!==vr+0)throw vr;ur(1,0)}},_:function(Nt,zt,qt,rn,pn,Tn,Bn){var er=lr();try{return WE(Nt,zt,qt,rn,pn,Tn,Bn)}catch(gr){if(tr(er),gr!==gr+0)throw gr;ur(1,0)}},Z:function(Nt,zt,qt,rn,pn){var Tn=lr();try{return ew(Nt,zt,qt,rn,pn)}catch(Bn){if(tr(Tn),Bn!==Bn+0)throw Bn;ur(1,0)}},ca:function(Nt,zt,qt,rn){var pn=lr();try{return ZE(Nt,zt,qt,rn)}catch(Tn){if(tr(pn),Tn!==Tn+0)throw Tn;ur(1,0)}},$:function(Nt){var zt=lr();try{return Su(Nt)}catch(qt){if(tr(zt),qt!==qt+0)throw qt;ur(1,0)}},ba:function(Nt,zt){var qt=lr();try{return QE(Nt,zt)}catch(rn){if(tr(qt),rn!==rn+0)throw rn;ur(1,0)}},Y:function(Nt,zt,qt){var rn=lr();try{return qE(Nt,zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},g:function(Nt){var zt=lr();try{mr(Nt)()}catch(qt){if(tr(zt),qt!==qt+0)throw qt;ur(1,0)}},r:function(Nt,zt){var qt=lr();try{mr(Nt)(zt)}catch(rn){if(tr(qt),rn!==rn+0)throw rn;ur(1,0)}},i:function(Nt,zt,qt){var rn=lr();try{mr(Nt)(zt,qt)}catch(pn){if(tr(rn),pn!==pn+0)throw pn;ur(1,0)}},ha:function(Nt,zt,qt,rn){var pn=lr();try{mr(Nt)(zt,qt,rn)}catch(Tn){if(tr(pn),Tn!==Tn+0)throw Tn;ur(1,0)}},m:function(Nt,zt,qt,rn){var pn=lr();try{mr(Nt)(zt,qt,rn)}catch(Tn){if(tr(pn),Tn!==Tn+0)throw Tn;ur(1,0)}},v:function(Nt,zt,qt,rn,pn){var Tn=lr();try{mr(Nt)(zt,qt,rn,pn)}catch(Bn){if(tr(Tn),Bn!==Bn+0)throw Bn;ur(1,0)}},u:function(Nt,zt,qt,rn,pn,Tn){var Bn=lr();try{mr(Nt)(zt,qt,rn,pn,Tn)}catch(er){if(tr(Bn),er!==er+0)throw er;ur(1,0)}},O:function(Nt,zt,qt,rn,pn,Tn,Bn){var er=lr();try{mr(Nt)(zt,qt,rn,pn,Tn,Bn)}catch(gr){if(tr(er),gr!==gr+0)throw gr;ur(1,0)}},A:function(Nt,zt,qt,rn,pn,Tn,Bn,er){var gr=lr();try{mr(Nt)(zt,qt,rn,pn,Tn,Bn,er)}catch(vr){if(tr(gr),vr!==vr+0)throw vr;ur(1,0)}},ka:function(Nt,zt,qt,rn,pn,Tn,Bn,er,gr){var vr=lr();try{mr(Nt)(zt,qt,rn,pn,Tn,Bn,er,gr)}catch(qr){if(tr(vr),qr!==qr+0)throw qr;ur(1,0)}},C:function(Nt,zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr){var Xo=lr();try{mr(Nt)(zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr)}catch(po){if(tr(Xo),po!==po+0)throw po;ur(1,0)}},D:function(Nt,zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo,po,_n,Er,Gr){var Ml=lr();try{mr(Nt)(zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo,po,_n,Er,Gr)}catch(Mm){if(tr(Ml),Mm!==Mm+0)throw Mm;ur(1,0)}},fa:function(Nt,zt,qt,rn,pn,Tn,Bn,er){var gr=lr();try{KE(Nt,zt,qt,rn,pn,Tn,Bn,er)}catch(vr){if(tr(gr),vr!==vr+0)throw vr;ur(1,0)}},da:function(Nt,zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo){var po=lr();try{YE(Nt,zt,qt,rn,pn,Tn,Bn,er,gr,vr,qr,Xo)}catch(_n){if(tr(po),_n!==_n+0)throw _n;ur(1,0)}},ea:function(Nt,zt,qt,rn,pn,Tn){var Bn=lr();try{XE(Nt,zt,qt,rn,pn,Tn)}catch(er){if(tr(Bn),er!==er+0)throw er;ur(1,0)}},o:function(Nt){return Nt},a:Bt||$.wasmMemory,G:function(Nt){fs=Nt},la:Hn,z:function(Nt,zt,qt,rn){return Hn(Nt,zt,qt,rn)}};(function(){function Nt(pn,Tn){$.asm=pn.exports,Fn.qc.push($.asm.sb),Ln=$.asm.ub,Wn.unshift($.asm.Va),Ct=Tn,Et||(vn--,$.monitorRunDependencies&&$.monitorRunDependencies(vn),vn==0&&Cn&&(pn=Cn,Cn=null,pn()))}function zt(pn){Nt(pn.instance,pn.module)}function qt(pn){return function(){if(!Dt&&(mt||xt)){if(typeof fetch=="function"&&!on.startsWith("file://"))return fetch(on,{credentials:"same-origin"}).then(function(Tn){if(!Tn.ok)throw"failed to load wasm binary file at '"+on+"'";return Tn.arrayBuffer()}).catch(function(){return Qt()});if(ot)return new Promise(function(Tn,Bn){ot(on,function(er){Tn(new Uint8Array(er))},Bn)})}return Promise.resolve().then(function(){return Qt()})}().then(function(Tn){return WebAssembly.instantiate(Tn,rn)}).then(function(Tn){return Tn}).then(pn,function(Tn){It("failed to asynchronously prepare wasm: "+Tn),yn(Tn)})}var rn={a:nr};if(Et||(vn++,$.monitorRunDependencies&&$.monitorRunDependencies(vn)),$.instantiateWasm)try{return $.instantiateWasm(rn,Nt)}catch(pn){return It("Module.instantiateWasm callback failed with error: "+pn),!1}(Dt||typeof WebAssembly.instantiateStreaming!="function"||nn()||on.startsWith("file://")||gt||typeof fetch!="function"?qt(zt):fetch(on,{credentials:"same-origin"}).then(function(pn){return WebAssembly.instantiateStreaming(pn,rn).then(zt,function(Tn){return It("wasm streaming compile failed: "+Tn),It("falling back to ArrayBuffer instantiation"),qt(zt)})})).catch(nt)})(),$.___wasm_call_ctors=function(){return($.___wasm_call_ctors=$.asm.Va).apply(null,arguments)},$._OrtInit=function(){return($._OrtInit=$.asm.Wa).apply(null,arguments)},$._OrtCreateSessionOptions=function(){return($._OrtCreateSessionOptions=$.asm.Xa).apply(null,arguments)},$._OrtAppendExecutionProvider=function(){return($._OrtAppendExecutionProvider=$.asm.Ya).apply(null,arguments)},$._OrtAddSessionConfigEntry=function(){return($._OrtAddSessionConfigEntry=$.asm.Za).apply(null,arguments)},$._OrtReleaseSessionOptions=function(){return($._OrtReleaseSessionOptions=$.asm._a).apply(null,arguments)},$._OrtCreateSession=function(){return($._OrtCreateSession=$.asm.$a).apply(null,arguments)},$._OrtReleaseSession=function(){return($._OrtReleaseSession=$.asm.ab).apply(null,arguments)},$._OrtGetInputCount=function(){return($._OrtGetInputCount=$.asm.bb).apply(null,arguments)},$._OrtGetOutputCount=function(){return($._OrtGetOutputCount=$.asm.cb).apply(null,arguments)},$._OrtGetInputName=function(){return($._OrtGetInputName=$.asm.db).apply(null,arguments)},$._OrtGetOutputName=function(){return($._OrtGetOutputName=$.asm.eb).apply(null,arguments)},$._OrtFree=function(){return($._OrtFree=$.asm.fb).apply(null,arguments)},$._OrtCreateTensor=function(){return($._OrtCreateTensor=$.asm.gb).apply(null,arguments)},$._OrtGetTensorData=function(){return($._OrtGetTensorData=$.asm.hb).apply(null,arguments)},$._OrtReleaseTensor=function(){return($._OrtReleaseTensor=$.asm.ib).apply(null,arguments)},$._OrtCreateRunOptions=function(){return($._OrtCreateRunOptions=$.asm.jb).apply(null,arguments)},$._OrtAddRunConfigEntry=function(){return($._OrtAddRunConfigEntry=$.asm.kb).apply(null,arguments)},$._OrtReleaseRunOptions=function(){return($._OrtReleaseRunOptions=$.asm.lb).apply(null,arguments)},$._OrtRun=function(){return($._OrtRun=$.asm.mb).apply(null,arguments)},$._OrtEndProfiling=function(){return($._OrtEndProfiling=$.asm.nb).apply(null,arguments)};var br=$._pthread_self=function(){return(br=$._pthread_self=$.asm.ob).apply(null,arguments)},Dr=$._malloc=function(){return(Dr=$._malloc=$.asm.pb).apply(null,arguments)},Us=$._free=function(){return(Us=$._free=$.asm.qb).apply(null,arguments)},Ws=$._fflush=function(){return(Ws=$._fflush=$.asm.rb).apply(null,arguments)};$.__emscripten_tls_init=function(){return($.__emscripten_tls_init=$.asm.sb).apply(null,arguments)};var Co=$.___funcs_on_exit=function(){return(Co=$.___funcs_on_exit=$.asm.tb).apply(null,arguments)},Ko=$.__emscripten_thread_init=function(){return(Ko=$.__emscripten_thread_init=$.asm.vb).apply(null,arguments)};$.__emscripten_thread_crashed=function(){return($.__emscripten_thread_crashed=$.asm.wb).apply(null,arguments)};var Ss,ms=$._emscripten_run_in_main_runtime_thread_js=function(){return(ms=$._emscripten_run_in_main_runtime_thread_js=$.asm.xb).apply(null,arguments)},gp=$.__emscripten_proxy_execute_task_queue=function(){return(gp=$.__emscripten_proxy_execute_task_queue=$.asm.yb).apply(null,arguments)},Eu=$.__emscripten_thread_free_data=function(){return(Eu=$.__emscripten_thread_free_data=$.asm.zb).apply(null,arguments)},uo=$.__emscripten_thread_exit=function(){return(uo=$.__emscripten_thread_exit=$.asm.Ab).apply(null,arguments)},ur=$._setThrew=function(){return(ur=$._setThrew=$.asm.Bb).apply(null,arguments)},ko=$._emscripten_stack_set_limits=function(){return(ko=$._emscripten_stack_set_limits=$.asm.Cb).apply(null,arguments)},lr=$.stackSave=function(){return(lr=$.stackSave=$.asm.Db).apply(null,arguments)},tr=$.stackRestore=function(){return(tr=$.stackRestore=$.asm.Eb).apply(null,arguments)},ho=$.stackAlloc=function(){return(ho=$.stackAlloc=$.asm.Fb).apply(null,arguments)},qs=$.___cxa_can_catch=function(){return(qs=$.___cxa_can_catch=$.asm.Gb).apply(null,arguments)},wu=$.___cxa_is_pointer_type=function(){return(wu=$.___cxa_is_pointer_type=$.asm.Hb).apply(null,arguments)},Su=$.dynCall_j=function(){return(Su=$.dynCall_j=$.asm.Ib).apply(null,arguments)},WE=$.dynCall_iiiiij=function(){return(WE=$.dynCall_iiiiij=$.asm.Jb).apply(null,arguments)},qE=$.dynCall_jii=function(){return(qE=$.dynCall_jii=$.asm.Kb).apply(null,arguments)},KE=$.dynCall_viiiiij=function(){return(KE=$.dynCall_viiiiij=$.asm.Lb).apply(null,arguments)},XE=$.dynCall_vjji=function(){return(XE=$.dynCall_vjji=$.asm.Mb).apply(null,arguments)},YE=$.dynCall_viiijjjii=function(){return(YE=$.dynCall_viiijjjii=$.asm.Nb).apply(null,arguments)},ZE=$.dynCall_iij=function(){return(ZE=$.dynCall_iij=$.asm.Ob).apply(null,arguments)},QE=$.dynCall_ji=function(){return(QE=$.dynCall_ji=$.asm.Pb).apply(null,arguments)},JE=$.dynCall_iiiiiij=function(){return(JE=$.dynCall_iiiiiij=$.asm.Qb).apply(null,arguments)},ew=$.dynCall_iiij=function(){return(ew=$.dynCall_iiij=$.asm.Rb).apply(null,arguments)};function tw(){function Nt(){if(!Ss&&(Ss=!0,$.calledRun=!0,!Gt)&&(Et||cr(Wn),_($),$.onRuntimeInitialized&&$.onRuntimeInitialized(),!Et)){if($.postRun)for(typeof $.postRun=="function"&&($.postRun=[$.postRun]);$.postRun.length;){var zt=$.postRun.shift();or.unshift(zt)}cr(or)}}if(!(0<vn))if(Et)_($),Et||cr(Wn),postMessage({cmd:"loaded"});else{if($.preRun)for(typeof $.preRun=="function"&&($.preRun=[$.preRun]);$.preRun.length;)Xt();cr($n),0<vn||($.setStatus?($.setStatus("Running..."),setTimeout(function(){setTimeout(function(){$.setStatus("")},1),Nt()},1)):Nt())}}if($.UTF8ToString=gn,$.stringToUTF8=function(Nt,zt,qt){return kn(Nt,_e(),zt,qt)},$.lengthBytesUTF8=On,$.keepRuntimeAlive=Kt,$.wasmMemory=Bt,$.stackSave=lr,$.stackRestore=tr,$.stackAlloc=ho,$.ExitStatus=An,$.PThread=Fn,Cn=function Nt(){Ss||tw(),Ss||(Cn=Nt)},$.preInit)for(typeof $.preInit=="function"&&($.preInit=[$.preInit]);0<$.preInit.length;)$.preInit.pop()();return tw(),g.ready});a.exports=h},932:(a,e,c)=>{var d,h=(d=(d=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(g){var b,_e,et;g=g||{},b||(b=g!==void 0?g:{}),b.ready=new Promise(function(Ht,Zt){_e=Ht,et=Zt});var rt,st,$,_,nt,it,ot=Object.assign({},b),lt="./this.program",at=(Ht,Zt)=>{throw Zt},ct=typeof window=="object",dt=typeof importScripts=="function",ht=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",pt="";ht?(pt=dt?c(908).dirname(pt)+"/":"//",it=()=>{nt||(_=c(1384),nt=c(908))},rt=function(Ht,Zt){return it(),Ht=nt.normalize(Ht),_.readFileSync(Ht,Zt?void 0:"utf8")},$=Ht=>((Ht=rt(Ht,!0)).buffer||(Ht=new Uint8Array(Ht)),Ht),st=(Ht,Zt,ln)=>{it(),Ht=nt.normalize(Ht),_.readFile(Ht,function(dn,xn){dn?ln(dn):Zt(xn.buffer)})},1<process.argv.length&&(lt=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Ht){if(!(Ht instanceof Wn))throw Ht}),process.on("unhandledRejection",function(Ht){throw Ht}),at=(Ht,Zt)=>{if(gt||0<hn)throw process.exitCode=Ht,Zt;Zt instanceof Wn||xt("exiting due to exception: "+Zt),process.exit(Ht)},b.inspect=function(){return"[Emscripten Module object]"}):(ct||dt)&&(dt?pt=self.location.href:typeof document<"u"&&document.currentScript&&(pt=document.currentScript.src),d&&(pt=d),pt=pt.indexOf("blob:")!==0?pt.substr(0,pt.replace(/[?#].*/,"").lastIndexOf("/")+1):"",rt=Ht=>{var Zt=new XMLHttpRequest;return Zt.open("GET",Ht,!1),Zt.send(null),Zt.responseText},dt&&($=Ht=>{var Zt=new XMLHttpRequest;return Zt.open("GET",Ht,!1),Zt.responseType="arraybuffer",Zt.send(null),new Uint8Array(Zt.response)}),st=(Ht,Zt,ln)=>{var dn=new XMLHttpRequest;dn.open("GET",Ht,!0),dn.responseType="arraybuffer",dn.onload=()=>{dn.status==200||dn.status==0&&dn.response?Zt(dn.response):ln()},dn.onerror=ln,dn.send(null)});var ft,mt=b.print||console.log.bind(console),xt=b.printErr||console.warn.bind(console);Object.assign(b,ot),ot=null,b.thisProgram&&(lt=b.thisProgram),b.quit&&(at=b.quit),b.wasmBinary&&(ft=b.wasmBinary);var gt=b.noExitRuntime||!1;typeof WebAssembly!="object"&&un("no native wasm support detected");var Et,St,Pt,Mt,Rt,Dt,Tt=!1,It=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Vt(Ht,Zt,ln){var dn=(Zt>>>=0)+ln;for(ln=Zt;Ht[ln]&&!(ln>=dn);)++ln;if(16<ln-Zt&&Ht.buffer&&It)return It.decode(Ht.subarray(Zt,ln));for(dn="";Zt<ln;){var xn=Ht[Zt++];if(128&xn){var wn=63&Ht[Zt++];if((224&xn)==192)dn+=String.fromCharCode((31&xn)<<6|wn);else{var an=63&Ht[Zt++];65536>(xn=(240&xn)==224?(15&xn)<<12|wn<<6|an:(7&xn)<<18|wn<<12|an<<6|63&Ht[Zt++])?dn+=String.fromCharCode(xn):(xn-=65536,dn+=String.fromCharCode(55296|xn>>10,56320|1023&xn))}}else dn+=String.fromCharCode(xn)}return dn}function Bt(Ht,Zt){return(Ht>>>=0)?Vt(Mt,Ht,Zt):""}function Ct(Ht,Zt,ln,dn){if(!(0<dn))return 0;var xn=ln>>>=0;dn=ln+dn-1;for(var wn=0;wn<Ht.length;++wn){var an=Ht.charCodeAt(wn);if(55296<=an&&57343>=an&&(an=65536+((1023&an)<<10)|1023&Ht.charCodeAt(++wn)),127>=an){if(ln>=dn)break;Zt[ln++>>>0]=an}else{if(2047>=an){if(ln+1>=dn)break;Zt[ln++>>>0]=192|an>>6}else{if(65535>=an){if(ln+2>=dn)break;Zt[ln++>>>0]=224|an>>12}else{if(ln+3>=dn)break;Zt[ln++>>>0]=240|an>>18,Zt[ln++>>>0]=128|an>>12&63}Zt[ln++>>>0]=128|an>>6&63}Zt[ln++>>>0]=128|63&an}}return Zt[ln>>>0]=0,ln-xn}function en(Ht){for(var Zt=0,ln=0;ln<Ht.length;++ln){var dn=Ht.charCodeAt(ln);127>=dn?Zt++:2047>=dn?Zt+=2:55296<=dn&&57343>=dn?(Zt+=4,++ln):Zt+=3}return Zt}function sn(){var Ht=Et.buffer;St=Ht,b.HEAP8=Pt=new Int8Array(Ht),b.HEAP16=new Int16Array(Ht),b.HEAP32=Rt=new Int32Array(Ht),b.HEAPU8=Mt=new Uint8Array(Ht),b.HEAPU16=new Uint16Array(Ht),b.HEAPU32=Dt=new Uint32Array(Ht),b.HEAPF32=new Float32Array(Ht),b.HEAPF64=new Float64Array(Ht)}var kt,Ut=[],Jt=[],tn=[],Gt=[],hn=0;function fn(){var Ht=b.preRun.shift();Ut.unshift(Ht)}var gn,kn=0,On=null;function un(Ht){throw b.onAbort&&b.onAbort(Ht),xt(Ht="Aborted("+Ht+")"),Tt=!0,Ht=new WebAssembly.RuntimeError(Ht+". Build with -sASSERTIONS for more info."),et(Ht),Ht}function Sn(){return gn.startsWith("data:application/octet-stream;base64,")}if(gn="ort-wasm.wasm",!Sn()){var Ln=gn;gn=b.locateFile?b.locateFile(Ln,pt):pt+Ln}function $n(){var Ht=gn;try{if(Ht==gn&&ft)return new Uint8Array(ft);if($)return $(Ht);throw"both async and sync fetching of the wasm failed"}catch(Zt){un(Zt)}}function Wn(Ht){this.name="ExitStatus",this.message="Program terminated with exit("+Ht+")",this.status=Ht}function Pn(Ht){for(;0<Ht.length;)Ht.shift()(b)}var or=[],Kt=0,Xt=0;function on(Ht){this.Db=Ht,this.zb=Ht-24,this.Ub=function(Zt){Dt[this.zb+4>>2>>>0]=Zt},this.Eb=function(){return Dt[this.zb+4>>2>>>0]},this.Sb=function(Zt){Dt[this.zb+8>>2>>>0]=Zt},this.Wb=function(){return Dt[this.zb+8>>2>>>0]},this.Tb=function(){Rt[this.zb>>2>>>0]=0},this.Ib=function(Zt){Pt[this.zb+12>>0>>>0]=Zt?1:0},this.Pb=function(){return Pt[this.zb+12>>0>>>0]!=0},this.Jb=function(Zt){Pt[this.zb+13>>0>>>0]=Zt?1:0},this.Lb=function(){return Pt[this.zb+13>>0>>>0]!=0},this.Rb=function(Zt,ln){this.Fb(0),this.Ub(Zt),this.Sb(ln),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Rt[this.zb>>2>>>0]+=1},this.Xb=function(){var Zt=Rt[this.zb>>2>>>0];return Rt[this.zb>>2>>>0]=Zt-1,Zt===1},this.Fb=function(Zt){Dt[this.zb+16>>2>>>0]=Zt},this.Ob=function(){return Dt[this.zb+16>>2>>>0]},this.Qb=function(){if(zr(this.Eb()))return Dt[this.Db>>2>>>0];var Zt=this.Ob();return Zt!==0?Zt:this.Db}}function vn(Ht){return Fs(new on(Ht).zb)}var Cn=[];function yn(Ht){var Zt=Cn[Ht];return Zt||(Ht>=Cn.length&&(Cn.length=Ht+1),Cn[Ht]=Zt=kt.get(Ht)),Zt}function nn(Ht){var Zt=en(Ht)+1,ln=mr(Zt);return ln&&Ct(Ht,Pt,ln,Zt),ln}var Qt={};function bn(){if(!An){var Ht,Zt={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:lt||"./this.program"};for(Ht in Qt)Qt[Ht]===void 0?delete Zt[Ht]:Zt[Ht]=Qt[Ht];var ln=[];for(Ht in Zt)ln.push(Ht+"="+Zt[Ht]);An=ln}return An}var An,In=[null,[],[]];function Un(Ht,Zt){var ln=In[Ht];Zt===0||Zt===10?((Ht===1?mt:xt)(Vt(ln,0)),ln.length=0):ln.push(Zt)}var Vn=0;function ir(Ht){return Ht%4==0&&(Ht%100!=0||Ht%400==0)}var Fn=[31,29,31,30,31,30,31,31,30,31,30,31],cr=[31,28,31,30,31,30,31,31,30,31,30,31];function Gn(Ht,Zt,ln,dn){function xn(En,dr,Sr){for(En=typeof En=="number"?En.toString():En||"";En.length<dr;)En=Sr[0]+En;return En}function wn(En,dr){return xn(En,dr,"0")}function an(En,dr){function Sr(co){return 0>co?-1:0<co?1:0}var Hr;return(Hr=Sr(En.getFullYear()-dr.getFullYear()))===0&&(Hr=Sr(En.getMonth()-dr.getMonth()))===0&&(Hr=Sr(En.getDate()-dr.getDate())),Hr}function jn(En){switch(En.getDay()){case 0:return new Date(En.getFullYear()-1,11,29);case 1:return En;case 2:return new Date(En.getFullYear(),0,3);case 3:return new Date(En.getFullYear(),0,2);case 4:return new Date(En.getFullYear(),0,1);case 5:return new Date(En.getFullYear()-1,11,31);case 6:return new Date(En.getFullYear()-1,11,30)}}function Rn(En){var dr=En.Bb;for(En=new Date(new Date(En.Cb+1900,0,1).getTime());0<dr;){var Sr=En.getMonth(),Hr=(ir(En.getFullYear())?Fn:cr)[Sr];if(!(dr>Hr-En.getDate())){En.setDate(En.getDate()+dr);break}dr-=Hr-En.getDate()+1,En.setDate(1),11>Sr?En.setMonth(Sr+1):(En.setMonth(0),En.setFullYear(En.getFullYear()+1))}return Sr=new Date(En.getFullYear()+1,0,4),dr=jn(new Date(En.getFullYear(),0,4)),Sr=jn(Sr),0>=an(dr,En)?0>=an(Sr,En)?En.getFullYear()+1:En.getFullYear():En.getFullYear()-1}var qn=Rt[dn+40>>2>>>0];for(var rr in dn={$b:Rt[dn>>2>>>0],Zb:Rt[dn+4>>2>>>0],Gb:Rt[dn+8>>2>>>0],Kb:Rt[dn+12>>2>>>0],Hb:Rt[dn+16>>2>>>0],Cb:Rt[dn+20>>2>>>0],Ab:Rt[dn+24>>2>>>0],Bb:Rt[dn+28>>2>>>0],bc:Rt[dn+32>>2>>>0],Yb:Rt[dn+36>>2>>>0],ac:qn?Bt(qn):""},ln=Bt(ln),qn={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ln=ln.replace(new RegExp(rr,"g"),qn[rr]);var ar="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wr="January February March April May June July August September October November December".split(" ");for(rr in qn={"%a":function(En){return ar[En.Ab].substring(0,3)},"%A":function(En){return ar[En.Ab]},"%b":function(En){return wr[En.Hb].substring(0,3)},"%B":function(En){return wr[En.Hb]},"%C":function(En){return wn((En.Cb+1900)/100|0,2)},"%d":function(En){return wn(En.Kb,2)},"%e":function(En){return xn(En.Kb,2," ")},"%g":function(En){return Rn(En).toString().substring(2)},"%G":function(En){return Rn(En)},"%H":function(En){return wn(En.Gb,2)},"%I":function(En){return(En=En.Gb)==0?En=12:12<En&&(En-=12),wn(En,2)},"%j":function(En){for(var dr=0,Sr=0;Sr<=En.Hb-1;dr+=(ir(En.Cb+1900)?Fn:cr)[Sr++]);return wn(En.Kb+dr,3)},"%m":function(En){return wn(En.Hb+1,2)},"%M":function(En){return wn(En.Zb,2)},"%n":function(){return`
`},"%p":function(En){return 0<=En.Gb&&12>En.Gb?"AM":"PM"},"%S":function(En){return wn(En.$b,2)},"%t":function(){return"	"},"%u":function(En){return En.Ab||7},"%U":function(En){return wn(Math.floor((En.Bb+7-En.Ab)/7),2)},"%V":function(En){var dr=Math.floor((En.Bb+7-(En.Ab+6)%7)/7);if(2>=(En.Ab+371-En.Bb-2)%7&&dr++,dr)dr==53&&((Sr=(En.Ab+371-En.Bb)%7)==4||Sr==3&&ir(En.Cb)||(dr=1));else{dr=52;var Sr=(En.Ab+7-En.Bb-1)%7;(Sr==4||Sr==5&&ir(En.Cb%400-1))&&dr++}return wn(dr,2)},"%w":function(En){return En.Ab},"%W":function(En){return wn(Math.floor((En.Bb+7-(En.Ab+6)%7)/7),2)},"%y":function(En){return(En.Cb+1900).toString().substring(2)},"%Y":function(En){return En.Cb+1900},"%z":function(En){var dr=0<=(En=En.Yb);return En=Math.abs(En)/60,(dr?"+":"-")+("0000"+(En/60*100+En%60)).slice(-4)},"%Z":function(En){return En.ac},"%%":function(){return"%"}},ln=ln.replace(/%%/g,"\0\0"),qn)ln.includes(rr)&&(ln=ln.replace(new RegExp(rr,"g"),qn[rr](dn)));return rr=function(En){var dr=Array(en(En)+1);return Ct(En,dr,0,dr.length),dr}(ln=ln.replace(/\0\0/g,"%")),rr.length>Zt?0:(Pt.set(rr,Ht>>>0),rr.length-1)}var Cr={a:function(Ht){return mr(Ht+24)+24},m:function(Ht){return(Ht=new on(Ht)).Pb()||(Ht.Ib(!0),Kt--),Ht.Jb(!1),or.push(Ht),Ht.Nb(),Ht.Qb()},ia:function(Ht){throw xt("Unexpected exception thrown, this is not properly supported - aborting"),Tt=!0,Ht},w:function(){Xn(0);var Ht=or.pop();if(Ht.Xb()&&!Ht.Lb()){var Zt=Ht.Wb();Zt&&yn(Zt)(Ht.Db),vn(Ht.Db)}Xt=0},d:function(){var Ht=Xt;if(!Ht)return Vn=0;var Zt=new on(Ht);Zt.Fb(Ht);var ln=Zt.Eb();if(!ln)return Vn=0,Ht;for(var dn=Array.prototype.slice.call(arguments),xn=0;xn<dn.length;xn++){var wn=dn[xn];if(wn===0||wn===ln)break;if(yr(wn,ln,Zt.zb+16))return Vn=wn,Ht}return Vn=ln,Ht},k:function(){var Ht=Xt;if(!Ht)return Vn=0;var Zt=new on(Ht);Zt.Fb(Ht);var ln=Zt.Eb();if(!ln)return Vn=0,Ht;for(var dn=Array.prototype.slice.call(arguments),xn=0;xn<dn.length;xn++){var wn=dn[xn];if(wn===0||wn===ln)break;if(yr(wn,ln,Zt.zb+16))return Vn=wn,Ht}return Vn=ln,Ht},g:function(){var Ht=Xt;if(!Ht)return Vn=0;var Zt=new on(Ht);Zt.Fb(Ht);var ln=Zt.Eb();if(!ln)return Vn=0,Ht;for(var dn=Array.prototype.slice.call(arguments),xn=0;xn<dn.length;xn++){var wn=dn[xn];if(wn===0||wn===ln)break;if(yr(wn,ln,Zt.zb+16))return Vn=wn,Ht}return Vn=ln,Ht},s:vn,L:function(){var Ht=or.pop();Ht||un("no exception to throw");var Zt=Ht.Db;throw Ht.Lb()||(or.push(Ht),Ht.Jb(!0),Ht.Ib(!1),Kt++),Xt=Zt,Zt},b:function(Ht,Zt,ln){throw new on(Ht).Rb(Zt,ln),Xt=Ht,Kt++,Ht},la:function(){return Kt},i:function(Ht){throw Xt||(Xt=Ht),Ht},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){un("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){un("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Ht,Zt){Ht=new Date(1e3*(Dt[Ht>>>2]+4294967296*Rt[Ht+4>>>2])),Rt[Zt>>2>>>0]=Ht.getUTCSeconds(),Rt[Zt+4>>2>>>0]=Ht.getUTCMinutes(),Rt[Zt+8>>2>>>0]=Ht.getUTCHours(),Rt[Zt+12>>2>>>0]=Ht.getUTCDate(),Rt[Zt+16>>2>>>0]=Ht.getUTCMonth(),Rt[Zt+20>>2>>>0]=Ht.getUTCFullYear()-1900,Rt[Zt+24>>2>>>0]=Ht.getUTCDay(),Rt[Zt+28>>2>>>0]=(Ht.getTime()-Date.UTC(Ht.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Ht,Zt){Ht=new Date(1e3*(Dt[Ht>>>2]+4294967296*Rt[Ht+4>>>2])),Rt[Zt>>2>>>0]=Ht.getSeconds(),Rt[Zt+4>>2>>>0]=Ht.getMinutes(),Rt[Zt+8>>2>>>0]=Ht.getHours(),Rt[Zt+12>>2>>>0]=Ht.getDate(),Rt[Zt+16>>2>>>0]=Ht.getMonth(),Rt[Zt+20>>2>>>0]=Ht.getFullYear()-1900,Rt[Zt+24>>2>>>0]=Ht.getDay();var ln=new Date(Ht.getFullYear(),0,1);Rt[Zt+28>>2>>>0]=(Ht.getTime()-ln.getTime())/864e5|0,Rt[Zt+36>>2>>>0]=-60*Ht.getTimezoneOffset();var dn=new Date(Ht.getFullYear(),6,1).getTimezoneOffset();ln=ln.getTimezoneOffset(),Rt[Zt+32>>2>>>0]=0|(dn!=ln&&Ht.getTimezoneOffset()==Math.min(ln,dn))},Fa:function(Ht){var Zt=new Date(Rt[Ht+20>>2>>>0]+1900,Rt[Ht+16>>2>>>0],Rt[Ht+12>>2>>>0],Rt[Ht+8>>2>>>0],Rt[Ht+4>>2>>>0],Rt[Ht>>2>>>0],0),ln=Rt[Ht+32>>2>>>0],dn=Zt.getTimezoneOffset(),xn=new Date(Zt.getFullYear(),0,1),wn=new Date(Zt.getFullYear(),6,1).getTimezoneOffset(),an=xn.getTimezoneOffset(),jn=Math.min(an,wn);return 0>ln?Rt[Ht+32>>2>>>0]=+(wn!=an&&jn==dn):0<ln!=(jn==dn)&&(wn=Math.max(an,wn),Zt.setTime(Zt.getTime()+6e4*((0<ln?jn:wn)-dn))),Rt[Ht+24>>2>>>0]=Zt.getDay(),Rt[Ht+28>>2>>>0]=(Zt.getTime()-xn.getTime())/864e5|0,Rt[Ht>>2>>>0]=Zt.getSeconds(),Rt[Ht+4>>2>>>0]=Zt.getMinutes(),Rt[Ht+8>>2>>>0]=Zt.getHours(),Rt[Ht+12>>2>>>0]=Zt.getDate(),Rt[Ht+16>>2>>>0]=Zt.getMonth(),Zt.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Ht(Zt,ln,dn){Ht.Vb||(Ht.Vb=!0,function(xn,wn,an){function jn(wr){return(wr=wr.toTimeString().match(/\(([A-Za-z ]+)\)$/))?wr[1]:"GMT"}var Rn=new Date().getFullYear(),qn=new Date(Rn,0,1),rr=new Date(Rn,6,1);Rn=qn.getTimezoneOffset();var ar=rr.getTimezoneOffset();Rt[xn>>2>>>0]=60*Math.max(Rn,ar),Rt[wn>>2>>>0]=+(Rn!=ar),xn=jn(qn),wn=jn(rr),xn=nn(xn),wn=nn(wn),ar<Rn?(Dt[an>>2>>>0]=xn,Dt[an+4>>2>>>0]=wn):(Dt[an>>2>>>0]=wn,Dt[an+4>>2>>>0]=xn)}(Zt,ln,dn))},B:function(){un("")},ma:function(){return 4294901760},I:ht?()=>{var Ht=process.hrtime();return 1e3*Ht[0]+Ht[1]/1e6}:()=>performance.now(),xa:function(Ht,Zt,ln){Mt.copyWithin(Ht>>>0,Zt>>>0,Zt+ln>>>0)},G:function(Ht){var Zt=Mt.length;if(4294901760<(Ht>>>=0))return!1;for(var ln=1;4>=ln;ln*=2){var dn=Zt*(1+.2/ln);dn=Math.min(dn,Ht+100663296);var xn=Math;dn=Math.max(Ht,dn),xn=xn.min.call(xn,4294901760,dn+(65536-dn%65536)%65536);e:{try{Et.grow(xn-St.byteLength+65535>>>16),sn();var wn=1;break e}catch{}wn=void 0}if(wn)return!0}return!1},va:function(Ht,Zt){var ln=0;return bn().forEach(function(dn,xn){var wn=Zt+ln;for(xn=Dt[Ht+4*xn>>2>>>0]=wn,wn=0;wn<dn.length;++wn)Pt[xn++>>0>>>0]=dn.charCodeAt(wn);Pt[xn>>0>>>0]=0,ln+=dn.length+1}),0},wa:function(Ht,Zt){var ln=bn();Dt[Ht>>2>>>0]=ln.length;var dn=0;return ln.forEach(function(xn){dn+=xn.length+1}),Dt[Zt>>2>>>0]=dn,0},ba:function(Ht){gt||0<hn||(js(),Pn(tn),Ao(0),In[1].length&&Un(1,10),In[2].length&&Un(2,10)),gt||0<hn||(b.onExit&&b.onExit(Ht),Tt=!0),at(Ht,new Wn(Ht))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Ht,Zt,ln,dn){for(var xn=0,wn=0;wn<ln;wn++){var an=Dt[Zt>>2>>>0],jn=Dt[Zt+4>>2>>>0];Zt+=8;for(var Rn=0;Rn<jn;Rn++)Un(Ht,Mt[an+Rn>>>0]);xn+=jn}return Dt[dn>>2>>>0]=xn,0},c:function(){return Vn},ja:function Ht(Zt,ln){Ht.Mb||(Ht.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var xn=new Uint8Array(1);return()=>(crypto.getRandomValues(xn),xn[0])}if(ht)try{var wn=c(Object(function(){var an=new Error("Cannot find module 'crypto'");throw an.code="MODULE_NOT_FOUND",an}()));return()=>wn.randomBytes(1)[0]}catch{}return()=>un("randomDevice")}());for(var dn=0;dn<ln;dn++)Pt[Zt+dn>>0>>>0]=Ht.Mb();return 0},ea:function(Ht,Zt,ln){var dn=Zn();try{return yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},fa:function(Ht,Zt,ln){var dn=Zn();try{return yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},J:function(Ht){var Zt=Zn();try{return yn(Ht)()}catch(ln){if(Nn(Zt),ln!==ln+0)throw ln;Xn(1,0)}},e:function(Ht,Zt){var ln=Zn();try{return yn(Ht)(Zt)}catch(dn){if(Nn(ln),dn!==dn+0)throw dn;Xn(1,0)}},N:function(Ht,Zt,ln){var dn=Zn();try{return yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},O:function(Ht,Zt,ln){var dn=Zn();try{return yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},j:function(Ht,Zt,ln){var dn=Zn();try{return yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},o:function(Ht,Zt,ln,dn){var xn=Zn();try{return yn(Ht)(Zt,ln,dn)}catch(wn){if(Nn(xn),wn!==wn+0)throw wn;Xn(1,0)}},p:function(Ht,Zt,ln,dn,xn){var wn=Zn();try{return yn(Ht)(Zt,ln,dn,xn)}catch(an){if(Nn(wn),an!==an+0)throw an;Xn(1,0)}},M:function(Ht,Zt,ln,dn,xn,wn){var an=Zn();try{return yn(Ht)(Zt,ln,dn,xn,wn)}catch(jn){if(Nn(an),jn!==jn+0)throw jn;Xn(1,0)}},r:function(Ht,Zt,ln,dn,xn,wn){var an=Zn();try{return yn(Ht)(Zt,ln,dn,xn,wn)}catch(jn){if(Nn(an),jn!==jn+0)throw jn;Xn(1,0)}},v:function(Ht,Zt,ln,dn,xn,wn,an){var jn=Zn();try{return yn(Ht)(Zt,ln,dn,xn,wn,an)}catch(Rn){if(Nn(jn),Rn!==Rn+0)throw Rn;Xn(1,0)}},K:function(Ht,Zt,ln,dn,xn,wn,an,jn){var Rn=Zn();try{return yn(Ht)(Zt,ln,dn,xn,wn,an,jn)}catch(qn){if(Nn(Rn),qn!==qn+0)throw qn;Xn(1,0)}},D:function(Ht,Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar){var wr=Zn();try{return yn(Ht)(Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar)}catch(En){if(Nn(wr),En!==En+0)throw En;Xn(1,0)}},X:function(Ht,Zt,ln,dn,xn,wn,an,jn){var Rn=Zn();try{return Il(Ht,Zt,ln,dn,xn,wn,an,jn)}catch(qn){if(Nn(Rn),qn!==qn+0)throw qn;Xn(1,0)}},V:function(Ht,Zt,ln,dn,xn,wn,an){var jn=Zn();try{return ts(Ht,Zt,ln,dn,xn,wn,an)}catch(Rn){if(Nn(jn),Rn!==Rn+0)throw Rn;Xn(1,0)}},U:function(Ht,Zt,ln,dn,xn){var wn=Zn();try{return Ol(Ht,Zt,ln,dn,xn)}catch(an){if(Nn(wn),an!==an+0)throw an;Xn(1,0)}},Z:function(Ht,Zt,ln,dn){var xn=Zn();try{return Bs(Ht,Zt,ln,dn)}catch(wn){if(Nn(xn),wn!==wn+0)throw wn;Xn(1,0)}},W:function(Ht){var Zt=Zn();try{return Lr(Ht)}catch(ln){if(Nn(Zt),ln!==ln+0)throw ln;Xn(1,0)}},Y:function(Ht,Zt){var ln=Zn();try{return Ro(Ht,Zt)}catch(dn){if(Nn(ln),dn!==dn+0)throw dn;Xn(1,0)}},T:function(Ht,Zt,ln){var dn=Zn();try{return Vr(Ht,Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},f:function(Ht){var Zt=Zn();try{yn(Ht)()}catch(ln){if(Nn(Zt),ln!==ln+0)throw ln;Xn(1,0)}},q:function(Ht,Zt){var ln=Zn();try{yn(Ht)(Zt)}catch(dn){if(Nn(ln),dn!==dn+0)throw dn;Xn(1,0)}},h:function(Ht,Zt,ln){var dn=Zn();try{yn(Ht)(Zt,ln)}catch(xn){if(Nn(dn),xn!==xn+0)throw xn;Xn(1,0)}},da:function(Ht,Zt,ln,dn){var xn=Zn();try{yn(Ht)(Zt,ln,dn)}catch(wn){if(Nn(xn),wn!==wn+0)throw wn;Xn(1,0)}},l:function(Ht,Zt,ln,dn){var xn=Zn();try{yn(Ht)(Zt,ln,dn)}catch(wn){if(Nn(xn),wn!==wn+0)throw wn;Xn(1,0)}},t:function(Ht,Zt,ln,dn,xn){var wn=Zn();try{yn(Ht)(Zt,ln,dn,xn)}catch(an){if(Nn(wn),an!==an+0)throw an;Xn(1,0)}},u:function(Ht,Zt,ln,dn,xn,wn){var an=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn)}catch(jn){if(Nn(an),jn!==jn+0)throw jn;Xn(1,0)}},x:function(Ht,Zt,ln,dn,xn,wn,an){var jn=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn,an)}catch(Rn){if(Nn(jn),Rn!==Rn+0)throw Rn;Xn(1,0)}},z:function(Ht,Zt,ln,dn,xn,wn,an,jn){var Rn=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn,an,jn)}catch(qn){if(Nn(Rn),qn!==qn+0)throw qn;Xn(1,0)}},ga:function(Ht,Zt,ln,dn,xn,wn,an,jn,Rn){var qn=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn,an,jn,Rn)}catch(rr){if(Nn(qn),rr!==rr+0)throw rr;Xn(1,0)}},A:function(Ht,Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr){var ar=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr)}catch(wr){if(Nn(ar),wr!==wr+0)throw wr;Xn(1,0)}},C:function(Ht,Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar,wr,En,dr,Sr){var Hr=Zn();try{yn(Ht)(Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar,wr,En,dr,Sr)}catch(co){if(Nn(Hr),co!==co+0)throw co;Xn(1,0)}},aa:function(Ht,Zt,ln,dn,xn,wn,an,jn){var Rn=Zn();try{$r(Ht,Zt,ln,dn,xn,wn,an,jn)}catch(qn){if(Nn(Rn),qn!==qn+0)throw qn;Xn(1,0)}},_:function(Ht,Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar){var wr=Zn();try{_o(Ht,Zt,ln,dn,xn,wn,an,jn,Rn,qn,rr,ar)}catch(En){if(Nn(wr),En!==En+0)throw En;Xn(1,0)}},$:function(Ht,Zt,ln,dn,xn,wn){var an=Zn();try{Jr(Ht,Zt,ln,dn,xn,wn)}catch(jn){if(Nn(an),jn!==jn+0)throw jn;Xn(1,0)}},n:function(Ht){return Ht},F:function(Ht){Vn=Ht},ha:Gn,y:function(Ht,Zt,ln,dn){return Gn(Ht,Zt,ln,dn)}};(function(){function Ht(xn){b.asm=xn.exports,Et=b.asm.Ka,sn(),kt=b.asm.ib,Jt.unshift(b.asm.La),kn--,b.monitorRunDependencies&&b.monitorRunDependencies(kn),kn==0&&On&&(xn=On,On=null,xn())}function Zt(xn){Ht(xn.instance)}function ln(xn){return function(){if(!ft&&(ct||dt)){if(typeof fetch=="function"&&!gn.startsWith("file://"))return fetch(gn,{credentials:"same-origin"}).then(function(wn){if(!wn.ok)throw"failed to load wasm binary file at '"+gn+"'";return wn.arrayBuffer()}).catch(function(){return $n()});if(st)return new Promise(function(wn,an){st(gn,function(jn){wn(new Uint8Array(jn))},an)})}return Promise.resolve().then(function(){return $n()})}().then(function(wn){return WebAssembly.instantiate(wn,dn)}).then(function(wn){return wn}).then(xn,function(wn){xt("failed to asynchronously prepare wasm: "+wn),un(wn)})}var dn={a:Cr};if(kn++,b.monitorRunDependencies&&b.monitorRunDependencies(kn),b.instantiateWasm)try{return b.instantiateWasm(dn,Ht)}catch(xn){return xt("Module.instantiateWasm callback failed with error: "+xn),!1}(ft||typeof WebAssembly.instantiateStreaming!="function"||Sn()||gn.startsWith("file://")||ht||typeof fetch!="function"?ln(Zt):fetch(gn,{credentials:"same-origin"}).then(function(xn){return WebAssembly.instantiateStreaming(xn,dn).then(Zt,function(wn){return xt("wasm streaming compile failed: "+wn),xt("falling back to ArrayBuffer instantiation"),ln(Zt)})})).catch(et)})(),b.___wasm_call_ctors=function(){return(b.___wasm_call_ctors=b.asm.La).apply(null,arguments)},b._OrtInit=function(){return(b._OrtInit=b.asm.Ma).apply(null,arguments)},b._OrtCreateSessionOptions=function(){return(b._OrtCreateSessionOptions=b.asm.Na).apply(null,arguments)},b._OrtAppendExecutionProvider=function(){return(b._OrtAppendExecutionProvider=b.asm.Oa).apply(null,arguments)},b._OrtAddSessionConfigEntry=function(){return(b._OrtAddSessionConfigEntry=b.asm.Pa).apply(null,arguments)},b._OrtReleaseSessionOptions=function(){return(b._OrtReleaseSessionOptions=b.asm.Qa).apply(null,arguments)},b._OrtCreateSession=function(){return(b._OrtCreateSession=b.asm.Ra).apply(null,arguments)},b._OrtReleaseSession=function(){return(b._OrtReleaseSession=b.asm.Sa).apply(null,arguments)},b._OrtGetInputCount=function(){return(b._OrtGetInputCount=b.asm.Ta).apply(null,arguments)},b._OrtGetOutputCount=function(){return(b._OrtGetOutputCount=b.asm.Ua).apply(null,arguments)},b._OrtGetInputName=function(){return(b._OrtGetInputName=b.asm.Va).apply(null,arguments)},b._OrtGetOutputName=function(){return(b._OrtGetOutputName=b.asm.Wa).apply(null,arguments)},b._OrtFree=function(){return(b._OrtFree=b.asm.Xa).apply(null,arguments)},b._OrtCreateTensor=function(){return(b._OrtCreateTensor=b.asm.Ya).apply(null,arguments)},b._OrtGetTensorData=function(){return(b._OrtGetTensorData=b.asm.Za).apply(null,arguments)},b._OrtReleaseTensor=function(){return(b._OrtReleaseTensor=b.asm._a).apply(null,arguments)},b._OrtCreateRunOptions=function(){return(b._OrtCreateRunOptions=b.asm.$a).apply(null,arguments)},b._OrtAddRunConfigEntry=function(){return(b._OrtAddRunConfigEntry=b.asm.ab).apply(null,arguments)},b._OrtReleaseRunOptions=function(){return(b._OrtReleaseRunOptions=b.asm.bb).apply(null,arguments)},b._OrtRun=function(){return(b._OrtRun=b.asm.cb).apply(null,arguments)},b._OrtEndProfiling=function(){return(b._OrtEndProfiling=b.asm.db).apply(null,arguments)};var kr,mr=b._malloc=function(){return(mr=b._malloc=b.asm.eb).apply(null,arguments)},Fs=b._free=function(){return(Fs=b._free=b.asm.fb).apply(null,arguments)},Ao=b._fflush=function(){return(Ao=b._fflush=b.asm.gb).apply(null,arguments)},js=b.___funcs_on_exit=function(){return(js=b.___funcs_on_exit=b.asm.hb).apply(null,arguments)},Xn=b._setThrew=function(){return(Xn=b._setThrew=b.asm.jb).apply(null,arguments)},Zn=b.stackSave=function(){return(Zn=b.stackSave=b.asm.kb).apply(null,arguments)},Nn=b.stackRestore=function(){return(Nn=b.stackRestore=b.asm.lb).apply(null,arguments)},pr=b.stackAlloc=function(){return(pr=b.stackAlloc=b.asm.mb).apply(null,arguments)},yr=b.___cxa_can_catch=function(){return(yr=b.___cxa_can_catch=b.asm.nb).apply(null,arguments)},zr=b.___cxa_is_pointer_type=function(){return(zr=b.___cxa_is_pointer_type=b.asm.ob).apply(null,arguments)},Lr=b.dynCall_j=function(){return(Lr=b.dynCall_j=b.asm.pb).apply(null,arguments)},ts=b.dynCall_iiiiij=function(){return(ts=b.dynCall_iiiiij=b.asm.qb).apply(null,arguments)},Vr=b.dynCall_jii=function(){return(Vr=b.dynCall_jii=b.asm.rb).apply(null,arguments)},$r=b.dynCall_viiiiij=function(){return($r=b.dynCall_viiiiij=b.asm.sb).apply(null,arguments)},Jr=b.dynCall_vjji=function(){return(Jr=b.dynCall_vjji=b.asm.tb).apply(null,arguments)},_o=b.dynCall_viiijjjii=function(){return(_o=b.dynCall_viiijjjii=b.asm.ub).apply(null,arguments)},Bs=b.dynCall_iij=function(){return(Bs=b.dynCall_iij=b.asm.vb).apply(null,arguments)},Ro=b.dynCall_ji=function(){return(Ro=b.dynCall_ji=b.asm.wb).apply(null,arguments)},Il=b.dynCall_iiiiiij=function(){return(Il=b.dynCall_iiiiiij=b.asm.xb).apply(null,arguments)},Ol=b.dynCall_iiij=function(){return(Ol=b.dynCall_iiij=b.asm.yb).apply(null,arguments)};function Dl(){function Ht(){if(!kr&&(kr=!0,b.calledRun=!0,!Tt)){if(Pn(Jt),_e(b),b.onRuntimeInitialized&&b.onRuntimeInitialized(),b.postRun)for(typeof b.postRun=="function"&&(b.postRun=[b.postRun]);b.postRun.length;){var Zt=b.postRun.shift();Gt.unshift(Zt)}Pn(Gt)}}if(!(0<kn)){if(b.preRun)for(typeof b.preRun=="function"&&(b.preRun=[b.preRun]);b.preRun.length;)fn();Pn(Ut),0<kn||(b.setStatus?(b.setStatus("Running..."),setTimeout(function(){setTimeout(function(){b.setStatus("")},1),Ht()},1)):Ht())}}if(b.UTF8ToString=Bt,b.stringToUTF8=function(Ht,Zt,ln){return Ct(Ht,Mt,Zt,ln)},b.lengthBytesUTF8=en,b.stackSave=Zn,b.stackRestore=Nn,b.stackAlloc=pr,On=function Ht(){kr||Dl(),kr||(On=Ht)},b.preInit)for(typeof b.preInit=="function"&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();return Dl(),g.ready});a.exports=h},4537:a=>{a.exports=function(e,c){for(var d=new Array(arguments.length-1),h=0,g=2,b=!0;g<arguments.length;)d[h++]=arguments[g++];return new Promise(function(_e,et){d[h]=function(rt){if(b)if(b=!1,rt)et(rt);else{for(var st=new Array(arguments.length-1),$=0;$<st.length;)st[$++]=arguments[$];_e.apply(null,st)}};try{e.apply(c||null,d)}catch(rt){b&&(b=!1,et(rt))}})}},7419:(a,e)=>{var c=e;c.length=function(_e){var et=_e.length;if(!et)return 0;for(var rt=0;--et%4>1&&_e.charAt(et)==="=";)++rt;return Math.ceil(3*_e.length)/4-rt};for(var d=new Array(64),h=new Array(123),g=0;g<64;)h[d[g]=g<26?g+65:g<52?g+71:g<62?g-4:g-59|43]=g++;c.encode=function(_e,et,rt){for(var st,$=null,_=[],nt=0,it=0;et<rt;){var ot=_e[et++];switch(it){case 0:_[nt++]=d[ot>>2],st=(3&ot)<<4,it=1;break;case 1:_[nt++]=d[st|ot>>4],st=(15&ot)<<2,it=2;break;case 2:_[nt++]=d[st|ot>>6],_[nt++]=d[63&ot],it=0}nt>8191&&(($||($=[])).push(String.fromCharCode.apply(String,_)),nt=0)}return it&&(_[nt++]=d[st],_[nt++]=61,it===1&&(_[nt++]=61)),$?(nt&&$.push(String.fromCharCode.apply(String,_.slice(0,nt))),$.join("")):String.fromCharCode.apply(String,_.slice(0,nt))};var b="invalid encoding";c.decode=function(_e,et,rt){for(var st,$=rt,_=0,nt=0;nt<_e.length;){var it=_e.charCodeAt(nt++);if(it===61&&_>1)break;if((it=h[it])===void 0)throw Error(b);switch(_){case 0:st=it,_=1;break;case 1:et[rt++]=st<<2|(48&it)>>4,st=it,_=2;break;case 2:et[rt++]=(15&st)<<4|(60&it)>>2,st=it,_=3;break;case 3:et[rt++]=(3&st)<<6|it,_=0}}if(_===1)throw Error(b);return rt-$},c.test=function(_e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(_e)}},9211:a=>{function e(){this._listeners={}}a.exports=e,e.prototype.on=function(c,d,h){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:d,ctx:h||this}),this},e.prototype.off=function(c,d){if(c===void 0)this._listeners={};else if(d===void 0)this._listeners[c]=[];else for(var h=this._listeners[c],g=0;g<h.length;)h[g].fn===d?h.splice(g,1):++g;return this},e.prototype.emit=function(c){var d=this._listeners[c];if(d){for(var h=[],g=1;g<arguments.length;)h.push(arguments[g++]);for(g=0;g<d.length;)d[g].fn.apply(d[g++].ctx,h)}return this}},945:a=>{function e(b){return typeof Float32Array<"u"?function(){var _e=new Float32Array([-0]),et=new Uint8Array(_e.buffer),rt=et[3]===128;function st(it,ot,lt){_e[0]=it,ot[lt]=et[0],ot[lt+1]=et[1],ot[lt+2]=et[2],ot[lt+3]=et[3]}function $(it,ot,lt){_e[0]=it,ot[lt]=et[3],ot[lt+1]=et[2],ot[lt+2]=et[1],ot[lt+3]=et[0]}function _(it,ot){return et[0]=it[ot],et[1]=it[ot+1],et[2]=it[ot+2],et[3]=it[ot+3],_e[0]}function nt(it,ot){return et[3]=it[ot],et[2]=it[ot+1],et[1]=it[ot+2],et[0]=it[ot+3],_e[0]}b.writeFloatLE=rt?st:$,b.writeFloatBE=rt?$:st,b.readFloatLE=rt?_:nt,b.readFloatBE=rt?nt:_}():function(){function _e(rt,st,$,_){var nt=st<0?1:0;if(nt&&(st=-st),st===0)rt(1/st>0?0:2147483648,$,_);else if(isNaN(st))rt(2143289344,$,_);else if(st>34028234663852886e22)rt((nt<<31|2139095040)>>>0,$,_);else if(st<11754943508222875e-54)rt((nt<<31|Math.round(st/1401298464324817e-60))>>>0,$,_);else{var it=Math.floor(Math.log(st)/Math.LN2);rt((nt<<31|it+127<<23|8388607&Math.round(st*Math.pow(2,-it)*8388608))>>>0,$,_)}}function et(rt,st,$){var _=rt(st,$),nt=2*(_>>31)+1,it=_>>>23&255,ot=8388607&_;return it===255?ot?NaN:nt*(1/0):it===0?1401298464324817e-60*nt*ot:nt*Math.pow(2,it-150)*(ot+8388608)}b.writeFloatLE=_e.bind(null,c),b.writeFloatBE=_e.bind(null,d),b.readFloatLE=et.bind(null,h),b.readFloatBE=et.bind(null,g)}(),typeof Float64Array<"u"?function(){var _e=new Float64Array([-0]),et=new Uint8Array(_e.buffer),rt=et[7]===128;function st(it,ot,lt){_e[0]=it,ot[lt]=et[0],ot[lt+1]=et[1],ot[lt+2]=et[2],ot[lt+3]=et[3],ot[lt+4]=et[4],ot[lt+5]=et[5],ot[lt+6]=et[6],ot[lt+7]=et[7]}function $(it,ot,lt){_e[0]=it,ot[lt]=et[7],ot[lt+1]=et[6],ot[lt+2]=et[5],ot[lt+3]=et[4],ot[lt+4]=et[3],ot[lt+5]=et[2],ot[lt+6]=et[1],ot[lt+7]=et[0]}function _(it,ot){return et[0]=it[ot],et[1]=it[ot+1],et[2]=it[ot+2],et[3]=it[ot+3],et[4]=it[ot+4],et[5]=it[ot+5],et[6]=it[ot+6],et[7]=it[ot+7],_e[0]}function nt(it,ot){return et[7]=it[ot],et[6]=it[ot+1],et[5]=it[ot+2],et[4]=it[ot+3],et[3]=it[ot+4],et[2]=it[ot+5],et[1]=it[ot+6],et[0]=it[ot+7],_e[0]}b.writeDoubleLE=rt?st:$,b.writeDoubleBE=rt?$:st,b.readDoubleLE=rt?_:nt,b.readDoubleBE=rt?nt:_}():function(){function _e(rt,st,$,_,nt,it){var ot=_<0?1:0;if(ot&&(_=-_),_===0)rt(0,nt,it+st),rt(1/_>0?0:2147483648,nt,it+$);else if(isNaN(_))rt(0,nt,it+st),rt(2146959360,nt,it+$);else if(_>17976931348623157e292)rt(0,nt,it+st),rt((ot<<31|2146435072)>>>0,nt,it+$);else{var lt;if(_<22250738585072014e-324)rt((lt=_/5e-324)>>>0,nt,it+st),rt((ot<<31|lt/4294967296)>>>0,nt,it+$);else{var at=Math.floor(Math.log(_)/Math.LN2);at===1024&&(at=1023),rt(4503599627370496*(lt=_*Math.pow(2,-at))>>>0,nt,it+st),rt((ot<<31|at+1023<<20|1048576*lt&1048575)>>>0,nt,it+$)}}}function et(rt,st,$,_,nt){var it=rt(_,nt+st),ot=rt(_,nt+$),lt=2*(ot>>31)+1,at=ot>>>20&2047,ct=4294967296*(1048575&ot)+it;return at===2047?ct?NaN:lt*(1/0):at===0?5e-324*lt*ct:lt*Math.pow(2,at-1075)*(ct+4503599627370496)}b.writeDoubleLE=_e.bind(null,c,0,4),b.writeDoubleBE=_e.bind(null,d,4,0),b.readDoubleLE=et.bind(null,h,0,4),b.readDoubleBE=et.bind(null,g,4,0)}(),b}function c(b,_e,et){_e[et]=255&b,_e[et+1]=b>>>8&255,_e[et+2]=b>>>16&255,_e[et+3]=b>>>24}function d(b,_e,et){_e[et]=b>>>24,_e[et+1]=b>>>16&255,_e[et+2]=b>>>8&255,_e[et+3]=255&b}function h(b,_e){return(b[_e]|b[_e+1]<<8|b[_e+2]<<16|b[_e+3]<<24)>>>0}function g(b,_e){return(b[_e]<<24|b[_e+1]<<16|b[_e+2]<<8|b[_e+3])>>>0}a.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}module.exports=inquire},6662:a=>{a.exports=function(e,c,d){var h=d||8192,g=h>>>1,b=null,_e=h;return function(et){if(et<1||et>g)return e(et);_e+et>h&&(b=e(h),_e=0);var rt=c.call(b,_e,_e+=et);return 7&_e&&(_e=1+(7|_e)),rt}}},4997:(a,e)=>{var c=e;c.length=function(d){for(var h=0,g=0,b=0;b<d.length;++b)(g=d.charCodeAt(b))<128?h+=1:g<2048?h+=2:(64512&g)==55296&&(64512&d.charCodeAt(b+1))==56320?(++b,h+=4):h+=3;return h},c.read=function(d,h,g){if(g-h<1)return"";for(var b,_e=null,et=[],rt=0;h<g;)(b=d[h++])<128?et[rt++]=b:b>191&&b<224?et[rt++]=(31&b)<<6|63&d[h++]:b>239&&b<365?(b=((7&b)<<18|(63&d[h++])<<12|(63&d[h++])<<6|63&d[h++])-65536,et[rt++]=55296+(b>>10),et[rt++]=56320+(1023&b)):et[rt++]=(15&b)<<12|(63&d[h++])<<6|63&d[h++],rt>8191&&((_e||(_e=[])).push(String.fromCharCode.apply(String,et)),rt=0);return _e?(rt&&_e.push(String.fromCharCode.apply(String,et.slice(0,rt))),_e.join("")):String.fromCharCode.apply(String,et.slice(0,rt))},c.write=function(d,h,g){for(var b,_e,et=g,rt=0;rt<d.length;++rt)(b=d.charCodeAt(rt))<128?h[g++]=b:b<2048?(h[g++]=b>>6|192,h[g++]=63&b|128):(64512&b)==55296&&(64512&(_e=d.charCodeAt(rt+1)))==56320?(b=65536+((1023&b)<<10)+(1023&_e),++rt,h[g++]=b>>18|240,h[g++]=b>>12&63|128,h[g++]=b>>6&63|128,h[g++]=63&b|128):(h[g++]=b>>12|224,h[g++]=b>>6&63|128,h[g++]=63&b|128);return g-et}},3442:(a,e)=>{e.__esModule=!0;var c=function(){function d(h){if(!h)throw new TypeError("Invalid argument; `value` has no value.");this.value=d.EMPTY,h&&d.isGuid(h)&&(this.value=h)}return d.isGuid=function(h){var g=h.toString();return h&&(h instanceof d||d.validator.test(g))},d.create=function(){return new d([d.gen(2),d.gen(1),d.gen(1),d.gen(1),d.gen(3)].join("-"))},d.createEmpty=function(){return new d("emptyguid")},d.parse=function(h){return new d(h)},d.raw=function(){return[d.gen(2),d.gen(1),d.gen(1),d.gen(1),d.gen(3)].join("-")},d.gen=function(h){for(var g="",b=0;b<h;b++)g+=(65536*(1+Math.random())|0).toString(16).substring(1);return g},d.prototype.equals=function(h){return d.isGuid(h)&&this.value===h.toString()},d.prototype.isEmpty=function(){return this.value===d.EMPTY},d.prototype.toString=function(){return this.value},d.prototype.toJSON=function(){return{value:this.value}},d.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),d.EMPTY="00000000-0000-0000-0000-000000000000",d}();e.Guid=c},3720:a=>{a.exports=c;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function c(gt,Et,St){this.low=0|gt,this.high=0|Et,this.unsigned=!!St}function d(gt){return(gt&&gt.__isLong__)===!0}c.prototype.__isLong__,Object.defineProperty(c.prototype,"__isLong__",{value:!0}),c.isLong=d;var h={},g={};function b(gt,Et){var St,Pt,Mt;return Et?(Mt=0<=(gt>>>=0)&&gt<256)&&(Pt=g[gt])?Pt:(St=et(gt,(0|gt)<0?-1:0,!0),Mt&&(g[gt]=St),St):(Mt=-128<=(gt|=0)&&gt<128)&&(Pt=h[gt])?Pt:(St=et(gt,gt<0?-1:0,!1),Mt&&(h[gt]=St),St)}function _e(gt,Et){if(isNaN(gt))return Et?at:lt;if(Et){if(gt<0)return at;if(gt>=nt)return ft}else{if(gt<=-it)return mt;if(gt+1>=it)return pt}return gt<0?_e(-gt,Et).neg():et(gt%_|0,gt/_|0,Et)}function et(gt,Et,St){return new c(gt,Et,St)}c.fromInt=b,c.fromNumber=_e,c.fromBits=et;var rt=Math.pow;function st(gt,Et,St){if(gt.length===0)throw Error("empty string");if(gt==="NaN"||gt==="Infinity"||gt==="+Infinity"||gt==="-Infinity")return lt;if(typeof Et=="number"?(St=Et,Et=!1):Et=!!Et,(St=St||10)<2||36<St)throw RangeError("radix");var Pt;if((Pt=gt.indexOf("-"))>0)throw Error("interior hyphen");if(Pt===0)return st(gt.substring(1),Et,St).neg();for(var Mt=_e(rt(St,8)),Rt=lt,Dt=0;Dt<gt.length;Dt+=8){var Tt=Math.min(8,gt.length-Dt),It=parseInt(gt.substring(Dt,Dt+Tt),St);if(Tt<8){var Vt=_e(rt(St,Tt));Rt=Rt.mul(Vt).add(_e(It))}else Rt=(Rt=Rt.mul(Mt)).add(_e(It))}return Rt.unsigned=Et,Rt}function $(gt,Et){return typeof gt=="number"?_e(gt,Et):typeof gt=="string"?st(gt,Et):et(gt.low,gt.high,typeof Et=="boolean"?Et:gt.unsigned)}c.fromString=st,c.fromValue=$;var _=4294967296,nt=_*_,it=nt/2,ot=b(1<<24),lt=b(0);c.ZERO=lt;var at=b(0,!0);c.UZERO=at;var ct=b(1);c.ONE=ct;var dt=b(1,!0);c.UONE=dt;var ht=b(-1);c.NEG_ONE=ht;var pt=et(-1,2147483647,!1);c.MAX_VALUE=pt;var ft=et(-1,-1,!0);c.MAX_UNSIGNED_VALUE=ft;var mt=et(0,-2147483648,!1);c.MIN_VALUE=mt;var xt=c.prototype;xt.toInt=function(){return this.unsigned?this.low>>>0:this.low},xt.toNumber=function(){return this.unsigned?(this.high>>>0)*_+(this.low>>>0):this.high*_+(this.low>>>0)},xt.toString=function(gt){if((gt=gt||10)<2||36<gt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(mt)){var Et=_e(gt),St=this.div(Et),Pt=St.mul(Et).sub(this);return St.toString(gt)+Pt.toInt().toString(gt)}return"-"+this.neg().toString(gt)}for(var Mt=_e(rt(gt,6),this.unsigned),Rt=this,Dt="";;){var Tt=Rt.div(Mt),It=(Rt.sub(Tt.mul(Mt)).toInt()>>>0).toString(gt);if((Rt=Tt).isZero())return It+Dt;for(;It.length<6;)It="0"+It;Dt=""+It+Dt}},xt.getHighBits=function(){return this.high},xt.getHighBitsUnsigned=function(){return this.high>>>0},xt.getLowBits=function(){return this.low},xt.getLowBitsUnsigned=function(){return this.low>>>0},xt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mt)?64:this.neg().getNumBitsAbs();for(var gt=this.high!=0?this.high:this.low,Et=31;Et>0&&!(gt&1<<Et);Et--);return this.high!=0?Et+33:Et+1},xt.isZero=function(){return this.high===0&&this.low===0},xt.eqz=xt.isZero,xt.isNegative=function(){return!this.unsigned&&this.high<0},xt.isPositive=function(){return this.unsigned||this.high>=0},xt.isOdd=function(){return(1&this.low)==1},xt.isEven=function(){return(1&this.low)==0},xt.equals=function(gt){return d(gt)||(gt=$(gt)),(this.unsigned===gt.unsigned||this.high>>>31!=1||gt.high>>>31!=1)&&this.high===gt.high&&this.low===gt.low},xt.eq=xt.equals,xt.notEquals=function(gt){return!this.eq(gt)},xt.neq=xt.notEquals,xt.ne=xt.notEquals,xt.lessThan=function(gt){return this.comp(gt)<0},xt.lt=xt.lessThan,xt.lessThanOrEqual=function(gt){return this.comp(gt)<=0},xt.lte=xt.lessThanOrEqual,xt.le=xt.lessThanOrEqual,xt.greaterThan=function(gt){return this.comp(gt)>0},xt.gt=xt.greaterThan,xt.greaterThanOrEqual=function(gt){return this.comp(gt)>=0},xt.gte=xt.greaterThanOrEqual,xt.ge=xt.greaterThanOrEqual,xt.compare=function(gt){if(d(gt)||(gt=$(gt)),this.eq(gt))return 0;var Et=this.isNegative(),St=gt.isNegative();return Et&&!St?-1:!Et&&St?1:this.unsigned?gt.high>>>0>this.high>>>0||gt.high===this.high&&gt.low>>>0>this.low>>>0?-1:1:this.sub(gt).isNegative()?-1:1},xt.comp=xt.compare,xt.negate=function(){return!this.unsigned&&this.eq(mt)?mt:this.not().add(ct)},xt.neg=xt.negate,xt.add=function(gt){d(gt)||(gt=$(gt));var Et=this.high>>>16,St=65535&this.high,Pt=this.low>>>16,Mt=65535&this.low,Rt=gt.high>>>16,Dt=65535&gt.high,Tt=gt.low>>>16,It=0,Vt=0,Bt=0,Ct=0;return Bt+=(Ct+=Mt+(65535&gt.low))>>>16,Vt+=(Bt+=Pt+Tt)>>>16,It+=(Vt+=St+Dt)>>>16,It+=Et+Rt,et((Bt&=65535)<<16|(Ct&=65535),(It&=65535)<<16|(Vt&=65535),this.unsigned)},xt.subtract=function(gt){return d(gt)||(gt=$(gt)),this.add(gt.neg())},xt.sub=xt.subtract,xt.multiply=function(gt){if(this.isZero())return lt;if(d(gt)||(gt=$(gt)),e)return et(e.mul(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned);if(gt.isZero())return lt;if(this.eq(mt))return gt.isOdd()?mt:lt;if(gt.eq(mt))return this.isOdd()?mt:lt;if(this.isNegative())return gt.isNegative()?this.neg().mul(gt.neg()):this.neg().mul(gt).neg();if(gt.isNegative())return this.mul(gt.neg()).neg();if(this.lt(ot)&&gt.lt(ot))return _e(this.toNumber()*gt.toNumber(),this.unsigned);var Et=this.high>>>16,St=65535&this.high,Pt=this.low>>>16,Mt=65535&this.low,Rt=gt.high>>>16,Dt=65535&gt.high,Tt=gt.low>>>16,It=65535&gt.low,Vt=0,Bt=0,Ct=0,en=0;return Ct+=(en+=Mt*It)>>>16,Bt+=(Ct+=Pt*It)>>>16,Ct&=65535,Bt+=(Ct+=Mt*Tt)>>>16,Vt+=(Bt+=St*It)>>>16,Bt&=65535,Vt+=(Bt+=Pt*Tt)>>>16,Bt&=65535,Vt+=(Bt+=Mt*Dt)>>>16,Vt+=Et*It+St*Tt+Pt*Dt+Mt*Rt,et((Ct&=65535)<<16|(en&=65535),(Vt&=65535)<<16|(Bt&=65535),this.unsigned)},xt.mul=xt.multiply,xt.divide=function(gt){if(d(gt)||(gt=$(gt)),gt.isZero())throw Error("division by zero");var Et,St,Pt;if(e)return this.unsigned||this.high!==-2147483648||gt.low!==-1||gt.high!==-1?et((this.unsigned?e.div_u:e.div_s)(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?at:lt;if(this.unsigned){if(gt.unsigned||(gt=gt.toUnsigned()),gt.gt(this))return at;if(gt.gt(this.shru(1)))return dt;Pt=at}else{if(this.eq(mt))return gt.eq(ct)||gt.eq(ht)?mt:gt.eq(mt)?ct:(Et=this.shr(1).div(gt).shl(1)).eq(lt)?gt.isNegative()?ct:ht:(St=this.sub(gt.mul(Et)),Pt=Et.add(St.div(gt)));if(gt.eq(mt))return this.unsigned?at:lt;if(this.isNegative())return gt.isNegative()?this.neg().div(gt.neg()):this.neg().div(gt).neg();if(gt.isNegative())return this.div(gt.neg()).neg();Pt=lt}for(St=this;St.gte(gt);){Et=Math.max(1,Math.floor(St.toNumber()/gt.toNumber()));for(var Mt=Math.ceil(Math.log(Et)/Math.LN2),Rt=Mt<=48?1:rt(2,Mt-48),Dt=_e(Et),Tt=Dt.mul(gt);Tt.isNegative()||Tt.gt(St);)Tt=(Dt=_e(Et-=Rt,this.unsigned)).mul(gt);Dt.isZero()&&(Dt=ct),Pt=Pt.add(Dt),St=St.sub(Tt)}return Pt},xt.div=xt.divide,xt.modulo=function(gt){return d(gt)||(gt=$(gt)),e?et((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,gt.low,gt.high),e.get_high(),this.unsigned):this.sub(this.div(gt).mul(gt))},xt.mod=xt.modulo,xt.rem=xt.modulo,xt.not=function(){return et(~this.low,~this.high,this.unsigned)},xt.and=function(gt){return d(gt)||(gt=$(gt)),et(this.low&gt.low,this.high&gt.high,this.unsigned)},xt.or=function(gt){return d(gt)||(gt=$(gt)),et(this.low|gt.low,this.high|gt.high,this.unsigned)},xt.xor=function(gt){return d(gt)||(gt=$(gt)),et(this.low^gt.low,this.high^gt.high,this.unsigned)},xt.shiftLeft=function(gt){return d(gt)&&(gt=gt.toInt()),(gt&=63)==0?this:gt<32?et(this.low<<gt,this.high<<gt|this.low>>>32-gt,this.unsigned):et(0,this.low<<gt-32,this.unsigned)},xt.shl=xt.shiftLeft,xt.shiftRight=function(gt){return d(gt)&&(gt=gt.toInt()),(gt&=63)==0?this:gt<32?et(this.low>>>gt|this.high<<32-gt,this.high>>gt,this.unsigned):et(this.high>>gt-32,this.high>=0?0:-1,this.unsigned)},xt.shr=xt.shiftRight,xt.shiftRightUnsigned=function(gt){if(d(gt)&&(gt=gt.toInt()),(gt&=63)==0)return this;var Et=this.high;return gt<32?et(this.low>>>gt|Et<<32-gt,Et>>>gt,this.unsigned):et(gt===32?Et:Et>>>gt-32,0,this.unsigned)},xt.shru=xt.shiftRightUnsigned,xt.shr_u=xt.shiftRightUnsigned,xt.toSigned=function(){return this.unsigned?et(this.low,this.high,!1):this},xt.toUnsigned=function(){return this.unsigned?this:et(this.low,this.high,!0)},xt.toBytes=function(gt){return gt?this.toBytesLE():this.toBytesBE()},xt.toBytesLE=function(){var gt=this.high,Et=this.low;return[255&Et,Et>>>8&255,Et>>>16&255,Et>>>24,255&gt,gt>>>8&255,gt>>>16&255,gt>>>24]},xt.toBytesBE=function(){var gt=this.high,Et=this.low;return[gt>>>24,gt>>>16&255,gt>>>8&255,255&gt,Et>>>24,Et>>>16&255,Et>>>8&255,255&Et]},c.fromBytes=function(gt,Et,St){return St?c.fromBytesLE(gt,Et):c.fromBytesBE(gt,Et)},c.fromBytesLE=function(gt,Et){return new c(gt[0]|gt[1]<<8|gt[2]<<16|gt[3]<<24,gt[4]|gt[5]<<8|gt[6]<<16|gt[7]<<24,Et)},c.fromBytesBE=function(gt,Et){return new c(gt[4]<<24|gt[5]<<16|gt[6]<<8|gt[7],gt[0]<<24|gt[1]<<16|gt[2]<<8|gt[3],Et)}},1446:(a,e,c)=>{var d,h,g,b=c(2100),_e=b.Reader,et=b.Writer,rt=b.util,st=b.roots.default||(b.roots.default={});st.onnx=((g={}).Version=(d={},(h=Object.create(d))[d[0]="_START_VERSION"]=0,h[d[1]="IR_VERSION_2017_10_10"]=1,h[d[2]="IR_VERSION_2017_10_30"]=2,h[d[3]="IR_VERSION_2017_11_3"]=3,h[d[4]="IR_VERSION_2019_1_22"]=4,h[d[5]="IR_VERSION"]=5,h),g.AttributeProto=function(){function $(_){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.name="",$.prototype.refAttrName="",$.prototype.docString="",$.prototype.type=0,$.prototype.f=0,$.prototype.i=rt.Long?rt.Long.fromBits(0,0,!1):0,$.prototype.s=rt.newBuffer([]),$.prototype.t=null,$.prototype.g=null,$.prototype.floats=rt.emptyArray,$.prototype.ints=rt.emptyArray,$.prototype.strings=rt.emptyArray,$.prototype.tensors=rt.emptyArray,$.prototype.graphs=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.name!=null&&_.hasOwnProperty("name")&&nt.uint32(10).string(_.name),_.f!=null&&_.hasOwnProperty("f")&&nt.uint32(21).float(_.f),_.i!=null&&_.hasOwnProperty("i")&&nt.uint32(24).int64(_.i),_.s!=null&&_.hasOwnProperty("s")&&nt.uint32(34).bytes(_.s),_.t!=null&&_.hasOwnProperty("t")&&st.onnx.TensorProto.encode(_.t,nt.uint32(42).fork()).ldelim(),_.g!=null&&_.hasOwnProperty("g")&&st.onnx.GraphProto.encode(_.g,nt.uint32(50).fork()).ldelim(),_.floats!=null&&_.floats.length){nt.uint32(58).fork();for(var it=0;it<_.floats.length;++it)nt.float(_.floats[it]);nt.ldelim()}if(_.ints!=null&&_.ints.length){for(nt.uint32(66).fork(),it=0;it<_.ints.length;++it)nt.int64(_.ints[it]);nt.ldelim()}if(_.strings!=null&&_.strings.length)for(it=0;it<_.strings.length;++it)nt.uint32(74).bytes(_.strings[it]);if(_.tensors!=null&&_.tensors.length)for(it=0;it<_.tensors.length;++it)st.onnx.TensorProto.encode(_.tensors[it],nt.uint32(82).fork()).ldelim();if(_.graphs!=null&&_.graphs.length)for(it=0;it<_.graphs.length;++it)st.onnx.GraphProto.encode(_.graphs[it],nt.uint32(90).fork()).ldelim();return _.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(106).string(_.docString),_.type!=null&&_.hasOwnProperty("type")&&nt.uint32(160).int32(_.type),_.refAttrName!=null&&_.hasOwnProperty("refAttrName")&&nt.uint32(170).string(_.refAttrName),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.AttributeProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.name=_.string();break;case 21:ot.refAttrName=_.string();break;case 13:ot.docString=_.string();break;case 20:ot.type=_.int32();break;case 2:ot.f=_.float();break;case 3:ot.i=_.int64();break;case 4:ot.s=_.bytes();break;case 5:ot.t=st.onnx.TensorProto.decode(_,_.uint32());break;case 6:ot.g=st.onnx.GraphProto.decode(_,_.uint32());break;case 7:if(ot.floats&&ot.floats.length||(ot.floats=[]),(7&lt)==2)for(var at=_.uint32()+_.pos;_.pos<at;)ot.floats.push(_.float());else ot.floats.push(_.float());break;case 8:if(ot.ints&&ot.ints.length||(ot.ints=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.ints.push(_.int64());else ot.ints.push(_.int64());break;case 9:ot.strings&&ot.strings.length||(ot.strings=[]),ot.strings.push(_.bytes());break;case 10:ot.tensors&&ot.tensors.length||(ot.tensors=[]),ot.tensors.push(st.onnx.TensorProto.decode(_,_.uint32()));break;case 11:ot.graphs&&ot.graphs.length||(ot.graphs=[]),ot.graphs.push(st.onnx.GraphProto.decode(_,_.uint32()));break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.name!=null&&_.hasOwnProperty("name")&&!rt.isString(_.name))return"name: string expected";if(_.refAttrName!=null&&_.hasOwnProperty("refAttrName")&&!rt.isString(_.refAttrName))return"refAttrName: string expected";if(_.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString))return"docString: string expected";if(_.type!=null&&_.hasOwnProperty("type"))switch(_.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(_.f!=null&&_.hasOwnProperty("f")&&typeof _.f!="number")return"f: number expected";if(_.i!=null&&_.hasOwnProperty("i")&&!(rt.isInteger(_.i)||_.i&&rt.isInteger(_.i.low)&&rt.isInteger(_.i.high)))return"i: integer|Long expected";if(_.s!=null&&_.hasOwnProperty("s")&&!(_.s&&typeof _.s.length=="number"||rt.isString(_.s)))return"s: buffer expected";if(_.t!=null&&_.hasOwnProperty("t")&&(it=st.onnx.TensorProto.verify(_.t)))return"t."+it;if(_.g!=null&&_.hasOwnProperty("g")&&(it=st.onnx.GraphProto.verify(_.g)))return"g."+it;if(_.floats!=null&&_.hasOwnProperty("floats")){if(!Array.isArray(_.floats))return"floats: array expected";for(var nt=0;nt<_.floats.length;++nt)if(typeof _.floats[nt]!="number")return"floats: number[] expected"}if(_.ints!=null&&_.hasOwnProperty("ints")){if(!Array.isArray(_.ints))return"ints: array expected";for(nt=0;nt<_.ints.length;++nt)if(!(rt.isInteger(_.ints[nt])||_.ints[nt]&&rt.isInteger(_.ints[nt].low)&&rt.isInteger(_.ints[nt].high)))return"ints: integer|Long[] expected"}if(_.strings!=null&&_.hasOwnProperty("strings")){if(!Array.isArray(_.strings))return"strings: array expected";for(nt=0;nt<_.strings.length;++nt)if(!(_.strings[nt]&&typeof _.strings[nt].length=="number"||rt.isString(_.strings[nt])))return"strings: buffer[] expected"}if(_.tensors!=null&&_.hasOwnProperty("tensors")){if(!Array.isArray(_.tensors))return"tensors: array expected";for(nt=0;nt<_.tensors.length;++nt)if(it=st.onnx.TensorProto.verify(_.tensors[nt]))return"tensors."+it}if(_.graphs!=null&&_.hasOwnProperty("graphs")){if(!Array.isArray(_.graphs))return"graphs: array expected";for(nt=0;nt<_.graphs.length;++nt){var it;if(it=st.onnx.GraphProto.verify(_.graphs[nt]))return"graphs."+it}}return null},$.fromObject=function(_){if(_ instanceof st.onnx.AttributeProto)return _;var nt=new st.onnx.AttributeProto;switch(_.name!=null&&(nt.name=String(_.name)),_.refAttrName!=null&&(nt.refAttrName=String(_.refAttrName)),_.docString!=null&&(nt.docString=String(_.docString)),_.type){case"UNDEFINED":case 0:nt.type=0;break;case"FLOAT":case 1:nt.type=1;break;case"INT":case 2:nt.type=2;break;case"STRING":case 3:nt.type=3;break;case"TENSOR":case 4:nt.type=4;break;case"GRAPH":case 5:nt.type=5;break;case"FLOATS":case 6:nt.type=6;break;case"INTS":case 7:nt.type=7;break;case"STRINGS":case 8:nt.type=8;break;case"TENSORS":case 9:nt.type=9;break;case"GRAPHS":case 10:nt.type=10}if(_.f!=null&&(nt.f=Number(_.f)),_.i!=null&&(rt.Long?(nt.i=rt.Long.fromValue(_.i)).unsigned=!1:typeof _.i=="string"?nt.i=parseInt(_.i,10):typeof _.i=="number"?nt.i=_.i:typeof _.i=="object"&&(nt.i=new rt.LongBits(_.i.low>>>0,_.i.high>>>0).toNumber())),_.s!=null&&(typeof _.s=="string"?rt.base64.decode(_.s,nt.s=rt.newBuffer(rt.base64.length(_.s)),0):_.s.length&&(nt.s=_.s)),_.t!=null){if(typeof _.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");nt.t=st.onnx.TensorProto.fromObject(_.t)}if(_.g!=null){if(typeof _.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");nt.g=st.onnx.GraphProto.fromObject(_.g)}if(_.floats){if(!Array.isArray(_.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");nt.floats=[];for(var it=0;it<_.floats.length;++it)nt.floats[it]=Number(_.floats[it])}if(_.ints){if(!Array.isArray(_.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(nt.ints=[],it=0;it<_.ints.length;++it)rt.Long?(nt.ints[it]=rt.Long.fromValue(_.ints[it])).unsigned=!1:typeof _.ints[it]=="string"?nt.ints[it]=parseInt(_.ints[it],10):typeof _.ints[it]=="number"?nt.ints[it]=_.ints[it]:typeof _.ints[it]=="object"&&(nt.ints[it]=new rt.LongBits(_.ints[it].low>>>0,_.ints[it].high>>>0).toNumber())}if(_.strings){if(!Array.isArray(_.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(nt.strings=[],it=0;it<_.strings.length;++it)typeof _.strings[it]=="string"?rt.base64.decode(_.strings[it],nt.strings[it]=rt.newBuffer(rt.base64.length(_.strings[it])),0):_.strings[it].length&&(nt.strings[it]=_.strings[it])}if(_.tensors){if(!Array.isArray(_.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(nt.tensors=[],it=0;it<_.tensors.length;++it){if(typeof _.tensors[it]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");nt.tensors[it]=st.onnx.TensorProto.fromObject(_.tensors[it])}}if(_.graphs){if(!Array.isArray(_.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(nt.graphs=[],it=0;it<_.graphs.length;++it){if(typeof _.graphs[it]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");nt.graphs[it]=st.onnx.GraphProto.fromObject(_.graphs[it])}}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.floats=[],it.ints=[],it.strings=[],it.tensors=[],it.graphs=[]),nt.defaults){if(it.name="",it.f=0,rt.Long){var ot=new rt.Long(0,0,!1);it.i=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else it.i=nt.longs===String?"0":0;nt.bytes===String?it.s="":(it.s=[],nt.bytes!==Array&&(it.s=rt.newBuffer(it.s))),it.t=null,it.g=null,it.docString="",it.type=nt.enums===String?"UNDEFINED":0,it.refAttrName=""}if(_.name!=null&&_.hasOwnProperty("name")&&(it.name=_.name),_.f!=null&&_.hasOwnProperty("f")&&(it.f=nt.json&&!isFinite(_.f)?String(_.f):_.f),_.i!=null&&_.hasOwnProperty("i")&&(typeof _.i=="number"?it.i=nt.longs===String?String(_.i):_.i:it.i=nt.longs===String?rt.Long.prototype.toString.call(_.i):nt.longs===Number?new rt.LongBits(_.i.low>>>0,_.i.high>>>0).toNumber():_.i),_.s!=null&&_.hasOwnProperty("s")&&(it.s=nt.bytes===String?rt.base64.encode(_.s,0,_.s.length):nt.bytes===Array?Array.prototype.slice.call(_.s):_.s),_.t!=null&&_.hasOwnProperty("t")&&(it.t=st.onnx.TensorProto.toObject(_.t,nt)),_.g!=null&&_.hasOwnProperty("g")&&(it.g=st.onnx.GraphProto.toObject(_.g,nt)),_.floats&&_.floats.length){it.floats=[];for(var lt=0;lt<_.floats.length;++lt)it.floats[lt]=nt.json&&!isFinite(_.floats[lt])?String(_.floats[lt]):_.floats[lt]}if(_.ints&&_.ints.length)for(it.ints=[],lt=0;lt<_.ints.length;++lt)typeof _.ints[lt]=="number"?it.ints[lt]=nt.longs===String?String(_.ints[lt]):_.ints[lt]:it.ints[lt]=nt.longs===String?rt.Long.prototype.toString.call(_.ints[lt]):nt.longs===Number?new rt.LongBits(_.ints[lt].low>>>0,_.ints[lt].high>>>0).toNumber():_.ints[lt];if(_.strings&&_.strings.length)for(it.strings=[],lt=0;lt<_.strings.length;++lt)it.strings[lt]=nt.bytes===String?rt.base64.encode(_.strings[lt],0,_.strings[lt].length):nt.bytes===Array?Array.prototype.slice.call(_.strings[lt]):_.strings[lt];if(_.tensors&&_.tensors.length)for(it.tensors=[],lt=0;lt<_.tensors.length;++lt)it.tensors[lt]=st.onnx.TensorProto.toObject(_.tensors[lt],nt);if(_.graphs&&_.graphs.length)for(it.graphs=[],lt=0;lt<_.graphs.length;++lt)it.graphs[lt]=st.onnx.GraphProto.toObject(_.graphs[lt],nt);return _.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),_.type!=null&&_.hasOwnProperty("type")&&(it.type=nt.enums===String?st.onnx.AttributeProto.AttributeType[_.type]:_.type),_.refAttrName!=null&&_.hasOwnProperty("refAttrName")&&(it.refAttrName=_.refAttrName),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$.AttributeType=function(){var _={},nt=Object.create(_);return nt[_[0]="UNDEFINED"]=0,nt[_[1]="FLOAT"]=1,nt[_[2]="INT"]=2,nt[_[3]="STRING"]=3,nt[_[4]="TENSOR"]=4,nt[_[5]="GRAPH"]=5,nt[_[6]="FLOATS"]=6,nt[_[7]="INTS"]=7,nt[_[8]="STRINGS"]=8,nt[_[9]="TENSORS"]=9,nt[_[10]="GRAPHS"]=10,nt}(),$}(),g.ValueInfoProto=function(){function $(_){if(_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.name="",$.prototype.type=null,$.prototype.docString="",$.create=function(_){return new $(_)},$.encode=function(_,nt){return nt||(nt=et.create()),_.name!=null&&_.hasOwnProperty("name")&&nt.uint32(10).string(_.name),_.type!=null&&_.hasOwnProperty("type")&&st.onnx.TypeProto.encode(_.type,nt.uint32(18).fork()).ldelim(),_.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(26).string(_.docString),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.ValueInfoProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.name=_.string();break;case 2:ot.type=st.onnx.TypeProto.decode(_,_.uint32());break;case 3:ot.docString=_.string();break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.name!=null&&_.hasOwnProperty("name")&&!rt.isString(_.name))return"name: string expected";if(_.type!=null&&_.hasOwnProperty("type")){var nt=st.onnx.TypeProto.verify(_.type);if(nt)return"type."+nt}return _.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString)?"docString: string expected":null},$.fromObject=function(_){if(_ instanceof st.onnx.ValueInfoProto)return _;var nt=new st.onnx.ValueInfoProto;if(_.name!=null&&(nt.name=String(_.name)),_.type!=null){if(typeof _.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");nt.type=st.onnx.TypeProto.fromObject(_.type)}return _.docString!=null&&(nt.docString=String(_.docString)),nt},$.toObject=function(_,nt){nt||(nt={});var it={};return nt.defaults&&(it.name="",it.type=null,it.docString=""),_.name!=null&&_.hasOwnProperty("name")&&(it.name=_.name),_.type!=null&&_.hasOwnProperty("type")&&(it.type=st.onnx.TypeProto.toObject(_.type,nt)),_.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.NodeProto=function(){function $(_){if(this.input=[],this.output=[],this.attribute=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.input=rt.emptyArray,$.prototype.output=rt.emptyArray,$.prototype.name="",$.prototype.opType="",$.prototype.domain="",$.prototype.attribute=rt.emptyArray,$.prototype.docString="",$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.input!=null&&_.input.length)for(var it=0;it<_.input.length;++it)nt.uint32(10).string(_.input[it]);if(_.output!=null&&_.output.length)for(it=0;it<_.output.length;++it)nt.uint32(18).string(_.output[it]);if(_.name!=null&&_.hasOwnProperty("name")&&nt.uint32(26).string(_.name),_.opType!=null&&_.hasOwnProperty("opType")&&nt.uint32(34).string(_.opType),_.attribute!=null&&_.attribute.length)for(it=0;it<_.attribute.length;++it)st.onnx.AttributeProto.encode(_.attribute[it],nt.uint32(42).fork()).ldelim();return _.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(50).string(_.docString),_.domain!=null&&_.hasOwnProperty("domain")&&nt.uint32(58).string(_.domain),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.NodeProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.input&&ot.input.length||(ot.input=[]),ot.input.push(_.string());break;case 2:ot.output&&ot.output.length||(ot.output=[]),ot.output.push(_.string());break;case 3:ot.name=_.string();break;case 4:ot.opType=_.string();break;case 7:ot.domain=_.string();break;case 5:ot.attribute&&ot.attribute.length||(ot.attribute=[]),ot.attribute.push(st.onnx.AttributeProto.decode(_,_.uint32()));break;case 6:ot.docString=_.string();break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.input!=null&&_.hasOwnProperty("input")){if(!Array.isArray(_.input))return"input: array expected";for(var nt=0;nt<_.input.length;++nt)if(!rt.isString(_.input[nt]))return"input: string[] expected"}if(_.output!=null&&_.hasOwnProperty("output")){if(!Array.isArray(_.output))return"output: array expected";for(nt=0;nt<_.output.length;++nt)if(!rt.isString(_.output[nt]))return"output: string[] expected"}if(_.name!=null&&_.hasOwnProperty("name")&&!rt.isString(_.name))return"name: string expected";if(_.opType!=null&&_.hasOwnProperty("opType")&&!rt.isString(_.opType))return"opType: string expected";if(_.domain!=null&&_.hasOwnProperty("domain")&&!rt.isString(_.domain))return"domain: string expected";if(_.attribute!=null&&_.hasOwnProperty("attribute")){if(!Array.isArray(_.attribute))return"attribute: array expected";for(nt=0;nt<_.attribute.length;++nt){var it=st.onnx.AttributeProto.verify(_.attribute[nt]);if(it)return"attribute."+it}}return _.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString)?"docString: string expected":null},$.fromObject=function(_){if(_ instanceof st.onnx.NodeProto)return _;var nt=new st.onnx.NodeProto;if(_.input){if(!Array.isArray(_.input))throw TypeError(".onnx.NodeProto.input: array expected");nt.input=[];for(var it=0;it<_.input.length;++it)nt.input[it]=String(_.input[it])}if(_.output){if(!Array.isArray(_.output))throw TypeError(".onnx.NodeProto.output: array expected");for(nt.output=[],it=0;it<_.output.length;++it)nt.output[it]=String(_.output[it])}if(_.name!=null&&(nt.name=String(_.name)),_.opType!=null&&(nt.opType=String(_.opType)),_.domain!=null&&(nt.domain=String(_.domain)),_.attribute){if(!Array.isArray(_.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(nt.attribute=[],it=0;it<_.attribute.length;++it){if(typeof _.attribute[it]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");nt.attribute[it]=st.onnx.AttributeProto.fromObject(_.attribute[it])}}return _.docString!=null&&(nt.docString=String(_.docString)),nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.input=[],it.output=[],it.attribute=[]),nt.defaults&&(it.name="",it.opType="",it.docString="",it.domain=""),_.input&&_.input.length){it.input=[];for(var ot=0;ot<_.input.length;++ot)it.input[ot]=_.input[ot]}if(_.output&&_.output.length)for(it.output=[],ot=0;ot<_.output.length;++ot)it.output[ot]=_.output[ot];if(_.name!=null&&_.hasOwnProperty("name")&&(it.name=_.name),_.opType!=null&&_.hasOwnProperty("opType")&&(it.opType=_.opType),_.attribute&&_.attribute.length)for(it.attribute=[],ot=0;ot<_.attribute.length;++ot)it.attribute[ot]=st.onnx.AttributeProto.toObject(_.attribute[ot],nt);return _.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),_.domain!=null&&_.hasOwnProperty("domain")&&(it.domain=_.domain),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.ModelProto=function(){function $(_){if(this.opsetImport=[],this.metadataProps=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.irVersion=rt.Long?rt.Long.fromBits(0,0,!1):0,$.prototype.opsetImport=rt.emptyArray,$.prototype.producerName="",$.prototype.producerVersion="",$.prototype.domain="",$.prototype.modelVersion=rt.Long?rt.Long.fromBits(0,0,!1):0,$.prototype.docString="",$.prototype.graph=null,$.prototype.metadataProps=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.irVersion!=null&&_.hasOwnProperty("irVersion")&&nt.uint32(8).int64(_.irVersion),_.producerName!=null&&_.hasOwnProperty("producerName")&&nt.uint32(18).string(_.producerName),_.producerVersion!=null&&_.hasOwnProperty("producerVersion")&&nt.uint32(26).string(_.producerVersion),_.domain!=null&&_.hasOwnProperty("domain")&&nt.uint32(34).string(_.domain),_.modelVersion!=null&&_.hasOwnProperty("modelVersion")&&nt.uint32(40).int64(_.modelVersion),_.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(50).string(_.docString),_.graph!=null&&_.hasOwnProperty("graph")&&st.onnx.GraphProto.encode(_.graph,nt.uint32(58).fork()).ldelim(),_.opsetImport!=null&&_.opsetImport.length)for(var it=0;it<_.opsetImport.length;++it)st.onnx.OperatorSetIdProto.encode(_.opsetImport[it],nt.uint32(66).fork()).ldelim();if(_.metadataProps!=null&&_.metadataProps.length)for(it=0;it<_.metadataProps.length;++it)st.onnx.StringStringEntryProto.encode(_.metadataProps[it],nt.uint32(114).fork()).ldelim();return nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.ModelProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.irVersion=_.int64();break;case 8:ot.opsetImport&&ot.opsetImport.length||(ot.opsetImport=[]),ot.opsetImport.push(st.onnx.OperatorSetIdProto.decode(_,_.uint32()));break;case 2:ot.producerName=_.string();break;case 3:ot.producerVersion=_.string();break;case 4:ot.domain=_.string();break;case 5:ot.modelVersion=_.int64();break;case 6:ot.docString=_.string();break;case 7:ot.graph=st.onnx.GraphProto.decode(_,_.uint32());break;case 14:ot.metadataProps&&ot.metadataProps.length||(ot.metadataProps=[]),ot.metadataProps.push(st.onnx.StringStringEntryProto.decode(_,_.uint32()));break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.irVersion!=null&&_.hasOwnProperty("irVersion")&&!(rt.isInteger(_.irVersion)||_.irVersion&&rt.isInteger(_.irVersion.low)&&rt.isInteger(_.irVersion.high)))return"irVersion: integer|Long expected";if(_.opsetImport!=null&&_.hasOwnProperty("opsetImport")){if(!Array.isArray(_.opsetImport))return"opsetImport: array expected";for(var nt=0;nt<_.opsetImport.length;++nt)if(it=st.onnx.OperatorSetIdProto.verify(_.opsetImport[nt]))return"opsetImport."+it}if(_.producerName!=null&&_.hasOwnProperty("producerName")&&!rt.isString(_.producerName))return"producerName: string expected";if(_.producerVersion!=null&&_.hasOwnProperty("producerVersion")&&!rt.isString(_.producerVersion))return"producerVersion: string expected";if(_.domain!=null&&_.hasOwnProperty("domain")&&!rt.isString(_.domain))return"domain: string expected";if(_.modelVersion!=null&&_.hasOwnProperty("modelVersion")&&!(rt.isInteger(_.modelVersion)||_.modelVersion&&rt.isInteger(_.modelVersion.low)&&rt.isInteger(_.modelVersion.high)))return"modelVersion: integer|Long expected";if(_.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString))return"docString: string expected";if(_.graph!=null&&_.hasOwnProperty("graph")&&(it=st.onnx.GraphProto.verify(_.graph)))return"graph."+it;if(_.metadataProps!=null&&_.hasOwnProperty("metadataProps")){if(!Array.isArray(_.metadataProps))return"metadataProps: array expected";for(nt=0;nt<_.metadataProps.length;++nt){var it;if(it=st.onnx.StringStringEntryProto.verify(_.metadataProps[nt]))return"metadataProps."+it}}return null},$.fromObject=function(_){if(_ instanceof st.onnx.ModelProto)return _;var nt=new st.onnx.ModelProto;if(_.irVersion!=null&&(rt.Long?(nt.irVersion=rt.Long.fromValue(_.irVersion)).unsigned=!1:typeof _.irVersion=="string"?nt.irVersion=parseInt(_.irVersion,10):typeof _.irVersion=="number"?nt.irVersion=_.irVersion:typeof _.irVersion=="object"&&(nt.irVersion=new rt.LongBits(_.irVersion.low>>>0,_.irVersion.high>>>0).toNumber())),_.opsetImport){if(!Array.isArray(_.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");nt.opsetImport=[];for(var it=0;it<_.opsetImport.length;++it){if(typeof _.opsetImport[it]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");nt.opsetImport[it]=st.onnx.OperatorSetIdProto.fromObject(_.opsetImport[it])}}if(_.producerName!=null&&(nt.producerName=String(_.producerName)),_.producerVersion!=null&&(nt.producerVersion=String(_.producerVersion)),_.domain!=null&&(nt.domain=String(_.domain)),_.modelVersion!=null&&(rt.Long?(nt.modelVersion=rt.Long.fromValue(_.modelVersion)).unsigned=!1:typeof _.modelVersion=="string"?nt.modelVersion=parseInt(_.modelVersion,10):typeof _.modelVersion=="number"?nt.modelVersion=_.modelVersion:typeof _.modelVersion=="object"&&(nt.modelVersion=new rt.LongBits(_.modelVersion.low>>>0,_.modelVersion.high>>>0).toNumber())),_.docString!=null&&(nt.docString=String(_.docString)),_.graph!=null){if(typeof _.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");nt.graph=st.onnx.GraphProto.fromObject(_.graph)}if(_.metadataProps){if(!Array.isArray(_.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(nt.metadataProps=[],it=0;it<_.metadataProps.length;++it){if(typeof _.metadataProps[it]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");nt.metadataProps[it]=st.onnx.StringStringEntryProto.fromObject(_.metadataProps[it])}}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.opsetImport=[],it.metadataProps=[]),nt.defaults){if(rt.Long){var ot=new rt.Long(0,0,!1);it.irVersion=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else it.irVersion=nt.longs===String?"0":0;it.producerName="",it.producerVersion="",it.domain="",rt.Long?(ot=new rt.Long(0,0,!1),it.modelVersion=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot):it.modelVersion=nt.longs===String?"0":0,it.docString="",it.graph=null}if(_.irVersion!=null&&_.hasOwnProperty("irVersion")&&(typeof _.irVersion=="number"?it.irVersion=nt.longs===String?String(_.irVersion):_.irVersion:it.irVersion=nt.longs===String?rt.Long.prototype.toString.call(_.irVersion):nt.longs===Number?new rt.LongBits(_.irVersion.low>>>0,_.irVersion.high>>>0).toNumber():_.irVersion),_.producerName!=null&&_.hasOwnProperty("producerName")&&(it.producerName=_.producerName),_.producerVersion!=null&&_.hasOwnProperty("producerVersion")&&(it.producerVersion=_.producerVersion),_.domain!=null&&_.hasOwnProperty("domain")&&(it.domain=_.domain),_.modelVersion!=null&&_.hasOwnProperty("modelVersion")&&(typeof _.modelVersion=="number"?it.modelVersion=nt.longs===String?String(_.modelVersion):_.modelVersion:it.modelVersion=nt.longs===String?rt.Long.prototype.toString.call(_.modelVersion):nt.longs===Number?new rt.LongBits(_.modelVersion.low>>>0,_.modelVersion.high>>>0).toNumber():_.modelVersion),_.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),_.graph!=null&&_.hasOwnProperty("graph")&&(it.graph=st.onnx.GraphProto.toObject(_.graph,nt)),_.opsetImport&&_.opsetImport.length){it.opsetImport=[];for(var lt=0;lt<_.opsetImport.length;++lt)it.opsetImport[lt]=st.onnx.OperatorSetIdProto.toObject(_.opsetImport[lt],nt)}if(_.metadataProps&&_.metadataProps.length)for(it.metadataProps=[],lt=0;lt<_.metadataProps.length;++lt)it.metadataProps[lt]=st.onnx.StringStringEntryProto.toObject(_.metadataProps[lt],nt);return it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.StringStringEntryProto=function(){function $(_){if(_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.key="",$.prototype.value="",$.create=function(_){return new $(_)},$.encode=function(_,nt){return nt||(nt=et.create()),_.key!=null&&_.hasOwnProperty("key")&&nt.uint32(10).string(_.key),_.value!=null&&_.hasOwnProperty("value")&&nt.uint32(18).string(_.value),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.StringStringEntryProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.key=_.string();break;case 2:ot.value=_.string();break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){return typeof _!="object"||_===null?"object expected":_.key!=null&&_.hasOwnProperty("key")&&!rt.isString(_.key)?"key: string expected":_.value!=null&&_.hasOwnProperty("value")&&!rt.isString(_.value)?"value: string expected":null},$.fromObject=function(_){if(_ instanceof st.onnx.StringStringEntryProto)return _;var nt=new st.onnx.StringStringEntryProto;return _.key!=null&&(nt.key=String(_.key)),_.value!=null&&(nt.value=String(_.value)),nt},$.toObject=function(_,nt){nt||(nt={});var it={};return nt.defaults&&(it.key="",it.value=""),_.key!=null&&_.hasOwnProperty("key")&&(it.key=_.key),_.value!=null&&_.hasOwnProperty("value")&&(it.value=_.value),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.TensorAnnotation=function(){function $(_){if(this.quantParameterTensorNames=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.tensorName="",$.prototype.quantParameterTensorNames=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.tensorName!=null&&_.hasOwnProperty("tensorName")&&nt.uint32(10).string(_.tensorName),_.quantParameterTensorNames!=null&&_.quantParameterTensorNames.length)for(var it=0;it<_.quantParameterTensorNames.length;++it)st.onnx.StringStringEntryProto.encode(_.quantParameterTensorNames[it],nt.uint32(18).fork()).ldelim();return nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.TensorAnnotation;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.tensorName=_.string();break;case 2:ot.quantParameterTensorNames&&ot.quantParameterTensorNames.length||(ot.quantParameterTensorNames=[]),ot.quantParameterTensorNames.push(st.onnx.StringStringEntryProto.decode(_,_.uint32()));break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.tensorName!=null&&_.hasOwnProperty("tensorName")&&!rt.isString(_.tensorName))return"tensorName: string expected";if(_.quantParameterTensorNames!=null&&_.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(_.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var nt=0;nt<_.quantParameterTensorNames.length;++nt){var it=st.onnx.StringStringEntryProto.verify(_.quantParameterTensorNames[nt]);if(it)return"quantParameterTensorNames."+it}}return null},$.fromObject=function(_){if(_ instanceof st.onnx.TensorAnnotation)return _;var nt=new st.onnx.TensorAnnotation;if(_.tensorName!=null&&(nt.tensorName=String(_.tensorName)),_.quantParameterTensorNames){if(!Array.isArray(_.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");nt.quantParameterTensorNames=[];for(var it=0;it<_.quantParameterTensorNames.length;++it){if(typeof _.quantParameterTensorNames[it]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");nt.quantParameterTensorNames[it]=st.onnx.StringStringEntryProto.fromObject(_.quantParameterTensorNames[it])}}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.quantParameterTensorNames=[]),nt.defaults&&(it.tensorName=""),_.tensorName!=null&&_.hasOwnProperty("tensorName")&&(it.tensorName=_.tensorName),_.quantParameterTensorNames&&_.quantParameterTensorNames.length){it.quantParameterTensorNames=[];for(var ot=0;ot<_.quantParameterTensorNames.length;++ot)it.quantParameterTensorNames[ot]=st.onnx.StringStringEntryProto.toObject(_.quantParameterTensorNames[ot],nt)}return it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.GraphProto=function(){function $(_){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.node=rt.emptyArray,$.prototype.name="",$.prototype.initializer=rt.emptyArray,$.prototype.docString="",$.prototype.input=rt.emptyArray,$.prototype.output=rt.emptyArray,$.prototype.valueInfo=rt.emptyArray,$.prototype.quantizationAnnotation=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.node!=null&&_.node.length)for(var it=0;it<_.node.length;++it)st.onnx.NodeProto.encode(_.node[it],nt.uint32(10).fork()).ldelim();if(_.name!=null&&_.hasOwnProperty("name")&&nt.uint32(18).string(_.name),_.initializer!=null&&_.initializer.length)for(it=0;it<_.initializer.length;++it)st.onnx.TensorProto.encode(_.initializer[it],nt.uint32(42).fork()).ldelim();if(_.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(82).string(_.docString),_.input!=null&&_.input.length)for(it=0;it<_.input.length;++it)st.onnx.ValueInfoProto.encode(_.input[it],nt.uint32(90).fork()).ldelim();if(_.output!=null&&_.output.length)for(it=0;it<_.output.length;++it)st.onnx.ValueInfoProto.encode(_.output[it],nt.uint32(98).fork()).ldelim();if(_.valueInfo!=null&&_.valueInfo.length)for(it=0;it<_.valueInfo.length;++it)st.onnx.ValueInfoProto.encode(_.valueInfo[it],nt.uint32(106).fork()).ldelim();if(_.quantizationAnnotation!=null&&_.quantizationAnnotation.length)for(it=0;it<_.quantizationAnnotation.length;++it)st.onnx.TensorAnnotation.encode(_.quantizationAnnotation[it],nt.uint32(114).fork()).ldelim();return nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.GraphProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.node&&ot.node.length||(ot.node=[]),ot.node.push(st.onnx.NodeProto.decode(_,_.uint32()));break;case 2:ot.name=_.string();break;case 5:ot.initializer&&ot.initializer.length||(ot.initializer=[]),ot.initializer.push(st.onnx.TensorProto.decode(_,_.uint32()));break;case 10:ot.docString=_.string();break;case 11:ot.input&&ot.input.length||(ot.input=[]),ot.input.push(st.onnx.ValueInfoProto.decode(_,_.uint32()));break;case 12:ot.output&&ot.output.length||(ot.output=[]),ot.output.push(st.onnx.ValueInfoProto.decode(_,_.uint32()));break;case 13:ot.valueInfo&&ot.valueInfo.length||(ot.valueInfo=[]),ot.valueInfo.push(st.onnx.ValueInfoProto.decode(_,_.uint32()));break;case 14:ot.quantizationAnnotation&&ot.quantizationAnnotation.length||(ot.quantizationAnnotation=[]),ot.quantizationAnnotation.push(st.onnx.TensorAnnotation.decode(_,_.uint32()));break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.node!=null&&_.hasOwnProperty("node")){if(!Array.isArray(_.node))return"node: array expected";for(var nt=0;nt<_.node.length;++nt)if(it=st.onnx.NodeProto.verify(_.node[nt]))return"node."+it}if(_.name!=null&&_.hasOwnProperty("name")&&!rt.isString(_.name))return"name: string expected";if(_.initializer!=null&&_.hasOwnProperty("initializer")){if(!Array.isArray(_.initializer))return"initializer: array expected";for(nt=0;nt<_.initializer.length;++nt)if(it=st.onnx.TensorProto.verify(_.initializer[nt]))return"initializer."+it}if(_.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString))return"docString: string expected";if(_.input!=null&&_.hasOwnProperty("input")){if(!Array.isArray(_.input))return"input: array expected";for(nt=0;nt<_.input.length;++nt)if(it=st.onnx.ValueInfoProto.verify(_.input[nt]))return"input."+it}if(_.output!=null&&_.hasOwnProperty("output")){if(!Array.isArray(_.output))return"output: array expected";for(nt=0;nt<_.output.length;++nt)if(it=st.onnx.ValueInfoProto.verify(_.output[nt]))return"output."+it}if(_.valueInfo!=null&&_.hasOwnProperty("valueInfo")){if(!Array.isArray(_.valueInfo))return"valueInfo: array expected";for(nt=0;nt<_.valueInfo.length;++nt)if(it=st.onnx.ValueInfoProto.verify(_.valueInfo[nt]))return"valueInfo."+it}if(_.quantizationAnnotation!=null&&_.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(_.quantizationAnnotation))return"quantizationAnnotation: array expected";for(nt=0;nt<_.quantizationAnnotation.length;++nt){var it;if(it=st.onnx.TensorAnnotation.verify(_.quantizationAnnotation[nt]))return"quantizationAnnotation."+it}}return null},$.fromObject=function(_){if(_ instanceof st.onnx.GraphProto)return _;var nt=new st.onnx.GraphProto;if(_.node){if(!Array.isArray(_.node))throw TypeError(".onnx.GraphProto.node: array expected");nt.node=[];for(var it=0;it<_.node.length;++it){if(typeof _.node[it]!="object")throw TypeError(".onnx.GraphProto.node: object expected");nt.node[it]=st.onnx.NodeProto.fromObject(_.node[it])}}if(_.name!=null&&(nt.name=String(_.name)),_.initializer){if(!Array.isArray(_.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(nt.initializer=[],it=0;it<_.initializer.length;++it){if(typeof _.initializer[it]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");nt.initializer[it]=st.onnx.TensorProto.fromObject(_.initializer[it])}}if(_.docString!=null&&(nt.docString=String(_.docString)),_.input){if(!Array.isArray(_.input))throw TypeError(".onnx.GraphProto.input: array expected");for(nt.input=[],it=0;it<_.input.length;++it){if(typeof _.input[it]!="object")throw TypeError(".onnx.GraphProto.input: object expected");nt.input[it]=st.onnx.ValueInfoProto.fromObject(_.input[it])}}if(_.output){if(!Array.isArray(_.output))throw TypeError(".onnx.GraphProto.output: array expected");for(nt.output=[],it=0;it<_.output.length;++it){if(typeof _.output[it]!="object")throw TypeError(".onnx.GraphProto.output: object expected");nt.output[it]=st.onnx.ValueInfoProto.fromObject(_.output[it])}}if(_.valueInfo){if(!Array.isArray(_.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(nt.valueInfo=[],it=0;it<_.valueInfo.length;++it){if(typeof _.valueInfo[it]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");nt.valueInfo[it]=st.onnx.ValueInfoProto.fromObject(_.valueInfo[it])}}if(_.quantizationAnnotation){if(!Array.isArray(_.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(nt.quantizationAnnotation=[],it=0;it<_.quantizationAnnotation.length;++it){if(typeof _.quantizationAnnotation[it]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");nt.quantizationAnnotation[it]=st.onnx.TensorAnnotation.fromObject(_.quantizationAnnotation[it])}}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.node=[],it.initializer=[],it.input=[],it.output=[],it.valueInfo=[],it.quantizationAnnotation=[]),nt.defaults&&(it.name="",it.docString=""),_.node&&_.node.length){it.node=[];for(var ot=0;ot<_.node.length;++ot)it.node[ot]=st.onnx.NodeProto.toObject(_.node[ot],nt)}if(_.name!=null&&_.hasOwnProperty("name")&&(it.name=_.name),_.initializer&&_.initializer.length)for(it.initializer=[],ot=0;ot<_.initializer.length;++ot)it.initializer[ot]=st.onnx.TensorProto.toObject(_.initializer[ot],nt);if(_.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),_.input&&_.input.length)for(it.input=[],ot=0;ot<_.input.length;++ot)it.input[ot]=st.onnx.ValueInfoProto.toObject(_.input[ot],nt);if(_.output&&_.output.length)for(it.output=[],ot=0;ot<_.output.length;++ot)it.output[ot]=st.onnx.ValueInfoProto.toObject(_.output[ot],nt);if(_.valueInfo&&_.valueInfo.length)for(it.valueInfo=[],ot=0;ot<_.valueInfo.length;++ot)it.valueInfo[ot]=st.onnx.ValueInfoProto.toObject(_.valueInfo[ot],nt);if(_.quantizationAnnotation&&_.quantizationAnnotation.length)for(it.quantizationAnnotation=[],ot=0;ot<_.quantizationAnnotation.length;++ot)it.quantizationAnnotation[ot]=st.onnx.TensorAnnotation.toObject(_.quantizationAnnotation[ot],nt);return it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g.TensorProto=function(){function $(_){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.dims=rt.emptyArray,$.prototype.dataType=0,$.prototype.segment=null,$.prototype.floatData=rt.emptyArray,$.prototype.int32Data=rt.emptyArray,$.prototype.stringData=rt.emptyArray,$.prototype.int64Data=rt.emptyArray,$.prototype.name="",$.prototype.docString="",$.prototype.rawData=rt.newBuffer([]),$.prototype.externalData=rt.emptyArray,$.prototype.dataLocation=0,$.prototype.doubleData=rt.emptyArray,$.prototype.uint64Data=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.dims!=null&&_.dims.length){nt.uint32(10).fork();for(var it=0;it<_.dims.length;++it)nt.int64(_.dims[it]);nt.ldelim()}if(_.dataType!=null&&_.hasOwnProperty("dataType")&&nt.uint32(16).int32(_.dataType),_.segment!=null&&_.hasOwnProperty("segment")&&st.onnx.TensorProto.Segment.encode(_.segment,nt.uint32(26).fork()).ldelim(),_.floatData!=null&&_.floatData.length){for(nt.uint32(34).fork(),it=0;it<_.floatData.length;++it)nt.float(_.floatData[it]);nt.ldelim()}if(_.int32Data!=null&&_.int32Data.length){for(nt.uint32(42).fork(),it=0;it<_.int32Data.length;++it)nt.int32(_.int32Data[it]);nt.ldelim()}if(_.stringData!=null&&_.stringData.length)for(it=0;it<_.stringData.length;++it)nt.uint32(50).bytes(_.stringData[it]);if(_.int64Data!=null&&_.int64Data.length){for(nt.uint32(58).fork(),it=0;it<_.int64Data.length;++it)nt.int64(_.int64Data[it]);nt.ldelim()}if(_.name!=null&&_.hasOwnProperty("name")&&nt.uint32(66).string(_.name),_.rawData!=null&&_.hasOwnProperty("rawData")&&nt.uint32(74).bytes(_.rawData),_.doubleData!=null&&_.doubleData.length){for(nt.uint32(82).fork(),it=0;it<_.doubleData.length;++it)nt.double(_.doubleData[it]);nt.ldelim()}if(_.uint64Data!=null&&_.uint64Data.length){for(nt.uint32(90).fork(),it=0;it<_.uint64Data.length;++it)nt.uint64(_.uint64Data[it]);nt.ldelim()}if(_.docString!=null&&_.hasOwnProperty("docString")&&nt.uint32(98).string(_.docString),_.externalData!=null&&_.externalData.length)for(it=0;it<_.externalData.length;++it)st.onnx.StringStringEntryProto.encode(_.externalData[it],nt.uint32(106).fork()).ldelim();return _.dataLocation!=null&&_.hasOwnProperty("dataLocation")&&nt.uint32(112).int32(_.dataLocation),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.TensorProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:if(ot.dims&&ot.dims.length||(ot.dims=[]),(7&lt)==2)for(var at=_.uint32()+_.pos;_.pos<at;)ot.dims.push(_.int64());else ot.dims.push(_.int64());break;case 2:ot.dataType=_.int32();break;case 3:ot.segment=st.onnx.TensorProto.Segment.decode(_,_.uint32());break;case 4:if(ot.floatData&&ot.floatData.length||(ot.floatData=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.floatData.push(_.float());else ot.floatData.push(_.float());break;case 5:if(ot.int32Data&&ot.int32Data.length||(ot.int32Data=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.int32Data.push(_.int32());else ot.int32Data.push(_.int32());break;case 6:ot.stringData&&ot.stringData.length||(ot.stringData=[]),ot.stringData.push(_.bytes());break;case 7:if(ot.int64Data&&ot.int64Data.length||(ot.int64Data=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.int64Data.push(_.int64());else ot.int64Data.push(_.int64());break;case 8:ot.name=_.string();break;case 12:ot.docString=_.string();break;case 9:ot.rawData=_.bytes();break;case 13:ot.externalData&&ot.externalData.length||(ot.externalData=[]),ot.externalData.push(st.onnx.StringStringEntryProto.decode(_,_.uint32()));break;case 14:ot.dataLocation=_.int32();break;case 10:if(ot.doubleData&&ot.doubleData.length||(ot.doubleData=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.doubleData.push(_.double());else ot.doubleData.push(_.double());break;case 11:if(ot.uint64Data&&ot.uint64Data.length||(ot.uint64Data=[]),(7&lt)==2)for(at=_.uint32()+_.pos;_.pos<at;)ot.uint64Data.push(_.uint64());else ot.uint64Data.push(_.uint64());break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.dims!=null&&_.hasOwnProperty("dims")){if(!Array.isArray(_.dims))return"dims: array expected";for(var nt=0;nt<_.dims.length;++nt)if(!(rt.isInteger(_.dims[nt])||_.dims[nt]&&rt.isInteger(_.dims[nt].low)&&rt.isInteger(_.dims[nt].high)))return"dims: integer|Long[] expected"}if(_.dataType!=null&&_.hasOwnProperty("dataType")&&!rt.isInteger(_.dataType))return"dataType: integer expected";if(_.segment!=null&&_.hasOwnProperty("segment")&&(it=st.onnx.TensorProto.Segment.verify(_.segment)))return"segment."+it;if(_.floatData!=null&&_.hasOwnProperty("floatData")){if(!Array.isArray(_.floatData))return"floatData: array expected";for(nt=0;nt<_.floatData.length;++nt)if(typeof _.floatData[nt]!="number")return"floatData: number[] expected"}if(_.int32Data!=null&&_.hasOwnProperty("int32Data")){if(!Array.isArray(_.int32Data))return"int32Data: array expected";for(nt=0;nt<_.int32Data.length;++nt)if(!rt.isInteger(_.int32Data[nt]))return"int32Data: integer[] expected"}if(_.stringData!=null&&_.hasOwnProperty("stringData")){if(!Array.isArray(_.stringData))return"stringData: array expected";for(nt=0;nt<_.stringData.length;++nt)if(!(_.stringData[nt]&&typeof _.stringData[nt].length=="number"||rt.isString(_.stringData[nt])))return"stringData: buffer[] expected"}if(_.int64Data!=null&&_.hasOwnProperty("int64Data")){if(!Array.isArray(_.int64Data))return"int64Data: array expected";for(nt=0;nt<_.int64Data.length;++nt)if(!(rt.isInteger(_.int64Data[nt])||_.int64Data[nt]&&rt.isInteger(_.int64Data[nt].low)&&rt.isInteger(_.int64Data[nt].high)))return"int64Data: integer|Long[] expected"}if(_.name!=null&&_.hasOwnProperty("name")&&!rt.isString(_.name))return"name: string expected";if(_.docString!=null&&_.hasOwnProperty("docString")&&!rt.isString(_.docString))return"docString: string expected";if(_.rawData!=null&&_.hasOwnProperty("rawData")&&!(_.rawData&&typeof _.rawData.length=="number"||rt.isString(_.rawData)))return"rawData: buffer expected";if(_.externalData!=null&&_.hasOwnProperty("externalData")){if(!Array.isArray(_.externalData))return"externalData: array expected";for(nt=0;nt<_.externalData.length;++nt){var it;if(it=st.onnx.StringStringEntryProto.verify(_.externalData[nt]))return"externalData."+it}}if(_.dataLocation!=null&&_.hasOwnProperty("dataLocation"))switch(_.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(_.doubleData!=null&&_.hasOwnProperty("doubleData")){if(!Array.isArray(_.doubleData))return"doubleData: array expected";for(nt=0;nt<_.doubleData.length;++nt)if(typeof _.doubleData[nt]!="number")return"doubleData: number[] expected"}if(_.uint64Data!=null&&_.hasOwnProperty("uint64Data")){if(!Array.isArray(_.uint64Data))return"uint64Data: array expected";for(nt=0;nt<_.uint64Data.length;++nt)if(!(rt.isInteger(_.uint64Data[nt])||_.uint64Data[nt]&&rt.isInteger(_.uint64Data[nt].low)&&rt.isInteger(_.uint64Data[nt].high)))return"uint64Data: integer|Long[] expected"}return null},$.fromObject=function(_){if(_ instanceof st.onnx.TensorProto)return _;var nt=new st.onnx.TensorProto;if(_.dims){if(!Array.isArray(_.dims))throw TypeError(".onnx.TensorProto.dims: array expected");nt.dims=[];for(var it=0;it<_.dims.length;++it)rt.Long?(nt.dims[it]=rt.Long.fromValue(_.dims[it])).unsigned=!1:typeof _.dims[it]=="string"?nt.dims[it]=parseInt(_.dims[it],10):typeof _.dims[it]=="number"?nt.dims[it]=_.dims[it]:typeof _.dims[it]=="object"&&(nt.dims[it]=new rt.LongBits(_.dims[it].low>>>0,_.dims[it].high>>>0).toNumber())}if(_.dataType!=null&&(nt.dataType=0|_.dataType),_.segment!=null){if(typeof _.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");nt.segment=st.onnx.TensorProto.Segment.fromObject(_.segment)}if(_.floatData){if(!Array.isArray(_.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(nt.floatData=[],it=0;it<_.floatData.length;++it)nt.floatData[it]=Number(_.floatData[it])}if(_.int32Data){if(!Array.isArray(_.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(nt.int32Data=[],it=0;it<_.int32Data.length;++it)nt.int32Data[it]=0|_.int32Data[it]}if(_.stringData){if(!Array.isArray(_.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(nt.stringData=[],it=0;it<_.stringData.length;++it)typeof _.stringData[it]=="string"?rt.base64.decode(_.stringData[it],nt.stringData[it]=rt.newBuffer(rt.base64.length(_.stringData[it])),0):_.stringData[it].length&&(nt.stringData[it]=_.stringData[it])}if(_.int64Data){if(!Array.isArray(_.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(nt.int64Data=[],it=0;it<_.int64Data.length;++it)rt.Long?(nt.int64Data[it]=rt.Long.fromValue(_.int64Data[it])).unsigned=!1:typeof _.int64Data[it]=="string"?nt.int64Data[it]=parseInt(_.int64Data[it],10):typeof _.int64Data[it]=="number"?nt.int64Data[it]=_.int64Data[it]:typeof _.int64Data[it]=="object"&&(nt.int64Data[it]=new rt.LongBits(_.int64Data[it].low>>>0,_.int64Data[it].high>>>0).toNumber())}if(_.name!=null&&(nt.name=String(_.name)),_.docString!=null&&(nt.docString=String(_.docString)),_.rawData!=null&&(typeof _.rawData=="string"?rt.base64.decode(_.rawData,nt.rawData=rt.newBuffer(rt.base64.length(_.rawData)),0):_.rawData.length&&(nt.rawData=_.rawData)),_.externalData){if(!Array.isArray(_.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(nt.externalData=[],it=0;it<_.externalData.length;++it){if(typeof _.externalData[it]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");nt.externalData[it]=st.onnx.StringStringEntryProto.fromObject(_.externalData[it])}}switch(_.dataLocation){case"DEFAULT":case 0:nt.dataLocation=0;break;case"EXTERNAL":case 1:nt.dataLocation=1}if(_.doubleData){if(!Array.isArray(_.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(nt.doubleData=[],it=0;it<_.doubleData.length;++it)nt.doubleData[it]=Number(_.doubleData[it])}if(_.uint64Data){if(!Array.isArray(_.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(nt.uint64Data=[],it=0;it<_.uint64Data.length;++it)rt.Long?(nt.uint64Data[it]=rt.Long.fromValue(_.uint64Data[it])).unsigned=!0:typeof _.uint64Data[it]=="string"?nt.uint64Data[it]=parseInt(_.uint64Data[it],10):typeof _.uint64Data[it]=="number"?nt.uint64Data[it]=_.uint64Data[it]:typeof _.uint64Data[it]=="object"&&(nt.uint64Data[it]=new rt.LongBits(_.uint64Data[it].low>>>0,_.uint64Data[it].high>>>0).toNumber(!0))}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.dims=[],it.floatData=[],it.int32Data=[],it.stringData=[],it.int64Data=[],it.doubleData=[],it.uint64Data=[],it.externalData=[]),nt.defaults&&(it.dataType=0,it.segment=null,it.name="",nt.bytes===String?it.rawData="":(it.rawData=[],nt.bytes!==Array&&(it.rawData=rt.newBuffer(it.rawData))),it.docString="",it.dataLocation=nt.enums===String?"DEFAULT":0),_.dims&&_.dims.length){it.dims=[];for(var ot=0;ot<_.dims.length;++ot)typeof _.dims[ot]=="number"?it.dims[ot]=nt.longs===String?String(_.dims[ot]):_.dims[ot]:it.dims[ot]=nt.longs===String?rt.Long.prototype.toString.call(_.dims[ot]):nt.longs===Number?new rt.LongBits(_.dims[ot].low>>>0,_.dims[ot].high>>>0).toNumber():_.dims[ot]}if(_.dataType!=null&&_.hasOwnProperty("dataType")&&(it.dataType=_.dataType),_.segment!=null&&_.hasOwnProperty("segment")&&(it.segment=st.onnx.TensorProto.Segment.toObject(_.segment,nt)),_.floatData&&_.floatData.length)for(it.floatData=[],ot=0;ot<_.floatData.length;++ot)it.floatData[ot]=nt.json&&!isFinite(_.floatData[ot])?String(_.floatData[ot]):_.floatData[ot];if(_.int32Data&&_.int32Data.length)for(it.int32Data=[],ot=0;ot<_.int32Data.length;++ot)it.int32Data[ot]=_.int32Data[ot];if(_.stringData&&_.stringData.length)for(it.stringData=[],ot=0;ot<_.stringData.length;++ot)it.stringData[ot]=nt.bytes===String?rt.base64.encode(_.stringData[ot],0,_.stringData[ot].length):nt.bytes===Array?Array.prototype.slice.call(_.stringData[ot]):_.stringData[ot];if(_.int64Data&&_.int64Data.length)for(it.int64Data=[],ot=0;ot<_.int64Data.length;++ot)typeof _.int64Data[ot]=="number"?it.int64Data[ot]=nt.longs===String?String(_.int64Data[ot]):_.int64Data[ot]:it.int64Data[ot]=nt.longs===String?rt.Long.prototype.toString.call(_.int64Data[ot]):nt.longs===Number?new rt.LongBits(_.int64Data[ot].low>>>0,_.int64Data[ot].high>>>0).toNumber():_.int64Data[ot];if(_.name!=null&&_.hasOwnProperty("name")&&(it.name=_.name),_.rawData!=null&&_.hasOwnProperty("rawData")&&(it.rawData=nt.bytes===String?rt.base64.encode(_.rawData,0,_.rawData.length):nt.bytes===Array?Array.prototype.slice.call(_.rawData):_.rawData),_.doubleData&&_.doubleData.length)for(it.doubleData=[],ot=0;ot<_.doubleData.length;++ot)it.doubleData[ot]=nt.json&&!isFinite(_.doubleData[ot])?String(_.doubleData[ot]):_.doubleData[ot];if(_.uint64Data&&_.uint64Data.length)for(it.uint64Data=[],ot=0;ot<_.uint64Data.length;++ot)typeof _.uint64Data[ot]=="number"?it.uint64Data[ot]=nt.longs===String?String(_.uint64Data[ot]):_.uint64Data[ot]:it.uint64Data[ot]=nt.longs===String?rt.Long.prototype.toString.call(_.uint64Data[ot]):nt.longs===Number?new rt.LongBits(_.uint64Data[ot].low>>>0,_.uint64Data[ot].high>>>0).toNumber(!0):_.uint64Data[ot];if(_.docString!=null&&_.hasOwnProperty("docString")&&(it.docString=_.docString),_.externalData&&_.externalData.length)for(it.externalData=[],ot=0;ot<_.externalData.length;++ot)it.externalData[ot]=st.onnx.StringStringEntryProto.toObject(_.externalData[ot],nt);return _.dataLocation!=null&&_.hasOwnProperty("dataLocation")&&(it.dataLocation=nt.enums===String?st.onnx.TensorProto.DataLocation[_.dataLocation]:_.dataLocation),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$.DataType=function(){var _={},nt=Object.create(_);return nt[_[0]="UNDEFINED"]=0,nt[_[1]="FLOAT"]=1,nt[_[2]="UINT8"]=2,nt[_[3]="INT8"]=3,nt[_[4]="UINT16"]=4,nt[_[5]="INT16"]=5,nt[_[6]="INT32"]=6,nt[_[7]="INT64"]=7,nt[_[8]="STRING"]=8,nt[_[9]="BOOL"]=9,nt[_[10]="FLOAT16"]=10,nt[_[11]="DOUBLE"]=11,nt[_[12]="UINT32"]=12,nt[_[13]="UINT64"]=13,nt[_[14]="COMPLEX64"]=14,nt[_[15]="COMPLEX128"]=15,nt[_[16]="BFLOAT16"]=16,nt}(),$.Segment=function(){function _(nt){if(nt)for(var it=Object.keys(nt),ot=0;ot<it.length;++ot)nt[it[ot]]!=null&&(this[it[ot]]=nt[it[ot]])}return _.prototype.begin=rt.Long?rt.Long.fromBits(0,0,!1):0,_.prototype.end=rt.Long?rt.Long.fromBits(0,0,!1):0,_.create=function(nt){return new _(nt)},_.encode=function(nt,it){return it||(it=et.create()),nt.begin!=null&&nt.hasOwnProperty("begin")&&it.uint32(8).int64(nt.begin),nt.end!=null&&nt.hasOwnProperty("end")&&it.uint32(16).int64(nt.end),it},_.encodeDelimited=function(nt,it){return this.encode(nt,it).ldelim()},_.decode=function(nt,it){nt instanceof _e||(nt=_e.create(nt));for(var ot=it===void 0?nt.len:nt.pos+it,lt=new st.onnx.TensorProto.Segment;nt.pos<ot;){var at=nt.uint32();switch(at>>>3){case 1:lt.begin=nt.int64();break;case 2:lt.end=nt.int64();break;default:nt.skipType(7&at)}}return lt},_.decodeDelimited=function(nt){return nt instanceof _e||(nt=new _e(nt)),this.decode(nt,nt.uint32())},_.verify=function(nt){return typeof nt!="object"||nt===null?"object expected":nt.begin!=null&&nt.hasOwnProperty("begin")&&!(rt.isInteger(nt.begin)||nt.begin&&rt.isInteger(nt.begin.low)&&rt.isInteger(nt.begin.high))?"begin: integer|Long expected":nt.end!=null&&nt.hasOwnProperty("end")&&!(rt.isInteger(nt.end)||nt.end&&rt.isInteger(nt.end.low)&&rt.isInteger(nt.end.high))?"end: integer|Long expected":null},_.fromObject=function(nt){if(nt instanceof st.onnx.TensorProto.Segment)return nt;var it=new st.onnx.TensorProto.Segment;return nt.begin!=null&&(rt.Long?(it.begin=rt.Long.fromValue(nt.begin)).unsigned=!1:typeof nt.begin=="string"?it.begin=parseInt(nt.begin,10):typeof nt.begin=="number"?it.begin=nt.begin:typeof nt.begin=="object"&&(it.begin=new rt.LongBits(nt.begin.low>>>0,nt.begin.high>>>0).toNumber())),nt.end!=null&&(rt.Long?(it.end=rt.Long.fromValue(nt.end)).unsigned=!1:typeof nt.end=="string"?it.end=parseInt(nt.end,10):typeof nt.end=="number"?it.end=nt.end:typeof nt.end=="object"&&(it.end=new rt.LongBits(nt.end.low>>>0,nt.end.high>>>0).toNumber())),it},_.toObject=function(nt,it){it||(it={});var ot={};if(it.defaults){if(rt.Long){var lt=new rt.Long(0,0,!1);ot.begin=it.longs===String?lt.toString():it.longs===Number?lt.toNumber():lt}else ot.begin=it.longs===String?"0":0;rt.Long?(lt=new rt.Long(0,0,!1),ot.end=it.longs===String?lt.toString():it.longs===Number?lt.toNumber():lt):ot.end=it.longs===String?"0":0}return nt.begin!=null&&nt.hasOwnProperty("begin")&&(typeof nt.begin=="number"?ot.begin=it.longs===String?String(nt.begin):nt.begin:ot.begin=it.longs===String?rt.Long.prototype.toString.call(nt.begin):it.longs===Number?new rt.LongBits(nt.begin.low>>>0,nt.begin.high>>>0).toNumber():nt.begin),nt.end!=null&&nt.hasOwnProperty("end")&&(typeof nt.end=="number"?ot.end=it.longs===String?String(nt.end):nt.end:ot.end=it.longs===String?rt.Long.prototype.toString.call(nt.end):it.longs===Number?new rt.LongBits(nt.end.low>>>0,nt.end.high>>>0).toNumber():nt.end),ot},_.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},_}(),$.DataLocation=function(){var _={},nt=Object.create(_);return nt[_[0]="DEFAULT"]=0,nt[_[1]="EXTERNAL"]=1,nt}(),$}(),g.TensorShapeProto=function(){function $(_){if(this.dim=[],_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.dim=rt.emptyArray,$.create=function(_){return new $(_)},$.encode=function(_,nt){if(nt||(nt=et.create()),_.dim!=null&&_.dim.length)for(var it=0;it<_.dim.length;++it)st.onnx.TensorShapeProto.Dimension.encode(_.dim[it],nt.uint32(10).fork()).ldelim();return nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.TensorShapeProto;_.pos<it;){var lt=_.uint32();lt>>>3==1?(ot.dim&&ot.dim.length||(ot.dim=[]),ot.dim.push(st.onnx.TensorShapeProto.Dimension.decode(_,_.uint32()))):_.skipType(7&lt)}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){if(typeof _!="object"||_===null)return"object expected";if(_.dim!=null&&_.hasOwnProperty("dim")){if(!Array.isArray(_.dim))return"dim: array expected";for(var nt=0;nt<_.dim.length;++nt){var it=st.onnx.TensorShapeProto.Dimension.verify(_.dim[nt]);if(it)return"dim."+it}}return null},$.fromObject=function(_){if(_ instanceof st.onnx.TensorShapeProto)return _;var nt=new st.onnx.TensorShapeProto;if(_.dim){if(!Array.isArray(_.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");nt.dim=[];for(var it=0;it<_.dim.length;++it){if(typeof _.dim[it]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");nt.dim[it]=st.onnx.TensorShapeProto.Dimension.fromObject(_.dim[it])}}return nt},$.toObject=function(_,nt){nt||(nt={});var it={};if((nt.arrays||nt.defaults)&&(it.dim=[]),_.dim&&_.dim.length){it.dim=[];for(var ot=0;ot<_.dim.length;++ot)it.dim[ot]=st.onnx.TensorShapeProto.Dimension.toObject(_.dim[ot],nt)}return it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$.Dimension=function(){function _(it){if(it)for(var ot=Object.keys(it),lt=0;lt<ot.length;++lt)it[ot[lt]]!=null&&(this[ot[lt]]=it[ot[lt]])}var nt;return _.prototype.dimValue=rt.Long?rt.Long.fromBits(0,0,!1):0,_.prototype.dimParam="",_.prototype.denotation="",Object.defineProperty(_.prototype,"value",{get:rt.oneOfGetter(nt=["dimValue","dimParam"]),set:rt.oneOfSetter(nt)}),_.create=function(it){return new _(it)},_.encode=function(it,ot){return ot||(ot=et.create()),it.dimValue!=null&&it.hasOwnProperty("dimValue")&&ot.uint32(8).int64(it.dimValue),it.dimParam!=null&&it.hasOwnProperty("dimParam")&&ot.uint32(18).string(it.dimParam),it.denotation!=null&&it.hasOwnProperty("denotation")&&ot.uint32(26).string(it.denotation),ot},_.encodeDelimited=function(it,ot){return this.encode(it,ot).ldelim()},_.decode=function(it,ot){it instanceof _e||(it=_e.create(it));for(var lt=ot===void 0?it.len:it.pos+ot,at=new st.onnx.TensorShapeProto.Dimension;it.pos<lt;){var ct=it.uint32();switch(ct>>>3){case 1:at.dimValue=it.int64();break;case 2:at.dimParam=it.string();break;case 3:at.denotation=it.string();break;default:it.skipType(7&ct)}}return at},_.decodeDelimited=function(it){return it instanceof _e||(it=new _e(it)),this.decode(it,it.uint32())},_.verify=function(it){if(typeof it!="object"||it===null)return"object expected";var ot={};if(it.dimValue!=null&&it.hasOwnProperty("dimValue")&&(ot.value=1,!(rt.isInteger(it.dimValue)||it.dimValue&&rt.isInteger(it.dimValue.low)&&rt.isInteger(it.dimValue.high))))return"dimValue: integer|Long expected";if(it.dimParam!=null&&it.hasOwnProperty("dimParam")){if(ot.value===1)return"value: multiple values";if(ot.value=1,!rt.isString(it.dimParam))return"dimParam: string expected"}return it.denotation!=null&&it.hasOwnProperty("denotation")&&!rt.isString(it.denotation)?"denotation: string expected":null},_.fromObject=function(it){if(it instanceof st.onnx.TensorShapeProto.Dimension)return it;var ot=new st.onnx.TensorShapeProto.Dimension;return it.dimValue!=null&&(rt.Long?(ot.dimValue=rt.Long.fromValue(it.dimValue)).unsigned=!1:typeof it.dimValue=="string"?ot.dimValue=parseInt(it.dimValue,10):typeof it.dimValue=="number"?ot.dimValue=it.dimValue:typeof it.dimValue=="object"&&(ot.dimValue=new rt.LongBits(it.dimValue.low>>>0,it.dimValue.high>>>0).toNumber())),it.dimParam!=null&&(ot.dimParam=String(it.dimParam)),it.denotation!=null&&(ot.denotation=String(it.denotation)),ot},_.toObject=function(it,ot){ot||(ot={});var lt={};return ot.defaults&&(lt.denotation=""),it.dimValue!=null&&it.hasOwnProperty("dimValue")&&(typeof it.dimValue=="number"?lt.dimValue=ot.longs===String?String(it.dimValue):it.dimValue:lt.dimValue=ot.longs===String?rt.Long.prototype.toString.call(it.dimValue):ot.longs===Number?new rt.LongBits(it.dimValue.low>>>0,it.dimValue.high>>>0).toNumber():it.dimValue,ot.oneofs&&(lt.value="dimValue")),it.dimParam!=null&&it.hasOwnProperty("dimParam")&&(lt.dimParam=it.dimParam,ot.oneofs&&(lt.value="dimParam")),it.denotation!=null&&it.hasOwnProperty("denotation")&&(lt.denotation=it.denotation),lt},_.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},_}(),$}(),g.TypeProto=function(){function $(nt){if(nt)for(var it=Object.keys(nt),ot=0;ot<it.length;++ot)nt[it[ot]]!=null&&(this[it[ot]]=nt[it[ot]])}var _;return $.prototype.tensorType=null,$.prototype.denotation="",Object.defineProperty($.prototype,"value",{get:rt.oneOfGetter(_=["tensorType"]),set:rt.oneOfSetter(_)}),$.create=function(nt){return new $(nt)},$.encode=function(nt,it){return it||(it=et.create()),nt.tensorType!=null&&nt.hasOwnProperty("tensorType")&&st.onnx.TypeProto.Tensor.encode(nt.tensorType,it.uint32(10).fork()).ldelim(),nt.denotation!=null&&nt.hasOwnProperty("denotation")&&it.uint32(50).string(nt.denotation),it},$.encodeDelimited=function(nt,it){return this.encode(nt,it).ldelim()},$.decode=function(nt,it){nt instanceof _e||(nt=_e.create(nt));for(var ot=it===void 0?nt.len:nt.pos+it,lt=new st.onnx.TypeProto;nt.pos<ot;){var at=nt.uint32();switch(at>>>3){case 1:lt.tensorType=st.onnx.TypeProto.Tensor.decode(nt,nt.uint32());break;case 6:lt.denotation=nt.string();break;default:nt.skipType(7&at)}}return lt},$.decodeDelimited=function(nt){return nt instanceof _e||(nt=new _e(nt)),this.decode(nt,nt.uint32())},$.verify=function(nt){if(typeof nt!="object"||nt===null)return"object expected";if(nt.tensorType!=null&&nt.hasOwnProperty("tensorType")){var it=st.onnx.TypeProto.Tensor.verify(nt.tensorType);if(it)return"tensorType."+it}return nt.denotation!=null&&nt.hasOwnProperty("denotation")&&!rt.isString(nt.denotation)?"denotation: string expected":null},$.fromObject=function(nt){if(nt instanceof st.onnx.TypeProto)return nt;var it=new st.onnx.TypeProto;if(nt.tensorType!=null){if(typeof nt.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");it.tensorType=st.onnx.TypeProto.Tensor.fromObject(nt.tensorType)}return nt.denotation!=null&&(it.denotation=String(nt.denotation)),it},$.toObject=function(nt,it){it||(it={});var ot={};return it.defaults&&(ot.denotation=""),nt.tensorType!=null&&nt.hasOwnProperty("tensorType")&&(ot.tensorType=st.onnx.TypeProto.Tensor.toObject(nt.tensorType,it),it.oneofs&&(ot.value="tensorType")),nt.denotation!=null&&nt.hasOwnProperty("denotation")&&(ot.denotation=nt.denotation),ot},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$.Tensor=function(){function nt(it){if(it)for(var ot=Object.keys(it),lt=0;lt<ot.length;++lt)it[ot[lt]]!=null&&(this[ot[lt]]=it[ot[lt]])}return nt.prototype.elemType=0,nt.prototype.shape=null,nt.create=function(it){return new nt(it)},nt.encode=function(it,ot){return ot||(ot=et.create()),it.elemType!=null&&it.hasOwnProperty("elemType")&&ot.uint32(8).int32(it.elemType),it.shape!=null&&it.hasOwnProperty("shape")&&st.onnx.TensorShapeProto.encode(it.shape,ot.uint32(18).fork()).ldelim(),ot},nt.encodeDelimited=function(it,ot){return this.encode(it,ot).ldelim()},nt.decode=function(it,ot){it instanceof _e||(it=_e.create(it));for(var lt=ot===void 0?it.len:it.pos+ot,at=new st.onnx.TypeProto.Tensor;it.pos<lt;){var ct=it.uint32();switch(ct>>>3){case 1:at.elemType=it.int32();break;case 2:at.shape=st.onnx.TensorShapeProto.decode(it,it.uint32());break;default:it.skipType(7&ct)}}return at},nt.decodeDelimited=function(it){return it instanceof _e||(it=new _e(it)),this.decode(it,it.uint32())},nt.verify=function(it){if(typeof it!="object"||it===null)return"object expected";if(it.elemType!=null&&it.hasOwnProperty("elemType")&&!rt.isInteger(it.elemType))return"elemType: integer expected";if(it.shape!=null&&it.hasOwnProperty("shape")){var ot=st.onnx.TensorShapeProto.verify(it.shape);if(ot)return"shape."+ot}return null},nt.fromObject=function(it){if(it instanceof st.onnx.TypeProto.Tensor)return it;var ot=new st.onnx.TypeProto.Tensor;if(it.elemType!=null&&(ot.elemType=0|it.elemType),it.shape!=null){if(typeof it.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");ot.shape=st.onnx.TensorShapeProto.fromObject(it.shape)}return ot},nt.toObject=function(it,ot){ot||(ot={});var lt={};return ot.defaults&&(lt.elemType=0,lt.shape=null),it.elemType!=null&&it.hasOwnProperty("elemType")&&(lt.elemType=it.elemType),it.shape!=null&&it.hasOwnProperty("shape")&&(lt.shape=st.onnx.TensorShapeProto.toObject(it.shape,ot)),lt},nt.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},nt}(),$}(),g.OperatorSetIdProto=function(){function $(_){if(_)for(var nt=Object.keys(_),it=0;it<nt.length;++it)_[nt[it]]!=null&&(this[nt[it]]=_[nt[it]])}return $.prototype.domain="",$.prototype.version=rt.Long?rt.Long.fromBits(0,0,!1):0,$.create=function(_){return new $(_)},$.encode=function(_,nt){return nt||(nt=et.create()),_.domain!=null&&_.hasOwnProperty("domain")&&nt.uint32(10).string(_.domain),_.version!=null&&_.hasOwnProperty("version")&&nt.uint32(16).int64(_.version),nt},$.encodeDelimited=function(_,nt){return this.encode(_,nt).ldelim()},$.decode=function(_,nt){_ instanceof _e||(_=_e.create(_));for(var it=nt===void 0?_.len:_.pos+nt,ot=new st.onnx.OperatorSetIdProto;_.pos<it;){var lt=_.uint32();switch(lt>>>3){case 1:ot.domain=_.string();break;case 2:ot.version=_.int64();break;default:_.skipType(7&lt)}}return ot},$.decodeDelimited=function(_){return _ instanceof _e||(_=new _e(_)),this.decode(_,_.uint32())},$.verify=function(_){return typeof _!="object"||_===null?"object expected":_.domain!=null&&_.hasOwnProperty("domain")&&!rt.isString(_.domain)?"domain: string expected":_.version!=null&&_.hasOwnProperty("version")&&!(rt.isInteger(_.version)||_.version&&rt.isInteger(_.version.low)&&rt.isInteger(_.version.high))?"version: integer|Long expected":null},$.fromObject=function(_){if(_ instanceof st.onnx.OperatorSetIdProto)return _;var nt=new st.onnx.OperatorSetIdProto;return _.domain!=null&&(nt.domain=String(_.domain)),_.version!=null&&(rt.Long?(nt.version=rt.Long.fromValue(_.version)).unsigned=!1:typeof _.version=="string"?nt.version=parseInt(_.version,10):typeof _.version=="number"?nt.version=_.version:typeof _.version=="object"&&(nt.version=new rt.LongBits(_.version.low>>>0,_.version.high>>>0).toNumber())),nt},$.toObject=function(_,nt){nt||(nt={});var it={};if(nt.defaults)if(it.domain="",rt.Long){var ot=new rt.Long(0,0,!1);it.version=nt.longs===String?ot.toString():nt.longs===Number?ot.toNumber():ot}else it.version=nt.longs===String?"0":0;return _.domain!=null&&_.hasOwnProperty("domain")&&(it.domain=_.domain),_.version!=null&&_.hasOwnProperty("version")&&(typeof _.version=="number"?it.version=nt.longs===String?String(_.version):_.version:it.version=nt.longs===String?rt.Long.prototype.toString.call(_.version):nt.longs===Number?new rt.LongBits(_.version.low>>>0,_.version.high>>>0).toNumber():_.version),it},$.prototype.toJSON=function(){return this.constructor.toObject(this,b.util.toJSONOptions)},$}(),g),a.exports=st},2100:(a,e,c)=>{a.exports=c(9482)},9482:(a,e,c)=>{var d=e;function h(){d.util._configure(),d.Writer._configure(d.BufferWriter),d.Reader._configure(d.BufferReader)}d.build="minimal",d.Writer=c(1173),d.BufferWriter=c(3155),d.Reader=c(1408),d.BufferReader=c(593),d.util=c(9693),d.rpc=c(5994),d.roots=c(5054),d.configure=h,h()},1408:(a,e,c)=>{a.exports=et;var d,h=c(9693),g=h.LongBits,b=h.utf8;function _e(ot,lt){return RangeError("index out of range: "+ot.pos+" + "+(lt||1)+" > "+ot.len)}function et(ot){this.buf=ot,this.pos=0,this.len=ot.length}var rt,st=typeof Uint8Array<"u"?function(ot){if(ot instanceof Uint8Array||Array.isArray(ot))return new et(ot);throw Error("illegal buffer")}:function(ot){if(Array.isArray(ot))return new et(ot);throw Error("illegal buffer")},$=function(){return h.Buffer?function(ot){return(et.create=function(lt){return h.Buffer.isBuffer(lt)?new d(lt):st(lt)})(ot)}:st};function _(){var ot=new g(0,0),lt=0;if(!(this.len-this.pos>4)){for(;lt<3;++lt){if(this.pos>=this.len)throw _e(this);if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<7*lt)>>>0,this.buf[this.pos++]<128)return ot}return ot.lo=(ot.lo|(127&this.buf[this.pos++])<<7*lt)>>>0,ot}for(;lt<4;++lt)if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<7*lt)>>>0,this.buf[this.pos++]<128)return ot;if(ot.lo=(ot.lo|(127&this.buf[this.pos])<<28)>>>0,ot.hi=(ot.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return ot;if(lt=0,this.len-this.pos>4){for(;lt<5;++lt)if(ot.hi=(ot.hi|(127&this.buf[this.pos])<<7*lt+3)>>>0,this.buf[this.pos++]<128)return ot}else for(;lt<5;++lt){if(this.pos>=this.len)throw _e(this);if(ot.hi=(ot.hi|(127&this.buf[this.pos])<<7*lt+3)>>>0,this.buf[this.pos++]<128)return ot}throw Error("invalid varint encoding")}function nt(ot,lt){return(ot[lt-4]|ot[lt-3]<<8|ot[lt-2]<<16|ot[lt-1]<<24)>>>0}function it(){if(this.pos+8>this.len)throw _e(this,8);return new g(nt(this.buf,this.pos+=4),nt(this.buf,this.pos+=4))}et.create=$(),et.prototype._slice=h.Array.prototype.subarray||h.Array.prototype.slice,et.prototype.uint32=(rt=4294967295,function(){if(rt=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(rt=(rt|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(rt=(rt|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(rt=(rt|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(rt=(rt|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return rt;if((this.pos+=5)>this.len)throw this.pos=this.len,_e(this,10);return rt}),et.prototype.int32=function(){return 0|this.uint32()},et.prototype.sint32=function(){var ot=this.uint32();return ot>>>1^-(1&ot)|0},et.prototype.bool=function(){return this.uint32()!==0},et.prototype.fixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return nt(this.buf,this.pos+=4)},et.prototype.sfixed32=function(){if(this.pos+4>this.len)throw _e(this,4);return 0|nt(this.buf,this.pos+=4)},et.prototype.float=function(){if(this.pos+4>this.len)throw _e(this,4);var ot=h.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ot},et.prototype.double=function(){if(this.pos+8>this.len)throw _e(this,4);var ot=h.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ot},et.prototype.bytes=function(){var ot=this.uint32(),lt=this.pos,at=this.pos+ot;if(at>this.len)throw _e(this,ot);return this.pos+=ot,Array.isArray(this.buf)?this.buf.slice(lt,at):lt===at?new this.buf.constructor(0):this._slice.call(this.buf,lt,at)},et.prototype.string=function(){var ot=this.bytes();return b.read(ot,0,ot.length)},et.prototype.skip=function(ot){if(typeof ot=="number"){if(this.pos+ot>this.len)throw _e(this,ot);this.pos+=ot}else do if(this.pos>=this.len)throw _e(this);while(128&this.buf[this.pos++]);return this},et.prototype.skipType=function(ot){switch(ot){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(ot=7&this.uint32())!=4;)this.skipType(ot);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+ot+" at offset "+this.pos)}return this},et._configure=function(ot){d=ot,et.create=$(),d._configure();var lt=h.Long?"toLong":"toNumber";h.merge(et.prototype,{int64:function(){return _.call(this)[lt](!1)},uint64:function(){return _.call(this)[lt](!0)},sint64:function(){return _.call(this).zzDecode()[lt](!1)},fixed64:function(){return it.call(this)[lt](!0)},sfixed64:function(){return it.call(this)[lt](!1)}})}},593:(a,e,c)=>{a.exports=g;var d=c(1408);(g.prototype=Object.create(d.prototype)).constructor=g;var h=c(9693);function g(b){d.call(this,b)}g._configure=function(){h.Buffer&&(g.prototype._slice=h.Buffer.prototype.slice)},g.prototype.string=function(){var b=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+b,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+b,this.len))},g._configure()},5054:a=>{a.exports={}},5994:(a,e,c)=>{e.Service=c(7948)},7948:(a,e,c)=>{a.exports=h;var d=c(9693);function h(g,b,_e){if(typeof g!="function")throw TypeError("rpcImpl must be a function");d.EventEmitter.call(this),this.rpcImpl=g,this.requestDelimited=!!b,this.responseDelimited=!!_e}(h.prototype=Object.create(d.EventEmitter.prototype)).constructor=h,h.prototype.rpcCall=function g(b,_e,et,rt,st){if(!rt)throw TypeError("request must be specified");var $=this;if(!st)return d.asPromise(g,$,b,_e,et,rt);if($.rpcImpl)try{return $.rpcImpl(b,_e[$.requestDelimited?"encodeDelimited":"encode"](rt).finish(),function(_,nt){if(_)return $.emit("error",_,b),st(_);if(nt!==null){if(!(nt instanceof et))try{nt=et[$.responseDelimited?"decodeDelimited":"decode"](nt)}catch(it){return $.emit("error",it,b),st(it)}return $.emit("data",nt,b),st(null,nt)}$.end(!0)})}catch(_){return $.emit("error",_,b),void setTimeout(function(){st(_)},0)}else setTimeout(function(){st(Error("already ended"))},0)},h.prototype.end=function(g){return this.rpcImpl&&(g||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(a,e,c)=>{a.exports=h;var d=c(9693);function h(et,rt){this.lo=et>>>0,this.hi=rt>>>0}var g=h.zero=new h(0,0);g.toNumber=function(){return 0},g.zzEncode=g.zzDecode=function(){return this},g.length=function(){return 1};var b=h.zeroHash="\0\0\0\0\0\0\0\0";h.fromNumber=function(et){if(et===0)return g;var rt=et<0;rt&&(et=-et);var st=et>>>0,$=(et-st)/4294967296>>>0;return rt&&($=~$>>>0,st=~st>>>0,++st>4294967295&&(st=0,++$>4294967295&&($=0))),new h(st,$)},h.from=function(et){if(typeof et=="number")return h.fromNumber(et);if(d.isString(et)){if(!d.Long)return h.fromNumber(parseInt(et,10));et=d.Long.fromString(et)}return et.low||et.high?new h(et.low>>>0,et.high>>>0):g},h.prototype.toNumber=function(et){if(!et&&this.hi>>>31){var rt=1+~this.lo>>>0,st=~this.hi>>>0;return rt||(st=st+1>>>0),-(rt+4294967296*st)}return this.lo+4294967296*this.hi},h.prototype.toLong=function(et){return d.Long?new d.Long(0|this.lo,0|this.hi,!!et):{low:0|this.lo,high:0|this.hi,unsigned:!!et}};var _e=String.prototype.charCodeAt;h.fromHash=function(et){return et===b?g:new h((_e.call(et,0)|_e.call(et,1)<<8|_e.call(et,2)<<16|_e.call(et,3)<<24)>>>0,(_e.call(et,4)|_e.call(et,5)<<8|_e.call(et,6)<<16|_e.call(et,7)<<24)>>>0)},h.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},h.prototype.zzEncode=function(){var et=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^et)>>>0,this.lo=(this.lo<<1^et)>>>0,this},h.prototype.zzDecode=function(){var et=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^et)>>>0,this.hi=(this.hi>>>1^et)>>>0,this},h.prototype.length=function(){var et=this.lo,rt=(this.lo>>>28|this.hi<<4)>>>0,st=this.hi>>>24;return st===0?rt===0?et<16384?et<128?1:2:et<2097152?3:4:rt<16384?rt<128?5:6:rt<2097152?7:8:st<128?9:10}},9693:function(a,e,c){var d=e;function h(b,_e,et){for(var rt=Object.keys(_e),st=0;st<rt.length;++st)b[rt[st]]!==void 0&&et||(b[rt[st]]=_e[rt[st]]);return b}function g(b){function _e(et,rt){if(!(this instanceof _e))return new _e(et,rt);Object.defineProperty(this,"message",{get:function(){return et}}),Error.captureStackTrace?Error.captureStackTrace(this,_e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),rt&&h(this,rt)}return(_e.prototype=Object.create(Error.prototype)).constructor=_e,Object.defineProperty(_e.prototype,"name",{get:function(){return b}}),_e.prototype.toString=function(){return this.name+": "+this.message},_e}d.asPromise=c(4537),d.base64=c(7419),d.EventEmitter=c(9211),d.float=c(945),d.inquire=c(7199),d.utf8=c(4997),d.pool=c(6662),d.LongBits=c(1945),d.isNode=!!(c.g!==void 0&&c.g&&c.g.process&&c.g.process.versions&&c.g.process.versions.node),d.global=d.isNode&&c.g||typeof window<"u"&&window||typeof self<"u"&&self||this,d.emptyArray=Object.freeze?Object.freeze([]):[],d.emptyObject=Object.freeze?Object.freeze({}):{},d.isInteger=Number.isInteger||function(b){return typeof b=="number"&&isFinite(b)&&Math.floor(b)===b},d.isString=function(b){return typeof b=="string"||b instanceof String},d.isObject=function(b){return b&&typeof b=="object"},d.isset=d.isSet=function(b,_e){var et=b[_e];return!(et==null||!b.hasOwnProperty(_e))&&(typeof et!="object"||(Array.isArray(et)?et.length:Object.keys(et).length)>0)},d.Buffer=function(){try{var b=d.inquire("buffer").Buffer;return b.prototype.utf8Write?b:null}catch{return null}}(),d._Buffer_from=null,d._Buffer_allocUnsafe=null,d.newBuffer=function(b){return typeof b=="number"?d.Buffer?d._Buffer_allocUnsafe(b):new d.Array(b):d.Buffer?d._Buffer_from(b):typeof Uint8Array>"u"?b:new Uint8Array(b)},d.Array=typeof Uint8Array<"u"?Uint8Array:Array,d.Long=d.global.dcodeIO&&d.global.dcodeIO.Long||d.global.Long||d.inquire("long"),d.key2Re=/^true|false|0|1$/,d.key32Re=/^-?(?:0|[1-9][0-9]*)$/,d.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,d.longToHash=function(b){return b?d.LongBits.from(b).toHash():d.LongBits.zeroHash},d.longFromHash=function(b,_e){var et=d.LongBits.fromHash(b);return d.Long?d.Long.fromBits(et.lo,et.hi,_e):et.toNumber(!!_e)},d.merge=h,d.lcFirst=function(b){return b.charAt(0).toLowerCase()+b.substring(1)},d.newError=g,d.ProtocolError=g("ProtocolError"),d.oneOfGetter=function(b){for(var _e={},et=0;et<b.length;++et)_e[b[et]]=1;return function(){for(var rt=Object.keys(this),st=rt.length-1;st>-1;--st)if(_e[rt[st]]===1&&this[rt[st]]!==void 0&&this[rt[st]]!==null)return rt[st]}},d.oneOfSetter=function(b){return function(_e){for(var et=0;et<b.length;++et)b[et]!==_e&&delete this[b[et]]}},d.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},d._configure=function(){var b=d.Buffer;b?(d._Buffer_from=b.from!==Uint8Array.from&&b.from||function(_e,et){return new b(_e,et)},d._Buffer_allocUnsafe=b.allocUnsafe||function(_e){return new b(_e)}):d._Buffer_from=d._Buffer_allocUnsafe=null}},1173:(a,e,c)=>{a.exports=$;var d,h=c(9693),g=h.LongBits,b=h.base64,_e=h.utf8;function et(ct,dt,ht){this.fn=ct,this.len=dt,this.next=void 0,this.val=ht}function rt(){}function st(ct){this.head=ct.head,this.tail=ct.tail,this.len=ct.len,this.next=ct.states}function $(){this.len=0,this.head=new et(rt,0,0),this.tail=this.head,this.states=null}var _=function(){return h.Buffer?function(){return($.create=function(){return new d})()}:function(){return new $}};function nt(ct,dt,ht){dt[ht]=255&ct}function it(ct,dt){this.len=ct,this.next=void 0,this.val=dt}function ot(ct,dt,ht){for(;ct.hi;)dt[ht++]=127&ct.lo|128,ct.lo=(ct.lo>>>7|ct.hi<<25)>>>0,ct.hi>>>=7;for(;ct.lo>127;)dt[ht++]=127&ct.lo|128,ct.lo=ct.lo>>>7;dt[ht++]=ct.lo}function lt(ct,dt,ht){dt[ht]=255&ct,dt[ht+1]=ct>>>8&255,dt[ht+2]=ct>>>16&255,dt[ht+3]=ct>>>24}$.create=_(),$.alloc=function(ct){return new h.Array(ct)},h.Array!==Array&&($.alloc=h.pool($.alloc,h.Array.prototype.subarray)),$.prototype._push=function(ct,dt,ht){return this.tail=this.tail.next=new et(ct,dt,ht),this.len+=dt,this},it.prototype=Object.create(et.prototype),it.prototype.fn=function(ct,dt,ht){for(;ct>127;)dt[ht++]=127&ct|128,ct>>>=7;dt[ht]=ct},$.prototype.uint32=function(ct){return this.len+=(this.tail=this.tail.next=new it((ct>>>=0)<128?1:ct<16384?2:ct<2097152?3:ct<268435456?4:5,ct)).len,this},$.prototype.int32=function(ct){return ct<0?this._push(ot,10,g.fromNumber(ct)):this.uint32(ct)},$.prototype.sint32=function(ct){return this.uint32((ct<<1^ct>>31)>>>0)},$.prototype.uint64=function(ct){var dt=g.from(ct);return this._push(ot,dt.length(),dt)},$.prototype.int64=$.prototype.uint64,$.prototype.sint64=function(ct){var dt=g.from(ct).zzEncode();return this._push(ot,dt.length(),dt)},$.prototype.bool=function(ct){return this._push(nt,1,ct?1:0)},$.prototype.fixed32=function(ct){return this._push(lt,4,ct>>>0)},$.prototype.sfixed32=$.prototype.fixed32,$.prototype.fixed64=function(ct){var dt=g.from(ct);return this._push(lt,4,dt.lo)._push(lt,4,dt.hi)},$.prototype.sfixed64=$.prototype.fixed64,$.prototype.float=function(ct){return this._push(h.float.writeFloatLE,4,ct)},$.prototype.double=function(ct){return this._push(h.float.writeDoubleLE,8,ct)};var at=h.Array.prototype.set?function(ct,dt,ht){dt.set(ct,ht)}:function(ct,dt,ht){for(var pt=0;pt<ct.length;++pt)dt[ht+pt]=ct[pt]};$.prototype.bytes=function(ct){var dt=ct.length>>>0;if(!dt)return this._push(nt,1,0);if(h.isString(ct)){var ht=$.alloc(dt=b.length(ct));b.decode(ct,ht,0),ct=ht}return this.uint32(dt)._push(at,dt,ct)},$.prototype.string=function(ct){var dt=_e.length(ct);return dt?this.uint32(dt)._push(_e.write,dt,ct):this._push(nt,1,0)},$.prototype.fork=function(){return this.states=new st(this),this.head=this.tail=new et(rt,0,0),this.len=0,this},$.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new et(rt,0,0),this.len=0),this},$.prototype.ldelim=function(){var ct=this.head,dt=this.tail,ht=this.len;return this.reset().uint32(ht),ht&&(this.tail.next=ct.next,this.tail=dt,this.len+=ht),this},$.prototype.finish=function(){for(var ct=this.head.next,dt=this.constructor.alloc(this.len),ht=0;ct;)ct.fn(ct.val,dt,ht),ht+=ct.len,ct=ct.next;return dt},$._configure=function(ct){d=ct,$.create=_(),d._configure()}},3155:(a,e,c)=>{a.exports=g;var d=c(1173);(g.prototype=Object.create(d.prototype)).constructor=g;var h=c(9693);function g(){d.call(this)}function b(_e,et,rt){_e.length<40?h.utf8.write(_e,et,rt):et.utf8Write?et.utf8Write(_e,rt):et.write(_e,rt)}g._configure=function(){g.alloc=h._Buffer_allocUnsafe,g.writeBytesBuffer=h.Buffer&&h.Buffer.prototype instanceof Uint8Array&&h.Buffer.prototype.set.name==="set"?function(_e,et,rt){et.set(_e,rt)}:function(_e,et,rt){if(_e.copy)_e.copy(et,rt,0,_e.length);else for(var st=0;st<_e.length;)et[rt++]=_e[st++]}},g.prototype.bytes=function(_e){h.isString(_e)&&(_e=h._Buffer_from(_e,"base64"));var et=_e.length>>>0;return this.uint32(et),et&&this._push(g.writeBytesBuffer,et,_e),this},g.prototype.string=function(_e){var et=h.Buffer.byteLength(_e);return this.uint32(et),et&&this._push(b,et,_e),this},g._configure()},7714:(a,e,c)=>{e.R=void 0;const d=c(6919),h=c(7448);e.R=new class{async init(){}async createSessionHandler(g,b){const _e=new d.Session(b);return await _e.loadModel(g),new h.OnnxjsSessionHandler(_e)}}},4200:(a,e,c)=>{e.c8=e.rX=void 0;const d=c(1670),h=c(5381),g=c(2157),b=c(2306);e.rX=()=>{if((typeof d.env.wasm.initTimeout!="number"||d.env.wasm.initTimeout<0)&&(d.env.wasm.initTimeout=0),typeof d.env.wasm.simd!="boolean"&&(d.env.wasm.simd=!0),typeof d.env.wasm.proxy!="boolean"&&(d.env.wasm.proxy=!1),typeof d.env.wasm.numThreads!="number"||!Number.isInteger(d.env.wasm.numThreads)||d.env.wasm.numThreads<=0){const _e=typeof navigator>"u"?(0,h.cpus)().length:navigator.hardwareConcurrency;d.env.wasm.numThreads=Math.min(4,Math.ceil((_e||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,g.initWasm)()}async createSessionHandler(_e,et){const rt=new b.OnnxruntimeWebAssemblySessionHandler;return await rt.loadModel(_e,et),Promise.resolve(rt)}}},6018:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(b,_e,et,rt){rt===void 0&&(rt=et);var st=Object.getOwnPropertyDescriptor(_e,et);st&&!("get"in st?!_e.__esModule:st.writable||st.configurable)||(st={enumerable:!0,get:function(){return _e[et]}}),Object.defineProperty(b,rt,st)}:function(b,_e,et,rt){rt===void 0&&(rt=et),b[rt]=_e[et]}),h=this&&this.__exportStar||function(b,_e){for(var et in b)et==="default"||Object.prototype.hasOwnProperty.call(_e,et)||d(_e,b,et)};Object.defineProperty(e,"__esModule",{value:!0}),h(c(1670),e);const g=c(1670);{const b=c(7714).R;(0,g.registerBackend)("webgl",b,-10)}{const b=c(4200).c8;(0,g.registerBackend)("cpu",b,10),(0,g.registerBackend)("wasm",b,10),(0,g.registerBackend)("xnnpack",b,9)}},246:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class c{constructor(h){Object.assign(this,h)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(h=>`${this[h]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=d=>new c(d)},7778:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const d=c(1446),h=c(9395),g=c(9162),b=c(2517);var _e=h.onnxruntime.experimental.fbs;class et{constructor(st){if(this._attributes=new Map,st!=null){for(const $ of st)$ instanceof d.onnx.AttributeProto?this._attributes.set($.name,[et.getValue($),et.getType($)]):$ instanceof _e.Attribute&&this._attributes.set($.name(),[et.getValue($),et.getType($)]);if(this._attributes.size<st.length)throw new Error("duplicated attribute names")}}set(st,$,_){this._attributes.set(st,[_,$])}delete(st){this._attributes.delete(st)}getFloat(st,$){return this.get(st,"float",$)}getInt(st,$){return this.get(st,"int",$)}getString(st,$){return this.get(st,"string",$)}getTensor(st,$){return this.get(st,"tensor",$)}getFloats(st,$){return this.get(st,"floats",$)}getInts(st,$){return this.get(st,"ints",$)}getStrings(st,$){return this.get(st,"strings",$)}getTensors(st,$){return this.get(st,"tensors",$)}get(st,$,_){const nt=this._attributes.get(st);if(nt===void 0){if(_!==void 0)return _;throw new Error(`required attribute not found: ${st}`)}if(nt[1]!==$)throw new Error(`type mismatch: expected ${$} but got ${nt[1]}`);return nt[0]}static getType(st){const $=st instanceof d.onnx.AttributeProto?st.type:st.type();switch($){case d.onnx.AttributeProto.AttributeType.FLOAT:return"float";case d.onnx.AttributeProto.AttributeType.INT:return"int";case d.onnx.AttributeProto.AttributeType.STRING:return"string";case d.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case d.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case d.onnx.AttributeProto.AttributeType.INTS:return"ints";case d.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case d.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${d.onnx.AttributeProto.AttributeType[$]}`)}}static getValue(st){const $=st instanceof d.onnx.AttributeProto?st.type:st.type();if($===d.onnx.AttributeProto.AttributeType.GRAPH||$===d.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const _=this.getValueNoCheck(st);if($===d.onnx.AttributeProto.AttributeType.INT&&b.LongUtil.isLong(_))return b.LongUtil.longToNumber(_);if($===d.onnx.AttributeProto.AttributeType.INTS){const nt=_,it=new Array(nt.length);for(let ot=0;ot<nt.length;ot++){const lt=nt[ot];it[ot]=b.LongUtil.longToNumber(lt)}return it}if($===d.onnx.AttributeProto.AttributeType.TENSOR)return st instanceof d.onnx.AttributeProto?g.Tensor.fromProto(_):g.Tensor.fromOrtTensor(_);if($===d.onnx.AttributeProto.AttributeType.TENSORS){if(st instanceof d.onnx.AttributeProto)return _.map(nt=>g.Tensor.fromProto(nt));if(st instanceof _e.Attribute)return _.map(nt=>g.Tensor.fromOrtTensor(nt))}if($===d.onnx.AttributeProto.AttributeType.STRING&&st instanceof d.onnx.AttributeProto){const nt=_;return(0,b.decodeUtf8String)(nt)}return $===d.onnx.AttributeProto.AttributeType.STRINGS&&st instanceof d.onnx.AttributeProto?_.map(b.decodeUtf8String):_}static getValueNoCheck(st){return st instanceof d.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(st):this.getValueNoCheckFromOrtFormat(st)}static getValueNoCheckFromOnnxFormat(st){switch(st.type){case d.onnx.AttributeProto.AttributeType.FLOAT:return st.f;case d.onnx.AttributeProto.AttributeType.INT:return st.i;case d.onnx.AttributeProto.AttributeType.STRING:return st.s;case d.onnx.AttributeProto.AttributeType.TENSOR:return st.t;case d.onnx.AttributeProto.AttributeType.GRAPH:return st.g;case d.onnx.AttributeProto.AttributeType.FLOATS:return st.floats;case d.onnx.AttributeProto.AttributeType.INTS:return st.ints;case d.onnx.AttributeProto.AttributeType.STRINGS:return st.strings;case d.onnx.AttributeProto.AttributeType.TENSORS:return st.tensors;case d.onnx.AttributeProto.AttributeType.GRAPHS:return st.graphs;default:throw new Error(`unsupported attribute type: ${d.onnx.AttributeProto.AttributeType[st.type]}`)}}static getValueNoCheckFromOrtFormat(st){switch(st.type()){case _e.AttributeType.FLOAT:return st.f();case _e.AttributeType.INT:return st.i();case _e.AttributeType.STRING:return st.s();case _e.AttributeType.TENSOR:return st.t();case _e.AttributeType.GRAPH:return st.g();case _e.AttributeType.FLOATS:return st.floatsArray();case _e.AttributeType.INTS:{const $=[];for(let _=0;_<st.intsLength();_++)$.push(st.ints(_));return $}case _e.AttributeType.STRINGS:{const $=[];for(let _=0;_<st.stringsLength();_++)$.push(st.strings(_));return $}case _e.AttributeType.TENSORS:{const $=[];for(let _=0;_<st.tensorsLength();_++)$.push(st.tensors(_));return $}default:throw new Error(`unsupported attribute type: ${_e.AttributeType[st.type()]}`)}}}e.Attribute=et},7091:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const d=c(5038),h=new Map;async function g(b){const _e=e.backend;if(_e[b]!==void 0&&function(et){const rt=et;return"initialize"in rt&&typeof rt.initialize=="function"&&"createSessionHandler"in rt&&typeof rt.createSessionHandler=="function"&&"dispose"in rt&&typeof rt.dispose=="function"}(_e[b])){const et=_e[b];let rt=et.initialize();if(typeof rt=="object"&&"then"in rt&&(rt=await rt),rt)return h.set(b,et),et}}e.backend={webgl:new d.WebGLBackend},e.resolveBackend=async function b(_e){if(!_e)return b(["webgl"]);{const et=typeof _e=="string"?[_e]:_e;for(const rt of et){const st=h.get(rt);if(st)return st;const $=await g(rt);if($)return $}}throw new Error("no available backend to use")}},5038:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const d=c(1670),h=c(6231),g=c(6416),b=c(7305);e.WebGLBackend=class{get contextId(){return d.env.webgl.contextId}set contextId(_e){d.env.webgl.contextId=_e}get matmulMaxBatchSize(){return d.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(_e){d.env.webgl.matmulMaxBatchSize=_e}get textureCacheMode(){return d.env.webgl.textureCacheMode}set textureCacheMode(_e){d.env.webgl.textureCacheMode=_e}get pack(){return d.env.webgl.pack}set pack(_e){d.env.webgl.pack=_e}get async(){return d.env.webgl.async}set async(_e){d.env.webgl.async=_e}initialize(){try{return this.glContext=(0,b.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),h.Logger.setWithEnv(d.env),h.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(_e){return h.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${_e}`),!1}}createSessionHandler(_e){return new g.WebGLSessionHandler(this,_e)}dispose(){this.glContext.dispose()}}},5107:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const d=c(2517),h=c(8520),g=c(5060),b=c(7859),_e=c(9390);class et extends h.GlslLib{constructor(st){super(st)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new h.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new h.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const st=this.context.outputTextureLayout;return st.isPacked?this.getPackedOutputSamplingSnippet(st):this.getUnpackedOutputSamplingSnippet(st)}getPackedOutputSamplingSnippet(st){const $=st.unpackedShape,_=[st.width,st.height],nt={},it="getOutputCoords";switch($.length){case 0:nt[it]=this.getOutputScalarCoords();break;case 1:nt[it]=this.getOutputPacked1DCoords($,_);break;case 2:nt[it]=this.getOutputPacked2DCoords($,_);break;case 3:nt[it]=this.getOutputPacked3DCoords($,_);break;default:nt[it]=this.getOutputPackedNDCoords($,_)}const ot=`
      void setOutput(vec4 val) {
        ${(0,g.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return nt.floatTextureSetRGBA=new h.GlslLibRoutine(ot),nt}getUnpackedOutputSamplingSnippet(st){const $=st.unpackedShape,_=[st.width,st.height],nt={},it="getOutputCoords";switch($.length){case 0:nt[it]=this.getOutputScalarCoords();break;case 1:nt[it]=this.getOutputUnpacked1DCoords($,_);break;case 2:nt[it]=this.getOutputUnpacked2DCoords($,_);break;case 3:nt[it]=this.getOutputUnpacked3DCoords($,_);break;case 4:nt[it]=this.getOutputUnpacked4DCoords($,_);break;case 5:nt[it]=this.getOutputUnpacked5DCoords($,_);break;case 6:nt[it]=this.getOutputUnpacked6DCoords($,_);break;default:throw new Error(`Unsupported output dimensionality: ${$.length}`)}const ot=`
        void setOutput(float val) {
          ${(0,g.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return nt.floatTextureSetR=new h.GlslLibRoutine(ot),nt}getOutputScalarCoords(){return new h.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(st,$){const _=$;let nt="";return _[0]===1?(nt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${_[1]}.0);
          }
        `,new h.GlslLibRoutine(nt)):_[1]===1?(nt=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${_[0]}.0);
          }
        `,new h.GlslLibRoutine(nt)):(nt=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${_[0]}, ${_[1]}));
          return 2 * (resTexRC.y * ${_[0]} + resTexRC.x);
        }
      `,new h.GlslLibRoutine(nt))}getOutputPacked2DCoords(st,$){let _="";if(d.ArrayUtil.arraysEqual(st,$))return _=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${$[0]}, ${$[1]}));
        }
      `,new h.GlslLibRoutine(_);const nt=$,it=Math.ceil(st[1]/2);return _=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${nt[0]}, ${nt[1]}));

          int index = resTexRC.y * ${nt[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${it}) * 2;
          int c = 2 * (index / ${it});

          return ivec2(r, c);
        }
      `,new h.GlslLibRoutine(_)}getOutputPacked3DCoords(st,$){const _=[$[0],$[1]],nt=Math.ceil(st[2]/2),it=nt*Math.ceil(st[1]/2),ot=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${_[0]}, ${_[1]}));
          int index = resTexRC.y * ${_[0]} + resTexRC.x;

          int b = index / ${it};
          index -= b * ${it};

          // reverse r and c order for packed texture
          int r = imod(index, ${nt}) * 2;
          int c = 2 * (index / ${nt});

          return ivec3(b, r, c);
        }
      `;return new h.GlslLibRoutine(ot)}getOutputPackedNDCoords(st,$){const _=[$[0],$[1]],nt=Math.ceil(st[st.length-1]/2),it=nt*Math.ceil(st[st.length-2]/2);let ot=it,lt="",at="b, r, c";for(let dt=2;dt<st.length-1;dt++)ot*=st[st.length-dt-1],lt=`
      int b${dt} = index / ${ot};
      index -= b${dt} * ${ot};
    `+lt,at=`b${dt}, `+at;const ct=`
      ivec${st.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${_[0]}, ${_[1]}));
        int index = resTexRC.y * ${_[0]} + resTexRC.x;

        ${lt}

        int b = index / ${it};
        index -= b * ${it};

        // reverse r and c order for packed texture
        int r = imod(index, ${nt}) * 2;
        int c = 2 * (index / ${nt});

        return ivec${st.length}(${at});
      }
    `;return new h.GlslLibRoutine(ct)}getOutputUnpacked1DCoords(st,$){const _=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          return resTexRC.y * ${$[0]} + resTexRC.x;
        }
      `;return new h.GlslLibRoutine(_)}getOutputUnpacked2DCoords(st,$){const _=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          int r = index / ${st[1]};
          int c = index - r * ${st[1]};
          return ivec2(r, c);
        }
      `;return new h.GlslLibRoutine(_)}getOutputUnpacked3DCoords(st,$){let _="";const nt=st.length;let it=null;nt<2&&(it=[]),it=new Array(nt-1),it[nt-2]=st[nt-1];for(let at=nt-3;at>=0;--at)it[at]=it[at+1]*st[at+1];const ot=["r","c","d"],lt=it.map((at,ct)=>`int ${ot[ct]} = index / ${at}; ${ct===it.length-1?`int ${ot[ct+1]} = index - ${ot[ct]} * ${at}`:`index -= ${ot[ct]} * ${at}`};`).join("");return _=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${lt}
          return ivec3(r, c, d);
        }
      `,new h.GlslLibRoutine(_)}getOutputUnpacked4DCoords(st,$){let _="";const nt=st.length;let it=null;nt<2&&(it=[]),it=new Array(nt-1),it[nt-2]=st[nt-1];for(let at=nt-3;at>=0;--at)it[at]=it[at+1]*st[at+1];const ot=["r","c","d","d2"],lt=it.map((at,ct)=>`int ${ot[ct]} = index / ${at}; ${ct===it.length-1?`int ${ot[ct+1]} = index - ${ot[ct]} * ${at}`:`index -= ${ot[ct]} * ${at}`};`).join("");return _=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${lt}
          return ivec4(r, c, d, d2);
        }
      `,new h.GlslLibRoutine(_)}getOutputUnpacked5DCoords(st,$){let _="";const nt=st.length;let it=null;nt<2&&(it=[]),it=new Array(nt-1),it[nt-2]=st[nt-1];for(let at=nt-3;at>=0;--at)it[at]=it[at+1]*st[at+1];const ot=["r","c","d","d2","d3"],lt=it.map((at,ct)=>`int ${ot[ct]} = index / ${at}; ${ct===it.length-1?`int ${ot[ct+1]} = index - ${ot[ct]} * ${at}`:`index -= ${ot[ct]} * ${at}`};`).join("");return _=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${$[0]}, ${$[1]}));
          int index = resTexRC.y * ${$[0]} + resTexRC.x;
          ${lt}
          return ivec5(r, c, d, d2, d3);
        }
      `,new h.GlslLibRoutine(_)}getOutputUnpacked6DCoords(st,$){let _="";const nt=st.length;let it=null;nt<2&&(it=[]),it=new Array(nt-1),it[nt-2]=st[nt-1];for(let at=nt-3;at>=0;--at)it[at]=it[at+1]*st[at+1];const ot=["r","c","d","d2","d3","d4"],lt=it.map((at,ct)=>`int ${ot[ct]} = index / ${at}; ${ct===it.length-1?`int ${ot[ct+1]} = index - ${ot[ct]} * ${at}`:`index -= ${ot[ct]} * ${at}`};`).join("");return _=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${$[0]}, ${$[1]}));
         int index = resTexRC.y * ${$[0]} + resTexRC.x;
         ${lt}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new h.GlslLibRoutine(_)}getCommonUtilFuncs(){const st={};let $="uvFromFlat";st[$]=new h.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),$="packedUVfrom1D",st[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="packedUVfrom2D",st[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="packedUVfrom3D",st[$]=new h.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),$="sampleTexture";const _=(0,g.getGlsl)(this.context.glContext.version);return st[$]=new h.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${_.texture2D}(textureSampler, uv).r;
        }`),st}getInputsSamplingSnippets(){const st={},$=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((_,nt)=>{const it=this.context.inputTextureLayouts[nt],ot=(0,_e.generateShaderFuncNameFromInputSamplerName)(_);it.isPacked?st[ot]=this.getPackedSamplerFromInput(ot,_,it):st[ot]=this.getUnpackedSamplerFromInput(ot,_,it);const lt=(0,_e.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(_);it.unpackedShape.length<=$.unpackedShape.length&&(it.isPacked?st[lt]=this.getPackedSamplerAtOutputCoords(lt,it,$,_):st[lt]=this.getUnpackedSamplerAtOutputCoords(lt,it,$,_))}),st}getPackedSamplerAtOutputCoords(st,$,_,nt){const it=$.unpackedShape,ot=_.unpackedShape,lt=nt,at=(0,_e.generateShaderFuncNameFromInputSamplerName)(lt),ct=it.length,dt=ot.length,ht=d.BroadcastUtil.getBroadcastDims(it,ot),pt=(0,_e.getCoordsDataType)(dt),ft=dt-ct;let mt;const xt=(0,_e.getGlChannels)();mt=ct===0?"":dt<2&&ht.length>=1?"coords = 0;":ht.map(Rt=>`coords.${xt[Rt+ft]} = 0;`).join(`
`);let gt="";gt=dt<2&&ct>0?"coords":it.map((Rt,Dt)=>`coords.${xt[Dt+ft]}`).join(", ");let Et="return outputValue;";const St=d.ShapeUtil.size(it)===1,Pt=d.ShapeUtil.size(ot)===1;if(ct!==1||St||Pt){if(St&&!Pt)Et=dt===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(ht.length){const Rt=ct-2,Dt=ct-1;ht.indexOf(Rt)>-1&&ht.indexOf(Dt)>-1?Et="return vec4(outputValue.x);":ht.indexOf(Rt)>-1?Et="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":ht.indexOf(Dt)>-1&&(Et="return vec4(outputValue.xx, outputValue.zz);")}}else Et=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Mt=`
      vec4 ${st}() {
        ${pt} coords = getOutputCoords();
        
        int lastDim = coords.${xt[dt-1]};
        coords.${xt[dt-1]} = coords.${xt[dt-2]};
        coords.${xt[dt-2]} = lastDim;
      
        ${mt}
        vec4 outputValue = ${at}(${gt});
        ${Et}
      }
    `;return new h.GlslLibRoutine(Mt,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(st,$,_,nt){const it=[_.width,_.height],ot=[$.width,$.height],lt=$.unpackedShape.length,at=_.unpackedShape.length,ct=$.unpackedShape,dt=_.unpackedShape,ht=(0,_e.generateShaderFuncNameFromInputSamplerName)(nt);if(lt===at&&d.ArrayUtil.arraysEqual(ot,it)){const Pt=`
          float ${st}() {
            return sampleTexture(${nt}, TexCoords);
          }
        `;return new h.GlslLibRoutine(Pt,["coordinates.sampleTexture"])}const pt=(0,_e.getCoordsDataType)(at),ft=d.BroadcastUtil.getBroadcastDims(ct,dt),mt=at-lt;let xt;const gt=(0,_e.getGlChannels)();xt=lt===0?"":at<2&&ft.length>=1?"coords = 0;":ft.map(Pt=>`coords.${gt[Pt+mt]} = 0;`).join(`
`);let Et="";Et=at<2&&lt>0?"coords":$.unpackedShape.map((Pt,Mt)=>`coords.${gt[Mt+mt]}`).join(", ");const St=`
        float ${st}() {
          ${pt} coords = getOutputCoords();
          ${xt}
          return ${ht}(${Et});
        }
      `;return new h.GlslLibRoutine(St,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(st,$,_){switch(_.unpackedShape.length){case 0:return this.getPackedSamplerScalar(st,$);case 1:return this.getPackedSampler1D(st,$,_);case 2:return this.getPackedSampler2D(st,$,_);case 3:return this.getPackedSampler3D(st,$,_);default:return this.getPackedSamplerND(st,$,_)}}getUnpackedSamplerFromInput(st,$,_){const nt=_.unpackedShape;switch(nt.length){case 0:return this.getUnpackedSamplerScalar(st,$,_);case 1:return this.getUnpackedSampler1D(st,$,_);case 2:return this.getUnpackedSampler2D(st,$,_);case 3:return this.getUnpackedSampler3D(st,$,_);case 4:return this.getUnpackedSampler4D(st,$,_);case 5:return this.getUnpackedSampler5D(st,$,_);case 6:return this.getUnpackedSampler6D(st,$,_);default:throw new Error(`Unsupported dimension ${nt.length}-D`)}}getPackedSamplerScalar(st,$){const _=`
          vec4 ${st}() {
            return ${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${$}, halfCR);
          }
        `;return new h.GlslLibRoutine(_)}getPackedSampler1D(st,$,_){const nt=[_.width,_.height],it=[nt[1],nt[0]],ot=(0,g.getGlsl)(this.context.glContext.version),lt=`vec4 ${st}(int index) {
      vec2 uv = packedUVfrom1D(
      ${it[0]}, ${it[1]}, index);
      return ${ot.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(lt,["coordinates.packedUVfrom1D"])}getPackedSampler2D(st,$,_){const nt=_.unpackedShape,it=[_.width,_.height],ot=(0,g.getGlsl)(this.context.glContext.version),lt=it[0],at=it[1];if(it!=null&&d.ArrayUtil.arraysEqual(nt,it)){const pt=`vec4 ${st}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${at}.0, ${lt}.0);
        return ${ot.texture2D}(${$}, uv);
      }`;return new h.GlslLibRoutine(pt)}const ct=it,dt=Math.ceil(nt[1]/2),ht=`vec4 ${st}(int row, int col) {
      vec2 uv = packedUVfrom2D(${ct[1]}, ${ct[0]}, ${dt}, row, col);
      return ${ot.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(ht,["coordinates.packedUVfrom2D"])}getPackedSampler3D(st,$,_){const nt=_.unpackedShape,it=[_.width,_.height],ot=[it[0],it[1]],lt=(0,g.getGlsl)(this.context.glContext.version);if(nt[0]===1){const pt=nt.slice(1),ft=[1,2],mt=(0,_e.squeezeInputShape)(nt,pt),xt=["b","row","col"],gt=JSON.parse(JSON.stringify(_));gt.unpackedShape=mt;const Et=this.getPackedSamplerFromInput(st,$,gt),St=`${Et.routineBody}
      vec4 ${st}(int b, int row, int col) {
        return ${st}(${(0,_e.getSqueezedParams)(xt,ft)});
      } `;return new h.GlslLibRoutine(St,Et.dependencies)}const at=ot[0],ct=ot[1],dt=Math.ceil(nt[2]/2),ht=`vec4 ${st}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${ct}, ${at}, ${dt*Math.ceil(nt[1]/2)}, ${dt}, b, row, col);
      return ${lt.texture2D}(${$}, uv);}`;return new h.GlslLibRoutine(ht,["coordinates.packedUVfrom3D"])}getPackedSamplerND(st,$,_){const nt=_.unpackedShape,it=nt.length,ot=[_.width,_.height],lt=(0,g.getGlsl)(this.context.glContext.version),at=[ot[0],ot[1]],ct=at[1],dt=at[0],ht=Math.ceil(nt[it-1]/2);let pt=ht*Math.ceil(nt[it-2]/2),ft="int b, int row, int col",mt=`b * ${pt} + (row / 2) * ${ht} + (col / 2)`;for(let gt=2;gt<it-1;gt++)ft=`int b${gt}, `+ft,pt*=nt[it-gt-1],mt=`b${gt} * ${pt} + `+mt;const xt=`vec4 ${st}(${ft}) {
      int index = ${mt};
      int texR = index / ${dt};
      int texC = index - texR * ${dt};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${dt}, ${ct});
      return ${lt.texture2D}(${$}, uv);
    }`;return new h.GlslLibRoutine(xt)}getUnpackedSamplerScalar(st,$,_){const[nt,it]=[_.width,_.height];if(nt===1&&it===1){const lt=`
          float ${st}() {
            return sampleTexture(${$}, halfCR);
          }
        `;return new h.GlslLibRoutine(lt,["coordinates.sampleTexture"])}const ot=`
        float ${st}() {
          int offset_${$} = coordsToOffset(TexCoords, ${nt}, ${it});
          vec2 uv = uvFromFlat(${nt}, ${it}, offset_${$});
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ot,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(st,$,_){const nt=_.width,it=_.height;if(it===1&&nt===1){const lt=`
        float ${st}(int index) {
          return sampleTexture(${$}, halfCR);
        }
      `;return new h.GlslLibRoutine(lt,["coordinates.sampleTexture"])}if(it===1){const lt=`
          float ${st}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${nt}.0, 0.5);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(lt,["coordinates.sampleTexture"])}if(nt===1){const lt=`
          float ${st}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${it}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(lt,["coordinates.sampleTexture"])}const ot=`
        float ${st}(int index) {
          vec2 uv = uvFromFlat(${nt}, ${it}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ot,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(st,$,_){const nt=_.unpackedShape,it=[_.height,_.width];if(it!=null&&d.ArrayUtil.arraysEqual(nt,it)){const pt=`
          float ${st}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${it[1]}.0, ${it[0]}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture"])}const{newShape:ot,keptDims:lt}=(0,b.squeezeShape)(nt),at=ot;if(at.length<nt.length){const pt=(0,_e.squeezeInputShape)(nt,at),ft=JSON.parse(JSON.stringify(_));ft.unpackedShape=pt;const mt=["col","row"],xt=`
          ${this.getUnpackedSamplerFromInput(st,$,ft).routineBody}
          float ${st}(int row, int col) {
            return ${st}(${(0,_e.getSqueezedParams)(mt,lt)});
          }
        `;return new h.GlslLibRoutine(xt,["coordinates.sampleTexture"])}const ct=it[1],dt=it[0];if(dt===1){const pt=`
          float ${st}(int row, int col) {
            int offset_${$} = coordsToOffset(TexCoords, ${ct}, ${dt});
            float index = dot(vec3(row, col, offset_${$}), vec3(${nt[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${ct}.0);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(ct===1){const pt=`
          float ${st}(int row, int col) {
            int offset_${$} = coordsToOffset(TexCoords, ${ct}, ${dt});
            float index = dot(vec3(row, col, offset_${$}), vec3(${nt[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${dt}.0, 0.5);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const ht=`
        float ${st}(int row, int col) {
          int index = col * ${nt[1]} + row;
          vec2 uv = uvFromFlat(${ct}, ${dt}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ht,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(st,$,_){const nt=_.unpackedShape,it=nt[1]*nt[2],ot=nt[2],{newShape:lt,keptDims:at}=(0,b.squeezeShape)(nt),ct=lt;if(ct.length<nt.length){const ht=(0,_e.squeezeInputShape)(nt,ct),pt=["batch","col","row"],ft=JSON.parse(JSON.stringify(_));ft.unpackedShape=ht;const mt=this.getUnpackedSamplerFromInput(st,$,ft),xt=at.reverse(),gt=`
          ${mt.routineBody}
          float ${st}(int batch, int row, int col) {
            return ${st}(${(0,_e.getSqueezedParams)(pt,xt)});
          }
        `;return new h.GlslLibRoutine(gt,mt.dependencies)}const dt=`
          float ${st}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${it} + col * ${ot} + row;
            vec2 uv = uvFromFlat(${_.width}, ${_.height}, index);
            return sampleTexture(${$}, uv);
          }
      `;return new h.GlslLibRoutine(dt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(st,$,_){const nt=_.unpackedShape,it=nt[3],ot=nt[2]*it,lt=`
        float ${st}(int row, int col, int depth, int depth2) {
          int index = row * ${nt[1]*ot} + col * ${ot} +
              depth2 * ${it} + depth;
          vec2 uv = uvFromFlat(${_.width}, ${_.height}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(lt,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(st,$,_){const nt=_.unpackedShape,it=nt[4],ot=nt[3]*it,lt=nt[2]*ot,at=nt[1]*lt,{newShape:ct,keptDims:dt}=(0,b.squeezeShape)(nt);if(ct.length<nt.length){const pt=(0,_e.squeezeInputShape)(nt,ct),ft=["row","col","depth","depth2","depth3"],mt=JSON.parse(JSON.stringify(_));mt.unpackedShape=pt;const xt=`
          ${this.getUnpackedSamplerFromInput(st,$,mt).routineBody}
          float ${st}(int row, int col, int depth, int depth2, int depth3) {
            return ${st}(${(0,_e.getSqueezedParams)(ft,dt)});
          }
        `;return new h.GlslLibRoutine(xt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const ht=`
        float ${st}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${at} + col * ${lt} + depth * ${ot} +
          depth3 * ${it} + depth2;
          vec2 uv = uvFromFlat(${_.width}, ${_.height}, index);
          return sampleTexture(${$}, uv);
        }
      `;return new h.GlslLibRoutine(ht,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(st,$,_){const nt=_.unpackedShape,it=nt[5],ot=nt[4]*it,lt=nt[3]*ot,at=nt[2]*lt,ct=nt[1]*at,{newShape:dt,keptDims:ht}=(0,b.squeezeShape)(nt);if(dt.length<nt.length){const ft=(0,_e.squeezeInputShape)(nt,dt),mt=["row","col","depth","depth2","depth3","depth4"],xt=JSON.parse(JSON.stringify(_));xt.unpackedShape=ft;const gt=`
            ${this.getUnpackedSamplerFromInput(st,$,xt).routineBody}
            float ${st}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${st}(${(0,_e.getSqueezedParams)(mt,ht)});
            }
          `;return new h.GlslLibRoutine(gt,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const pt=`
          float ${st}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${ct} + col * ${at} + depth * ${lt} +
            depth2 * ${ot} + depth3 * ${it} + depth4;
            vec2 uv = uvFromFlat(${_.width}, ${_.height}, index);
            return sampleTexture(${$}, uv);
          }
        `;return new h.GlslLibRoutine(pt,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const st=this.context.outputTextureLayout,$=st.shape.length,_=st.strides,nt=st.width,it=st.height,ot=[];for(let at=0;at<$-1;++at)ot.push(`
        c[${at}] = offset / ${_[at]};`),ot.push(`
        offset -= c[${at}] * ${_[at]};`);ot.push(`
        c[${$-1}] = offset;`);const lt=`
      void toVec(vec2 texCoords, out int c[${$}]) {
        int offset = coordsToOffset(texCoords, ${nt}, ${it});
        ${ot.join("")}
      }
      void toVec(int offset, out int c[${$}]) {
        ${ot.join("")}
      }
    `;return{toVec:new h.GlslLibRoutine(lt,["coordinates.coordsToOffset"])}}valueFrom(){const st={};return this.context.programInfo.inputNames.forEach(($,_)=>{const nt=this.context.inputTextureLayouts[_],it=(nt.unpackedShape.length>0?nt.unpackedShape:nt.shape).length;let ot=`_${$}`;st[ot]=new h.GlslLibRoutine(this.getValueFromSingle($,it,nt.width,nt.height,!1),[`shapeUtils.indicesToOffset${ot}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),ot+="_T",st[ot]=new h.GlslLibRoutine(this.getValueFromSingle($,it,nt.width,nt.height,!0),[`shapeUtils.indicesToOffset${ot}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),st}getValueFromSingle(st,$,_,nt,it){let ot=`_${st}`;return it&&(ot+="_T"),`
        float ${ot}(int m[${$}]) {
          int offset = indicesToOffset${ot}(m);
          vec2 coords = offsetToCoords(offset, ${_}, ${nt});
          float value = getColorAsFloat(${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${st}, coords));
          return value;
        }
        `}getPackedValueFrom(st,$,_,nt,it){let ot=`_${st}_Pack`;return it&&(ot+="_T"),`
        vec4 ${ot}(int m[${$}]) {
          int offset = indicesToOffset_${st}(m);
          vec2 coords = offsetToCoords(offset, ${_}, ${nt});
          return ${(0,g.getGlsl)(this.context.glContext.version).texture2D}(${st}, coords);
        }
        `}}e.CoordsGlslLib=et},8520:(a,e)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(c=e.FunctionType||(e.FunctionType={}))[c.ValueBased=0]="ValueBased",c[c.Positional=1]="Positional",e.GlslContext=class{constructor(d,h,g,b){this.glContext=d,this.programInfo=h,this.inputTextureLayouts=g,this.outputTextureLayout=b}},e.GlslLib=class{constructor(d){this.context=d}},e.GlslLibRoutine=class{constructor(d,h){this.routineBody=d,this.dependencies=h}},e.GlslLibRoutineNode=class{constructor(d,h,g){this.name=d,this.dependencies=g||[],h&&(this.routineBody=h)}addDependency(d){d&&this.dependencies.push(d)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(d){if(!d||d.length===0)return[];if(d.length===1)return d;const h=new Set,g=new Set,b=new Array;return this.createOrderedNodes(d,h,g,b),b}static createOrderedNodes(d,h,g,b){for(let _e=0;_e<d.length;++_e)this.dfsTraverse(d[_e],h,g,b)}static dfsTraverse(d,h,g,b){if(!d||g.has(d.name))return;if(h.has(d.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");h.add(d.name);const _e=d.dependencies;if(_e&&_e.length>0)for(let et=0;et<_e.length;++et)this.dfsTraverse(_e[et],h,g,b);b.push(d),g.add(d.name),h.delete(d.name)}}},7341:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(b){super(b)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new d.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new d.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const b=h.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new d.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${b}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const b=h.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new d.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${b}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const b=new ArrayBuffer(4),_e=new Uint32Array(b),et=new Uint8Array(b);if(_e[0]=3735928559,et[0]===239)return!0;if(et[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=h},9894:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const d=c(8520),h=c(5060);class g extends d.GlslLib{constructor(_e){super(_e)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const _e=(0,h.getGlsl)(this.context.glContext.version);return{setFragColor:new d.GlslLibRoutine(`
        void setFragColor(float value) {
            ${_e.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new d.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=g},2848:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const c=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(d){const h={};let g;for(;(g=c.exec(d))!==null;){const b=g[3].split(",").map(_e=>{const et=_e.trim().split(" ");return et&&et.length===2?{type:et[0],name:et[1]}:null}).filter(_e=>_e!==null);h[g[2]]={params:b,body:g[4]}}for(const b in h){const _e="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",b),et=new RegExp(_e,"gm");for(;(g=et.exec(d))!==null;){const rt=g[1],st=g[2],$=g[3].split(","),_=rt?`${rt} ${st};`:"";let nt=h[b].body,it="";h[b].params.forEach((lt,at)=>{lt&&(it+=`${lt.type} ${lt.name} = ${$[at]};
`)}),nt=`${it}
 ${nt}`,nt=nt.replace("return",`${st} = `);const ot=`
      ${_}
      {
        ${nt}
      }
      `;d=d.replace(g[0],ot)}}return d.replace(c,"")}},8879:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const d=c(8520),h=c(2848),g=c(5483),b=c(5060);e.GlslPreprocessor=class{constructor(_e,et,rt,st){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new d.GlslContext(_e,et,rt,st),Object.keys(g.glslRegistry).forEach(_=>{const nt=new g.glslRegistry[_](this.context);this.libs[_]=nt});const $=this.glslLibRoutineDependencyGraph;for(const _ in this.libs){const nt=this.libs[_].getFunctions();for(const it in nt){const ot=_+"."+it;let lt;$[ot]?(lt=$[ot],lt.routineBody=nt[it].routineBody):(lt=new d.GlslLibRoutineNode(ot,nt[it].routineBody),$[ot]=lt);const at=nt[it].dependencies;if(at)for(let ct=0;ct<at.length;++ct)if($[at[ct]])lt.addDependency($[at[ct]]);else{const dt=new d.GlslLibRoutineNode(at[ct]);$[at[ct]]=dt,lt.addDependency(dt)}}}}preprocess(){const _e=this.context.programInfo;let et=_e.shaderSource;return this.context.programInfo.hasMain||(et=`${et}
      ${(0,b.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),et=(0,h.replaceInlines)(et),`${(0,b.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(_e.inputNames,_e.variables)}
    ${this.getImports(et)}
    ${et}`}getImports(_e){const et=this.selectGlslLibRoutinesToBeIncluded(_e);if(et.length===0)return"";let rt="";for(let st=0;st<et.length;++st){if(!et[st].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${et[st].name}`);rt+=et[st].routineBody+`
`}return rt}selectGlslLibRoutinesToBeIncluded(_e){const et=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(rt=>{const st=rt.split(".")[1];_e.indexOf(st)!==-1&&et.push(this.glslLibRoutineDependencyGraph[rt])}),d.TopologicalSortGlslRoutines.returnOrderedNodes(et)}getUniforms(_e,et){const rt=[];if(_e)for(const st of _e)rt.push(`uniform sampler2D ${st};`);if(et)for(const st of et)rt.push(`uniform ${st.type} ${st.name}${st.arrayLength?`[${st.arrayLength}]`:""};`);return rt.join(`
`)}}},5483:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const d=c(5107),h=c(7341),g=c(9894),b=c(2655),_e=c(3891);e.glslRegistry={encoding:h.EncodingGlslLib,fragcolor:g.FragColorGlslLib,vec:_e.VecGlslLib,shapeUtils:b.ShapeUtilsGlslLib,coordinates:d.CoordsGlslLib}},2655:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(b){super(b)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const b=this.context.outputTextureLayout.shape.length,_e={};return this.context.programInfo.inputNames.forEach((et,rt)=>{const st=this.context.inputTextureLayouts[rt].unpackedShape;if(st.length<=b){const $=st.length,_=b-$,nt=`bcastIndices_${et}`;let it="";for(let lt=0;lt<$;++lt)it+=`
          realIndices[${lt}] = int( mod(float(bcastedIndices[${_+lt}]), ${st[lt]}.0) );
          `;const ot=`
        void ${nt} (int bcastedIndices[${b}], out int realIndices[${$}]) {
          ${it}
        }
        `;_e[nt]=new d.GlslLibRoutine(ot)}}),_e}bcastMatmulIndex(){const b=this.context.outputTextureLayout.shape.length,_e={};return this.context.programInfo.inputNames.forEach((et,rt)=>{const st=this.context.inputTextureLayouts[rt].shape;if(!(st.length<2||st.length>b)){const $=st.length,_=b-$,nt=`bcastMatmulIndices_${et}`;let it="";for(let lt=0;lt<$-2;++lt)it+=`
          realIndices[${lt}] = int( mod(float(bcastedIndices[${_+lt}]), ${st[lt]}.0) );
          `;const ot=`
        void ${nt}(int bcastedIndices[${b}], out int realIndices[${$}]) {
          ${it}
          realIndices[${$-1}] = bcastedIndices[${b-1}];
          realIndices[${$-2}] = bcastedIndices[${b-2}];
        }
        `;_e[nt]=new d.GlslLibRoutine(ot)}}),_e}indicesToOffset(){const b={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const rt=this.context.inputTextureLayouts[et].shape,st=this.context.inputTextureLayouts[et].strides,$=rt.length;let _=`indicesToOffset_${_e}`;b[_]=new d.GlslLibRoutine(h.indexToOffsetSingle(_,$,st)),_=`indicesToOffset_${_e}_T`,b[_]=new d.GlslLibRoutine(h.indexToOffsetSingle(_,$,st.slice().reverse()))}),b}static indexToOffsetSingle(b,_e,et){let rt="";for(let st=_e-1;st>=0;--st)rt+=`
        offset += indices[${st}] * ${et[st]};
        `;return`
      int ${b}(int indices[${_e}]) {
        int offset = 0;
        ${rt}
        return offset;
      }
      `}offsetToIndices(){const b={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const rt=this.context.inputTextureLayouts[et].shape,st=this.context.inputTextureLayouts[et].strides,$=rt.length;let _=`offsetToIndices_${_e}`;b[_]=new d.GlslLibRoutine(h.offsetToIndicesSingle(_,$,st)),_=`offsetToIndices_${_e}_T`,b[_]=new d.GlslLibRoutine(h.offsetToIndicesSingle(_,$,st.slice().reverse()))}),b}static offsetToIndicesSingle(b,_e,et){const rt=[];for(let st=0;st<_e-1;++st)rt.push(`
      indices[${st}] = offset / ${et[st]};`),rt.push(`
        offset -= indices[${st}] * ${et[st]};`);return rt.push(`
      indices[${_e-1}] = offset;`),`
      void ${b}(int offset, out int indices[${_e}]) {
        ${rt.join("")}
      }
      `}incrementIndices(){const b={};return this.context.programInfo.inputNames.forEach((_e,et)=>{const rt=this.context.inputTextureLayouts[et].shape,st=rt.length,$=`incrementIndices_${_e}`;let _="";for(let it=0;it<st;++it)_+=`
        shape[${it}] = ${rt[it]};`;const nt=`
        void ${$}(int axis, out int indices[${st}]) {
          int shape[${st}];
          ${_};
          for(int i = ${st} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;b[$]=new d.GlslLibRoutine(nt)}),b}}e.ShapeUtilsGlslLib=h},5060:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const c={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},d={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function h(g){return g===1?c:d}e.getGlsl=h,e.getVertexShaderSource=function(g){const b=h(g);return`${b.version}
      precision highp float;
      ${b.attribute} vec3 position;
      ${b.attribute} vec2 textureCoord;

      ${b.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(g){const b=h(g);return`${b.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${b.varyingFrag} vec2 TexCoords;
    ${b.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(g,b){return`
  void main() {
    int indices[${b}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${h(g).output} = result;
  }
  `}},3891:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const d=c(8520);class h extends d.GlslLib{constructor(b){super(b)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const b=this.context.outputTextureLayout.shape.length,_e={add:"+=",sub:"-=",mul:"*=",div:"/="},et={};for(const rt in _e){const st=`${rt}Vec`;let $="";for(let nt=0;nt<b;++nt)$+=`
          dest[${nt}] ${_e[rt]} src[${nt}];
          `;const _=`
        void ${st}(int src[${b}], out int dest[${b}]) {
          ${$}
        }
        `;et[st]=new d.GlslLibRoutine(_)}return et}copyVec(){const b=this.context.outputTextureLayout.shape.length;let _e="";for(let rt=0;rt<b;++rt)_e+=`
        dest[${rt}] = src[${rt}];
        `;const et=`
      void copyVec(int src[${b}], out int dest[${b}]) {
        ${_e}
      }
      `;return{copyVec:new d.GlslLibRoutine(et)}}setVecItem(){const b=this.context.outputTextureLayout.shape.length;let _e=`
        if(index < 0)
            index =${b} + index;
        if (index == 0)
            m[0] = value;
        `;for(let rt=1;rt<b-1;++rt)_e+=`
        else if (index == ${rt})
            m[${rt}] = value;
            `;_e+=`
        else
            m[${b-1}] = value;
        `;const et=`
      void setVecItem(out int m[${b}], int index, int value) {
        ${_e}
      }
        `;return{setVecItem:new d.GlslLibRoutine(et)}}getVecItem(){const b=this.context.outputTextureLayout.shape.length;let _e=`
        if(index < 0)
            index = ${b} + index;
        if (index == 0)
            return m[0];
      `;for(let rt=1;rt<b-1;++rt)_e+=`
        else if (index == ${rt})
            return m[${rt}];
      `;_e+=`
        else
            return m[${b-1}];
        `;const et=`
      int getVecItem(int m[${b}], int index) {
        ${_e}
      }
    `;return{getVecItem:new d.GlslLibRoutine(et)}}}e.VecGlslLib=h},8316:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const d=c(6231),h=c(9162),g=c(2517),b=c(2403),_e=c(7019),et=c(8710),rt=c(5611),st=c(4057),$=c(2039);e.WebGLInferenceHandler=class{constructor(_){this.session=_,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(_,nt){return(0,st.calculateTextureWidthAndHeight)(this.session.layoutStrategy,_,nt)}executeProgram(_,nt){if(nt.length<_.inputNames.length)throw new Error(`Input size mustn't be less than ${_.inputNames.length}.`);if(_.inputNames.length!==_.inputTypes.length)throw new Error("input names size does not match input types");const it=[];for(let ht=0;ht<_.inputNames.length;++ht)it[ht]=this.getOrCreateTextureData(nt[ht],_.inputTypes[ht]);const ot=((ht,pt)=>{const ft=pt.map(xt=>`${xt.unpackedShape.join(",")};${xt.width}x${xt.height}`).join("_");let mt=ht.name;return ht.cacheHint&&(mt+="["+ht.cacheHint+"]"),mt+=":"+ft,mt})(_,it);let lt=this.session.programManager.getArtifact(ot);const at=lt?lt.programInfo:typeof _.get=="function"?_.get():_,ct=(0,st.createTextureLayoutFromTextureType)(this.session.layoutStrategy,at.output.dims,at.output.textureType),dt=this.createTextureData(ct,at.output.type);return lt||(lt=this.session.programManager.build(at,it,dt),this.session.programManager.setArtifact(ot,lt)),this.runProgram(lt,it,dt),dt}run(_,nt){return this.executeProgram(_,nt).tensor}runProgram(_,nt,it){for(let ot=0;ot<nt.length;++ot)if(!!nt[ot].isPacked!=(_.programInfo.inputTypes[ot]===$.TextureType.packed))throw new Error(`input[${ot}] property packed inconsistent`);if(!!it.isPacked!=(_.programInfo.output.textureType===$.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(_,nt,it)}getOrCreateTextureData(_,nt){let it=this.getTextureData(_.dataId,nt===$.TextureType.packed);if(!it&&(it=this.getTextureData(_.dataId,nt!==$.TextureType.packed),it))return nt===$.TextureType.packed?this.pack(it):this.unpack(it);if(!it){const ot=(0,st.createTextureLayoutFromTextureType)(this.session.layoutStrategy,_.dims,nt);if(nt===$.TextureType.packedLastDimension){const ct=_.dims;if(ct.length===4){const dt=[ct[0],Math.ceil(ct[1]*ct[2]*ct[3]/4)],ht=(0,st.createTextureLayoutFromTextureType)(this.session.layoutStrategy,dt,nt);let pt=_.numberData;if(ct[1]*ct[2]*ct[3]%4!=0){const ft=ct[0],mt=ct[1]*ct[2]*ct[3],xt=Math.ceil(mt*1/4)*4;pt=new Float32Array(ft*xt);for(let gt=0;gt<ft;++gt){const Et=gt*mt,St=gt*xt+gt%1*mt;pt.set(_.numberData.subarray(Et,Et+mt),St)}}return this.createTextureData(ht,_.type,pt,_,1)}}if(nt===$.TextureType.packed){const lt=(0,st.createTextureLayoutFromShape)(this.session.layoutStrategy,_.dims,1,[],{reverseWH:!0}),at=this.createTextureData(lt,_.type,_.numberData,_,1);it=this.pack(at)}else it=this.createTextureData(ot,_.type,_.numberData,_,1)}return it}createTextureDataFromLayoutBindTensor(_,nt,it,ot){return this.createTextureData(_,nt,it,ot,1)}createTextureData(_,nt,it,ot,lt){d.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(_)}]`);const at=this.session.textureManager.createTextureFromLayout(nt,_,it,lt);return this.createTextureDataFromTexture(_,nt,at,ot)}reshapeUnpacked(_,nt){const it=this.getOrCreateTextureData(_,$.TextureType.unpacked),ot={channels:it.channels,height:it.height,width:it.width,shape:nt.length!==0?nt:[1],strides:g.ShapeUtil.computeStrides(nt),unpackedShape:nt};return this.createTextureDataFromTexture(ot,_.type,it.texture).tensor}reshapePacked(_,nt){const it=this.getOrCreateTextureData(_,$.TextureType.packed);if((0,_e.isReshapeCheap)(_.dims,nt)){const dt={channels:it.channels,height:it.height,width:it.width,shape:nt.length!==0?nt:[1],strides:g.ShapeUtil.computeStrides(nt),unpackedShape:nt,isPacked:!0};return this.createTextureDataFromTexture(dt,_.type,it.texture).tensor}const ot=(0,_e.processDims3D)(_.dims),lt=(0,_e.processDims3D)(nt),at=this.reshapePacked(_,ot),ct=this.run((0,_e.createPackedReshape3DProgramInfoLoader)(this,at,lt),[at]);return this.reshapePacked(ct,nt)}cast(_,nt){const it=this.getOrCreateTextureData(_,$.TextureType.unpacked);return this.createTextureDataFromTexture(it,nt,it.texture).tensor}createTextureDataFromTexture(_,nt,it,ot,lt){const at=Object.assign(Object.assign({},_),{tensor:ot||new h.Tensor(_.unpackedShape,nt,ct=>this.readTexture(at),async ct=>this.readTextureAsync(at),void 0,lt),texture:it});return this.setTextureData(at.tensor.dataId,at,_.isPacked),at}getTextureData(_,nt=!1){return this.session.isInitializer(_)?this.session.getTextureData(_,nt):nt?this.packedTextureDataCache.get(_):this.unpackedTextureDataCache.get(_)}setTextureData(_,nt,it=!1){this.session.isInitializer(_)?this.session.setTextureData(_,nt,it):(it?this.packedTextureDataCache:this.unpackedTextureDataCache).set(_,nt)}isTextureLayoutCached(_,nt=!1){return!!this.getTextureData(_.dataId,nt)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(_=>this.session.textureManager.releaseTexture(_)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(_=>this.session.textureManager.releaseTexture(_)),this.unpackedTextureDataCache=new Map}readTexture(_){return _.isPacked?this.readTexture(this.unpack(_)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(_,_.tensor.type,_.channels):this.session.textureManager.readUint8TextureAsFloat((0,et.encodeAsUint8)(this,_))}async readTextureAsync(_){return _.isPacked?this.readTextureAsync(this.unpack(_)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(_,_.tensor.type,_.channels):this.session.textureManager.readUint8TextureAsFloat((0,et.encodeAsUint8)(this,_))}pack(_){return this.executeProgram((0,b.createPackProgramInfoLoader)(this,_.tensor),[_.tensor])}unpack(_){return this.executeProgram((0,rt.createUnpackProgramInfoLoader)(this,_.tensor),[_.tensor])}}},1640:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(Bt,Ct,en,sn){sn===void 0&&(sn=en);var kt=Object.getOwnPropertyDescriptor(Ct,en);kt&&!("get"in kt?!Ct.__esModule:kt.writable||kt.configurable)||(kt={enumerable:!0,get:function(){return Ct[en]}}),Object.defineProperty(Bt,sn,kt)}:function(Bt,Ct,en,sn){sn===void 0&&(sn=en),Bt[sn]=Ct[en]}),h=this&&this.__setModuleDefault||(Object.create?function(Bt,Ct){Object.defineProperty(Bt,"default",{enumerable:!0,value:Ct})}:function(Bt,Ct){Bt.default=Ct}),g=this&&this.__importStar||function(Bt){if(Bt&&Bt.__esModule)return Bt;var Ct={};if(Bt!=null)for(var en in Bt)en!=="default"&&Object.prototype.hasOwnProperty.call(Bt,en)&&d(Ct,Bt,en);return h(Ct,Bt),Ct};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const b=c(2898),_e=g(c(7839)),et=c(4196),rt=c(2069),st=c(8138),$=c(9663),_=c(5193),nt=c(7992),it=c(1253),ot=c(4776),lt=c(6572),at=c(3346),ct=c(5623),dt=c(2870),ht=c(2143),pt=c(4939),ft=c(718),mt=c(2268),xt=c(8117),gt=c(2278),Et=c(5524),St=c(5975),Pt=c(3933),Mt=c(6558),Rt=c(5723),Dt=c(3738),Tt=g(c(4909)),It=c(8428),Vt=c(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Tt.abs],["Acos","","7+",Tt.acos],["Add","","7+",_e.add],["And","","7+",_e.and],["Asin","","7+",Tt.asin],["Atan","","7+",Tt.atan],["AveragePool","","7+",ht.averagePool,ht.parseAveragePoolAttributes],["BatchNormalization","","7+",b.batchNormalization,b.parseBatchNormalizationAttributes],["Cast","","6+",et.cast,et.parseCastAttributes],["Ceil","","6+",Tt.ceil],["Clip","","6-10",Tt.clip,Tt.parseClipAttributes],["Clip","","11+",Tt.clipV11],["Concat","","4+",rt.concat,rt.parseConcatAttributes],["Conv","","1+",st.conv,st.parseConvAttributes],["ConvTranspose","","1+",$.convTranspose,$.parseConvTransposeAttributes],["Cos","","7+",Tt.cos],["Div","","7+",_e.div],["Dropout","","7+",Tt.identity],["DepthToSpace","","1+",_.depthToSpace,_.parseDepthToSpaceAttributes],["Equal","","7+",_e.equal],["Elu","","6+",Tt.elu,Tt.parseEluAttributes],["Exp","","6+",Tt.exp],["Flatten","","1+",nt.flatten,nt.parseFlattenAttributes],["Floor","","6+",Tt.floor],["FusedConv","com.microsoft","1+",st.conv,st.parseConvAttributes],["Gather","","1+",it.gather,it.parseGatherAttributes],["Gemm","","7-10",ot.gemm,ot.parseGemmAttributesV7],["Gemm","","11+",ot.gemm,ot.parseGemmAttributesV11],["GlobalAveragePool","","1+",ht.globalAveragePool,ht.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",ht.globalMaxPool],["Greater","","7+",_e.greater],["Identity","","1+",Tt.identity],["ImageScaler","","1+",lt.imageScaler,lt.parseImageScalerAttributes],["InstanceNormalization","","6+",at.instanceNormalization,at.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Tt.leakyRelu,Tt.parseLeakyReluAttributes],["Less","","7+",_e.less],["Log","","6+",Tt.log],["MatMul","","1+",ct.matMul,ct.parseMatMulAttributes],["MaxPool","","1+",ht.maxPool,ht.parseMaxPoolAttributes],["Mul","","7+",_e.mul],["Neg","","6+",Tt.neg],["Not","","1+",Tt.not],["Or","","7+",_e.or],["Pad","","2-10",dt.padV2,dt.parsePadAttributesV2],["Pad","","11+",dt.padV11,dt.parsePadAttributesV11],["Pow","","7+",_e.pow],["PRelu","","7+",_e.pRelu],["ReduceLogSum","","1+",pt.reduceLogSum,pt.parseReduceAttributes],["ReduceMax","","1+",pt.reduceMax,pt.parseReduceAttributes],["ReduceMean","","1+",pt.reduceMean,pt.parseReduceAttributes],["ReduceMin","","1+",pt.reduceMin,pt.parseReduceAttributes],["ReduceProd","","1+",pt.reduceProd,pt.parseReduceAttributes],["ReduceSum","","1-12",pt.reduceSum,pt.parseReduceAttributes],["ReduceSumSquare","","1+",pt.reduceLogSumSquare,pt.parseReduceAttributes],["Relu","","6+",Tt.relu],["Reshape","","5+",ft.reshape],["Resize","","10",mt.resize,mt.parseResizeAttributesV10],["Resize","","11+",mt.resize,mt.parseResizeAttributesV11],["Shape","","1+",xt.shape],["Sigmoid","","6+",Tt.sigmoid],["Sin","","7+",Tt.sin],["Slice","","10+",gt.sliceV10],["Slice","","1-9",gt.slice,gt.parseSliceAttributes],["Softmax","","1-12",Et.softmax,Et.parseSoftmaxAttributes],["Softmax","","13+",Et.softmaxV13,Et.parseSoftmaxAttributesV13],["Split","","2-12",St.split,St.parseSplitAttributes],["Sqrt","","6+",Tt.sqrt],["Squeeze","","1-12",Pt.squeeze,Pt.parseSqueezeAttributes],["Squeeze","","13+",Pt.squeezeV13],["Sub","","7+",_e.sub],["Sum","","6+",Mt.sum],["Tan","","7+",Tt.tan],["Tanh","","6+",Tt.tanh],["Tile","","6+",Rt.tile],["Transpose","","1+",Dt.transpose,Dt.parseTransposeAttributes],["Upsample","","7-8",Vt.upsample,Vt.parseUpsampleAttributesV7],["Upsample","","9",Vt.upsample,Vt.parseUpsampleAttributesV9],["Unsqueeze","","1-12",It.unsqueeze,It.parseUnsqueezeAttributes],["Unsqueeze","","13+",It.unsqueezeV13],["Xor","","7+",_e.xor]]},2898:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const d=c(246),h=c(5060),g=c(2039),b={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]};e.batchNormalization=(rt,st,$)=>(et(st),[rt.run(Object.assign(Object.assign({},b),{cacheHint:$.cacheKey,get:()=>_e(rt,st,$)}),st)]),e.parseBatchNormalizationAttributes=rt=>{const st=rt.attributes.getFloat("epsilon",1e-5),$=rt.attributes.getFloat("momentum",.9),_=rt.attributes.getInt("spatial",1);return(0,d.createAttributeWithCacheKey)({epsilon:st,momentum:$,spatial:_})};const _e=(rt,st,$)=>{const _=(0,h.getGlsl)(rt.session.backend.glContext.version),nt=st[0].dims.length,[it,ot]=rt.calculateTextureWidthAndHeight(st[1].dims,g.TextureType.unpacked),lt=`
  float process(int[${nt}] indices) {
    vec2 position = offsetToCoords(indices[1], ${it}, ${ot});
    float scale = getColorAsFloat(${_.texture2D}(Scale, position));
    float mean = getColorAsFloat(${_.texture2D}(Mean, position));
    float variance = getColorAsFloat(${_.texture2D}(Variance, position));
    float b = getColorAsFloat(${_.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${$.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},b),{output:{dims:st[0].dims,type:st[0].type,textureType:g.TextureType.unpacked},shaderSource:lt})},et=rt=>{if(!rt||rt.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const st=rt[0],$=rt[1],_=rt[2],nt=rt[3],it=rt[4];if(st.dims.length<3||$.dims.length!==1||_.dims.length!==1||nt.dims.length!==1||it.dims.length!==1)throw new Error("invalid input shape.");if($.dims[0]!==st.dims[1]||_.dims[0]!==st.dims[1]||nt.dims[0]!==st.dims[1]||it.dims[0]!==st.dims[1])throw new Error("invalid input shape.");if(st.type!=="float32"&&st.type!=="float64"||$.type!=="float32"&&$.type!=="float64"||_.type!=="float32"&&_.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64"||it.type!=="float32"&&it.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const d=c(2517),h=c(8520),g=c(5060),b=c(2039);function _e(){const pt="add_";return{body:`
  float ${pt}(float a, float b) {
    return a + b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function et(){const pt="div_";return{body:`
  float ${pt}(float a, float b) {
    return a / b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function rt(){const pt="mul_";return{body:`
  float ${pt}(float a, float b) {
    return a * b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function st(){const pt="sub_";return{body:`
  float ${pt}(float a, float b) {
    return a - b;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function $(){const pt="equal_";return{body:`
  float ${pt}(float a, float b) {
    return float(a == b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function _(){const pt="greater_";return{body:`
  float ${pt}(float a, float b) {
    return float(a > b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function nt(){const pt="less_";return{body:`
  float ${pt}(float a, float b) {
    return float(a < b);
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function it(){const pt="and_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function ot(){const pt="or_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function lt(){const pt="xor_";return{body:`
  float ${pt}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}function at(){return function(pt){const ft=`${pt}_`;return{body:`
  float ${ft}(float a, float b) {
    return ${pt}(a, b);
  }
  vec4 ${ft}(vec4 v1, vec4 v2) {
    return ${pt}(v1, v2);
  }
  `,name:ft,type:h.FunctionType.ValueBased}}("pow")}function ct(){const pt="prelu_";return{body:`
  float ${pt}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${pt}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:pt,type:h.FunctionType.ValueBased}}e.glslAdd=_e,e.glslDiv=et,e.glslMul=rt,e.glslSub=st,e.glslEqual=$,e.glslGreater=_,e.glslLess=nt,e.glslAnd=it,e.glslOr=ot,e.glslXor=lt,e.glslPow=at,e.glslPRelu=ct;const dt=(pt,ft,mt,xt=ft[0].type,gt)=>{const Et=pt.session.pack?b.TextureType.packed:b.TextureType.unpacked;return{name:mt.name,inputNames:["A","B"],inputTypes:[Et,Et],cacheHint:gt,get:()=>ht(pt,ft,mt,xt)}},ht=(pt,ft,mt,xt=ft[0].type)=>{const gt=pt.session.pack?b.TextureType.packed:b.TextureType.unpacked,Et=!d.ShapeUtil.areEqual(ft[0].dims,ft[1].dims);let St=ft[0].dims;const Pt=pt.session.pack;if(Et){const Dt=d.BroadcastUtil.calcShape(ft[0].dims,ft[1].dims,!1);if(!Dt)throw new Error("Can't perform binary op on the given tensors");St=Dt;const Tt=St.length,It=ft[0].dims.length!==0?ft[0].dims.length:1,Vt=ft[1].dims.length!==0?ft[1].dims.length:1,Bt=ft[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",Ct=ft[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",en=(0,g.getGlsl)(pt.session.backend.glContext.version),sn=Pt?`
      ${mt.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${mt.name}(a, b);
        ${en.output} = result;
      }`:`
      ${mt.body}
      float process(int indices[${Tt}]) {
        int aindices[${It}];
        int bindices[${Vt}];
        ${Bt}
        ${Ct}
        return ${mt.name}(_A(aindices), _B(bindices));
      }`;return{name:mt.name,inputNames:["A","B"],inputTypes:[gt,gt],output:{dims:St,type:xt,textureType:gt},shaderSource:sn,hasMain:Pt}}const Mt=(0,g.getGlsl)(pt.session.backend.glContext.version),Rt=`
    ${mt.body}
    void main() {
      vec4 v1 = ${Mt.texture2D}(A, TexCoords);
      vec4 v2 = ${Mt.texture2D}(B, TexCoords);
      vec4 result = ${mt.name}(v1, v2);
      ${Mt.output} = result;
    }
    `;return{name:mt.name,inputNames:["A","B"],inputTypes:[gt,gt],output:{dims:ft[0].dims,type:xt,textureType:gt},shaderSource:Rt,hasMain:!0}};e.add=(pt,ft)=>[pt.run(dt(pt,ft,_e()),ft)],e.and=(pt,ft)=>[pt.run(dt(pt,ft,it(),"bool"),ft)],e.div=(pt,ft)=>[pt.run(dt(pt,ft,et()),ft)],e.equal=(pt,ft)=>[pt.run(dt(pt,ft,$(),"bool"),ft)],e.greater=(pt,ft)=>[pt.run(dt(pt,ft,_(),"bool"),ft)],e.less=(pt,ft)=>[pt.run(dt(pt,ft,nt(),"bool"),ft)],e.mul=(pt,ft)=>[pt.run(dt(pt,ft,rt()),ft)],e.or=(pt,ft)=>[pt.run(dt(pt,ft,ot(),"bool"),ft)],e.pow=(pt,ft)=>[pt.run(dt(pt,ft,at()),ft)],e.pRelu=(pt,ft)=>[pt.run(dt(pt,ft,ct()),ft)],e.sub=(pt,ft)=>[pt.run(dt(pt,ft,st()),ft)],e.xor=(pt,ft)=>[pt.run(dt(pt,ft,lt(),"bool"),ft)]},4196:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const d=c(2517);e.cast=(g,b,_e)=>(h(b),[g.cast(b[0],_e)]),e.parseCastAttributes=g=>d.ProtoUtil.tensorDataTypeFromProto(g.attributes.getInt("to"));const h=g=>{if(!g||g.length!==1)throw new Error("Cast requires 1 input.");if(g[0].type==="string")throw new Error("Invalid input type.")}},1163:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(9390),b=c(2827);e.createPackedConcatProgramInfoLoader=(et,rt,st)=>{const $=(_=rt.length,nt=st.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:_},(it,ot)=>`X${ot}`),inputTypes:Array(_).fill(h.TextureType.packed),cacheHint:nt});var _,nt;return Object.assign(Object.assign({},$),{get:()=>((it,ot,lt,at)=>{const ct=lt[0].dims.slice();if(at>=ct.length||at<-1*ct.length)throw new Error("axis specified for concat doesn't match input dimensionality");at<0&&(at=ct.length+at);const dt=ct.slice(0);for(let Bt=1;Bt<lt.length;Bt++){const Ct=lt[Bt].dims.slice();for(let en=0;en<ct.length;en++)if(en===at)dt[at]+=Ct[en];else if(ct[en]!==Ct[en])throw new Error("non concat dimensions must match")}const ht=dt.length,pt=(0,b.getChannels)("coords",ht),ft=(0,g.getCoordsDataType)(ht),mt=(0,b.unpackFromChannel)(),xt=lt.map(Bt=>Bt.dims),gt=(0,g.getGlChannels)(ht),Et=new Array(xt.length-1);Et[0]=xt[0][at];for(let Bt=1;Bt<Et.length;Bt++)Et[Bt]=Et[Bt-1]+xt[Bt][at];const St=gt[at],Pt=gt.slice(-2),Mt=gt.join();let Rt=`if (${St} < ${Et[0]}) {
        return getChannel(
            getX0(${Mt}), vec2(${Pt.join()}));
        }`;for(let Bt=1;Bt<Et.length;Bt++){const Ct=Et[Bt-1];Rt+=`
            if (${St} < ${Et[Bt]}  && ${St} >= ${Et[Bt-1]}) {
              return getChannel(
                getX${Bt}(${_e(gt,St,Ct)}),
                vec2(${_e(Pt,St,Ct)}));
            }`}const Dt=Et.length,Tt=Et[Et.length-1];Rt+=`
            return getChannel(
              getX${Dt}(${_e(gt,St,Tt)}),
              vec2(${_e(Pt,St,Tt)}));`;const It=(0,d.getGlsl)(it.session.backend.glContext.version),Vt=`
          ${mt}
          float getValue(${gt.map(Bt=>"int "+Bt)}) {
            ${Rt}
          }

          void main() {
            ${ft} coords = getOutputCoords();
            int lastDim = coords.${gt[ht-1]};
            coords.${gt[ht-1]} = coords.${gt[ht-2]};
            coords.${gt[ht-2]} = lastDim;

            vec4 result = vec4(getValue(${pt}), 0., 0., 0.);

            ${pt[ht-1]} = ${pt[ht-1]} + 1;
            if (${pt[ht-1]} < ${dt[ht-1]}) {
              result.g = getValue(${pt});
            }

            ${pt[ht-2]} = ${pt[ht-2]} + 1;
            if (${pt[ht-2]} < ${dt[ht-2]}) {
              result.a = getValue(${pt});
            }

            ${pt[ht-1]} = ${pt[ht-1]} - 1;
            if (${pt[ht-2]} < ${dt[ht-2]} &&
                ${pt[ht-1]} < ${dt[ht-1]}) {
              result.b = getValue(${pt});
            }
            ${It.output} = result;
          }
        `;return Object.assign(Object.assign({},ot),{output:{dims:dt,type:lt[0].type,textureType:h.TextureType.packed},shaderSource:Vt,hasMain:!0})})(et,$,rt,st.axis)})};const _e=(et,rt,st)=>{const $=et.indexOf(rt);return et.map((_,nt)=>nt===$?`${_} - ${st}`:_).join()}},2069:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const d=c(246),h=c(2039),g=c(1163);e.concat=(_,nt,it)=>($(nt),_.session.pack&&nt[0].dims.length>1?[_.run((0,g.createPackedConcatProgramInfoLoader)(_,nt,it),nt)]:[_.run(b(_,nt,it),nt)]);const b=(_,nt,it)=>{const ot=(lt=nt.length,at=it.cacheKey,{name:"Concat",inputNames:Array.from({length:lt},(ct,dt)=>`X${dt}`),inputTypes:Array(lt).fill(h.TextureType.unpacked),cacheHint:at});var lt,at;return Object.assign(Object.assign({},ot),{get:()=>((ct,dt,ht,pt)=>{const ft=ht[0].dims.slice();if(pt>=ft.length||pt<-1*ft.length)throw new Error("axis specified for concat doesn't match input dimensionality");pt<0&&(pt=ft.length+pt);const mt=ft.slice(0);for(let Mt=1;Mt<ht.length;Mt++){const Rt=ht[Mt].dims.slice();for(let Dt=0;Dt<ft.length;Dt++)if(Dt===pt)mt[pt]+=Rt[Dt];else if(ft[Dt]!==Rt[Dt])throw new Error("non concat dimensions must match")}const xt=mt.length,gt=new Array(ht.length);let Et=0;for(let Mt=0;Mt<gt.length;++Mt)Et+=ht[Mt].dims[pt],gt[Mt]=Et;let St="";St=ht.length<5?_e(gt):et(gt);const Pt=`
        ${rt(ht.length,xt)}
        ${st(gt)}
        ${St}
        float process(int indices[${xt}]) {
          int textureIndex = getTextureWhereDataResides (indices[${pt}]);

          if(textureIndex != 0) {
            indices[${pt}] = indices[${pt}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},dt),{output:{dims:mt,type:ht[0].type,textureType:h.TextureType.unpacked},shaderSource:Pt})})(0,ot,nt,it.axis)})},_e=_=>`int getTextureWhereDataResides(int index) {
      ${_.map((nt,it)=>`if(index<${nt}) {return ${it};}
`).join("")}
    }`,et=_=>_e(_),rt=(_,nt)=>{const it=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${nt}]) {`];for(let ot=0;ot<_;++ot)ot===0?it.push(`	if (textureIndex == ${ot}) { return _X${ot}(indices); }`):ot===_-1?it.push(`	else { return _X${ot}(indices); }`):it.push(`	else if (textureIndex == ${ot}) { return _X${ot}(indices); }`);return it.push("	}"),it.join(`
`)},st=_=>{const nt=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let it=0;it<_.length;++it)it===0?nt.push(`	if (index == ${it}) { return ${_[it]}; }`):it===_.length-1?nt.push(`	else { return ${_[it]}; }`):nt.push(`	else if (index == ${it}) { return ${_[it]}; }`);return nt.push("	}"),nt.join(`
`)};e.parseConcatAttributes=_=>(0,d.createAttributeWithCacheKey)({axis:_.attributes.getInt("axis")});const $=_=>{if(!_||_.length<1)throw new Error("too few inputs");const nt=_[0].type,it=_[0].dims.length;if(nt==="string")throw new Error("string tensor is not supported yet");for(const ot of _){if(ot.type!==nt)throw new Error("input tensors should be one type");if(ot.dims.length!==it)throw new Error("input tensors should have the same shape")}}},4770:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const d=c(6231),h=c(5060),g=c(2039),b=c(8138),_e=c(2823);e.createUnpackedGroupedConvProgramInfoLoader=(et,rt,st)=>{const $=(_=rt.length>2,nt=st.cacheKey,{name:"GroupedConv",inputNames:_?["X","W","Bias"]:["X","W"],inputTypes:_?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],cacheHint:nt});var _,nt;return Object.assign(Object.assign({},$),{get:()=>((it,ot,lt,at)=>{const ct=ot.length>2?"value += getBias(output_channel);":"",dt=ot[0].dims.slice(),ht=ot[1].dims.slice(),pt=ht[0]/at.group;d.Logger.verbose("GroupedConv",`autpPad:${at.autoPad}, dilations:${at.dilations}, group:${at.group}, kernelShape:${at.kernelShape}, pads:${at.pads}, strides:${at.strides}`);const ft=(0,b.calculateOutputShape)(dt,ht,at.dilations,at.pads,at.strides),mt=(0,h.getGlsl)(it.session.backend.glContext.version),{activationFunction:xt,applyActivation:gt}=(0,_e.getActivationSnippet)(at),Et=`
  const ivec2 strides = ivec2(${at.strides[0]}, ${at.strides[1]});
  const ivec2 pads = ivec2(${at.pads[0]}, ${at.pads[1]});
  ${xt}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${pt};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${ht[1]}; wInChannel++) {
      int input_channel = group_id * ${ht[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${ht[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${at.dilations[0]};

        if (xHeight < 0 || xHeight >= ${dt[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${ht[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${at.dilations[1]};
          if (xWidth < 0 || xWidth >= ${dt[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${ct}
    ${gt}
    ${mt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},lt),{output:{dims:ft,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:Et,hasMain:!0})})(et,rt,$,st)})}},1386:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const d=c(8138),h=c(8555),g=c(708);e.conv2DPackedPointwise=(b,_e,et)=>{const rt=_e[0].dims,st=_e[1].dims,$=(0,d.calculateOutputShape)(rt,st,et.dilations,et.pads,et.strides),_=b.reshapePacked(_e[0],[rt[1],rt[2]*rt[3]]),nt=b.reshapePacked(_e[1],[st[0],st[1]]),it=_e.length>2?[nt,_,_e[2]]:[nt,_],ot=b.run((0,g.createPackedMatmulProgramInfoLoader)(b,it,et),it);return b.reshapePacked(ot,$)},e.conv2DPacked=(b,_e,et)=>{const rt=_e[0].dims,st=_e[1].dims,$=(0,d.calculateOutputShape)(rt,st,et.dilations,et.pads,et.strides),_=b.run((0,h.createPackedIm2ColProgramInfoLoader)(b,_e[0],_e[1],$,et),[_e[0]]),nt=b.reshapePacked(_e[1],[st[0],st[1]*st[2]*st[3]]),it=_e.length===3?[nt,_,_e[2]]:[nt,_],ot=b.run((0,g.createPackedMatmulProgramInfoLoader)(b,it,et),it);return b.reshapePacked(ot,$)}},9663:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const d=c(246),h=c(5060),g=c(2039),b=c(2823),_e=(nt,it,ot,lt,at,ct)=>(nt-1)*it+ot+(lt-1)*at+1-ct,et=(nt,it,ot,lt,at)=>{const ct=Math.floor(nt/2);it==="SAME_UPPER"?(ot[lt]=ct,ot[at]=nt-ct):it==="SAME_LOWER"&&(ot[lt]=nt-ct,ot[at]=ct)};e.convTranspose=(nt,it,ot)=>(_(it,ot),rt(nt,it,ot));const rt=(nt,it,ot)=>{const lt=$(ot,it);return[st(nt,it,lt)]},st=(nt,it,ot)=>nt.run(((lt,at,ct)=>{const dt=(ht=at.length>2,pt=ct.cacheKey,{name:"ConvTranspose",inputNames:ht?["X","W","B"]:["X","W"],inputTypes:ht?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],cacheHint:pt});var ht,pt;return Object.assign(Object.assign({},dt),{get:()=>((ft,mt,xt,gt)=>{const Et=mt.length>2?"getB(output_channel)":"0.0",St=mt[0].dims,Pt=mt[1].dims,Mt=Pt[1],Rt=Pt[0]/gt.group,Dt=[mt[0].dims[0],mt[1].dims[1]*gt.group,...gt.outputShape],Tt=(0,h.getGlsl)(ft.session.backend.glContext.version),{activationFunction:It,applyActivation:Vt}=(0,b.getActivationSnippet)(gt),Bt=`
  const ivec2 strides = ivec2(${gt.strides[0]}, ${gt.strides[1]});
  const ivec2 pads = ivec2(${gt.pads[0]}, ${gt.pads[1]});
  ${It}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Mt};
    int wOutChannel = output_channel - group_id * ${Mt};

    float value = ${Et};
    for (int inChannelOffset = 0; inChannelOffset < ${Rt}; inChannelOffset++) {
      int input_channel = group_id * ${Rt} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${Pt[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${Pt[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${gt.dilations[0]}, wHOff * ${gt.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${St[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${St[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Vt}
    ${Tt.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},xt),{output:{dims:Dt,type:mt[0].type,textureType:g.TextureType.unpacked},shaderSource:Bt,hasMain:!0})})(lt,at,dt,ct)})})(nt,it,ot),it),$=(nt,it)=>{const ot=nt.kernelShape.slice();if(nt.kernelShape.length===0)for(let dt=2;dt<it[1].dims.length;++dt)ot.push(it[1].dims[dt]);const lt=nt.pads.slice(),at=nt.outputShape.slice();((dt,ht,pt,ft,mt,xt,gt,Et)=>{const St=dt.length-2,Pt=Et.length===0;for(let Mt=0;Mt<St;++Mt){const Rt=Pt?dt[Mt+2]*xt[Mt]:Et[Mt],Dt=_e(dt[Mt+2],xt[Mt],mt[Mt],ht[Mt],pt[Mt],Rt);et(Dt,ft,mt,Mt,Mt+St),Pt&&Et.push(xt[Mt]*(dt[Mt+2]-1)+gt[Mt]+(ht[Mt]-1)*pt[Mt]+1-mt[Mt]-mt[Mt+St])}})(it[0].dims,ot,nt.dilations,nt.autoPad,lt,nt.strides,nt.outputPadding,at);const ct=Object.assign({},nt);return Object.assign(ct,{kernelShape:ot,pads:lt,outputShape:at,cacheKey:nt.cacheKey}),ct};e.parseConvTransposeAttributes=nt=>{const it=nt.attributes,ot=(0,b.parseInternalActivationAttributes)(it),lt=it.getString("auto_pad","NOTSET"),at=it.getInts("dilations",[1,1]),ct=it.getInt("group",1),dt=it.getInts("kernel_shape",[]),ht=it.getInts("output_padding",[0,0]),pt=it.getInts("output_shape",[]),ft=it.getInts("pads",[0,0,0,0]),mt=it.getInts("strides",[1,1]);return(0,d.createAttributeWithCacheKey)(Object.assign({autoPad:lt,dilations:at,group:ct,kernelShape:dt,outputPadding:ht,outputShape:pt,pads:ft,strides:mt},ot))};const _=(nt,it)=>{if(!nt||nt.length!==2&&nt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(nt[0].dims.length!==4||nt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(nt[0].dims[1]!==nt[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const ot=nt[1].dims[1]*it.group;if(nt.length===3&&(nt[2].dims.length!==1||nt[2].dims[0]!==ot))throw new Error("invalid bias");const lt=nt[0].dims.length-2;if(it.dilations.length!==lt)throw new Error(`dilations should be ${lt}D`);if(it.strides.length!==lt)throw new Error(`strides should be ${lt}D`);if(it.pads.length!==2*lt)throw new Error(`pads should be ${2*lt}D`);if(it.outputPadding.length!==lt)throw new Error(`output_padding should be ${lt}D`);if(it.kernelShape.length!==0&&it.kernelShape.length!==nt[1].dims.length-2)throw new Error("invalid kernel shape");if(it.outputShape.length!==0&&it.outputShape.length!==nt[0].dims.length-2)throw new Error("invalid output shape");if(nt[0].type!=="float32"||nt[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(nt.length===3&&nt[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const d=c(246),h=c(2517),g=c(4770),b=c(1386),_e=c(9828),et=c(2823),rt=c(3248),st=c(5623);e.calculateOutputShape=(lt,at,ct,dt,ht)=>{const pt=lt[0],ft=lt.slice(2),mt=ft.length,xt=at[0],gt=at.slice(2).map((St,Pt)=>St+(St-1)*(ct[Pt]-1)),Et=ft.map((St,Pt)=>St+dt[Pt]+dt[Pt+mt]).map((St,Pt)=>Math.floor((St-gt[Pt]+ht[Pt])/ht[Pt]));return[pt,xt].concat(...Et)},e.conv=(lt,at,ct)=>(ot(at,ct),$(lt,at,ct));const $=(lt,at,ct)=>{const dt=it(ct,at),ht=lt.session.pack,pt=dt.kernelShape[0]===1&&dt.kernelShape[1]===1;return dt.group>1?[lt.run((0,g.createUnpackedGroupedConvProgramInfoLoader)(lt,at,dt),at)]:pt&&ht?[_(lt,at,dt)]:ht&&at[0].dims.length===4&&at[0].dims[0]===1&&!pt?[(0,b.conv2DPacked)(lt,at,dt)]:[nt(lt,at,dt)]},_=(lt,at,ct)=>{const dt=at[0].dims,ht=at[1].dims,pt=(0,e.calculateOutputShape)(dt,ht,ct.dilations,ct.pads,ct.strides),ft=lt.reshapeUnpacked(at[0],[dt[1],dt[2]*dt[3]]),mt=lt.reshapeUnpacked(at[1],[ht[0],ht[1]]),xt=at.length>2?[mt,ft,at[2]]:[mt,ft],gt=lt.run((0,st.createMatmulProgramInfoLoader)(xt,ct),xt);return lt.reshapeUnpacked(gt,pt)},nt=(lt,at,ct)=>{const dt=at[0].dims,ht=at[1].dims,pt=(0,e.calculateOutputShape)(dt,ht,ct.dilations,ct.pads,ct.strides),ft=lt.run((0,rt.createIm2ColProgramInfoLoader)(lt,at[0],at[1],pt,ct),[at[0]]),mt=at.length===3?[ft,at[1],at[2]]:[ft,at[1]];return lt.run((0,_e.createDotProductProgramInfoLoader)(lt,at,pt,ct),mt)},it=(lt,at)=>{const ct=lt.kernelShape.slice();if(lt.kernelShape.length===0)for(let pt=2;pt<at[1].dims.length;++pt)ct.push(at[1].dims[pt]);const dt=lt.pads.slice();h.PoolConvUtil.adjustPadsBasedOnAutoPad(at[0].dims,lt.strides,lt.dilations,ct,dt,lt.autoPad);const ht=Object.assign({},lt);return Object.assign(ht,{kernelShape:ct,pads:dt,cacheKey:lt.cacheKey}),ht};e.parseConvAttributes=lt=>{const at=lt.attributes,ct=(0,et.parseInternalActivationAttributes)(at),dt=at.getString("auto_pad","NOTSET"),ht=at.getInts("dilations",[1,1]),pt=at.getInt("group",1),ft=at.getInts("kernel_shape",[]),mt=at.getInts("pads",[0,0,0,0]),xt=at.getInts("strides",[1,1]);return(0,d.createAttributeWithCacheKey)(Object.assign({autoPad:dt,dilations:ht,group:pt,kernelShape:ft,pads:mt,strides:xt},ct))};const ot=(lt,at)=>{if(!lt||lt.length!==2&&lt.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(lt[0].dims.length!==4||lt[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(lt[0].dims[1]!==lt[1].dims[1]*at.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(lt.length===3&&(lt[2].dims.length!==1||lt[1].dims[0]!==lt[2].dims[0]))throw new Error("invalid bias");const ct=lt[0].dims.length-2;if(at.dilations.length!==ct)throw new Error(`dilations should be ${ct}D`);if(at.strides.length!==ct)throw new Error(`strides should be ${ct}D`);if(at.pads.length!==2*ct)throw new Error(`pads should be ${2*ct}D`);if(at.kernelShape.length!==0&&at.kernelShape.length!==lt[1].dims.length-2)throw new Error("invalid kernel shape");if(lt[0].type!=="float32"||lt[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(lt.length===3&&lt[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const d=c(3738);e.depthToSpace=(g,b,_e)=>{h(b);const et=_e.blocksize,rt=et*et,st=_e.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],$=_e.mode==="DCR"?[b[0].dims[0],et,et,b[0].dims[1]/rt,b[0].dims[2],b[0].dims[3]]:[b[0].dims[0],b[0].dims[1]/rt,et,et,b[0].dims[2],b[0].dims[3]],_=g.reshapeUnpacked(b[0],$),nt={perm:st,cacheKey:`${st}`},[it]=(0,d.transpose)(g,[_],nt),ot=[b[0].dims[0],b[0].dims[1]/rt,b[0].dims[2]*et,b[0].dims[3]*et];return[g.reshapeUnpacked(it,ot)]},e.parseDepthToSpaceAttributes=g=>{const b=g.attributes.getInt("blocksize");if(b<1)throw new Error(`blocksize must be >= 1, but got : ${b} for DepthToSpace`);const _e=g.attributes.getString("mode","DCR");if(_e!=="DCR"&&_e!=="CRD")throw new Error(`unrecognized mode: ${_e} for DepthToSpace`);return{mode:_e,blocksize:b}};const h=g=>{if(g.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${g.length}`);if(g[0].type==="string"||g[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),b=c(2823),_e=c(3248);e.createDotProductProgramInfoLoader=(et,rt,st,$)=>{const _=((nt,it)=>({name:"ConvDotProduct",inputNames:nt?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:nt?[g.TextureType.unpacked,g.TextureType.packedLastDimension,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.packedLastDimension],cacheKey:it.activationCacheKey}))(rt.length>2,$);return Object.assign(Object.assign({},_),{get:()=>((nt,it,ot,lt,at)=>{const ct=ot[0].dims,dt=ot[1].dims,ht=[dt[0],Math.ceil(ct[1]*dt[2]*dt[3]/4)],pt=(0,_e.calculateIm2ColDims)(ct,dt,lt),[ft,mt]=nt.calculateTextureWidthAndHeight(ht,g.TextureType.packedLastDimension),xt=d.ShapeUtil.computeStrides(pt),[gt,Et]=nt.calculateTextureWidthAndHeight(pt,g.TextureType.packedLastDimension),St=lt.length,Pt=ot.length<3?"0.0":"_B(b)",Mt=Math.ceil(ct[1]*dt[2]*dt[3]/4),{activationFunction:Rt,applyActivation:Dt}=(0,b.getActivationSnippet)(at),Tt=(0,h.getGlsl)(nt.session.backend.glContext.version),It=`
${Rt}
float process(int indices[${St}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${xt[0]} + im2col[1] * ${xt[1]} + im2col[2] * ${xt[2]};
  int kernelOffset = indices[1] * ${ht[1]};
  float value = ${Pt};
  for (int i = 0; i < ${Mt}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${gt}, ${Et});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${ft}, ${mt});
    value += dot(${Tt.texture2D}(Im2Col, im2colCoords), ${Tt.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Dt}
  return value;
}`;return Object.assign(Object.assign({},it),{output:{dims:lt,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:It})})(et,_,rt,st,$)})}},7992:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const d=c(2517);e.flatten=(g,b,_e)=>{h(b,_e);const et=d.ShapeUtil.flattenShape(b[0].dims,_e);return[g.reshapeUnpacked(b[0],et)]},e.parseFlattenAttributes=g=>g.attributes.getInt("axis",1);const h=(g,b)=>{if(!g||g.length!==1)throw new Error("Flatten requires 1 input.");const _e=g[0].dims.length;if(_e===0)throw new Error("scalar tensor is not supported.");if(b<-_e||b>_e)throw new Error("Invalid axis");if(g[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const d=c(2517),h=c(4909);e.getActivationSnippet=function(g){let b;switch(g.activation){case"Relu":b=(0,h.glslRelu)();break;case"Sigmoid":b=(0,h.glslSigmoid)();break;case"Clip":b=(0,h.glslClip)(g.clipMin,g.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const _e=b.name;return{activationFunction:b.body,applyActivation:`value = ${_e}_(value);`}},e.parseInternalActivationAttributes=g=>{const b=g.getString("activation","");if(b==="Clip"){const[_e,et]=g.getFloats("activation_params",[d.MIN_CLIP,d.MAX_CLIP]);return{activation:b,clipMax:et,clipMin:_e,activationCacheKey:`${b}:${_e},${et}`}}return{activation:b,activationCacheKey:b}}},1253:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const d=c(246),h=c(782),g=c(2517),b=c(2039);e.gather=(st,$,_)=>(rt($,_.axis),[st.run(et(st,$,_),$)]),e.parseGatherAttributes=st=>(0,d.createAttributeWithCacheKey)({axis:st.attributes.getInt("axis",0)});const _e={name:"Gather",inputNames:["A","B"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked]},et=(st,$,_)=>{const nt=Object.assign(Object.assign({},_e),{cacheHint:_.cacheKey});return Object.assign(Object.assign({},nt),{get:()=>((it,ot,lt,at)=>{const ct=lt[0].dims.slice(),dt=lt[1].dims.slice(),ht=new Array(ct.length+dt.length-1);at=g.ShapeUtil.normalizeAxis(at,ct.length);const pt=[];for(let mt=0;mt<ht.length;mt++)mt<at?(ht[mt]=ct[mt],pt.push(`inputIdx[${mt}] = outputIdx[${mt}];`)):mt<at+dt.length?(ht[mt]=dt[mt-at],pt.push(`indexDataIdx[${mt-at}] = outputIdx[${mt}];`)):(ht[mt]=ct[mt-dt.length+1],pt.push(`inputIdx[${mt-dt.length+1}] = outputIdx[${mt}];`));const ft=`
      float process(int outputIdx[${ht.length||1}]) {
        int inputIdx[${ct.length}];
        int indexDataIdx[${dt.length||1}];
        indexDataIdx[0] = 0;
        ${pt.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${at}] = idx < 0 ? idx + ${ct[at]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},ot),{output:{dims:ht,type:lt[0].type,textureType:b.TextureType.unpacked},shaderSource:ft})})(0,nt,$,_.axis)})},rt=(st,$)=>{if(!st||st.length!==2)throw new Error("Gather requires 2 inputs.");const _=st[0].dims.length;if(_<1)throw new Error("Invalid input shape.");if($<-_||$>_-1)throw new Error("Invalid axis.");if(h.NUMBER_TYPES.indexOf(st[0].type)===-1)throw new Error("Invaid input type.");if(st[1].type!=="int32"&&st[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const d=c(246),h=c(2517),g=c(2039);e.gemm=(st,$,_)=>(rt($,_),[st.run(_e($,_),$)]);const b=(st,$)=>{const _=st.attributes.getInt("transA",0)!==0,nt=st.attributes.getInt("transB",0)!==0,it=st.attributes.getFloat("alpha",1),ot=st.attributes.getFloat("beta",1);return(0,d.createAttributeWithCacheKey)({transA:_,transB:nt,alpha:it,beta:ot,isOptionalC:$})};e.parseGemmAttributesV7=st=>b(st,!1),e.parseGemmAttributesV11=st=>b(st,!0);const _e=(st,$)=>{const _={name:"Gemm",inputNames:st.length===3?["A","B","C"]:["A","B"],inputTypes:st.length===3?[g.TextureType.unpacked,g.TextureType.unpacked,g.TextureType.unpacked]:[g.TextureType.unpacked,g.TextureType.unpacked],key:$.cacheKey};return Object.assign(Object.assign({},_),{get:()=>et(_,st,$)})},et=(st,$,_)=>{const nt=$[0].dims.slice(),it=$[1].dims.slice(),[ot,lt]=h.GemmUtil.getShapeOfGemmResult(nt,_.transA,it,_.transB,$.length===3?$[2].dims:void 0),at=[ot,lt];if(!at)throw new Error("Can't use gemm on the given tensors");let ct=nt[nt.length-1],dt="";_.transA&&(ct=nt[0]),_.transA&&_.transB?dt="value += _A_T(a) * _B_T(b);":_.transA&&!_.transB?dt="value += _A_T(a) * _B(b);":!_.transA&&_.transB?dt="value += _A(a) * _B_T(b);":_.transA||_.transB||(dt="value += _A(a) * _B(b);");const ht=at.length,pt=`
      float process(int indices[${ht}]) {
          int a[${ht}];
          int b[${ht}];
          ${$.length===3?`int c[${$[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${$.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${ct}; ++k) {
              a[${ht-1}] = k;
              b[${ht-2}] = k;
              ${dt}
          }

          value = value * alpha;
          ${$.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},st),{output:{dims:at,type:$[0].type,textureType:g.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:_.alpha},{name:"beta",type:"float",data:_.beta}],shaderSource:pt})},rt=(st,$)=>{if(!st)throw new Error("Input is missing");if($.isOptionalC&&(st.length<2||st.length>3))throw new Error("Invaid input shape.");if(!$.isOptionalC&&st.length!==3)throw new Error("Gemm requires 3 inputs");if(st.length===3&&st[2].dims.length!==1&&st[2].dims.length!==2)throw new Error("Invalid input shape of C");if(st[0].type!=="float32"&&st[0].type!=="float64"||st[1].type!=="float32"&&st[1].type!=="float64"||st.length===3&&st[2].type!=="float32"&&st[2].type!=="float64")throw new Error("Invalid input type.");if(st[0].type!==st[1].type||st.length===3&&st[0].type!==st[2].type)throw new Error("Input types are mismatched")}},8555:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(2827);e.createPackedIm2ColProgramInfoLoader=(b,_e,et,rt,st)=>{const $=(_=st.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[h.TextureType.packed],cacheHint:_});var _;return Object.assign(Object.assign({},$),{get:()=>((nt,it,ot,lt,at,ct)=>{const dt=ot.dims,ht=lt.dims,pt=at.length,ft=[ht[1]*ht[2]*ht[3],at[2]*at[3]],mt=ht[2]*ht[3],xt=(0,g.unpackFromChannel)(),gt=(0,d.getGlsl)(nt.session.backend.glContext.version);let Et="";for(let Pt=0;Pt<=1;Pt++)for(let Mt=0;Mt<=1;Mt++)Et+=`
            blockIndex = rc.x + ${Mt};
            pos = rc.y + ${Pt};

            if(blockIndex < ${ft[1]} && pos < ${ft[0]}) {
              offsetY = int(blockIndex / (${at[pt-1]})) * ${ct.strides[0]} -
                ${ct.pads[0]};
              d0 = offsetY + ${ct.dilations[0]} * (imod(pos, ${mt}) / ${ht[2]});

              if(d0 < ${dt[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${at[pt-1]}) * ${ct.strides[1]} -
                  ${ct.pads[1]};
                d1 = offsetX + ${ct.dilations[1]} * imod(imod(pos, ${mt}), ${ht[2]});

                if(d1 < ${dt[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${mt}.);
                    innerDims = vec2(d0, d1);
                    result[${2*Pt+Mt}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const St=`
      ${xt}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${Et}
          ${gt.output} = result;
      }
            `;return Object.assign(Object.assign({},it),{output:{dims:ft,type:ot.type,textureType:h.TextureType.packed},shaderSource:St,hasMain:!0})})(b,$,_e,et,rt,st)})}},3248:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const d=c(2039);e.createIm2ColProgramInfoLoader=(h,g,b,_e,et)=>{const rt=(st=et.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[d.TextureType.unpacked],cacheHint:st});var st;return Object.assign(Object.assign({},rt),{get:()=>(($,_,nt,it,ot,lt)=>{const at=nt.dims,ct=it.dims,dt=ot.length,ht=(0,e.calculateIm2ColDims)(at,ct,ot,4),pt=`
        const int XC = ${at[1]};
        const int XH = ${at[2]};
        const int XW = ${at[3]};
        const int KH = ${lt.kernelShape[0]};
        const int KW = ${lt.kernelShape[1]};
        const int dilationH = ${lt.dilations[0]};
        const int dilationW = ${lt.dilations[1]};
        const int strideH = ${lt.strides[0]};
        const int strideW = ${lt.strides[1]};
        const int padH = ${lt.pads[0]};
        const int padW = ${lt.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${dt}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${at.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},_),{output:{dims:ht,type:nt.type,textureType:d.TextureType.packedLastDimension},shaderSource:pt})})(0,rt,g,b,_e,et)})},e.calculateIm2ColDims=(h,g,b,_e=4)=>[b[0],b[2],b[3],Math.ceil(h[1]*g[2]*g[3]/_e)]},6572:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const d=c(246),h=c(2039);e.imageScaler=(rt,st,$)=>(et(st),[rt.run(b(rt,st,$),st)]),e.parseImageScalerAttributes=rt=>{const st=rt.attributes.getFloat("scale"),$=rt.attributes.getFloats("bias");return(0,d.createAttributeWithCacheKey)({scale:st,bias:$})};const g={name:"ImageScaler",inputNames:["X"],inputTypes:[h.TextureType.unpacked]},b=(rt,st,$)=>{const _=Object.assign(Object.assign({},g),{cacheHint:$.cacheKey});return Object.assign(Object.assign({},_),{get:()=>((nt,it,ot,lt)=>{const at=ot[0].dims.slice(),ct=at.length,dt=`
      ${_e(lt.bias.length)}
      float process(int indices[${ct}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},it),{output:{dims:at,type:ot[0].type,textureType:h.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:lt.bias.length,data:lt.bias},{name:"scale",type:"float",data:lt.scale}],shaderSource:dt})})(0,_,st,$)})},_e=rt=>{const st=[`float getBias(float bias[${rt}], int channel) {`];for(let $=0;$<rt;++$)$===0?st.push(`	if (channel == ${$}) { return bias[${$}]; }`):$===rt-1?st.push(`	else { return bias[${$}]; }`):st.push(`	else if (channel == ${$}) { return bias[${$}]; }`);return st.push("	}"),st.join(`
`)},et=rt=>{if(!rt||rt.length!==1)throw new Error("ImageScaler requires 1 input.");if(rt[0].dims.length!==4)throw new Error("Invalid input shape.");if(rt[0].type!=="float32"&&rt[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const d=c(5060),h=c(2039);e.instanceNormalization=(st,$,_)=>{rt($);const nt=st.run(b($[0]),$);return[st.run(et(st,$[0],_,nt.dims),[$[0],nt,$[1],$[2]])]},e.parseInstanceNormalizationAttributes=st=>st.attributes.getFloat("epsilon",1e-5);const g={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[h.TextureType.unpacked]},b=st=>Object.assign(Object.assign({},g),{get:()=>(($,_)=>{const nt=_.dims.slice(),it=nt[1],ot=nt[2]*nt[3],lt=[nt[0],it],at=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${nt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${nt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${ot});
        temp = 0.0;
        for(int a2=0; a2<${nt[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${nt[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${ot});

        return v;
      }`;return Object.assign(Object.assign({},$),{output:{dims:lt,type:_.type,textureType:h.TextureType.packedLastDimension},shaderSource:at})})(g,st)}),_e={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[h.TextureType.unpacked,h.TextureType.packedLastDimension,h.TextureType.unpacked,h.TextureType.unpacked]},et=(st,$,_,nt)=>{const it=Object.assign(Object.assign({},_e),{cacheHint:`${_}`});return Object.assign(Object.assign({},it),{get:()=>((ot,lt,at,ct,dt)=>{const ht=(0,d.getGlsl)(ot.session.backend.glContext.version),[pt,ft]=ot.calculateTextureWidthAndHeight(dt,h.TextureType.packedLastDimension),[mt,xt]=[pt/4,ft],gt=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${mt}, ${xt});
        return ${ht.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},lt),{output:{dims:at.dims,type:at.type,textureType:h.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:ct}],shaderSource:gt})})(st,it,$,_,nt)})},rt=st=>{if(!st||st.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const $=st[0],_=st[1],nt=st[2];if($.dims.length<3||_.dims.length!==1||nt.dims.length!==1)throw new Error("Invalid input shape.");if(_.dims[0]!==$.dims[1]||nt.dims[0]!==$.dims[1])throw new Error("Input shapes are mismatched.");if($.type!=="float32"&&$.type!=="float64"||_.type!=="float32"&&_.type!=="float64"||nt.type!=="float32"&&nt.type!=="float64")throw new Error("Invalid input type.");if(st[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),b=c(9390),_e=c(2823),et=c(5623);e.createPackedMatmulProgramInfoLoader=(rt,st,$)=>{const _=(nt=st.length>2,it=$.activationCacheKey,{name:"MatMul (packed)",inputNames:nt?["A","B","Bias"]:["A","B"],inputTypes:nt?[g.TextureType.packed,g.TextureType.packed,g.TextureType.packed]:[g.TextureType.packed,g.TextureType.packed],cacheHint:it});var nt,it;return Object.assign(Object.assign({},_),{get:()=>((ot,lt,at,ct)=>{const dt=at.length>2,ht=dt?"value += getBiasForMatmul();":"",pt=at[0].dims,ft=at[1].dims,mt=d.BroadcastUtil.calcShape(pt,ft,!0),xt=!d.ShapeUtil.areEqual(at[0].dims,at[1].dims);if(!mt)throw new Error("Can't use matmul on the given tensors");const gt=pt[pt.length-1],Et=Math.ceil(gt/2),St=pt.length,Pt=ft.length,Mt=(0,h.getGlsl)(ot.session.backend.glContext.version),Rt=(0,b.getCoordsDataType)(mt.length),Dt=mt.length,Tt=(0,b.getGlChannels)(),{activationFunction:It,applyActivation:Vt}=(0,_e.getActivationSnippet)(ct),Bt=dt?`${(0,et.getBiasForMatmul)(Rt,Tt,at[2].dims,mt,!0)}`:"",Ct=xt?`${function(Ut,Jt,tn,Gt){let hn=[],fn=[];const gn=tn[0].dims,kn=tn[1].dims,On=gn.length,un=kn.length,Sn=Gt.length,Ln=Sn-On,$n=Sn-un;hn=gn.map((on,vn)=>`coords.${Jt[vn+Ln]}`),hn[On-1]="i*2",hn.join(", "),fn=kn.map((on,vn)=>`coords.${Jt[vn+$n]}`),fn[un-2]="i*2",fn.join(", ");const Wn=d.BroadcastUtil.getBroadcastDims(gn,Gt),Pn=d.BroadcastUtil.getBroadcastDims(kn,Gt),or=Wn.map(on=>`coords.${Jt[on+Ln]} = 0;`).join(`
`),Kt=Pn.map(on=>`coords.${Jt[on+$n]} = 0;`).join(`
`),Xt=`int lastDim = coords.${Jt[Sn-1]};
  coords.${Jt[Sn-1]} = coords.${Jt[Sn-2]};
  coords.${Jt[Sn-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Ut} coords = getOutputCoords();
  ${Xt}
  ${or}
  vec4 outputValue = getA(${hn});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Ut} coords = getOutputCoords();
  ${Xt}
  ${Kt}
  vec4 outputValue = getB(${fn});
  return outputValue;
}`}(Rt,Tt,at,mt)}`:"",en=xt?"getAAtOutCoordsMatmul(i)":`getA(${function(Ut,Jt){let tn="";for(let Gt=0;Gt<Jt-2;Gt++)tn+=`rc.${Ut[Gt]}, `;return tn+=`rc.${Ut[Jt-2]}, i*2`,tn}(Tt,St)})`,sn=xt?"getBAtOutCoordsMatmul(i)":`getB(${function(Ut,Jt){let tn="";for(let Gt=0;Gt<Jt-2;Gt++)tn+=`rc.${Ut[Gt]}, `;return tn+=`i*2, rc.${Ut[Jt-1]}`,tn}(Tt,Pt)})`,kt=`
            ${Ct}
            ${Bt}
            ${It}
            void main() {
              ${xt?"":`${Rt} rc =
          getOutputCoords(); int lastDim = rc.${Tt[Dt-1]}; rc.${Tt[Dt-1]} =
          rc.${Tt[Dt-2]}; rc.${Tt[Dt-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${Et}; i++) {
                vec4 a = ${en};
                vec4 b = ${sn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${ht}
              ${Vt}
              ${Mt.output} = value;
            }`;return Object.assign(Object.assign({},lt),{output:{dims:mt,type:at[0].type,textureType:g.TextureType.packed},shaderSource:kt,hasMain:!0})})(rt,_,st,$)})}},5623:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const d=c(2517),h=c(2039),g=c(9390),b=c(2823),_e=c(708);function et($,_){const nt=(it=$.length>2,ot=_.activationCacheKey,{name:"MatMul",inputNames:it?["A","B","Bias"]:["A","B"],inputTypes:it?[h.TextureType.unpacked,h.TextureType.unpacked,h.TextureType.unpacked]:[h.TextureType.unpacked,h.TextureType.unpacked],cacheHint:ot});var it,ot;return Object.assign(Object.assign({},nt),{get:()=>function(lt,at,ct){const dt=at[0].dims,ht=at[1].dims,pt=d.BroadcastUtil.calcShape(dt,ht,!0);if(!pt)throw new Error("Can't use matmul on the given tensors");const ft=(0,g.getCoordsDataType)(pt.length),mt=(0,g.getGlChannels)(),{activationFunction:xt,applyActivation:gt}=(0,b.getActivationSnippet)(ct),Et=at.length>2,St=Et?"value += getBiasForMatmul();":"",Pt=Et?`${st(ft,mt,at[2].dims,pt,!1)}`:"",Mt=pt.length,Rt=dt.length,Dt=ht.length,Tt=`
    ${xt}
    ${Pt}
    float process(int indices[${Mt}]) {
        int a[${Rt}];
        int b[${Dt}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${dt[dt.length-1]}; ++k) {
            a[${Rt-1}] = k;
            b[${Dt-2}] = k;
            value += _A(a) * _B(b);
        }
        ${St}
        ${gt}
        return value;
    }`;return Object.assign(Object.assign({},lt),{output:{dims:pt,type:at[0].type,textureType:h.TextureType.unpacked},shaderSource:Tt})}(nt,$,_)})}e.matMul=($,_,nt)=>(rt(_),$.session.pack?[$.run((0,_e.createPackedMatmulProgramInfoLoader)($,_,nt),_)]:[$.run(et(_,nt),_)]),e.parseMatMulAttributes=$=>(0,b.parseInternalActivationAttributes)($.attributes),e.createMatmulProgramInfoLoader=et;const rt=$=>{if(!$||$.length!==2)throw new Error("MatMul requires 2 inputs.");if($[0].dims[$[0].dims.length-1]!==$[1].dims[$[1].dims.length-2])throw new Error("shared dimension does not match.");if($[0].type!=="float32"&&$[0].type!=="float64"||$[1].type!=="float32"&&$[1].type!=="float64")throw new Error("inputs should be float type");if($[0].type!==$[1].type)throw new Error("inputs types should match")};function st($,_,nt,it,ot){let lt="";const at=nt.length,ct=it.length,dt=ct-at;lt=ct<2&&at>0?"coords":nt.map((ft,mt)=>`coords.${_[mt+dt]}`).join(", ");const ht=d.BroadcastUtil.getBroadcastDims(nt,it).map(ft=>`coords.${_[ft+dt]} = 0;`).join(`
`);let pt="vec4(outputValue.xx, outputValue.yy)";return d.ShapeUtil.size(nt)===1&&(pt="vec4(outputValue.x)"),ot?`
vec4 getBiasForMatmul() {
  ${$} coords = getOutputCoords();
  ${ht}
  vec4 outputValue = getBias(${lt});
  return ${pt};
}`:`
float getBiasForMatmul() {
  ${$} coords = getOutputCoords();
  ${ht}
  return getBias(coords.x);
}`}e.getBiasForMatmul=st},2403:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const d=c(5060),h=c(2039),g=c(9390),b=c(2827),_e={name:"pack",inputNames:["A"],inputTypes:[h.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(et,rt)=>Object.assign(Object.assign({},_e),{get:()=>((st,$)=>{const _=(0,d.getGlsl)(st.session.backend.glContext.version),nt=$.dims,it=nt.length,ot=$.dims.length,lt=(0,g.getCoordsDataType)(ot),at=(0,b.getChannels)("rc",ot),ct=(dt=ot,ht=at,pt=nt[nt.length-2],ft=nt[nt.length-1],dt===0||dt===1?"":`
    int r = ${ht[dt-2]};
    int c = ${ht[dt-1]};
    int rp1 = ${ht[dt-2]} + 1;
    int cp1 = ${ht[dt-1]} + 1;
    bool rEdge = rp1 >= ${ft};
    bool cEdge = cp1 >= ${pt};
    `);var dt,ht,pt,ft;let mt;mt=it===0?[1,1]:it===1?[nt[0],1]:[nt[ot-1],nt[ot-2]];const xt=function(St,Pt,Mt){if(St===0)return"false";if(St===1)return`rc > ${Pt[0]}`;let Rt="";for(let Dt=St-2;Dt<St;Dt++)Rt+=`${Mt[Dt]} >= ${Pt[Dt-St+2]}`,Dt<St-1&&(Rt+="||");return Rt}(ot,mt,at),gt=function(St,Pt){const Mt=St.length;if(Mt===0)return"getA(), 0, 0, 0";if(Mt===1)return`getA(rc),
            rc + 1 >= ${St[0]} ? 0. : getA(rc + 1),
            0, 0`;let Rt="";if(Mt>2)for(let Dt=0;Dt<Mt-2;++Dt)Rt+=`${Pt[Dt]},`;return`getA(${Rt}r, c),
          rEdge ? 0. : getA(${Rt}rp1, c),
          cEdge ? 0. : getA(${Rt}r, cp1),
          rEdge || cEdge ? 0. : getA(${Rt}rp1, cp1)`}(nt,at),Et=`
        void main() {
          ${lt} rc = getOutputCoords();

          if(${xt}) {
            ${_.output} = vec4(0);
          } else {
            ${ct}

            ${_.output} = vec4(${gt});
          }
        }
      `;return Object.assign(Object.assign({},_e),{hasMain:!0,output:{dims:$.dims,type:$.type,textureType:h.TextureType.packed},shaderSource:Et})})(et,rt)})},2827:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const d=c(9390);function h(g,b){return(0,d.getGlChannels)(b).map(_e=>`${g}.${_e}`)}e.getVecChannels=h,e.getChannels=function(g,b){return b===1?[g]:h(g,b)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const d=c(246),h=c(2517),g=c(5060),b=c(2039),_e={name:"Pad",inputNames:["A"],inputTypes:[b.TextureType.unpacked]};e.padV2=(lt,at,ct)=>(st(at),[lt.run(Object.assign(Object.assign({},_e),{cacheHint:ct.cacheKey,get:()=>rt(lt,at[0],ct)}),at)]),e.parsePadAttributesV2=lt=>{const at=lt.attributes.getString("mode","constant"),ct=lt.attributes.getFloat("value",0),dt=lt.attributes.getInts("pads");return(0,d.createAttributeWithCacheKey)({mode:at,value:ct,pads:dt})},e.padV11=(lt,at,ct)=>{$(at);const dt=et(lt,at,ct);return(0,e.padV2)(lt,[at[0]],dt)},e.parsePadAttributesV11=lt=>lt.attributes.getString("mode","constant");const et=(lt,at,ct)=>{if(!lt.session.isInitializer(at[1].dataId)||at.length>=3&&!lt.session.isInitializer(at[2].dataId))throw new Error("dynamic pad attributes are not allowed");const dt=Array.from(at[1].integerData),ht=at.length>=3?at[2].floatData[0]:0;return(0,d.createAttributeWithCacheKey)({mode:ct,pads:dt,value:ht})},rt=(lt,at,ct)=>{const dt=h.ShapeUtil.padShape(at.dims.slice(),ct.pads),ht=dt.length,pt=`
      ${_(lt,at,ct)}
      float process(int[${ht}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[b.TextureType.unpacked],output:{dims:dt,type:at.type,textureType:b.TextureType.unpacked},shaderSource:pt}},st=lt=>{if(!lt||lt.length!==1)throw new Error("Pad requires 1 input");if(lt[0].type!=="float32"&&lt[0].type!=="float64")throw new Error("Invalid input type.")},$=lt=>{if(!lt||lt.length!==2&&lt.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(lt[1].type!=="int32")throw new Error("Invalid input type.");if(lt.length>=3&&lt[2].type==="string")throw new Error("Invalid input type.")},_=(lt,at,ct)=>{const dt=(0,g.getGlsl)(lt.session.backend.glContext.version),[ht,pt]=lt.calculateTextureWidthAndHeight(at.dims,b.TextureType.unpacked),ft=h.ShapeUtil.computeStrides(at.dims);switch(ct.mode){case"constant":return nt(dt,at.dims,ft,ht,pt,ct.pads,ct.value);case"reflect":return it(dt,at.dims,ft,ht,pt,ct.pads);case"edge":return ot(dt,at.dims,ft,ht,pt,ct.pads);default:throw new Error("Invalid mode")}},nt=(lt,at,ct,dt,ht,pt,ft)=>{const mt=at.length;let xt="";for(let gt=mt-1;gt>=0;--gt)xt+=`
        k = m[${gt}] - ${pt[gt]};
        if (k < 0)  return constant;
        if (k >= ${at[gt]}) return constant;
        offset += k * ${ct[gt]};
        `;return`
      float padA(int m[${mt}]) {
        const float constant = float(${ft});
        int offset = 0;
        int k = 0;
        ${xt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${lt.texture2D}(A, coords));
        return value;
      }
      `},it=(lt,at,ct,dt,ht,pt)=>{const ft=at.length;let mt="";for(let xt=ft-1;xt>=0;--xt)mt+=`
        k = m[${xt}] - ${pt[xt]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(at[xt]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${at[xt]}) { k = _2n_1 - k; }
        }
        offset += k * ${ct[xt]};
        `;return`
      float padA(int m[${ft}]) {
        int offset = 0;
        int k = 0;
        ${mt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${lt.texture2D}(A, coords));
        return value;
      }
      `},ot=(lt,at,ct,dt,ht,pt)=>{const ft=at.length;let mt="";for(let xt=ft-1;xt>=0;--xt)mt+=`
        k = m[${xt}] - ${pt[xt]};
        if (k < 0)  k = 0;
        if (k >= ${at[xt]}) k = ${at[xt]-1};
        offset += k * ${ct[xt]};
      `;return`
      float padA(int m[${ft}]) {
        int offset = 0;
        int k = 0;
        ${mt}
        vec2 coords = offsetToCoords(offset, ${dt}, ${ht});
        float value = getColorAsFloat(${lt.texture2D}(A, coords));
        return value;
      }
      `}},2143:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const d=c(246),h=c(2517),g=c(2039);e.averagePool=(ot,lt,at)=>{$(lt);const ct={name:"AveragePool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:at.cacheKey};return[ot.run(Object.assign(Object.assign({},ct),{get:()=>b(lt,ct,!1,at)}),lt)]},e.parseAveragePoolAttributes=ot=>{const lt=ot.attributes.getString("auto_pad","NOTSET"),at=ot.attributes.getInt("ceil_mode",0),ct=ot.attributes.getInt("count_include_pad",0)!==0,dt=ot.attributes.getInts("kernel_shape"),ht=ot.attributes.getInts("strides",[]),pt=ot.attributes.getInts("pads",[]);if(at!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,d.createAttributeWithCacheKey)({autoPad:lt,ceilMode:at,countIncludePad:ct,kernelShape:dt,strides:ht,pads:pt})};const b=(ot,lt,at,ct)=>{const[dt,ht]=et(ot,ct,at),pt=h.ShapeUtil.size(dt.kernelShape);let ft="";dt.countIncludePad?ft+=`value /= float(${pt});`:ft+=`value /= float(${pt} - pad);`;const mt=`
        ${_(ot[0].dims,dt,"value += _X(x);",ft,"0.0")}
      `;return Object.assign(Object.assign({},lt),{output:{dims:ht,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:mt})};e.globalAveragePool=(ot,lt,at)=>{$(lt);const ct={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:`${at.countIncludePad}`};return[ot.run(Object.assign(Object.assign({},ct),{get:()=>b(lt,ct,!0,at)}),lt)]},e.parseGlobalAveragePoolAttributes=ot=>{const lt=ot.attributes.getInt("count_include_pad",0)!==0;return(0,d.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:lt,kernelShape:[],strides:[],pads:[]})},e.maxPool=(ot,lt,at)=>{$(lt);const ct={name:"MaxPool",inputNames:["X"],inputTypes:[g.TextureType.unpacked],cacheHint:at.cacheKey};return[ot.run(Object.assign(Object.assign({},ct),{get:()=>_e(lt,ct,!1,at)}),lt)]},e.parseMaxPoolAttributes=ot=>{const lt=ot.attributes.getString("auto_pad","NOTSET"),at=ot.attributes.getInt("ceil_mode",0),ct=ot.attributes.getInts("kernel_shape"),dt=ot.attributes.getInts("strides",[]),ht=ot.attributes.getInts("pads",[]),pt=ot.attributes.getInt("storage_order",0),ft=ot.attributes.getInts("dilations",[]);if(pt!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(at!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,d.createAttributeWithCacheKey)({autoPad:lt,ceilMode:at,countIncludePad:!1,kernelShape:ct,strides:dt,pads:ht,storageOrder:pt,dilations:ft})};const _e=(ot,lt,at,ct)=>{const[dt,ht]=et(ot,ct,at),pt=`
      ${_(ot[0].dims,dt,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},lt),{output:{dims:ht,type:ot[0].type,textureType:g.TextureType.unpacked},shaderSource:pt})},et=(ot,lt,at)=>{const ct=ot[0].dims.slice(),dt=Object.hasOwnProperty.call(lt,"dilations"),ht=lt.kernelShape.slice(),pt=lt.strides.slice(),ft=dt?lt.dilations.slice():[],mt=lt.pads.slice();h.PoolConvUtil.adjustPoolAttributes(at,ct,ht,pt,ft,mt);const xt=h.PoolConvUtil.computePoolOutputShape(at,ct,pt,ft,ht,mt,lt.autoPad),gt=Object.assign({},lt);return dt?Object.assign(gt,{kernelShape:ht,strides:pt,pads:mt,dilations:ft,cacheKey:lt.cacheKey}):Object.assign(gt,{kernelShape:ht,strides:pt,pads:mt,cacheKey:lt.cacheKey}),[gt,xt]},rt={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},st={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[g.TextureType.unpacked]};e.globalMaxPool=(ot,lt)=>($(lt),[ot.run(Object.assign(Object.assign({},st),{get:()=>_e(lt,st,!0,rt)}),lt)]);const $=ot=>{if(!ot||ot.length!==1)throw new Error("Pool ops requires 1 input.");if(ot[0].type!=="float32"&&ot[0].type!=="float64")throw new Error("Invalid input type.")},_=(ot,lt,at,ct,dt)=>{const ht=ot.length;if(lt.kernelShape.length<=2){const pt=lt.kernelShape[lt.kernelShape.length-1],ft=lt.strides[lt.strides.length-1],mt=lt.pads[lt.pads.length/2-1],xt=lt.pads[lt.pads.length-1],gt=ot[ht-1];let Et="",St="",Pt="";if(Et=mt+xt!==0?`
          for (int i = 0; i < ${pt}; i++) {
            x[${ht} - 1] = indices[${ht} - 1] * ${ft} - ${mt} + i;
            if (x[${ht} - 1] < 0 || x[${ht} - 1] >= ${gt}) {
              pad++;
              continue;
            }
            ${at}
          }`:`
          for (int i = 0; i < ${pt}; i++) {
            x[${ht} - 1] = indices[${ht} - 1] * ${ft} - ${mt} + i;
            ${at}
          }`,lt.kernelShape.length===2){const Mt=lt.kernelShape[lt.kernelShape.length-2],Rt=lt.strides[lt.strides.length-2],Dt=lt.pads[lt.pads.length/2-2],Tt=lt.pads[lt.pads.length-2],It=ot[ht-2];St=Dt+Tt!==0?`
            for (int j = 0; j < ${Mt}; j++) {
              x[${ht} - 2] = indices[${ht} - 2] * ${Rt} - ${Dt} + j;
              if (x[${ht} - 2] < 0 || x[${ht} - 2] >= ${It}) {
                pad+= ${pt};
                continue;
              }
          `:`
            for (int j = 0; j < ${Mt}; j++) {
              x[${ht} - 2] = indices[${ht} - 2] * ${Rt} - ${Dt} + j;
            `,Pt=`
          }
        `}return`
        float process(int indices[${ht}]) {
          int x[${ht}];
          copyVec(indices, x);

          float value = ${dt};
          int pad = 0;
          ${St}
          ${Et}
          ${Pt}
          ${ct}
          return value;
        }
      `}{const pt=h.ShapeUtil.size(lt.kernelShape),ft=h.ShapeUtil.computeStrides(lt.kernelShape),mt=ft.length,xt=lt.pads.length,gt=it(mt),Et=nt(ot,"inputDims"),St=nt(lt.pads,"pads"),Pt=nt(ft,"kernelStrides"),Mt=nt(lt.strides,"strides");let Rt="";return Rt=lt.pads.reduce((Dt,Tt)=>Dt+Tt)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${at}
          }`:`
          }
          ${at}
        `,`
        ${gt}
        float process(int indices[${ht}]) {
          int x[${ht}];
          copyVec(indices, x);
          int offset[${mt}];
          int pads[${xt}];
          int inputDims[${ht}];
          int kernelStrides[${mt}];
          int strides[${mt}];
          ${St}
          ${Et}
          ${Mt}
          ${Pt}

          float value = ${dt};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${pt}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${ht} - ${mt}; j < ${ht}; j++) {
              x[j] = indices[j] * strides[j - ${ht} + ${mt}]
                + offset[j - ${ht} + ${mt}] - pads[j - 2];
              ${Rt}
          }
          ${ct}

          return value;
        }
      `}},nt=(ot,lt)=>{let at="";for(let ct=0;ct<ot.length;ct++)at+=`
      ${lt}[${ct}] = ${ot[ct]};
    `;return at},it=ot=>`
  void offsetToIndices(int offset, int[${ot}] strides, out int[${ot}] indices) {
    if (${ot} == 0) {
      return;
    }
    for (int i = 0; i < ${ot} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${ot} - 1] = offset;
  }`},4939:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const d=c(246),h=c(782),g=c(2517),b=c(2039),_e=(st,$,_,nt,it)=>{rt($);const ot={name:nt,inputNames:["A"],inputTypes:[b.TextureType.unpacked]};return[st.run(Object.assign(Object.assign({},ot),{cacheHint:_.cacheKey,get:()=>et(st,$,_,nt,it,ot)}),$)]};e.parseReduceAttributes=st=>{const $=st.attributes.getInts("axes",[]),_=st.attributes.getInt("keepdims",1)===1;return(0,d.createAttributeWithCacheKey)({axes:$,keepDims:_})};const et=(st,$,_,nt,it,ot)=>{const lt=[],at=$[0].dims.length||1,ct=[],dt=g.ShapeUtil.normalizeAxes(_.axes,$[0].dims.length),ht=it($,dt);let pt=ht[1];for(let mt=0;mt<$[0].dims.length;mt++)dt.indexOf(mt)>=0||dt.length===0?(_.keepDims&&lt.push(1),pt=`
          for(int j${mt} = 0; j${mt} < ${$[0].dims[mt]}; j${mt}++) {
            inputIdx[${mt}] = j${mt};
            ${pt}
          }`):(ct.push(`inputIdx[${mt}] = outputIdx[${lt.length}];`),lt.push($[0].dims[mt]));const ft=`
      float process(int outputIdx[${lt.length||1}]) {
        float value;                 // final result
        int inputIdx[${at}];      // addressing input data
        ${ct.join(`
`)}
        ${ht[0]}       // init ops for reduce max/min
        ${pt}
        ${ht[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},ot),{output:{dims:lt,type:$[0].type,textureType:b.TextureType.unpacked},shaderSource:ft})},rt=st=>{if(!st||st.length!==1)throw new Error("Reduce op requires 1 input.");if(h.NUMBER_TYPES.indexOf(st[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(st,$,_)=>_e(st,$,_,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=(st,$,_)=>_e(st,$,_,"ReduceMean",(nt,it)=>{let ot=1;for(let lt=0;lt<nt[0].dims.length;lt++)(it.indexOf(lt)>=0||it.length===0)&&(ot*=nt[0].dims[lt]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${ot}.;`]}),e.reduceMax=(st,$,_)=>_e(st,$,_,"ReduceMax",(nt,it)=>{const ot=[];for(let lt=0;lt<nt[0].dims.length;lt++)(it.indexOf(lt)>=0||it.length===0)&&ot.push(`inputIdx[${lt}] = 0;`);return[`${ot.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=(st,$,_)=>_e(st,$,_,"ReduceMin",(nt,it)=>{const ot=[];for(let lt=0;lt<nt[0].dims.length;lt++)(it.indexOf(lt)>=0||it.length===0)&&ot.push(`inputIdx[${lt}] = 0;`);return[`${ot.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=(st,$,_)=>_e(st,$,_,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=(st,$,_)=>_e(st,$,_,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=(st,$,_)=>_e(st,$,_,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const d=c(2517),h=c(5060),g=c(2039),b=c(2827);e.createPackedReshape3DProgramInfoLoader=(_e,et,rt)=>{const st=($=>({name:"Reshape (packed)",inputTypes:[g.TextureType.packed],inputNames:["A"],cacheHint:`${$}`}))(rt);return Object.assign(Object.assign({},st),{get:()=>(($,_,nt,it)=>{const ot=_.dims,lt=it;let at="";for(let ht=0;ht<4;ht++){let pt="";switch(ht){case 0:pt="outputCoords = rc;";break;case 1:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:pt="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:pt="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}at+=`
        ${pt}
        ${ht>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${ht}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${ht>0?"}":""}
      `}const ct=(0,h.getGlsl)($.session.backend.glContext.version),dt=`
      ${function(ht){const pt=d.ShapeUtil.computeStrides(ht),ft=["b","r","c"],mt="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${pt.map((xt,gt)=>`int ${ft[gt]} = ${mt} / ${xt}; ${gt===pt.length-1?`int ${ft[gt+1]} = ${mt} - ${ft[gt]} * ${xt}`:`index -= ${ft[gt]} * ${xt}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(ot)}
      ${function(ht){const pt=d.ShapeUtil.computeStrides(ht);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${pt[0]} + coords.z * ${pt[1]} + coords.y;
  }
`}(lt)}
      ${(0,b.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${lt[2]};
        int cols = ${lt[1]};

        ${at}
        ${ct.output} = result;
      }
    `;return Object.assign(Object.assign({},nt),{output:{dims:lt,type:_.type,textureType:g.TextureType.packed},shaderSource:dt,hasMain:!0})})(_e,et,st,rt)})},e.processDims3D=function(_e){if(_e.length===0)return[1,1,1];let et=1;for(let rt=0;rt<_e.length-2;++rt)et*=_e[rt];return[et,_e.length>1?_e[_e.length-2]:1,_e[_e.length-1]]},e.isReshapeCheap=function(_e,et){let rt=!1;return rt=_e.length===0||et.length===0||(_e.length<2||et.length<2?_e[_e.length-1]===et[et.length-1]:_e[_e.length-1]===et[et.length-1]&&_e[_e.length-2]===et[et.length-2]),rt}},718:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const d=c(2517);e.reshape=(h,g)=>{const b=d.ShapeUtil.calculateReshapedDims(g[0].dims,g[1].integerData);return h.session.pack?[h.reshapePacked(g[0],b)]:[h.reshapeUnpacked(g[0],b)]}},2268:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const d=c(5060),h=c(2039),g=c(9390),b=c(2827),_e=c(9793),et={name:"Resize",inputNames:["A"],inputTypes:[h.TextureType.packed]};e.resize=(nt,it,ot)=>((0,_e.validateInputs)(it,ot),[nt.run(Object.assign(Object.assign({},et),{cacheHint:ot.cacheKey,get:()=>rt(nt,it,ot)}),it)]),e.parseResizeAttributesV10=nt=>(0,_e.parseUpsampleAttributes)(nt,10),e.parseResizeAttributesV11=nt=>(0,_e.parseUpsampleAttributes)(nt,11);const rt=(nt,it,ot)=>{const lt=(0,d.getGlsl)(nt.session.backend.glContext.version),[at,ct]=st(it,ot);if(at.every(Rt=>Rt===1)&&ot.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},et),{output:{dims:ct,type:it[0].type,textureType:h.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${lt.texture2D}(X, TexCoords);
                    ${lt.output} = v;
                }`});const dt=ct.length;if(dt<2)throw new Error(`output dimension should be at least 2, but got ${dt}`);const ht=ct[dt-2],pt=ct[dt-1],ft=it[0].dims;if(dt!==ft.length)throw new Error(`output dimension should match input ${ft.length}, but got ${dt}`);const mt=ft[dt-2],xt=ft[dt-1],gt=at[dt-2],Et=at[dt-1];let St="";if(ot.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${ot.mode}'`);switch(ot.coordinateTransformMode){case"asymmetric":St=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":St=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":St=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${pt}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${ht}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${pt}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${ht}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":St=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${pt}.0 - 1.0, ${ht}.0 - 1.0, ${pt}.0 - 1.0,
                            ${ht}.0 - 1.0);
                        vec4 original = vec4(${xt}.0 - 1.0, ${mt}.0 - 1.0, ${xt}.0 - 1.0,
                            ${mt}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${ot.coordinateTransformMode}'`)}const Pt=(0,g.getCoordsDataType)(dt),Mt=`
            const vec2 inputWH = vec2(${mt}.0, ${xt}.0);
            const vec4 scaleWHWH = vec4(float(${gt}), float(${Et}), float(${gt}), float(${Et}));
            ${(0,b.unpackFromChannel)()}
            ${St}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${Pt} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${ht-1};
                bool hasNextCol = rc.z < ${pt-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${lt.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},et),{output:{dims:ct,type:it[0].type,textureType:h.TextureType.packed},hasMain:!0,shaderSource:Mt})},st=(nt,it)=>{const ot=nt[0].dims;let lt,at=it.scales;if(at.length===0){const dt=nt[it.scalesInputIdx];if(dt&&dt.size!==0){if(nt[it.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");at=$(dt,it.mode,it.isResize)}else{const ht=nt[it.sizesInputIdx];if(!ht||ht.size===0)throw new Error("Either scales or sizes MUST be provided as input.");lt=Array.from(ht.integerData),at=_(lt,ot,it.mode,it.isResize)}}else if(nt[it.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const ct=lt||ot.map((dt,ht)=>Math.floor(dt*at[ht]));return[at,ct]},$=(nt,it,ot)=>{const lt=Array.from(nt.floatData);return(0,_e.scalesValidation)(lt,it,ot),lt},_=(nt,it,ot,lt)=>{const at=it.length,ct=new Array(at);for(let dt=0,ht=at;dt<ht;dt++)if(it[dt]===0){if(nt[dt]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");ct[dt]=1}else ct[dt]=nt[dt]/it[dt];return(0,_e.scalesValidation)(ct,ot,lt),ct}},8117:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const d=c(9162);e.shape=(g,b)=>(h(b),[new d.Tensor([b[0].dims.length],"int32",void 0,void 0,new Int32Array(b[0].dims))]);const h=g=>{if(!g||g.length!==1)throw new Error("Shape requires 1 input.")}},2278:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const d=c(246),h=c(782),g=c(2517),b=c(2039),_e={name:"Slice",inputNames:["A"],inputTypes:[b.TextureType.unpacked]};e.slice=(_,nt,it)=>(rt(nt),[_.run(Object.assign(Object.assign({},_e),{cacheHint:it.cacheKey,get:()=>et(_,nt[0],it)}),nt)]),e.parseSliceAttributes=_=>{const nt=_.attributes.getInts("starts"),it=_.attributes.getInts("ends"),ot=_.attributes.getInts("axes",[]);return(0,d.createAttributeWithCacheKey)({starts:nt,ends:it,axes:ot})};const et=(_,nt,it)=>{const ot=it.axes.length===0?nt.dims.slice(0).map((ft,mt)=>mt):it.axes,lt=g.ShapeUtil.normalizeAxes(ot,nt.dims.length),at=it.starts.map((ft,mt)=>ft>nt.dims[lt[mt]]-1?nt.dims[lt[mt]]:g.ShapeUtil.normalizeAxis(ft,nt.dims[lt[mt]])),ct=it.ends.map((ft,mt)=>ft>nt.dims[lt[mt]]-1?nt.dims[lt[mt]]:g.ShapeUtil.normalizeAxis(ft,nt.dims[lt[mt]])),dt=nt.dims.slice(),ht=[];for(let ft=0;ft<lt.length;ft++)dt[lt[ft]]=ct[ft]-at[ft],at[ft]>0&&ht.push(`outputIdx[${lt[ft]}] += ${at[ft]};`);const pt=`
      float process(int outputIdx[${dt.length}]) {
        ${ht.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},_e),{output:{dims:dt,type:nt.type,textureType:b.TextureType.unpacked},shaderSource:pt})},rt=_=>{if(!_||_.length!==1)throw new Error("Slice requires 1 input.");if(h.NUMBER_TYPES.indexOf(_[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(_,nt)=>{$(nt);const it=st(_,nt);return[_.run(Object.assign(Object.assign({},_e),{cacheHint:it.cacheKey,get:()=>et(_,nt[0],it)}),[nt[0]])]};const st=(_,nt)=>{if(!_.session.isInitializer(nt[1].dataId)||!_.session.isInitializer(nt[2].dataId)||nt.length>=4&&!_.session.isInitializer(nt[3].dataId)||nt.length>=5&&!_.session.isInitializer(nt[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(nt.length>=5&&nt[4].integerData.some(at=>at!==1))throw new Error("currently non-1 steps is not supported for Slice");const it=Array.from(nt[1].integerData),ot=Array.from(nt[2].integerData),lt=nt.length>=4?Array.from(nt[3].integerData):[];return{starts:it,ends:ot,axes:lt,cacheKey:`${lt};${it};${ot}`}},$=_=>{if(!_||_.length<3||_.length>5)throw new Error("Invalid input number.");if(_[1].type!=="int32"||_[1].dims.length!==1)throw new Error("Invalid input type.");if(_[2].type!=="int32"||_[2].dims.length!==1)throw new Error("Invalid input type.");if(_.length>=4&&(_[3].type!=="int32"||_[3].dims.length!==1))throw new Error("Invalid input type.");if(_.length>=5&&(_[4].type!=="int32"||_[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const d=c(246),h=c(2517),g=c(5060),b=c(2039),_e=c(3738),et={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[b.TextureType.unpacked]},rt={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked]},st={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[b.TextureType.unpacked,b.TextureType.unpacked,b.TextureType.unpacked]};e.softmax=(lt,at,ct)=>{ot(at);const dt=at[0].dims.slice(),ht=h.ShapeUtil.normalizeAxis(ct.axis,dt.length),pt=h.ShapeUtil.sizeToDimension(dt,ht),ft=h.ShapeUtil.sizeFromDimension(dt,ht);return $(lt,at,ct,pt,ft)},e.parseSoftmaxAttributes=lt=>(0,d.createAttributeWithCacheKey)({axis:lt.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=lt=>(0,d.createAttributeWithCacheKey)({axis:lt.attributes.getInt("axis",-1)}),e.softmaxV13=(lt,at,ct)=>{ot(at);const dt=at[0].dims.slice(),ht=h.ShapeUtil.normalizeAxis(ct.axis,dt.length),pt=dt.length,ft=ht!==pt-1,mt=[];let xt,gt=[],Et=[];ft&&(gt=Array.from({length:pt}).map((Rt,Dt)=>Dt),gt[ht]=pt-1,gt[pt-1]=ht,gt.map(Rt=>mt.push(dt[Rt])),xt=(0,d.createAttributeWithCacheKey)({perm:gt}),Et=(0,_e.transpose)(lt,at,xt));const St=ft?h.ShapeUtil.sizeToDimension(mt,pt-1):h.ShapeUtil.sizeToDimension(dt,pt-1),Pt=ft?h.ShapeUtil.sizeFromDimension(mt,pt-1):h.ShapeUtil.sizeFromDimension(dt,pt-1),Mt=$(lt,ft?Et:at,ct,St,Pt);return ft?(0,_e.transpose)(lt,Mt,xt):Mt};const $=(lt,at,ct,dt,ht)=>{const pt=_(lt,at[0],dt,ht,[dt]),ft=lt.run(Object.assign(Object.assign({},et),{cacheHint:ct.cacheKey,get:()=>pt}),at),mt=nt(lt,at[0],dt,ht,pt.output.dims,[dt]),xt=lt.run(Object.assign(Object.assign({},rt),{cacheHint:ct.cacheKey,get:()=>mt}),[at[0],ft]),gt=it(lt,at[0],dt,ht,pt.output.dims,mt.output.dims);return[lt.run(Object.assign(Object.assign({},st),{cacheHint:ct.cacheKey,get:()=>gt}),[at[0],ft,xt])]},_=(lt,at,ct,dt,ht)=>{const[pt,ft]=lt.calculateTextureWidthAndHeight(at.dims,b.TextureType.unpacked),mt=ht.length;if(ct<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ht.length!==1)throw new Error("Dimensionality of the output should be 1");if(ht[0]!==ct)throw new Error("Shape of the output should be equal to logical row count");const xt=(0,g.getGlsl)(lt.session.backend.glContext.version),gt=`
      float process(int[${mt}] indices) {
        int logical_row_start_offset = indices[0] * ${dt};

        float max = getColorAsFloat(${xt.texture2D}(A, offsetToCoords(logical_row_start_offset, ${pt},
        ${ft} )));
        for(int i=1; i<${dt}; ++i)
        {
          float current = getColorAsFloat(${xt.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${pt}, ${ft})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},et),{output:{dims:ht,type:at.type,textureType:b.TextureType.unpacked},shaderSource:gt})},nt=(lt,at,ct,dt,ht,pt)=>{const[ft,mt]=lt.calculateTextureWidthAndHeight(at.dims,b.TextureType.unpacked),xt=pt.length;if(ct<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(pt.length!==1)throw new Error("Dimensionality of the output should be 1");if(pt[0]!==ct)throw new Error("Shape of the output should be equal to logical row count");if(ht.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ht[0]!==ct)throw new Error("Shape of the intermediate results should be equal to logical row count");const gt=`
      float process(int[${xt}] indices) {
        int logical_row_start_offset = indices[0] * ${dt};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${dt}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,g.getGlsl)(lt.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${ft}, ${mt}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},rt),{output:{dims:pt,type:at.type,textureType:b.TextureType.unpacked},shaderSource:gt})},it=(lt,at,ct,dt,ht,pt)=>{const[ft,mt]=lt.calculateTextureWidthAndHeight(at.dims,b.TextureType.unpacked),xt=at.dims.length;if(ct<1||dt<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(ht.length!==1||pt.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(ht[0]!==ct||pt[0]!==ct)throw new Error("Shape of the intermediate results should be equal to logical row count");const gt=`
      float process(int[${xt}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${ft}, ${mt});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${dt};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},st),{output:{dims:at.dims,type:at.type,textureType:b.TextureType.unpacked},shaderSource:gt})},ot=lt=>{if(!lt||lt.length!==1)throw new Error("Softmax requires 1 input.");if(lt[0].type!=="float32"&&lt[0].type!=="float64")throw new Error("Invalid input type")}},5975:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const d=c(246),h=c(2517),g=c(2039),b={name:"Split",inputNames:["A"],inputTypes:[g.TextureType.unpacked]};e.split=(st,$,_)=>{rt($);const nt=h.ShapeUtil.normalizeAxis(_.axis,$[0].dims.length),it=_e(st,$,nt,_),ot=[];for(let lt=0;lt<it;++lt)ot.push(st.run(Object.assign(Object.assign({},b),{cacheHint:`${_.cacheKey};${lt}`,get:()=>et(st,$[0],_,nt,lt)}),$));return ot},e.parseSplitAttributes=st=>{const $=st.attributes.getInt("axis",0),_=st.attributes.getInts("split",[]),nt=st.outputs.length;return(0,d.createAttributeWithCacheKey)({axis:$,split:_,numOutputs:nt})};const _e=(st,$,_,nt)=>{const[,it]=h.SplitUtil.splitShape($[0].dims,_,nt.split,nt.numOutputs);return it.length},et=(st,$,_,nt,it)=>{const[ot,lt]=h.SplitUtil.splitShape($.dims,nt,_.split,_.numOutputs),at=lt[it],ct=ot[it],dt=`
      float process(int indices[${ct.length}]) {
        indices[${nt}] += ${at};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},b),{cacheHint:`${_.cacheKey}:${it}`,output:{dims:ct,type:$.type,textureType:g.TextureType.unpacked},shaderSource:dt})},rt=st=>{if(!st||st.length!==1)throw new Error("Split requires one input.");if(st[0].type!=="int8"&&st[0].type!=="uint8"&&st[0].type!=="int16"&&st[0].type!=="uint16"&&st[0].type!=="int32"&&st[0].type!=="uint32"&&st[0].type!=="float32"&&st[0].type!=="float64"&&st[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const d=c(2517);e.squeeze=(b,_e,et)=>{h(_e);const rt=d.ShapeUtil.squeezeShape(_e[0].dims,et);return[b.reshapeUnpacked(_e[0],rt)]},e.squeezeV13=(b,_e)=>(g(_e),(0,e.squeeze)(b,[_e[0]],Array.from(_e[1].integerData))),e.parseSqueezeAttributes=b=>b.attributes.getInts("axes");const h=b=>{if(!b||b.length!==1)throw new Error("Squeeze requires 1 input.");if(b[0].type==="string")throw new Error("invalid input tensor types.")},g=b=>{if(!b||b.length!==2)throw new Error("Squeeze requires 2 inputs.");if(b[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const d=c(5060),h=c(2039);e.sum=(_e,et)=>{b(et);const rt={name:"Sum",inputNames:et.map((st,$)=>`X${$}`),inputTypes:new Array(et.length).fill(h.TextureType.unpacked)};return[_e.run(Object.assign(Object.assign({},rt),{get:()=>g(_e,et,rt)}),et)]};const g=(_e,et,rt)=>{const st=(0,d.getGlsl)(_e.session.backend.glContext.version),$=et[0].dims.slice(),_=`
      void main() {
        vec4 result = ${et.map((nt,it)=>`${st.texture2D}(X${it},TexCoords)`).join(" + ")};
        ${st.output} = result;
      }
    `;return Object.assign(Object.assign({},rt),{output:{dims:$,type:et[0].type,textureType:h.TextureType.unpacked},hasMain:!0,shaderSource:_})},b=_e=>{if(!_e||_e.length===0)throw new Error("Sum requires inputs.");const et=_e[0].dims.length;for(let rt=1;rt<_e.length;rt++){if(et!==_e[rt].dims.length)throw new Error("Input shapes are mismatched.");for(let st=0;st<et;st++)if(_e[0].dims[st]!==_e[rt].dims[st])throw new Error("Input shapes are not matched.")}if(_e[0].type!=="float32"&&_e[0].type!=="float64")throw new Error("Invalid input type.");for(let rt=1;rt<_e.length;rt++)if(_e[0].type!==_e[rt].type)throw new Error("Input types are not matched.")}},5723:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const d=c(782),h=c(2039);e.tile=(_e,et)=>{b(et);const rt={name:"Tile",inputNames:["A"],inputTypes:[h.TextureType.unpacked]};return[_e.run(Object.assign(Object.assign({},rt),{get:()=>g(_e,et,rt)}),et)]};const g=(_e,et,rt)=>{const st=et[0].dims.slice(),$=new Array(st.length),_=[];for(let ot=0;ot<st.length;ot++)$[ot]=st[ot]*et[1].numberData[ot],_.push(`inputIdx[${ot}] = int(mod(float(outputIdx[${ot}]), ${st[ot]}.));`);const nt=$.length,it=`
      float process(int outputIdx[${nt}]) {
        int inputIdx[${nt}];
        ${_.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},rt),{output:{dims:$,type:et[0].type,textureType:h.TextureType.unpacked},shaderSource:it})},b=_e=>{if(!_e||_e.length!==2)throw new Error("Tile requires 2 input.");if(_e[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(_e[1].dims[0]!==_e[0].dims.length)throw new Error("Invalid input shape.");if(d.NUMBER_TYPES.indexOf(_e[0].type)===-1)throw new Error("Invalid input type.");if(_e[1].type!=="int32"&&_e[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const d=c(246),h=c(2517),g=c(2039),b={name:"Transpose",inputNames:["A"],inputTypes:[g.TextureType.unpacked]};e.transpose=(_,nt,it)=>($(nt),[_.run(Object.assign(Object.assign({},b),{cacheHint:it.cacheKey,get:()=>_e(_,nt[0],it.perm)}),nt)]),e.parseTransposeAttributes=_=>(0,d.createAttributeWithCacheKey)({perm:_.attributes.getInts("perm",[])});const _e=(_,nt,it)=>{const ot=nt.dims;it=et(ot,it);const lt=rt(ot,it),at=ot.length,ct=`
      ${st("perm",it,at)}
      float process(int indices[${at}]) {
        int a[${at}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},b),{output:{dims:lt,type:nt.type,textureType:g.TextureType.unpacked},shaderSource:ct})},et=(_,nt)=>(nt&&nt.length!==_.length&&(nt=[..._.keys()].reverse()),nt),rt=(_,nt)=>(nt=et(_,nt),h.ShapeUtil.sortBasedOnPerm(_,nt)),st=(_,nt,it)=>{const ot=[];ot.push(`void ${_}(out int a[${it}], int src[${it}]) {`);for(let lt=0;lt<it;++lt)ot.push(`	a[${nt[lt]}]=src[${lt}];`);return ot.push("	}"),ot.join(`
`)},$=_=>{if(!_||_.length!==1)throw new Error("Transpose requires 1 input.");if(_[0].type!=="float32"&&_[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const d=c(5060),h=c(2039);e.encodeAsUint8=(g,b)=>{const _e=b.shape,et=(0,d.getGlsl)(g.session.backend.glContext.version),rt=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${et.texture2D}(X,TexCoords).r;
      ${et.output} = encodeAsUint8(value);
    }`,st={name:"Uint8Encode",inputTypes:[h.TextureType.unpacked],inputNames:["X"],output:{dims:_e,type:b.tensor.type,textureType:h.TextureType.downloadUint8AsFloat},shaderSource:rt,hasMain:!0};return g.executeProgram(st,[b.tensor])}},4909:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const d=c(246),h=c(2517),g=c(8520),b=c(5060),_e=c(2039);function et(){return Mt("abs")}function rt(){return Mt("acos")}function st(){return Mt("asin")}function $(){return Mt("atan")}function _(){return Mt("ceil")}function nt(){return Mt("cos")}function it(Tt){const It="elu";return{body:`
  const float alpha = float(${Tt});

  float ${It}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${It}_(vec4 v) {
    return vec4(${It}_(v.x), ${It}_(v.y), ${It}_(v.z), ${It}_(v.w));
  }
  `,name:It,type:g.FunctionType.ValueBased}}function ot(){return Mt("exp")}function lt(){return Mt("floor")}function at(Tt,It){const Vt="clip";return{body:`
  const float min = float(${Tt});
  const float max = float(${It});

  float ${Vt}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Vt}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Vt,type:g.FunctionType.ValueBased}}function ct(){const Tt="indentity";return{body:`
  float ${Tt}_(float a) {
    return a;
  }
  vec4 ${Tt}_(vec4 v) {
    return v;
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function dt(Tt){const It="leakyRelu";return{body:`
  const float alpha = float(${Tt});

  float ${It}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${It}_(vec4 v) {
    return vec4(${It}_(v.x), ${It}_(v.y), ${It}_(v.z), ${It}_(v.w));
  }
  `,name:It,type:g.FunctionType.ValueBased}}function ht(){return Mt("log")}function pt(){const Tt="neg";return{body:`
  float ${Tt}_(float a) {
    return -a;
  }
  vec4 ${Tt}_(vec4 v) {
    return -v;
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function ft(){const Tt="not";return{body:`
  float ${Tt}_(float a) {
    return float( ! bool(a) );
  }
  bool ${Tt}_(bool a) {
    return !a;
  }
  vec4 ${Tt}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${Tt}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function mt(){return Mt("sin")}function xt(){const Tt="relu";return{body:`
  float ${Tt}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Tt}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function gt(){const Tt="sigmoid";return{body:`
  float ${Tt}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Tt}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function Et(){return Mt("sqrt")}function St(){return Mt("tan")}function Pt(){const Tt="tanh";return{body:`
  float ${Tt}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Tt}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}function Mt(Tt){return{body:`
  float ${Tt}_(float a) {
    return ${Tt}(a);
  }
  vec4 ${Tt}_(vec4 v) {
    return ${Tt}(v);
  }
  `,name:Tt,type:g.FunctionType.ValueBased}}e.glslAbs=et,e.glslAcos=rt,e.glslAsin=st,e.glslAtan=$,e.glslCeil=_,e.glslCos=nt,e.glslElu=it,e.glslExp=ot,e.glslFloor=lt,e.glslClip=at,e.glslIdentity=ct,e.glslLeakyRelu=dt,e.glslLog=ht,e.glslNeg=pt,e.glslNot=ft,e.glslSin=mt,e.glslRelu=xt,e.glslSigmoid=gt,e.glslSqrt=Et,e.glslTan=St,e.glslTanh=Pt;const Rt=(Tt,It,Vt,Bt)=>{const Ct=Tt.session.pack?_e.TextureType.packed:_e.TextureType.unpacked,en={name:Vt.name,inputTypes:[Ct],inputNames:["A"],cacheHint:Bt};return Object.assign(Object.assign({},en),{get:()=>((sn,kt,Ut,Jt)=>{const tn=sn.session.pack?_e.TextureType.packed:_e.TextureType.unpacked,Gt=(0,b.getGlsl)(sn.session.backend.glContext.version);return Object.assign(Object.assign({},kt),{output:{dims:Ut.dims,type:Ut.type,textureType:tn},shaderSource:`
     ${Jt.body}
     void main() {
       vec4 v = ${Gt.texture2D}(A, TexCoords);
       v = ${Jt.name}_(v);
       ${Gt.output} = v;
     }
     `,hasMain:!0})})(Tt,en,It,Vt)})};e.abs=(Tt,It)=>[Tt.run(Rt(Tt,It[0],et()),It)],e.acos=(Tt,It)=>[Tt.run(Rt(Tt,It[0],rt()),It)],e.asin=(Tt,It)=>[Tt.run(Rt(Tt,It[0],st()),It)],e.atan=(Tt,It)=>[Tt.run(Rt(Tt,It[0],$()),It)],e.clip=(Tt,It,Vt)=>[Tt.run(Rt(Tt,It[0],at(Vt.min,Vt.max),Vt.cacheKey),It)],e.parseClipAttributes=Tt=>(0,d.createAttributeWithCacheKey)({min:Tt.attributes.getFloat("min",h.MIN_CLIP),max:Tt.attributes.getFloat("max",h.MAX_CLIP)}),e.clipV11=(Tt,It)=>{const Vt=Dt(Tt,It);return(0,e.clip)(Tt,[It[0]],Vt)};const Dt=(Tt,It)=>{if(It.length>=3&&(!Tt.session.isInitializer(It[1].dataId)||!Tt.session.isInitializer(It[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Vt=It.length>=3?It[1].numberData[0]:h.MIN_CLIP,Bt=It.length>=3?It[2].numberData[0]:h.MAX_CLIP;return(0,d.createAttributeWithCacheKey)({min:Vt,max:Bt})};e.ceil=(Tt,It)=>[Tt.run(Rt(Tt,It[0],_()),It)],e.cos=(Tt,It)=>[Tt.run(Rt(Tt,It[0],nt()),It)],e.elu=(Tt,It,Vt)=>[Tt.run(Rt(Tt,It[0],it(Vt.alpha),Vt.cacheKey),It)],e.parseEluAttributes=Tt=>(0,d.createAttributeWithCacheKey)({alpha:Tt.attributes.getFloat("alpha",1)}),e.exp=(Tt,It)=>[Tt.run(Rt(Tt,It[0],ot()),It)],e.floor=(Tt,It)=>[Tt.run(Rt(Tt,It[0],lt()),It)],e.identity=(Tt,It)=>[Tt.run(Rt(Tt,It[0],ct()),It)],e.leakyRelu=(Tt,It,Vt)=>[Tt.run(Rt(Tt,It[0],dt(Vt.alpha),Vt.cacheKey),It)],e.parseLeakyReluAttributes=Tt=>(0,d.createAttributeWithCacheKey)({alpha:Tt.attributes.getFloat("alpha",.01)}),e.log=(Tt,It)=>[Tt.run(Rt(Tt,It[0],ht()),It)],e.neg=(Tt,It)=>[Tt.run(Rt(Tt,It[0],pt()),It)],e.not=(Tt,It)=>[Tt.run(Rt(Tt,It[0],ft()),It)],e.relu=(Tt,It)=>[Tt.run(Rt(Tt,It[0],xt()),It)],e.sigmoid=(Tt,It)=>[Tt.run(Rt(Tt,It[0],gt()),It)],e.sin=(Tt,It)=>[Tt.run(Rt(Tt,It[0],mt()),It)],e.sqrt=(Tt,It)=>[Tt.run(Rt(Tt,It[0],Et()),It)],e.tan=(Tt,It)=>[Tt.run(Rt(Tt,It[0],St()),It)],e.tanh=(Tt,It)=>[Tt.run(Rt(Tt,It[0],Pt()),It)]},5611:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const d=c(5060),h=c(2039),g=c(9390),b=c(2827),_e={name:"unpack",inputNames:["A"],inputTypes:[h.TextureType.packed]};e.createUnpackProgramInfo=(et,rt)=>{const st=rt.dims.length,$=(0,b.getChannels)("rc",st),_=$.slice(-2),nt=(0,g.getCoordsDataType)(st),it=(0,b.unpackFromChannel)(),ot=rt.dims.length===0?"":function(ct,dt){if(ct===1)return"rc";let ht="";for(let pt=0;pt<ct;pt++)ht+=dt[pt],pt<ct-1&&(ht+=",");return ht}(st,$),lt=st<=1?"rc":`vec2(${_.join(",")})`,at=`
    ${it}
    void main() {
      ${nt} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${ot});

       ${(0,d.getGlsl)(et.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${lt}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},_e),{hasMain:!0,output:{dims:rt.dims,type:rt.type,textureType:h.TextureType.unpacked},shaderSource:at})},e.createUnpackProgramInfoLoader=(et,rt)=>Object.assign(Object.assign({},_e),{get:()=>(0,e.createUnpackProgramInfo)(et,rt)})},8428:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const d=c(2517);e.unsqueeze=(b,_e,et)=>{h(_e);const rt=d.ShapeUtil.unsqueezeShape(_e[0].dims,et);return[b.reshapeUnpacked(_e[0],rt)]},e.unsqueezeV13=(b,_e)=>(g(_e),(0,e.unsqueeze)(b,[_e[0]],Array.from(_e[1].integerData))),e.parseUnsqueezeAttributes=b=>b.attributes.getInts("axes");const h=b=>{if(!b||b.length!==1)throw new Error("Unsqueeze requires 1 input.");if(b[0].type==="string")throw new Error("invalid input tensor types.")},g=b=>{if(!b||b.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(b[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const d=c(246),h=c(5060),g=c(2039),b={name:"Upsample",inputNames:["X"],inputTypes:[g.TextureType.unpacked]};e.upsample=(et,rt,st)=>((0,e.validateInputs)(rt,st),[et.run(Object.assign(Object.assign({},b),{cacheHint:st.cacheKey,get:()=>_e(et,rt,st)}),rt)]),e.parseUpsampleAttributesV7=et=>(0,e.parseUpsampleAttributes)(et,7),e.parseUpsampleAttributesV9=et=>(0,e.parseUpsampleAttributes)(et,9),e.parseUpsampleAttributes=(et,rt)=>{const st=rt>=10,$=et.attributes.getString("mode","nearest");if($!=="nearest"&&$!=="linear"&&(rt<11||$!=="cubic"))throw new Error(`unrecognized mode: ${$}`);let _=[];rt<9&&(_=et.attributes.getFloats("scales"),(0,e.scalesValidation)(_,$,st));const nt=et.attributes.getFloat("extrapolation_value",0),it=rt>10?et.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(it)===-1)throw new Error(`coordinate_transform_mode '${it}' is not supported`);const ot=it==="tf_crop_and_resize",lt=ot,at=$==="nearest"&&rt>=11?et.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(at)===-1)throw new Error(`nearest_mode '${at}' is not supported`);const ct=et.attributes.getFloat("cubic_coeff_a",-.75),dt=et.attributes.getInt("exclude_outside",0)!==0;if(dt&&$!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const ht=rt<11||$==="nearest"&&it==="asymmetric"&&at==="floor";let pt=0,ft=0,mt=0;return rt>10?et.inputs.length>2?(pt=1,ft=2,mt=3):(ft=1,mt=2):rt===9&&(ft=1),(0,d.createAttributeWithCacheKey)({opset:rt,isResize:st,mode:$,scales:_,extrapolationValue:nt,coordinateTransformMode:it,useExtrapolation:lt,needRoiInput:ot,nearestMode:at,cubicCoefficientA:ct,excludeOutside:dt,useNearest2xOptimization:ht,roiInputIdx:pt,scalesInputIdx:ft,sizesInputIdx:mt})};const _e=(et,rt,st)=>{const $=(0,h.getGlsl)(et.session.backend.glContext.version),[_,nt]=et.calculateTextureWidthAndHeight(rt[0].dims,g.TextureType.unpacked),it=rt[0].dims.map((mt,xt)=>Math.floor(mt*st.scales[xt])),[ot,lt]=et.calculateTextureWidthAndHeight(it,g.TextureType.unpacked),at=it.length,ct=new Array(at),dt=new Array(at);let ht=`
      int output_pitches[${at}];
      int input_pitches[${at}];
      `;for(let mt=at-1;mt>=0;mt--)ct[mt]=mt===at-1?1:ct[mt+1]*it[mt+1],dt[mt]=mt===at-1?1:dt[mt+1]*rt[0].dims[mt+1],ht+=`
        output_pitches[${mt}] = ${ct[mt]};
        input_pitches[${mt}] = ${dt[mt]};
        `;const pt=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${_}, ${nt});
        float value = getColorAsFloat(${$.texture2D}(X, coords));
        return value;
      }
      `,ft=st.mode==="nearest"?`
    ${pt}
    float process(int indices[${at}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${lt});

      ${ht}

      int d, m;
      for (int dim = 0; dim < ${at}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:at===4?`
    ${pt}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${lt});

      ${ht}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${rt[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${pt}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${ot}, ${lt});

      ${ht}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${rt[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},b),{output:{dims:it,type:rt[0].type,textureType:g.TextureType.unpacked},shaderSource:ft,variables:[{name:"scales",type:"int",arrayLength:st.scales.length,data:st.scales.map(mt=>Math.ceil(mt))}]})};e.validateInputs=(et,rt)=>{if(!et||rt.opset<9&&et.length!==1||rt.opset>=9&&rt.opset<11&&et.length!==2||rt.opset>=11&&et.length<2)throw new Error("invalid inputs.");if(rt.scales.length>0&&et[0].dims.length!==rt.scales.length)throw new Error("Invalid input shape.");if(et[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(et,rt,st)=>{if(st){for(const $ of et)if($<=0)throw new Error("Scale value should be greater than 0.")}else for(const $ of et)if($<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(rt!=="linear"&&rt!=="cubic"||et.length===2||et.length===4&&et[0]===1&&et[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${st?"Resize":"Upsample"} opeartor.`)}},1958:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const d=c(1670),h=c(6231),g=c(8879),b=c(5060);e.ProgramManager=class{constructor(_e,et,rt){this.profiler=_e,this.glContext=et,this.textureLayoutStrategy=rt,this.repo=new Map,this.attributesBound=!1}getArtifact(_e){return this.repo.get(_e)}setArtifact(_e,et){this.repo.set(_e,et)}run(_e,et,rt){var st;this.profiler.event("op",`ProgramManager.run ${(st=_e.programInfo.name)!==null&&st!==void 0?st:"unknown kernel"}`,()=>{var $;const _=this.glContext.gl,nt=_e.program;_.useProgram(nt);try{this.bindOutput(rt),this.attributesBound||this.bindAttributes(_e.attribLocations),this.bindUniforms(_e.uniformLocations,($=_e.programInfo.variables)!==null&&$!==void 0?$:[],et)}catch(it){throw h.Logger.error("ProgramManager",_e.programInfo.shaderSource),it}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(_e=>this.glContext.deleteProgram(_e.program))}build(_e,et,rt){return this.profiler.event("backend","ProgramManager.build",()=>{const st=new g.GlslPreprocessor(this.glContext,_e,et,rt),$=st.preprocess(),_=this.compile($);return{programInfo:_e,program:_,uniformLocations:this.getUniformLocations(_,st.context.programInfo.inputNames,st.context.programInfo.variables),attribLocations:this.getAttribLocations(_)}})}compile(_e){if(!this.vertexShader){h.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const st=(0,b.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(st,this.glContext.gl.VERTEX_SHADER)}d.env.debug&&h.Logger.verbose("ProrgramManager",`FragShader:
${_e}
`);const et=this.glContext.compileShader(_e,this.glContext.gl.FRAGMENT_SHADER),rt=this.glContext.createProgram(this.vertexShader,et);return this.glContext.deleteShader(et),rt}bindOutput(_e){const et=_e.width,rt=_e.height;h.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${et}/${rt}, shape=${_e.shape}, type=${_e.tensor.type}`),this.glContext.attachFramebuffer(_e.texture,et,rt)}bindAttributes(_e){const et=_e.position,rt=_e.textureCoord;this.glContext.setVertexAttributes(et,rt),this.attributesBound=!0}bindUniforms(_e,et,rt){var st;const $=this.glContext.gl;let _=0;for(const{name:nt,type:it,location:ot,arrayLength:lt}of _e){const at=(st=et.find(ct=>ct.name===nt))===null||st===void 0?void 0:st.data;if(it!=="sampler2D"&&!at)throw new Error(`variable '${nt}' does not have data defined in program info`);switch(it){case"sampler2D":this.bindTexture(rt[_],ot,_),_++;break;case"float":lt?$.uniform1fv(ot,at):$.uniform1f(ot,at);break;case"int":lt?$.uniform1iv(ot,at):$.uniform1i(ot,at);break;default:throw new Error(`Uniform not implemented: ${it}`)}}}bindTexture(_e,et,rt){this.glContext.bindTextureToUniform(_e.texture,rt,et)}getAttribLocations(_e){return{position:this.getAttribLocation(_e,"position"),textureCoord:this.getAttribLocation(_e,"textureCoord")}}getUniformLocations(_e,et,rt){const st=[];if(et)for(const $ of et)st.push({name:$,type:"sampler2D",location:this.getUniformLocation(_e,$)});if(rt)for(const $ of rt)st.push(Object.assign(Object.assign({},$),{location:this.getUniformLocation(_e,$.name)}));return st}getUniformLocation(_e,et){const rt=this.glContext.gl.getUniformLocation(_e,et);if(rt===null)throw new Error(`Uniform ${et} not found.`);return rt}getAttribLocation(_e,et){return this.glContext.gl.getAttribLocation(_e,et)}}},6416:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const d=c(6231),h=c(1047),g=c(8316),b=c(1640),_e=c(1958),et=c(7859),rt=c(5702);e.WebGLSessionHandler=class{constructor(st,$){this.backend=st,this.context=$,this.layoutStrategy=new et.PreferLogicalStrategy(st.glContext.maxTextureSize),this.programManager=new _e.ProgramManager(this.context.profiler,st.glContext,this.layoutStrategy),this.textureManager=new rt.TextureManager(st.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:st.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=st.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new g.WebGLInferenceHandler(this)}onGraphInitialized(st){const $=st.getValues().filter(_=>_.from===-1&&_.tensor).map(_=>_.tensor.dataId);this.initializers=new Set($)}isInitializer(st){return!!this.initializers&&this.initializers.has(st)}addInitializer(st){this.initializers.add(st)}getTextureData(st,$){return $?this.packedTextureDataCache.get(st):this.unpackedTextureDataCache.get(st)}setTextureData(st,$,_=!1){d.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),_?this.packedTextureDataCache.set(st,$):this.unpackedTextureDataCache.set(st,$)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(st=>this.textureManager.releaseTexture(st,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(st=>this.textureManager.releaseTexture(st,!0)),this.unpackedTextureDataCache=new Map}resolve(st,$,_){const nt=(0,h.resolveOperator)(st,$,b.WEBGL_OP_RESOLVE_RULES);return{impl:nt.opImpl,context:nt.opInit?nt.opInit(st,_):st}}}},7769:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const d=c(6231);e.RedFloat32DataEncoder=class{constructor(h,g=1){if(g===1)this.internalFormat=h.R32F,this.format=h.RED,this.textureType=h.FLOAT,this.channelSize=g;else{if(g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA32F,this.format=h.RGBA,this.textureType=h.FLOAT,this.channelSize=g}}encode(h,g){let b,_e;return h.constructor!==Float32Array&&(d.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),_e=new Float32Array(h)),g*this.channelSize>h.length?(d.Logger.warning("Encoder","Source data too small. Allocating larger array"),_e=h,b=this.allocate(g*this.channelSize),_e.forEach((et,rt)=>b[rt]=et)):(_e=h,b=_e),b}allocate(h){return new Float32Array(4*h)}decode(h,g){return this.channelSize===1?h.filter((b,_e)=>_e%4==0).subarray(0,g):h.subarray(0,g)}},e.RGBAFloatDataEncoder=class{constructor(h,g=1,b){if(g!==1&&g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA,this.format=h.RGBA,this.channelSize=g,this.textureType=b||h.FLOAT}encode(h,g){let b=h;return this.channelSize===1&&(d.Logger.verbose("Encoder","Exploding into a larger array"),b=this.allocate(g),h.forEach((_e,et)=>b[4*et]=_e)),b}allocate(h){return new Float32Array(4*h)}decode(h,g){return this.channelSize===1?h.filter((b,_e)=>_e%4==0).subarray(0,g):h.subarray(0,g)}},e.Uint8DataEncoder=class{constructor(h,g=1){if(this.channelSize=4,g===1)this.internalFormat=h.ALPHA,this.format=h.ALPHA,this.textureType=h.UNSIGNED_BYTE,this.channelSize=g;else{if(g!==4)throw new Error(`Invalid number of channels: ${g}`);this.internalFormat=h.RGBA,this.format=h.RGBA,this.textureType=h.UNSIGNED_BYTE,this.channelSize=g}}encode(h,g){return new Uint8Array(h.buffer,h.byteOffset,h.byteLength)}allocate(h){return new Uint8Array(h*this.channelSize)}decode(h,g){if(h instanceof Uint8Array)return h.subarray(0,g);throw new Error(`Invalid array type: ${h.constructor}`)}}},7859:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const d=c(6231),h=c(2517);function g(st,$){const _=[],nt=[],it=$!=null&&Array.isArray($)&&$.length===0,ot=$==null||it?null:b($,st).sort();let lt=0;for(let at=0;at<st.length;++at){if(ot!=null){if(ot[lt]===at&&st[at]!==1)throw new Error(`Can't squeeze axis ${at} since its dim '${st[at]}' is not 1`);(ot[lt]==null||ot[lt]>at)&&st[at]===1&&(_.push(st[at]),nt.push(at)),ot[lt]<=at&&lt++}st[at]!==1&&(_.push(st[at]),nt.push(at))}return{newShape:_,keptDims:nt}}function b(st,$){const _=$.length;return st=st==null?$.map((nt,it)=>it):[].concat(st),(0,h.assert)(st.every(nt=>nt>=-_&&nt<_),()=>`All values in axis param must be in range [-${_}, ${_}) but got axis ${st}`),(0,h.assert)(st.every(_e),()=>`All values in axis param must be integers but got axis ${st}`),st.map(nt=>nt<0?_+nt:nt)}function _e(st){return st%1==0}function et(st){if(st.length===0)return 1;let $=st[0];for(let _=1;_<st.length;_++)$*=st[_];return $}function rt(st){const $=Math.ceil(Math.sqrt(st));return[$,Math.ceil(st/$)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(st){this.maxTextureSize=st}computeTextureWH(st,$){if(st.length===0)return[1,1];const _=this.maxTextureSize;if($&&$.breakAxis!==void 0){const ot=$.breakAxis>=st.length?1:st.slice($.breakAxis).reduce((at,ct)=>at*ct),lt=$.breakAxis<=0?1:st.slice(0,$.breakAxis).reduce((at,ct)=>at*ct);if(!(ot>_||lt>_))return[ot,lt];d.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${st}, breakAxis:${$.breakAxis}`)}const nt=st.reduce((ot,lt)=>ot*lt);let it=Math.floor(Math.sqrt(nt));for(;it<_&&it<nt&&nt%it!=0;it++);if(it>=_||nt%it!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${st}`);return[it,nt/it]}},e.PreferLogicalStrategy=class{constructor(st){this.maxTextureSize=st}computeTextureWH(st,$){const _=this.computeTexture(st,$);return $&&$.isPacked&&(_[0]/=2,_[1]/=2),$&&$.reverseWH?[_[1],_[0]]:_}computeTexture(st,$){const _=$&&$.isPacked;if(st.length===0)return _?[2,2]:[1,1];let nt=this.maxTextureSize;if($&&$.breakAxis!==void 0){const lt=$.breakAxis>=st.length?1:st.slice($.breakAxis).reduce((ct,dt)=>ct*dt),at=$.breakAxis<=0?1:st.slice(0,$.breakAxis).reduce((ct,dt)=>ct*dt);if(!(lt>nt||at>nt))return[lt,at];d.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${st}, breakAxis:${$.breakAxis}`)}let it=st.slice(0);_&&(nt*=2,it=it.map((lt,at)=>at>=it.length-2?it[at]%2==0?it[at]:it[at]+1:it[at]),it.length===1&&(it=[2,it[0]])),it.length!==2&&(it=g(it).newShape);const ot=et(it);return it.length<=1&&ot<=nt?[1,ot]:it.length===2&&it[0]<=nt&&it[1]<=nt?it:it.length===3&&it[0]*it[1]<=nt&&it[2]<=nt?[it[0]*it[1],it[2]]:it.length===3&&it[0]<=nt&&it[1]*it[2]<=nt?[it[0],it[1]*it[2]]:it.length===4&&it[0]*it[1]*it[2]<=nt&&it[3]<=nt?[it[0]*it[1]*it[2],it[3]]:it.length===4&&it[0]<=nt&&it[1]*it[2]*it[3]<=nt?[it[0],it[1]*it[2]*it[3]]:_?rt(ot/4).map(lt=>2*lt):rt(ot)}},e.squeezeShape=g,e.parseAxisParam=b,e.isInt=_e,e.sizeFromShape=et,e.getRowsCols=function(st){if(st.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[st.length>1?st[st.length-2]:1,st[st.length-1]]},e.sizeToSquarishShape=rt,e.getBatchDim=function(st,$=2){return et(st.slice(0,st.length-$))}},4057:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const d=c(2517),h=c(2039);e.createTextureLayoutFromTextureType=(g,b,_e)=>{const et=_e===h.TextureType.unpacked||_e===h.TextureType.unpackedReversed?1:4,rt=_e===h.TextureType.packed,st=_e===h.TextureType.unpackedReversed||_e===h.TextureType.packed,$=_e===h.TextureType.packedLastDimension?b.length-1:void 0,_=_e===h.TextureType.packedLastDimension?b.map((nt,it)=>it===b.length-1?4*nt:nt):void 0;return(0,e.createTextureLayoutFromShape)(g,b,et,_,{isPacked:rt,reverseWH:st,breakAxis:$})},e.calculateTextureWidthAndHeight=(g,b,_e)=>{const et=(0,e.createTextureLayoutFromTextureType)(g,b,_e);return[et.width,et.height]},e.createTextureLayoutFromShape=(g,b,_e=1,et,rt)=>{const st=!(!rt||!rt.isPacked),[$,_]=g.computeTextureWH(st&&et||b,rt),nt=b.length;let it=b.slice(0);if(nt===0&&(it=[1]),_e===1)et=b;else if(st){if(_e!==4)throw new Error("a packed texture must be 4-channel");et=b,nt>0&&(it[nt-1]=Math.ceil(it[nt-1]/2)),nt>1&&(it[nt-2]=Math.ceil(it[nt-2]/2))}else if(!et)throw new Error("Unpacked shape is needed when using channels > 1");return{width:$,height:_,channels:_e,isPacked:st,shape:it,strides:d.ShapeUtil.computeStrides(it),unpackedShape:et,reversedWH:rt&&rt.reverseWH}}},5702:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const d=c(6231);e.TextureManager=class{constructor(h,g,b,_e){this.glContext=h,this.layoutStrategy=g,this.profiler=b,this.config=_e,this.pendingRead=new Map,_e.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(h,g,b,_e){const et=this.toEncoderType(h),rt=this.glContext.getEncoder(et,g.channels||1,_e);if(g.isPacked&&_e===1)throw new Error("not implemented");const st=g.width,$=g.height;let _,nt;if(this.config.reuseTextures){_=`${st}x${$}_${rt.format}_${rt.internalFormat}_${rt.textureType}`,nt=this.inUseTextures.get(_),nt||(nt=[],this.inUseTextures.set(_,nt));const ot=this.idleTextures.get(_);if(ot&&ot.length>0){const lt=ot.pop();return nt.push(lt),_e===1&&this.glContext.updateTexture(lt,st,$,rt,this.toTextureData(h,b)),lt}}d.Logger.verbose("TextureManager",`Creating new texture of size ${g.width}x${g.height}`);const it=this.glContext.allocateTexture(st,$,rt,this.toTextureData(h,b));return this.config.reuseTextures&&(nt.push(it),this.textureLookup.set(it,_)),it}readTexture(h,g,b){return b||(b=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const _e=h.shape.reduce((rt,st)=>rt*st)*b,et=this.glContext.readTexture(h.texture,h.width,h.height,_e,this.toEncoderType(g),b);return this.toTensorData(g,et)})}async readTextureAsync(h,g,b){const _e=h.tensor.dataId;if(b||(b=1),this.pendingRead.has(_e)){const et=this.pendingRead.get(_e);return new Promise(rt=>et==null?void 0:et.push(rt))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(_e,[]);const et=h.shape.reduce((_,nt)=>_*nt)*b;await this.glContext.createAndWaitForFence();const rt=this.glContext.readTexture(h.texture,h.width,h.height,et,this.toEncoderType(g),b),st=this.toTensorData(g,rt),$=this.pendingRead.get(_e);return this.pendingRead.delete(_e),$==null||$.forEach(_=>_(st)),st})}readUint8TextureAsFloat(h){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const g=h.shape.reduce((_e,et)=>_e*et),b=this.glContext.readTexture(h.texture,h.width,h.height,4*g,"byte",4);return new Float32Array(b.buffer,b.byteOffset,g)})}releaseTexture(h,g){let b;if(this.config.reuseTextures&&(b=this.textureLookup.get(h.texture),b)){g&&this.textureLookup.delete(b);const _e=this.inUseTextures.get(b);if(_e){const et=_e.indexOf(h.texture);if(et!==-1){_e.splice(et,1);let rt=this.idleTextures.get(b);rt||(rt=[],this.idleTextures.set(b,rt)),rt.push(h.texture)}}}b&&!g||(d.Logger.verbose("TextureManager",`Deleting texture of size ${h.width}x${h.height}`),this.glContext.deleteTexture(h.texture))}toTensorData(h,g){switch(h){case"int16":return g instanceof Int16Array?g:Int16Array.from(g);case"int32":return g instanceof Int32Array?g:Int32Array.from(g);case"int8":return g instanceof Int8Array?g:Int8Array.from(g);case"uint16":return g instanceof Uint16Array?g:Uint16Array.from(g);case"uint32":return g instanceof Uint32Array?g:Uint32Array.from(g);case"uint8":case"bool":return g instanceof Uint8Array?g:Uint8Array.from(g);case"float32":return g instanceof Float32Array?g:Float32Array.from(g);case"float64":return g instanceof Float64Array?g:Float64Array.from(g);default:throw new Error(`TensorData type ${h} is not supported`)}}toTextureData(h,g){if(g)return g instanceof Float32Array?g:new Float32Array(g)}toEncoderType(h){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(a,e)=>{var c;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(c=e.TextureType||(e.TextureType={}))[c.unpacked=0]="unpacked",c[c.unpackedReversed=1]="unpackedReversed",c[c.packed=2]="packed",c[c.downloadUint8AsFloat=3]="downloadUint8AsFloat",c[c.packedLastDimension=4]="packedLastDimension"},9390:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const d=c(2517);e.getPackedShape=function(h){const g=h.length;return h.slice(0,g-1).concat(h[g-1]/4)},e.repeatedTry=async function(h,g=_e=>0,b){return new Promise((_e,et)=>{let rt=0;const st=()=>{if(h())return void _e();rt++;const $=g(rt);b!=null&&rt>=b?et():setTimeout(st,$)};st()})},e.generateShaderFuncNameFromInputSamplerName=function(h){return(0,d.assert)(h!==void 0&&h.length!==0,()=>"empty string found for sampler name"),"get"+h.charAt(0).toUpperCase()+h.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(h){return(0,d.assert)(h!==void 0&&h.length!==0,()=>"empty string found for sampler name"),"get"+h.charAt(0).toUpperCase()+h.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(h,g){let b=JSON.parse(JSON.stringify(h));return b=g,b},e.getSqueezedParams=function(h,g){return g.map(b=>h[b]).join(", ")},e.getCoordsDataType=function(h){if(h<=1)return"int";if(h===2)return"ivec2";if(h===3)return"ivec3";if(h===4)return"ivec4";if(h===5)return"ivec5";if(h===6)return"ivec6";throw Error(`GPU for rank ${h} is not yet supported`)},e.getGlChannels=function(h=6){return["x","y","z","w","u","v"].slice(0,h)}},7305:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const d=c(6231),h=c(1713),g={};function b(_e){const et=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const $=document.createElement("canvas");return $.width=1,$.height=1,$}();let rt;const st={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!_e||_e==="webgl2")&&(rt=et.getContext("webgl2",st),rt))try{return new h.WebGLContext(rt,2)}catch($){d.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${$}`)}if((!_e||_e==="webgl")&&(rt=et.getContext("webgl",st)||et.getContext("experimental-webgl",st),rt))try{return new h.WebGLContext(rt,1)}catch($){d.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${$}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function _e(et){let rt;et&&et!=="webgl2"||!("webgl2"in g)?et&&et!=="webgl"||!("webgl"in g)||(rt=g.webgl):rt=g.webgl2,rt=rt||b(et),et=et||rt.version===1?"webgl":"webgl2";const st=rt.gl;return g[et]=rt,st.isContextLost()?(delete g[et],_e(et)):(st.disable(st.DEPTH_TEST),st.disable(st.STENCIL_TEST),st.disable(st.BLEND),st.disable(st.DITHER),st.disable(st.POLYGON_OFFSET_FILL),st.disable(st.SAMPLE_COVERAGE),st.enable(st.SCISSOR_TEST),st.enable(st.CULL_FACE),st.cullFace(st.BACK),rt)},e.createNewWebGLContext=b},1713:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(st,$,_,nt){nt===void 0&&(nt=_);var it=Object.getOwnPropertyDescriptor($,_);it&&!("get"in it?!$.__esModule:it.writable||it.configurable)||(it={enumerable:!0,get:function(){return $[_]}}),Object.defineProperty(st,nt,it)}:function(st,$,_,nt){nt===void 0&&(nt=_),st[nt]=$[_]}),h=this&&this.__setModuleDefault||(Object.create?function(st,$){Object.defineProperty(st,"default",{enumerable:!0,value:$})}:function(st,$){st.default=$}),g=this&&this.__importStar||function(st){if(st&&st.__esModule)return st;var $={};if(st!=null)for(var _ in st)_!=="default"&&Object.prototype.hasOwnProperty.call(st,_)&&d($,st,_);return h($,st),$};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const b=c(1670),_e=g(c(7769)),et=c(9390);function rt(st){let $=0;for(;$<st.length&&st[$]();++$);return $-1}e.linearSearchLastTrue=rt,e.WebGLContext=class{constructor(st,$){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=st,this.version=$,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(st,$,_,nt){const it=this.gl,ot=it.createTexture();it.bindTexture(it.TEXTURE_2D,ot),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MIN_FILTER,it.NEAREST),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_MAG_FILTER,it.NEAREST),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_S,it.CLAMP_TO_EDGE),it.texParameteri(it.TEXTURE_2D,it.TEXTURE_WRAP_T,it.CLAMP_TO_EDGE);const lt=nt?_.encode(nt,st*$):null;return it.texImage2D(it.TEXTURE_2D,0,_.internalFormat,st,$,0,_.format,_.textureType,lt),this.checkError(),ot}updateTexture(st,$,_,nt,it){const ot=this.gl;ot.bindTexture(ot.TEXTURE_2D,st);const lt=nt.encode(it,$*_);ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,$,_,nt.format,nt.textureType,lt),this.checkError()}attachFramebuffer(st,$,_){const nt=this.gl;nt.bindTexture(nt.TEXTURE_2D,st),nt.bindFramebuffer(nt.FRAMEBUFFER,this.framebuffer),nt.framebufferTexture2D(nt.FRAMEBUFFER,nt.COLOR_ATTACHMENT0,nt.TEXTURE_2D,st,0),this.checkError(),nt.viewport(0,0,$,_),nt.scissor(0,0,$,_)}readTexture(st,$,_,nt,it,ot){const lt=this.gl;ot||(ot=1),this.frameBufferBound||this.attachFramebuffer(st,$,_);const at=this.getEncoder(it,ot),ct=at.allocate($*_);return lt.bindTexture(lt.TEXTURE_2D,st),lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,st,0),lt.readPixels(0,0,$,_,lt.RGBA,at.textureType,ct),this.checkError(),at.decode(ct,nt)}isFramebufferReady(){return!0}getActiveTexture(){const st=this.gl;return"TEXTURE"+(st.getParameter(this.gl.ACTIVE_TEXTURE)-st.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(st,$){const _=this.gl;_.vertexAttribPointer(st,3,_.FLOAT,!1,20,0),_.enableVertexAttribArray(st),$!==-1&&(_.vertexAttribPointer($,2,_.FLOAT,!1,20,12),_.enableVertexAttribArray($)),this.checkError()}createProgram(st,$){const _=this.gl,nt=_.createProgram();return _.attachShader(nt,st),_.attachShader(nt,$),_.linkProgram(nt),nt}compileShader(st,$){const _=this.gl,nt=_.createShader($);if(!nt)throw new Error(`createShader() returned null with type ${$}`);if(_.shaderSource(nt,st),_.compileShader(nt),_.getShaderParameter(nt,_.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${_.getShaderInfoLog(nt)}
Shader source:
${st}`);return nt}deleteShader(st){this.gl.deleteShader(st)}bindTextureToUniform(st,$,_){const nt=this.gl;nt.activeTexture(nt.TEXTURE0+$),this.checkError(),nt.bindTexture(nt.TEXTURE_2D,st),this.checkError(),nt.uniform1i(_,$),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(b.env.debug){const st=this.gl,$=st.getError();let _="";switch($){case st.NO_ERROR:return;case st.INVALID_ENUM:_="INVALID_ENUM";break;case st.INVALID_VALUE:_="INVALID_VALUE";break;case st.INVALID_OPERATION:_="INVALID_OPERATION";break;case st.INVALID_FRAMEBUFFER_OPERATION:_="INVALID_FRAMEBUFFER_OPERATION";break;case st.OUT_OF_MEMORY:_="OUT_OF_MEMORY";break;case st.CONTEXT_LOST_WEBGL:_="CONTEXT_LOST_WEBGL";break;default:_=`Unknown WebGL Error: ${$.toString(16)}`}throw new Error(_)}}deleteTexture(st){this.gl.deleteTexture(st)}deleteProgram(st){this.gl.deleteProgram(st)}getEncoder(st,$,_=0){if(this.version===2)return new _e.RedFloat32DataEncoder(this.gl,$);switch(st){case"float":return _===1||this.isRenderFloat32Supported?new _e.RGBAFloatDataEncoder(this.gl,$):new _e.RGBAFloatDataEncoder(this.gl,$,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new _e.Uint8DataEncoder(this.gl,$);default:throw new Error(`Invalid dataType: ${st}`)}}clearActiveTextures(){const st=this.gl;for(let $=0;$<this.maxTextureImageUnits;++$)st.activeTexture(st.TEXTURE0+$),st.bindTexture(st.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const st=this.gl;st.bindFramebuffer(st.FRAMEBUFFER,null),st.deleteFramebuffer(this.framebuffer),st.bindBuffer(st.ARRAY_BUFFER,null),st.deleteBuffer(this.vertexbuffer),st.bindBuffer(st.ELEMENT_ARRAY_BUFFER,null),st.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const st=this.gl,$=st.createBuffer();if(!$)throw new Error("createBuffer() returned null");const _=this.createDefaultGeometry();return st.bindBuffer(st.ARRAY_BUFFER,$),st.bufferData(st.ARRAY_BUFFER,_,st.STATIC_DRAW),this.checkError(),$}createFramebuffer(){const st=this.gl.createFramebuffer();if(!st)throw new Error("createFramebuffer returned null");return st}queryVitalParameters(){const st=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=st.getParameter(st.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=st.getParameter(st.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const st=this.gl,$=st.createTexture();st.bindTexture(st.TEXTURE_2D,$);const _=this.version===2?st.RGBA32F:st.RGBA;st.texImage2D(st.TEXTURE_2D,0,_,1,1,0,st.RGBA,st.FLOAT,null);const nt=st.createFramebuffer();st.bindFramebuffer(st.FRAMEBUFFER,nt),st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,$,0);const it=st.checkFramebufferStatus(st.FRAMEBUFFER)===st.FRAMEBUFFER_COMPLETE;return st.bindTexture(st.TEXTURE_2D,null),st.bindFramebuffer(st.FRAMEBUFFER,null),st.deleteTexture($),st.deleteFramebuffer(nt),it}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const st=this.gl;let $,_,nt,it,ot;try{$=st.createTexture(),_=st.createFramebuffer(),st.bindTexture(st.TEXTURE_2D,$);const lt=this.version===2?st.RGBA32F:st.RGBA;return st.texImage2D(st.TEXTURE_2D,0,lt,1,1,0,st.RGBA,st.FLOAT,null),st.bindFramebuffer(st.FRAMEBUFFER,_),st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,$,0),st.enable(st.BLEND),nt=st.createShader(st.VERTEX_SHADER),!!nt&&(st.shaderSource(nt,"void main(){}"),st.compileShader(nt),it=st.createShader(st.FRAGMENT_SHADER),!!it&&(st.shaderSource(it,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),st.compileShader(it),ot=st.createProgram(),!!ot&&(st.attachShader(ot,nt),st.attachShader(ot,it),st.linkProgram(ot),st.useProgram(ot),st.drawArrays(st.POINTS,0,1),st.getError()===st.NO_ERROR)))}finally{st.disable(st.BLEND),ot&&st.deleteProgram(ot),nt&&st.deleteShader(nt),it&&st.deleteShader(it),_&&(st.bindFramebuffer(st.FRAMEBUFFER,null),st.deleteFramebuffer(_)),$&&(st.bindTexture(st.TEXTURE_2D,null),st.deleteTexture($))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const st=this.gl,$=this.disjointTimerQueryWebgl2Extension,_=st.createQuery();return st.beginQuery($.TIME_ELAPSED_EXT,_),_}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const st=this.gl,$=this.disjointTimerQueryWebgl2Extension;st.endQuery($.TIME_ELAPSED_EXT)}}isTimerResultAvailable(st){let $=!1,_=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const nt=this.gl,it=this.disjointTimerQueryWebgl2Extension;$=nt.getQueryParameter(st,nt.QUERY_RESULT_AVAILABLE),_=nt.getParameter(it.GPU_DISJOINT_EXT)}return $&&!_}getTimerResult(st){let $=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const _=this.gl;$=_.getQueryParameter(st,_.QUERY_RESULT),_.deleteQuery(st)}return $/1e6}async waitForQueryAndGetTime(st){return await(0,et.repeatedTry)(()=>this.isTimerResultAvailable(st)),this.getTimerResult(st)}async createAndWaitForFence(){const st=this.createFence(this.gl);return this.pollFence(st)}createFence(st){let $;const _=st,nt=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);return st.flush(),$=nt===null?()=>!0:()=>{const it=_.clientWaitSync(nt,0,0);return it===_.ALREADY_SIGNALED||it===_.CONDITION_SATISFIED},{query:nt,isFencePassed:$}}async pollFence(st){return new Promise($=>{this.addItemToPoll(()=>st.isFencePassed(),()=>$())})}pollItems(){const st=rt(this.itemsToPoll.map($=>$.isDoneFn));for(let $=0;$<=st;++$){const{resolveFn:_}=this.itemsToPoll[$];_()}this.itemsToPoll=this.itemsToPoll.slice(st+1)}async addItemToPoll(st,$){this.itemsToPoll.push({isDoneFn:st,resolveFn:$}),this.itemsToPoll.length>1||await(0,et.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const d=c(6231);class h{constructor(b,_e){this.op=b,this.node=_e}}e.ExecutionPlan=class{constructor(g,b,_e){this.graph=g,this.profiler=_e,this.initialize(b)}initialize(g){this.profiler.event("session","ExecutionPlan.initialize",()=>{const b=this.graph.getNodes();if(b.length!==g.length)throw new Error("The size of nodes and OPs do not match.");this._ops=g.map((_e,et)=>new h(_e,b[et])),this.reset(),this._starter=[],this._ops.forEach((_e,et)=>{let rt=!0;for(const st of _e.node.inputs)if(!this._values[st]&&this.graph.getInputIndices().indexOf(st)===-1){rt=!1;break}rt&&this._starter.push(et)})})}reset(){this._values=this.graph.getValues().map(g=>g.tensor)}async execute(g,b){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const _e=g.createInferenceHandler(),et=this.graph.getInputIndices();if(b.length!==et.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${b.length} expected: ${et.length}`);b.forEach((it,ot)=>{const lt=et[ot];this._values[lt]=it});const rt=this._starter.slice(0),st=this.graph.getValues(),$=this.graph.getNodes();let _=0;for(;_<rt.length;){const it=rt[_++],ot=this._ops[it],lt=ot.node.inputs.map(ht=>this._values[ht]);if(lt.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${ot.node}`);const at=lt;d.Logger.verbose("ExecPlan",`Runing op:${ot.node.name} (${at.map((ht,pt)=>`'${ot.node.inputs[pt]}': ${ht.type}[${ht.dims.join(",")}]`).join(", ")})`);const ct=await this.profiler.event("node",ot.node.name,async()=>ot.op.impl(_e,at,ot.op.context));if(ct.length!==ot.node.outputs.length)throw new Error("the size of output does not match model definition.");ct.forEach((ht,pt)=>{const ft=ot.node.outputs[pt];if(this._values[ft])throw new Error(`output [${ft}] already has value: op:${ot.node.name}`);this._values[ft]=ht});const dt=new Set;ct.forEach((ht,pt)=>{const ft=ot.node.outputs[pt];for(const mt of st[ft].to){const xt=$[mt];let gt=!0;for(const Et of xt.inputs)if(!this._values[Et]){gt=!1;break}gt&&dt.add(mt)}}),rt.push(...dt)}const nt=[];for(let it=0;it<this.graph.getOutputIndices().length;it++){const ot=this.graph.getOutputIndices()[it],lt=this._values[ot];if(lt===void 0)throw new Error(`required output [${ot}] does not have value`);ot===0?await lt.getData():lt.data,nt.push(lt)}return d.Logger.verbose("ExecPlan","disposing of inferenceHandler"),_e.dispose(),nt})}}},7070:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const d=c(1446),h=c(7778),g=c(9395),b=c(9162),_e=c(2517);var et=g.onnxruntime.experimental.fbs;e.Graph={from:(_,nt)=>new $(_,nt)};class rt{constructor(nt){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,nt&&(this.type=_e.ProtoUtil.tensorValueTypeFromProto(nt.type.tensorType))}get from(){return this._from}get to(){return this._to}}class st{constructor(nt,it){nt instanceof d.onnx.NodeProto?(this.name=nt.name,this.opType=nt.opType,this.attributes=new h.Attribute(nt.attribute)):nt instanceof et.Node&&(this.name=it??nt.name(),this.opType=nt.opType(),this.attributes=new h.Attribute(_e.ProtoUtil.tensorAttributesFromORTFormat(nt))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class ${constructor(nt,it){if(!nt)throw new TypeError("graph is empty");this.buildGraph(nt),this.transformGraph(it),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(nt){if(nt instanceof d.onnx.GraphProto)this.buildGraphFromOnnxFormat(nt);else{if(!(nt instanceof et.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(nt)}}buildGraphFromOnnxFormat(nt){const it=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ot=new Map;if(!nt.input)throw new Error("missing information in graph: input");const lt=[];for(const at of nt.input){if(it.has(at.name))throw new Error(`duplicated input name: ${at.name}`);const ct=this._allData.push(new rt(at))-1;it.set(at.name,ct),lt.push(at.name)}if(!nt.initializer)throw new Error("missing information in graph: initializer");for(const at of nt.initializer){let ct=it.get(at.name);if(ct===void 0){const dt=new rt;dt.type={shape:{dims:_e.ProtoUtil.tensorDimsFromProto(at.dims)},tensorType:_e.ProtoUtil.tensorDataTypeFromProto(at.dataType)},ct=this._allData.push(dt)-1,it.set(at.name,ct)}this._allData[ct]._from=-1,this._allData[ct].tensor=b.Tensor.fromProto(at)}for(let at=0;at<this._allData.length;at++)this._allData[at].tensor||(this._allInputIndices.push(at),this._allInputNames.push(lt[at]));if(!nt.output)throw new Error("missing information in graph: output");for(const at of nt.output){if(it.has(at.name))throw new Error(`duplicated output name: ${at.name}`);const ct=this._allData.push(new rt(at))-1;it.set(at.name,ct),this._allOutputIndices.push(ct),this._allOutputNames.push(at.name)}if(!nt.node)throw new Error("missing information in graph: node");for(const at of nt.node){if(!at.name)for(let dt=0;;dt++){const ht=`unnamed_${at.opType}_${dt}`;if(!ot.has(ht)){at.name=ht;break}}if(ot.has(at.name))throw new Error(`duplicated node name: ${at.name}`);const ct=this._nodes.push(new st(at))-1;ot.set(at.name,ct)}for(let at=0;at<this._nodes.length;at++){const ct=this._nodes[at],dt=nt.node[at];if(!dt.output)throw new Error(`missing output for node: ${dt.name}`);for(const ht of dt.output){let pt=it.get(ht);if(pt===void 0&&(pt=this._allData.push(new rt)-1,it.set(ht,pt)),ct.outputs.push(pt),this._allData[pt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${pt}`);if(this._allData[pt]._from=at,dt.opType==="Constant"){if(!dt.attribute||dt.attribute.length!==1||!dt.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!dt.output||dt.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");ct.outputs.pop(),ct.executeNode=!1,this._allData[pt]._from=-1,this._allData[pt].tensor=b.Tensor.fromProto(dt.attribute[0].t)}}}for(let at=0;at<this._nodes.length;at++){const ct=this._nodes[at],dt=nt.node[at];if(!dt.input)throw new Error(`missing input for node: ${dt.name}`);for(const ht of dt.input){const pt=it.get(ht);if(pt===void 0){if(ht===""&&dt.input.length===3&&dt.opType==="Resize")continue;throw new Error(`unrecognized input '${ht}' for node: ${dt.name}`)}ct.inputs.push(pt),this._allData[pt]._to.push(at)}}return!0}buildGraphFromOrtFormat(nt){var it,ot,lt;const at=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const ct=new Map,dt=[];for(let ht=0;ht<nt.inputsLength();ht++){const pt=nt.inputs(ht);if(at.has(pt))throw new Error(`duplicated input name: ${pt}`);for(let ft=0;ft<nt.nodeArgsLength();ft++)if(((it=nt.nodeArgs(ft))===null||it===void 0?void 0:it.name())===pt){const mt=new rt;if(((lt=(ot=nt.nodeArgs(ft))===null||ot===void 0?void 0:ot.type())===null||lt===void 0?void 0:lt.valueType())!==et.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const xt=nt.nodeArgs(ft).type().value(new et.TensorTypeAndShape),gt=_e.ProtoUtil.tensorDataTypeFromProto(xt.elemType()),Et=xt.shape(),St=[];for(let Mt=0;Mt<Et.dimLength();Mt++)St.push(_e.LongUtil.longToNumber(Et.dim(Mt).value().dimValue()));mt.type={shape:{dims:St},tensorType:gt};const Pt=this._allData.push(mt)-1;at.set(pt,Pt),dt.push(pt)}}for(let ht=0;ht<nt.initializersLength();ht++){const pt=nt.initializers(ht);let ft=at.get(pt.name());if(ft===void 0){const mt=new rt,xt=_e.ProtoUtil.tensorDimsFromORTFormat(pt),gt=_e.ProtoUtil.tensorDataTypeFromProto(pt.dataType());mt.type={shape:{dims:xt},tensorType:gt},ft=this._allData.push(mt)-1,at.set(pt.name(),ft)}this._allData[ft]._from=-1,this._allData[ft].tensor=b.Tensor.fromOrtTensor(pt)}for(let ht=0;ht<this._allData.length;ht++)this._allData[ht].tensor||(this._allInputIndices.push(ht),this._allInputNames.push(dt[ht]));for(let ht=0;ht<nt.outputsLength();ht++){const pt=nt.outputs(ht);if(at.has(pt))throw new Error(`duplicated output name: ${pt}`);const ft=this._allData.push(new rt)-1;at.set(pt,ft),this._allOutputIndices.push(ft),this._allOutputNames.push(pt)}if(!nt.nodes)throw new Error("missing information in graph: node");for(let ht=0;ht<nt.nodesLength();ht++){const pt=nt.nodes(ht);let ft=pt.name();if(!ft)for(let xt=0;ft=`unnamed_${pt.opType()}_${xt}`,ct.has(ft);xt++);if(ct.has(ft))throw new Error(`duplicated node name: ${ft}`);const mt=this._nodes.push(new st(pt,ft))-1;ct.set(ft,mt)}for(let ht=0;ht<this._nodes.length;ht++){const pt=this._nodes[ht],ft=nt.nodes(ht);if(ft==null)throw new Error(`No node exists at index ${ht}`);if((ft==null?void 0:ft.outputsLength())===0)throw new Error(`missing output for node: ${ft.name}`);for(let mt=0;mt<(ft==null?void 0:ft.outputsLength());mt++){const xt=ft==null?void 0:ft.outputs(mt);let gt=at.get(xt);if(gt===void 0&&(gt=this._allData.push(new rt)-1,at.set(xt,gt)),pt.outputs.push(gt),this._allData[gt]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${gt}`);if(this._allData[gt]._from=ht,ft.opType()==="Constant"){if(ft.attributesLength()!==1||!ft.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(ft.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");pt.outputs.pop(),pt.executeNode=!1,this._allData[gt]._from=-1,this._allData[gt].tensor=b.Tensor.fromOrtTensor(ft.attributes(0).t())}}}for(let ht=0;ht<this._nodes.length;ht++){const pt=this._nodes[ht],ft=nt.nodes(ht);if(ft.inputsLength()===0)throw new Error(`missing input for node: ${ft.name}`);for(let mt=0;mt<ft.inputsLength();mt++){const xt=ft.inputs(mt),gt=at.get(xt);if(gt===void 0)throw new Error(`unrecognized input '${xt}' for node: ${ft.name()}`);pt.inputs.push(gt),this._allData[gt]._to.push(ht)}}}checkIsAcyclic(){const nt=new Set;this._allInputIndices.forEach(lt=>{this._allData[lt]._to.forEach(at=>{nt.add(at)})});const it=Array.from(nt),ot=new Array(this._nodes.length).fill("white");for(;it.length>0;){const lt=it.pop();ot[lt]==="gray"?ot[lt]="black":(it.push(lt),ot[lt]="gray",this._nodes[lt].outputs.forEach(at=>{const ct=this._allData[at];if(ct.tensor!==void 0)throw new Error("node outputs should not be initialized");if(ct._from!==lt)throw new Error("from property of the Value object doesn't match index of Node being processed");ct._to.forEach(dt=>{if(ot[dt]==="gray")throw new Error("model graph is cyclic");ot[dt]==="white"&&it.push(dt)})}))}}transformGraph(nt){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),nt&&nt.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let nt=0;for(let it=0;it<this._nodes.length;it++)this._nodes[it].executeNode?nt>0&&(this._nodes[it].inputs.forEach(ot=>{const lt=this._allData[ot]._to.indexOf(it+nt);lt!==-1&&(this._allData[ot]._to[lt]=it)}),this._nodes[it].outputs.forEach(ot=>{this._allData[ot]._from&&this._allData[ot]._from===it+nt&&(this._allData[ot]._from=it)})):(nt++,this._nodes[it].outputs.forEach(ot=>{this._allData[ot]._from=-2}),this._nodes.splice(it,1),it--);nt=0;for(let it=0;it<this._allData.length;it++)if(this._allData[it].from!==-2||this._allOutputIndices.indexOf(it+nt)!==-1){if(nt>0){let ot=-1;this._allData[it].from!==void 0&&this._allData[it].from!==-1?(ot=this._nodes[this._allData[it].from].outputs.indexOf(it+nt),ot!==-1&&(this._nodes[this._allData[it].from].outputs[ot]=it)):(ot=this._allInputIndices.indexOf(it+nt),ot!==-1&&(this._allInputIndices[ot]=it)),this._allData[it].to.forEach(lt=>{ot=this._nodes[lt].inputs.indexOf(it+nt),ot!==-1&&(this._nodes[lt].inputs[ot]=it)}),this._allData[it].to.length===0&&(ot=this._allOutputIndices.indexOf(it+nt),ot!==-1&&(this._allOutputIndices[ot]=it))}}else nt++,this._allData.splice(it,1),it--}deleteNode(nt){const it=this._nodes[nt];if(it.outputs.length>1){for(let ht=1;ht<it.outputs.length;ht++)if(this._allData[it.outputs[ht]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}it.executeNode=!1;const ot=it.inputs[0],lt=it.outputs[0],at=this._allData[lt].to,ct=this._allData[ot].to.indexOf(nt);if(ct===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[ot].to.splice(ct,1),this._allData[lt]._to=[];const dt=this._allOutputIndices.indexOf(lt);if(dt!==-1&&(this._allOutputIndices[dt]=ot),at&&at.length>0)for(const ht of at){const pt=this._nodes[ht].inputs.indexOf(lt);if(pt===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[ht].inputs[pt]=ot,this._allData[ot].to.push(ht)}}removeAllDropoutNodes(){let nt=0;for(const it of this._nodes){if(it.opType==="Dropout"){if(it.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(it.outputs.length!==1&&it.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(it.outputs.length===2&&this._allData[it.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(nt)}nt++}}removeAllIdentityNodes(){let nt=0;for(const it of this._nodes)it.opType==="Identity"&&this.deleteNode(nt),nt++}isActivation(nt){switch(nt.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const nt of this._nodes)if(nt.opType==="Conv"){const it=this._allData[nt.outputs[0]]._to;if(it.length===1&&this.isActivation(this._nodes[it[0]])){const ot=this._nodes[it[0]];if(ot.opType==="Clip")if(ot.inputs.length===1)try{nt.attributes.set("activation_params","floats",[ot.attributes.getFloat("min"),ot.attributes.getFloat("max")])}catch{nt.attributes.set("activation_params","floats",[_e.MIN_CLIP,_e.MAX_CLIP])}else{if(!(ot.inputs.length>=3&&this._allData[ot.inputs[1]].tensor!==void 0&&this._allData[ot.inputs[2]].tensor!==void 0))continue;nt.attributes.set("activation_params","floats",[this._allData[ot.inputs[1]].tensor.floatData[0],this._allData[ot.inputs[2]].tensor.floatData[0]])}nt.attributes.set("activation","string",ot.opType),this.deleteNode(it[0])}}}}},6231:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const c={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},d={none:new class{log(st,$,_){}},console:new class{log(st,$,_){console.log(`${this.color(st)} ${_?"\x1B[35m"+_+"\x1B[0m ":""}${$}`)}color(st){switch(st){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${st}`)}}}},h={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let g={"":h};function b(st,$,_,nt){if($===void 0)return it=st,{verbose:b.verbose.bind(null,it),info:b.info.bind(null,it),warning:b.warning.bind(null,it),error:b.error.bind(null,it),fatal:b.fatal.bind(null,it)};if(_===void 0)_e(st,$);else if(typeof _=="number"&&nt===void 0)_e(st,$);else if(typeof _=="string"&&nt===void 0)_e(st,_,0,$);else{if(typeof _!="string"||typeof nt!="number")throw new TypeError("input is valid");_e(st,_,0,$)}var it}function _e(st,$,_,nt){const it=g[nt||""]||g[""];c[st]<c[it.minimalSeverity]||(it.logDateTime&&($=`${new Date().toISOString()}|${$}`),it.logSourceLocation,d[it.provider].log(st,$,nt))}(function(st){function $(nt){g={},_("",nt||{})}function _(nt,it){if(nt==="*")$(it);else{const ot=g[nt]||h;g[nt]={provider:it.provider||ot.provider,minimalSeverity:it.minimalSeverity||ot.minimalSeverity,logDateTime:it.logDateTime===void 0?ot.logDateTime:it.logDateTime,logSourceLocation:it.logSourceLocation===void 0?ot.logSourceLocation:it.logSourceLocation}}}st.verbose=function(nt,it){st("verbose",nt,it)},st.info=function(nt,it){st("info",nt,it)},st.warning=function(nt,it){st("warning",nt,it)},st.error=function(nt,it){st("error",nt,it)},st.fatal=function(nt,it){st("fatal",nt,it)},st.reset=$,st.set=_,st.setWithEnv=function(nt){const it={};nt.logLevel&&(it.minimalSeverity=nt.logLevel),_("",it)}})(b||(b={})),e.Logger=b;class et{constructor($,_,nt,it,ot,lt){this.category=$,this.name=_,this.startTime=nt,this.endCallback=it,this.timer=ot,this.ctx=lt}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class rt{constructor($,_,nt,it){this.category=$,this.name=_,this.startTime=nt,this.endTime=it}}e.Profiler=class{static create(st){return st===void 0?new this:new this(st.maxNumberEvents,st.flushBatchSize,st.flushIntervalInMilliseconds)}constructor(st,$,_){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=st===void 0?1e4:st,this._flushBatchSize=$===void 0?10:$,this._flushIntervalInMilliseconds=_===void 0?5e3:_}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(st,$,_,nt){const it=this._started?this.begin(st,$,nt):void 0;let ot=!1;const lt=_();if(lt&&typeof lt.then=="function")return ot=!0,new Promise((at,ct)=>{lt.then(async dt=>{it&&await it.end(),at(dt)},async dt=>{it&&await it.end(),ct(dt)})});if(!ot&&it){const at=it.end();if(at&&typeof at.then=="function")return new Promise((ct,dt)=>{at.then(()=>{ct(lt)},ht=>{dt(ht)})})}return lt}begin(st,$,_){if(!this._started)throw new Error("profiler is not started yet");if(_===void 0){const nt=(0,e.now)();return this.flush(nt),new et(st,$,nt,it=>this.endSync(it))}{const nt=_.beginTimer();return new et(st,$,0,async it=>this.end(it),nt,_)}}async end(st){const $=await st.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new rt(st.category,st.name,st.startTime,$)),this.flush($))}endSync(st){const $=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new rt(st.category,st.name,st.startTime,$)),this.flush($))}logOneEvent(st){e.Logger.verbose(`Profiler.${st.category}`,`${(st.endTime-st.startTime).toFixed(2)}ms on event '${st.name}' at ${st.endTime.toFixed(2)}`)}flush(st){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||st-this._flushTime>=this._flushIntervalInMilliseconds){for(const $=this._flushPointer;this._flushPointer<$+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const d=c(5686),h=c(1446),g=c(7070),b=c(9395),_e=c(2517);var et=b.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(rt,st,$){if(!$)try{return void this.loadFromOnnxFormat(rt,st)}catch(_){if($!==void 0)throw _}this.loadFromOrtFormat(rt,st)}loadFromOnnxFormat(rt,st){const $=h.onnx.ModelProto.decode(rt);if(_e.LongUtil.longToNumber($.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=$.opsetImport.map(_=>({domain:_.domain,version:_e.LongUtil.longToNumber(_.version)})),this._graph=g.Graph.from($.graph,st)}loadFromOrtFormat(rt,st){const $=new d.flatbuffers.ByteBuffer(rt),_=et.InferenceSession.getRootAsInferenceSession($).model();if(_e.LongUtil.longToNumber(_.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let nt=0;nt<_.opsetImportLength();nt++){const it=_.opsetImport(nt);this._opsets.push({domain:it==null?void 0:it.domain(),version:_e.LongUtil.longToNumber(it.version())})}this._graph=g.Graph.from(_.graph(),st)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(a,e)=>{function c(d,h){if(h.endsWith("+")){const g=Number.parseInt(h.substring(0,h.length-1),10);return!isNaN(g)&&g<=d}if(h.split("-").length===2){const g=h.split("-"),b=Number.parseInt(g[0],10),_e=Number.parseInt(g[1],10);return!isNaN(b)&&!isNaN(_e)&&b<=d&&d<=_e}return Number.parseInt(h,10)===d}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(d,h,g){for(const b of g){const _e=b[0],et=b[1],rt=b[2],st=b[3],$=b[4];if(d.opType===_e){for(const _ of h)if((_.domain===et||_.domain==="ai.onnx"&&et==="")&&c(_.version,rt))return{opImpl:st,opInit:$}}}throw new TypeError(`cannot resolve operator '${d.opType}' with opsets: ${h.map(b=>`${b.domain||"ai.onnx"} v${b.version}`).join(", ")}`)}},9395:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const d=c(5686);var h,g;h=e.onnxruntime||(e.onnxruntime={}),function(b){(function(_e){_e[_e.UNDEFINED=0]="UNDEFINED",_e[_e.FLOAT=1]="FLOAT",_e[_e.INT=2]="INT",_e[_e.STRING=3]="STRING",_e[_e.TENSOR=4]="TENSOR",_e[_e.GRAPH=5]="GRAPH",_e[_e.FLOATS=6]="FLOATS",_e[_e.INTS=7]="INTS",_e[_e.STRINGS=8]="STRINGS",_e[_e.TENSORS=9]="TENSORS",_e[_e.GRAPHS=10]="GRAPHS",_e[_e.SPARSE_TENSOR=11]="SPARSE_TENSOR",_e[_e.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(b.AttributeType||(b.AttributeType={}))}((g=h.experimental||(h.experimental={})).fbs||(g.fbs={})),function(b){(function(_e){(function(et){(function(rt){rt[rt.UNKNOWN=0]="UNKNOWN",rt[rt.VALUE=1]="VALUE",rt[rt.PARAM=2]="PARAM"})(et.DimensionValueType||(et.DimensionValueType={}))})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){(function(rt){rt[rt.UNDEFINED=0]="UNDEFINED",rt[rt.FLOAT=1]="FLOAT",rt[rt.UINT8=2]="UINT8",rt[rt.INT8=3]="INT8",rt[rt.UINT16=4]="UINT16",rt[rt.INT16=5]="INT16",rt[rt.INT32=6]="INT32",rt[rt.INT64=7]="INT64",rt[rt.STRING=8]="STRING",rt[rt.BOOL=9]="BOOL",rt[rt.FLOAT16=10]="FLOAT16",rt[rt.DOUBLE=11]="DOUBLE",rt[rt.UINT32=12]="UINT32",rt[rt.UINT64=13]="UINT64",rt[rt.COMPLEX64=14]="COMPLEX64",rt[rt.COMPLEX128=15]="COMPLEX128",rt[rt.BFLOAT16=16]="BFLOAT16"})(et.TensorDataType||(et.TensorDataType={}))})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){(function(rt){rt[rt.Primitive=0]="Primitive",rt[rt.Fused=1]="Fused"})(et.NodeType||(et.NodeType={}))})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){(function(rt){rt[rt.NONE=0]="NONE",rt[rt.tensor_type=1]="tensor_type",rt[rt.sequence_type=2]="sequence_type",rt[rt.map_type=3]="map_type"})(et.TypeInfoValue||(et.TypeInfoValue={}))})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsShape($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsShape($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}dim($,_){let nt=this.bb.__offset(this.bb_pos,4);return nt?(_||new b.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}dimLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}static startShape($){$.startObject(1)}static addDim($,_){$.addFieldOffset(0,_,0)}static createDimVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startDimVector($,_){$.startVector(4,_,4)}static endShape($){return $.endObject()}static createShape($,_){return rt.startShape($),rt.addDim($,_),rt.endShape($)}}et.Shape=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsDimension($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsDimension($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}value($){let _=this.bb.__offset(this.bb_pos,4);return _?($||new b.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}denotation($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.__string(this.bb_pos+_,$):null}static startDimension($){$.startObject(2)}static addValue($,_){$.addFieldOffset(0,_,0)}static addDenotation($,_){$.addFieldOffset(1,_,0)}static endDimension($){return $.endObject()}static createDimension($,_,nt){return rt.startDimension($),rt.addValue($,_),rt.addDenotation($,nt),rt.endDimension($)}}et.Dimension=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsDimensionValue($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsDimensionValue($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}dimType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt8(this.bb_pos+$):b.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}dimParam($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.__string(this.bb_pos+_,$):null}static startDimensionValue($){$.startObject(3)}static addDimType($,_){$.addFieldInt8(0,_,b.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue($,_){$.addFieldInt64(1,_,$.createLong(0,0))}static addDimParam($,_){$.addFieldOffset(2,_,0)}static endDimensionValue($){return $.endObject()}static createDimensionValue($,_,nt,it){return rt.startDimensionValue($),rt.addDimType($,_),rt.addDimValue($,nt),rt.addDimParam($,it),rt.endDimensionValue($)}}et.DimensionValue=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsTensorTypeAndShape($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTensorTypeAndShape($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}elemType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt32(this.bb_pos+$):b.experimental.fbs.TensorDataType.UNDEFINED}shape($){let _=this.bb.__offset(this.bb_pos,6);return _?($||new b.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startTensorTypeAndShape($){$.startObject(2)}static addElemType($,_){$.addFieldInt32(0,_,b.experimental.fbs.TensorDataType.UNDEFINED)}static addShape($,_){$.addFieldOffset(1,_,0)}static endTensorTypeAndShape($){return $.endObject()}static createTensorTypeAndShape($,_,nt){return rt.startTensorTypeAndShape($),rt.addElemType($,_),rt.addShape($,nt),rt.endTensorTypeAndShape($)}}et.TensorTypeAndShape=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsMapType($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsMapType($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}keyType(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt32(this.bb_pos+$):b.experimental.fbs.TensorDataType.UNDEFINED}valueType($){let _=this.bb.__offset(this.bb_pos,6);return _?($||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startMapType($){$.startObject(2)}static addKeyType($,_){$.addFieldInt32(0,_,b.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType($,_){$.addFieldOffset(1,_,0)}static endMapType($){return $.endObject()}static createMapType($,_,nt){return rt.startMapType($),rt.addKeyType($,_),rt.addValueType($,nt),rt.endMapType($)}}et.MapType=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsSequenceType($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSequenceType($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}elemType($){let _=this.bb.__offset(this.bb_pos,4);return _?($||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startSequenceType($){$.startObject(1)}static addElemType($,_){$.addFieldOffset(0,_,0)}static endSequenceType($){return $.endObject()}static createSequenceType($,_){return rt.startSequenceType($),rt.addElemType($,_),rt.endSequenceType($)}}et.SequenceType=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(_e.fbs||(_e.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(et,rt){return this.bb_pos=et,this.bb=rt,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(et,rt,st,$){return et.prep(4,12),et.writeInt32($),et.writeInt32(st),et.writeInt32(rt),et.offset()}}})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsNodeEdge($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsNodeEdge($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}nodeIndex(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readUint32(this.bb_pos+$):0}inputEdges($,_){let nt=this.bb.__offset(this.bb_pos,6);return nt?(_||new b.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+nt)+12*$,this.bb):null}inputEdgesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}outputEdges($,_){let nt=this.bb.__offset(this.bb_pos,8);return nt?(_||new b.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+nt)+12*$,this.bb):null}outputEdgesLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}static startNodeEdge($){$.startObject(3)}static addNodeIndex($,_){$.addFieldInt32(0,_,0)}static addInputEdges($,_){$.addFieldOffset(1,_,0)}static startInputEdgesVector($,_){$.startVector(12,_,4)}static addOutputEdges($,_){$.addFieldOffset(2,_,0)}static startOutputEdgesVector($,_){$.startVector(12,_,4)}static endNodeEdge($){return $.endObject()}static createNodeEdge($,_,nt,it){return rt.startNodeEdge($),rt.addNodeIndex($,_),rt.addInputEdges($,nt),rt.addOutputEdges($,it),rt.endNodeEdge($)}}et.NodeEdge=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsNode($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsNode($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}name($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}docString($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.__string(this.bb_pos+_,$):null}domain($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.__string(this.bb_pos+_,$):null}sinceVersion(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readInt32(this.bb_pos+$):0}index(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.readUint32(this.bb_pos+$):0}opType($){let _=this.bb.__offset(this.bb_pos,14);return _?this.bb.__string(this.bb_pos+_,$):null}type(){let $=this.bb.__offset(this.bb_pos,16);return $?this.bb.readInt32(this.bb_pos+$):b.experimental.fbs.NodeType.Primitive}executionProviderType($){let _=this.bb.__offset(this.bb_pos,18);return _?this.bb.__string(this.bb_pos+_,$):null}inputs($,_){let nt=this.bb.__offset(this.bb_pos,20);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}inputsLength(){let $=this.bb.__offset(this.bb_pos,20);return $?this.bb.__vector_len(this.bb_pos+$):0}outputs($,_){let nt=this.bb.__offset(this.bb_pos,22);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}outputsLength(){let $=this.bb.__offset(this.bb_pos,22);return $?this.bb.__vector_len(this.bb_pos+$):0}attributes($,_){let nt=this.bb.__offset(this.bb_pos,24);return nt?(_||new b.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}attributesLength(){let $=this.bb.__offset(this.bb_pos,24);return $?this.bb.__vector_len(this.bb_pos+$):0}inputArgCounts($){let _=this.bb.__offset(this.bb_pos,26);return _?this.bb.readInt32(this.bb.__vector(this.bb_pos+_)+4*$):0}inputArgCountsLength(){let $=this.bb.__offset(this.bb_pos,26);return $?this.bb.__vector_len(this.bb_pos+$):0}inputArgCountsArray(){let $=this.bb.__offset(this.bb_pos,26);return $?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}implicitInputs($,_){let nt=this.bb.__offset(this.bb_pos,28);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}implicitInputsLength(){let $=this.bb.__offset(this.bb_pos,28);return $?this.bb.__vector_len(this.bb_pos+$):0}static startNode($){$.startObject(13)}static addName($,_){$.addFieldOffset(0,_,0)}static addDocString($,_){$.addFieldOffset(1,_,0)}static addDomain($,_){$.addFieldOffset(2,_,0)}static addSinceVersion($,_){$.addFieldInt32(3,_,0)}static addIndex($,_){$.addFieldInt32(4,_,0)}static addOpType($,_){$.addFieldOffset(5,_,0)}static addType($,_){$.addFieldInt32(6,_,b.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType($,_){$.addFieldOffset(7,_,0)}static addInputs($,_){$.addFieldOffset(8,_,0)}static createInputsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startInputsVector($,_){$.startVector(4,_,4)}static addOutputs($,_){$.addFieldOffset(9,_,0)}static createOutputsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startOutputsVector($,_){$.startVector(4,_,4)}static addAttributes($,_){$.addFieldOffset(10,_,0)}static createAttributesVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startAttributesVector($,_){$.startVector(4,_,4)}static addInputArgCounts($,_){$.addFieldOffset(11,_,0)}static createInputArgCountsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addInt32(_[nt]);return $.endVector()}static startInputArgCountsVector($,_){$.startVector(4,_,4)}static addImplicitInputs($,_){$.addFieldOffset(12,_,0)}static createImplicitInputsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startImplicitInputsVector($,_){$.startVector(4,_,4)}static endNode($){return $.endObject()}static createNode($,_,nt,it,ot,lt,at,ct,dt,ht,pt,ft,mt,xt){return rt.startNode($),rt.addName($,_),rt.addDocString($,nt),rt.addDomain($,it),rt.addSinceVersion($,ot),rt.addIndex($,lt),rt.addOpType($,at),rt.addType($,ct),rt.addExecutionProviderType($,dt),rt.addInputs($,ht),rt.addOutputs($,pt),rt.addAttributes($,ft),rt.addInputArgCounts($,mt),rt.addImplicitInputs($,xt),rt.endNode($)}}et.Node=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsValueInfo($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsValueInfo($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}name($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}docString($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.__string(this.bb_pos+_,$):null}type($){let _=this.bb.__offset(this.bb_pos,8);return _?($||new b.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startValueInfo($){$.startObject(3)}static addName($,_){$.addFieldOffset(0,_,0)}static addDocString($,_){$.addFieldOffset(1,_,0)}static addType($,_){$.addFieldOffset(2,_,0)}static endValueInfo($){return $.endObject()}static createValueInfo($,_,nt,it){return rt.startValueInfo($),rt.addName($,_),rt.addDocString($,nt),rt.addType($,it),rt.endValueInfo($)}}et.ValueInfo=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsTypeInfo($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTypeInfo($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}denotation($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}valueType(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readUint8(this.bb_pos+$):b.experimental.fbs.TypeInfoValue.NONE}value($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.__union($,this.bb_pos+_):null}static startTypeInfo($){$.startObject(3)}static addDenotation($,_){$.addFieldOffset(0,_,0)}static addValueType($,_){$.addFieldInt8(1,_,b.experimental.fbs.TypeInfoValue.NONE)}static addValue($,_){$.addFieldOffset(2,_,0)}static endTypeInfo($){return $.endObject()}static createTypeInfo($,_,nt,it){return rt.startTypeInfo($),rt.addDenotation($,_),rt.addValueType($,nt),rt.addValue($,it),rt.endTypeInfo($)}}et.TypeInfo=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsOperatorSetId($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsOperatorSetId($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}domain($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}version(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}static startOperatorSetId($){$.startObject(2)}static addDomain($,_){$.addFieldOffset(0,_,0)}static addVersion($,_){$.addFieldInt64(1,_,$.createLong(0,0))}static endOperatorSetId($){return $.endObject()}static createOperatorSetId($,_,nt){return rt.startOperatorSetId($),rt.addDomain($,_),rt.addVersion($,nt),rt.endOperatorSetId($)}}et.OperatorSetId=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsTensor($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsTensor($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}name($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}docString($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.__string(this.bb_pos+_,$):null}dims($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.readInt64(this.bb.__vector(this.bb_pos+_)+8*$):this.bb.createLong(0,0)}dimsLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}dataType(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readInt32(this.bb_pos+$):b.experimental.fbs.TensorDataType.UNDEFINED}rawData($){let _=this.bb.__offset(this.bb_pos,12);return _?this.bb.readUint8(this.bb.__vector(this.bb_pos+_)+$):0}rawDataLength(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.__vector_len(this.bb_pos+$):0}rawDataArray(){let $=this.bb.__offset(this.bb_pos,12);return $?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}stringData($,_){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}stringDataLength(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.__vector_len(this.bb_pos+$):0}static startTensor($){$.startObject(6)}static addName($,_){$.addFieldOffset(0,_,0)}static addDocString($,_){$.addFieldOffset(1,_,0)}static addDims($,_){$.addFieldOffset(2,_,0)}static createDimsVector($,_){$.startVector(8,_.length,8);for(let nt=_.length-1;nt>=0;nt--)$.addInt64(_[nt]);return $.endVector()}static startDimsVector($,_){$.startVector(8,_,8)}static addDataType($,_){$.addFieldInt32(3,_,b.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData($,_){$.addFieldOffset(4,_,0)}static createRawDataVector($,_){$.startVector(1,_.length,1);for(let nt=_.length-1;nt>=0;nt--)$.addInt8(_[nt]);return $.endVector()}static startRawDataVector($,_){$.startVector(1,_,1)}static addStringData($,_){$.addFieldOffset(5,_,0)}static createStringDataVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startStringDataVector($,_){$.startVector(4,_,4)}static endTensor($){return $.endObject()}static createTensor($,_,nt,it,ot,lt,at){return rt.startTensor($),rt.addName($,_),rt.addDocString($,nt),rt.addDims($,it),rt.addDataType($,ot),rt.addRawData($,lt),rt.addStringData($,at),rt.endTensor($)}}et.Tensor=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsSparseTensor($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSparseTensor($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}values($){let _=this.bb.__offset(this.bb_pos,4);return _?($||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}indices($){let _=this.bb.__offset(this.bb_pos,6);return _?($||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}dims($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.readInt64(this.bb.__vector(this.bb_pos+_)+8*$):this.bb.createLong(0,0)}dimsLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}static startSparseTensor($){$.startObject(3)}static addValues($,_){$.addFieldOffset(0,_,0)}static addIndices($,_){$.addFieldOffset(1,_,0)}static addDims($,_){$.addFieldOffset(2,_,0)}static createDimsVector($,_){$.startVector(8,_.length,8);for(let nt=_.length-1;nt>=0;nt--)$.addInt64(_[nt]);return $.endVector()}static startDimsVector($,_){$.startVector(8,_,8)}static endSparseTensor($){return $.endObject()}static createSparseTensor($,_,nt,it){return rt.startSparseTensor($),rt.addValues($,_),rt.addIndices($,nt),rt.addDims($,it),rt.endSparseTensor($)}}et.SparseTensor=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsAttribute($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsAttribute($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}name($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}docString($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.__string(this.bb_pos+_,$):null}type(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.readInt32(this.bb_pos+$):b.experimental.fbs.AttributeType.UNDEFINED}f(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readFloat32(this.bb_pos+$):0}i(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}s($){let _=this.bb.__offset(this.bb_pos,14);return _?this.bb.__string(this.bb_pos+_,$):null}t($){let _=this.bb.__offset(this.bb_pos,16);return _?($||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}g($){let _=this.bb.__offset(this.bb_pos,18);return _?($||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}floats($){let _=this.bb.__offset(this.bb_pos,20);return _?this.bb.readFloat32(this.bb.__vector(this.bb_pos+_)+4*$):0}floatsLength(){let $=this.bb.__offset(this.bb_pos,20);return $?this.bb.__vector_len(this.bb_pos+$):0}floatsArray(){let $=this.bb.__offset(this.bb_pos,20);return $?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}ints($){let _=this.bb.__offset(this.bb_pos,22);return _?this.bb.readInt64(this.bb.__vector(this.bb_pos+_)+8*$):this.bb.createLong(0,0)}intsLength(){let $=this.bb.__offset(this.bb_pos,22);return $?this.bb.__vector_len(this.bb_pos+$):0}strings($,_){let nt=this.bb.__offset(this.bb_pos,24);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}stringsLength(){let $=this.bb.__offset(this.bb_pos,24);return $?this.bb.__vector_len(this.bb_pos+$):0}tensors($,_){let nt=this.bb.__offset(this.bb_pos,26);return nt?(_||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}tensorsLength(){let $=this.bb.__offset(this.bb_pos,26);return $?this.bb.__vector_len(this.bb_pos+$):0}graphs($,_){let nt=this.bb.__offset(this.bb_pos,28);return nt?(_||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}graphsLength(){let $=this.bb.__offset(this.bb_pos,28);return $?this.bb.__vector_len(this.bb_pos+$):0}static startAttribute($){$.startObject(13)}static addName($,_){$.addFieldOffset(0,_,0)}static addDocString($,_){$.addFieldOffset(1,_,0)}static addType($,_){$.addFieldInt32(2,_,b.experimental.fbs.AttributeType.UNDEFINED)}static addF($,_){$.addFieldFloat32(3,_,0)}static addI($,_){$.addFieldInt64(4,_,$.createLong(0,0))}static addS($,_){$.addFieldOffset(5,_,0)}static addT($,_){$.addFieldOffset(6,_,0)}static addG($,_){$.addFieldOffset(7,_,0)}static addFloats($,_){$.addFieldOffset(8,_,0)}static createFloatsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addFloat32(_[nt]);return $.endVector()}static startFloatsVector($,_){$.startVector(4,_,4)}static addInts($,_){$.addFieldOffset(9,_,0)}static createIntsVector($,_){$.startVector(8,_.length,8);for(let nt=_.length-1;nt>=0;nt--)$.addInt64(_[nt]);return $.endVector()}static startIntsVector($,_){$.startVector(8,_,8)}static addStrings($,_){$.addFieldOffset(10,_,0)}static createStringsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startStringsVector($,_){$.startVector(4,_,4)}static addTensors($,_){$.addFieldOffset(11,_,0)}static createTensorsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startTensorsVector($,_){$.startVector(4,_,4)}static addGraphs($,_){$.addFieldOffset(12,_,0)}static createGraphsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startGraphsVector($,_){$.startVector(4,_,4)}static endAttribute($){return $.endObject()}static createAttribute($,_,nt,it,ot,lt,at,ct,dt,ht,pt,ft,mt,xt){return rt.startAttribute($),rt.addName($,_),rt.addDocString($,nt),rt.addType($,it),rt.addF($,ot),rt.addI($,lt),rt.addS($,at),rt.addT($,ct),rt.addG($,dt),rt.addFloats($,ht),rt.addInts($,pt),rt.addStrings($,ft),rt.addTensors($,mt),rt.addGraphs($,xt),rt.endAttribute($)}}et.Attribute=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsGraph($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsGraph($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}initializers($,_){let nt=this.bb.__offset(this.bb_pos,4);return nt?(_||new b.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}initializersLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}nodeArgs($,_){let nt=this.bb.__offset(this.bb_pos,6);return nt?(_||new b.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodeArgsLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}nodes($,_){let nt=this.bb.__offset(this.bb_pos,8);return nt?(_||new b.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodesLength(){let $=this.bb.__offset(this.bb_pos,8);return $?this.bb.__vector_len(this.bb_pos+$):0}maxNodeIndex(){let $=this.bb.__offset(this.bb_pos,10);return $?this.bb.readUint32(this.bb_pos+$):0}nodeEdges($,_){let nt=this.bb.__offset(this.bb_pos,12);return nt?(_||new b.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}nodeEdgesLength(){let $=this.bb.__offset(this.bb_pos,12);return $?this.bb.__vector_len(this.bb_pos+$):0}inputs($,_){let nt=this.bb.__offset(this.bb_pos,14);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}inputsLength(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.__vector_len(this.bb_pos+$):0}outputs($,_){let nt=this.bb.__offset(this.bb_pos,16);return nt?this.bb.__string(this.bb.__vector(this.bb_pos+nt)+4*$,_):null}outputsLength(){let $=this.bb.__offset(this.bb_pos,16);return $?this.bb.__vector_len(this.bb_pos+$):0}sparseInitializers($,_){let nt=this.bb.__offset(this.bb_pos,18);return nt?(_||new b.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}sparseInitializersLength(){let $=this.bb.__offset(this.bb_pos,18);return $?this.bb.__vector_len(this.bb_pos+$):0}static startGraph($){$.startObject(8)}static addInitializers($,_){$.addFieldOffset(0,_,0)}static createInitializersVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startInitializersVector($,_){$.startVector(4,_,4)}static addNodeArgs($,_){$.addFieldOffset(1,_,0)}static createNodeArgsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startNodeArgsVector($,_){$.startVector(4,_,4)}static addNodes($,_){$.addFieldOffset(2,_,0)}static createNodesVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startNodesVector($,_){$.startVector(4,_,4)}static addMaxNodeIndex($,_){$.addFieldInt32(3,_,0)}static addNodeEdges($,_){$.addFieldOffset(4,_,0)}static createNodeEdgesVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startNodeEdgesVector($,_){$.startVector(4,_,4)}static addInputs($,_){$.addFieldOffset(5,_,0)}static createInputsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startInputsVector($,_){$.startVector(4,_,4)}static addOutputs($,_){$.addFieldOffset(6,_,0)}static createOutputsVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startOutputsVector($,_){$.startVector(4,_,4)}static addSparseInitializers($,_){$.addFieldOffset(7,_,0)}static createSparseInitializersVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startSparseInitializersVector($,_){$.startVector(4,_,4)}static endGraph($){return $.endObject()}static createGraph($,_,nt,it,ot,lt,at,ct,dt){return rt.startGraph($),rt.addInitializers($,_),rt.addNodeArgs($,nt),rt.addNodes($,it),rt.addMaxNodeIndex($,ot),rt.addNodeEdges($,lt),rt.addInputs($,at),rt.addOutputs($,ct),rt.addSparseInitializers($,dt),rt.endGraph($)}}et.Graph=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsModel($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsModel($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}irVersion(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}opsetImport($,_){let nt=this.bb.__offset(this.bb_pos,6);return nt?(_||new b.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}opsetImportLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}producerName($){let _=this.bb.__offset(this.bb_pos,8);return _?this.bb.__string(this.bb_pos+_,$):null}producerVersion($){let _=this.bb.__offset(this.bb_pos,10);return _?this.bb.__string(this.bb_pos+_,$):null}domain($){let _=this.bb.__offset(this.bb_pos,12);return _?this.bb.__string(this.bb_pos+_,$):null}modelVersion(){let $=this.bb.__offset(this.bb_pos,14);return $?this.bb.readInt64(this.bb_pos+$):this.bb.createLong(0,0)}docString($){let _=this.bb.__offset(this.bb_pos,16);return _?this.bb.__string(this.bb_pos+_,$):null}graph($){let _=this.bb.__offset(this.bb_pos,18);return _?($||new b.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}graphDocString($){let _=this.bb.__offset(this.bb_pos,20);return _?this.bb.__string(this.bb_pos+_,$):null}static startModel($){$.startObject(9)}static addIrVersion($,_){$.addFieldInt64(0,_,$.createLong(0,0))}static addOpsetImport($,_){$.addFieldOffset(1,_,0)}static createOpsetImportVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startOpsetImportVector($,_){$.startVector(4,_,4)}static addProducerName($,_){$.addFieldOffset(2,_,0)}static addProducerVersion($,_){$.addFieldOffset(3,_,0)}static addDomain($,_){$.addFieldOffset(4,_,0)}static addModelVersion($,_){$.addFieldInt64(5,_,$.createLong(0,0))}static addDocString($,_){$.addFieldOffset(6,_,0)}static addGraph($,_){$.addFieldOffset(7,_,0)}static addGraphDocString($,_){$.addFieldOffset(8,_,0)}static endModel($){return $.endObject()}static createModel($,_,nt,it,ot,lt,at,ct,dt,ht){return rt.startModel($),rt.addIrVersion($,_),rt.addOpsetImport($,nt),rt.addProducerName($,it),rt.addProducerVersion($,ot),rt.addDomain($,lt),rt.addModelVersion($,at),rt.addDocString($,ct),rt.addGraph($,dt),rt.addGraphDocString($,ht),rt.endModel($)}}et.Model=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsKernelCreateInfos($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsKernelCreateInfos($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}nodeIndices($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.readUint32(this.bb.__vector(this.bb_pos+_)+4*$):0}nodeIndicesLength(){let $=this.bb.__offset(this.bb_pos,4);return $?this.bb.__vector_len(this.bb_pos+$):0}nodeIndicesArray(){let $=this.bb.__offset(this.bb_pos,4);return $?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+$),this.bb.__vector_len(this.bb_pos+$)):null}kernelDefHashes($){let _=this.bb.__offset(this.bb_pos,6);return _?this.bb.readUint64(this.bb.__vector(this.bb_pos+_)+8*$):this.bb.createLong(0,0)}kernelDefHashesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}static startKernelCreateInfos($){$.startObject(2)}static addNodeIndices($,_){$.addFieldOffset(0,_,0)}static createNodeIndicesVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addInt32(_[nt]);return $.endVector()}static startNodeIndicesVector($,_){$.startVector(4,_,4)}static addKernelDefHashes($,_){$.addFieldOffset(1,_,0)}static createKernelDefHashesVector($,_){$.startVector(8,_.length,8);for(let nt=_.length-1;nt>=0;nt--)$.addInt64(_[nt]);return $.endVector()}static startKernelDefHashesVector($,_){$.startVector(8,_,8)}static endKernelCreateInfos($){return $.endObject()}static createKernelCreateInfos($,_,nt){return rt.startKernelCreateInfos($),rt.addNodeIndices($,_),rt.addKernelDefHashes($,nt),rt.endKernelCreateInfos($)}}et.KernelCreateInfos=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsSubGraphSessionState($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSubGraphSessionState($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}graphId($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}sessionState($){let _=this.bb.__offset(this.bb_pos,6);return _?($||new b.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startSubGraphSessionState($){$.startObject(2)}static addGraphId($,_){$.addFieldOffset(0,_,0)}static addSessionState($,_){$.addFieldOffset(1,_,0)}static endSubGraphSessionState($){let _=$.endObject();return $.requiredField(_,4),_}static createSubGraphSessionState($,_,nt){return rt.startSubGraphSessionState($),rt.addGraphId($,_),rt.addSessionState($,nt),rt.endSubGraphSessionState($)}}et.SubGraphSessionState=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsSessionState($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsSessionState($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}kernels($){let _=this.bb.__offset(this.bb_pos,4);return _?($||new b.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}subGraphSessionStates($,_){let nt=this.bb.__offset(this.bb_pos,6);return nt?(_||new b.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+nt)+4*$),this.bb):null}subGraphSessionStatesLength(){let $=this.bb.__offset(this.bb_pos,6);return $?this.bb.__vector_len(this.bb_pos+$):0}static startSessionState($){$.startObject(2)}static addKernels($,_){$.addFieldOffset(0,_,0)}static addSubGraphSessionStates($,_){$.addFieldOffset(1,_,0)}static createSubGraphSessionStatesVector($,_){$.startVector(4,_.length,4);for(let nt=_.length-1;nt>=0;nt--)$.addOffset(_[nt]);return $.endVector()}static startSubGraphSessionStatesVector($,_){$.startVector(4,_,4)}static endSessionState($){return $.endObject()}static createSessionState($,_,nt){return rt.startSessionState($),rt.addKernels($,_),rt.addSubGraphSessionStates($,nt),rt.endSessionState($)}}et.SessionState=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(b){(function(_e){(function(et){class rt{constructor(){this.bb=null,this.bb_pos=0}__init($,_){return this.bb_pos=$,this.bb=_,this}static getRootAsInferenceSession($,_){return(_||new rt).__init($.readInt32($.position())+$.position(),$)}static getSizePrefixedRootAsInferenceSession($,_){return $.setPosition($.position()+d.flatbuffers.SIZE_PREFIX_LENGTH),(_||new rt).__init($.readInt32($.position())+$.position(),$)}static bufferHasIdentifier($){return $.__has_identifier("ORTM")}ortVersion($){let _=this.bb.__offset(this.bb_pos,4);return _?this.bb.__string(this.bb_pos+_,$):null}model($){let _=this.bb.__offset(this.bb_pos,6);return _?($||new b.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}sessionState($){let _=this.bb.__offset(this.bb_pos,8);return _?($||new b.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+_),this.bb):null}static startInferenceSession($){$.startObject(3)}static addOrtVersion($,_){$.addFieldOffset(0,_,0)}static addModel($,_){$.addFieldOffset(1,_,0)}static addSessionState($,_){$.addFieldOffset(2,_,0)}static endInferenceSession($){return $.endObject()}static finishInferenceSessionBuffer($,_){$.finish(_,"ORTM")}static finishSizePrefixedInferenceSessionBuffer($,_){$.finish(_,"ORTM",!0)}static createInferenceSession($,_,nt,it){return rt.startInferenceSession($),rt.addOrtVersion($,_),rt.addModel($,nt),rt.addSessionState($,it),rt.endInferenceSession($)}}et.InferenceSession=rt})(_e.fbs||(_e.fbs={}))})(b.experimental||(b.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const d=c(1670),h=c(9162);e.OnnxjsSessionHandler=class{constructor(g){this.session=g,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(g,b,_e){const et=new Map;for(const $ in g)if(Object.hasOwnProperty.call(g,$)){const _=g[$];et.set($,new h.Tensor(_.dims,_.type,void 0,void 0,_.data))}const rt=await this.session.run(et),st={};return rt.forEach(($,_)=>{st[_]=new d.Tensor($.type,$.data,$.dims)}),st}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const d=c(7067),h=c(1296),g=c(7091),b=c(1036),_e=c(6231),et=c(2644);e.Session=class{constructor(rt={}){this._initialized=!1,this.backendHint=rt.backendHint,this.profiler=_e.Profiler.create(rt.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(rt,st,$){await this.profiler.event("session","Session.loadModel",async()=>{const _=await(0,g.resolveBackend)(this.backendHint);if(this.sessionHandler=_.createSessionHandler(this.context),this._model=new et.Model,typeof rt=="string"){const nt=rt.endsWith(".ort");if(typeof fetch>"u"){const it=await(0,h.promisify)(d.readFile)(rt);this.initialize(it,nt)}else{const it=await fetch(rt),ot=await it.arrayBuffer();this.initialize(new Uint8Array(ot),nt)}}else if(ArrayBuffer.isView(rt))this.initialize(rt);else{const nt=new Uint8Array(rt,st||0,$||rt.byteLength);this.initialize(nt)}})}initialize(rt,st){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const $=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(rt,$,st),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new b.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(rt){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const st=this.normalizeAndValidateInputs(rt),$=await this._executionPlan.execute(this.sessionHandler,st);return this.createOutput($)})}normalizeAndValidateInputs(rt){const st=this._model.graph.getInputNames();if(Array.isArray(rt)){if(rt.length!==st.length)throw new Error(`incorrect input array length: expected ${st.length} but got ${rt.length}`)}else{if(rt.size!==st.length)throw new Error(`incorrect input map size: expected ${st.length} but got ${rt.size}`);const $=new Array(rt.size);let _=0;for(let nt=0;nt<st.length;++nt){const it=rt.get(st[nt]);if(!it)throw new Error(`missing input tensor for: '${name}'`);$[_++]=it}rt=$}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,rt,!1);else{const $=this._model.graph.getInputIndices(),_=this._model.graph.getValues(),nt=new Array($.length);for(let it=0;it<$.length;++it){const ot=_[$[it]];nt[it]=ot.type.shape.dims,this.context.graphInputTypes.push(ot.type.tensorType),this.context.graphInputDims.push(rt[it].dims)}this.validateInputTensorDims(nt,rt,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,rt),rt}validateInputTensorTypes(rt,st){for(let $=0;$<st.length;$++){const _=rt[$],nt=st[$].type;if(_!==nt)throw new Error(`input tensor[${$}] check failed: expected type '${_}' but got ${nt}`)}}validateInputTensorDims(rt,st,$){for(let _=0;_<st.length;_++){const nt=rt[_],it=st[_].dims;if(!this.compareTensorDims(nt,it,$))throw new Error(`input tensor[${_}] check failed: expected shape '[${nt.join(",")}]' but got [${it.join(",")}]`)}}compareTensorDims(rt,st,$){if(rt.length!==st.length)return!1;for(let _=0;_<rt.length;++_)if(rt[_]!==st[_]&&(!$||rt[_]!==0))return!1;return!0}createOutput(rt){const st=this._model.graph.getOutputNames();if(rt.length!==st.length)throw new Error("expected number of outputs do not match number of generated outputs");const $=new Map;for(let _=0;_<st.length;++_)$.set(st[_],rt[_]);return $}initializeOps(rt){const st=rt.getNodes();this._ops=new Array(st.length);for(let $=0;$<st.length;$++)this._ops[$]=this.sessionHandler.resolve(st[$],this._model.opsets,rt)}}},9162:function(a,e,c){var d=this&&this.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const h=c(3442),g=d(c(3720)),b=c(1446),_e=c(9395),et=c(2517);var rt=_e.onnxruntime.experimental.fbs;class st{get data(){if(this.cache===void 0){const lt=this.dataProvider(this.dataId);if(lt.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=lt}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(lt){return this.data[et.ShapeUtil.indicesToOffset(lt,this.strides)]}set(lt,at){this.data[et.ShapeUtil.indicesToOffset(lt,this.strides)]=at}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=et.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(lt,at,ct,dt,ht,pt=h.Guid.create()){this.dims=lt,this.type=at,this.dataProvider=ct,this.asyncDataProvider=dt,this.cache=ht,this.dataId=pt,this.size=et.ShapeUtil.validateDimsAndCalcSize(lt);const ft=this.size,mt=ct===void 0&&dt===void 0&&ht===void 0;if(ht!==void 0&&ht.length!==ft)throw new RangeError("Input dims doesn't match data length.");if(at==="string"){if(!(ht===void 0||Array.isArray(ht)&&ht.every(xt=>typeof xt=="string")))throw new TypeError("cache should be a string array");mt&&(this.cache=new Array(ft))}else{if(ht!==void 0){const xt=_(at);if(!(ht instanceof xt))throw new TypeError(`cache should be type ${xt.name}`)}if(mt){const xt=new ArrayBuffer(ft*function(gt){switch(gt){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${gt}`)}}(at));this.cache=function(gt,Et){return new(_(Et))(gt)}(xt,at)}}}static fromProto(lt){if(!lt)throw new Error("cannot construct Value from an empty tensor");const at=et.ProtoUtil.tensorDataTypeFromProto(lt.dataType),ct=et.ProtoUtil.tensorDimsFromProto(lt.dims),dt=new st(ct,at);if(at==="string")lt.stringData.forEach((ht,pt)=>{dt.data[pt]=(0,et.decodeUtf8String)(ht)});else if(lt.rawData&&typeof lt.rawData.byteLength=="number"&&lt.rawData.byteLength>0){const ht=dt.data,pt=new DataView(lt.rawData.buffer,lt.rawData.byteOffset,lt.rawData.byteLength),ft=$(lt.dataType),mt=lt.rawData.byteLength/ft;if(lt.rawData.byteLength%ft!=0)throw new Error("invalid buffer length");if(ht.length!==mt)throw new Error("buffer length mismatch");for(let xt=0;xt<mt;xt++){const gt=it(pt,lt.dataType,xt*ft);ht[xt]=gt}}else{let ht;switch(lt.dataType){case b.onnx.TensorProto.DataType.FLOAT:ht=lt.floatData;break;case b.onnx.TensorProto.DataType.INT32:case b.onnx.TensorProto.DataType.INT16:case b.onnx.TensorProto.DataType.UINT16:case b.onnx.TensorProto.DataType.INT8:case b.onnx.TensorProto.DataType.UINT8:case b.onnx.TensorProto.DataType.BOOL:ht=lt.int32Data;break;case b.onnx.TensorProto.DataType.INT64:ht=lt.int64Data;break;case b.onnx.TensorProto.DataType.DOUBLE:ht=lt.doubleData;break;case b.onnx.TensorProto.DataType.UINT32:case b.onnx.TensorProto.DataType.UINT64:ht=lt.uint64Data;break;default:throw new Error("unspecific error")}if(ht==null)throw new Error("failed to populate data from a tensorproto value");const pt=dt.data;if(pt.length!==ht.length)throw new Error("array length mismatch");for(let ft=0;ft<ht.length;ft++){const mt=ht[ft];g.default.isLong(mt)?pt[ft]=nt(mt,lt.dataType):pt[ft]=mt}}return dt}static fromData(lt,at,ct){return new st(at,ct,void 0,void 0,lt)}static fromOrtTensor(lt){if(!lt)throw new Error("cannot construct Value from an empty tensor");const at=et.ProtoUtil.tensorDimsFromORTFormat(lt),ct=et.ProtoUtil.tensorDataTypeFromProto(lt.dataType()),dt=new st(at,ct);if(ct==="string")for(let ht=0;ht<lt.stringDataLength();ht++)dt.data[ht]=lt.stringData(ht);else if(lt.rawDataArray()&&typeof lt.rawDataLength()=="number"&&lt.rawDataLength()>0){const ht=dt.data,pt=new DataView(lt.rawDataArray().buffer,lt.rawDataArray().byteOffset,lt.rawDataLength()),ft=$(lt.dataType()),mt=lt.rawDataLength()/ft;if(lt.rawDataLength()%ft!=0)throw new Error("invalid buffer length");if(ht.length!==mt)throw new Error("buffer length mismatch");for(let xt=0;xt<mt;xt++){const gt=it(pt,lt.dataType(),xt*ft);ht[xt]=gt}}return dt}}function $(ot){switch(ot){case b.onnx.TensorProto.DataType.UINT8:case b.onnx.TensorProto.DataType.INT8:case b.onnx.TensorProto.DataType.BOOL:return 1;case b.onnx.TensorProto.DataType.UINT16:case b.onnx.TensorProto.DataType.INT16:return 2;case b.onnx.TensorProto.DataType.FLOAT:case b.onnx.TensorProto.DataType.INT32:case b.onnx.TensorProto.DataType.UINT32:return 4;case b.onnx.TensorProto.DataType.INT64:case b.onnx.TensorProto.DataType.DOUBLE:case b.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${b.onnx.TensorProto.DataType[ot]}`)}}function _(ot){switch(ot){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function nt(ot,lt){if(lt===b.onnx.TensorProto.DataType.INT64||lt===rt.TensorDataType.INT64){if(ot.greaterThanOrEqual(2147483648)||ot.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(lt!==b.onnx.TensorProto.DataType.UINT32&&lt!==rt.TensorDataType.UINT32&&lt!==b.onnx.TensorProto.DataType.UINT64&&lt!==rt.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${b.onnx.TensorProto.DataType[lt]}`);if(ot.greaterThanOrEqual(4294967296)||ot.lessThan(0))throw new TypeError("uint64 is not supported")}return ot.toNumber()}function it(ot,lt,at){switch(lt){case b.onnx.TensorProto.DataType.BOOL:case b.onnx.TensorProto.DataType.UINT8:return ot.getUint8(at);case b.onnx.TensorProto.DataType.INT8:return ot.getInt8(at);case b.onnx.TensorProto.DataType.UINT16:return ot.getUint16(at,!0);case b.onnx.TensorProto.DataType.INT16:return ot.getInt16(at,!0);case b.onnx.TensorProto.DataType.FLOAT:return ot.getFloat32(at,!0);case b.onnx.TensorProto.DataType.INT32:return ot.getInt32(at,!0);case b.onnx.TensorProto.DataType.UINT32:return ot.getUint32(at,!0);case b.onnx.TensorProto.DataType.INT64:return nt(g.default.fromBits(ot.getUint32(at,!0),ot.getUint32(at+4,!0),!1),lt);case b.onnx.TensorProto.DataType.DOUBLE:return ot.getFloat64(at,!0);case b.onnx.TensorProto.DataType.UINT64:return nt(g.default.fromBits(ot.getUint32(at,!0),ot.getUint32(at+4,!0),!0),lt);default:throw new Error(`cannot read from DataView for type ${b.onnx.TensorProto.DataType[lt]}`)}}e.Tensor=st},2517:function(a,e,c){var d=this&&this.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const h=c(5686),g=d(c(3720)),b=c(1446),_e=c(9162);e.checkInputsShape=function(lt,...at){if(!lt||lt.length!==at.length)return!1;for(let ct=0;ct<lt.length;ct++)if(!lt[ct].dims||lt[ct].dims.length!==at[ct])return!1;return!0},e.assert=function(lt,at){if(!lt)throw new Error(typeof at=="string"?at:at())},e.ArrayUtil=class{static arraysEqual(lt,at){if(lt.length!==at.length)return!1;for(let ct=0;ct<lt.length;ct++)if(lt[ct]!==at[ct])return!1;return!0}};class et{static preprocessInputShapes(at,ct){return[at.length===1?[1,at[0]]:at,ct.length===1?[ct[0],1]:ct]}static postprocessOutputShape(at,ct,dt){ct===1&&at.splice(at.length-2,1),dt===1&&at.pop()}static calcMatMulShape(at,ct){return at[1]!==ct[0]?void 0:[at[0],ct[1]]}}e.MatMulUtil=et;class rt{static calcShape(at,ct,dt=!1){const ht=at.length,pt=ct.length;if(ht===0)return ct;if(pt===0)return at;const ft=Math.max(at.length,ct.length),mt=new Array(ft);if(dt){if(ht<2||pt<2)return;const xt=et.calcMatMulShape([at[ht-2],at[ht-1]],[ct[pt-2],ct[pt-1]]);if(xt===void 0)return;[mt[ft-2],mt[ft-1]]=xt}for(let xt=dt?3:1;xt<=ft;xt++){const gt=ht-xt<0?1:at[ht-xt],Et=pt-xt<0?1:ct[pt-xt];if(gt!==Et&&gt>1&&Et>1)return;mt[ft-xt]=Math.max(gt,Et)}return mt}static index(at,ct){const dt=new Array(ct.length);return rt.fillIndex(at,ct,dt),dt}static fillIndex(at,ct,dt){const ht=at.length-ct.length;for(let pt=0;pt<ct.length;pt++)dt[pt]=at[ht+pt]%ct[pt]}static calc(at,ct,dt,ht,pt){const ft=rt.calcShape(at.dims,ct.dims);if(ft){if(ht&&!_.areEqual(ft,at.dims))return;const mt=_.size(ft),xt=ht?at:new _e.Tensor(ft,pt||at.type);if(ft.length===0)xt.set([],dt(at.get([]),ct.get([])));else{const gt=new Array(ft.length),Et=new Array(at.dims.length),St=new Array(ct.dims.length);let Pt,Mt=0,Rt=0,Dt=!1,Tt=!1;at.dims.length===0&&(Mt=at.get([]),Dt=!0),ct.dims.length===0&&(Rt=ct.get([]),Tt=!0);for(let It=0;It<mt;It++){Pt=It;for(let Vt=ft.length-1;Vt>=0;Vt--)gt[Vt]=Pt%ft[Vt],Pt=Math.floor(Pt/ft[Vt]);Dt||(rt.fillIndex(gt,at.dims,Et),Mt=at.get(Et)),Tt||(rt.fillIndex(gt,ct.dims,St),Rt=ct.get(St)),xt.set(gt,dt(Mt,Rt))}}return xt}}static isValidBroadcast(at,ct){const dt=at.length,ht=ct.length;if(dt>ht)return!1;for(let pt=1;pt<=dt;pt++)if(at[dt-pt]!==1&&at[dt-pt]!==ct[ht-pt])return!1;return!0}static getBroadcastDims(at,ct){const dt=at.length,ht=[];for(let pt=0;pt<dt;pt++){const ft=dt-1-pt,mt=at[ft]||1;(ct[ct.length-1-pt]||1)>1&&mt===1&&ht.unshift(ft)}return ht}}e.BroadcastUtil=rt,e.arrayCopyHelper=function(lt,at,ct,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(ct<0||ct>=lt.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(ct+ht>lt.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)lt[ct+pt]=at[dt+pt]},e.GemmUtil=class{static getShapeOfGemmResult(lt,at,ct,dt,ht){if(lt.length!==2||ct.length!==2)throw new Error("shape need to be of size 2");let pt,ft,mt;at?(pt=lt[1],ft=lt[0]):(pt=lt[0],ft=lt[1]);let xt=-1;if(dt?(mt=ct[0],xt=1):(mt=ct[1],xt=0),ct[xt]!==ft)throw new Error("dimension mismatch");if(pt<=0||mt<=0||ft<=0)throw new Error("invalid shape specified");if(ht&&!rt.isValidBroadcast(ht,[pt,mt]))throw new Error("gemm: invalid bias shape for broadcast");return[pt,mt,ft]}};class st{static tensorDataTypeFromProto(at){switch(at){case b.onnx.TensorProto.DataType.INT8:return"int8";case b.onnx.TensorProto.DataType.UINT8:return"uint8";case b.onnx.TensorProto.DataType.BOOL:return"bool";case b.onnx.TensorProto.DataType.INT16:return"int16";case b.onnx.TensorProto.DataType.UINT16:return"uint16";case b.onnx.TensorProto.DataType.INT32:return"int32";case b.onnx.TensorProto.DataType.UINT32:return"uint32";case b.onnx.TensorProto.DataType.FLOAT:return"float32";case b.onnx.TensorProto.DataType.DOUBLE:return"float64";case b.onnx.TensorProto.DataType.STRING:return"string";case b.onnx.TensorProto.DataType.INT64:return"int32";case b.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${b.onnx.TensorProto.DataType[at]}`)}}static tensorDataTypeStringToEnum(at){switch(at){case"int8":return b.onnx.TensorProto.DataType.INT8;case"uint8":return b.onnx.TensorProto.DataType.UINT8;case"bool":return b.onnx.TensorProto.DataType.BOOL;case"int16":return b.onnx.TensorProto.DataType.INT16;case"uint16":return b.onnx.TensorProto.DataType.UINT16;case"int32":return b.onnx.TensorProto.DataType.INT32;case"uint32":return b.onnx.TensorProto.DataType.UINT32;case"float32":return b.onnx.TensorProto.DataType.FLOAT;case"float64":return b.onnx.TensorProto.DataType.DOUBLE;case"string":return b.onnx.TensorProto.DataType.STRING;case"int64":return b.onnx.TensorProto.DataType.INT64;case"uint64":return b.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${at}`)}}static tensorDimsFromProto(at){return at.map(ct=>g.default.isLong(ct)?ct.toNumber():ct)}static tensorValueTypeFromProto(at){return{tensorType:st.tensorDataTypeFromProto(at.elemType),shape:{dims:st.tensorDimsFromProto(at.shape.dim.map(ct=>ct.dimValue))}}}static tensorDimsFromORTFormat(at){const ct=[];for(let dt=0;dt<at.dimsLength();dt++)ct.push($.longToNumber(at.dims(dt)));return ct}static tensorAttributesFromORTFormat(at){const ct=[];for(let dt=0;dt<at.attributesLength();dt++)ct.push(at.attributes(dt));return ct}}e.ProtoUtil=st;class ${static longToNumber(at,ct){return g.default.isLong(at)?at.toNumber():at instanceof h.flatbuffers.Long?g.default.fromValue({low:at.low,high:at.high,unsigned:ct!=null&&ct}).toNumber():at}static isLong(at){return g.default.isLong(at)||at instanceof h.flatbuffers.Long}}e.LongUtil=$;class _{static size(at){return _.getSizeFromDimensionRange(at,0,at.length)}static sizeFromDimension(at,ct){if(ct<0||ct>at.length)throw new Error(`invalid dimension of ${ct} for sizeFromDimension as Tensor has ${at.length} dimensions.`);return _.getSizeFromDimensionRange(at,ct,at.length)}static sizeToDimension(at,ct){if(ct<0||ct>at.length)throw new Error(`invalid dimension of ${ct} for sizeToDimension as Tensor has ${at.length} dimensions.`);return _.getSizeFromDimensionRange(at,0,ct)}static getSizeFromDimensionRange(at,ct,dt){let ht=1;for(let pt=ct;pt<dt;pt++){if(at[pt]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");ht*=at[pt]}return ht}static computeStrides(at){const ct=at.length;if(ct===0)return[];if(ct===1)return[1];const dt=new Array(ct);dt[ct-1]=1,dt[ct-2]=at[ct-1];for(let ht=ct-3;ht>=0;--ht)dt[ht]=dt[ht+1]*at[ht+1];return dt}static transpose(at){return at.slice().reverse()}static indicesToOffset(at,ct,dt){dt===void 0&&(dt=at.length);let ht=0;for(let pt=0;pt<dt;++pt)ht+=ct[pt]*at[pt];return ht}static offsetToIndices(at,ct){const dt=ct.length;if(dt===0)return[];if(dt===1)return[at*ct[0]];const ht=new Array(ct.length);for(let pt=0;pt<ht.length-1;++pt)ht[pt]=Math.floor(at/ct[pt]),at-=ht[pt]*ct[pt];return ht[ht.length-1]=at,ht}static normalizeAxis(at,ct){if(at<-ct&&at>=ct)throw new Error("unsupported axis for this operation.");return at<0?at+ct:at}static normalizeAxes(at,ct){return at.map(dt=>this.normalizeAxis(dt,ct))}static incrementIndex(at,ct,dt){if(ct.length===0||at.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(dt===void 0)dt=ct.length;else if(dt<=0||dt>ct.length)throw new Error("Incorrect axis to increment on");for(let ht=dt-1;ht>=0&&(at[ht]++,!(at[ht]<ct[ht]));--ht)at[ht]=0}static calculateReshapedDims(at,ct){if(ct.length===0){if(at.length===0||_.size(at)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const dt=ct.length,ht=new Array(dt);let pt=-1,ft=1;for(let xt=0;xt<dt;xt++){if(ct[xt]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(ct[xt]===-1){if(pt!==-1)throw new Error("at most one dimension in shape hints can be -1");pt=xt}else{if(ct[xt]===0){if(xt>=at.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");ht[xt]=at[xt]}else ht[xt]=ct[xt];ft*=ht[xt]}}const mt=_.size(at);if(pt!==-1){if(mt%ft!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${at}] Output shape: [${ct}]`);ht[pt]=mt/ft}else if(ft!==mt)throw new Error("reshapedDims and originalDims don't have matching sizes");return ht}static sortBasedOnPerm(at,ct){return ct?ct.map(dt=>at[dt]):at.slice().reverse()}static padShape(at,ct){const dt=at.length;return at.map((ht,pt)=>ht+ct[pt]+ct[pt+dt])}static areEqual(at,ct){return at.length===ct.length&&at.every((dt,ht)=>dt===ct[ht])}static validateDimsAndCalcSize(at){if(at.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let ct=1;for(const dt of at){if(!Number.isInteger(dt))throw new TypeError(`Invalid shape: ${dt} is not an integer`);if(dt<0||dt>2147483647)throw new TypeError(`Invalid shape: length ${dt} is not allowed`);ct*=dt}return ct}static flattenShape(at,ct){ct<0&&(ct+=at.length);const dt=at.reduce((pt,ft)=>pt*ft,1),ht=at.slice(ct).reduce((pt,ft)=>pt*ft,1);return[dt/ht,ht]}static squeezeShape(at,ct){const dt=new Array;ct=_.normalizeAxes(ct,at.length);for(let ht=0;ht<at.length;ht++){const pt=ct.indexOf(ht)>=0;if(pt&&at[ht]!==1)throw new Error("squeeze an axis of size different than 1");(ct.length===0&&at[ht]>1||ct.length>0&&!pt)&&dt.push(at[ht])}return dt}static unsqueezeShape(at,ct){const dt=new Array(at.length+ct.length);dt.fill(0);for(let pt=0;pt<ct.length;pt++){const ft=_.normalizeAxis(ct[pt],dt.length);if(ft>=dt.length)throw new Error("'axes' has an out of range axis");if(dt[ft]!==0)throw new Error("'axes' has a duplicate axis");dt[ft]=1}let ht=0;for(let pt=0;pt<dt.length;pt++)dt[pt]===0&&(dt[pt]=at[ht++]);if(ht!==at.length)throw new Error("the unsqueezed dimension could not be established");return dt}}e.ShapeUtil=_,e.MathUtil=class{static sqr(lt,at,ct,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(ct<0||ct>=lt.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(ct+ht>lt.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)lt[ct+pt]+=Math.pow(at[dt+pt],2)}static axpy(lt,at,ct,dt,ht,pt){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(ct<0||ct>=lt.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(ct+ht>lt.length)throw new Error("target array is too small to hold result");for(let ft=0;ft<ht;ft++)lt[ct+ft]+=pt*at[dt+ft]}static powx(lt,at,ct,dt,ht,pt){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(ct<0||ct>=lt.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(ct+ht>lt.length)throw new Error("target array is too small to hold result");for(let ft=0;ft<ht;ft++)lt[ct+ft]=Math.pow(at[dt+ft],pt)}static mul(lt,at,ct,dt,ht){if(dt<0||dt>=at.length)throw new Error("sourceIndex out of bounds");if(ct<0||ct>=lt.length)throw new Error("targetIndex out of bounds");if(dt+ht>at.length)throw new Error("source indices to be copied are outside bounds");if(ct+ht>lt.length)throw new Error("target array is too small to hold result");for(let pt=0;pt<ht;pt++)lt[ct+pt]=at[dt+pt]*lt[ct+pt]}};class nt{static splitShape(at,ct,dt,ht){if(dt.length===0){if(!ht)throw new Error("need to know number of outputs when the 'split' attribute is not specified");nt.determineSplit(at[ct],ht,dt)}const pt=[],ft=[0];for(let mt=0;mt<dt.length;++mt){mt!==0&&ft.push(ft[mt-1]+dt[mt-1]);const xt=at.slice();xt[ct]=dt[mt],pt.push(xt)}return[pt,ft]}static determineSplit(at,ct,dt){if(at%ct!=0)throw new Error("cannot split tensor to equal sized parts");for(let ht=0;ht<ct;++ht)dt.push(at/ct)}}e.SplitUtil=nt;class it{static calcReduce(at,ct,dt,ht,pt){const ft=at.dims.slice(0);ct.length===0&&ft.forEach((Mt,Rt)=>ct.push(Rt));const mt=it.calcReduceShape(ft,ct,!0),xt=_.size(mt),gt=new _e.Tensor(mt,at.type),Et=_.computeStrides(mt),St=_.computeStrides(ft),Pt=new Array(ft.length);for(let Mt=0;Mt<xt;Mt++){const Rt=_.offsetToIndices(Mt,Et);rt.fillIndex(Rt,ft,Pt),gt.set(Rt,it.calcReduceByAxis(at.numberData,ct,ft,0,_.indicesToOffset(Pt,St),ht,pt))}return dt?gt:new _e.Tensor(it.calcReduceShape(ft,ct,dt),gt.type,void 0,void 0,gt.data,gt.dataId)}static calcReduceByAxis(at,ct,dt,ht,pt,ft,mt){let xt=0;if(ht>=ct.length)return ft(at[pt]);const gt=ct[ht],Et=gt>=dt.length?1:_.size(dt.slice(gt+1));for(let St=0;St<dt[gt];St++)xt=St===0?it.calcReduceByAxis(at,ct,dt,ht+1,pt,ft,mt):mt(xt,it.calcReduceByAxis(at,ct,dt,ht+1,pt,ft,mt)),pt+=Et;return xt}static calcReduceShape(at,ct,dt){const ht=at.slice();for(let pt=0;pt<ct.length;pt++)ht[ct[pt]]=dt?1:0;return ht.filter(pt=>pt!==0)}}e.ReduceUtil=it;class ot{static adjustPoolAttributes(at,ct,dt,ht,pt,ft){if(!at&&dt.length!==ct.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(at)for(let mt=0;mt<ct.length-2;mt++)mt>=dt.length?dt.push(ct[mt+2]):dt[mt]=ct[mt+2];for(let mt=0;mt<dt.length;mt++)if(mt<ht.length){if(ht[mt]<0)throw new Error("strides should be greater than or equal to 1")}else ht.push(1);for(let mt=0;mt<dt.length;mt++)if(mt<pt.length){if(pt[mt]<0)throw new Error("dilations should be greater than or equal to 1")}else pt.push(1);for(let mt=0;mt<2*dt.length;mt++)if(mt<ft.length){if(ft[mt]<0)throw new Error("pad should be greater than or equal to 1")}else ft.push(0);for(let mt=0;mt<dt.length;mt++){if(dt[mt]<=0)throw new Error("kernel shapes need to be greater than 0");if(ft[mt]>=dt[mt]||ft[mt+dt.length]>=dt[mt])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(at,ct,dt,ht,pt,ft){if(ft){if(pt.length!==2*(at.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(ct.length!==at.length-2)throw new Error("length of strides should be the length of data dimensions");if(ht.length!==at.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let mt=0;mt<at.length-2;mt++)ot.adjustPadAndReturnShape(at[mt+2],ct[mt],dt[mt],ht[mt],pt,mt,mt+at.length-2,ft)}}static computePoolOutputShape(at,ct,dt,ht,pt,ft,mt){if(ct.length<=0)throw new Error("input shape must be of size greater than 0");const xt=[ct[0],ct[1]];return ot.computeShapeHelper(at,ct,xt,dt,ht,pt,ft,mt),xt}static computeConvOutputShape(at,ct,dt,ht,pt,ft,mt){if(at.length<=0||ct.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const xt=[at[0],ct[0]];return ot.computeShapeHelper(!1,at,xt,dt,ht,pt,ft,mt),xt}static computeShapeHelper(at,ct,dt,ht,pt,ft,mt,xt){if(at)for(let gt=0;gt<ct.length-2;gt++)dt.push(1);else for(let gt=0;gt<ct.length-2;gt++)dt.push(ot.adjustPadAndReturnShape(ct[gt+2],ht[gt],pt[gt],ft[gt],mt,gt,gt+ct.length-2,xt))}static adjustPadAndReturnShape(at,ct,dt,ht,pt,ft,mt,xt){const gt=dt*(ht-1)+1;if(!xt||xt==="NOTSET")return Math.floor((at+pt[ft]+pt[mt]-gt)/ct+1);switch(xt){case"VALID":return pt[ft]=0,pt[mt]=0,Math.floor((at-gt)/ct+1);case"SAME_LOWER":case"SAME_UPPER":if(dt!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const Et=((at+ct-1)/ct-1)*ct+ht-at;return pt[ft]=Math.floor(xt==="SAME_LOWER"?(Et+1)/2:Et/2),pt[mt]=Et-pt[ft],Math.floor((at+Et-ht)/ct+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=ot,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(lt){return new TextDecoder().decode(lt)}},7967:(a,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(c,d,h,g)=>{if(typeof c=="object"&&c!==null){if(h.has(c))throw new Error("Circular reference in options");h.add(c)}Object.entries(c).forEach(([b,_e])=>{const et=d?d+b:b;if(typeof _e=="object")(0,e.iterateExtraOptions)(_e,et+".",h,g);else if(typeof _e=="string"||typeof _e=="number")g(et,_e.toString());else{if(typeof _e!="boolean")throw new Error("Can't handle extra config type: "+typeof _e);g(et,_e?"1":"0")}})}},2157:function(a,e,c){var d,h=this&&this.__createBinding||(Object.create?function(Et,St,Pt,Mt){Mt===void 0&&(Mt=Pt);var Rt=Object.getOwnPropertyDescriptor(St,Pt);Rt&&!("get"in Rt?!St.__esModule:Rt.writable||Rt.configurable)||(Rt={enumerable:!0,get:function(){return St[Pt]}}),Object.defineProperty(Et,Mt,Rt)}:function(Et,St,Pt,Mt){Mt===void 0&&(Mt=Pt),Et[Mt]=St[Pt]}),g=this&&this.__setModuleDefault||(Object.create?function(Et,St){Object.defineProperty(Et,"default",{enumerable:!0,value:St})}:function(Et,St){Et.default=St}),b=this&&this.__importStar||function(Et){if(Et&&Et.__esModule)return Et;var St={};if(Et!=null)for(var Pt in Et)Pt!=="default"&&Object.prototype.hasOwnProperty.call(Et,Pt)&&h(St,Et,Pt);return g(St,Et),St};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const _e=c(1670),et=b(c(349)),rt=c(6361),st=()=>!!_e.env.wasm.proxy&&typeof document<"u";let $,_,nt,it=!1,ot=!1,lt=!1;const at=[],ct=[],dt=[],ht=[],pt=[],ft=[],mt=()=>{if(it||!ot||lt||!$)throw new Error("worker not ready")},xt=Et=>{switch(Et.data.type){case"init-wasm":it=!1,Et.data.err?(lt=!0,_[1](Et.data.err)):(ot=!0,_[0]());break;case"init-ort":Et.data.err?nt[1](Et.data.err):nt[0]();break;case"create_allocate":Et.data.err?at.shift()[1](Et.data.err):at.shift()[0](Et.data.out);break;case"create_finalize":Et.data.err?ct.shift()[1](Et.data.err):ct.shift()[0](Et.data.out);break;case"create":Et.data.err?dt.shift()[1](Et.data.err):dt.shift()[0](Et.data.out);break;case"release":Et.data.err?ht.shift()[1](Et.data.err):ht.shift()[0]();break;case"run":Et.data.err?pt.shift()[1](Et.data.err):pt.shift()[0](Et.data.out);break;case"end-profiling":Et.data.err?ft.shift()[1](Et.data.err):ft.shift()[0]()}},gt=typeof document<"u"?(d=document==null?void 0:document.currentScript)===null||d===void 0?void 0:d.src:void 0;e.initWasm=async()=>{if(st()){if(ot)return;if(it)throw new Error("multiple calls to 'initWasm()' detected.");if(lt)throw new Error("previous call to 'initWasm()' failed.");return it=!0,_e.env.wasm.wasmPaths===void 0&&gt&&gt.indexOf("blob:")!==0&&(_e.env.wasm.wasmPaths=gt.substr(0,+gt.lastIndexOf("/")+1)),new Promise((Et,St)=>{$==null||$.terminate(),$=c(9710).Z(),$.onmessage=xt,_=[Et,St];const Pt={type:"init-wasm",in:_e.env.wasm};$.postMessage(Pt)})}return(0,rt.initializeWebAssembly)(_e.env.wasm)},e.initOrt=async(Et,St)=>{if(st())return mt(),new Promise((Pt,Mt)=>{nt=[Pt,Mt];const Rt={type:"init-ort",in:{numThreads:Et,loggingLevel:St}};$.postMessage(Rt)});et.initOrt(Et,St)},e.createSessionAllocate=async Et=>st()?(mt(),new Promise((St,Pt)=>{at.push([St,Pt]);const Mt={type:"create_allocate",in:{model:Et}};$.postMessage(Mt,[Et.buffer])})):et.createSessionAllocate(Et),e.createSessionFinalize=async(Et,St)=>st()?(mt(),new Promise((Pt,Mt)=>{ct.push([Pt,Mt]);const Rt={type:"create_finalize",in:{modeldata:Et,options:St}};$.postMessage(Rt)})):et.createSessionFinalize(Et,St),e.createSession=async(Et,St)=>st()?(mt(),new Promise((Pt,Mt)=>{dt.push([Pt,Mt]);const Rt={type:"create",in:{model:Et,options:St}};$.postMessage(Rt,[Et.buffer])})):et.createSession(Et,St),e.releaseSession=async Et=>{if(st())return mt(),new Promise((St,Pt)=>{ht.push([St,Pt]);const Mt={type:"release",in:Et};$.postMessage(Mt)});et.releaseSession(Et)},e.run=async(Et,St,Pt,Mt,Rt)=>st()?(mt(),new Promise((Dt,Tt)=>{pt.push([Dt,Tt]);const It={type:"run",in:{sessionId:Et,inputIndices:St,inputs:Pt,outputIndices:Mt,options:Rt}};$.postMessage(It,et.extractTransferableBuffers(Pt))})):et.run(Et,St,Pt,Mt,Rt),e.endProfiling=async Et=>{if(st())return mt(),new Promise((St,Pt)=>{ft.push([St,Pt]);const Mt={type:"end-profiling",in:Et};$.postMessage(Mt)});et.endProfiling(Et)}},586:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const d=c(7967),h=c(4983),g=c(6361);e.setRunOptions=b=>{const _e=(0,g.getInstance)();let et=0;const rt=[],st=b||{};try{if((b==null?void 0:b.logSeverityLevel)===void 0)st.logSeverityLevel=2;else if(typeof b.logSeverityLevel!="number"||!Number.isInteger(b.logSeverityLevel)||b.logSeverityLevel<0||b.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${b.logSeverityLevel}`);if((b==null?void 0:b.logVerbosityLevel)===void 0)st.logVerbosityLevel=0;else if(typeof b.logVerbosityLevel!="number"||!Number.isInteger(b.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${b.logVerbosityLevel}`);(b==null?void 0:b.terminate)===void 0&&(st.terminate=!1);let $=0;if((b==null?void 0:b.tag)!==void 0&&($=(0,h.allocWasmString)(b.tag,rt)),et=_e._OrtCreateRunOptions(st.logSeverityLevel,st.logVerbosityLevel,!!st.terminate,$),et===0)throw new Error("Can't create run options");return(b==null?void 0:b.extra)!==void 0&&(0,d.iterateExtraOptions)(b.extra,"",new WeakSet,(_,nt)=>{const it=(0,h.allocWasmString)(_,rt),ot=(0,h.allocWasmString)(nt,rt);if(_e._OrtAddRunConfigEntry(et,it,ot)!==0)throw new Error(`Can't set a run config entry: ${_} - ${nt}`)}),[et,rt]}catch($){throw et!==0&&_e._OrtReleaseRunOptions(et),rt.forEach(_e._free),$}}},2306:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const d=c(2806),h=c(1670),g=c(2850),b=c(2157);let _e;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(et){const rt=await fetch(et),st=await rt.arrayBuffer();return(0,b.createSessionAllocate)(new Uint8Array(st))}async loadModel(et,rt){if(_e||(await(0,b.initOrt)(h.env.wasm.numThreads,(st=>{switch(st){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${st}`)}})(h.env.logLevel)),_e=!0),typeof et=="string")if(typeof fetch>"u"){const st=await(0,g.promisify)(d.readFile)(et);[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSession)(st,rt)}else{const st=await this.createSessionAllocate(et);[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSessionFinalize)(st,rt)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,b.createSession)(et,rt)}async dispose(){return(0,b.releaseSession)(this.sessionId)}async run(et,rt,st){const $=[],_=[];Object.entries(et).forEach(lt=>{const at=lt[0],ct=lt[1],dt=this.inputNames.indexOf(at);if(dt===-1)throw new Error(`invalid input '${at}'`);$.push(ct),_.push(dt)});const nt=[];Object.entries(rt).forEach(lt=>{const at=lt[0],ct=this.outputNames.indexOf(at);if(ct===-1)throw new Error(`invalid output '${at}'`);nt.push(ct)});const it=await(0,b.run)(this.sessionId,_,$.map(lt=>[lt.type,lt.dims,lt.data]),nt,st),ot={};for(let lt=0;lt<it.length;lt++)ot[this.outputNames[nt[lt]]]=new h.Tensor(it[lt][0],it[lt][2],it[lt][1]);return ot}startProfiling(){}endProfiling(){(0,b.endProfiling)(this.sessionId)}}},4919:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const d=c(7967),h=c(4983),g=c(6361);e.setSessionOptions=b=>{const _e=(0,g.getInstance)();let et=0;const rt=[],st=b||{};($=>{$.extra||($.extra={}),$.extra.session||($.extra.session={});const _=$.extra.session;_.use_ort_model_bytes_directly||(_.use_ort_model_bytes_directly="1")})(st);try{(b==null?void 0:b.graphOptimizationLevel)===void 0&&(st.graphOptimizationLevel="all");const $=(it=>{switch(it){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${it}`)}})(st.graphOptimizationLevel);(b==null?void 0:b.enableCpuMemArena)===void 0&&(st.enableCpuMemArena=!0),(b==null?void 0:b.enableMemPattern)===void 0&&(st.enableMemPattern=!0),(b==null?void 0:b.executionMode)===void 0&&(st.executionMode="sequential");const _=(it=>{switch(it){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${it}`)}})(st.executionMode);let nt=0;if((b==null?void 0:b.logId)!==void 0&&(nt=(0,h.allocWasmString)(b.logId,rt)),(b==null?void 0:b.logSeverityLevel)===void 0)st.logSeverityLevel=2;else if(typeof b.logSeverityLevel!="number"||!Number.isInteger(b.logSeverityLevel)||b.logSeverityLevel<0||b.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${b.logSeverityLevel}`);if((b==null?void 0:b.logVerbosityLevel)===void 0)st.logVerbosityLevel=0;else if(typeof b.logVerbosityLevel!="number"||!Number.isInteger(b.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${b.logVerbosityLevel}`);if((b==null?void 0:b.enableProfiling)===void 0&&(st.enableProfiling=!1),et=_e._OrtCreateSessionOptions($,!!st.enableCpuMemArena,!!st.enableMemPattern,_,!!st.enableProfiling,0,nt,st.logSeverityLevel,st.logVerbosityLevel),et===0)throw new Error("Can't create session options");return b!=null&&b.executionProviders&&((it,ot,lt)=>{for(const at of ot){let ct=typeof at=="string"?at:at.name;switch(ct){case"xnnpack":ct="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${ct}`)}const dt=(0,h.allocWasmString)(ct,lt);if((0,g.getInstance)()._OrtAppendExecutionProvider(it,dt)!==0)throw new Error(`Can't append execution provider: ${ct}`)}})(et,b.executionProviders,rt),(b==null?void 0:b.extra)!==void 0&&(0,d.iterateExtraOptions)(b.extra,"",new WeakSet,(it,ot)=>{const lt=(0,h.allocWasmString)(it,rt),at=(0,h.allocWasmString)(ot,rt);if(_e._OrtAddSessionConfigEntry(et,lt,at)!==0)throw new Error(`Can't set a session config entry: ${it} - ${ot}`)}),[et,rt]}catch($){throw et!==0&&_e._OrtReleaseSessionOptions(et),rt.forEach(_e._free),$}}},4983:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const d=c(6361);e.allocWasmString=(h,g)=>{const b=(0,d.getInstance)(),_e=b.lengthBytesUTF8(h)+1,et=b._malloc(_e);return b.stringToUTF8(h,et,_e),g.push(et),et}},349:(a,e,c)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const d=c(586),h=c(4919),g=c(4983),b=c(6361);e.initOrt=($,_)=>{const nt=(0,b.getInstance)()._OrtInit($,_);if(nt!==0)throw new Error(`Can't initialize onnxruntime. error code = ${nt}`)};const _e=new Map;e.createSessionAllocate=$=>{const _=(0,b.getInstance)(),nt=_._malloc($.byteLength);return _.HEAPU8.set($,nt),[nt,$.byteLength]},e.createSessionFinalize=($,_)=>{const nt=(0,b.getInstance)();let it=0,ot=0,lt=[];try{if([ot,lt]=(0,h.setSessionOptions)(_),it=nt._OrtCreateSession($[0],$[1],ot),it===0)throw new Error("Can't create a session")}finally{nt._free($[0]),nt._OrtReleaseSessionOptions(ot),lt.forEach(nt._free)}const at=nt._OrtGetInputCount(it),ct=nt._OrtGetOutputCount(it),dt=[],ht=[],pt=[],ft=[];for(let mt=0;mt<at;mt++){const xt=nt._OrtGetInputName(it,mt);if(xt===0)throw new Error("Can't get an input name");ht.push(xt),dt.push(nt.UTF8ToString(xt))}for(let mt=0;mt<ct;mt++){const xt=nt._OrtGetOutputName(it,mt);if(xt===0)throw new Error("Can't get an output name");ft.push(xt),pt.push(nt.UTF8ToString(xt))}return _e.set(it,[it,ht,ft]),[it,dt,pt]},e.createSession=($,_)=>{const nt=(0,e.createSessionAllocate)($);return(0,e.createSessionFinalize)(nt,_)},e.releaseSession=$=>{const _=(0,b.getInstance)(),nt=_e.get($);if(!nt)throw new Error("invalid session id");const it=nt[0],ot=nt[1],lt=nt[2];ot.forEach(_._OrtFree),lt.forEach(_._OrtFree),_._OrtReleaseSession(it),_e.delete($)};const et=$=>{switch($){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${$}`)}},rt=$=>{switch($){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${$}`)}},st=$=>{switch($){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${$}`)}};e.run=($,_,nt,it,ot)=>{const lt=(0,b.getInstance)(),at=_e.get($);if(!at)throw new Error("invalid session id");const ct=at[0],dt=at[1],ht=at[2],pt=_.length,ft=it.length;let mt=0,xt=[];const gt=[],Et=[];try{[mt,xt]=(0,d.setRunOptions)(ot);for(let Tt=0;Tt<pt;Tt++){const It=nt[Tt][0],Vt=nt[Tt][1],Bt=nt[Tt][2];let Ct,en;if(Array.isArray(Bt)){en=4*Bt.length,Ct=lt._malloc(en),Et.push(Ct);let Ut=Ct/4;for(let Jt=0;Jt<Bt.length;Jt++){if(typeof Bt[Jt]!="string")throw new TypeError(`tensor data at index ${Jt} is not a string`);lt.HEAPU32[Ut++]=(0,g.allocWasmString)(Bt[Jt],Et)}}else en=Bt.byteLength,Ct=lt._malloc(en),Et.push(Ct),lt.HEAPU8.set(new Uint8Array(Bt.buffer,Bt.byteOffset,en),Ct);const sn=lt.stackSave(),kt=lt.stackAlloc(4*Vt.length);try{let Ut=kt/4;Vt.forEach(tn=>lt.HEAP32[Ut++]=tn);const Jt=lt._OrtCreateTensor(et(It),Ct,en,kt,Vt.length);if(Jt===0)throw new Error("Can't create a tensor");gt.push(Jt)}finally{lt.stackRestore(sn)}}const St=lt.stackSave(),Pt=lt.stackAlloc(4*pt),Mt=lt.stackAlloc(4*pt),Rt=lt.stackAlloc(4*ft),Dt=lt.stackAlloc(4*ft);try{let Tt=Pt/4,It=Mt/4,Vt=Rt/4,Bt=Dt/4;for(let sn=0;sn<pt;sn++)lt.HEAPU32[Tt++]=gt[sn],lt.HEAPU32[It++]=dt[_[sn]];for(let sn=0;sn<ft;sn++)lt.HEAPU32[Vt++]=0,lt.HEAPU32[Bt++]=ht[it[sn]];let Ct=lt._OrtRun(ct,Mt,Pt,pt,Dt,ft,Rt,mt);const en=[];if(Ct===0)for(let sn=0;sn<ft;sn++){const kt=lt.HEAPU32[Rt/4+sn],Ut=lt.stackSave(),Jt=lt.stackAlloc(16);let tn,Gt=0;try{if(Ct=lt._OrtGetTensorData(kt,Jt,Jt+4,Jt+8,Jt+12),Ct!==0)throw new Error(`Can't access output tensor data. error code = ${Ct}`);let hn=Jt/4;const fn=lt.HEAPU32[hn++];Gt=lt.HEAPU32[hn++];const gn=lt.HEAPU32[hn++],kn=lt.HEAPU32[hn++],On=[];for(let Sn=0;Sn<kn;Sn++)On.push(lt.HEAPU32[gn/4+Sn]);lt._OrtFree(gn);const un=On.length===0?1:On.reduce((Sn,Ln)=>Sn*Ln);if(tn=rt(fn),tn==="string"){const Sn=[];let Ln=Gt/4;for(let $n=0;$n<un;$n++){const Wn=lt.HEAPU32[Ln++],Pn=$n===un-1?void 0:lt.HEAPU32[Ln]-Wn;Sn.push(lt.UTF8ToString(Wn,Pn))}en.push([tn,On,Sn])}else{const Sn=new(st(tn))(un);new Uint8Array(Sn.buffer,Sn.byteOffset,Sn.byteLength).set(lt.HEAPU8.subarray(Gt,Gt+Sn.byteLength)),en.push([tn,On,Sn])}}finally{lt.stackRestore(Ut),tn==="string"&&Gt&&lt._free(Gt),lt._OrtReleaseTensor(kt)}}if(Ct===0)return en;throw new Error(`failed to call OrtRun(). error code = ${Ct}.`)}finally{lt.stackRestore(St)}}finally{gt.forEach(lt._OrtReleaseTensor),Et.forEach(lt._free),lt._OrtReleaseRunOptions(mt),xt.forEach(lt._free)}},e.endProfiling=$=>{const _=(0,b.getInstance)(),nt=_e.get($);if(!nt)throw new Error("invalid session id");const it=nt[0],ot=_._OrtEndProfiling(it);if(ot===0)throw new Error("Can't get an profile file name");_._OrtFree(ot)},e.extractTransferableBuffers=$=>{const _=[];for(const nt of $){const it=nt[2];!Array.isArray(it)&&it.buffer&&_.push(it.buffer)}return _}},6361:function(a,e,c){var d=this&&this.__createBinding||(Object.create?function(ot,lt,at,ct){ct===void 0&&(ct=at);var dt=Object.getOwnPropertyDescriptor(lt,at);dt&&!("get"in dt?!lt.__esModule:dt.writable||dt.configurable)||(dt={enumerable:!0,get:function(){return lt[at]}}),Object.defineProperty(ot,ct,dt)}:function(ot,lt,at,ct){ct===void 0&&(ct=at),ot[ct]=lt[at]}),h=this&&this.__setModuleDefault||(Object.create?function(ot,lt){Object.defineProperty(ot,"default",{enumerable:!0,value:lt})}:function(ot,lt){ot.default=lt}),g=this&&this.__importStar||function(ot){if(ot&&ot.__esModule)return ot;var lt={};if(ot!=null)for(var at in ot)at!=="default"&&Object.prototype.hasOwnProperty.call(ot,at)&&d(lt,ot,at);return h(lt,ot),lt},b=this&&this.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const _e=g(c(6449)),et=b(c(932)),rt=c(3474);let st,$=!1,_=!1,nt=!1;const it=(ot,lt)=>lt?ot?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":ot?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async ot=>{if($)return Promise.resolve();if(_)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(nt)throw new Error("previous call to 'initializeWebAssembly()' failed.");_=!0;const lt=ot.initTimeout,at=ot.numThreads,ct=ot.simd,dt=at>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),ht=ct&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),pt=typeof ot.wasmPaths=="string"?ot.wasmPaths:void 0,ft=it(!1,dt),mt=it(ht,dt),xt=typeof ot.wasmPaths=="object"?ot.wasmPaths[mt]:void 0;let gt=!1;const Et=[];if(lt>0&&Et.push(new Promise(St=>{setTimeout(()=>{gt=!0,St()},lt)})),Et.push(new Promise((St,Pt)=>{const Mt=dt?rt:et.default,Rt={locateFile:(Dt,Tt)=>dt&&Dt.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([c(4154)],{type:"text/javascript"})):Dt===ft?xt??(pt??Tt)+mt:Tt+Dt};if(dt)if(typeof Blob>"u")Rt.mainScriptUrlOrBlob=_e.join("/","ort-wasm-threaded.js");else{const Dt=`var ortWasmThreaded=(function(){var _scriptDir;return ${Mt.toString()}})();`;Rt.mainScriptUrlOrBlob=new Blob([Dt],{type:"text/javascript"})}Mt(Rt).then(Dt=>{_=!1,$=!0,st=Dt,St()},Dt=>{_=!1,nt=!0,Pt(Dt)})})),await Promise.race(Et),gt)throw new Error(`WebAssembly backend initializing failed due to timeout: ${lt}ms`)},e.getInstance=()=>{if($&&st)return st;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var ot;!$||_||nt||(_=!0,(ot=st.PThread)===null||ot===void 0||ot.terminateAllThreads(),st=void 0,_=!1,$=!1,nt=!0)}},9710:(a,e,c)=>{c.d(e,{Z:()=>g});var d=c(477),h=c.n(d);function g(){return h()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:a=>{a.exports=function(e,c,d,h){var g=self||window;try{try{var b;try{b=new g.Blob([e])}catch{(b=new(g.BlobBuilder||g.WebKitBlobBuilder||g.MozBlobBuilder||g.MSBlobBuilder)).append(e),b=b.getBlob()}var _e=g.URL||g.webkitURL,et=_e.createObjectURL(b),rt=new g[c](et,d);return _e.revokeObjectURL(et),rt}catch{return new g[c]("data:application/javascript,".concat(encodeURIComponent(e)),d)}}catch{if(!h)throw Error("Inline worker is not supported");return new g[c](h,d)}}},4154:a=>{a.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:a=>{a.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(a,e,c)=>{c.r(e),c.d(e,{flatbuffers:()=>d});var d={};d.Offset,d.Table,d.SIZEOF_SHORT=2,d.SIZEOF_INT=4,d.FILE_IDENTIFIER_LENGTH=4,d.SIZE_PREFIX_LENGTH=4,d.Encoding={UTF8_BYTES:1,UTF16_STRING:2},d.int32=new Int32Array(2),d.float32=new Float32Array(d.int32.buffer),d.float64=new Float64Array(d.int32.buffer),d.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,d.Long=function(h,g){this.low=0|h,this.high=0|g},d.Long.create=function(h,g){return h==0&&g==0?d.Long.ZERO:new d.Long(h,g)},d.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},d.Long.prototype.equals=function(h){return this.low==h.low&&this.high==h.high},d.Long.ZERO=new d.Long(0,0),d.Builder=function(h){if(h)g=h;else var g=1024;this.bb=d.ByteBuffer.allocate(g),this.space=g,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},d.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},d.Builder.prototype.forceDefaults=function(h){this.force_defaults=h},d.Builder.prototype.dataBuffer=function(){return this.bb},d.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},d.Builder.prototype.prep=function(h,g){h>this.minalign&&(this.minalign=h);for(var b=1+~(this.bb.capacity()-this.space+g)&h-1;this.space<b+h+g;){var _e=this.bb.capacity();this.bb=d.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-_e}this.pad(b)},d.Builder.prototype.pad=function(h){for(var g=0;g<h;g++)this.bb.writeInt8(--this.space,0)},d.Builder.prototype.writeInt8=function(h){this.bb.writeInt8(this.space-=1,h)},d.Builder.prototype.writeInt16=function(h){this.bb.writeInt16(this.space-=2,h)},d.Builder.prototype.writeInt32=function(h){this.bb.writeInt32(this.space-=4,h)},d.Builder.prototype.writeInt64=function(h){this.bb.writeInt64(this.space-=8,h)},d.Builder.prototype.writeFloat32=function(h){this.bb.writeFloat32(this.space-=4,h)},d.Builder.prototype.writeFloat64=function(h){this.bb.writeFloat64(this.space-=8,h)},d.Builder.prototype.addInt8=function(h){this.prep(1,0),this.writeInt8(h)},d.Builder.prototype.addInt16=function(h){this.prep(2,0),this.writeInt16(h)},d.Builder.prototype.addInt32=function(h){this.prep(4,0),this.writeInt32(h)},d.Builder.prototype.addInt64=function(h){this.prep(8,0),this.writeInt64(h)},d.Builder.prototype.addFloat32=function(h){this.prep(4,0),this.writeFloat32(h)},d.Builder.prototype.addFloat64=function(h){this.prep(8,0),this.writeFloat64(h)},d.Builder.prototype.addFieldInt8=function(h,g,b){(this.force_defaults||g!=b)&&(this.addInt8(g),this.slot(h))},d.Builder.prototype.addFieldInt16=function(h,g,b){(this.force_defaults||g!=b)&&(this.addInt16(g),this.slot(h))},d.Builder.prototype.addFieldInt32=function(h,g,b){(this.force_defaults||g!=b)&&(this.addInt32(g),this.slot(h))},d.Builder.prototype.addFieldInt64=function(h,g,b){!this.force_defaults&&g.equals(b)||(this.addInt64(g),this.slot(h))},d.Builder.prototype.addFieldFloat32=function(h,g,b){(this.force_defaults||g!=b)&&(this.addFloat32(g),this.slot(h))},d.Builder.prototype.addFieldFloat64=function(h,g,b){(this.force_defaults||g!=b)&&(this.addFloat64(g),this.slot(h))},d.Builder.prototype.addFieldOffset=function(h,g,b){(this.force_defaults||g!=b)&&(this.addOffset(g),this.slot(h))},d.Builder.prototype.addFieldStruct=function(h,g,b){g!=b&&(this.nested(g),this.slot(h))},d.Builder.prototype.nested=function(h){if(h!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},d.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},d.Builder.prototype.slot=function(h){this.vtable[h]=this.offset()},d.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},d.Builder.growByteBuffer=function(h){var g=h.capacity();if(3221225472&g)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var b=g<<1,_e=d.ByteBuffer.allocate(b);return _e.setPosition(b-g),_e.bytes().set(h.bytes(),b-g),_e},d.Builder.prototype.addOffset=function(h){this.prep(d.SIZEOF_INT,0),this.writeInt32(this.offset()-h+d.SIZEOF_INT)},d.Builder.prototype.startObject=function(h){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=h;for(var g=0;g<h;g++)this.vtable[g]=0;this.isNested=!0,this.object_start=this.offset()},d.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var h=this.offset(),g=this.vtable_in_use-1;g>=0&&this.vtable[g]==0;g--);for(var b=g+1;g>=0;g--)this.addInt16(this.vtable[g]!=0?h-this.vtable[g]:0);this.addInt16(h-this.object_start);var _e=(b+2)*d.SIZEOF_SHORT;this.addInt16(_e);var et=0,rt=this.space;e:for(g=0;g<this.vtables.length;g++){var st=this.bb.capacity()-this.vtables[g];if(_e==this.bb.readInt16(st)){for(var $=d.SIZEOF_SHORT;$<_e;$+=d.SIZEOF_SHORT)if(this.bb.readInt16(rt+$)!=this.bb.readInt16(st+$))continue e;et=this.vtables[g];break}}return et?(this.space=this.bb.capacity()-h,this.bb.writeInt32(this.space,et-h)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-h,this.offset()-h)),this.isNested=!1,h},d.Builder.prototype.finish=function(h,g,b){var _e=b?d.SIZE_PREFIX_LENGTH:0;if(g){var et=g;if(this.prep(this.minalign,d.SIZEOF_INT+d.FILE_IDENTIFIER_LENGTH+_e),et.length!=d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+d.FILE_IDENTIFIER_LENGTH);for(var rt=d.FILE_IDENTIFIER_LENGTH-1;rt>=0;rt--)this.writeInt8(et.charCodeAt(rt))}this.prep(this.minalign,d.SIZEOF_INT+_e),this.addOffset(h),_e&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},d.Builder.prototype.finishSizePrefixed=function(h,g){this.finish(h,g,!0)},d.Builder.prototype.requiredField=function(h,g){var b=this.bb.capacity()-h,_e=b-this.bb.readInt32(b);if(this.bb.readInt16(_e+g)==0)throw new Error("FlatBuffers: field "+g+" must be set")},d.Builder.prototype.startVector=function(h,g,b){this.notNested(),this.vector_num_elems=g,this.prep(d.SIZEOF_INT,h*g),this.prep(b,h*g)},d.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},d.Builder.prototype.createString=function(h){if(h instanceof Uint8Array)var g=h;else{g=[];for(var b=0;b<h.length;){var _e,et=h.charCodeAt(b++);(_e=et<55296||et>=56320?et:(et<<10)+h.charCodeAt(b++)+-56613888)<128?g.push(_e):(_e<2048?g.push(_e>>6&31|192):(_e<65536?g.push(_e>>12&15|224):g.push(_e>>18&7|240,_e>>12&63|128),g.push(_e>>6&63|128)),g.push(63&_e|128))}}this.addInt8(0),this.startVector(1,g.length,1),this.bb.setPosition(this.space-=g.length),b=0;for(var rt=this.space,st=this.bb.bytes();b<g.length;b++)st[rt++]=g[b];return this.endVector()},d.Builder.prototype.createLong=function(h,g){return d.Long.create(h,g)},d.ByteBuffer=function(h){this.bytes_=h,this.position_=0},d.ByteBuffer.allocate=function(h){return new d.ByteBuffer(new Uint8Array(h))},d.ByteBuffer.prototype.clear=function(){this.position_=0},d.ByteBuffer.prototype.bytes=function(){return this.bytes_},d.ByteBuffer.prototype.position=function(){return this.position_},d.ByteBuffer.prototype.setPosition=function(h){this.position_=h},d.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},d.ByteBuffer.prototype.readInt8=function(h){return this.readUint8(h)<<24>>24},d.ByteBuffer.prototype.readUint8=function(h){return this.bytes_[h]},d.ByteBuffer.prototype.readInt16=function(h){return this.readUint16(h)<<16>>16},d.ByteBuffer.prototype.readUint16=function(h){return this.bytes_[h]|this.bytes_[h+1]<<8},d.ByteBuffer.prototype.readInt32=function(h){return this.bytes_[h]|this.bytes_[h+1]<<8|this.bytes_[h+2]<<16|this.bytes_[h+3]<<24},d.ByteBuffer.prototype.readUint32=function(h){return this.readInt32(h)>>>0},d.ByteBuffer.prototype.readInt64=function(h){return new d.Long(this.readInt32(h),this.readInt32(h+4))},d.ByteBuffer.prototype.readUint64=function(h){return new d.Long(this.readUint32(h),this.readUint32(h+4))},d.ByteBuffer.prototype.readFloat32=function(h){return d.int32[0]=this.readInt32(h),d.float32[0]},d.ByteBuffer.prototype.readFloat64=function(h){return d.int32[d.isLittleEndian?0:1]=this.readInt32(h),d.int32[d.isLittleEndian?1:0]=this.readInt32(h+4),d.float64[0]},d.ByteBuffer.prototype.writeInt8=function(h,g){this.bytes_[h]=g},d.ByteBuffer.prototype.writeUint8=function(h,g){this.bytes_[h]=g},d.ByteBuffer.prototype.writeInt16=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8},d.ByteBuffer.prototype.writeUint16=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8},d.ByteBuffer.prototype.writeInt32=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8,this.bytes_[h+2]=g>>16,this.bytes_[h+3]=g>>24},d.ByteBuffer.prototype.writeUint32=function(h,g){this.bytes_[h]=g,this.bytes_[h+1]=g>>8,this.bytes_[h+2]=g>>16,this.bytes_[h+3]=g>>24},d.ByteBuffer.prototype.writeInt64=function(h,g){this.writeInt32(h,g.low),this.writeInt32(h+4,g.high)},d.ByteBuffer.prototype.writeUint64=function(h,g){this.writeUint32(h,g.low),this.writeUint32(h+4,g.high)},d.ByteBuffer.prototype.writeFloat32=function(h,g){d.float32[0]=g,this.writeInt32(h,d.int32[0])},d.ByteBuffer.prototype.writeFloat64=function(h,g){d.float64[0]=g,this.writeInt32(h,d.int32[d.isLittleEndian?0:1]),this.writeInt32(h+4,d.int32[d.isLittleEndian?1:0])},d.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+d.SIZEOF_INT+d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var h="",g=0;g<d.FILE_IDENTIFIER_LENGTH;g++)h+=String.fromCharCode(this.readInt8(this.position_+d.SIZEOF_INT+g));return h},d.ByteBuffer.prototype.__offset=function(h,g){var b=h-this.readInt32(h);return g<this.readInt16(b)?this.readInt16(b+g):0},d.ByteBuffer.prototype.__union=function(h,g){return h.bb_pos=g+this.readInt32(g),h.bb=this,h},d.ByteBuffer.prototype.__string=function(h,g){h+=this.readInt32(h);var b=this.readInt32(h),_e="",et=0;if(h+=d.SIZEOF_INT,g===d.Encoding.UTF8_BYTES)return this.bytes_.subarray(h,h+b);for(;et<b;){var rt,st=this.readUint8(h+et++);if(st<192)rt=st;else{var $=this.readUint8(h+et++);if(st<224)rt=(31&st)<<6|63&$;else{var _=this.readUint8(h+et++);rt=st<240?(15&st)<<12|(63&$)<<6|63&_:(7&st)<<18|(63&$)<<12|(63&_)<<6|63&this.readUint8(h+et++)}}rt<65536?_e+=String.fromCharCode(rt):(rt-=65536,_e+=String.fromCharCode(55296+(rt>>10),56320+(1023&rt)))}return _e},d.ByteBuffer.prototype.__indirect=function(h){return h+this.readInt32(h)},d.ByteBuffer.prototype.__vector=function(h){return h+this.readInt32(h)+d.SIZEOF_INT},d.ByteBuffer.prototype.__vector_len=function(h){return this.readInt32(h+this.readInt32(h))},d.ByteBuffer.prototype.__has_identifier=function(h){if(h.length!=d.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+d.FILE_IDENTIFIER_LENGTH);for(var g=0;g<d.FILE_IDENTIFIER_LENGTH;g++)if(h.charCodeAt(g)!=this.readInt8(this.position_+d.SIZEOF_INT+g))return!1;return!0},d.ByteBuffer.prototype.createLong=function(h,g){return d.Long.create(h,g)}}},__webpack_module_cache__={};function __webpack_require__(a){var e=__webpack_module_cache__[a];if(e!==void 0)return e.exports;var c=__webpack_module_cache__[a]={exports:{}};return __webpack_modules__[a].call(c.exports,c,c.exports,__webpack_require__),c.exports}__webpack_require__.n=a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(a,e)=>{for(var c in e)__webpack_require__.o(e,c)&&!__webpack_require__.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:e[c]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),__webpack_require__.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())})(ortWeb_min);var ortWeb_minExports=ortWeb_min.exports,models={},common={};Object.defineProperty(common,"__esModule",{value:!0});var legacy={},_a$1;Object.defineProperty(legacy,"__esModule",{value:!0});legacy.SileroLegacy=void 0;const logging_1$2=logging;class SileroLegacy{constructor(e,c,d,h,g){this.ortInstance=e,this._session=c,this._h=d,this._c=h,this._sr=g,this.reset_state=()=>{const b=Array(128).fill(0);this._h=new this.ortInstance.Tensor("float32",b,[2,1,64]),this._c=new this.ortInstance.Tensor("float32",b,[2,1,64])},this.process=async b=>{var _;const et={input:new this.ortInstance.Tensor("float32",b,[1,b.length]),h:this._h,c:this._c,sr:this._sr},rt=await this._session.run(et);this._h=rt.hn,this._c=rt.cn;const[st]=(_=rt.output)==null?void 0:_.data;return{notSpeech:1-st,isSpeech:st}}}}legacy.SileroLegacy=SileroLegacy;_a$1=SileroLegacy;SileroLegacy.new=async(a,e)=>{logging_1$2.log.debug("initializing vad");const c=await e(),d=await a.InferenceSession.create(c),h=new a.Tensor("int64",[16000n]),g=Array(2*64).fill(0),b=new a.Tensor("float32",g,[2,1,64]),_e=new a.Tensor("float32",g,[2,1,64]);return logging_1$2.log.debug("vad is initialized"),new _a$1(a,d,b,_e,h)};var v5={},_a;Object.defineProperty(v5,"__esModule",{value:!0});v5.SileroV5=void 0;const logging_1$1=logging;function getNewState(a){const e=Array(256).fill(0);return new a.Tensor("float32",e,[2,1,128])}class SileroV5{constructor(e,c,d,h){this._session=e,this._state=c,this._sr=d,this.ortInstance=h,this.reset_state=()=>{this._state=getNewState(this.ortInstance)},this.process=async g=>{var $;const _e={input:new this.ortInstance.Tensor("float32",g,[1,g.length]),state:this._state,sr:this._sr},et=await this._session.run(_e);this._state=et.stateN;const[rt]=($=et.output)==null?void 0:$.data;return{notSpeech:1-rt,isSpeech:rt}}}}v5.SileroV5=SileroV5;_a=SileroV5;SileroV5.new=async(a,e)=>{logging_1$1.log.debug("Loading VAD...");const c=await e(),d=await a.InferenceSession.create(c),h=new a.Tensor("int64",[16000n]),g=getNewState(a);return logging_1$1.log.debug("...finished loading VAD"),new _a(d,g,h,a)};(function(a){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,b,_e,et){et===void 0&&(et=_e);var rt=Object.getOwnPropertyDescriptor(b,_e);(!rt||("get"in rt?!b.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return b[_e]}}),Object.defineProperty(g,et,rt)}:function(g,b,_e,et){et===void 0&&(et=_e),g[et]=b[_e]}),c=commonjsGlobal&&commonjsGlobal.__exportStar||function(g,b){for(var _e in g)_e!=="default"&&!Object.prototype.hasOwnProperty.call(b,_e)&&e(b,g,_e)};Object.defineProperty(a,"__esModule",{value:!0}),a.SileroV5=a.SileroLegacy=void 0,c(common,a);var d=legacy;Object.defineProperty(a,"SileroLegacy",{enumerable:!0,get:function(){return d.SileroLegacy}});var h=v5;Object.defineProperty(a,"SileroV5",{enumerable:!0,get:function(){return h.SileroV5}})})(models);var resampler={};Object.defineProperty(resampler,"__esModule",{value:!0});resampler.Resampler=void 0;const logging_1=logging;class Resampler{constructor(e){this.options=e,this.process=c=>{const d=[];for(const h of c)for(this.inputBuffer.push(h);this.hasEnoughDataForFrame();){const g=this.generateOutputFrame();d.push(g)}return d},e.nativeSampleRate<16e3&&logging_1.log.error("nativeSampleRate is too low. Should have 16000 = targetSampleRate <= nativeSampleRate"),this.inputBuffer=[]}async*stream(e){for(const c of e)for(this.inputBuffer.push(c);this.hasEnoughDataForFrame();)yield this.generateOutputFrame()}hasEnoughDataForFrame(){return this.inputBuffer.length*this.options.targetSampleRate/this.options.nativeSampleRate>=this.options.targetFrameSize}generateOutputFrame(){const e=new Float32Array(this.options.targetFrameSize);let c=0,d=0;for(;c<this.options.targetFrameSize;){let h=0,g=0;for(;d<Math.min(this.inputBuffer.length,(c+1)*this.options.nativeSampleRate/this.options.targetSampleRate);){const b=this.inputBuffer[d];b!==void 0&&(h+=b,g++),d++}e[c]=h/g,c++}return this.inputBuffer=this.inputBuffer.slice(d),e}}resampler.Resampler=Resampler;(function(a){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_,nt,it,ot){ot===void 0&&(ot=it);var lt=Object.getOwnPropertyDescriptor(nt,it);(!lt||("get"in lt?!nt.__esModule:lt.writable||lt.configurable))&&(lt={enumerable:!0,get:function(){return nt[it]}}),Object.defineProperty(_,ot,lt)}:function(_,nt,it,ot){ot===void 0&&(ot=it),_[ot]=nt[it]}),c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_,nt){Object.defineProperty(_,"default",{enumerable:!0,value:nt})}:function(_,nt){_.default=nt}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(_){if(_&&_.__esModule)return _;var nt={};if(_!=null)for(var it in _)it!=="default"&&Object.prototype.hasOwnProperty.call(_,it)&&e(nt,_,it);return c(nt,_),nt};Object.defineProperty(a,"__esModule",{value:!0}),a.NonRealTimeVAD=a.defaultNonRealTimeVADOptions=void 0;const h=d(ortWeb_minExports),g=assetPath,b=defaultModelFetcher$1,_e=frameProcessor,et=messages,rt=models,st=resampler;a.defaultNonRealTimeVADOptions={..._e.defaultLegacyFrameProcessorOptions,ortConfig:void 0,modelURL:g.baseAssetPath+"silero_vad_legacy.onnx",modelFetcher:b.defaultModelFetcher};class ${static async new(nt={}){const it={...a.defaultNonRealTimeVADOptions,...nt};(0,_e.validateOptions)(it),it.ortConfig!==void 0&&it.ortConfig(h);const ot=()=>it.modelFetcher(it.modelURL),lt=await rt.SileroLegacy.new(h,ot),at=new _e.FrameProcessor(lt.process,lt.reset_state,{frameSamples:it.frameSamples,positiveSpeechThreshold:it.positiveSpeechThreshold,negativeSpeechThreshold:it.negativeSpeechThreshold,redemptionFrames:it.redemptionFrames,preSpeechPadFrames:it.preSpeechPadFrames,minSpeechFrames:it.minSpeechFrames,submitUserSpeechOnPause:it.submitUserSpeechOnPause});return at.resume(),new this(ot,h,it,at)}constructor(nt,it,ot,lt){this.modelFetcher=nt,this.ort=it,this.options=ot,this.frameProcessor=lt}async*run(nt,it){const ot={nativeSampleRate:it,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples},lt=new st.Resampler(ot);let at=0,ct=0,dt=0,ht=[];for await(const mt of lt.stream(nt)){await this.frameProcessor.process(mt,xt=>{ht.push(xt)});for(const xt of ht)switch(xt.msg){case et.Message.SpeechStart:at=dt*this.options.frameSamples/16;break;case et.Message.SpeechEnd:ct=(dt+1)*this.options.frameSamples/16,yield{audio:xt.audio,start:at,end:ct};break}dt++}const{msg:pt,audio:ft}=this.frameProcessor.endSegment(mt=>{ht.push(mt)});for(const mt of ht)switch(mt.msg){case et.Message.SpeechEnd:yield{audio:mt.audio,start:at,end:dt*this.options.frameSamples/16}}}}a.NonRealTimeVAD=$})(nonRealTimeVad);var utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.audioFileToArray=utils.encodeWAV=utils.arrayBufferToBase64=utils.minFramesForTargetMS=void 0;function minFramesForTargetMS(a,e,c=16e3){return Math.ceil(a*c/1e3/e)}utils.minFramesForTargetMS=minFramesForTargetMS;function arrayBufferToBase64(a){const e=new Uint8Array(a),c=e.byteLength,d=new Array(c);for(var h=0;h<c;h++){const g=e[h];if(g===void 0)break;d[h]=String.fromCharCode(g)}return btoa(d.join(""))}utils.arrayBufferToBase64=arrayBufferToBase64;function encodeWAV(a,e=3,c=16e3,d=1,h=32){var g=h/8,b=d*g,_e=new ArrayBuffer(44+a.length*g),et=new DataView(_e);return writeString(et,0,"RIFF"),et.setUint32(4,36+a.length*g,!0),writeString(et,8,"WAVE"),writeString(et,12,"fmt "),et.setUint32(16,16,!0),et.setUint16(20,e,!0),et.setUint16(22,d,!0),et.setUint32(24,c,!0),et.setUint32(28,c*b,!0),et.setUint16(32,b,!0),et.setUint16(34,h,!0),writeString(et,36,"data"),et.setUint32(40,a.length*g,!0),e===1?floatTo16BitPCM(et,44,a):writeFloat32(et,44,a),_e}utils.encodeWAV=encodeWAV;function writeFloat32(a,e,c){for(var d=0;d<c.length;d++,e+=4)a.setFloat32(e,c[d],!0)}function floatTo16BitPCM(a,e,c){for(var d=0;d<c.length;d++,e+=2){var h=Math.max(-1,Math.min(1,c[d]));a.setInt16(e,h<0?h*32768:h*32767,!0)}}function writeString(a,e,c){for(var d=0;d<c.length;d++)a.setUint8(e+d,c.charCodeAt(d))}async function audioFileToArray(a){const e=new OfflineAudioContext(1,1,44100),c=new FileReader;let d=null;if(await new Promise(b=>{c.addEventListener("loadend",_e=>{const et=c.result;e.decodeAudioData(et,rt=>{d=rt,e.startRendering().then(st=>{console.log("Rendering completed successfully"),b()}).catch(st=>{console.error(`Rendering failed: ${st}`)})},rt=>{console.log(`Error with decoding audio data: ${rt}`)})}),c.readAsArrayBuffer(a)}),d===null)throw Error("some shit");let h=d,g=new Float32Array(h.length);for(let b=0;b<h.length;b++)for(let _e=0;_e<h.numberOfChannels;_e++)g[b]+=h.getChannelData(_e)[b];return{audio:g,sampleRate:h.sampleRate}}utils.audioFileToArray=audioFileToArray;var realTimeVad={};(function(a){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(at,ct,dt,ht){ht===void 0&&(ht=dt);var pt=Object.getOwnPropertyDescriptor(ct,dt);(!pt||("get"in pt?!ct.__esModule:pt.writable||pt.configurable))&&(pt={enumerable:!0,get:function(){return ct[dt]}}),Object.defineProperty(at,ht,pt)}:function(at,ct,dt,ht){ht===void 0&&(ht=dt),at[ht]=ct[dt]}),c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(at,ct){Object.defineProperty(at,"default",{enumerable:!0,value:ct})}:function(at,ct){at.default=ct}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(at){if(at&&at.__esModule)return at;var ct={};if(at!=null)for(var dt in at)dt!=="default"&&Object.prototype.hasOwnProperty.call(at,dt)&&e(ct,at,dt);return c(ct,at),ct};Object.defineProperty(a,"__esModule",{value:!0}),a.AudioNodeVAD=a.MicVAD=a.getDefaultRealTimeVADOptions=a.ort=a.DEFAULT_MODEL=void 0;const h=d(ortWeb_minExports),g=defaultModelFetcher$1,b=frameProcessor,_e=logging,et=messages,rt=models,st=resampler;a.DEFAULT_MODEL="legacy",a.ort=h;const $="vad.worklet.bundle.min.js",_="silero_vad_v5.onnx",nt="silero_vad_legacy.onnx",it=at=>({...at==="v5"?b.defaultV5FrameProcessorOptions:b.defaultLegacyFrameProcessorOptions,onFrameProcessed:(dt,ht)=>{},onVADMisfire:()=>{_e.log.debug("VAD misfire")},onSpeechStart:()=>{_e.log.debug("Detected speech start")},onSpeechEnd:()=>{_e.log.debug("Detected speech end")},onSpeechRealStart:()=>{_e.log.debug("Detected real speech start")},baseAssetPath:"https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@latest/dist/",onnxWASMBasePath:"https://cdn.jsdelivr.net/npm/onnxruntime-web@1.14.0/dist/",stream:void 0,ortConfig:void 0,model:at,workletOptions:{}});a.getDefaultRealTimeVADOptions=it;class ot{static async new(ct={}){const dt={...(0,a.getDefaultRealTimeVADOptions)(ct.model??a.DEFAULT_MODEL),...ct};(0,b.validateOptions)(dt);let ht;dt.stream===void 0?ht=await navigator.mediaDevices.getUserMedia({audio:{...dt.additionalAudioConstraints,channelCount:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0}}):ht=dt.stream;const pt=new AudioContext,ft=new MediaStreamAudioSourceNode(pt,{mediaStream:ht}),mt=await lt.new(pt,dt);return mt.receive(ft),new ot(dt,pt,ht,mt,ft)}constructor(ct,dt,ht,pt,ft,mt=!1){this.options=ct,this.audioContext=dt,this.stream=ht,this.audioNodeVAD=pt,this.sourceNode=ft,this.listening=mt,this.pause=()=>{this.audioNodeVAD.pause(),this.listening=!1},this.start=()=>{this.audioNodeVAD.start(),this.listening=!0},this.destroy=()=>{this.listening&&this.pause(),this.options.stream===void 0&&this.stream.getTracks().forEach(xt=>xt.stop()),this.sourceNode.disconnect(),this.audioNodeVAD.destroy(),this.audioContext.close()},this.setOptions=xt=>{this.audioNodeVAD.setFrameProcessorOptions(xt)}}}a.MicVAD=ot;class lt{static async new(ct,dt={}){const ht={...(0,a.getDefaultRealTimeVADOptions)(dt.model??a.DEFAULT_MODEL),...dt};(0,b.validateOptions)(ht),a.ort.env.wasm.wasmPaths=ht.onnxWASMBasePath,ht.ortConfig!==void 0&&ht.ortConfig(a.ort);const pt=ht.model==="v5"?_:nt,ft=ht.baseAssetPath+pt,mt=ht.model==="v5"?rt.SileroV5.new:rt.SileroLegacy.new;let xt;try{xt=await mt(a.ort,()=>(0,g.defaultModelFetcher)(ft))}catch(St){throw console.error(`Encountered an error while loading model file ${ft}`),St}const gt=new b.FrameProcessor(xt.process,xt.reset_state,{frameSamples:ht.frameSamples,positiveSpeechThreshold:ht.positiveSpeechThreshold,negativeSpeechThreshold:ht.negativeSpeechThreshold,redemptionFrames:ht.redemptionFrames,preSpeechPadFrames:ht.preSpeechPadFrames,minSpeechFrames:ht.minSpeechFrames,submitUserSpeechOnPause:ht.submitUserSpeechOnPause}),Et=new lt(ct,ht,gt);return await Et.setupAudioNode(),Et}constructor(ct,dt,ht){this.ctx=ct,this.options=dt,this.bufferIndex=0,this.pause=()=>{this.frameProcessor.pause(this.handleFrameProcessorEvent)},this.start=()=>{this.frameProcessor.resume()},this.receive=pt=>{pt.connect(this.audioNode)},this.processFrame=async pt=>{await this.frameProcessor.process(pt,this.handleFrameProcessorEvent)},this.handleFrameProcessorEvent=pt=>{switch(pt.msg){case et.Message.FrameProcessed:this.options.onFrameProcessed(pt.probs,pt.frame);break;case et.Message.SpeechStart:this.options.onSpeechStart();break;case et.Message.SpeechRealStart:this.options.onSpeechRealStart();break;case et.Message.VADMisfire:this.options.onVADMisfire();break;case et.Message.SpeechEnd:this.options.onSpeechEnd(pt.audio);break}},this.destroy=()=>{var pt;this.audioNode instanceof AudioWorkletNode&&this.audioNode.port.postMessage({message:et.Message.SpeechStop}),this.audioNode.disconnect(),(pt=this.gainNode)==null||pt.disconnect()},this.setFrameProcessorOptions=pt=>{this.frameProcessor.options={...this.frameProcessor.options,...pt}},this.frameProcessor=ht}async setupAudioNode(){if("audioWorklet"in this.ctx&&typeof AudioWorkletNode=="function")try{const pt=this.options.baseAssetPath+$;await this.ctx.audioWorklet.addModule(pt);const ft=this.options.workletOptions??{};ft.processorOptions={...ft.processorOptions??{},frameSamples:this.options.frameSamples},this.audioNode=new AudioWorkletNode(this.ctx,"vad-helper-worklet",ft),this.audioNode.port.onmessage=async mt=>{var xt;switch((xt=mt.data)==null?void 0:xt.message){case et.Message.AudioFrame:let gt=mt.data.data;gt instanceof ArrayBuffer||(gt=new ArrayBuffer(mt.data.data.byteLength),new Uint8Array(gt).set(new Uint8Array(mt.data.data)));const Et=new Float32Array(gt);await this.processFrame(Et);break}};return}catch(pt){console.log("AudioWorklet setup failed, falling back to ScriptProcessor",pt)}this.resampler=new st.Resampler({nativeSampleRate:this.ctx.sampleRate,targetSampleRate:16e3,targetFrameSize:this.options.frameSamples??480});const dt=4096;this.audioNode=this.ctx.createScriptProcessor(dt,1,1),this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=0;let ht=!1;this.audioNode.onaudioprocess=async pt=>{if(!ht){ht=!0;try{const ft=pt.inputBuffer.getChannelData(0);if(pt.outputBuffer.getChannelData(0).fill(0),this.resampler){const xt=this.resampler.process(ft);for(const gt of xt)await this.processFrame(gt)}}catch(ft){console.error("Error processing audio:",ft)}finally{ht=!1}}},this.audioNode.connect(this.gainNode),this.gainNode.connect(this.ctx.destination)}}a.AudioNodeVAD=lt})(realTimeVad);(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.getDefaultRealTimeVADOptions=a.MicVAD=a.DEFAULT_MODEL=a.AudioNodeVAD=a.utils=a.NonRealTimeVAD=a.Message=a.FrameProcessor=a.defaultModelFetcher=a.baseAssetPath=void 0;var e=assetPath;Object.defineProperty(a,"baseAssetPath",{enumerable:!0,get:function(){return e.baseAssetPath}});var c=defaultModelFetcher$1;Object.defineProperty(a,"defaultModelFetcher",{enumerable:!0,get:function(){return c.defaultModelFetcher}});var d=frameProcessor;Object.defineProperty(a,"FrameProcessor",{enumerable:!0,get:function(){return d.FrameProcessor}});var h=messages;Object.defineProperty(a,"Message",{enumerable:!0,get:function(){return h.Message}});var g=nonRealTimeVad;Object.defineProperty(a,"NonRealTimeVAD",{enumerable:!0,get:function(){return g.NonRealTimeVAD}});const b=utils;a.utils={audioFileToArray:b.audioFileToArray,minFramesForTargetMS:b.minFramesForTargetMS,arrayBufferToBase64:b.arrayBufferToBase64,encodeWAV:b.encodeWAV};var _e=realTimeVad;Object.defineProperty(a,"AudioNodeVAD",{enumerable:!0,get:function(){return _e.AudioNodeVAD}}),Object.defineProperty(a,"DEFAULT_MODEL",{enumerable:!0,get:function(){return _e.DEFAULT_MODEL}}),Object.defineProperty(a,"MicVAD",{enumerable:!0,get:function(){return _e.MicVAD}}),Object.defineProperty(a,"getDefaultRealTimeVADOptions",{enumerable:!0,get:function(){return _e.getDefaultRealTimeVADOptions}})})(dist);const useDisposableVAD=(a,e={})=>{const[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(!1),[b,_e]=reactExports.useState(!1),et=reactExports.useRef(null),rt=reactExports.useRef(null),st=reactExports.useCallback(async()=>{if(b)return console.log("🎤 [VAD] Already initializing, skipping..."),null;_e(!0);try{console.log("🎤 [VAD] Creating new VAD instance...");const ot=new(window.AudioContext||window.webkitAudioContext);rt.current=ot;const lt=await dist.MicVAD.new({onSpeechStart:()=>{console.log("🎤 [VAD] Speech detected - user started speaking"),g(!0),a.onSpeechStart()},onSpeechEnd:at=>{console.log("🎤 [VAD] Speech ended - processing user input"),g(!1),a.onSpeechEnd(at)},onVADMisfire:()=>{console.log("🎤 [VAD] VAD misfire detected"),g(!1),a.onVADMisfire()},positiveSpeechThreshold:e.positiveSpeechThreshold??.8,negativeSpeechThreshold:e.negativeSpeechThreshold??.3,redemptionFrames:e.redemptionFrames??8,preSpeechPadFrames:e.preSpeechPadFrames??1,minSpeechFrames:e.minSpeechFrames??3,frameSamples:e.frameSamples??1536});return et.current=lt,d(!0),console.log("✅ [VAD] New VAD instance created successfully"),lt}catch(ot){throw console.error("❌ [VAD] Failed to create VAD instance:",ot),ot}finally{_e(!1)}},[a,e,b]),$=reactExports.useCallback(()=>{if(console.log("🧹 [VAD] Destroying VAD instance..."),et.current){try{et.current.destroy()}catch(ot){console.warn("⚠️ [VAD] Error destroying VAD:",ot)}et.current=null}if(rt.current&&rt.current.state!=="closed")try{rt.current.close()}catch(ot){console.warn("⚠️ [VAD] Error closing AudioContext:",ot)}rt.current=null,d(!1),g(!1),console.log("✅ [VAD] VAD instance destroyed")},[]),_=reactExports.useCallback(async()=>{if(et.current||(console.log("🎤 [VAD] No VAD instance, creating new one..."),await st()),et.current)try{et.current.start(),console.log("🎤 [VAD] VAD started")}catch(ot){console.warn("⚠️ [VAD] Error starting VAD:",ot)}},[st]),nt=reactExports.useCallback(()=>{if(et.current)try{et.current.pause(),console.log("🎤 [VAD] VAD paused")}catch(ot){console.warn("⚠️ [VAD] Error pausing VAD:",ot)}},[]),it=reactExports.useCallback(()=>{console.log("🔄 [VAD] Resetting VAD..."),$()},[$]);return{isVADReady:c,isListening:h,isInitializing:b,startVAD:_,pauseVAD:nt,destroyVAD:$,resetVAD:it,createVAD:st}};function MessageWithSources$2({message:a,onSourceClick:e}){const c=[/\[SOURCE (\d+)(?:, (\d+))*\]/g,/\[Source (\d+)(?:, (\d+))*\]/g,/\[source (\d+)(?:, (\d+))*\]/g,/SOURCE (\d+)(?:, (\d+))*\b/g,/Source (\d+)(?:, (\d+))*\b/g,/\(SOURCE (\d+)(?:, (\d+))*\)/g,/\(Source (\d+)(?:, (\d+))*\)/g,/"SOURCE (\d+)(?:, (\d+))*"/g,/"Source (\d+)(?:, (\d+))*"/g],d=[];let h=0,g=!1;for(const b of c){const _e=[...a.content.matchAll(b)];if(_e.length>0){g=!0;for(const et of _e){et.index>h&&d.push({type:"text",content:a.content.slice(h,et.index)});const rt=[parseInt(et[1])];et[2]&&rt.push(parseInt(et[2])),d.push({type:"citation",sourceNumbers:rt,fullMatch:et[0]}),h=et.index+et[0].length}break}}return h<a.content.length&&d.push({type:"text",content:a.content.slice(h)}),g?jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:jsxRuntimeExports.jsx("div",{className:"inline",children:d.map((b,_e)=>{if(b.type==="text")return jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:b.content})},_e);{const et=b.sourceNumbers.map(rt=>{var $;let st=($=a.sourceCitations)==null?void 0:$.find(_=>_.chunkIndex===rt-1);return!st&&a.sourceCitations&&a.sourceCitations.length>=rt&&(st=a.sourceCitations[rt-1]),!st&&a.sourceCitations&&a.sourceCitations.length>0&&(st=a.sourceCitations[0]),st}).filter(Boolean);return jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>et[0]&&e(et[0]),children:b.fullMatch})},_e)}})})}):jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:a.content})}const SimplifiedVoiceCallPanel=({isOpen:a,onClose:e,workspaceId:c,workspaceName:d})=>{console.log("🎤 [SIMPLIFIED-VOICE] Component loaded - isOpen:",a);const{toast:h}=useToast(),g=useNavigate(),b=reactExports.useRef(null),[_e,et]=reactExports.useState(!1),[rt,st]=reactExports.useState("manual"),[$,_]=reactExports.useState(!1),[nt,it]=reactExports.useState(null),[ot,lt]=reactExports.useState([]),at=reactExports.useRef(null),[ct,dt]=reactExports.useState(!1),[ht,pt]=reactExports.useState(!1),[ft,mt]=reactExports.useState(!1),{isVADReady:xt,isInitializing:gt,startVAD:Et,pauseVAD:St,destroyVAD:Pt,resetVAD:Mt}=useDisposableVAD({onSpeechStart:()=>{console.log("🎤 [VAD] Speech detected - user started speaking")},onSpeechEnd:Qt=>{console.log("🎤 [VAD] Speech ended - processing user input"),Ln(Qt)},onVADMisfire:()=>{console.log("🎤 [VAD] VAD misfire detected")}},{positiveSpeechThreshold:.8,negativeSpeechThreshold:.3,redemptionFrames:8,preSpeechPadFrames:1,minSpeechFrames:3,frameSamples:1536}),[Rt,Dt]=reactExports.useState(null),[Tt,It]=reactExports.useState([{id:"1",content:"Hi! I'm your AI assistant. I can help you understand your workspace content through voice conversation. Click 'Start Recording' to begin speaking, then click 'Stop Recording' when you're done.",isUser:!1,timestamp:new Date}]),[Vt,Bt]=reactExports.useState(!1),[Ct,en]=reactExports.useState(null),[sn,kt]=reactExports.useState([]),[Ut,Jt]=reactExports.useState(!1),[tn,Gt]=reactExports.useState(!1),[hn,fn]=reactExports.useState("gemini-2.5-flash"),[gn,kn]=reactExports.useState("regular");reactExports.useEffect(()=>{rt==="continuous"&&!xt&&!gt&&Et().catch(Qt=>{console.error("❌ [VAD] Failed to initialize VAD:",Qt),h({title:"VAD Initialization Failed",description:"Voice activity detection could not be initialized",variant:"destructive"})})},[rt,xt,gt,Et]);const On=async()=>{try{const Qt=await navigator.mediaDevices.getUserMedia({audio:!0}),bn=new MediaRecorder(Qt);bn.ondataavailable=An=>{An.data.size>0&&lt(In=>[...In,An.data])},bn.onstop=async()=>{const An=new Blob(ot,{type:"audio/wav"});lt([]),await Sn(An),Qt.getTracks().forEach(In=>In.stop())},it(bn),lt([]),bn.start(),_(!0),console.log("🎤 [MANUAL] Started recording")}catch(Qt){console.error("❌ [MANUAL] Failed to start recording:",Qt),h({title:"Recording Failed",description:"Could not access microphone",variant:"destructive"})}},un=()=>{nt&&$&&(nt.stop(),_(!1),console.log("🎤 [MANUAL] Stopped recording"))},Sn=async Qt=>{if(console.log("🎤 [MANUAL] Processing recorded audio"),ft){console.log("🎤 [MANUAL] Ignoring speech while AI is speaking");return}pt(!0);try{const bn=await Pn(Qt);if(bn.trim()){console.log("🎤 [MANUAL] Transcription:",bn);const An={id:Date.now().toString(),content:bn,isUser:!0,timestamp:new Date};It(In=>[...In,An]),await or(bn)}}catch(bn){console.error("❌ [MANUAL] Failed to process manual recording:",bn),h({title:"Processing Failed",description:"Could not process your voice input",variant:"destructive"})}finally{pt(!1)}},Ln=reactExports.useCallback(async Qt=>{if(console.log("🎤 [SPEECH-END] Processing user speech"),ft){console.log("🎤 [SPEECH-END] Ignoring speech while AI is speaking");return}pt(!0);try{const bn=await $n(Qt),An=await Pn(bn);An&&An.trim()?(console.log("🎤 [SPEECH-END] Transcribed text:",An),await or(An)):(console.log("🎤 [SPEECH-END] No speech detected in audio"),h({title:"No speech detected",description:"Please try speaking more clearly",variant:"destructive"}))}catch(bn){console.error("❌ [SPEECH-END] Error processing speech:",bn),h({title:"Speech processing failed",description:bn.message||"Please try again",variant:"destructive"})}finally{pt(!1),Mt()}},[ft,Mt]),$n=async Qt=>{if(!at.current||at.current.state==="closed"||ct)try{at.current=new(window.AudioContext||window.webkitAudioContext),dt(!1)}catch(ir){throw console.error("Failed to create AudioContext:",ir),new Error("Failed to initialize audio processing")}const In=at.current.createBuffer(1,Qt.length,16e3);return In.getChannelData(0).set(Qt),await Wn(In)},Wn=async Qt=>{const bn=Qt.length,An=Qt.numberOfChannels,In=Qt.sampleRate,Un=new ArrayBuffer(44+bn*An*2),Vn=new DataView(Un),ir=(cr,Gn)=>{for(let Cr=0;Cr<Gn.length;Cr++)Vn.setUint8(cr+Cr,Gn.charCodeAt(Cr))};ir(0,"RIFF"),Vn.setUint32(4,36+bn*An*2,!0),ir(8,"WAVE"),ir(12,"fmt "),Vn.setUint32(16,16,!0),Vn.setUint16(20,1,!0),Vn.setUint16(22,An,!0),Vn.setUint32(24,In,!0),Vn.setUint32(28,In*An*2,!0),Vn.setUint16(32,An*2,!0),Vn.setUint16(34,16,!0),ir(36,"data"),Vn.setUint32(40,bn*An*2,!0);let Fn=44;for(let cr=0;cr<bn;cr++)for(let Gn=0;Gn<An;Gn++){const Cr=Math.max(-1,Math.min(1,Qt.getChannelData(Gn)[cr]));Vn.setInt16(Fn,Cr<0?Cr*32768:Cr*32767,!0),Fn+=2}return new Blob([Un],{type:"audio/wav"})},Pn=async Qt=>{const bn=new FormData;bn.append("audio",Qt,"recording.wav"),bn.append("workspaceId",c||"");const An=await fetch(buildApiUrl(API_ENDPOINTS.TRANSCRIBE.TRANSCRIBE),{method:"POST",body:bn});if(!An.ok){const Un=await An.text();throw new Error(`Transcription failed: ${An.status} ${Un}`)}return(await An.json()).text},or=async Qt=>{var An;if(!(Qt!=null&&Qt.trim())||Vt)return;const bn={id:Date.now().toString(),content:Qt.trim(),isUser:!0,timestamp:new Date};It(In=>[...In,bn]),Bt(!0);try{const In=localStorage.getItem("authToken");if(!Ct){const ir=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{method:"POST",headers:{Authorization:`Bearer ${In}`,"Content-Type":"application/json"},body:JSON.stringify({name:`Voice Call about ${d}`,workspaceId:c,mode:"call"})}),Fn=await ir.json();ir.ok&&Fn.success&&en(Fn.data.id)}const Un=await fetch(buildApiUrl(API_ENDPOINTS.RAG.MESSAGE),{method:"POST",headers:{Authorization:`Bearer ${In}`,"Content-Type":"application/json"},body:JSON.stringify({messages:[...Tt,bn],workspaceId:c,fileId:null,modelName:hn,chatMode:gn})}),Vn=await Un.json();if(Un.ok&&Vn.success){const ir={id:(Date.now()+1).toString(),content:Vn.message,isUser:!1,timestamp:new Date,sourceCitations:((An=Vn.context)==null?void 0:An.sourceCitations)||[]};if(It(Fn=>[...Fn,ir]),Ct)try{await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MESSAGES(Ct)),{method:"POST",headers:{Authorization:`Bearer ${In}`,"Content-Type":"application/json"},body:JSON.stringify({content:Qt.trim()})})}catch(Fn){console.error("Error saving to session:",Fn)}ir.content&&await Kt(ir.content)}else throw new Error(Vn.message||"Failed to send message")}catch(In){console.error("Error sending message:",In),h({title:"Error sending message",description:In.message||"Failed to send message",variant:"destructive"})}finally{Bt(!1)}},Kt=async Qt=>{try{const bn=localStorage.getItem("authToken"),An=await fetch(buildApiUrl(API_ENDPOINTS.TTS.TTS),{method:"POST",headers:{Authorization:`Bearer ${bn}`,"Content-Type":"application/json"},body:JSON.stringify({text:Qt})});if(An.ok){const In=await An.blob(),Un=URL.createObjectURL(In),Vn=new Audio(Un);Rt&&(Rt.pause(),Rt.currentTime=0),Dt(Vn),mt(!0),Vn.onended=()=>{URL.revokeObjectURL(Un),Dt(null),mt(!1),console.log("🎤 [TTS] AI finished speaking - ready for next user input"),Mt()},Vn.onpause=()=>{mt(!1)},Vn.play()}}catch(bn){console.error("Error with text-to-speech:",bn),mt(!1)}},Xt=async()=>{if(rt==="manual")$?un():await On();else{if(!xt){h({title:"VAD Not Ready",description:"Voice activity detection is still initializing",variant:"destructive"});return}_e?(console.log("📞 [CALL] Stopping voice call"),et(!1),St(),Rt&&(Rt.pause(),Rt.currentTime=0,mt(!1)),h({title:"Speech Ended",description:"Voice call has been stopped"})):(console.log("📞 [CALL] Starting voice call"),et(!0),Et(),h({title:"Speech Started",description:"Voice call is now active - just start speaking!"}))}},on=async()=>{if(c){Jt(!0);try{const Qt=localStorage.getItem("authToken"),bn=await fetch(buildApiUrl(`/chat-sessions/sessions?workspaceId=${c}&mode=call`),{headers:{Authorization:`Bearer ${Qt}`,"Content-Type":"application/json"}}),An=await bn.json();bn.ok&&An.success?kt(An.data):(console.error("Failed to load call history:",An.message),h({title:"Failed to load call history",description:An.message||"Could not load call history",variant:"destructive"}))}catch(Qt){console.error("Error loading call history:",Qt),h({title:"Error loading call history",description:"Network error occurred",variant:"destructive"})}finally{Jt(!1)}}},vn=async Qt=>{var bn;try{const An=localStorage.getItem("authToken"),In=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(Qt)),{headers:{Authorization:`Bearer ${An}`,"Content-Type":"application/json"}}),Un=await In.json();if(In.ok&&Un.success){const Vn=Un.data;en(Vn.id);const ir=((bn=Vn.messages)==null?void 0:bn.map(Fn=>({id:Fn.id,content:Fn.content,isUser:Fn.isUser,timestamp:new Date(Fn.createdAt),sourceCitations:Fn.sourceCitations||[]})))||[];It(ir),Gt(!1),h({title:"Call loaded",description:`Loaded call from ${new Date(Vn.updatedAt).toLocaleDateString()}`})}else h({title:"Failed to load call",description:Un.message||"Could not load call session",variant:"destructive"})}catch(An){console.error("Error loading call session:",An),h({title:"Error loading call",description:"Network error occurred",variant:"destructive"})}},Cn=async(Qt,bn)=>{try{const An=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.CHAT.STAR(Qt)),{method:"PATCH",headers:{Authorization:`Bearer ${An}`,"Content-Type":"application/json"},body:JSON.stringify({isStarred:bn})})).ok&&(kt(Un=>Un.map(Vn=>Vn.id===Qt?{...Vn,isStarred:bn}:Vn)),h({title:bn?"Call starred":"Call unstarred",description:bn?"Call saved permanently":"Call will auto-delete in 24h"}))}catch(An){console.error("Error toggling star status:",An),h({title:"Error",description:"Failed to update call status",variant:"destructive"})}},yn=async Qt=>{try{const bn=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(Qt)),{method:"DELETE",headers:{Authorization:`Bearer ${bn}`,"Content-Type":"application/json"}})).ok&&(kt(In=>In.filter(Un=>Un.id!==Qt)),Qt===Ct&&(en(null),It([{id:"1",content:"Hi! I'm your AI assistant. I can help you understand your workspace content through voice conversation. The call is now active - just start speaking!",isUser:!1,timestamp:new Date}])),h({title:"Call deleted",description:"Call session has been deleted"}))}catch(bn){console.error("Error deleting call session:",bn),h({title:"Error",description:"Failed to delete call",variant:"destructive"})}},nn=Qt=>{var bn,An;try{const In=((bn=Qt.metadata)==null?void 0:bn.type)==="youtube"&&((An=Qt.metadata)==null?void 0:An.timestamp);let Un=`/file/${Qt.fileId}`,Vn=`Navigated to ${Qt.fileName}`;if(In){const ir=Qt.metadata.timestamp,Fn=Math.floor(ir/60),cr=Math.floor(ir%60),Gn=`${Fn}:${cr.toString().padStart(2,"0")}`;Un+=`?timestamp=${ir}&citation=${encodeURIComponent(JSON.stringify(Qt))}`,Vn+=` at ${Gn}`}else Un+=`?citation=${encodeURIComponent(JSON.stringify(Qt))}`,Qt.pageNumber&&(Vn+=`, page ${Qt.pageNumber}`);g(Un),h({title:"Source found",description:Vn})}catch(In){console.error("Error navigating to source:",In),h({title:"Navigation failed",description:"Could not navigate to the source document",variant:"destructive"})}};return reactExports.useEffect(()=>{const Qt=()=>{if(b.current){const An=b.current.querySelector("[data-radix-scroll-area-viewport]");An&&(An.scrollTop=An.scrollHeight)}};Qt();const bn=setTimeout(Qt,100);return()=>clearTimeout(bn)},[Tt]),reactExports.useEffect(()=>{a||(console.log("🔇 [SIMPLIFIED-VOICE] Panel closing - cleaning up"),et(!1),$&&nt&&un(),rt==="continuous"&&St(),Rt&&(Rt.pause(),Rt.currentTime=0,mt(!1)),pt(!1))},[a,Rt,$,nt,rt,St]),reactExports.useEffect(()=>()=>{if(rt==="continuous"&&Pt(),Rt&&(Rt.pause(),Rt.currentTime=0),at.current&&at.current.state!=="closed"&&!ct)try{at.current.close(),dt(!0)}catch(Qt){console.warn("AudioContext already closed or in invalid state:",Qt),dt(!0)}},[Pt,Rt,rt]),reactExports.useEffect(()=>{tn&&c&&on()},[tn,c]),a?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-background border-l border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Mic,{className:"w-4 h-4 text-primary-foreground"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground",children:"Speech"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground",children:"Voice conversation with your Workspace"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Dialog,{open:tn,onOpenChange:Gt,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(History,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Speech History"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Ut?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):sn.length===0?jsxRuntimeExports.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No saved speech sessions"}):jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:sn.map(Qt=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-muted/50 ${Ct===Qt.id?"bg-primary/10 border-primary":"border-border"}`,onClick:()=>vn(Qt.id),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("p",{className:"font-medium text-sm truncate",children:Qt.summary&&Qt.summary!=="null"?Qt.summary.length>30?Qt.summary.substring(0,30)+"...":Qt.summary:Qt.name||"Unnamed Call"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:new Date(Qt.updatedAt).toLocaleDateString()}),!Qt.isStarred&&jsxRuntimeExports.jsx("span",{className:"text-xs text-orange-500 truncate",children:"• Auto-delete in 24h"})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700 w-fit",children:"Voice Call"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:bn=>{bn.stopPropagation(),Cn(Qt.id,!Qt.isStarred)},className:`h-6 w-6 p-0 hover:bg-yellow-50 ${Qt.isStarred?"text-yellow-500 hover:text-yellow-600":"text-muted-foreground hover:text-yellow-500"}`,title:Qt.isStarred?"Unstar this call":"Star this call",children:jsxRuntimeExports.jsx(Star,{className:`w-3 h-3 ${Qt.isStarred?"fill-current":""}`})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:bn=>{bn.stopPropagation(),yn(Qt.id)},className:"h-6 w-6 p-0 text-red-500 hover:text-red-600",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]})]},Qt.id))}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{Gt(!1),en(null),It([{id:"1",content:"Hi! I'm your AI assistant. I can help you understand your workspace content through voice conversation. The call is now active - just start speaking!",isUser:!1,timestamp:new Date}])},className:"w-full",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"New Call"]})]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:e,children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",ref:b,children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[Tt.map(Qt=>jsxRuntimeExports.jsx("div",{className:`flex ${Qt.isUser?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${Qt.isUser?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[Qt.isUser?jsxRuntimeExports.jsx("p",{className:"text-sm",children:Qt.content}):jsxRuntimeExports.jsx(MessageWithSources$2,{message:Qt,onSourceClick:nn}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70 mt-1",children:Qt.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},Qt.id)),Vt&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"max-w-[80%] p-3 rounded-lg bg-muted text-foreground",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"AI is thinking..."})]})})})]})})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-t border-border",children:jsxRuntimeExports.jsx(ChatModeSelector,{selectedMode:gn,onModeChange:kn})}),jsxRuntimeExports.jsx("div",{className:"p-2 border-t border-border flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"speech-mode",className:"text-xs",children:"Speech Mode:"}),jsxRuntimeExports.jsx(Switch,{id:"speech-mode",checked:rt==="continuous",onCheckedChange:Qt=>st(Qt?"continuous":"manual")}),jsxRuntimeExports.jsx(Label$2,{htmlFor:"speech-mode",className:"text-xs",children:rt==="manual"?"Manual":"Continuous"})]}),jsxRuntimeExports.jsx(Button,{onClick:Xt,disabled:ht||ft||rt==="continuous"&&!xt,className:`w-full h-12 ${rt==="manual"&&$||rt==="continuous"&&_e?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary/90"}`,children:ht?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),jsxRuntimeExports.jsx("span",{children:"Processing..."})]}):ft?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"AI Speaking..."})]}):rt==="manual"&&$||rt==="continuous"&&_e?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{children:"Stop Recording"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mic,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Start Recording"})]})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx(ModelSelector,{selectedModel:hn,onModelChange:fn})})]})})]}):null},ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:a,themeId:e,onThemeChange:c}){const d=getThemeById(e),h=b=>{c==null||c(b)};reactExports.useEffect(()=>{const b=document.documentElement;b.style.setProperty("--theme-primary",d.colors.primary),b.style.setProperty("--theme-secondary",d.colors.secondary),b.style.setProperty("--theme-accent",d.colors.accent),b.style.setProperty("--theme-background",d.colors.background),b.style.setProperty("--theme-surface",d.colors.surface),b.style.setProperty("--theme-border",d.colors.border),b.style.setProperty("--theme-text",d.colors.text),b.style.setProperty("--theme-muted",d.colors.muted),b.style.setProperty("--theme-card",d.colors.card),b.style.setProperty("--theme-card-border",d.colors.cardBorder),b.style.setProperty("--theme-gradient-from",d.colors.gradient.from),b.style.setProperty("--theme-gradient-to",d.colors.gradient.to),document.body.style.backgroundColor=d.colors.background,document.body.style.color=d.colors.text},[d]);const g={currentTheme:d,setTheme:h};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:g,children:a})}const PanelGroupContext=reactExports.createContext(null);PanelGroupContext.displayName="PanelGroupContext";const DATA_ATTRIBUTES={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},PRECISION=10,useIsomorphicLayoutEffect$1=reactExports.useLayoutEffect,useId=React$2.useId,wrappedUseId=typeof useId=="function"?useId:()=>null;let counter=0;function useUniqueId(a=null){const e=wrappedUseId(),c=reactExports.useRef(a||e||null);return c.current===null&&(c.current=""+counter++),a??c.current}function PanelWithForwardedRef({children:a,className:e="",collapsedSize:c,collapsible:d,defaultSize:h,forwardedRef:g,id:b,maxSize:_e,minSize:et,onCollapse:rt,onExpand:st,onResize:$,order:_,style:nt,tagName:it="div",...ot}){const lt=reactExports.useContext(PanelGroupContext);if(lt===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:at,expandPanel:ct,getPanelSize:dt,getPanelStyle:ht,groupId:pt,isPanelCollapsed:ft,reevaluatePanelConstraints:mt,registerPanel:xt,resizePanel:gt,unregisterPanel:Et}=lt,St=useUniqueId(b),Pt=reactExports.useRef({callbacks:{onCollapse:rt,onExpand:st,onResize:$},constraints:{collapsedSize:c,collapsible:d,defaultSize:h,maxSize:_e,minSize:et},id:St,idIsFromProps:b!==void 0,order:_});reactExports.useRef({didLogMissingDefaultSizeWarning:!1}),useIsomorphicLayoutEffect$1(()=>{const{callbacks:Rt,constraints:Dt}=Pt.current,Tt={...Dt};Pt.current.id=St,Pt.current.idIsFromProps=b!==void 0,Pt.current.order=_,Rt.onCollapse=rt,Rt.onExpand=st,Rt.onResize=$,Dt.collapsedSize=c,Dt.collapsible=d,Dt.defaultSize=h,Dt.maxSize=_e,Dt.minSize=et,(Tt.collapsedSize!==Dt.collapsedSize||Tt.collapsible!==Dt.collapsible||Tt.maxSize!==Dt.maxSize||Tt.minSize!==Dt.minSize)&&mt(Pt.current,Tt)}),useIsomorphicLayoutEffect$1(()=>{const Rt=Pt.current;return xt(Rt),()=>{Et(Rt)}},[_,St,xt,Et]),reactExports.useImperativeHandle(g,()=>({collapse:()=>{at(Pt.current)},expand:Rt=>{ct(Pt.current,Rt)},getId(){return St},getSize(){return dt(Pt.current)},isCollapsed(){return ft(Pt.current)},isExpanded(){return!ft(Pt.current)},resize:Rt=>{gt(Pt.current,Rt)}}),[at,ct,dt,ft,St,gt]);const Mt=ht(Pt.current,h);return reactExports.createElement(it,{...ot,children:a,className:e,id:St,style:{...Mt,...nt},[DATA_ATTRIBUTES.groupId]:pt,[DATA_ATTRIBUTES.panel]:"",[DATA_ATTRIBUTES.panelCollapsible]:d||void 0,[DATA_ATTRIBUTES.panelId]:St,[DATA_ATTRIBUTES.panelSize]:parseFloat(""+Mt.flexGrow).toFixed(1)})}const Panel=reactExports.forwardRef((a,e)=>reactExports.createElement(PanelWithForwardedRef,{...a,forwardedRef:e}));PanelWithForwardedRef.displayName="Panel";Panel.displayName="forwardRef(Panel)";let currentCursorStyle=null,prevRuleIndex=-1,styleElement=null;function getCursorStyle(a,e){if(e){const c=(e&EXCEEDED_HORIZONTAL_MIN)!==0,d=(e&EXCEEDED_HORIZONTAL_MAX)!==0,h=(e&EXCEEDED_VERTICAL_MIN)!==0,g=(e&EXCEEDED_VERTICAL_MAX)!==0;if(c)return h?"se-resize":g?"ne-resize":"e-resize";if(d)return h?"sw-resize":g?"nw-resize":"w-resize";if(h)return"s-resize";if(g)return"n-resize"}switch(a){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function resetGlobalCursorStyle(){styleElement!==null&&(document.head.removeChild(styleElement),currentCursorStyle=null,styleElement=null,prevRuleIndex=-1)}function setGlobalCursorStyle(a,e){var c,d;const h=getCursorStyle(a,e);if(currentCursorStyle!==h){if(currentCursorStyle=h,styleElement===null&&(styleElement=document.createElement("style"),document.head.appendChild(styleElement)),prevRuleIndex>=0){var g;(g=styleElement.sheet)===null||g===void 0||g.removeRule(prevRuleIndex)}prevRuleIndex=(c=(d=styleElement.sheet)===null||d===void 0?void 0:d.insertRule(`*{cursor: ${h} !important;}`))!==null&&c!==void 0?c:-1}}function isKeyDown(a){return a.type==="keydown"}function isPointerEvent(a){return a.type.startsWith("pointer")}function isMouseEvent(a){return a.type.startsWith("mouse")}function getResizeEventCoordinates(a){if(isPointerEvent(a)){if(a.isPrimary)return{x:a.clientX,y:a.clientY}}else if(isMouseEvent(a))return{x:a.clientX,y:a.clientY};return{x:1/0,y:1/0}}function getInputType(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function intersects(a,e,c){return a.x<e.x+e.width&&a.x+a.width>e.x&&a.y<e.y+e.height&&a.y+a.height>e.y}function compare(a,e){if(a===e)throw new Error("Cannot compare node with itself");const c={a:get_ancestors(a),b:get_ancestors(e)};let d;for(;c.a.at(-1)===c.b.at(-1);)a=c.a.pop(),e=c.b.pop(),d=a;assert$1(d,"Stacking order can only be calculated for elements with a common ancestor");const h={a:get_z_index(find_stacking_context(c.a)),b:get_z_index(find_stacking_context(c.b))};if(h.a===h.b){const g=d.childNodes,b={a:c.a.at(-1),b:c.b.at(-1)};let _e=g.length;for(;_e--;){const et=g[_e];if(et===b.a)return 1;if(et===b.b)return-1}}return Math.sign(h.a-h.b)}const props=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function is_flex_item(a){var e;const c=getComputedStyle((e=get_parent(a))!==null&&e!==void 0?e:a).display;return c==="flex"||c==="inline-flex"}function creates_stacking_context(a){const e=getComputedStyle(a);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||is_flex_item(a))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||props.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function find_stacking_context(a){let e=a.length;for(;e--;){const c=a[e];if(assert$1(c,"Missing node"),creates_stacking_context(c))return c}return null}function get_z_index(a){return a&&Number(getComputedStyle(a).zIndex)||0}function get_ancestors(a){const e=[];for(;a;)e.push(a),a=get_parent(a);return e}function get_parent(a){const{parentNode:e}=a;return e&&e instanceof ShadowRoot?e.host:e}const EXCEEDED_HORIZONTAL_MIN=1,EXCEEDED_HORIZONTAL_MAX=2,EXCEEDED_VERTICAL_MIN=4,EXCEEDED_VERTICAL_MAX=8,isCoarsePointer=getInputType()==="coarse";let intersectingHandles=[],isPointerDown=!1,ownerDocumentCounts=new Map,panelConstraintFlags=new Map;const registeredResizeHandlers=new Set;function registerResizeHandle(a,e,c,d,h){var g;const{ownerDocument:b}=e,_e={direction:c,element:e,hitAreaMargins:d,setResizeHandlerState:h},et=(g=ownerDocumentCounts.get(b))!==null&&g!==void 0?g:0;return ownerDocumentCounts.set(b,et+1),registeredResizeHandlers.add(_e),updateListeners(),function(){var st;panelConstraintFlags.delete(a),registeredResizeHandlers.delete(_e);const $=(st=ownerDocumentCounts.get(b))!==null&&st!==void 0?st:1;if(ownerDocumentCounts.set(b,$-1),updateListeners(),$===1&&ownerDocumentCounts.delete(b),intersectingHandles.includes(_e)){const _=intersectingHandles.indexOf(_e);_>=0&&intersectingHandles.splice(_,1),updateCursor(),h("up",!0,null)}}}function handlePointerDown(a){const{target:e}=a,{x:c,y:d}=getResizeEventCoordinates(a);isPointerDown=!0,recalculateIntersectingHandles({target:e,x:c,y:d}),updateListeners(),intersectingHandles.length>0&&(updateResizeHandlerStates("down",a),a.preventDefault(),isWithinResizeHandle(e)||a.stopImmediatePropagation())}function handlePointerMove(a){const{x:e,y:c}=getResizeEventCoordinates(a);if(isPointerDown&&a.buttons===0&&(isPointerDown=!1,updateResizeHandlerStates("up",a)),!isPointerDown){const{target:d}=a;recalculateIntersectingHandles({target:d,x:e,y:c})}updateResizeHandlerStates("move",a),updateCursor(),intersectingHandles.length>0&&a.preventDefault()}function handlePointerUp(a){const{target:e}=a,{x:c,y:d}=getResizeEventCoordinates(a);panelConstraintFlags.clear(),isPointerDown=!1,intersectingHandles.length>0&&(a.preventDefault(),isWithinResizeHandle(e)||a.stopImmediatePropagation()),updateResizeHandlerStates("up",a),recalculateIntersectingHandles({target:e,x:c,y:d}),updateCursor(),updateListeners()}function isWithinResizeHandle(a){let e=a;for(;e;){if(e.hasAttribute(DATA_ATTRIBUTES.resizeHandle))return!0;e=e.parentElement}return!1}function recalculateIntersectingHandles({target:a,x:e,y:c}){intersectingHandles.splice(0);let d=null;(a instanceof HTMLElement||a instanceof SVGElement)&&(d=a),registeredResizeHandlers.forEach(h=>{const{element:g,hitAreaMargins:b}=h,_e=g.getBoundingClientRect(),{bottom:et,left:rt,right:st,top:$}=_e,_=isCoarsePointer?b.coarse:b.fine;if(e>=rt-_&&e<=st+_&&c>=$-_&&c<=et+_){if(d!==null&&document.contains(d)&&g!==d&&!g.contains(d)&&!d.contains(g)&&compare(d,g)>0){let it=d,ot=!1;for(;it&&!it.contains(g);){if(intersects(it.getBoundingClientRect(),_e)){ot=!0;break}it=it.parentElement}if(ot)return}intersectingHandles.push(h)}})}function reportConstraintsViolation(a,e){panelConstraintFlags.set(a,e)}function updateCursor(){let a=!1,e=!1;intersectingHandles.forEach(d=>{const{direction:h}=d;h==="horizontal"?a=!0:e=!0});let c=0;panelConstraintFlags.forEach(d=>{c|=d}),a&&e?setGlobalCursorStyle("intersection",c):a?setGlobalCursorStyle("horizontal",c):e?setGlobalCursorStyle("vertical",c):resetGlobalCursorStyle()}let listenersAbortController=new AbortController;function updateListeners(){listenersAbortController.abort(),listenersAbortController=new AbortController;const a={capture:!0,signal:listenersAbortController.signal};registeredResizeHandlers.size&&(isPointerDown?(intersectingHandles.length>0&&ownerDocumentCounts.forEach((e,c)=>{const{body:d}=c;e>0&&(d.addEventListener("contextmenu",handlePointerUp,a),d.addEventListener("pointerleave",handlePointerMove,a),d.addEventListener("pointermove",handlePointerMove,a))}),window.addEventListener("pointerup",handlePointerUp,a),window.addEventListener("pointercancel",handlePointerUp,a)):ownerDocumentCounts.forEach((e,c)=>{const{body:d}=c;e>0&&(d.addEventListener("pointerdown",handlePointerDown,a),d.addEventListener("pointermove",handlePointerMove,a))}))}function updateResizeHandlerStates(a,e){registeredResizeHandlers.forEach(c=>{const{setResizeHandlerState:d}=c,h=intersectingHandles.includes(c);d(a,h,e)})}function useForceUpdate(){const[a,e]=reactExports.useState(0);return reactExports.useCallback(()=>e(c=>c+1),[])}function assert$1(a,e){if(!a)throw console.error(e),Error(e)}function fuzzyCompareNumbers(a,e,c=PRECISION){return a.toFixed(c)===e.toFixed(c)?0:a>e?1:-1}function fuzzyNumbersEqual$1(a,e,c=PRECISION){return fuzzyCompareNumbers(a,e,c)===0}function fuzzyNumbersEqual(a,e,c){return fuzzyCompareNumbers(a,e,c)===0}function fuzzyLayoutsEqual(a,e,c){if(a.length!==e.length)return!1;for(let d=0;d<a.length;d++){const h=a[d],g=e[d];if(!fuzzyNumbersEqual(h,g,c))return!1}return!0}function resizePanel({panelConstraints:a,panelIndex:e,size:c}){const d=a[e];assert$1(d!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:h=0,collapsible:g,maxSize:b=100,minSize:_e=0}=d;if(fuzzyCompareNumbers(c,_e)<0)if(g){const et=(h+_e)/2;fuzzyCompareNumbers(c,et)<0?c=h:c=_e}else c=_e;return c=Math.min(b,c),c=parseFloat(c.toFixed(PRECISION)),c}function adjustLayoutByDelta({delta:a,initialLayout:e,panelConstraints:c,pivotIndices:d,prevLayout:h,trigger:g}){if(fuzzyNumbersEqual(a,0))return e;const b=[...e],[_e,et]=d;assert$1(_e!=null,"Invalid first pivot index"),assert$1(et!=null,"Invalid second pivot index");let rt=0;if(g==="keyboard"){{const $=a<0?et:_e,_=c[$];assert$1(_,`Panel constraints not found for index ${$}`);const{collapsedSize:nt=0,collapsible:it,minSize:ot=0}=_;if(it){const lt=e[$];if(assert$1(lt!=null,`Previous layout not found for panel index ${$}`),fuzzyNumbersEqual(lt,nt)){const at=ot-lt;fuzzyCompareNumbers(at,Math.abs(a))>0&&(a=a<0?0-at:at)}}}{const $=a<0?_e:et,_=c[$];assert$1(_,`No panel constraints found for index ${$}`);const{collapsedSize:nt=0,collapsible:it,minSize:ot=0}=_;if(it){const lt=e[$];if(assert$1(lt!=null,`Previous layout not found for panel index ${$}`),fuzzyNumbersEqual(lt,ot)){const at=lt-nt;fuzzyCompareNumbers(at,Math.abs(a))>0&&(a=a<0?0-at:at)}}}}{const $=a<0?1:-1;let _=a<0?et:_e,nt=0;for(;;){const ot=e[_];assert$1(ot!=null,`Previous layout not found for panel index ${_}`);const at=resizePanel({panelConstraints:c,panelIndex:_,size:100})-ot;if(nt+=at,_+=$,_<0||_>=c.length)break}const it=Math.min(Math.abs(a),Math.abs(nt));a=a<0?0-it:it}{let _=a<0?_e:et;for(;_>=0&&_<c.length;){const nt=Math.abs(a)-Math.abs(rt),it=e[_];assert$1(it!=null,`Previous layout not found for panel index ${_}`);const ot=it-nt,lt=resizePanel({panelConstraints:c,panelIndex:_,size:ot});if(!fuzzyNumbersEqual(it,lt)&&(rt+=it-lt,b[_]=lt,rt.toPrecision(3).localeCompare(Math.abs(a).toPrecision(3),void 0,{numeric:!0})>=0))break;a<0?_--:_++}}if(fuzzyLayoutsEqual(h,b))return h;{const $=a<0?et:_e,_=e[$];assert$1(_!=null,`Previous layout not found for panel index ${$}`);const nt=_+rt,it=resizePanel({panelConstraints:c,panelIndex:$,size:nt});if(b[$]=it,!fuzzyNumbersEqual(it,nt)){let ot=nt-it,at=a<0?et:_e;for(;at>=0&&at<c.length;){const ct=b[at];assert$1(ct!=null,`Previous layout not found for panel index ${at}`);const dt=ct+ot,ht=resizePanel({panelConstraints:c,panelIndex:at,size:dt});if(fuzzyNumbersEqual(ct,ht)||(ot-=ht-ct,b[at]=ht),fuzzyNumbersEqual(ot,0))break;a>0?at--:at++}}}const st=b.reduce(($,_)=>_+$,0);return fuzzyNumbersEqual(st,100)?b:h}function calculateAriaValues({layout:a,panelsArray:e,pivotIndices:c}){let d=0,h=100,g=0,b=0;const _e=c[0];assert$1(_e!=null,"No pivot index found"),e.forEach(($,_)=>{const{constraints:nt}=$,{maxSize:it=100,minSize:ot=0}=nt;_===_e?(d=ot,h=it):(g+=ot,b+=it)});const et=Math.min(h,100-g),rt=Math.max(d,100-b),st=a[_e];return{valueMax:et,valueMin:rt,valueNow:st}}function getResizeHandleElementsForGroup(a,e=document){return Array.from(e.querySelectorAll(`[${DATA_ATTRIBUTES.resizeHandleId}][data-panel-group-id="${a}"]`))}function getResizeHandleElementIndex(a,e,c=document){const h=getResizeHandleElementsForGroup(a,c).findIndex(g=>g.getAttribute(DATA_ATTRIBUTES.resizeHandleId)===e);return h??null}function determinePivotIndices(a,e,c){const d=getResizeHandleElementIndex(a,e,c);return d!=null?[d,d+1]:[-1,-1]}function getPanelGroupElement(a,e=document){var c;if(e instanceof HTMLElement&&(e==null||(c=e.dataset)===null||c===void 0?void 0:c.panelGroupId)==a)return e;const d=e.querySelector(`[data-panel-group][data-panel-group-id="${a}"]`);return d||null}function getResizeHandleElement(a,e=document){const c=e.querySelector(`[${DATA_ATTRIBUTES.resizeHandleId}="${a}"]`);return c||null}function getResizeHandlePanelIds(a,e,c,d=document){var h,g,b,_e;const et=getResizeHandleElement(e,d),rt=getResizeHandleElementsForGroup(a,d),st=et?rt.indexOf(et):-1,$=(h=(g=c[st])===null||g===void 0?void 0:g.id)!==null&&h!==void 0?h:null,_=(b=(_e=c[st+1])===null||_e===void 0?void 0:_e.id)!==null&&b!==void 0?b:null;return[$,_]}function useWindowSplitterPanelGroupBehavior({committedValuesRef:a,eagerValuesRef:e,groupId:c,layout:d,panelDataArray:h,panelGroupElement:g,setLayout:b}){reactExports.useRef({didWarnAboutMissingResizeHandle:!1}),useIsomorphicLayoutEffect$1(()=>{if(!g)return;const _e=getResizeHandleElementsForGroup(c,g);for(let et=0;et<h.length-1;et++){const{valueMax:rt,valueMin:st,valueNow:$}=calculateAriaValues({layout:d,panelsArray:h,pivotIndices:[et,et+1]}),_=_e[et];if(_!=null){const nt=h[et];assert$1(nt,`No panel data found for index "${et}"`),_.setAttribute("aria-controls",nt.id),_.setAttribute("aria-valuemax",""+Math.round(rt)),_.setAttribute("aria-valuemin",""+Math.round(st)),_.setAttribute("aria-valuenow",$!=null?""+Math.round($):"")}}return()=>{_e.forEach((et,rt)=>{et.removeAttribute("aria-controls"),et.removeAttribute("aria-valuemax"),et.removeAttribute("aria-valuemin"),et.removeAttribute("aria-valuenow")})}},[c,d,h,g]),reactExports.useEffect(()=>{if(!g)return;const _e=e.current;assert$1(_e,"Eager values not found");const{panelDataArray:et}=_e,rt=getPanelGroupElement(c,g);assert$1(rt!=null,`No group found for id "${c}"`);const st=getResizeHandleElementsForGroup(c,g);assert$1(st,`No resize handles found for group id "${c}"`);const $=st.map(_=>{const nt=_.getAttribute(DATA_ATTRIBUTES.resizeHandleId);assert$1(nt,"Resize handle element has no handle id attribute");const[it,ot]=getResizeHandlePanelIds(c,nt,et,g);if(it==null||ot==null)return()=>{};const lt=at=>{if(!at.defaultPrevented)switch(at.key){case"Enter":{at.preventDefault();const ct=et.findIndex(dt=>dt.id===it);if(ct>=0){const dt=et[ct];assert$1(dt,`No panel data found for index ${ct}`);const ht=d[ct],{collapsedSize:pt=0,collapsible:ft,minSize:mt=0}=dt.constraints;if(ht!=null&&ft){const xt=adjustLayoutByDelta({delta:fuzzyNumbersEqual(ht,pt)?mt-pt:pt-ht,initialLayout:d,panelConstraints:et.map(gt=>gt.constraints),pivotIndices:determinePivotIndices(c,nt,g),prevLayout:d,trigger:"keyboard"});d!==xt&&b(xt)}}break}}};return _.addEventListener("keydown",lt),()=>{_.removeEventListener("keydown",lt)}});return()=>{$.forEach(_=>_())}},[g,a,e,c,d,h,b])}function areEqual(a,e){if(a.length!==e.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==e[c])return!1;return!0}function getResizeEventCursorPosition(a,e){const c=a==="horizontal",{x:d,y:h}=getResizeEventCoordinates(e);return c?d:h}function calculateDragOffsetPercentage(a,e,c,d,h){const g=c==="horizontal",b=getResizeHandleElement(e,h);assert$1(b,`No resize handle element found for id "${e}"`);const _e=b.getAttribute(DATA_ATTRIBUTES.groupId);assert$1(_e,"Resize handle element has no group id attribute");let{initialCursorPosition:et}=d;const rt=getResizeEventCursorPosition(c,a),st=getPanelGroupElement(_e,h);assert$1(st,`No group element found for id "${_e}"`);const $=st.getBoundingClientRect(),_=g?$.width:$.height;return(rt-et)/_*100}function calculateDeltaPercentage(a,e,c,d,h,g){if(isKeyDown(a)){const b=c==="horizontal";let _e=0;a.shiftKey?_e=100:h!=null?_e=h:_e=10;let et=0;switch(a.key){case"ArrowDown":et=b?0:_e;break;case"ArrowLeft":et=b?-_e:0;break;case"ArrowRight":et=b?_e:0;break;case"ArrowUp":et=b?0:-_e;break;case"End":et=100;break;case"Home":et=-100;break}return et}else return d==null?0:calculateDragOffsetPercentage(a,e,c,d,g)}function calculateUnsafeDefaultLayout({panelDataArray:a}){const e=Array(a.length),c=a.map(g=>g.constraints);let d=0,h=100;for(let g=0;g<a.length;g++){const b=c[g];assert$1(b,`Panel constraints not found for index ${g}`);const{defaultSize:_e}=b;_e!=null&&(d++,e[g]=_e,h-=_e)}for(let g=0;g<a.length;g++){const b=c[g];assert$1(b,`Panel constraints not found for index ${g}`);const{defaultSize:_e}=b;if(_e!=null)continue;const et=a.length-d,rt=h/et;d++,e[g]=rt,h-=rt}return e}function callPanelCallbacks(a,e,c){e.forEach((d,h)=>{const g=a[h];assert$1(g,`Panel data not found for index ${h}`);const{callbacks:b,constraints:_e,id:et}=g,{collapsedSize:rt=0,collapsible:st}=_e,$=c[et];if($==null||d!==$){c[et]=d;const{onCollapse:_,onExpand:nt,onResize:it}=b;it&&it(d,$),st&&(_||nt)&&(nt&&($==null||fuzzyNumbersEqual$1($,rt))&&!fuzzyNumbersEqual$1(d,rt)&&nt(),_&&($==null||!fuzzyNumbersEqual$1($,rt))&&fuzzyNumbersEqual$1(d,rt)&&_())}})}function compareLayouts(a,e){if(a.length!==e.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!=e[c])return!1;return!0}function computePanelFlexBoxStyle({defaultSize:a,dragState:e,layout:c,panelData:d,panelIndex:h,precision:g=3}){const b=c[h];let _e;return b==null?_e=a!=null?a.toPrecision(g):"1":d.length===1?_e="1":_e=b.toPrecision(g),{flexBasis:0,flexGrow:_e,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function debounce(a,e=10){let c=null;return(...h)=>{c!==null&&clearTimeout(c),c=setTimeout(()=>{a(...h)},e)}}function initializeDefaultStorage(a){try{if(typeof localStorage<"u")a.getItem=e=>localStorage.getItem(e),a.setItem=(e,c)=>{localStorage.setItem(e,c)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),a.getItem=()=>null,a.setItem=()=>{}}}function getPanelGroupKey(a){return`react-resizable-panels:${a}`}function getPanelKey(a){return a.map(e=>{const{constraints:c,id:d,idIsFromProps:h,order:g}=e;return h?d:g?`${g}:${JSON.stringify(c)}`:JSON.stringify(c)}).sort((e,c)=>e.localeCompare(c)).join(",")}function loadSerializedPanelGroupState(a,e){try{const c=getPanelGroupKey(a),d=e.getItem(c);if(d){const h=JSON.parse(d);if(typeof h=="object"&&h!=null)return h}}catch{}return null}function loadPanelGroupState(a,e,c){var d,h;const g=(d=loadSerializedPanelGroupState(a,c))!==null&&d!==void 0?d:{},b=getPanelKey(e);return(h=g[b])!==null&&h!==void 0?h:null}function savePanelGroupState(a,e,c,d,h){var g;const b=getPanelGroupKey(a),_e=getPanelKey(e),et=(g=loadSerializedPanelGroupState(a,h))!==null&&g!==void 0?g:{};et[_e]={expandToSizes:Object.fromEntries(c.entries()),layout:d};try{h.setItem(b,JSON.stringify(et))}catch(rt){console.error(rt)}}function validatePanelGroupLayout({layout:a,panelConstraints:e}){const c=[...a],d=c.reduce((g,b)=>g+b,0);if(c.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${c.map(g=>`${g}%`).join(", ")}`);if(!fuzzyNumbersEqual(d,100)&&c.length>0)for(let g=0;g<e.length;g++){const b=c[g];assert$1(b!=null,`No layout data found for index ${g}`);const _e=100/d*b;c[g]=_e}let h=0;for(let g=0;g<e.length;g++){const b=c[g];assert$1(b!=null,`No layout data found for index ${g}`);const _e=resizePanel({panelConstraints:e,panelIndex:g,size:b});b!=_e&&(h+=b-_e,c[g]=_e)}if(!fuzzyNumbersEqual(h,0))for(let g=0;g<e.length;g++){const b=c[g];assert$1(b!=null,`No layout data found for index ${g}`);const _e=b+h,et=resizePanel({panelConstraints:e,panelIndex:g,size:_e});if(b!==et&&(h-=et-b,c[g]=et,fuzzyNumbersEqual(h,0)))break}return c}const LOCAL_STORAGE_DEBOUNCE_INTERVAL=100,defaultStorage={getItem:a=>(initializeDefaultStorage(defaultStorage),defaultStorage.getItem(a)),setItem:(a,e)=>{initializeDefaultStorage(defaultStorage),defaultStorage.setItem(a,e)}},debounceMap={};function PanelGroupWithForwardedRef({autoSaveId:a=null,children:e,className:c="",direction:d,forwardedRef:h,id:g=null,onLayout:b=null,keyboardResizeBy:_e=null,storage:et=defaultStorage,style:rt,tagName:st="div",...$}){const _=useUniqueId(g),nt=reactExports.useRef(null),[it,ot]=reactExports.useState(null),[lt,at]=reactExports.useState([]),ct=useForceUpdate(),dt=reactExports.useRef({}),ht=reactExports.useRef(new Map),pt=reactExports.useRef(0),ft=reactExports.useRef({autoSaveId:a,direction:d,dragState:it,id:_,keyboardResizeBy:_e,onLayout:b,storage:et}),mt=reactExports.useRef({layout:lt,panelDataArray:[],panelDataArrayChanged:!1});reactExports.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),reactExports.useImperativeHandle(h,()=>({getId:()=>ft.current.id,getLayout:()=>{const{layout:kt}=mt.current;return kt},setLayout:kt=>{const{onLayout:Ut}=ft.current,{layout:Jt,panelDataArray:tn}=mt.current,Gt=validatePanelGroupLayout({layout:kt,panelConstraints:tn.map(hn=>hn.constraints)});areEqual(Jt,Gt)||(at(Gt),mt.current.layout=Gt,Ut&&Ut(Gt),callPanelCallbacks(tn,Gt,dt.current))}}),[]),useIsomorphicLayoutEffect$1(()=>{ft.current.autoSaveId=a,ft.current.direction=d,ft.current.dragState=it,ft.current.id=_,ft.current.onLayout=b,ft.current.storage=et}),useWindowSplitterPanelGroupBehavior({committedValuesRef:ft,eagerValuesRef:mt,groupId:_,layout:lt,panelDataArray:mt.current.panelDataArray,setLayout:at,panelGroupElement:nt.current}),reactExports.useEffect(()=>{const{panelDataArray:kt}=mt.current;if(a){if(lt.length===0||lt.length!==kt.length)return;let Ut=debounceMap[a];Ut==null&&(Ut=debounce(savePanelGroupState,LOCAL_STORAGE_DEBOUNCE_INTERVAL),debounceMap[a]=Ut);const Jt=[...kt],tn=new Map(ht.current);Ut(a,Jt,tn,lt,et)}},[a,lt,et]),reactExports.useEffect(()=>{});const xt=reactExports.useCallback(kt=>{const{onLayout:Ut}=ft.current,{layout:Jt,panelDataArray:tn}=mt.current;if(kt.constraints.collapsible){const Gt=tn.map(kn=>kn.constraints),{collapsedSize:hn=0,panelSize:fn,pivotIndices:gn}=panelDataHelper(tn,kt,Jt);if(assert$1(fn!=null,`Panel size not found for panel "${kt.id}"`),!fuzzyNumbersEqual$1(fn,hn)){ht.current.set(kt.id,fn);const On=findPanelDataIndex(tn,kt)===tn.length-1?fn-hn:hn-fn,un=adjustLayoutByDelta({delta:On,initialLayout:Jt,panelConstraints:Gt,pivotIndices:gn,prevLayout:Jt,trigger:"imperative-api"});compareLayouts(Jt,un)||(at(un),mt.current.layout=un,Ut&&Ut(un),callPanelCallbacks(tn,un,dt.current))}}},[]),gt=reactExports.useCallback((kt,Ut)=>{const{onLayout:Jt}=ft.current,{layout:tn,panelDataArray:Gt}=mt.current;if(kt.constraints.collapsible){const hn=Gt.map(Sn=>Sn.constraints),{collapsedSize:fn=0,panelSize:gn=0,minSize:kn=0,pivotIndices:On}=panelDataHelper(Gt,kt,tn),un=Ut??kn;if(fuzzyNumbersEqual$1(gn,fn)){const Sn=ht.current.get(kt.id),Ln=Sn!=null&&Sn>=un?Sn:un,Wn=findPanelDataIndex(Gt,kt)===Gt.length-1?gn-Ln:Ln-gn,Pn=adjustLayoutByDelta({delta:Wn,initialLayout:tn,panelConstraints:hn,pivotIndices:On,prevLayout:tn,trigger:"imperative-api"});compareLayouts(tn,Pn)||(at(Pn),mt.current.layout=Pn,Jt&&Jt(Pn),callPanelCallbacks(Gt,Pn,dt.current))}}},[]),Et=reactExports.useCallback(kt=>{const{layout:Ut,panelDataArray:Jt}=mt.current,{panelSize:tn}=panelDataHelper(Jt,kt,Ut);return assert$1(tn!=null,`Panel size not found for panel "${kt.id}"`),tn},[]),St=reactExports.useCallback((kt,Ut)=>{const{panelDataArray:Jt}=mt.current,tn=findPanelDataIndex(Jt,kt);return computePanelFlexBoxStyle({defaultSize:Ut,dragState:it,layout:lt,panelData:Jt,panelIndex:tn})},[it,lt]),Pt=reactExports.useCallback(kt=>{const{layout:Ut,panelDataArray:Jt}=mt.current,{collapsedSize:tn=0,collapsible:Gt,panelSize:hn}=panelDataHelper(Jt,kt,Ut);return assert$1(hn!=null,`Panel size not found for panel "${kt.id}"`),Gt===!0&&fuzzyNumbersEqual$1(hn,tn)},[]),Mt=reactExports.useCallback(kt=>{const{layout:Ut,panelDataArray:Jt}=mt.current,{collapsedSize:tn=0,collapsible:Gt,panelSize:hn}=panelDataHelper(Jt,kt,Ut);return assert$1(hn!=null,`Panel size not found for panel "${kt.id}"`),!Gt||fuzzyCompareNumbers(hn,tn)>0},[]),Rt=reactExports.useCallback(kt=>{const{panelDataArray:Ut}=mt.current;Ut.push(kt),Ut.sort((Jt,tn)=>{const Gt=Jt.order,hn=tn.order;return Gt==null&&hn==null?0:Gt==null?-1:hn==null?1:Gt-hn}),mt.current.panelDataArrayChanged=!0,ct()},[ct]);useIsomorphicLayoutEffect$1(()=>{if(mt.current.panelDataArrayChanged){mt.current.panelDataArrayChanged=!1;const{autoSaveId:kt,onLayout:Ut,storage:Jt}=ft.current,{layout:tn,panelDataArray:Gt}=mt.current;let hn=null;if(kt){const gn=loadPanelGroupState(kt,Gt,Jt);gn&&(ht.current=new Map(Object.entries(gn.expandToSizes)),hn=gn.layout)}hn==null&&(hn=calculateUnsafeDefaultLayout({panelDataArray:Gt}));const fn=validatePanelGroupLayout({layout:hn,panelConstraints:Gt.map(gn=>gn.constraints)});areEqual(tn,fn)||(at(fn),mt.current.layout=fn,Ut&&Ut(fn),callPanelCallbacks(Gt,fn,dt.current))}}),useIsomorphicLayoutEffect$1(()=>{const kt=mt.current;return()=>{kt.layout=[]}},[]);const Dt=reactExports.useCallback(kt=>{let Ut=!1;const Jt=nt.current;return Jt&&window.getComputedStyle(Jt,null).getPropertyValue("direction")==="rtl"&&(Ut=!0),function(Gt){Gt.preventDefault();const hn=nt.current;if(!hn)return()=>null;const{direction:fn,dragState:gn,id:kn,keyboardResizeBy:On,onLayout:un}=ft.current,{layout:Sn,panelDataArray:Ln}=mt.current,{initialLayout:$n}=gn??{},Wn=determinePivotIndices(kn,kt,hn);let Pn=calculateDeltaPercentage(Gt,kt,fn,gn,On,hn);const or=fn==="horizontal";or&&Ut&&(Pn=-Pn);const Kt=Ln.map(vn=>vn.constraints),Xt=adjustLayoutByDelta({delta:Pn,initialLayout:$n??Sn,panelConstraints:Kt,pivotIndices:Wn,prevLayout:Sn,trigger:isKeyDown(Gt)?"keyboard":"mouse-or-touch"}),on=!compareLayouts(Sn,Xt);(isPointerEvent(Gt)||isMouseEvent(Gt))&&pt.current!=Pn&&(pt.current=Pn,!on&&Pn!==0?or?reportConstraintsViolation(kt,Pn<0?EXCEEDED_HORIZONTAL_MIN:EXCEEDED_HORIZONTAL_MAX):reportConstraintsViolation(kt,Pn<0?EXCEEDED_VERTICAL_MIN:EXCEEDED_VERTICAL_MAX):reportConstraintsViolation(kt,0)),on&&(at(Xt),mt.current.layout=Xt,un&&un(Xt),callPanelCallbacks(Ln,Xt,dt.current))}},[]),Tt=reactExports.useCallback((kt,Ut)=>{const{onLayout:Jt}=ft.current,{layout:tn,panelDataArray:Gt}=mt.current,hn=Gt.map(Sn=>Sn.constraints),{panelSize:fn,pivotIndices:gn}=panelDataHelper(Gt,kt,tn);assert$1(fn!=null,`Panel size not found for panel "${kt.id}"`);const On=findPanelDataIndex(Gt,kt)===Gt.length-1?fn-Ut:Ut-fn,un=adjustLayoutByDelta({delta:On,initialLayout:tn,panelConstraints:hn,pivotIndices:gn,prevLayout:tn,trigger:"imperative-api"});compareLayouts(tn,un)||(at(un),mt.current.layout=un,Jt&&Jt(un),callPanelCallbacks(Gt,un,dt.current))},[]),It=reactExports.useCallback((kt,Ut)=>{const{layout:Jt,panelDataArray:tn}=mt.current,{collapsedSize:Gt=0,collapsible:hn}=Ut,{collapsedSize:fn=0,collapsible:gn,maxSize:kn=100,minSize:On=0}=kt.constraints,{panelSize:un}=panelDataHelper(tn,kt,Jt);un!=null&&(hn&&gn&&fuzzyNumbersEqual$1(un,Gt)?fuzzyNumbersEqual$1(Gt,fn)||Tt(kt,fn):un<On?Tt(kt,On):un>kn&&Tt(kt,kn))},[Tt]),Vt=reactExports.useCallback((kt,Ut)=>{const{direction:Jt}=ft.current,{layout:tn}=mt.current;if(!nt.current)return;const Gt=getResizeHandleElement(kt,nt.current);assert$1(Gt,`Drag handle element not found for id "${kt}"`);const hn=getResizeEventCursorPosition(Jt,Ut);ot({dragHandleId:kt,dragHandleRect:Gt.getBoundingClientRect(),initialCursorPosition:hn,initialLayout:tn})},[]),Bt=reactExports.useCallback(()=>{ot(null)},[]),Ct=reactExports.useCallback(kt=>{const{panelDataArray:Ut}=mt.current,Jt=findPanelDataIndex(Ut,kt);Jt>=0&&(Ut.splice(Jt,1),delete dt.current[kt.id],mt.current.panelDataArrayChanged=!0,ct())},[ct]),en=reactExports.useMemo(()=>({collapsePanel:xt,direction:d,dragState:it,expandPanel:gt,getPanelSize:Et,getPanelStyle:St,groupId:_,isPanelCollapsed:Pt,isPanelExpanded:Mt,reevaluatePanelConstraints:It,registerPanel:Rt,registerResizeHandle:Dt,resizePanel:Tt,startDragging:Vt,stopDragging:Bt,unregisterPanel:Ct,panelGroupElement:nt.current}),[xt,it,d,gt,Et,St,_,Pt,Mt,It,Rt,Dt,Tt,Vt,Bt,Ct]),sn={display:"flex",flexDirection:d==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return reactExports.createElement(PanelGroupContext.Provider,{value:en},reactExports.createElement(st,{...$,children:e,className:c,id:g,ref:nt,style:{...sn,...rt},[DATA_ATTRIBUTES.group]:"",[DATA_ATTRIBUTES.groupDirection]:d,[DATA_ATTRIBUTES.groupId]:_}))}const PanelGroup=reactExports.forwardRef((a,e)=>reactExports.createElement(PanelGroupWithForwardedRef,{...a,forwardedRef:e}));PanelGroupWithForwardedRef.displayName="PanelGroup";PanelGroup.displayName="forwardRef(PanelGroup)";function findPanelDataIndex(a,e){return a.findIndex(c=>c===e||c.id===e.id)}function panelDataHelper(a,e,c){const d=findPanelDataIndex(a,e),g=d===a.length-1?[d-1,d]:[d,d+1],b=c[d];return{...e.constraints,panelSize:b,pivotIndices:g}}function useWindowSplitterResizeHandlerBehavior({disabled:a,handleId:e,resizeHandler:c,panelGroupElement:d}){reactExports.useEffect(()=>{if(a||c==null||d==null)return;const h=getResizeHandleElement(e,d);if(h==null)return;const g=b=>{if(!b.defaultPrevented)switch(b.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{b.preventDefault(),c(b);break}case"F6":{b.preventDefault();const _e=h.getAttribute(DATA_ATTRIBUTES.groupId);assert$1(_e,`No group element found for id "${_e}"`);const et=getResizeHandleElementsForGroup(_e,d),rt=getResizeHandleElementIndex(_e,e,d);assert$1(rt!==null,`No resize element found for id "${e}"`);const st=b.shiftKey?rt>0?rt-1:et.length-1:rt+1<et.length?rt+1:0;et[st].focus();break}}};return h.addEventListener("keydown",g),()=>{h.removeEventListener("keydown",g)}},[d,a,e,c])}function PanelResizeHandle({children:a=null,className:e="",disabled:c=!1,hitAreaMargins:d,id:h,onBlur:g,onClick:b,onDragging:_e,onFocus:et,onPointerDown:rt,onPointerUp:st,style:$={},tabIndex:_=0,tagName:nt="div",...it}){var ot,lt;const at=reactExports.useRef(null),ct=reactExports.useRef({onClick:b,onDragging:_e,onPointerDown:rt,onPointerUp:st});reactExports.useEffect(()=>{ct.current.onClick=b,ct.current.onDragging=_e,ct.current.onPointerDown=rt,ct.current.onPointerUp=st});const dt=reactExports.useContext(PanelGroupContext);if(dt===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:ht,groupId:pt,registerResizeHandle:ft,startDragging:mt,stopDragging:xt,panelGroupElement:gt}=dt,Et=useUniqueId(h),[St,Pt]=reactExports.useState("inactive"),[Mt,Rt]=reactExports.useState(!1),[Dt,Tt]=reactExports.useState(null),It=reactExports.useRef({state:St});useIsomorphicLayoutEffect$1(()=>{It.current.state=St}),reactExports.useEffect(()=>{if(c)Tt(null);else{const en=ft(Et);Tt(()=>en)}},[c,Et,ft]);const Vt=(ot=d==null?void 0:d.coarse)!==null&&ot!==void 0?ot:15,Bt=(lt=d==null?void 0:d.fine)!==null&&lt!==void 0?lt:5;reactExports.useEffect(()=>{if(c||Dt==null)return;const en=at.current;assert$1(en,"Element ref not attached");let sn=!1;return registerResizeHandle(Et,en,ht,{coarse:Vt,fine:Bt},(Ut,Jt,tn)=>{if(!Jt){Pt("inactive");return}switch(Ut){case"down":{Pt("drag"),sn=!1,assert$1(tn,'Expected event to be defined for "down" action'),mt(Et,tn);const{onDragging:Gt,onPointerDown:hn}=ct.current;Gt==null||Gt(!0),hn==null||hn();break}case"move":{const{state:Gt}=It.current;sn=!0,Gt!=="drag"&&Pt("hover"),assert$1(tn,'Expected event to be defined for "move" action'),Dt(tn);break}case"up":{Pt("hover"),xt();const{onClick:Gt,onDragging:hn,onPointerUp:fn}=ct.current;hn==null||hn(!1),fn==null||fn(),sn||Gt==null||Gt();break}}})},[Vt,ht,c,Bt,ft,Et,Dt,mt,xt]),useWindowSplitterResizeHandlerBehavior({disabled:c,handleId:Et,resizeHandler:Dt,panelGroupElement:gt});const Ct={touchAction:"none",userSelect:"none"};return reactExports.createElement(nt,{...it,children:a,className:e,id:h,onBlur:()=>{Rt(!1),g==null||g()},onFocus:()=>{Rt(!0),et==null||et()},ref:at,role:"separator",style:{...Ct,...$},tabIndex:_,[DATA_ATTRIBUTES.groupDirection]:ht,[DATA_ATTRIBUTES.groupId]:pt,[DATA_ATTRIBUTES.resizeHandle]:"",[DATA_ATTRIBUTES.resizeHandleActive]:St==="drag"?"pointer":Mt?"keyboard":void 0,[DATA_ATTRIBUTES.resizeHandleEnabled]:!c,[DATA_ATTRIBUTES.resizeHandleId]:Et,[DATA_ATTRIBUTES.resizeHandleState]:St})}PanelResizeHandle.displayName="PanelResizeHandle";const ResizablePanelGroup=({className:a,...e})=>jsxRuntimeExports.jsx(PanelGroup,{className:cn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",a),...e}),ResizablePanel=Panel,ResizableHandle=({withHandle:a,className:e,...c})=>jsxRuntimeExports.jsx(PanelResizeHandle,{className:cn("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...c,children:a&&jsxRuntimeExports.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:jsxRuntimeExports.jsx(GripVertical,{className:"h-2.5 w-2.5"})})}),WorkspacePage=()=>{var Pt;const{workspaceId:a}=useParams(),e=useNavigate(),[c]=useSearchParams(),[d,h]=reactExports.useState([]),[g,b]=reactExports.useState(null),[_e,et]=reactExports.useState(!1),[rt,st]=reactExports.useState(!1),[$,_]=reactExports.useState(!1),[nt,it]=reactExports.useState(null),[ot,lt]=reactExports.useState(!1),[at,ct]=reactExports.useState("navy"),{toast:dt}=useToast(),{isCollapsed:ht,toggleCollapse:pt}=useSidebar();reactExports.useEffect(()=>{(async()=>{var Rt;try{const Dt=localStorage.getItem("authToken"),Tt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"}}),It=await Tt.json();if(Tt.ok&&It.success){const Vt=It.data.map(Ct=>({id:Ct.id.toString(),name:Ct.name,description:Ct.description||null,isActive:Ct.id.toString()===a,settings:Ct.settings||{}}));h(Vt);const Bt=Vt.find(Ct=>Ct.id===a);if(Bt){b(Bt);const Ct=((Rt=Bt.settings)==null?void 0:Rt.themeId)||"navy";ct(Ct)}else e("/"),dt({title:"Workspace not found",description:"The requested workspace could not be found",variant:"destructive"})}else dt({title:"Error fetching workspaces",description:It.message||"Failed to load workspaces",variant:"destructive"})}catch{dt({title:"Error fetching workspaces",description:"Network error occurred",variant:"destructive"})}})()},[a,e,dt]),reactExports.useEffect(()=>{const Mt=c.get("chat")==="true",Rt=c.get("sessionId");console.log("🏢 [WORKSPACE-PAGE-DEBUG] URL parameters:",{shouldOpenChat:Mt,sessionId:Rt,workspaceId:a,searchParams:Object.fromEntries(c.entries())}),Mt&&a&&(console.log("🏢 [WORKSPACE-PAGE-DEBUG] Opening chat panel within workspace"),st(!0),Rt&&(console.log(`🏢 [WORKSPACE-PAGE-DEBUG] Setting sessionId: ${Rt}`),it(Rt)))},[c,a]);const ft=Mt=>{e(`/workspace/${Mt}`)},mt=()=>{e("/")},xt=async Mt=>{try{const Rt=localStorage.getItem("authToken"),Dt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{method:"POST",headers:{Authorization:`Bearer ${Rt}`,"Content-Type":"application/json"},body:JSON.stringify({name:Mt})}),Tt=await Dt.json();if(Dt.ok&&Tt.success){const It={id:Tt.data.id.toString(),name:Tt.data.name,description:Tt.data.description||null,isActive:!1};h([...d,It]),dt({title:"Workspace created",description:`Workspace "${Mt}" has been created successfully!`})}else dt({title:"Error creating workspace",description:Tt.message||"Failed to create workspace",variant:"destructive"})}catch{dt({title:"Error creating workspace",description:"Network error occurred",variant:"destructive"})}},gt=async Mt=>{try{const Rt=localStorage.getItem("authToken"),Dt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(Mt)),{method:"DELETE",headers:{Authorization:`Bearer ${Rt}`,"Content-Type":"application/json"}}),Tt=await Dt.json();Dt.ok&&Tt.success?(h(d.filter(It=>It.id!==Mt)),(g==null?void 0:g.id)===Mt&&e("/"),dt({title:"Workspace deleted",description:"Workspace has been deleted successfully"})):dt({title:"Error deleting workspace",description:Tt.message||"Failed to delete workspace",variant:"destructive"})}catch{dt({title:"Error deleting workspace",description:"Network error occurred",variant:"destructive"})}},Et=async(Mt,Rt)=>{try{const Dt=localStorage.getItem("authToken"),Tt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(Mt)),{method:"PUT",headers:{Authorization:`Bearer ${Dt}`,"Content-Type":"application/json"},body:JSON.stringify({name:Rt})}),It=await Tt.json();Tt.ok&&It.success?(h(d.map(Vt=>Vt.id===Mt?{...Vt,name:Rt}:Vt)),(g==null?void 0:g.id)===Mt&&b({...g,name:Rt}),dt({title:"Workspace renamed",description:"Workspace has been renamed successfully"})):dt({title:"Error renaming workspace",description:It.message||"Failed to rename workspace",variant:"destructive"})}catch{dt({title:"Error renaming workspace",description:"Network error occurred",variant:"destructive"})}},St=Mt=>{g&&b({...g,description:Mt})};return g?jsxRuntimeExports.jsx(ThemeProvider,{themeId:at,onThemeChange:ct,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-1 h-screen",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:d,onWorkspaceSelect:ft,onCreateWorkspace:xt,onDeleteWorkspace:gt,onRenameWorkspace:Et,onHomeSelect:mt,isHomeActive:_e,isCollapsed:ht,onToggleCollapse:pt}),jsxRuntimeExports.jsxs(ResizablePanelGroup,{direction:"horizontal",className:"flex-1",children:[jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:rt||$?70:100,minSize:30,children:jsxRuntimeExports.jsx(MainContent,{activeWorkspace:a||null,workspaceName:g.name,workspaceDescription:g.description,onDescriptionUpdate:St,onChatClick:()=>{_(!1),st(!rt)},isChatOpen:rt,onCallClick:()=>{st(!1),_(!$)},isCallOpen:$,isGenerating:ot,onGeneratingChange:lt,currentThemeId:((Pt=g.settings)==null?void 0:Pt.themeId)||"navy"})}),rt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ResizableHandle,{withHandle:!0}),jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:45,minSize:30,maxSize:65,children:jsxRuntimeExports.jsx(ChatPanel,{isOpen:rt,onClose:()=>{st(!1),it(null)},workspaceName:g.name,workspaceId:a||null,fileId:null,initialSessionId:nt})})]}),$&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ResizableHandle,{withHandle:!0}),jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:45,minSize:30,maxSize:65,children:jsxRuntimeExports.jsx(SimplifiedVoiceCallPanel,{isOpen:$,onClose:()=>{_(!1)},workspaceId:a||null,workspaceName:g.name})})]})]})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading workspace..."})]})})};var isCheckBoxInput=a=>a.type==="checkbox",isDateObject=a=>a instanceof Date,isNullOrUndefined=a=>a==null;const isObjectType=a=>typeof a=="object";var isObject=a=>!isNullOrUndefined(a)&&!Array.isArray(a)&&isObjectType(a)&&!isDateObject(a),getEventValue=a=>isObject(a)&&a.target?isCheckBoxInput(a.target)?a.target.checked:a.target.value:a,getNodeParentName=a=>a.substring(0,a.search(/\.\d+(\.|$)/))||a,isNameInFieldArray=(a,e)=>a.has(getNodeParentName(e)),isPlainObject=a=>{const e=a.constructor&&a.constructor.prototype;return isObject(e)&&e.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(a){let e;const c=Array.isArray(a),d=typeof FileList<"u"?a instanceof FileList:!1;if(a instanceof Date)e=new Date(a);else if(!(isWeb&&(a instanceof Blob||d))&&(c||isObject(a)))if(e=c?[]:{},!c&&!isPlainObject(a))e=a;else for(const h in a)a.hasOwnProperty(h)&&(e[h]=cloneObject(a[h]));else return a;return e}var isKey=a=>/^\w*$/.test(a),isUndefined=a=>a===void 0,compact=a=>Array.isArray(a)?a.filter(Boolean):[],stringToPath=a=>compact(a.replace(/["|']|\]/g,"").split(/\.|\[/)),get=(a,e,c)=>{if(!e||!isObject(a))return c;const d=(isKey(e)?[e]:stringToPath(e)).reduce((h,g)=>isNullOrUndefined(h)?h:h[g],a);return isUndefined(d)||d===a?isUndefined(a[e])?c:a[e]:d},isBoolean=a=>typeof a=="boolean",set=(a,e,c)=>{let d=-1;const h=isKey(e)?[e]:stringToPath(e),g=h.length,b=g-1;for(;++d<g;){const _e=h[d];let et=c;if(d!==b){const rt=a[_e];et=isObject(rt)||Array.isArray(rt)?rt:isNaN(+h[d+1])?{}:[]}if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return;a[_e]=et,a=a[_e]}};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React$1.createContext(null);HookFormContext.displayName="HookFormContext";var getProxyFormState=(a,e,c,d=!0)=>{const h={defaultValues:e._defaultValues};for(const g in a)Object.defineProperty(h,g,{get:()=>{const b=g;return e._proxyFormState[b]!==VALIDATION_MODE.all&&(e._proxyFormState[b]=!d||VALIDATION_MODE.all),a[b]}});return h};const useIsomorphicLayoutEffect=typeof window<"u"?React$1.useLayoutEffect:React$1.useEffect;var isString$1=a=>typeof a=="string",generateWatchOutput=(a,e,c,d,h)=>isString$1(a)?(d&&e.watch.add(a),get(c,a,h)):Array.isArray(a)?a.map(g=>(d&&e.watch.add(g),get(c,g))):(d&&(e.watchAll=!0),c),isPrimitive=a=>isNullOrUndefined(a)||!isObjectType(a);function deepEqual(a,e,c=new WeakSet){if(isPrimitive(a)||isPrimitive(e))return a===e;if(isDateObject(a)&&isDateObject(e))return a.getTime()===e.getTime();const d=Object.keys(a),h=Object.keys(e);if(d.length!==h.length)return!1;if(c.has(a)||c.has(e))return!0;c.add(a),c.add(e);for(const g of d){const b=a[g];if(!h.includes(g))return!1;if(g!=="ref"){const _e=e[g];if(isDateObject(b)&&isDateObject(_e)||isObject(b)&&isObject(_e)||Array.isArray(b)&&Array.isArray(_e)?!deepEqual(b,_e,c):b!==_e)return!1}}return!0}var appendErrors=(a,e,c,d,h)=>e?{...c[a],types:{...c[a]&&c[a].types?c[a].types:{},[d]:h||!0}}:{},convertToArrayPayload=a=>Array.isArray(a)?a:[a],createSubject=()=>{let a=[];return{get observers(){return a},next:h=>{for(const g of a)g.next&&g.next(h)},subscribe:h=>(a.push(h),{unsubscribe:()=>{a=a.filter(g=>g!==h)}}),unsubscribe:()=>{a=[]}}},isEmptyObject=a=>isObject(a)&&!Object.keys(a).length,isFileInput=a=>a.type==="file",isFunction$1=a=>typeof a=="function",isHTMLElement=a=>{if(!isWeb)return!1;const e=a?a.ownerDocument:0;return a instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},isMultipleSelect=a=>a.type==="select-multiple",isRadioInput=a=>a.type==="radio",isRadioOrCheckbox=a=>isRadioInput(a)||isCheckBoxInput(a),live=a=>isHTMLElement(a)&&a.isConnected;function baseGet(a,e){const c=e.slice(0,-1).length;let d=0;for(;d<c;)a=isUndefined(a)?d++:a[e[d++]];return a}function isEmptyArray(a){for(const e in a)if(a.hasOwnProperty(e)&&!isUndefined(a[e]))return!1;return!0}function unset(a,e){const c=Array.isArray(e)?e:isKey(e)?[e]:stringToPath(e),d=c.length===1?a:baseGet(a,c),h=c.length-1,g=c[h];return d&&delete d[g],h!==0&&(isObject(d)&&isEmptyObject(d)||Array.isArray(d)&&isEmptyArray(d))&&unset(a,c.slice(0,-1)),a}var objectHasFunction=a=>{for(const e in a)if(isFunction$1(a[e]))return!0;return!1};function markFieldsDirty(a,e={}){const c=Array.isArray(a);if(isObject(a)||c)for(const d in a)Array.isArray(a[d])||isObject(a[d])&&!objectHasFunction(a[d])?(e[d]=Array.isArray(a[d])?[]:{},markFieldsDirty(a[d],e[d])):isNullOrUndefined(a[d])||(e[d]=!0);return e}function getDirtyFieldsFromDefaultValues(a,e,c){const d=Array.isArray(a);if(isObject(a)||d)for(const h in a)Array.isArray(a[h])||isObject(a[h])&&!objectHasFunction(a[h])?isUndefined(e)||isPrimitive(c[h])?c[h]=Array.isArray(a[h])?markFieldsDirty(a[h],[]):{...markFieldsDirty(a[h])}:getDirtyFieldsFromDefaultValues(a[h],isNullOrUndefined(e)?{}:e[h],c[h]):c[h]=!deepEqual(a[h],e[h]);return c}var getDirtyFields=(a,e)=>getDirtyFieldsFromDefaultValues(a,e,markFieldsDirty(e));const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=a=>{if(Array.isArray(a)){if(a.length>1){const e=a.filter(c=>c&&c.checked&&!c.disabled).map(c=>c.value);return{value:e,isValid:!!e.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!isUndefined(a[0].attributes.value)?isUndefined(a[0].value)||a[0].value===""?validResult:{value:a[0].value,isValid:!0}:validResult:defaultResult}return defaultResult},getFieldValueAs=(a,{valueAsNumber:e,valueAsDate:c,setValueAs:d})=>isUndefined(a)?a:e?a===""?NaN:a&&+a:c&&isString$1(a)?new Date(a):d?d(a):a;const defaultReturn={isValid:!1,value:null};var getRadioValue=a=>Array.isArray(a)?a.reduce((e,c)=>c&&c.checked&&!c.disabled?{isValid:!0,value:c.value}:e,defaultReturn):defaultReturn;function getFieldValue(a){const e=a.ref;return isFileInput(e)?e.files:isRadioInput(e)?getRadioValue(a.refs).value:isMultipleSelect(e)?[...e.selectedOptions].map(({value:c})=>c):isCheckBoxInput(e)?getCheckboxValue(a.refs).value:getFieldValueAs(isUndefined(e.value)?a.ref.value:e.value,a)}var getResolverOptions=(a,e,c,d)=>{const h={};for(const g of a){const b=get(e,g);b&&set(h,g,b._f)}return{criteriaMode:c,names:[...a],fields:h,shouldUseNativeValidation:d}},isRegex=a=>a instanceof RegExp,getRuleValue=a=>isUndefined(a)?a:isRegex(a)?a.source:isObject(a)?isRegex(a.value)?a.value.source:a.value:a,getValidationModes=a=>({isOnSubmit:!a||a===VALIDATION_MODE.onSubmit,isOnBlur:a===VALIDATION_MODE.onBlur,isOnChange:a===VALIDATION_MODE.onChange,isOnAll:a===VALIDATION_MODE.all,isOnTouch:a===VALIDATION_MODE.onTouched});const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=a=>!!a&&!!a.validate&&!!(isFunction$1(a.validate)&&a.validate.constructor.name===ASYNC_FUNCTION||isObject(a.validate)&&Object.values(a.validate).find(e=>e.constructor.name===ASYNC_FUNCTION)),hasValidation=a=>a.mount&&(a.required||a.min||a.max||a.maxLength||a.minLength||a.pattern||a.validate),isWatched=(a,e,c)=>!c&&(e.watchAll||e.watch.has(a)||[...e.watch].some(d=>a.startsWith(d)&&/^\.\w+/.test(a.slice(d.length))));const iterateFieldsByAction=(a,e,c,d)=>{for(const h of c||Object.keys(a)){const g=get(a,h);if(g){const{_f:b,..._e}=g;if(b){if(b.refs&&b.refs[0]&&e(b.refs[0],h)&&!d)return!0;if(b.ref&&e(b.ref,b.name)&&!d)return!0;if(iterateFieldsByAction(_e,e))break}else if(isObject(_e)&&iterateFieldsByAction(_e,e))break}}};function schemaErrorLookup(a,e,c){const d=get(a,c);if(d||isKey(c))return{error:d,name:c};const h=c.split(".");for(;h.length;){const g=h.join("."),b=get(e,g),_e=get(a,g);if(b&&!Array.isArray(b)&&c!==g)return{name:c};if(_e&&_e.type)return{name:g,error:_e};if(_e&&_e.root&&_e.root.type)return{name:`${g}.root`,error:_e.root};h.pop()}return{name:c}}var shouldRenderFormState=(a,e,c,d)=>{c(a);const{name:h,...g}=a;return isEmptyObject(g)||Object.keys(g).length>=Object.keys(e).length||Object.keys(g).find(b=>e[b]===(!d||VALIDATION_MODE.all))},shouldSubscribeByName=(a,e,c)=>!a||!e||a===e||convertToArrayPayload(a).some(d=>d&&(c?d===e:d.startsWith(e)||e.startsWith(d))),skipValidation=(a,e,c,d,h)=>h.isOnAll?!1:!c&&h.isOnTouch?!(e||a):(c?d.isOnBlur:h.isOnBlur)?!a:(c?d.isOnChange:h.isOnChange)?a:!0,unsetEmptyArray=(a,e)=>!compact(get(a,e)).length&&unset(a,e),updateFieldArrayRootError=(a,e,c)=>{const d=convertToArrayPayload(get(a,c));return set(d,"root",e[c]),set(a,c,d),a},isMessage=a=>isString$1(a);function getValidateError(a,e,c="validate"){if(isMessage(a)||Array.isArray(a)&&a.every(isMessage)||isBoolean(a)&&!a)return{type:c,message:isMessage(a)?a:"",ref:e}}var getValueAndMessage=a=>isObject(a)&&!isRegex(a)?a:{value:a,message:""},validateField=async(a,e,c,d,h,g)=>{const{ref:b,refs:_e,required:et,maxLength:rt,minLength:st,min:$,max:_,pattern:nt,validate:it,name:ot,valueAsNumber:lt,mount:at}=a._f,ct=get(c,ot);if(!at||e.has(ot))return{};const dt=_e?_e[0]:b,ht=Pt=>{h&&dt.reportValidity&&(dt.setCustomValidity(isBoolean(Pt)?"":Pt||""),dt.reportValidity())},pt={},ft=isRadioInput(b),mt=isCheckBoxInput(b),xt=ft||mt,gt=(lt||isFileInput(b))&&isUndefined(b.value)&&isUndefined(ct)||isHTMLElement(b)&&b.value===""||ct===""||Array.isArray(ct)&&!ct.length,Et=appendErrors.bind(null,ot,d,pt),St=(Pt,Mt,Rt,Dt=INPUT_VALIDATION_RULES.maxLength,Tt=INPUT_VALIDATION_RULES.minLength)=>{const It=Pt?Mt:Rt;pt[ot]={type:Pt?Dt:Tt,message:It,ref:b,...Et(Pt?Dt:Tt,It)}};if(g?!Array.isArray(ct)||!ct.length:et&&(!xt&&(gt||isNullOrUndefined(ct))||isBoolean(ct)&&!ct||mt&&!getCheckboxValue(_e).isValid||ft&&!getRadioValue(_e).isValid)){const{value:Pt,message:Mt}=isMessage(et)?{value:!!et,message:et}:getValueAndMessage(et);if(Pt&&(pt[ot]={type:INPUT_VALIDATION_RULES.required,message:Mt,ref:dt,...Et(INPUT_VALIDATION_RULES.required,Mt)},!d))return ht(Mt),pt}if(!gt&&(!isNullOrUndefined($)||!isNullOrUndefined(_))){let Pt,Mt;const Rt=getValueAndMessage(_),Dt=getValueAndMessage($);if(!isNullOrUndefined(ct)&&!isNaN(ct)){const Tt=b.valueAsNumber||ct&&+ct;isNullOrUndefined(Rt.value)||(Pt=Tt>Rt.value),isNullOrUndefined(Dt.value)||(Mt=Tt<Dt.value)}else{const Tt=b.valueAsDate||new Date(ct),It=Ct=>new Date(new Date().toDateString()+" "+Ct),Vt=b.type=="time",Bt=b.type=="week";isString$1(Rt.value)&&ct&&(Pt=Vt?It(ct)>It(Rt.value):Bt?ct>Rt.value:Tt>new Date(Rt.value)),isString$1(Dt.value)&&ct&&(Mt=Vt?It(ct)<It(Dt.value):Bt?ct<Dt.value:Tt<new Date(Dt.value))}if((Pt||Mt)&&(St(!!Pt,Rt.message,Dt.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!d))return ht(pt[ot].message),pt}if((rt||st)&&!gt&&(isString$1(ct)||g&&Array.isArray(ct))){const Pt=getValueAndMessage(rt),Mt=getValueAndMessage(st),Rt=!isNullOrUndefined(Pt.value)&&ct.length>+Pt.value,Dt=!isNullOrUndefined(Mt.value)&&ct.length<+Mt.value;if((Rt||Dt)&&(St(Rt,Pt.message,Mt.message),!d))return ht(pt[ot].message),pt}if(nt&&!gt&&isString$1(ct)){const{value:Pt,message:Mt}=getValueAndMessage(nt);if(isRegex(Pt)&&!ct.match(Pt)&&(pt[ot]={type:INPUT_VALIDATION_RULES.pattern,message:Mt,ref:b,...Et(INPUT_VALIDATION_RULES.pattern,Mt)},!d))return ht(Mt),pt}if(it){if(isFunction$1(it)){const Pt=await it(ct,c),Mt=getValidateError(Pt,dt);if(Mt&&(pt[ot]={...Mt,...Et(INPUT_VALIDATION_RULES.validate,Mt.message)},!d))return ht(Mt.message),pt}else if(isObject(it)){let Pt={};for(const Mt in it){if(!isEmptyObject(Pt)&&!d)break;const Rt=getValidateError(await it[Mt](ct,c),dt,Mt);Rt&&(Pt={...Rt,...Et(Mt,Rt.message)},ht(Rt.message),d&&(pt[ot]=Pt))}if(!isEmptyObject(Pt)&&(pt[ot]={ref:dt,...Pt},!d))return pt}}return ht(!0),pt};const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(a={}){let e={...defaultOptions,...a},c={submitCount:0,isDirty:!1,isReady:!1,isLoading:isFunction$1(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},d={},h=isObject(e.defaultValues)||isObject(e.values)?cloneObject(e.defaultValues||e.values)||{}:{},g=e.shouldUnregister?{}:cloneObject(h),b={action:!1,mount:!1,watch:!1},_e={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},et,rt=0;const st={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let $={...st};const _={array:createSubject(),state:createSubject()},nt=e.criteriaMode===VALIDATION_MODE.all,it=Kt=>Xt=>{clearTimeout(rt),rt=setTimeout(Kt,Xt)},ot=async Kt=>{if(!e.disabled&&(st.isValid||$.isValid||Kt)){const Xt=e.resolver?isEmptyObject((await mt()).errors):await gt(d,!0);Xt!==c.isValid&&_.state.next({isValid:Xt})}},lt=(Kt,Xt)=>{!e.disabled&&(st.isValidating||st.validatingFields||$.isValidating||$.validatingFields)&&((Kt||Array.from(_e.mount)).forEach(on=>{on&&(Xt?set(c.validatingFields,on,Xt):unset(c.validatingFields,on))}),_.state.next({validatingFields:c.validatingFields,isValidating:!isEmptyObject(c.validatingFields)}))},at=(Kt,Xt=[],on,vn,Cn=!0,yn=!0)=>{if(vn&&on&&!e.disabled){if(b.action=!0,yn&&Array.isArray(get(d,Kt))){const nn=on(get(d,Kt),vn.argA,vn.argB);Cn&&set(d,Kt,nn)}if(yn&&Array.isArray(get(c.errors,Kt))){const nn=on(get(c.errors,Kt),vn.argA,vn.argB);Cn&&set(c.errors,Kt,nn),unsetEmptyArray(c.errors,Kt)}if((st.touchedFields||$.touchedFields)&&yn&&Array.isArray(get(c.touchedFields,Kt))){const nn=on(get(c.touchedFields,Kt),vn.argA,vn.argB);Cn&&set(c.touchedFields,Kt,nn)}(st.dirtyFields||$.dirtyFields)&&(c.dirtyFields=getDirtyFields(h,g)),_.state.next({name:Kt,isDirty:St(Kt,Xt),dirtyFields:c.dirtyFields,errors:c.errors,isValid:c.isValid})}else set(g,Kt,Xt)},ct=(Kt,Xt)=>{set(c.errors,Kt,Xt),_.state.next({errors:c.errors})},dt=Kt=>{c.errors=Kt,_.state.next({errors:c.errors,isValid:!1})},ht=(Kt,Xt,on,vn)=>{const Cn=get(d,Kt);if(Cn){const yn=get(g,Kt,isUndefined(on)?get(h,Kt):on);isUndefined(yn)||vn&&vn.defaultChecked||Xt?set(g,Kt,Xt?yn:getFieldValue(Cn._f)):Rt(Kt,yn),b.mount&&ot()}},pt=(Kt,Xt,on,vn,Cn)=>{let yn=!1,nn=!1;const Qt={name:Kt};if(!e.disabled){if(!on||vn){(st.isDirty||$.isDirty)&&(nn=c.isDirty,c.isDirty=Qt.isDirty=St(),yn=nn!==Qt.isDirty);const bn=deepEqual(get(h,Kt),Xt);nn=!!get(c.dirtyFields,Kt),bn?unset(c.dirtyFields,Kt):set(c.dirtyFields,Kt,!0),Qt.dirtyFields=c.dirtyFields,yn=yn||(st.dirtyFields||$.dirtyFields)&&nn!==!bn}if(on){const bn=get(c.touchedFields,Kt);bn||(set(c.touchedFields,Kt,on),Qt.touchedFields=c.touchedFields,yn=yn||(st.touchedFields||$.touchedFields)&&bn!==on)}yn&&Cn&&_.state.next(Qt)}return yn?Qt:{}},ft=(Kt,Xt,on,vn)=>{const Cn=get(c.errors,Kt),yn=(st.isValid||$.isValid)&&isBoolean(Xt)&&c.isValid!==Xt;if(e.delayError&&on?(et=it(()=>ct(Kt,on)),et(e.delayError)):(clearTimeout(rt),et=null,on?set(c.errors,Kt,on):unset(c.errors,Kt)),(on?!deepEqual(Cn,on):Cn)||!isEmptyObject(vn)||yn){const nn={...vn,...yn&&isBoolean(Xt)?{isValid:Xt}:{},errors:c.errors,name:Kt};c={...c,...nn},_.state.next(nn)}},mt=async Kt=>{lt(Kt,!0);const Xt=await e.resolver(g,e.context,getResolverOptions(Kt||_e.mount,d,e.criteriaMode,e.shouldUseNativeValidation));return lt(Kt),Xt},xt=async Kt=>{const{errors:Xt}=await mt(Kt);if(Kt)for(const on of Kt){const vn=get(Xt,on);vn?set(c.errors,on,vn):unset(c.errors,on)}else c.errors=Xt;return Xt},gt=async(Kt,Xt,on={valid:!0})=>{for(const vn in Kt){const Cn=Kt[vn];if(Cn){const{_f:yn,...nn}=Cn;if(yn){const Qt=_e.array.has(yn.name),bn=Cn._f&&hasPromiseValidation(Cn._f);bn&&st.validatingFields&&lt([vn],!0);const An=await validateField(Cn,_e.disabled,g,nt,e.shouldUseNativeValidation&&!Xt,Qt);if(bn&&st.validatingFields&&lt([vn]),An[yn.name]&&(on.valid=!1,Xt))break;!Xt&&(get(An,yn.name)?Qt?updateFieldArrayRootError(c.errors,An,yn.name):set(c.errors,yn.name,An[yn.name]):unset(c.errors,yn.name))}!isEmptyObject(nn)&&await gt(nn,Xt,on)}}return on.valid},Et=()=>{for(const Kt of _e.unMount){const Xt=get(d,Kt);Xt&&(Xt._f.refs?Xt._f.refs.every(on=>!live(on)):!live(Xt._f.ref))&&Gt(Kt)}_e.unMount=new Set},St=(Kt,Xt)=>!e.disabled&&(Kt&&Xt&&set(g,Kt,Xt),!deepEqual(Ct(),h)),Pt=(Kt,Xt,on)=>generateWatchOutput(Kt,_e,{...b.mount?g:isUndefined(Xt)?h:isString$1(Kt)?{[Kt]:Xt}:Xt},on,Xt),Mt=Kt=>compact(get(b.mount?g:h,Kt,e.shouldUnregister?get(h,Kt,[]):[])),Rt=(Kt,Xt,on={})=>{const vn=get(d,Kt);let Cn=Xt;if(vn){const yn=vn._f;yn&&(!yn.disabled&&set(g,Kt,getFieldValueAs(Xt,yn)),Cn=isHTMLElement(yn.ref)&&isNullOrUndefined(Xt)?"":Xt,isMultipleSelect(yn.ref)?[...yn.ref.options].forEach(nn=>nn.selected=Cn.includes(nn.value)):yn.refs?isCheckBoxInput(yn.ref)?yn.refs.forEach(nn=>{(!nn.defaultChecked||!nn.disabled)&&(Array.isArray(Cn)?nn.checked=!!Cn.find(Qt=>Qt===nn.value):nn.checked=Cn===nn.value||!!Cn)}):yn.refs.forEach(nn=>nn.checked=nn.value===Cn):isFileInput(yn.ref)?yn.ref.value="":(yn.ref.value=Cn,yn.ref.type||_.state.next({name:Kt,values:cloneObject(g)})))}(on.shouldDirty||on.shouldTouch)&&pt(Kt,Cn,on.shouldTouch,on.shouldDirty,!0),on.shouldValidate&&Bt(Kt)},Dt=(Kt,Xt,on)=>{for(const vn in Xt){if(!Xt.hasOwnProperty(vn))return;const Cn=Xt[vn],yn=Kt+"."+vn,nn=get(d,yn);(_e.array.has(Kt)||isObject(Cn)||nn&&!nn._f)&&!isDateObject(Cn)?Dt(yn,Cn,on):Rt(yn,Cn,on)}},Tt=(Kt,Xt,on={})=>{const vn=get(d,Kt),Cn=_e.array.has(Kt),yn=cloneObject(Xt);set(g,Kt,yn),Cn?(_.array.next({name:Kt,values:cloneObject(g)}),(st.isDirty||st.dirtyFields||$.isDirty||$.dirtyFields)&&on.shouldDirty&&_.state.next({name:Kt,dirtyFields:getDirtyFields(h,g),isDirty:St(Kt,yn)})):vn&&!vn._f&&!isNullOrUndefined(yn)?Dt(Kt,yn,on):Rt(Kt,yn,on),isWatched(Kt,_e)&&_.state.next({...c,name:Kt}),_.state.next({name:b.mount?Kt:void 0,values:cloneObject(g)})},It=async Kt=>{b.mount=!0;const Xt=Kt.target;let on=Xt.name,vn=!0;const Cn=get(d,on),yn=bn=>{vn=Number.isNaN(bn)||isDateObject(bn)&&isNaN(bn.getTime())||deepEqual(bn,get(g,on,bn))},nn=getValidationModes(e.mode),Qt=getValidationModes(e.reValidateMode);if(Cn){let bn,An;const In=Xt.type?getFieldValue(Cn._f):getEventValue(Kt),Un=Kt.type===EVENTS.BLUR||Kt.type===EVENTS.FOCUS_OUT,Vn=!hasValidation(Cn._f)&&!e.resolver&&!get(c.errors,on)&&!Cn._f.deps||skipValidation(Un,get(c.touchedFields,on),c.isSubmitted,Qt,nn),ir=isWatched(on,_e,Un);set(g,on,In),Un?(Cn._f.onBlur&&Cn._f.onBlur(Kt),et&&et(0)):Cn._f.onChange&&Cn._f.onChange(Kt);const Fn=pt(on,In,Un),cr=!isEmptyObject(Fn)||ir;if(!Un&&_.state.next({name:on,type:Kt.type,values:cloneObject(g)}),Vn)return(st.isValid||$.isValid)&&(e.mode==="onBlur"?Un&&ot():Un||ot()),cr&&_.state.next({name:on,...ir?{}:Fn});if(!Un&&ir&&_.state.next({...c}),e.resolver){const{errors:Gn}=await mt([on]);if(yn(In),vn){const Cr=schemaErrorLookup(c.errors,d,on),kr=schemaErrorLookup(Gn,d,Cr.name||on);bn=kr.error,on=kr.name,An=isEmptyObject(Gn)}}else lt([on],!0),bn=(await validateField(Cn,_e.disabled,g,nt,e.shouldUseNativeValidation))[on],lt([on]),yn(In),vn&&(bn?An=!1:(st.isValid||$.isValid)&&(An=await gt(d,!0)));vn&&(Cn._f.deps&&Bt(Cn._f.deps),ft(on,An,bn,Fn))}},Vt=(Kt,Xt)=>{if(get(c.errors,Xt)&&Kt.focus)return Kt.focus(),1},Bt=async(Kt,Xt={})=>{let on,vn;const Cn=convertToArrayPayload(Kt);if(e.resolver){const yn=await xt(isUndefined(Kt)?Kt:Cn);on=isEmptyObject(yn),vn=Kt?!Cn.some(nn=>get(yn,nn)):on}else Kt?(vn=(await Promise.all(Cn.map(async yn=>{const nn=get(d,yn);return await gt(nn&&nn._f?{[yn]:nn}:nn)}))).every(Boolean),!(!vn&&!c.isValid)&&ot()):vn=on=await gt(d);return _.state.next({...!isString$1(Kt)||(st.isValid||$.isValid)&&on!==c.isValid?{}:{name:Kt},...e.resolver||!Kt?{isValid:on}:{},errors:c.errors}),Xt.shouldFocus&&!vn&&iterateFieldsByAction(d,Vt,Kt?Cn:_e.mount),vn},Ct=Kt=>{const Xt={...b.mount?g:h};return isUndefined(Kt)?Xt:isString$1(Kt)?get(Xt,Kt):Kt.map(on=>get(Xt,on))},en=(Kt,Xt)=>({invalid:!!get((Xt||c).errors,Kt),isDirty:!!get((Xt||c).dirtyFields,Kt),error:get((Xt||c).errors,Kt),isValidating:!!get(c.validatingFields,Kt),isTouched:!!get((Xt||c).touchedFields,Kt)}),sn=Kt=>{Kt&&convertToArrayPayload(Kt).forEach(Xt=>unset(c.errors,Xt)),_.state.next({errors:Kt?c.errors:{}})},kt=(Kt,Xt,on)=>{const vn=(get(d,Kt,{_f:{}})._f||{}).ref,Cn=get(c.errors,Kt)||{},{ref:yn,message:nn,type:Qt,...bn}=Cn;set(c.errors,Kt,{...bn,...Xt,ref:vn}),_.state.next({name:Kt,errors:c.errors,isValid:!1}),on&&on.shouldFocus&&vn&&vn.focus&&vn.focus()},Ut=(Kt,Xt)=>isFunction$1(Kt)?_.state.subscribe({next:on=>"values"in on&&Kt(Pt(void 0,Xt),on)}):Pt(Kt,Xt,!0),Jt=Kt=>_.state.subscribe({next:Xt=>{shouldSubscribeByName(Kt.name,Xt.name,Kt.exact)&&shouldRenderFormState(Xt,Kt.formState||st,Wn,Kt.reRenderRoot)&&Kt.callback({values:{...g},...c,...Xt,defaultValues:h})}}).unsubscribe,tn=Kt=>(b.mount=!0,$={...$,...Kt.formState},Jt({...Kt,formState:$})),Gt=(Kt,Xt={})=>{for(const on of Kt?convertToArrayPayload(Kt):_e.mount)_e.mount.delete(on),_e.array.delete(on),Xt.keepValue||(unset(d,on),unset(g,on)),!Xt.keepError&&unset(c.errors,on),!Xt.keepDirty&&unset(c.dirtyFields,on),!Xt.keepTouched&&unset(c.touchedFields,on),!Xt.keepIsValidating&&unset(c.validatingFields,on),!e.shouldUnregister&&!Xt.keepDefaultValue&&unset(h,on);_.state.next({values:cloneObject(g)}),_.state.next({...c,...Xt.keepDirty?{isDirty:St()}:{}}),!Xt.keepIsValid&&ot()},hn=({disabled:Kt,name:Xt})=>{(isBoolean(Kt)&&b.mount||Kt||_e.disabled.has(Xt))&&(Kt?_e.disabled.add(Xt):_e.disabled.delete(Xt))},fn=(Kt,Xt={})=>{let on=get(d,Kt);const vn=isBoolean(Xt.disabled)||isBoolean(e.disabled);return set(d,Kt,{...on||{},_f:{...on&&on._f?on._f:{ref:{name:Kt}},name:Kt,mount:!0,...Xt}}),_e.mount.add(Kt),on?hn({disabled:isBoolean(Xt.disabled)?Xt.disabled:e.disabled,name:Kt}):ht(Kt,!0,Xt.value),{...vn?{disabled:Xt.disabled||e.disabled}:{},...e.progressive?{required:!!Xt.required,min:getRuleValue(Xt.min),max:getRuleValue(Xt.max),minLength:getRuleValue(Xt.minLength),maxLength:getRuleValue(Xt.maxLength),pattern:getRuleValue(Xt.pattern)}:{},name:Kt,onChange:It,onBlur:It,ref:Cn=>{if(Cn){fn(Kt,Xt),on=get(d,Kt);const yn=isUndefined(Cn.value)&&Cn.querySelectorAll&&Cn.querySelectorAll("input,select,textarea")[0]||Cn,nn=isRadioOrCheckbox(yn),Qt=on._f.refs||[];if(nn?Qt.find(bn=>bn===yn):yn===on._f.ref)return;set(d,Kt,{_f:{...on._f,...nn?{refs:[...Qt.filter(live),yn,...Array.isArray(get(h,Kt))?[{}]:[]],ref:{type:yn.type,name:Kt}}:{ref:yn}}}),ht(Kt,!1,void 0,yn)}else on=get(d,Kt,{}),on._f&&(on._f.mount=!1),(e.shouldUnregister||Xt.shouldUnregister)&&!(isNameInFieldArray(_e.array,Kt)&&b.action)&&_e.unMount.add(Kt)}}},gn=()=>e.shouldFocusError&&iterateFieldsByAction(d,Vt,_e.mount),kn=Kt=>{isBoolean(Kt)&&(_.state.next({disabled:Kt}),iterateFieldsByAction(d,(Xt,on)=>{const vn=get(d,on);vn&&(Xt.disabled=vn._f.disabled||Kt,Array.isArray(vn._f.refs)&&vn._f.refs.forEach(Cn=>{Cn.disabled=vn._f.disabled||Kt}))},0,!1))},On=(Kt,Xt)=>async on=>{let vn;on&&(on.preventDefault&&on.preventDefault(),on.persist&&on.persist());let Cn=cloneObject(g);if(_.state.next({isSubmitting:!0}),e.resolver){const{errors:yn,values:nn}=await mt();c.errors=yn,Cn=cloneObject(nn)}else await gt(d);if(_e.disabled.size)for(const yn of _e.disabled)unset(Cn,yn);if(unset(c.errors,"root"),isEmptyObject(c.errors)){_.state.next({errors:{}});try{await Kt(Cn,on)}catch(yn){vn=yn}}else Xt&&await Xt({...c.errors},on),gn(),setTimeout(gn);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(c.errors)&&!vn,submitCount:c.submitCount+1,errors:c.errors}),vn)throw vn},un=(Kt,Xt={})=>{get(d,Kt)&&(isUndefined(Xt.defaultValue)?Tt(Kt,cloneObject(get(h,Kt))):(Tt(Kt,Xt.defaultValue),set(h,Kt,cloneObject(Xt.defaultValue))),Xt.keepTouched||unset(c.touchedFields,Kt),Xt.keepDirty||(unset(c.dirtyFields,Kt),c.isDirty=Xt.defaultValue?St(Kt,cloneObject(get(h,Kt))):St()),Xt.keepError||(unset(c.errors,Kt),st.isValid&&ot()),_.state.next({...c}))},Sn=(Kt,Xt={})=>{const on=Kt?cloneObject(Kt):h,vn=cloneObject(on),Cn=isEmptyObject(Kt),yn=Cn?h:vn;if(Xt.keepDefaultValues||(h=on),!Xt.keepValues){if(Xt.keepDirtyValues){const nn=new Set([..._e.mount,...Object.keys(getDirtyFields(h,g))]);for(const Qt of Array.from(nn))get(c.dirtyFields,Qt)?set(yn,Qt,get(g,Qt)):Tt(Qt,get(yn,Qt))}else{if(isWeb&&isUndefined(Kt))for(const nn of _e.mount){const Qt=get(d,nn);if(Qt&&Qt._f){const bn=Array.isArray(Qt._f.refs)?Qt._f.refs[0]:Qt._f.ref;if(isHTMLElement(bn)){const An=bn.closest("form");if(An){An.reset();break}}}}if(Xt.keepFieldsRef)for(const nn of _e.mount)Tt(nn,get(yn,nn));else d={}}g=e.shouldUnregister?Xt.keepDefaultValues?cloneObject(h):{}:cloneObject(yn),_.array.next({values:{...yn}}),_.state.next({values:{...yn}})}_e={mount:Xt.keepDirtyValues?_e.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!st.isValid||!!Xt.keepIsValid||!!Xt.keepDirtyValues,b.watch=!!e.shouldUnregister,_.state.next({submitCount:Xt.keepSubmitCount?c.submitCount:0,isDirty:Cn?!1:Xt.keepDirty?c.isDirty:!!(Xt.keepDefaultValues&&!deepEqual(Kt,h)),isSubmitted:Xt.keepIsSubmitted?c.isSubmitted:!1,dirtyFields:Cn?{}:Xt.keepDirtyValues?Xt.keepDefaultValues&&g?getDirtyFields(h,g):c.dirtyFields:Xt.keepDefaultValues&&Kt?getDirtyFields(h,Kt):Xt.keepDirty?c.dirtyFields:{},touchedFields:Xt.keepTouched?c.touchedFields:{},errors:Xt.keepErrors?c.errors:{},isSubmitSuccessful:Xt.keepIsSubmitSuccessful?c.isSubmitSuccessful:!1,isSubmitting:!1})},Ln=(Kt,Xt)=>Sn(isFunction$1(Kt)?Kt(g):Kt,Xt),$n=(Kt,Xt={})=>{const on=get(d,Kt),vn=on&&on._f;if(vn){const Cn=vn.refs?vn.refs[0]:vn.ref;Cn.focus&&(Cn.focus(),Xt.shouldSelect&&isFunction$1(Cn.select)&&Cn.select())}},Wn=Kt=>{c={...c,...Kt}},or={control:{register:fn,unregister:Gt,getFieldState:en,handleSubmit:On,setError:kt,_subscribe:Jt,_runSchema:mt,_focusError:gn,_getWatch:Pt,_getDirty:St,_setValid:ot,_setFieldArray:at,_setDisabledField:hn,_setErrors:dt,_getFieldArray:Mt,_reset:Sn,_resetDefaultValues:()=>isFunction$1(e.defaultValues)&&e.defaultValues().then(Kt=>{Ln(Kt,e.resetOptions),_.state.next({isLoading:!1})}),_removeUnmounted:Et,_disableForm:kn,_subjects:_,_proxyFormState:st,get _fields(){return d},get _formValues(){return g},get _state(){return b},set _state(Kt){b=Kt},get _defaultValues(){return h},get _names(){return _e},set _names(Kt){_e=Kt},get _formState(){return c},get _options(){return e},set _options(Kt){e={...e,...Kt}}},subscribe:tn,trigger:Bt,register:fn,handleSubmit:On,watch:Ut,setValue:Tt,getValues:Ct,reset:Ln,resetField:un,clearErrors:sn,unregister:Gt,setError:kt,setFocus:$n,getFieldState:en};return{...or,formControl:or}}function useForm(a={}){const e=React$1.useRef(void 0),c=React$1.useRef(void 0),[d,h]=React$1.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$1(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,isReady:!1,defaultValues:isFunction$1(a.defaultValues)?void 0:a.defaultValues});if(!e.current)if(a.formControl)e.current={...a.formControl,formState:d},a.defaultValues&&!isFunction$1(a.defaultValues)&&a.formControl.reset(a.defaultValues,a.resetOptions);else{const{formControl:b,..._e}=createFormControl(a);e.current={..._e,formState:d}}const g=e.current.control;return g._options=a,useIsomorphicLayoutEffect(()=>{const b=g._subscribe({formState:g._proxyFormState,callback:()=>h({...g._formState}),reRenderRoot:!0});return h(_e=>({..._e,isReady:!0})),g._formState.isReady=!0,b},[g]),React$1.useEffect(()=>g._disableForm(a.disabled),[g,a.disabled]),React$1.useEffect(()=>{a.mode&&(g._options.mode=a.mode),a.reValidateMode&&(g._options.reValidateMode=a.reValidateMode)},[g,a.mode,a.reValidateMode]),React$1.useEffect(()=>{a.errors&&(g._setErrors(a.errors),g._focusError())},[g,a.errors]),React$1.useEffect(()=>{a.shouldUnregister&&g._subjects.state.next({values:g._getWatch()})},[g,a.shouldUnregister]),React$1.useEffect(()=>{if(g._proxyFormState.isDirty){const b=g._getDirty();b!==d.isDirty&&g._subjects.state.next({isDirty:b})}},[g,d.isDirty]),React$1.useEffect(()=>{a.values&&!deepEqual(a.values,c.current)?(g._reset(a.values,{keepFieldsRef:!0,...g._options.resetOptions}),c.current=a.values,h(b=>({...b}))):g._resetDefaultValues()},[g,a.values]),React$1.useEffect(()=>{g._state.mount||(g._setValid(),g._state.mount=!0),g._state.watch&&(g._state.watch=!1,g._subjects.state.next({...g._formState})),g._removeUnmounted()}),e.current.formState=getProxyFormState(d,g),e.current}const s=(a,e,c)=>{if(a&&"reportValidity"in a){const d=get(c,e);a.setCustomValidity(d&&d.message||""),a.reportValidity()}},o=(a,e)=>{for(const c in e.fields){const d=e.fields[c];d&&d.ref&&"reportValidity"in d.ref?s(d.ref,c,a):d.refs&&d.refs.forEach(h=>s(h,c,a))}},r=(a,e)=>{e.shouldUseNativeValidation&&o(a,e);const c={};for(const d in a){const h=get(e.fields,d),g=Object.assign(a[d]||{},{ref:h&&h.ref});if(i(e.names||Object.keys(a),d)){const b=Object.assign({},get(c,d));set(b,"root",g),set(c,d,b)}else set(c,d,g)}return c},i=(a,e)=>a.some(c=>c.startsWith(e+"."));var n=function(a,e){for(var c={};a.length;){var d=a[0],h=d.code,g=d.message,b=d.path.join(".");if(!c[b])if("unionErrors"in d){var _e=d.unionErrors[0].errors[0];c[b]={message:_e.message,type:_e.code}}else c[b]={message:g,type:h};if("unionErrors"in d&&d.unionErrors.forEach(function(st){return st.errors.forEach(function($){return a.push($)})}),e){var et=c[b].types,rt=et&&et[d.code];c[b]=appendErrors(b,e,c,h,rt?[].concat(rt,d.message):d.message)}a.shift()}return c},t=function(a,e,c){return c===void 0&&(c={}),function(d,h,g){try{return Promise.resolve(function(b,_e){try{var et=Promise.resolve(a[c.mode==="sync"?"parse":"parseAsync"](d,e)).then(function(rt){return g.shouldUseNativeValidation&&o({},g),{errors:{},values:c.raw?d:rt}})}catch(rt){return _e(rt)}return et&&et.then?et.then(void 0,_e):et}(0,function(b){if(function(_e){return Array.isArray(_e==null?void 0:_e.errors)}(b))return{values:{},errors:r(n(b.errors,!g.shouldUseNativeValidation&&g.criteriaMode==="all"),g)};throw b}))}catch(b){return Promise.reject(b)}}},util;(function(a){a.assertEqual=h=>{};function e(h){}a.assertIs=e;function c(h){throw new Error}a.assertNever=c,a.arrayToEnum=h=>{const g={};for(const b of h)g[b]=b;return g},a.getValidEnumValues=h=>{const g=a.objectKeys(h).filter(_e=>typeof h[h[_e]]!="number"),b={};for(const _e of g)b[_e]=h[_e];return a.objectValues(b)},a.objectValues=h=>a.objectKeys(h).map(function(g){return h[g]}),a.objectKeys=typeof Object.keys=="function"?h=>Object.keys(h):h=>{const g=[];for(const b in h)Object.prototype.hasOwnProperty.call(h,b)&&g.push(b);return g},a.find=(h,g)=>{for(const b of h)if(g(b))return b},a.isInteger=typeof Number.isInteger=="function"?h=>Number.isInteger(h):h=>typeof h=="number"&&Number.isFinite(h)&&Math.floor(h)===h;function d(h,g=" | "){return h.map(b=>typeof b=="string"?`'${b}'`:b).join(g)}a.joinValues=d,a.jsonStringifyReplacer=(h,g)=>typeof g=="bigint"?g.toString():g})(util||(util={}));var objectUtil;(function(a){a.mergeShapes=(e,c)=>({...e,...c})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=a=>{switch(typeof a){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(a)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(a)?ZodParsedType.array:a===null?ZodParsedType.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&a instanceof Map?ZodParsedType.map:typeof Set<"u"&&a instanceof Set?ZodParsedType.set:typeof Date<"u"&&a instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=d=>{this.issues=[...this.issues,d]},this.addIssues=(d=[])=>{this.issues=[...this.issues,...d]};const c=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,c):this.__proto__=c,this.name="ZodError",this.issues=e}format(e){const c=e||function(g){return g.message},d={_errors:[]},h=g=>{for(const b of g.issues)if(b.code==="invalid_union")b.unionErrors.map(h);else if(b.code==="invalid_return_type")h(b.returnTypeError);else if(b.code==="invalid_arguments")h(b.argumentsError);else if(b.path.length===0)d._errors.push(c(b));else{let _e=d,et=0;for(;et<b.path.length;){const rt=b.path[et];et===b.path.length-1?(_e[rt]=_e[rt]||{_errors:[]},_e[rt]._errors.push(c(b))):_e[rt]=_e[rt]||{_errors:[]},_e=_e[rt],et++}}};return h(this),d}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=c=>c.message){const c={},d=[];for(const h of this.issues)if(h.path.length>0){const g=h.path[0];c[g]=c[g]||[],c[g].push(e(h))}else d.push(e(h));return{formErrors:d,fieldErrors:c}}get formErrors(){return this.flatten()}}ZodError.create=a=>new ZodError(a);const errorMap=(a,e)=>{let c;switch(a.code){case ZodIssueCode.invalid_type:a.received===ZodParsedType.undefined?c="Required":c=`Expected ${a.expected}, received ${a.received}`;break;case ZodIssueCode.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(a.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:c=`Unrecognized key(s) in object: ${util.joinValues(a.keys,", ")}`;break;case ZodIssueCode.invalid_union:c="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${util.joinValues(a.options)}`;break;case ZodIssueCode.invalid_enum_value:c=`Invalid enum value. Expected ${util.joinValues(a.options)}, received '${a.received}'`;break;case ZodIssueCode.invalid_arguments:c="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:c="Invalid function return type";break;case ZodIssueCode.invalid_date:c="Invalid date";break;case ZodIssueCode.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(c=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(c=`${c} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?c=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?c=`Invalid input: must end with "${a.validation.endsWith}"`:util.assertNever(a.validation):a.validation!=="regex"?c=`Invalid ${a.validation}`:c="Invalid";break;case ZodIssueCode.too_small:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?c=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:c="Invalid input";break;case ZodIssueCode.too_big:a.type==="array"?c=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?c=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?c=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?c=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?c=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:c="Invalid input";break;case ZodIssueCode.custom:c="Invalid input";break;case ZodIssueCode.invalid_intersection_types:c="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:c=`Number must be a multiple of ${a.multipleOf}`;break;case ZodIssueCode.not_finite:c="Number must be finite";break;default:c=e.defaultError,util.assertNever(a)}return{message:c}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=a=>{const{data:e,path:c,errorMaps:d,issueData:h}=a,g=[...c,...h.path||[]],b={...h,path:g};if(h.message!==void 0)return{...h,path:g,message:h.message};let _e="";const et=d.filter(rt=>!!rt).slice().reverse();for(const rt of et)_e=rt(b,{data:e,defaultError:_e}).message;return{...h,path:g,message:_e}};function addIssueToContext(a,e){const c=getErrorMap(),d=makeIssue({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,c,c===errorMap?void 0:errorMap].filter(h=>!!h)});a.common.issues.push(d)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,c){const d=[];for(const h of c){if(h.status==="aborted")return INVALID;h.status==="dirty"&&e.dirty(),d.push(h.value)}return{status:e.value,value:d}}static async mergeObjectAsync(e,c){const d=[];for(const h of c){const g=await h.key,b=await h.value;d.push({key:g,value:b})}return ParseStatus.mergeObjectSync(e,d)}static mergeObjectSync(e,c){const d={};for(const h of c){const{key:g,value:b}=h;if(g.status==="aborted"||b.status==="aborted")return INVALID;g.status==="dirty"&&e.dirty(),b.status==="dirty"&&e.dirty(),g.value!=="__proto__"&&(typeof b.value<"u"||h.alwaysSet)&&(d[g.value]=b.value)}return{status:e.value,value:d}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=a=>({status:"dirty",value:a}),OK=a=>({status:"valid",value:a}),isAborted=a=>a.status==="aborted",isDirty=a=>a.status==="dirty",isValid=a=>a.status==="valid",isAsync=a=>typeof Promise<"u"&&a instanceof Promise;var errorUtil;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(e,c,d,h){this._cachedPath=[],this.parent=e,this.data=c,this._path=d,this._key=h}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(a,e)=>{if(isValid(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const c=new ZodError(a.common.issues);return this._error=c,this._error}}};function processCreateParams(a){if(!a)return{};const{errorMap:e,invalid_type_error:c,required_error:d,description:h}=a;if(e&&(c||d))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:h}:{errorMap:(b,_e)=>{const{message:et}=a;return b.code==="invalid_enum_value"?{message:et??_e.defaultError}:typeof _e.data>"u"?{message:et??d??_e.defaultError}:b.code!=="invalid_type"?{message:_e.defaultError}:{message:et??c??_e.defaultError}},description:h}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,c){return c||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const c=this._parse(e);if(isAsync(c))throw new Error("Synchronous parse encountered promise.");return c}_parseAsync(e){const c=this._parse(e);return Promise.resolve(c)}parse(e,c){const d=this.safeParse(e,c);if(d.success)return d.data;throw d.error}safeParse(e,c){const d={common:{issues:[],async:(c==null?void 0:c.async)??!1,contextualErrorMap:c==null?void 0:c.errorMap},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},h=this._parseSync({data:e,path:d.path,parent:d});return handleResult(d,h)}"~validate"(e){var d,h;const c={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const g=this._parseSync({data:e,path:[],parent:c});return isValid(g)?{value:g.value}:{issues:c.common.issues}}catch(g){(h=(d=g==null?void 0:g.message)==null?void 0:d.toLowerCase())!=null&&h.includes("encountered")&&(this["~standard"].async=!0),c.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:c}).then(g=>isValid(g)?{value:g.value}:{issues:c.common.issues})}async parseAsync(e,c){const d=await this.safeParseAsync(e,c);if(d.success)return d.data;throw d.error}async safeParseAsync(e,c){const d={common:{issues:[],contextualErrorMap:c==null?void 0:c.errorMap,async:!0},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},h=this._parse({data:e,path:d.path,parent:d}),g=await(isAsync(h)?h:Promise.resolve(h));return handleResult(d,g)}refine(e,c){const d=h=>typeof c=="string"||typeof c>"u"?{message:c}:typeof c=="function"?c(h):c;return this._refinement((h,g)=>{const b=e(h),_e=()=>g.addIssue({code:ZodIssueCode.custom,...d(h)});return typeof Promise<"u"&&b instanceof Promise?b.then(et=>et?!0:(_e(),!1)):b?!0:(_e(),!1)})}refinement(e,c){return this._refinement((d,h)=>e(d)?!0:(h.addIssue(typeof c=="function"?c(d,h):c),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:c=>this["~validate"](c)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const c=typeof e=="function"?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:c,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const c=typeof e=="function"?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:c,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){const c=this.constructor;return new c({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);const c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${c}`}function timeRegex(a){return new RegExp(`^${timeRegexSource(a)}$`)}function datetimeRegex(a){let e=`${dateRegexSource}T${timeRegexSource(a)}`;const c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${c.join("|")})`,new RegExp(`^${e}$`)}function isValidIP(a,e){return!!((e==="v4"||!e)&&ipv4Regex.test(a)||(e==="v6"||!e)&&ipv6Regex.test(a))}function isValidJWT(a,e){if(!jwtRegex.test(a))return!1;try{const[c]=a.split(".");if(!c)return!1;const d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),h=JSON.parse(atob(d));return!(typeof h!="object"||h===null||"typ"in h&&(h==null?void 0:h.typ)!=="JWT"||!h.alg||e&&h.alg!==e)}catch{return!1}}function isValidCidr(a,e){return!!((e==="v4"||!e)&&ipv4CidrRegex.test(a)||(e==="v6"||!e)&&ipv6CidrRegex.test(a))}class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ZodParsedType.string){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:g.parsedType}),INVALID}const d=new ParseStatus;let h;for(const g of this._def.checks)if(g.kind==="min")e.data.length<g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="max")e.data.length>g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="length"){const b=e.data.length>g.value,_e=e.data.length<g.value;(b||_e)&&(h=this._getOrReturnCtx(e,h),b?addIssueToContext(h,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}):_e&&addIssueToContext(h,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}),d.dirty())}else if(g.kind==="email")emailRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"email",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"emoji",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="uuid")uuidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"uuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="nanoid")nanoidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid")cuidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid2")cuid2Regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="ulid")ulidRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"ulid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="url")try{new URL(e.data)}catch{h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()}else g.kind==="regex"?(g.regex.lastIndex=0,g.regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"regex",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty())):g.kind==="trim"?e.data=e.data.trim():g.kind==="includes"?e.data.includes(g.value,g.position)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{includes:g.value,position:g.position},message:g.message}),d.dirty()):g.kind==="toLowerCase"?e.data=e.data.toLowerCase():g.kind==="toUpperCase"?e.data=e.data.toUpperCase():g.kind==="startsWith"?e.data.startsWith(g.value)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{startsWith:g.value},message:g.message}),d.dirty()):g.kind==="endsWith"?e.data.endsWith(g.value)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:{endsWith:g.value},message:g.message}),d.dirty()):g.kind==="datetime"?datetimeRegex(g).test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"datetime",message:g.message}),d.dirty()):g.kind==="date"?dateRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"date",message:g.message}),d.dirty()):g.kind==="time"?timeRegex(g).test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.invalid_string,validation:"time",message:g.message}),d.dirty()):g.kind==="duration"?durationRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"duration",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="ip"?isValidIP(e.data,g.version)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"ip",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="jwt"?isValidJWT(e.data,g.alg)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"jwt",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="cidr"?isValidCidr(e.data,g.version)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"cidr",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64"?base64Regex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"base64",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64url"?base64urlRegex.test(e.data)||(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{validation:"base64url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):util.assertNever(g);return{status:d.value,value:e.data}}_regex(e,c,d){return this.refinement(h=>e.test(h),{validation:c,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(d)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...errorUtil.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...errorUtil.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,c){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(c)})}includes(e,c){return this._addCheck({kind:"includes",value:e,position:c==null?void 0:c.position,...errorUtil.errToObj(c==null?void 0:c.message)})}startsWith(e,c){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(c)})}endsWith(e,c){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(c)})}min(e,c){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(c)})}max(e,c){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(c)})}length(e,c){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(c)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxLength(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}}ZodString.create=a=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(a==null?void 0:a.coerce)??!1,...processCreateParams(a)});function floatSafeRemainder(a,e){const c=(a.toString().split(".")[1]||"").length,d=(e.toString().split(".")[1]||"").length,h=c>d?c:d,g=Number.parseInt(a.toFixed(h).replace(".","")),b=Number.parseInt(e.toFixed(h).replace(".",""));return g%b/10**h}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ZodParsedType.number){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:g.parsedType}),INVALID}let d;const h=new ParseStatus;for(const g of this._def.checks)g.kind==="int"?util.isInteger(e.data)||(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:g.message}),h.dirty()):g.kind==="min"?(g.inclusive?e.data<g.value:e.data<=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),h.dirty()):g.kind==="max"?(g.inclusive?e.data>g.value:e.data>=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),h.dirty()):g.kind==="multipleOf"?floatSafeRemainder(e.data,g.value)!==0&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),h.dirty()):g.kind==="finite"?Number.isFinite(e.data)||(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_finite,message:g.message}),h.dirty()):util.assertNever(g);return{status:h.value,value:e.data}}gte(e,c){return this.setLimit("min",e,!0,errorUtil.toString(c))}gt(e,c){return this.setLimit("min",e,!1,errorUtil.toString(c))}lte(e,c){return this.setLimit("max",e,!0,errorUtil.toString(c))}lt(e,c){return this.setLimit("max",e,!1,errorUtil.toString(c))}setLimit(e,c,d,h){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:c,inclusive:d,message:errorUtil.toString(h)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,c){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(c)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxValue(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&util.isInteger(e.value))}get isFinite(){let e=null,c=null;for(const d of this._def.checks){if(d.kind==="finite"||d.kind==="int"||d.kind==="multipleOf")return!0;d.kind==="min"?(c===null||d.value>c)&&(c=d.value):d.kind==="max"&&(e===null||d.value<e)&&(e=d.value)}return Number.isFinite(c)&&Number.isFinite(e)}}ZodNumber.create=a=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let d;const h=new ParseStatus;for(const g of this._def.checks)g.kind==="min"?(g.inclusive?e.data<g.value:e.data<=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_small,type:"bigint",minimum:g.value,inclusive:g.inclusive,message:g.message}),h.dirty()):g.kind==="max"?(g.inclusive?e.data>g.value:e.data>=g.value)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.too_big,type:"bigint",maximum:g.value,inclusive:g.inclusive,message:g.message}),h.dirty()):g.kind==="multipleOf"?e.data%g.value!==BigInt(0)&&(d=this._getOrReturnCtx(e,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),h.dirty()):util.assertNever(g);return{status:h.value,value:e.data}}_getInvalidInput(e){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:c.parsedType}),INVALID}gte(e,c){return this.setLimit("min",e,!0,errorUtil.toString(c))}gt(e,c){return this.setLimit("min",e,!1,errorUtil.toString(c))}lte(e,c){return this.setLimit("max",e,!0,errorUtil.toString(c))}lt(e,c){return this.setLimit("max",e,!1,errorUtil.toString(c))}setLimit(e,c,d,h){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:c,inclusive:d,message:errorUtil.toString(h)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,c){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(c)})}get minValue(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e}get maxValue(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e}}ZodBigInt.create=a=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(a==null?void 0:a.coerce)??!1,...processCreateParams(a)});class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ZodParsedType.boolean){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:d.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=a=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(a==null?void 0:a.coerce)||!1,...processCreateParams(a)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ZodParsedType.date){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:g.parsedType}),INVALID}if(Number.isNaN(e.data.getTime())){const g=this._getOrReturnCtx(e);return addIssueToContext(g,{code:ZodIssueCode.invalid_date}),INVALID}const d=new ParseStatus;let h;for(const g of this._def.checks)g.kind==="min"?e.data.getTime()<g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_small,message:g.message,inclusive:!0,exact:!1,minimum:g.value,type:"date"}),d.dirty()):g.kind==="max"?e.data.getTime()>g.value&&(h=this._getOrReturnCtx(e,h),addIssueToContext(h,{code:ZodIssueCode.too_big,message:g.message,inclusive:!0,exact:!1,maximum:g.value,type:"date"}),d.dirty()):util.assertNever(g);return{status:d.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,c){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(c)})}max(e,c){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(c)})}get minDate(){let e=null;for(const c of this._def.checks)c.kind==="min"&&(e===null||c.value>e)&&(e=c.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const c of this._def.checks)c.kind==="max"&&(e===null||c.value<e)&&(e=c.value);return e!=null?new Date(e):null}}ZodDate.create=a=>new ZodDate({checks:[],coerce:(a==null?void 0:a.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(a)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:d.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=a=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(a)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:d.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=a=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(a)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:d.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=a=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(a)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=a=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(a)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=a=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(a)});class ZodNever extends ZodType{_parse(e){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:c.parsedType}),INVALID}}ZodNever.create=a=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(a)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:d.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=a=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(a)});class ZodArray extends ZodType{_parse(e){const{ctx:c,status:d}=this._processInputParams(e),h=this._def;if(c.parsedType!==ZodParsedType.array)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:c.parsedType}),INVALID;if(h.exactLength!==null){const b=c.data.length>h.exactLength.value,_e=c.data.length<h.exactLength.value;(b||_e)&&(addIssueToContext(c,{code:b?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:_e?h.exactLength.value:void 0,maximum:b?h.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:h.exactLength.message}),d.dirty())}if(h.minLength!==null&&c.data.length<h.minLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:h.minLength.value,type:"array",inclusive:!0,exact:!1,message:h.minLength.message}),d.dirty()),h.maxLength!==null&&c.data.length>h.maxLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:h.maxLength.value,type:"array",inclusive:!0,exact:!1,message:h.maxLength.message}),d.dirty()),c.common.async)return Promise.all([...c.data].map((b,_e)=>h.type._parseAsync(new ParseInputLazyPath(c,b,c.path,_e)))).then(b=>ParseStatus.mergeArray(d,b));const g=[...c.data].map((b,_e)=>h.type._parseSync(new ParseInputLazyPath(c,b,c.path,_e)));return ParseStatus.mergeArray(d,g)}get element(){return this._def.type}min(e,c){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(c)}})}max(e,c){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(c)}})}length(e,c){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(c)}})}nonempty(e){return this.min(1,e)}}ZodArray.create=(a,e)=>new ZodArray({type:a,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(e)});function deepPartialify(a){if(a instanceof ZodObject){const e={};for(const c in a.shape){const d=a.shape[c];e[c]=ZodOptional.create(deepPartialify(d))}return new ZodObject({...a._def,shape:()=>e})}else return a instanceof ZodArray?new ZodArray({...a._def,type:deepPartialify(a.element)}):a instanceof ZodOptional?ZodOptional.create(deepPartialify(a.unwrap())):a instanceof ZodNullable?ZodNullable.create(deepPartialify(a.unwrap())):a instanceof ZodTuple?ZodTuple.create(a.items.map(e=>deepPartialify(e))):a}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),c=util.objectKeys(e);return this._cached={shape:e,keys:c},this._cached}_parse(e){if(this._getType(e)!==ZodParsedType.object){const rt=this._getOrReturnCtx(e);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:rt.parsedType}),INVALID}const{status:d,ctx:h}=this._processInputParams(e),{shape:g,keys:b}=this._getCached(),_e=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const rt in h.data)b.includes(rt)||_e.push(rt);const et=[];for(const rt of b){const st=g[rt],$=h.data[rt];et.push({key:{status:"valid",value:rt},value:st._parse(new ParseInputLazyPath(h,$,h.path,rt)),alwaysSet:rt in h.data})}if(this._def.catchall instanceof ZodNever){const rt=this._def.unknownKeys;if(rt==="passthrough")for(const st of _e)et.push({key:{status:"valid",value:st},value:{status:"valid",value:h.data[st]}});else if(rt==="strict")_e.length>0&&(addIssueToContext(h,{code:ZodIssueCode.unrecognized_keys,keys:_e}),d.dirty());else if(rt!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const rt=this._def.catchall;for(const st of _e){const $=h.data[st];et.push({key:{status:"valid",value:st},value:rt._parse(new ParseInputLazyPath(h,$,h.path,st)),alwaysSet:st in h.data})}}return h.common.async?Promise.resolve().then(async()=>{const rt=[];for(const st of et){const $=await st.key,_=await st.value;rt.push({key:$,value:_,alwaysSet:st.alwaysSet})}return rt}).then(rt=>ParseStatus.mergeObjectSync(d,rt)):ParseStatus.mergeObjectSync(d,et)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(c,d)=>{var g,b;const h=((b=(g=this._def).errorMap)==null?void 0:b.call(g,c,d).message)??d.defaultError;return c.code==="unrecognized_keys"?{message:errorUtil.errToObj(e).message??h}:{message:h}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,c){return this.augment({[e]:c})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const c={};for(const d of util.objectKeys(e))e[d]&&this.shape[d]&&(c[d]=this.shape[d]);return new ZodObject({...this._def,shape:()=>c})}omit(e){const c={};for(const d of util.objectKeys(this.shape))e[d]||(c[d]=this.shape[d]);return new ZodObject({...this._def,shape:()=>c})}deepPartial(){return deepPartialify(this)}partial(e){const c={};for(const d of util.objectKeys(this.shape)){const h=this.shape[d];e&&!e[d]?c[d]=h:c[d]=h.optional()}return new ZodObject({...this._def,shape:()=>c})}required(e){const c={};for(const d of util.objectKeys(this.shape))if(e&&!e[d])c[d]=this.shape[d];else{let g=this.shape[d];for(;g instanceof ZodOptional;)g=g._def.innerType;c[d]=g}return new ZodObject({...this._def,shape:()=>c})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(a,e)=>new ZodObject({shape:()=>a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.strictCreate=(a,e)=>new ZodObject({shape:()=>a,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});ZodObject.lazycreate=(a,e)=>new ZodObject({shape:a,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(e)});class ZodUnion extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d=this._def.options;function h(g){for(const _e of g)if(_e.result.status==="valid")return _e.result;for(const _e of g)if(_e.result.status==="dirty")return c.common.issues.push(..._e.ctx.common.issues),_e.result;const b=g.map(_e=>new ZodError(_e.ctx.common.issues));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:b}),INVALID}if(c.common.async)return Promise.all(d.map(async g=>{const b={...c,common:{...c.common,issues:[]},parent:null};return{result:await g._parseAsync({data:c.data,path:c.path,parent:b}),ctx:b}})).then(h);{let g;const b=[];for(const et of d){const rt={...c,common:{...c.common,issues:[]},parent:null},st=et._parseSync({data:c.data,path:c.path,parent:rt});if(st.status==="valid")return st;st.status==="dirty"&&!g&&(g={result:st,ctx:rt}),rt.common.issues.length&&b.push(rt.common.issues)}if(g)return c.common.issues.push(...g.ctx.common.issues),g.result;const _e=b.map(et=>new ZodError(et));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:_e}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(a,e)=>new ZodUnion({options:a,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(e)});function mergeValues(a,e){const c=getParsedType(a),d=getParsedType(e);if(a===e)return{valid:!0,data:a};if(c===ZodParsedType.object&&d===ZodParsedType.object){const h=util.objectKeys(e),g=util.objectKeys(a).filter(_e=>h.indexOf(_e)!==-1),b={...a,...e};for(const _e of g){const et=mergeValues(a[_e],e[_e]);if(!et.valid)return{valid:!1};b[_e]=et.data}return{valid:!0,data:b}}else if(c===ZodParsedType.array&&d===ZodParsedType.array){if(a.length!==e.length)return{valid:!1};const h=[];for(let g=0;g<a.length;g++){const b=a[g],_e=e[g],et=mergeValues(b,_e);if(!et.valid)return{valid:!1};h.push(et.data)}return{valid:!0,data:h}}else return c===ZodParsedType.date&&d===ZodParsedType.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e),h=(g,b)=>{if(isAborted(g)||isAborted(b))return INVALID;const _e=mergeValues(g.value,b.value);return _e.valid?((isDirty(g)||isDirty(b))&&c.dirty(),{status:c.value,value:_e.data}):(addIssueToContext(d,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return d.common.async?Promise.all([this._def.left._parseAsync({data:d.data,path:d.path,parent:d}),this._def.right._parseAsync({data:d.data,path:d.path,parent:d})]).then(([g,b])=>h(g,b)):h(this._def.left._parseSync({data:d.data,path:d.path,parent:d}),this._def.right._parseSync({data:d.data,path:d.path,parent:d}))}}ZodIntersection.create=(a,e,c)=>new ZodIntersection({left:a,right:e,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(c)});class ZodTuple extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.array)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:d.parsedType}),INVALID;if(d.data.length<this._def.items.length)return addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&d.data.length>this._def.items.length&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.dirty());const g=[...d.data].map((b,_e)=>{const et=this._def.items[_e]||this._def.rest;return et?et._parse(new ParseInputLazyPath(d,b,d.path,_e)):null}).filter(b=>!!b);return d.common.async?Promise.all(g).then(b=>ParseStatus.mergeArray(c,b)):ParseStatus.mergeArray(c,g)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:a,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(e)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.map)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:d.parsedType}),INVALID;const h=this._def.keyType,g=this._def.valueType,b=[...d.data.entries()].map(([_e,et],rt)=>({key:h._parse(new ParseInputLazyPath(d,_e,d.path,[rt,"key"])),value:g._parse(new ParseInputLazyPath(d,et,d.path,[rt,"value"]))}));if(d.common.async){const _e=new Map;return Promise.resolve().then(async()=>{for(const et of b){const rt=await et.key,st=await et.value;if(rt.status==="aborted"||st.status==="aborted")return INVALID;(rt.status==="dirty"||st.status==="dirty")&&c.dirty(),_e.set(rt.value,st.value)}return{status:c.value,value:_e}})}else{const _e=new Map;for(const et of b){const rt=et.key,st=et.value;if(rt.status==="aborted"||st.status==="aborted")return INVALID;(rt.status==="dirty"||st.status==="dirty")&&c.dirty(),_e.set(rt.value,st.value)}return{status:c.value,value:_e}}}}ZodMap.create=(a,e,c)=>new ZodMap({valueType:e,keyType:a,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(c)});class ZodSet extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.parsedType!==ZodParsedType.set)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:d.parsedType}),INVALID;const h=this._def;h.minSize!==null&&d.data.size<h.minSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:h.minSize.value,type:"set",inclusive:!0,exact:!1,message:h.minSize.message}),c.dirty()),h.maxSize!==null&&d.data.size>h.maxSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:h.maxSize.value,type:"set",inclusive:!0,exact:!1,message:h.maxSize.message}),c.dirty());const g=this._def.valueType;function b(et){const rt=new Set;for(const st of et){if(st.status==="aborted")return INVALID;st.status==="dirty"&&c.dirty(),rt.add(st.value)}return{status:c.value,value:rt}}const _e=[...d.data.values()].map((et,rt)=>g._parse(new ParseInputLazyPath(d,et,d.path,rt)));return d.common.async?Promise.all(_e).then(et=>b(et)):b(_e)}min(e,c){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(c)}})}max(e,c){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(c)}})}size(e,c){return this.min(e,c).max(e,c)}nonempty(e){return this.min(1,e)}}ZodSet.create=(a,e)=>new ZodSet({valueType:a,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(e)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:c}=this._processInputParams(e);return this._def.getter()._parse({data:c.data,path:c.path,parent:c})}}ZodLazy.create=(a,e)=>new ZodLazy({getter:a,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(e)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const c=this._getOrReturnCtx(e);return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}ZodLiteral.create=(a,e)=>new ZodLiteral({value:a,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(e)});function createZodEnum(a,e){return new ZodEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(e)})}class ZodEnum extends ZodType{_parse(e){if(typeof e.data!="string"){const c=this._getOrReturnCtx(e),d=this._def.values;return addIssueToContext(c,{expected:util.joinValues(d),received:c.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const c=this._getOrReturnCtx(e),d=this._def.values;return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_enum_value,options:d}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const c of this._def.values)e[c]=c;return e}get Values(){const e={};for(const c of this._def.values)e[c]=c;return e}get Enum(){const e={};for(const c of this._def.values)e[c]=c;return e}extract(e,c=this._def){return ZodEnum.create(e,{...this._def,...c})}exclude(e,c=this._def){return ZodEnum.create(this.options.filter(d=>!e.includes(d)),{...this._def,...c})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const c=util.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(e);if(d.parsedType!==ZodParsedType.string&&d.parsedType!==ZodParsedType.number){const h=util.objectValues(c);return addIssueToContext(d,{expected:util.joinValues(h),received:d.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const h=util.objectValues(c);return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_enum_value,options:h}),INVALID}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(a,e)=>new ZodNativeEnum({values:a,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(e)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:c}=this._processInputParams(e);if(c.parsedType!==ZodParsedType.promise&&c.common.async===!1)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:c.parsedType}),INVALID;const d=c.parsedType===ZodParsedType.promise?c.data:Promise.resolve(c.data);return OK(d.then(h=>this._def.type.parseAsync(h,{path:c.path,errorMap:c.common.contextualErrorMap})))}}ZodPromise.create=(a,e)=>new ZodPromise({type:a,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(e)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:c,ctx:d}=this._processInputParams(e),h=this._def.effect||null,g={addIssue:b=>{addIssueToContext(d,b),b.fatal?c.abort():c.dirty()},get path(){return d.path}};if(g.addIssue=g.addIssue.bind(g),h.type==="preprocess"){const b=h.transform(d.data,g);if(d.common.async)return Promise.resolve(b).then(async _e=>{if(c.value==="aborted")return INVALID;const et=await this._def.schema._parseAsync({data:_e,path:d.path,parent:d});return et.status==="aborted"?INVALID:et.status==="dirty"||c.value==="dirty"?DIRTY(et.value):et});{if(c.value==="aborted")return INVALID;const _e=this._def.schema._parseSync({data:b,path:d.path,parent:d});return _e.status==="aborted"?INVALID:_e.status==="dirty"||c.value==="dirty"?DIRTY(_e.value):_e}}if(h.type==="refinement"){const b=_e=>{const et=h.refinement(_e,g);if(d.common.async)return Promise.resolve(et);if(et instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return _e};if(d.common.async===!1){const _e=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});return _e.status==="aborted"?INVALID:(_e.status==="dirty"&&c.dirty(),b(_e.value),{status:c.value,value:_e.value})}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(_e=>_e.status==="aborted"?INVALID:(_e.status==="dirty"&&c.dirty(),b(_e.value).then(()=>({status:c.value,value:_e.value}))))}if(h.type==="transform")if(d.common.async===!1){const b=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});if(!isValid(b))return INVALID;const _e=h.transform(b.value,g);if(_e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:c.value,value:_e}}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(b=>isValid(b)?Promise.resolve(h.transform(b.value,g)).then(_e=>({status:c.value,value:_e})):INVALID);util.assertNever(h)}}ZodEffects.create=(a,e,c)=>new ZodEffects({schema:a,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:e,...processCreateParams(c)});ZodEffects.createWithPreprocess=(a,e,c)=>new ZodEffects({schema:e,effect:{type:"preprocess",transform:a},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(c)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(a,e)=>new ZodOptional({innerType:a,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(e)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(a,e)=>new ZodNullable({innerType:a,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(e)});class ZodDefault extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e);let d=c.data;return c.parsedType===ZodParsedType.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:c.path,parent:c})}removeDefault(){return this._def.innerType}}ZodDefault.create=(a,e)=>new ZodDefault({innerType:a,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...processCreateParams(e)});class ZodCatch extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d={...c,common:{...c.common,issues:[]}},h=this._def.innerType._parse({data:d.data,path:d.path,parent:{...d}});return isAsync(h)?h.then(g=>({status:"valid",value:g.status==="valid"?g.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})})):{status:"valid",value:h.status==="valid"?h.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(a,e)=>new ZodCatch({innerType:a,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...processCreateParams(e)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const d=this._getOrReturnCtx(e);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:d.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=a=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(a)});class ZodBranded extends ZodType{_parse(e){const{ctx:c}=this._processInputParams(e),d=c.data;return this._def.type._parse({data:d,path:c.path,parent:c})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:c,ctx:d}=this._processInputParams(e);if(d.common.async)return(async()=>{const g=await this._def.in._parseAsync({data:d.data,path:d.path,parent:d});return g.status==="aborted"?INVALID:g.status==="dirty"?(c.dirty(),DIRTY(g.value)):this._def.out._parseAsync({data:g.value,path:d.path,parent:d})})();{const h=this._def.in._parseSync({data:d.data,path:d.path,parent:d});return h.status==="aborted"?INVALID:h.status==="dirty"?(c.dirty(),{status:"dirty",value:h.value}):this._def.out._parseSync({data:h.value,path:d.path,parent:d})}}static create(e,c){return new ZodPipeline({in:e,out:c,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const c=this._def.innerType._parse(e),d=h=>(isValid(h)&&(h.value=Object.freeze(h.value)),h);return isAsync(c)?c.then(h=>d(h)):d(c)}unwrap(){return this._def.innerType}}ZodReadonly.create=(a,e)=>new ZodReadonly({innerType:a,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(e)});var ZodFirstPartyTypeKind;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const stringType=ZodString.create;ZodNever.create;ZodArray.create;const objectType=ZodObject.create;ZodUnion.create;ZodIntersection.create;ZodTuple.create;ZodEnum.create;ZodPromise.create;ZodOptional.create;ZodNullable.create;const alertVariants=cva("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Alert=reactExports.forwardRef(({className:a,variant:e,...c},d)=>jsxRuntimeExports.jsx("div",{ref:d,role:"alert",className:cn(alertVariants({variant:e}),a),...c}));Alert.displayName="Alert";const AlertTitle=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("h5",{ref:c,className:cn("mb-1 font-medium leading-none tracking-tight",a),...e}));AlertTitle.displayName="AlertTitle";const AlertDescription=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx("div",{ref:c,className:cn("text-sm [&_p]:leading-relaxed",a),...e}));AlertDescription.displayName="AlertDescription";const loginSchema=objectType({email:stringType().email("Please enter a valid email address"),password:stringType().min(6,"Password must be at least 6 characters")}),registerSchema=objectType({username:stringType().min(3,"Username must be at least 3 characters").max(20,"Username must be less than 20 characters").regex(/^[a-zA-Z0-9_-]+$/,"Username can only contain letters, numbers, underscores, and hyphens"),email:stringType().email("Please enter a valid email address"),password:stringType().min(6,"Password must be at least 6 characters").regex(/^(?=.*[a-z])/,"Password must contain at least one lowercase letter").regex(/^(?=.*[A-Z])/,"Password must contain at least one uppercase letter").regex(/^(?=.*\d)/,"Password must contain at least one number"),confirmPassword:stringType()}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),LoginPage=()=>{const[a,e]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(!1),[b,_e]=reactExports.useState(null),et=useNavigate(),{login:rt,register:st}=useAuth(),{toast:$}=useToast(),_=useForm({resolver:t(loginSchema),defaultValues:{email:"",password:""}}),nt=useForm({resolver:t(registerSchema),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),it=nt.watch("password"),ot={length:it.length>=6,lowercase:/[a-z]/.test(it),uppercase:/[A-Z]/.test(it),number:/\d/.test(it)},lt=async ct=>{e(!0),_e(null);try{const dt=await rt(ct.email,ct.password);dt.success?($({title:"Welcome back!",description:"You have been successfully logged in."}),et("/")):_e(dt.error||"Login failed")}catch{_e("An unexpected error occurred")}finally{e(!1)}},at=async ct=>{e(!0),_e(null);try{const dt=await st(ct.email,ct.password,ct.username);dt.success?($({title:"Account created!",description:"Welcome to Sparqit. Your account has been created successfully."}),et("/")):_e(dt.error||"Registration failed")}catch{_e("An unexpected error occurred")}finally{e(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted/20 p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:jsxRuntimeExports.jsx(Star,{className:"w-8 h-8 text-primary"})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Sparqit"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-2",children:"Your AI-powered learning companion"})]}),jsxRuntimeExports.jsxs(Card,{className:"shadow-lg border-border/50",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"space-y-1",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl text-center",children:"Welcome"}),jsxRuntimeExports.jsx(CardDescription,{className:"text-center",children:"Sign in to your account or create a new one"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs(Tabs,{defaultValue:"login",className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"login",children:"Sign In"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"register",children:"Sign Up"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"login",className:"space-y-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:_.handleSubmit(lt),className:"space-y-4",children:[b&&jsxRuntimeExports.jsx(Alert,{variant:"destructive",children:jsxRuntimeExports.jsx(AlertDescription,{children:b})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"login-email",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"login-email",type:"email",placeholder:"Enter your email",className:"pl-10",..._.register("email")})]}),_.formState.errors.email&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:_.formState.errors.email.message})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"login-password",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"login-password",type:c?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10",..._.register("password")}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?jsxRuntimeExports.jsx(EyeOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"})})]}),_.formState.errors.password&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:_.formState.errors.password.message})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:a,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"register",className:"space-y-4",children:jsxRuntimeExports.jsxs("form",{onSubmit:nt.handleSubmit(at),className:"space-y-4",children:[b&&jsxRuntimeExports.jsx(Alert,{variant:"destructive",children:jsxRuntimeExports.jsx(AlertDescription,{children:b})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"register-username",children:"Username"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"register-username",type:"text",placeholder:"Enter your username",className:"pl-10",...nt.register("username")})]}),nt.formState.errors.username&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:nt.formState.errors.username.message})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"register-email",children:"Email"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"register-email",type:"email",placeholder:"Enter your email",className:"pl-10",...nt.register("email")})]}),nt.formState.errors.email&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:nt.formState.errors.email.message})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"register-password",children:"Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"register-password",type:c?"text":"password",placeholder:"Create a password",className:"pl-10 pr-10",...nt.register("password")}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!c),children:c?jsxRuntimeExports.jsx(EyeOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"})})]}),it&&jsxRuntimeExports.jsxs("div",{className:"space-y-2 mt-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Password requirements:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[ot.length?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 text-green-500"}):jsxRuntimeExports.jsx(CircleX,{className:"h-3 w-3 text-red-500"}),jsxRuntimeExports.jsx("span",{className:ot.length?"text-green-600":"text-red-600",children:"At least 6 characters"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[ot.lowercase?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 text-green-500"}):jsxRuntimeExports.jsx(CircleX,{className:"h-3 w-3 text-red-500"}),jsxRuntimeExports.jsx("span",{className:ot.lowercase?"text-green-600":"text-red-600",children:"At least one lowercase letter"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[ot.uppercase?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 text-green-500"}):jsxRuntimeExports.jsx(CircleX,{className:"h-3 w-3 text-red-500"}),jsxRuntimeExports.jsx("span",{className:ot.uppercase?"text-green-600":"text-red-600",children:"At least one uppercase letter"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[ot.number?jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-3 w-3 text-green-500"}):jsxRuntimeExports.jsx(CircleX,{className:"h-3 w-3 text-red-500"}),jsxRuntimeExports.jsx("span",{className:ot.number?"text-green-600":"text-red-600",children:"At least one number"})]})]})]}),nt.formState.errors.password&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:nt.formState.errors.password.message})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"register-confirm-password",children:"Confirm Password"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),jsxRuntimeExports.jsx(Input,{id:"register-confirm-password",type:h?"text":"password",placeholder:"Confirm your password",className:"pl-10 pr-10",...nt.register("confirmPassword")}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!h),children:h?jsxRuntimeExports.jsx(EyeOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"})})]}),nt.formState.errors.confirmPassword&&jsxRuntimeExports.jsx("p",{className:"text-sm text-destructive",children:nt.formState.errors.confirmPassword.message})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:a,children:a?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})]})})]})]})})},NotFound=()=>{const a=useLocation();return reactExports.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",a.pathname)},[a.pathname]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),jsxRuntimeExports.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},isNodeJS=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],LINE_FACTOR=1.35,RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},AnnotationEditorPrefix="pdfjs_internal_editor_",AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},util_ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},VerbosityLevel={ERRORS:0,WARNINGS:1,INFOS:5},OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},DrawOPS={moveTo:0,lineTo:1,curveTo:2,closePath:3},PasswordResponses$1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let verbosity=VerbosityLevel.WARNINGS;function setVerbosityLevel(a){Number.isInteger(a)&&(verbosity=a)}function getVerbosityLevel(){return verbosity}function info(a){verbosity>=VerbosityLevel.INFOS&&console.log(`Info: ${a}`)}function warn(a){verbosity>=VerbosityLevel.WARNINGS&&console.log(`Warning: ${a}`)}function unreachable(a){throw new Error(a)}function assert(a,e){a||unreachable(e)}function _isValidProtocol(a){switch(a==null?void 0:a.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function createValidAbsoluteUrl(a,e=null,c=null){if(!a)return null;if(c&&typeof a=="string"){if(c.addDefaultProtocol&&a.startsWith("www.")){const h=a.match(/\./g);(h==null?void 0:h.length)>=2&&(a=`http://${a}`)}if(c.tryConvertEncoding)try{a=stringToUTF8String(a)}catch{}}const d=e?URL.parse(a,e):URL.parse(a);return _isValidProtocol(d)?d:null}function updateUrlHash(a,e,c=!1){const d=URL.parse(a);return d?(d.hash=e,d.href):c&&createValidAbsoluteUrl(a,"http://example.com")?a.split("#",1)[0]+`${e?`#${e}`:""}`:""}function shadow(a,e,c,d=!1){return Object.defineProperty(a,e,{value:c,enumerable:!d,configurable:!0,writable:!1}),c}const BaseException=function a(){function e(c,d){this.message=c,this.name=d}return e.prototype=new Error,e.constructor=e,e}();class PasswordException extends BaseException{constructor(e,c){super(e,"PasswordException"),this.code=c}}class UnknownErrorException extends BaseException{constructor(e,c){super(e,"UnknownErrorException"),this.details=c}}class InvalidPDFException extends BaseException{constructor(e){super(e,"InvalidPDFException")}}class ResponseException extends BaseException{constructor(e,c,d){super(e,"ResponseException"),this.status=c,this.missing=d}}class FormatError extends BaseException{constructor(e){super(e,"FormatError")}}class AbortException extends BaseException{constructor(e){super(e,"AbortException")}}function bytesToString(a){(typeof a!="object"||(a==null?void 0:a.length)===void 0)&&unreachable("Invalid argument for bytesToString");const e=a.length,c=8192;if(e<c)return String.fromCharCode.apply(null,a);const d=[];for(let h=0;h<e;h+=c){const g=Math.min(h+c,e),b=a.subarray(h,g);d.push(String.fromCharCode.apply(null,b))}return d.join("")}function stringToBytes(a){typeof a!="string"&&unreachable("Invalid argument for stringToBytes");const e=a.length,c=new Uint8Array(e);for(let d=0;d<e;++d)c[d]=a.charCodeAt(d)&255;return c}function string32(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function isLittleEndian(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function isEvalSupported(){try{return new Function(""),!0}catch{return!1}}class util_FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",isLittleEndian())}static get isEvalSupported(){return shadow(this,"isEvalSupported",isEvalSupported())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return shadow(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:c}=navigator;return shadow(this,"platform",{isAndroid:c.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:c.includes("Firefox")})}static get isCSSRoundSupported(){var e,c;return shadow(this,"isCSSRoundSupported",(c=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:c.call(e,"width: round(1.5px, 1px)"))}}const hexNumbers=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));var yu,Zv,q0;class Util{static makeHexColor(e,c,d){return`#${hexNumbers[e]}${hexNumbers[c]}${hexNumbers[d]}`}static scaleMinMax(e,c){let d;e[0]?(e[0]<0&&(d=c[0],c[0]=c[2],c[2]=d),c[0]*=e[0],c[2]*=e[0],e[3]<0&&(d=c[1],c[1]=c[3],c[3]=d),c[1]*=e[3],c[3]*=e[3]):(d=c[0],c[0]=c[1],c[1]=d,d=c[2],c[2]=c[3],c[3]=d,e[1]<0&&(d=c[1],c[1]=c[3],c[3]=d),c[1]*=e[1],c[3]*=e[1],e[2]<0&&(d=c[0],c[0]=c[2],c[2]=d),c[0]*=e[2],c[2]*=e[2]),c[0]+=e[4],c[1]+=e[5],c[2]+=e[4],c[3]+=e[5]}static transform(e,c){return[e[0]*c[0]+e[2]*c[1],e[1]*c[0]+e[3]*c[1],e[0]*c[2]+e[2]*c[3],e[1]*c[2]+e[3]*c[3],e[0]*c[4]+e[2]*c[5]+e[4],e[1]*c[4]+e[3]*c[5]+e[5]]}static applyTransform(e,c,d=0){const h=e[d],g=e[d+1];e[d]=h*c[0]+g*c[2]+c[4],e[d+1]=h*c[1]+g*c[3]+c[5]}static applyTransformToBezier(e,c,d=0){const h=c[0],g=c[1],b=c[2],_e=c[3],et=c[4],rt=c[5];for(let st=0;st<6;st+=2){const $=e[d+st],_=e[d+st+1];e[d+st]=$*h+_*b+et,e[d+st+1]=$*g+_*_e+rt}}static applyInverseTransform(e,c){const d=e[0],h=e[1],g=c[0]*c[3]-c[1]*c[2];e[0]=(d*c[3]-h*c[2]+c[2]*c[5]-c[4]*c[3])/g,e[1]=(-d*c[1]+h*c[0]+c[4]*c[1]-c[5]*c[0])/g}static axialAlignedBoundingBox(e,c,d){const h=c[0],g=c[1],b=c[2],_e=c[3],et=c[4],rt=c[5],st=e[0],$=e[1],_=e[2],nt=e[3];let it=h*st+et,ot=it,lt=h*_+et,at=lt,ct=_e*$+rt,dt=ct,ht=_e*nt+rt,pt=ht;if(g!==0||b!==0){const ft=g*st,mt=g*_,xt=b*$,gt=b*nt;it+=xt,at+=xt,lt+=gt,ot+=gt,ct+=ft,pt+=ft,ht+=mt,dt+=mt}d[0]=Math.min(d[0],it,lt,ot,at),d[1]=Math.min(d[1],ct,ht,dt,pt),d[2]=Math.max(d[2],it,lt,ot,at),d[3]=Math.max(d[3],ct,ht,dt,pt)}static inverseTransform(e){const c=e[0]*e[3]-e[1]*e[2];return[e[3]/c,-e[1]/c,-e[2]/c,e[0]/c,(e[2]*e[5]-e[4]*e[3])/c,(e[4]*e[1]-e[5]*e[0])/c]}static singularValueDecompose2dScale(e,c){const d=e[0],h=e[1],g=e[2],b=e[3],_e=d**2+h**2,et=d*g+h*b,rt=g**2+b**2,st=(_e+rt)/2,$=Math.sqrt(st**2-(_e*rt-et**2));c[0]=Math.sqrt(st+$||1),c[1]=Math.sqrt(st-$||1)}static normalizeRect(e){const c=e.slice(0);return e[0]>e[2]&&(c[0]=e[2],c[2]=e[0]),e[1]>e[3]&&(c[1]=e[3],c[3]=e[1]),c}static intersect(e,c){const d=Math.max(Math.min(e[0],e[2]),Math.min(c[0],c[2])),h=Math.min(Math.max(e[0],e[2]),Math.max(c[0],c[2]));if(d>h)return null;const g=Math.max(Math.min(e[1],e[3]),Math.min(c[1],c[3])),b=Math.min(Math.max(e[1],e[3]),Math.max(c[1],c[3]));return g>b?null:[d,g,h,b]}static pointBoundingBox(e,c,d){d[0]=Math.min(d[0],e),d[1]=Math.min(d[1],c),d[2]=Math.max(d[2],e),d[3]=Math.max(d[3],c)}static rectBoundingBox(e,c,d,h,g){g[0]=Math.min(g[0],e,d),g[1]=Math.min(g[1],c,h),g[2]=Math.max(g[2],e,d),g[3]=Math.max(g[3],c,h)}static bezierBoundingBox(e,c,d,h,g,b,_e,et,rt){rt[0]=Math.min(rt[0],e,_e),rt[1]=Math.min(rt[1],c,et),rt[2]=Math.max(rt[2],e,_e),rt[3]=Math.max(rt[3],c,et),$t(this,yu,q0).call(this,e,d,g,_e,c,h,b,et,3*(-e+3*(d-g)+_e),6*(e-2*d+g),3*(d-e),rt),$t(this,yu,q0).call(this,e,d,g,_e,c,h,b,et,3*(-c+3*(h-b)+et),6*(c-2*h+b),3*(h-c),rt)}}yu=new WeakSet,Zv=function(e,c,d,h,g,b,_e,et,rt,st){if(rt<=0||rt>=1)return;const $=1-rt,_=rt*rt,nt=_*rt,it=$*($*($*e+3*rt*c)+3*_*d)+nt*h,ot=$*($*($*g+3*rt*b)+3*_*_e)+nt*et;st[0]=Math.min(st[0],it),st[1]=Math.min(st[1],ot),st[2]=Math.max(st[2],it),st[3]=Math.max(st[3],ot)},q0=function(e,c,d,h,g,b,_e,et,rt,st,$,_){if(Math.abs(rt)<1e-12){Math.abs(st)>=1e-12&&$t(this,yu,Zv).call(this,e,c,d,h,g,b,_e,et,-$/st,_);return}const nt=st**2-4*$*rt;if(nt<0)return;const it=Math.sqrt(nt),ot=2*rt;$t(this,yu,Zv).call(this,e,c,d,h,g,b,_e,et,(-st+it)/ot,_),$t(this,yu,Zv).call(this,e,c,d,h,g,b,_e,et,(-st-it)/ot,_)},Lt(Util,yu);function stringToUTF8String(a){return decodeURIComponent(escape(a))}let NormalizeRegex=null,NormalizationMap=null;function normalizeUnicode(a){return NormalizeRegex||(NormalizeRegex=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,NormalizationMap=new Map([["ﬅ","ſt"]])),a.replaceAll(NormalizeRegex,(e,c,d)=>c?c.normalize("NFKC"):NormalizationMap.get(d))}function getUuid(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),bytesToString(a)}const AnnotationPrefix="pdfjs_internal_id_";function _isValidExplicitDest(a,e,c){if(!Array.isArray(c)||c.length<2)return!1;const[d,h,...g]=c;if(!a(d)&&!Number.isInteger(d)||!e(h))return!1;const b=g.length;let _e=!0;switch(h.name){case"XYZ":if(b<2||b>3)return!1;break;case"Fit":case"FitB":return b===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(b>1)return!1;break;case"FitR":if(b!==4)return!1;_e=!1;break;default:return!1}for(const et of g)if(!(typeof et=="number"||_e&&et===null))return!1;return!0}function MathClamp(a,e,c){return Math.min(Math.max(a,e),c)}function toBase64Util(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(bytesToString(a))}function fromBase64Util(a){return Uint8Array.fromBase64?Uint8Array.fromBase64(a):stringToBytes(atob(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...e){return new Promise(c=>{c(a(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((e,c)=>e+c,0)});const SVG_NS="http://www.w3.org/2000/svg",Ep=class Ep{};Dn(Ep,"CSS",96),Dn(Ep,"PDF",72),Dn(Ep,"PDF_TO_CSS_UNITS",Ep.CSS/Ep.PDF);let PixelsPerInch=Ep;async function fetchData(a,e="text"){if(isValidFetchUrl(a,document.baseURI)){const c=await fetch(a);if(!c.ok)throw new Error(c.statusText);switch(e){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"json":return c.json()}return c.text()}return new Promise((c,d)=>{const h=new XMLHttpRequest;h.open("GET",a,!0),h.responseType=e,h.onreadystatechange=()=>{if(h.readyState===XMLHttpRequest.DONE){if(h.status===200||h.status===0){switch(e){case"arraybuffer":case"blob":case"json":c(h.response);return}c(h.responseText);return}d(new Error(h.statusText))}},h.send(null)})}class PageViewport{constructor({viewBox:e,userUnit:c,scale:d,rotation:h,offsetX:g=0,offsetY:b=0,dontFlip:_e=!1}){this.viewBox=e,this.userUnit=c,this.scale=d,this.rotation=h,this.offsetX=g,this.offsetY=b,d*=c;const et=(e[2]+e[0])/2,rt=(e[3]+e[1])/2;let st,$,_,nt;switch(h%=360,h<0&&(h+=360),h){case 180:st=-1,$=0,_=0,nt=1;break;case 90:st=0,$=1,_=1,nt=0;break;case 270:st=0,$=-1,_=-1,nt=0;break;case 0:st=1,$=0,_=0,nt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_e&&(_=-_,nt=-nt);let it,ot,lt,at;st===0?(it=Math.abs(rt-e[1])*d+g,ot=Math.abs(et-e[0])*d+b,lt=(e[3]-e[1])*d,at=(e[2]-e[0])*d):(it=Math.abs(et-e[0])*d+g,ot=Math.abs(rt-e[1])*d+b,lt=(e[2]-e[0])*d,at=(e[3]-e[1])*d),this.transform=[st*d,$*d,_*d,nt*d,it-st*d*et-_*d*rt,ot-$*d*et-nt*d*rt],this.width=lt,this.height=at}get rawDims(){const e=this.viewBox;return shadow(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:c=this.rotation,offsetX:d=this.offsetX,offsetY:h=this.offsetY,dontFlip:g=!1}={}){return new PageViewport({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:c,offsetX:d,offsetY:h,dontFlip:g})}convertToViewportPoint(e,c){const d=[e,c];return Util.applyTransform(d,this.transform),d}convertToViewportRectangle(e){const c=[e[0],e[1]];Util.applyTransform(c,this.transform);const d=[e[2],e[3]];return Util.applyTransform(d,this.transform),[c[0],c[1],d[0],d[1]]}convertToPdfPoint(e,c){const d=[e,c];return Util.applyInverseTransform(d,this.transform),d}}class RenderingCancelledException extends BaseException{constructor(e,c=0){super(e,"RenderingCancelledException"),this.extraDelay=c}}function isDataScheme(a){const e=a.length;let c=0;for(;c<e&&a[c].trim()==="";)c++;return a.substring(c,c+5).toLowerCase()==="data:"}function isPdfFile(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function getFilenameFromUrl(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function getPdfFilenameFromUrl(a,e="document.pdf"){if(typeof a!="string")return e;if(isDataScheme(a))return warn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const c=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,h=c.exec(a);let g=d.exec(h[1])||d.exec(h[2])||d.exec(h[3]);if(g&&(g=g[0],g.includes("%")))try{g=d.exec(decodeURIComponent(g))[0]}catch{}return g||e}class StatTimer{constructor(){Dn(this,"started",Object.create(null));Dn(this,"times",[])}time(e){e in this.started&&warn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||warn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let c=0;for(const{name:d}of this.times)c=Math.max(d.length,c);for(const{name:d,start:h,end:g}of this.times)e.push(`${d.padEnd(c)} ${g-h}ms
`);return e.join("")}}function isValidFetchUrl(a,e){const c=e?URL.parse(a,e):URL.parse(a);return(c==null?void 0:c.protocol)==="http:"||(c==null?void 0:c.protocol)==="https:"}function noContextMenu(a){a.preventDefault()}function stopEvent(a){a.preventDefault(),a.stopPropagation()}function deprecated(a){console.log("Deprecated API usage: "+a)}var Ay;class PDFDateString{static toDateObject(e){if(!e||typeof e!="string")return null;ut(this,Ay)||At(this,Ay,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const c=ut(this,Ay).exec(e);if(!c)return null;const d=parseInt(c[1],10);let h=parseInt(c[2],10);h=h>=1&&h<=12?h-1:0;let g=parseInt(c[3],10);g=g>=1&&g<=31?g:1;let b=parseInt(c[4],10);b=b>=0&&b<=23?b:0;let _e=parseInt(c[5],10);_e=_e>=0&&_e<=59?_e:0;let et=parseInt(c[6],10);et=et>=0&&et<=59?et:0;const rt=c[7]||"Z";let st=parseInt(c[8],10);st=st>=0&&st<=23?st:0;let $=parseInt(c[9],10)||0;return $=$>=0&&$<=59?$:0,rt==="-"?(b+=st,_e+=$):rt==="+"&&(b-=st,_e-=$),new Date(Date.UTC(d,h,g,b,_e,et))}}Ay=new WeakMap,Lt(PDFDateString,Ay);function getXfaPageViewport(a,{scale:e=1,rotation:c=0}){const{width:d,height:h}=a.attributes.style,g=[0,0,parseInt(d),parseInt(h)];return new PageViewport({viewBox:g,userUnit:1,scale:e,rotation:c})}function getRGB(a){if(a.startsWith("#")){const e=parseInt(a.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(e=>parseInt(e)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(warn(`Not a valid color format: "${a}"`),[0,0,0])}function getColorValues(a){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const c of a.keys()){e.style.color=c;const d=window.getComputedStyle(e).color;a.set(c,getRGB(d))}e.remove()}function getCurrentTransform(a){const{a:e,b:c,c:d,d:h,e:g,f:b}=a.getTransform();return[e,c,d,h,g,b]}function getCurrentTransformInverse(a){const{a:e,b:c,c:d,d:h,e:g,f:b}=a.getTransform().invertSelf();return[e,c,d,h,g,b]}function setLayerDimensions(a,e,c=!1,d=!0){if(e instanceof PageViewport){const{pageWidth:h,pageHeight:g}=e.rawDims,{style:b}=a,_e=util_FeatureTest.isCSSRoundSupported,et=`var(--total-scale-factor) * ${h}px`,rt=`var(--total-scale-factor) * ${g}px`,st=_e?`round(down, ${et}, var(--scale-round-x))`:`calc(${et})`,$=_e?`round(down, ${rt}, var(--scale-round-y))`:`calc(${rt})`;!c||e.rotation%180===0?(b.width=st,b.height=$):(b.width=$,b.height=st)}d&&a.setAttribute("data-main-rotation",e.rotation)}class OutputScale{constructor(){const{pixelRatio:e}=OutputScale;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,c,d,h,g=-1){let b=1/0,_e=1/0,et=1/0;d=OutputScale.capPixels(d,g),d>0&&(b=Math.sqrt(d/(e*c))),h!==-1&&(_e=h/e,et=h/c);const rt=Math.min(b,_e,et);return this.sx>rt||this.sy>rt?(this.sx=rt,this.sy=rt,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,c){if(c>=0){const d=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+c/100));return e>0?Math.min(e,d):d}return e}}const SupportedImageMimeTypes=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Pu,kp,mo,Nu,_y,Qm,Ry,R0,fw,ws,mw,gw,oy,xw,Qv;const Bl=class Bl{constructor(e){Lt(this,ws);Lt(this,Pu,null);Lt(this,kp,null);Lt(this,mo);Lt(this,Nu,null);Lt(this,_y,null);Lt(this,Qm,null);At(this,mo,e),ut(Bl,Ry)||At(Bl,Ry,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=At(this,Pu,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const c=ut(this,mo)._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:c}),e.addEventListener("pointerdown",$t(Bl,R0,fw),{signal:c});const d=At(this,Nu,document.createElement("div"));d.className="buttons",e.append(d);const h=ut(this,mo).toolbarPosition;if(h){const{style:g}=e,b=ut(this,mo)._uiManager.direction==="ltr"?1-h[0]:h[0];g.insetInlineEnd=`${100*b}%`,g.top=`calc(${100*h[1]}% + var(--editor-toolbar-vert-offset))`}return $t(this,ws,xw).call(this),e}get div(){return ut(this,Pu)}hide(){var e;ut(this,Pu).classList.add("hidden"),(e=ut(this,kp))==null||e.hideDropdown()}show(){var e;ut(this,Pu).classList.remove("hidden"),(e=ut(this,_y))==null||e.shown()}async addAltText(e){const c=await e.render();$t(this,ws,oy).call(this,c),ut(this,Nu).prepend(c,ut(this,ws,Qv)),At(this,_y,e)}addColorPicker(e){At(this,kp,e);const c=e.renderButton();$t(this,ws,oy).call(this,c),ut(this,Nu).prepend(c,ut(this,ws,Qv))}async addEditSignatureButton(e){const c=At(this,Qm,await e.renderEditButton(ut(this,mo)));$t(this,ws,oy).call(this,c),ut(this,Nu).prepend(c,ut(this,ws,Qv))}updateEditSignatureButton(e){ut(this,Qm)&&(ut(this,Qm).title=e)}remove(){var e;ut(this,Pu).remove(),(e=ut(this,kp))==null||e.destroy(),At(this,kp,null)}};Pu=new WeakMap,kp=new WeakMap,mo=new WeakMap,Nu=new WeakMap,_y=new WeakMap,Qm=new WeakMap,Ry=new WeakMap,R0=new WeakSet,fw=function(e){e.stopPropagation()},ws=new WeakSet,mw=function(e){ut(this,mo)._focusEventsAllowed=!1,stopEvent(e)},gw=function(e){ut(this,mo)._focusEventsAllowed=!0,stopEvent(e)},oy=function(e){const c=ut(this,mo)._uiManager._signal;e.addEventListener("focusin",$t(this,ws,mw).bind(this),{capture:!0,signal:c}),e.addEventListener("focusout",$t(this,ws,gw).bind(this),{capture:!0,signal:c}),e.addEventListener("contextmenu",noContextMenu,{signal:c})},xw=function(){const{editorType:e,_uiManager:c}=ut(this,mo),d=document.createElement("button");d.className="delete",d.tabIndex=0,d.setAttribute("data-l10n-id",ut(Bl,Ry)[e]),$t(this,ws,oy).call(this,d),d.addEventListener("click",h=>{c.delete()},{signal:c._signal}),ut(this,Nu).append(d)},Qv=function(){const e=document.createElement("div");return e.className="divider",e},Lt(Bl,R0),Lt(Bl,Ry,null);let EditorToolbar=Bl;var Cy,jp,Pp,hp,yw,bw,vw;class HighlightToolbar{constructor(e){Lt(this,hp);Lt(this,Cy,null);Lt(this,jp,null);Lt(this,Pp);At(this,Pp,e)}show(e,c,d){const[h,g]=$t(this,hp,bw).call(this,c,d),{style:b}=ut(this,jp)||At(this,jp,$t(this,hp,yw).call(this));e.append(ut(this,jp)),b.insetInlineEnd=`${100*h}%`,b.top=`calc(${100*g}% + var(--editor-toolbar-vert-offset))`}hide(){ut(this,jp).remove()}}Cy=new WeakMap,jp=new WeakMap,Pp=new WeakMap,hp=new WeakSet,yw=function(){const e=At(this,jp,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",noContextMenu,{signal:ut(this,Pp)._signal});const c=At(this,Cy,document.createElement("div"));return c.className="buttons",e.append(c),$t(this,hp,vw).call(this),e},bw=function(e,c){let d=0,h=0;for(const g of e){const b=g.y+g.height;if(b<d)continue;const _e=g.x+(c?g.width:0);if(b>d){h=_e,d=b;continue}c?_e>h&&(h=_e):_e<h&&(h=_e)}return[c?1-h:h,d]},vw=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const c=document.createElement("span");e.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const d=ut(this,Pp)._signal;e.addEventListener("contextmenu",noContextMenu,{signal:d}),e.addEventListener("click",()=>{ut(this,Pp).highlightSelection("floating_button")},{signal:d}),ut(this,Cy).append(e)};function bindEvents(a,e,c){for(const d of c)e.addEventListener(d,a[d].bind(a))}var C0;class IdManager{constructor(){Lt(this,C0,0)}get id(){return`${AnnotationEditorPrefix}${as(this,C0)._++}`}}C0=new WeakMap;var Jm,ky,_s,_g,Jv;const zE=class zE{constructor(){Lt(this,_g);Lt(this,Jm,getUuid());Lt(this,ky,0);Lt(this,_s,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',d=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),h=new Image;h.src=e;const g=h.decode().then(()=>(d.drawImage(h,0,0,1,1,0,0,1,3),new Uint32Array(d.getImageData(0,0,1,1).data.buffer)[0]===0));return shadow(this,"_isSVGFittingCanvas",g)}async getFromFile(e){const{lastModified:c,name:d,size:h,type:g}=e;return $t(this,_g,Jv).call(this,`${c}_${d}_${h}_${g}`,e)}async getFromUrl(e){return $t(this,_g,Jv).call(this,e,e)}async getFromBlob(e,c){const d=await c;return $t(this,_g,Jv).call(this,e,d)}async getFromId(e){ut(this,_s)||At(this,_s,new Map);const c=ut(this,_s).get(e);if(!c)return null;if(c.bitmap)return c.refCounter+=1,c;if(c.file)return this.getFromFile(c.file);if(c.blobPromise){const{blobPromise:d}=c;return delete c.blobPromise,this.getFromBlob(c.id,d)}return this.getFromUrl(c.url)}getFromCanvas(e,c){ut(this,_s)||At(this,_s,new Map);let d=ut(this,_s).get(e);if(d!=null&&d.bitmap)return d.refCounter+=1,d;const h=new OffscreenCanvas(c.width,c.height);return h.getContext("2d").drawImage(c,0,0),d={bitmap:h.transferToImageBitmap(),id:`image_${ut(this,Jm)}_${as(this,ky)._++}`,refCounter:1,isSvg:!1},ut(this,_s).set(e,d),ut(this,_s).set(d.id,d),d}getSvgUrl(e){const c=ut(this,_s).get(e);return c!=null&&c.isSvg?c.svgUrl:null}deleteId(e){var h;ut(this,_s)||At(this,_s,new Map);const c=ut(this,_s).get(e);if(!c||(c.refCounter-=1,c.refCounter!==0))return;const{bitmap:d}=c;if(!c.url&&!c.file){const g=new OffscreenCanvas(d.width,d.height);g.getContext("bitmaprenderer").transferFromImageBitmap(d),c.blobPromise=g.convertToBlob()}(h=d.close)==null||h.call(d),c.bitmap=null}isValidId(e){return e.startsWith(`image_${ut(this,Jm)}_`)}};Jm=new WeakMap,ky=new WeakMap,_s=new WeakMap,_g=new WeakSet,Jv=async function(e,c){ut(this,_s)||At(this,_s,new Map);let d=ut(this,_s).get(e);if(d===null)return null;if(d!=null&&d.bitmap)return d.refCounter+=1,d;try{d||(d={bitmap:null,id:`image_${ut(this,Jm)}_${as(this,ky)._++}`,refCounter:0,isSvg:!1});let h;if(typeof c=="string"?(d.url=c,h=await fetchData(c,"blob")):c instanceof File?h=d.file=c:c instanceof Blob&&(h=c),h.type==="image/svg+xml"){const g=zE._isSVGFittingCanvas,b=new FileReader,_e=new Image,et=new Promise((rt,st)=>{_e.onload=()=>{d.bitmap=_e,d.isSvg=!0,rt()},b.onload=async()=>{const $=d.svgUrl=b.result;_e.src=await g?`${$}#svgView(preserveAspectRatio(none))`:$},_e.onerror=b.onerror=st});b.readAsDataURL(h),await et}else d.bitmap=await createImageBitmap(h);d.refCounter=1}catch(h){warn(h),d=null}return ut(this,_s).set(e,d),d&&ut(this,_s).set(d.id,d),d};let ImageManager=zE;var Zr,Iu,jy,Wr;class CommandManager{constructor(e=128){Lt(this,Zr,[]);Lt(this,Iu,!1);Lt(this,jy);Lt(this,Wr,-1);At(this,jy,e)}add({cmd:e,undo:c,post:d,mustExec:h,type:g=NaN,overwriteIfSameType:b=!1,keepUndo:_e=!1}){if(h&&e(),ut(this,Iu))return;const et={cmd:e,undo:c,post:d,type:g};if(ut(this,Wr)===-1){ut(this,Zr).length>0&&(ut(this,Zr).length=0),At(this,Wr,0),ut(this,Zr).push(et);return}if(b&&ut(this,Zr)[ut(this,Wr)].type===g){_e&&(et.undo=ut(this,Zr)[ut(this,Wr)].undo),ut(this,Zr)[ut(this,Wr)]=et;return}const rt=ut(this,Wr)+1;rt===ut(this,jy)?ut(this,Zr).splice(0,1):(At(this,Wr,rt),rt<ut(this,Zr).length&&ut(this,Zr).splice(rt)),ut(this,Zr).push(et)}undo(){if(ut(this,Wr)===-1)return;At(this,Iu,!0);const{undo:e,post:c}=ut(this,Zr)[ut(this,Wr)];e(),c==null||c(),At(this,Iu,!1),At(this,Wr,ut(this,Wr)-1)}redo(){if(ut(this,Wr)<ut(this,Zr).length-1){At(this,Wr,ut(this,Wr)+1),At(this,Iu,!0);const{cmd:e,post:c}=ut(this,Zr)[ut(this,Wr)];e(),c==null||c(),At(this,Iu,!1)}}hasSomethingToUndo(){return ut(this,Wr)!==-1}hasSomethingToRedo(){return ut(this,Wr)<ut(this,Zr).length-1}cleanType(e){if(ut(this,Wr)!==-1){for(let c=ut(this,Wr);c>=0;c--)if(ut(this,Zr)[c].type!==e){ut(this,Zr).splice(c+1,ut(this,Wr)-c),At(this,Wr,c);return}ut(this,Zr).length=0,At(this,Wr,-1)}}destroy(){At(this,Zr,null)}}Zr=new WeakMap,Iu=new WeakMap,jy=new WeakMap,Wr=new WeakMap;var k0,Ew;class KeyboardManager{constructor(e){Lt(this,k0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:c}=util_FeatureTest.platform;for(const[d,h,g={}]of e)for(const b of d){const _e=b.startsWith("mac+");c&&_e?(this.callbacks.set(b.slice(4),{callback:h,options:g}),this.allKeys.add(b.split("+").at(-1))):!c&&!_e&&(this.callbacks.set(b,{callback:h,options:g}),this.allKeys.add(b.split("+").at(-1)))}}exec(e,c){if(!this.allKeys.has(c.key))return;const d=this.callbacks.get($t(this,k0,Ew).call(this,c));if(!d)return;const{callback:h,options:{bubbles:g=!1,args:b=[],checker:_e=null}}=d;_e&&!_e(e,c)||(h.bind(e,...b,c)(),g||stopEvent(c))}}k0=new WeakSet,Ew=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const c=this.buffer.join("+");return this.buffer.length=0,c};const j0=class j0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return getColorValues(e),shadow(this,"_colors",e)}convert(e){const c=getRGB(e);if(!window.matchMedia("(forced-colors: active)").matches)return c;for(const[d,h]of this._colors)if(h.every((g,b)=>g===c[b]))return j0._colorsMapping.get(d);return c}getHexCode(e){const c=this._colors.get(e);return c?Util.makeHexColor(...c):e}};Dn(j0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ColorManager=j0;var ex,Xs,rs,gs,tx,Vl,nx,go,Ou,Du,rx,Np,na,Io,Ip,Py,Ny,sx,Iy,ga,Mu,ix,Lu,xa,P0,$u,Oy,Fu,Op,Dp,Bu,Dy,ls,jr,Hl,Uu,Mp,My,Ly,zu,ba,Gl,$y,xo,zn,e0,K0,ww,Sw,t0,Tw,Aw,_w,X0,Rw,Y0,Z0,Cw,Ps,$l,kw,jw,Q0,Pw,ay,J0;const zm=class zm{constructor(e,c,d,h,g,b,_e,et,rt,st,$,_,nt,it){Lt(this,zn);Lt(this,ex,new AbortController);Lt(this,Xs,null);Lt(this,rs,new Map);Lt(this,gs,new Map);Lt(this,tx,null);Lt(this,Vl,null);Lt(this,nx,null);Lt(this,go,new CommandManager);Lt(this,Ou,null);Lt(this,Du,null);Lt(this,rx,0);Lt(this,Np,new Set);Lt(this,na,null);Lt(this,Io,null);Lt(this,Ip,new Set);Dn(this,"_editorUndoBar",null);Lt(this,Py,!1);Lt(this,Ny,!1);Lt(this,sx,!1);Lt(this,Iy,null);Lt(this,ga,null);Lt(this,Mu,null);Lt(this,ix,null);Lt(this,Lu,!1);Lt(this,xa,null);Lt(this,P0,new IdManager);Lt(this,$u,!1);Lt(this,Oy,!1);Lt(this,Fu,null);Lt(this,Op,null);Lt(this,Dp,null);Lt(this,Bu,null);Lt(this,Dy,null);Lt(this,ls,AnnotationEditorType.NONE);Lt(this,jr,new Set);Lt(this,Hl,null);Lt(this,Uu,null);Lt(this,Mp,null);Lt(this,My,null);Lt(this,Ly,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});Lt(this,zu,[0,0]);Lt(this,ba,null);Lt(this,Gl,null);Lt(this,$y,null);Lt(this,xo,null);const ot=this._signal=ut(this,ex).signal;At(this,Gl,e),At(this,$y,c),At(this,tx,d),At(this,Uu,h),this._eventBus=g,g._on("editingaction",this.onEditingAction.bind(this),{signal:ot}),g._on("pagechanging",this.onPageChanging.bind(this),{signal:ot}),g._on("scalechanging",this.onScaleChanging.bind(this),{signal:ot}),g._on("rotationchanging",this.onRotationChanging.bind(this),{signal:ot}),g._on("setpreference",this.onSetPreference.bind(this),{signal:ot}),g._on("switchannotationeditorparams",lt=>this.updateParams(lt.type,lt.value),{signal:ot}),$t(this,zn,Tw).call(this),$t(this,zn,Cw).call(this),$t(this,zn,X0).call(this),At(this,Vl,b.annotationStorage),At(this,Iy,b.filterFactory),At(this,Mp,_e),At(this,ix,et||null),At(this,Py,rt),At(this,Ny,st),At(this,sx,$),At(this,Dy,_||null),this.viewParameters={realScale:PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=nt||null,this._supportsPinchToZoom=it!==!1}static get _keyboardManager(){const e=zm.prototype,c=b=>ut(b,Gl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&b.hasSomethingToControl(),d=(b,{target:_e})=>{if(_e instanceof HTMLInputElement){const{type:et}=_e;return et!=="text"&&et!=="number"}return!0},h=this.TRANSLATE_SMALL,g=this.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:d}],[["ctrl+z","mac+meta+z"],e.undo,{checker:d}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:d}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:d}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(b,{target:_e})=>!(_e instanceof HTMLButtonElement)&&ut(b,Gl).contains(_e)&&!b.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(b,{target:_e})=>!(_e instanceof HTMLButtonElement)&&ut(b,Gl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-h,0],checker:c}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-g,0],checker:c}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[h,0],checker:c}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[g,0],checker:c}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-h],checker:c}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-g],checker:c}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,h],checker:c}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,g],checker:c}]]))}destroy(){var e,c,d,h,g,b,_e,et;(e=ut(this,xo))==null||e.resolve(),At(this,xo,null),(c=ut(this,ex))==null||c.abort(),At(this,ex,null),this._signal=null;for(const rt of ut(this,gs).values())rt.destroy();ut(this,gs).clear(),ut(this,rs).clear(),ut(this,Ip).clear(),(d=ut(this,Bu))==null||d.clear(),At(this,Xs,null),ut(this,jr).clear(),ut(this,go).destroy(),(h=ut(this,tx))==null||h.destroy(),(g=ut(this,Uu))==null||g.destroy(),(b=ut(this,xa))==null||b.hide(),At(this,xa,null),(_e=ut(this,Dp))==null||_e.destroy(),At(this,Dp,null),ut(this,ga)&&(clearTimeout(ut(this,ga)),At(this,ga,null)),ut(this,ba)&&(clearTimeout(ut(this,ba)),At(this,ba,null)),(et=this._editorUndoBar)==null||et.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return ut(this,Dy)}get useNewAltTextFlow(){return ut(this,Ny)}get useNewAltTextWhenAddingImage(){return ut(this,sx)}get hcmFilter(){return shadow(this,"hcmFilter",ut(this,Mp)?ut(this,Iy).addHCMFilter(ut(this,Mp).foreground,ut(this,Mp).background):"none")}get direction(){return shadow(this,"direction",getComputedStyle(ut(this,Gl)).direction)}get highlightColors(){return shadow(this,"highlightColors",ut(this,ix)?new Map(ut(this,ix).split(",").map(e=>e.split("=").map(c=>c.trim()))):null)}get highlightColorNames(){return shadow(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),At(this,Du,e)}setMainHighlightColorPicker(e){At(this,Dp,e)}editAltText(e,c=!1){var d;(d=ut(this,tx))==null||d.editAltText(this,e,c)}getSignature(e){var c;(c=ut(this,Uu))==null||c.getSignature({uiManager:this,editor:e})}get signatureManager(){return ut(this,Uu)}switchToMode(e,c){this._eventBus.on("annotationeditormodechanged",c,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,c){this._eventBus.dispatch("setpreference",{source:this,name:e,value:c})}onSetPreference({name:e,value:c}){switch(e){case"enableNewAltTextWhenAddingImage":At(this,sx,c);break}}onPageChanging({pageNumber:e}){At(this,rx,e-1)}focusMainContainer(){ut(this,Gl).focus()}findParent(e,c){for(const d of ut(this,gs).values()){const{x:h,y:g,width:b,height:_e}=d.div.getBoundingClientRect();if(e>=h&&e<=h+b&&c>=g&&c<=g+_e)return d}return null}disableUserSelect(e=!1){ut(this,$y).classList.toggle("noUserSelect",e)}addShouldRescale(e){ut(this,Ip).add(e)}removeShouldRescale(e){ut(this,Ip).delete(e)}onScaleChanging({scale:e}){var c;this.commitOrRemove(),this.viewParameters.realScale=e*PixelsPerInch.PDF_TO_CSS_UNITS;for(const d of ut(this,Ip))d.onScaleChanging();(c=ut(this,Du))==null||c.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const c=document.getSelection();if(!c||c.isCollapsed)return;const{anchorNode:d,anchorOffset:h,focusNode:g,focusOffset:b}=c,_e=c.toString(),rt=$t(this,zn,e0).call(this,c).closest(".textLayer"),st=this.getSelectionBoxes(rt);if(!st)return;c.empty();const $=$t(this,zn,K0).call(this,rt),_=ut(this,ls)===AnnotationEditorType.NONE,nt=()=>{$==null||$.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:st,anchorNode:d,anchorOffset:h,focusNode:g,focusOffset:b,text:_e}),_&&this.showAllEditors("highlight",!0,!0)};if(_){this.switchToMode(AnnotationEditorType.HIGHLIGHT,nt);return}nt()}addToAnnotationStorage(e){!e.isEmpty()&&ut(this,Vl)&&!ut(this,Vl).has(e.id)&&ut(this,Vl).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,ut(this,Lu)&&(At(this,Lu,!1),$t(this,zn,t0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const c of ut(this,jr))if(c.div.contains(e)){At(this,Op,[c,e]),c._focusEventsAllowed=!1;break}}focus(){if(!ut(this,Op))return;const[e,c]=ut(this,Op);At(this,Op,null),c.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),c.focus()}addEditListeners(){$t(this,zn,X0).call(this),$t(this,zn,Y0).call(this)}removeEditListeners(){$t(this,zn,Rw).call(this),$t(this,zn,Z0).call(this)}dragOver(e){for(const{type:c}of e.dataTransfer.items)for(const d of ut(this,Io))if(d.isHandlingMimeForPasting(c)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const c of e.dataTransfer.items)for(const d of ut(this,Io))if(d.isHandlingMimeForPasting(c.type)){d.paste(c,this.currentLayer),e.preventDefault();return}}copy(e){var d;if(e.preventDefault(),(d=ut(this,Xs))==null||d.commitOrRemove(),!this.hasSelection)return;const c=[];for(const h of ut(this,jr)){const g=h.serialize(!0);g&&c.push(g)}c.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(c))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:c}=e;for(const g of c.items)for(const b of ut(this,Io))if(b.isHandlingMimeForPasting(g.type)){b.paste(g,this.currentLayer);return}let d=c.getData("application/pdfjs");if(!d)return;try{d=JSON.parse(d)}catch(g){warn(`paste: "${g.message}".`);return}if(!Array.isArray(d))return;this.unselectAll();const h=this.currentLayer;try{const g=[];for(const et of d){const rt=await h.deserialize(et);if(!rt)return;g.push(rt)}const b=()=>{for(const et of g)$t(this,zn,Q0).call(this,et);$t(this,zn,J0).call(this,g)},_e=()=>{for(const et of g)et.remove()};this.addCommands({cmd:b,undo:_e,mustExec:!0})}catch(g){warn(`paste: "${g.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),ut(this,ls)!==AnnotationEditorType.NONE&&!this.isEditorHandlingKeyboard&&zm._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,ut(this,Lu)&&(At(this,Lu,!1),$t(this,zn,t0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?($t(this,zn,Aw).call(this),$t(this,zn,Y0).call(this),$t(this,zn,Ps).call(this,{isEditing:ut(this,ls)!==AnnotationEditorType.NONE,isEmpty:$t(this,zn,ay).call(this),hasSomethingToUndo:ut(this,go).hasSomethingToUndo(),hasSomethingToRedo:ut(this,go).hasSomethingToRedo(),hasSelectedEditor:!1})):($t(this,zn,_w).call(this),$t(this,zn,Z0).call(this),$t(this,zn,Ps).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!ut(this,Io)){At(this,Io,e);for(const c of ut(this,Io))$t(this,zn,$l).call(this,c.defaultPropertiesToUpdate)}}getId(){return ut(this,P0).id}get currentLayer(){return ut(this,gs).get(ut(this,rx))}getLayer(e){return ut(this,gs).get(e)}get currentPageIndex(){return ut(this,rx)}addLayer(e){ut(this,gs).set(e.pageIndex,e),ut(this,$u)?e.enable():e.disable()}removeLayer(e){ut(this,gs).delete(e.pageIndex)}async updateMode(e,c=null,d=!1){var h,g,b;if(ut(this,ls)!==e&&!(ut(this,xo)&&(await ut(this,xo).promise,!ut(this,xo)))){if(At(this,xo,Promise.withResolvers()),(h=ut(this,Du))==null||h.commitOrRemove(),At(this,ls,e),e===AnnotationEditorType.NONE){this.setEditingState(!1),$t(this,zn,jw).call(this),(g=this._editorUndoBar)==null||g.hide(),ut(this,xo).resolve();return}e===AnnotationEditorType.SIGNATURE&&await((b=ut(this,Uu))==null?void 0:b.loadSignatures()),this.setEditingState(!0),await $t(this,zn,kw).call(this),this.unselectAll();for(const _e of ut(this,gs).values())_e.updateMode(e);if(!c){d&&this.addNewEditorFromKeyboard(),ut(this,xo).resolve();return}for(const _e of ut(this,rs).values())_e.annotationElementId===c||_e.id===c?(this.setSelected(_e),_e.enterInEditMode()):_e.unselect();ut(this,xo).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==ut(this,ls)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,c){var d;if(ut(this,Io)){switch(e){case AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor(c);return;case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:(d=ut(this,Dp))==null||d.updateColor(c);break;case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(ut(this,My)||At(this,My,new Map)).set(e,c),this.showAllEditors("highlight",c);break}for(const h of ut(this,jr))h.updateParams(e,c);for(const h of ut(this,Io))h.updateDefaultParams(e,c)}}showAllEditors(e,c,d=!1){var g;for(const b of ut(this,rs).values())b.editorType===e&&b.show(c);(((g=ut(this,My))==null?void 0:g.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL))??!0)!==c&&$t(this,zn,$l).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL,c]])}enableWaiting(e=!1){if(ut(this,Oy)!==e){At(this,Oy,e);for(const c of ut(this,gs).values())e?c.disableClick():c.enableClick(),c.div.classList.toggle("waiting",e)}}getEditors(e){const c=[];for(const d of ut(this,rs).values())d.pageIndex===e&&c.push(d);return c}getEditor(e){return ut(this,rs).get(e)}addEditor(e){ut(this,rs).set(e.id,e)}removeEditor(e){var c,d;e.div.contains(document.activeElement)&&(ut(this,ga)&&clearTimeout(ut(this,ga)),At(this,ga,setTimeout(()=>{this.focusMainContainer(),At(this,ga,null)},0))),ut(this,rs).delete(e.id),e.annotationElementId&&((c=ut(this,Bu))==null||c.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!ut(this,Np).has(e.annotationElementId))&&((d=ut(this,Vl))==null||d.remove(e.id))}addDeletedAnnotationElement(e){ut(this,Np).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return ut(this,Np).has(e)}removeDeletedAnnotationElement(e){ut(this,Np).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){ut(this,Xs)!==e&&(At(this,Xs,e),e&&$t(this,zn,$l).call(this,e.propertiesToUpdate))}updateUI(e){ut(this,zn,Pw)===e&&$t(this,zn,$l).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){$t(this,zn,$l).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(ut(this,jr).has(e)){ut(this,jr).delete(e),e.unselect(),$t(this,zn,Ps).call(this,{hasSelectedEditor:this.hasSelection});return}ut(this,jr).add(e),e.select(),$t(this,zn,$l).call(this,e.propertiesToUpdate),$t(this,zn,Ps).call(this,{hasSelectedEditor:!0})}setSelected(e){var c;(c=ut(this,Du))==null||c.commitOrRemove();for(const d of ut(this,jr))d!==e&&d.unselect();ut(this,jr).clear(),ut(this,jr).add(e),e.select(),$t(this,zn,$l).call(this,e.propertiesToUpdate),$t(this,zn,Ps).call(this,{hasSelectedEditor:!0})}isSelected(e){return ut(this,jr).has(e)}get firstSelectedEditor(){return ut(this,jr).values().next().value}unselect(e){e.unselect(),ut(this,jr).delete(e),$t(this,zn,Ps).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ut(this,jr).size!==0}get isEnterHandled(){return ut(this,jr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;ut(this,go).undo(),$t(this,zn,Ps).call(this,{hasSomethingToUndo:ut(this,go).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:$t(this,zn,ay).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){ut(this,go).redo(),$t(this,zn,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ut(this,go).hasSomethingToRedo(),isEmpty:$t(this,zn,ay).call(this)})}addCommands(e){ut(this,go).add(e),$t(this,zn,Ps).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:$t(this,zn,ay).call(this)})}cleanUndoStack(e){ut(this,go).cleanType(e)}delete(){var g;this.commitOrRemove();const e=(g=this.currentLayer)==null?void 0:g.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const c=e?[e]:[...ut(this,jr)],d=()=>{var b;(b=this._editorUndoBar)==null||b.show(h,c.length===1?c[0].editorType:c.length);for(const _e of c)_e.remove()},h=()=>{for(const b of c)$t(this,zn,Q0).call(this,b)};this.addCommands({cmd:d,undo:h,mustExec:!0})}commitOrRemove(){var e;(e=ut(this,Xs))==null||e.commitOrRemove()}hasSomethingToControl(){return ut(this,Xs)||this.hasSelection}selectAll(){for(const e of ut(this,jr))e.commit();$t(this,zn,J0).call(this,ut(this,rs).values())}unselectAll(){var e;if(!(ut(this,Xs)&&(ut(this,Xs).commitOrRemove(),ut(this,ls)!==AnnotationEditorType.NONE))&&!((e=ut(this,Du))!=null&&e.commitOrRemove())&&this.hasSelection){for(const c of ut(this,jr))c.unselect();ut(this,jr).clear(),$t(this,zn,Ps).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,c,d=!1){if(d||this.commitOrRemove(),!this.hasSelection)return;ut(this,zu)[0]+=e,ut(this,zu)[1]+=c;const[h,g]=ut(this,zu),b=[...ut(this,jr)],_e=1e3;ut(this,ba)&&clearTimeout(ut(this,ba)),At(this,ba,setTimeout(()=>{At(this,ba,null),ut(this,zu)[0]=ut(this,zu)[1]=0,this.addCommands({cmd:()=>{for(const et of b)ut(this,rs).has(et.id)&&(et.translateInPage(h,g),et.translationDone())},undo:()=>{for(const et of b)ut(this,rs).has(et.id)&&(et.translateInPage(-h,-g),et.translationDone())},mustExec:!1})},_e));for(const et of b)et.translateInPage(e,c),et.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),At(this,na,new Map);for(const e of ut(this,jr))ut(this,na).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!ut(this,na))return!1;this.disableUserSelect(!1);const e=ut(this,na);At(this,na,null);let c=!1;for(const[{x:h,y:g,pageIndex:b},_e]of e)_e.newX=h,_e.newY=g,_e.newPageIndex=b,c||(c=h!==_e.savedX||g!==_e.savedY||b!==_e.savedPageIndex);if(!c)return!1;const d=(h,g,b,_e)=>{if(ut(this,rs).has(h.id)){const et=ut(this,gs).get(_e);et?h._setParentAndPosition(et,g,b):(h.pageIndex=_e,h.x=g,h.y=b)}};return this.addCommands({cmd:()=>{for(const[h,{newX:g,newY:b,newPageIndex:_e}]of e)d(h,g,b,_e)},undo:()=>{for(const[h,{savedX:g,savedY:b,savedPageIndex:_e}]of e)d(h,g,b,_e)},mustExec:!0}),!0}dragSelectedEditors(e,c){if(ut(this,na))for(const d of ut(this,na).keys())d.drag(e,c)}rebuild(e){if(e.parent===null){const c=this.getLayer(e.pageIndex);c?(c.changeParent(e),c.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||ut(this,jr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return ut(this,Xs)===e}getActive(){return ut(this,Xs)}getMode(){return ut(this,ls)}get imageManager(){return shadow(this,"imageManager",new ImageManager)}getSelectionBoxes(e){if(!e)return null;const c=document.getSelection();for(let rt=0,st=c.rangeCount;rt<st;rt++)if(!e.contains(c.getRangeAt(rt).commonAncestorContainer))return null;const{x:d,y:h,width:g,height:b}=e.getBoundingClientRect();let _e;switch(e.getAttribute("data-main-rotation")){case"90":_e=(rt,st,$,_)=>({x:(st-h)/b,y:1-(rt+$-d)/g,width:_/b,height:$/g});break;case"180":_e=(rt,st,$,_)=>({x:1-(rt+$-d)/g,y:1-(st+_-h)/b,width:$/g,height:_/b});break;case"270":_e=(rt,st,$,_)=>({x:1-(st+_-h)/b,y:(rt-d)/g,width:_/b,height:$/g});break;default:_e=(rt,st,$,_)=>({x:(rt-d)/g,y:(st-h)/b,width:$/g,height:_/b});break}const et=[];for(let rt=0,st=c.rangeCount;rt<st;rt++){const $=c.getRangeAt(rt);if(!$.collapsed)for(const{x:_,y:nt,width:it,height:ot}of $.getClientRects())it===0||ot===0||et.push(_e(_,nt,it,ot))}return et.length===0?null:et}addChangedExistingAnnotation({annotationElementId:e,id:c}){(ut(this,nx)||At(this,nx,new Map)).set(e,c)}removeChangedExistingAnnotation({annotationElementId:e}){var c;(c=ut(this,nx))==null||c.delete(e)}renderAnnotationElement(e){var h;const c=(h=ut(this,nx))==null?void 0:h.get(e.data.id);if(!c)return;const d=ut(this,Vl).getRawValue(c);d&&(ut(this,ls)===AnnotationEditorType.NONE&&!d.hasBeenModified||d.renderAnnotationElement(e))}setMissingCanvas(e,c,d){var g;const h=(g=ut(this,Bu))==null?void 0:g.get(e);h&&(h.setCanvas(c,d),ut(this,Bu).delete(e))}addMissingCanvas(e,c){(ut(this,Bu)||At(this,Bu,new Map)).set(e,c)}};ex=new WeakMap,Xs=new WeakMap,rs=new WeakMap,gs=new WeakMap,tx=new WeakMap,Vl=new WeakMap,nx=new WeakMap,go=new WeakMap,Ou=new WeakMap,Du=new WeakMap,rx=new WeakMap,Np=new WeakMap,na=new WeakMap,Io=new WeakMap,Ip=new WeakMap,Py=new WeakMap,Ny=new WeakMap,sx=new WeakMap,Iy=new WeakMap,ga=new WeakMap,Mu=new WeakMap,ix=new WeakMap,Lu=new WeakMap,xa=new WeakMap,P0=new WeakMap,$u=new WeakMap,Oy=new WeakMap,Fu=new WeakMap,Op=new WeakMap,Dp=new WeakMap,Bu=new WeakMap,Dy=new WeakMap,ls=new WeakMap,jr=new WeakMap,Hl=new WeakMap,Uu=new WeakMap,Mp=new WeakMap,My=new WeakMap,Ly=new WeakMap,zu=new WeakMap,ba=new WeakMap,Gl=new WeakMap,$y=new WeakMap,xo=new WeakMap,zn=new WeakSet,e0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},K0=function(e){const{currentLayer:c}=this;if(c.hasTextLayer(e))return c;for(const d of ut(this,gs).values())if(d.hasTextLayer(e))return d;return null},ww=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const d=$t(this,zn,e0).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(d);h&&(ut(this,xa)||At(this,xa,new HighlightToolbar(this)),ut(this,xa).show(d,h,this.direction==="ltr"))},Sw=function(){var g,b,_e;const e=document.getSelection();if(!e||e.isCollapsed){ut(this,Hl)&&((g=ut(this,xa))==null||g.hide(),At(this,Hl,null),$t(this,zn,Ps).call(this,{hasSelectedText:!1}));return}const{anchorNode:c}=e;if(c===ut(this,Hl))return;const h=$t(this,zn,e0).call(this,e).closest(".textLayer");if(!h){ut(this,Hl)&&((b=ut(this,xa))==null||b.hide(),At(this,Hl,null),$t(this,zn,Ps).call(this,{hasSelectedText:!1}));return}if((_e=ut(this,xa))==null||_e.hide(),At(this,Hl,c),$t(this,zn,Ps).call(this,{hasSelectedText:!0}),!(ut(this,ls)!==AnnotationEditorType.HIGHLIGHT&&ut(this,ls)!==AnnotationEditorType.NONE)&&(ut(this,ls)===AnnotationEditorType.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),At(this,Lu,this.isShiftKeyDown),!this.isShiftKeyDown)){const et=ut(this,ls)===AnnotationEditorType.HIGHLIGHT?$t(this,zn,K0).call(this,h):null;et==null||et.toggleDrawing();const rt=new AbortController,st=this.combinedSignal(rt),$=_=>{_.type==="pointerup"&&_.button!==0||(rt.abort(),et==null||et.toggleDrawing(!0),_.type==="pointerup"&&$t(this,zn,t0).call(this,"main_toolbar"))};window.addEventListener("pointerup",$,{signal:st}),window.addEventListener("blur",$,{signal:st})}},t0=function(e=""){ut(this,ls)===AnnotationEditorType.HIGHLIGHT?this.highlightSelection(e):ut(this,Py)&&$t(this,zn,ww).call(this)},Tw=function(){document.addEventListener("selectionchange",$t(this,zn,Sw).bind(this),{signal:this._signal})},Aw=function(){if(ut(this,Mu))return;At(this,Mu,new AbortController);const e=this.combinedSignal(ut(this,Mu));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},_w=function(){var e;(e=ut(this,Mu))==null||e.abort(),At(this,Mu,null)},X0=function(){if(ut(this,Fu))return;At(this,Fu,new AbortController);const e=this.combinedSignal(ut(this,Fu));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Rw=function(){var e;(e=ut(this,Fu))==null||e.abort(),At(this,Fu,null)},Y0=function(){if(ut(this,Ou))return;At(this,Ou,new AbortController);const e=this.combinedSignal(ut(this,Ou));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Z0=function(){var e;(e=ut(this,Ou))==null||e.abort(),At(this,Ou,null)},Cw=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ps=function(e){Object.entries(e).some(([d,h])=>ut(this,Ly)[d]!==h)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ut(this,Ly),e)}),ut(this,ls)===AnnotationEditorType.HIGHLIGHT&&e.hasSelectedEditor===!1&&$t(this,zn,$l).call(this,[[AnnotationEditorParamsType.HIGHLIGHT_FREE,!0]]))},$l=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},kw=async function(){if(!ut(this,$u)){At(this,$u,!0);const e=[];for(const c of ut(this,gs).values())e.push(c.enable());await Promise.all(e);for(const c of ut(this,rs).values())c.enable()}},jw=function(){if(this.unselectAll(),ut(this,$u)){At(this,$u,!1);for(const e of ut(this,gs).values())e.disable();for(const e of ut(this,rs).values())e.disable()}},Q0=function(e){const c=ut(this,gs).get(e.pageIndex);c?c.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Pw=function(){let e=null;for(e of ut(this,jr));return e},ay=function(){if(ut(this,rs).size===0)return!0;if(ut(this,rs).size===1)for(const e of ut(this,rs).values())return e.isEmpty();return!1},J0=function(e){for(const c of ut(this,jr))c.unselect();ut(this,jr).clear();for(const c of e)c.isEmpty()||(ut(this,jr).add(c),c.select());$t(this,zn,Ps).call(this,{hasSelectedEditor:this.hasSelection})},Dn(zm,"TRANSLATE_SMALL",1),Dn(zm,"TRANSLATE_BIG",10);let AnnotationEditorUIManager=zm;var cs,$a,Oo,ox,xl,Ys,ax,yl,Vs,Wl,Lp,El,Vu,Wo,ly,n0;const Ns=class Ns{constructor(e){Lt(this,Wo);Lt(this,cs,null);Lt(this,$a,!1);Lt(this,Oo,null);Lt(this,ox,null);Lt(this,xl,null);Lt(this,Ys,null);Lt(this,ax,!1);Lt(this,yl,null);Lt(this,Vs,null);Lt(this,Wl,null);Lt(this,Lp,null);Lt(this,El,!1);At(this,Vs,e),At(this,El,e._uiManager.useNewAltTextFlow),ut(Ns,Vu)||At(Ns,Vu,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ns._l10n??(Ns._l10n=e)}async render(){const e=At(this,Oo,document.createElement("button"));e.className="altText",e.tabIndex="0";const c=At(this,ox,document.createElement("span"));e.append(c),ut(this,El)?(e.classList.add("new"),e.setAttribute("data-l10n-id",ut(Ns,Vu).missing),c.setAttribute("data-l10n-id",ut(Ns,Vu)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),c.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const d=ut(this,Vs)._uiManager._signal;e.addEventListener("contextmenu",noContextMenu,{signal:d}),e.addEventListener("pointerdown",g=>g.stopPropagation(),{signal:d});const h=g=>{g.preventDefault(),ut(this,Vs)._uiManager.editAltText(ut(this,Vs)),ut(this,El)&&ut(this,Vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:ut(this,Wo,ly)}})};return e.addEventListener("click",h,{capture:!0,signal:d}),e.addEventListener("keydown",g=>{g.target===e&&g.key==="Enter"&&(At(this,ax,!0),h(g))},{signal:d}),await $t(this,Wo,n0).call(this),e}finish(){ut(this,Oo)&&(ut(this,Oo).focus({focusVisible:ut(this,ax)}),At(this,ax,!1))}isEmpty(){return ut(this,El)?ut(this,cs)===null:!ut(this,cs)&&!ut(this,$a)}hasData(){return ut(this,El)?ut(this,cs)!==null||!!ut(this,Wl):this.isEmpty()}get guessedText(){return ut(this,Wl)}async setGuessedText(e){ut(this,cs)===null&&(At(this,Wl,e),At(this,Lp,await Ns._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),$t(this,Wo,n0).call(this))}toggleAltTextBadge(e=!1){var c;if(!ut(this,El)||ut(this,cs)){(c=ut(this,yl))==null||c.remove(),At(this,yl,null);return}if(!ut(this,yl)){const d=At(this,yl,document.createElement("div"));d.className="noAltTextBadge",ut(this,Vs).div.append(d)}ut(this,yl).classList.toggle("hidden",!e)}serialize(e){let c=ut(this,cs);return!e&&ut(this,Wl)===c&&(c=ut(this,Lp)),{altText:c,decorative:ut(this,$a),guessedText:ut(this,Wl),textWithDisclaimer:ut(this,Lp)}}get data(){return{altText:ut(this,cs),decorative:ut(this,$a)}}set data({altText:e,decorative:c,guessedText:d,textWithDisclaimer:h,cancel:g=!1}){d&&(At(this,Wl,d),At(this,Lp,h)),!(ut(this,cs)===e&&ut(this,$a)===c)&&(g||(At(this,cs,e),At(this,$a,c)),$t(this,Wo,n0).call(this))}toggle(e=!1){ut(this,Oo)&&(!e&&ut(this,Ys)&&(clearTimeout(ut(this,Ys)),At(this,Ys,null)),ut(this,Oo).disabled=!e)}shown(){ut(this,Vs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:ut(this,Wo,ly)}})}destroy(){var e,c;(e=ut(this,Oo))==null||e.remove(),At(this,Oo,null),At(this,ox,null),At(this,xl,null),(c=ut(this,yl))==null||c.remove(),At(this,yl,null)}};cs=new WeakMap,$a=new WeakMap,Oo=new WeakMap,ox=new WeakMap,xl=new WeakMap,Ys=new WeakMap,ax=new WeakMap,yl=new WeakMap,Vs=new WeakMap,Wl=new WeakMap,Lp=new WeakMap,El=new WeakMap,Vu=new WeakMap,Wo=new WeakSet,ly=function(){return ut(this,cs)&&"added"||ut(this,cs)===null&&this.guessedText&&"review"||"missing"},n0=async function(){var h,g,b;const e=ut(this,Oo);if(!e)return;if(ut(this,El)){if(e.classList.toggle("done",!!ut(this,cs)),e.setAttribute("data-l10n-id",ut(Ns,Vu)[ut(this,Wo,ly)]),(h=ut(this,ox))==null||h.setAttribute("data-l10n-id",ut(Ns,Vu)[`${ut(this,Wo,ly)}-label`]),!ut(this,cs)){(g=ut(this,xl))==null||g.remove();return}}else{if(!ut(this,cs)&&!ut(this,$a)){e.classList.remove("done"),(b=ut(this,xl))==null||b.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let c=ut(this,xl);if(!c){At(this,xl,c=document.createElement("span")),c.className="tooltip",c.setAttribute("role","tooltip"),c.id=`alt-text-tooltip-${ut(this,Vs).id}`;const _e=100,et=ut(this,Vs)._uiManager._signal;et.addEventListener("abort",()=>{clearTimeout(ut(this,Ys)),At(this,Ys,null)},{once:!0}),e.addEventListener("mouseenter",()=>{At(this,Ys,setTimeout(()=>{At(this,Ys,null),ut(this,xl).classList.add("show"),ut(this,Vs)._reportTelemetry({action:"alt_text_tooltip"})},_e))},{signal:et}),e.addEventListener("mouseleave",()=>{var rt;ut(this,Ys)&&(clearTimeout(ut(this,Ys)),At(this,Ys,null)),(rt=ut(this,xl))==null||rt.classList.remove("show")},{signal:et})}ut(this,$a)?c.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(c.removeAttribute("data-l10n-id"),c.textContent=ut(this,cs)),c.parentNode||e.append(c);const d=ut(this,Vs).getElementForAltText();d==null||d.setAttribute("aria-describedby",c.id)},Lt(Ns,Vu,null),Dn(Ns,"_l10n",null);let AltText=Ns;var lx,$p,Fy,By,Uy,zy,Vy,Kl,Fp,Xl,Bp,Yl,pp,Nw,Iw,Ow;const VE=class VE{constructor({container:e,isPinchingDisabled:c=null,isPinchingStopped:d=null,onPinchStart:h=null,onPinching:g=null,onPinchEnd:b=null,signal:_e}){Lt(this,pp);Lt(this,lx);Lt(this,$p,!1);Lt(this,Fy,null);Lt(this,By);Lt(this,Uy);Lt(this,zy);Lt(this,Vy);Lt(this,Kl,null);Lt(this,Fp);Lt(this,Xl,null);Lt(this,Bp);Lt(this,Yl,null);At(this,lx,e),At(this,Fy,d),At(this,By,c),At(this,Uy,h),At(this,zy,g),At(this,Vy,b),At(this,Bp,new AbortController),At(this,Fp,AbortSignal.any([_e,ut(this,Bp).signal])),e.addEventListener("touchstart",$t(this,pp,Nw).bind(this),{passive:!1,signal:ut(this,Fp)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/OutputScale.pixelRatio}destroy(){var e,c;(e=ut(this,Bp))==null||e.abort(),At(this,Bp,null),(c=ut(this,Kl))==null||c.abort(),At(this,Kl,null)}};lx=new WeakMap,$p=new WeakMap,Fy=new WeakMap,By=new WeakMap,Uy=new WeakMap,zy=new WeakMap,Vy=new WeakMap,Kl=new WeakMap,Fp=new WeakMap,Xl=new WeakMap,Bp=new WeakMap,Yl=new WeakMap,pp=new WeakSet,Nw=function(e){var h,g,b;if((h=ut(this,By))!=null&&h.call(this))return;if(e.touches.length===1){if(ut(this,Kl))return;const _e=At(this,Kl,new AbortController),et=AbortSignal.any([ut(this,Fp),_e.signal]),rt=ut(this,lx),st={capture:!0,signal:et,passive:!1},$=_=>{var nt;_.pointerType==="touch"&&((nt=ut(this,Kl))==null||nt.abort(),At(this,Kl,null))};rt.addEventListener("pointerdown",_=>{_.pointerType==="touch"&&(stopEvent(_),$(_))},st),rt.addEventListener("pointerup",$,st),rt.addEventListener("pointercancel",$,st);return}if(!ut(this,Yl)){At(this,Yl,new AbortController);const _e=AbortSignal.any([ut(this,Fp),ut(this,Yl).signal]),et=ut(this,lx),rt={signal:_e,capture:!1,passive:!1};et.addEventListener("touchmove",$t(this,pp,Iw).bind(this),rt);const st=$t(this,pp,Ow).bind(this);et.addEventListener("touchend",st,rt),et.addEventListener("touchcancel",st,rt),rt.capture=!0,et.addEventListener("pointerdown",stopEvent,rt),et.addEventListener("pointermove",stopEvent,rt),et.addEventListener("pointercancel",stopEvent,rt),et.addEventListener("pointerup",stopEvent,rt),(g=ut(this,Uy))==null||g.call(this)}if(stopEvent(e),e.touches.length!==2||(b=ut(this,Fy))!=null&&b.call(this)){At(this,Xl,null);return}let[c,d]=e.touches;c.identifier>d.identifier&&([c,d]=[d,c]),At(this,Xl,{touch0X:c.screenX,touch0Y:c.screenY,touch1X:d.screenX,touch1Y:d.screenY})},Iw=function(e){var ht;if(!ut(this,Xl)||e.touches.length!==2)return;stopEvent(e);let[c,d]=e.touches;c.identifier>d.identifier&&([c,d]=[d,c]);const{screenX:h,screenY:g}=c,{screenX:b,screenY:_e}=d,et=ut(this,Xl),{touch0X:rt,touch0Y:st,touch1X:$,touch1Y:_}=et,nt=$-rt,it=_-st,ot=b-h,lt=_e-g,at=Math.hypot(ot,lt)||1,ct=Math.hypot(nt,it)||1;if(!ut(this,$p)&&Math.abs(ct-at)<=VE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(et.touch0X=h,et.touch0Y=g,et.touch1X=b,et.touch1Y=_e,!ut(this,$p)){At(this,$p,!0);return}const dt=[(h+b)/2,(g+_e)/2];(ht=ut(this,zy))==null||ht.call(this,dt,ct,at)},Ow=function(e){var c;e.touches.length>=2||(ut(this,Yl)&&(ut(this,Yl).abort(),At(this,Yl,null),(c=ut(this,Vy))==null||c.call(this)),ut(this,Xl)&&(stopEvent(e),At(this,Xl,null),At(this,$p,!1)))};let TouchManager=VE;var Up,Do,Mr,ux,Hu,Hy,zp,xs,Vp,Zl,Gu,Gy,Hp,Zs,Wy,Gp,Ql,wl,dx,hx,yo,Wp,qy,N0,sr,eE,Ky,tE,r0,Dw,Mw,nE,s0,rE,Lw,$w,Fw,sE,Bw,iE,Uw,zw,Vw,oE,cy;const fr=class fr{constructor(e){Lt(this,sr);Lt(this,Up,null);Lt(this,Do,null);Lt(this,Mr,null);Lt(this,ux,!1);Lt(this,Hu,null);Lt(this,Hy,"");Lt(this,zp,!1);Lt(this,xs,null);Lt(this,Vp,null);Lt(this,Zl,null);Lt(this,Gu,null);Lt(this,Gy,"");Lt(this,Hp,!1);Lt(this,Zs,null);Lt(this,Wy,!1);Lt(this,Gp,!1);Lt(this,Ql,!1);Lt(this,wl,null);Lt(this,dx,0);Lt(this,hx,0);Lt(this,yo,null);Lt(this,Wp,null);Dn(this,"isSelected",!1);Dn(this,"_isCopy",!1);Dn(this,"_editToolbar",null);Dn(this,"_initialOptions",Object.create(null));Dn(this,"_initialData",null);Dn(this,"_isVisible",!0);Dn(this,"_uiManager",null);Dn(this,"_focusEventsAllowed",!0);Lt(this,qy,!1);Lt(this,N0,fr._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:d,pageHeight:h,pageX:g,pageY:b}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,h],this.pageTranslation=[g,b];const[_e,et]=this.parentDimensions;this.x=e.x/_e,this.y=e.y/et,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fr.prototype._resizeWithKeyboard,c=AnnotationEditorUIManager.TRANSLATE_SMALL,d=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_resizerKeyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-c,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-d,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[c,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[d,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-c]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-d]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,c]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,d]}],[["Escape","mac+Escape"],fr.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return shadow(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const c=new FakeEditor({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});c.annotationElementId=e.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(e,c){if(fr._l10n??(fr._l10n=e),fr._l10nResizer||(fr._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),fr._borderLineWidth!==-1)return;const d=getComputedStyle(document.documentElement);fr._borderLineWidth=parseFloat(d.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,c){unreachable("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return ut(this,qy)}set _isDraggable(e){var c;At(this,qy,e),(c=this.div)==null||c.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(e*2),this.y+=this.width*e/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(e*2),this.y-=this.width*e/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ut(this,N0)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):$t(this,sr,cy).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(ut(this,Hp)?At(this,Hp,!1):this.parent.setSelected(this))}focusout(e){var d;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const c=e.relatedTarget;c!=null&&c.closest(`#${this.id}`)||(e.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,c,d,h){const[g,b]=this.parentDimensions;[d,h]=this.screenToPageTranslation(d,h),this.x=(e+d)/g,this.y=(c+h)/b,this.fixAndSetPosition()}_moveAfterPaste(e,c){const[d,h]=this.parentDimensions;this.setAt(e*d,c*h,this.width*d,this.height*h),this._onTranslated()}translate(e,c){$t(this,sr,eE).call(this,this.parentDimensions,e,c)}translateInPage(e,c){ut(this,Zs)||At(this,Zs,[this.x,this.y,this.width,this.height]),$t(this,sr,eE).call(this,this.pageDimensions,e,c),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,c){ut(this,Zs)||At(this,Zs,[this.x,this.y,this.width,this.height]);const{div:d,parentDimensions:[h,g]}=this;if(this.x+=e/h,this.y+=c/g,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:$,y:_}=this.div.getBoundingClientRect();this.parent.findNewParent(this,$,_)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:b,y:_e}=this;const[et,rt]=this.getBaseTranslation();b+=et,_e+=rt;const{style:st}=d;st.left=`${(100*b).toFixed(2)}%`,st.top=`${(100*_e).toFixed(2)}%`,this._onTranslating(b,_e),d.scrollIntoView({block:"nearest"})}_onTranslating(e,c){}_onTranslated(e,c){}get _hasBeenMoved(){return!!ut(this,Zs)&&(ut(this,Zs)[0]!==this.x||ut(this,Zs)[1]!==this.y)}get _hasBeenResized(){return!!ut(this,Zs)&&(ut(this,Zs)[2]!==this.width||ut(this,Zs)[3]!==this.height)}getBaseTranslation(){const[e,c]=this.parentDimensions,{_borderLineWidth:d}=fr,h=d/e,g=d/c;switch(this.rotation){case 90:return[-h,g];case 180:return[h,g];case 270:return[h,-g];default:return[-h,-g]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:c},pageDimensions:[d,h]}=this;let{x:g,y:b,width:_e,height:et}=this;if(_e*=d,et*=h,g*=d,b*=h,this._mustFixPosition)switch(e){case 0:g=MathClamp(g,0,d-_e),b=MathClamp(b,0,h-et);break;case 90:g=MathClamp(g,0,d-et),b=MathClamp(b,_e,h);break;case 180:g=MathClamp(g,_e,d),b=MathClamp(b,et,h);break;case 270:g=MathClamp(g,et,d),b=MathClamp(b,0,h-_e);break}this.x=g/=d,this.y=b/=h;const[rt,st]=this.getBaseTranslation();g+=rt,b+=st,c.left=`${(100*g).toFixed(2)}%`,c.top=`${(100*b).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,c){var d;return $t(d=fr,Ky,tE).call(d,e,c,this.parentRotation)}pageTranslationToScreen(e,c){var d;return $t(d=fr,Ky,tE).call(d,e,c,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[c,d]}=this;return[c*e,d*e]}setDims(e,c){const[d,h]=this.parentDimensions,{style:g}=this.div;g.width=`${(100*e/d).toFixed(2)}%`,ut(this,zp)||(g.height=`${(100*c/h).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:c,width:d}=e,h=d.endsWith("%"),g=!ut(this,zp)&&c.endsWith("%");if(h&&g)return;const[b,_e]=this.parentDimensions;h||(e.width=`${(100*parseFloat(d)/b).toFixed(2)}%`),!ut(this,zp)&&!g&&(e.height=`${(100*parseFloat(c)/_e).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=ut(this,Mr))==null||e.finish()}async addEditToolbar(){return this._editToolbar||ut(this,Gp)?this._editToolbar:(this._editToolbar=new EditorToolbar(this),this.div.append(this._editToolbar.render()),ut(this,Mr)&&await this._editToolbar.addAltText(ut(this,Mr)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=ut(this,Mr))==null||e.destroy())}addContainer(e){var d;const c=(d=this._editToolbar)==null?void 0:d.div;c?c.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){ut(this,Mr)||(AltText.initialize(fr._l10n),At(this,Mr,new AltText(this)),ut(this,Up)&&(ut(this,Mr).data=ut(this,Up),At(this,Up,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=ut(this,Mr))==null?void 0:e.data}set altTextData(e){ut(this,Mr)&&(ut(this,Mr).data=e)}get guessedAltText(){var e;return(e=ut(this,Mr))==null?void 0:e.guessedText}async setGuessedAltText(e){var c;await((c=ut(this,Mr))==null?void 0:c.setGuessedText(e))}serializeAltText(e){var c;return(c=ut(this,Mr))==null?void 0:c.serialize(e)}hasAltText(){return!!ut(this,Mr)&&!ut(this,Mr).isEmpty()}hasAltTextData(){var e;return((e=ut(this,Mr))==null?void 0:e.hasData())??!1}render(){var b;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=ut(this,ux)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),$t(this,sr,iE).call(this);const[c,d]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*d/c).toFixed(2)}%`,e.style.maxHeight=`${(100*c/d).toFixed(2)}%`);const[h,g]=this.getInitialTranslation();return this.translate(h,g),bindEvents(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(ut(this,Wp)||At(this,Wp,new TouchManager({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:$t(this,sr,Lw).bind(this),onPinching:$t(this,sr,$w).bind(this),onPinchEnd:$t(this,sr,Fw).bind(this),signal:this._uiManager._signal}))),(b=this._uiManager._editorUndoBar)==null||b.hide(),e}pointerdown(e){const{isMac:c}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&c){e.preventDefault();return}if(At(this,Hp,!0),this._isDraggable){$t(this,sr,Bw).call(this,e);return}$t(this,sr,sE).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){ut(this,wl)&&clearTimeout(ut(this,wl)),At(this,wl,setTimeout(()=>{var e;At(this,wl,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,c,d){e.changeParent(this),this.x=c,this.y=d,this.fixAndSetPosition(),this._onTranslated()}getRect(e,c,d=this.rotation){const h=this.parentScale,[g,b]=this.pageDimensions,[_e,et]=this.pageTranslation,rt=e/h,st=c/h,$=this.x*g,_=this.y*b,nt=this.width*g,it=this.height*b;switch(d){case 0:return[$+rt+_e,b-_-st-it+et,$+rt+nt+_e,b-_-st+et];case 90:return[$+st+_e,b-_+rt+et,$+st+it+_e,b-_+rt+nt+et];case 180:return[$-rt-nt+_e,b-_+st+et,$-rt+_e,b-_+st+it+et];case 270:return[$-st-it+_e,b-_-rt-nt+et,$-st+_e,b-_-rt+et];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,c){const[d,h,g,b]=e,_e=g-d,et=b-h;switch(this.rotation){case 0:return[d,c-b,_e,et];case 90:return[d,c-h,et,_e];case 180:return[g,c-h,_e,et];case 270:return[g,c-b,et,_e];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),At(this,Gp,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),At(this,Gp,!1),!0):!1}isInEditMode(){return ut(this,Gp)}shouldGetKeyboardEvents(){return ut(this,Ql)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:c,bottom:d,right:h}=this.getClientDimensions(),{innerHeight:g,innerWidth:b}=window;return c<b&&h>0&&e<g&&d>0}rebuild(){$t(this,sr,iE).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,c=null){unreachable("An editor must be serializable")}static async deserialize(e,c,d){const h=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:d});h.rotation=e.rotation,At(h,Up,e.accessibilityData),h._isCopy=e.isCopy||!1;const[g,b]=h.pageDimensions,[_e,et,rt,st]=h.getRectInCurrentCoords(e.rect,b);return h.x=_e/g,h.y=et/b,h.width=rt/g,h.height=st/b,h}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,c;if((e=ut(this,Gu))==null||e.abort(),At(this,Gu,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),ut(this,wl)&&(clearTimeout(ut(this,wl)),At(this,wl,null)),$t(this,sr,cy).call(this),this.removeEditToolbar(),ut(this,yo)){for(const d of ut(this,yo).values())clearTimeout(d);At(this,yo,null)}this.parent=null,(c=ut(this,Wp))==null||c.destroy(),At(this,Wp,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&($t(this,sr,Dw).call(this),ut(this,xs).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),At(this,Zl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=ut(this,xs).children;if(!ut(this,Do)){At(this,Do,Array.from(c));const b=$t(this,sr,Uw).bind(this),_e=$t(this,sr,zw).bind(this),et=this._uiManager._signal;for(const rt of ut(this,Do)){const st=rt.getAttribute("data-resizer-name");rt.setAttribute("role","spinbutton"),rt.addEventListener("keydown",b,{signal:et}),rt.addEventListener("blur",_e,{signal:et}),rt.addEventListener("focus",$t(this,sr,Vw).bind(this,st),{signal:et}),rt.setAttribute("data-l10n-id",fr._l10nResizer[st])}}const d=ut(this,Do)[0];let h=0;for(const b of c){if(b===d)break;h++}const g=(360-this.rotation+this.parentRotation)%360/90*(ut(this,Do).length/4);if(g!==h){if(g<h)for(let _e=0;_e<h-g;_e++)ut(this,xs).append(ut(this,xs).firstChild);else if(g>h)for(let _e=0;_e<g-h;_e++)ut(this,xs).firstChild.before(ut(this,xs).lastChild);let b=0;for(const _e of c){const rt=ut(this,Do)[b++].getAttribute("data-resizer-name");_e.setAttribute("data-l10n-id",fr._l10nResizer[rt])}}$t(this,sr,oE).call(this,0),At(this,Ql,!0),ut(this,xs).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,c){ut(this,Ql)&&$t(this,sr,rE).call(this,ut(this,Gy),{deltaX:e,deltaY:c,fromKeyboard:!0})}_stopResizingWithKeyboard(){$t(this,sr,cy).call(this),this.div.focus()}select(){var e,c,d;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var h,g;(h=this.div)!=null&&h.classList.contains("selectedEditor")&&((g=this._editToolbar)==null||g.show())});return}(c=this._editToolbar)==null||c.show(),(d=ut(this,Mr))==null||d.toggleAltTextBadge(!1)}}unselect(){var e,c,d,h,g;this.isSelected&&(this.isSelected=!1,(e=ut(this,xs))==null||e.classList.add("hidden"),(c=this.div)==null||c.classList.remove("selectedEditor"),(d=this.div)!=null&&d.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(h=this._editToolbar)==null||h.hide(),(g=ut(this,Mr))==null||g.toggleAltTextBadge(!0))}updateParams(e,c){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return ut(this,Wy)}set isEditing(e){At(this,Wy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,c){At(this,zp,!0);const d=e/c,{style:h}=this.div;h.aspectRatio=d,h.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,c=!1){if(c){ut(this,yo)||At(this,yo,new Map);const{action:d}=e;let h=ut(this,yo).get(d);h&&clearTimeout(h),h=setTimeout(()=>{this._reportTelemetry(e),ut(this,yo).delete(d),ut(this,yo).size===0&&At(this,yo,null)},fr._telemetryTimeout),ut(this,yo).set(d,h);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),At(this,ux,!1)}disable(){this.div&&(this.div.tabIndex=-1),At(this,ux,!0)}renderAnnotationElement(e){let c=e.container.querySelector(".annotationContent");if(!c)c=document.createElement("div"),c.classList.add("annotationContent",this.editorType),e.container.prepend(c);else if(c.nodeName==="CANVAS"){const d=c;c=document.createElement("div"),c.classList.add("annotationContent",this.editorType),d.before(c)}return c}resetAnnotationElement(e){const{firstChild:c}=e.container;(c==null?void 0:c.nodeName)==="DIV"&&c.classList.contains("annotationContent")&&c.remove()}};Up=new WeakMap,Do=new WeakMap,Mr=new WeakMap,ux=new WeakMap,Hu=new WeakMap,Hy=new WeakMap,zp=new WeakMap,xs=new WeakMap,Vp=new WeakMap,Zl=new WeakMap,Gu=new WeakMap,Gy=new WeakMap,Hp=new WeakMap,Zs=new WeakMap,Wy=new WeakMap,Gp=new WeakMap,Ql=new WeakMap,wl=new WeakMap,dx=new WeakMap,hx=new WeakMap,yo=new WeakMap,Wp=new WeakMap,qy=new WeakMap,N0=new WeakMap,sr=new WeakSet,eE=function([e,c],d,h){[d,h]=this.screenToPageTranslation(d,h),this.x+=d/e,this.y+=h/c,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ky=new WeakSet,tE=function(e,c,d){switch(d){case 90:return[c,-e];case 180:return[-e,-c];case 270:return[-c,e];default:return[e,c]}},r0=function(e){switch(e){case 90:{const[c,d]=this.pageDimensions;return[0,-c/d,d/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,d]=this.pageDimensions;return[0,c/d,-d/c,0]}default:return[1,0,0,1]}},Dw=function(){if(ut(this,xs))return;At(this,xs,document.createElement("div")),ut(this,xs).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],c=this._uiManager._signal;for(const d of e){const h=document.createElement("div");ut(this,xs).append(h),h.classList.add("resizer",d),h.setAttribute("data-resizer-name",d),h.addEventListener("pointerdown",$t(this,sr,Mw).bind(this,d),{signal:c}),h.addEventListener("contextmenu",noContextMenu,{signal:c}),h.tabIndex=-1}this.div.prepend(ut(this,xs))},Mw=function(e,c){var st;c.preventDefault();const{isMac:d}=util_FeatureTest.platform;if(c.button!==0||c.ctrlKey&&d)return;(st=ut(this,Mr))==null||st.toggle(!1);const h=this._isDraggable;this._isDraggable=!1,At(this,Vp,[c.screenX,c.screenY]);const g=new AbortController,b=this._uiManager.combinedSignal(g);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",$t(this,sr,rE).bind(this,e),{passive:!0,capture:!0,signal:b}),window.addEventListener("touchmove",stopEvent,{passive:!1,signal:b}),window.addEventListener("contextmenu",noContextMenu,{signal:b}),At(this,Zl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const _e=this.parent.div.style.cursor,et=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const rt=()=>{var $;g.abort(),this.parent.togglePointerEvents(!0),($=ut(this,Mr))==null||$.toggle(!0),this._isDraggable=h,this.parent.div.style.cursor=_e,this.div.style.cursor=et,$t(this,sr,s0).call(this)};window.addEventListener("pointerup",rt,{signal:b}),window.addEventListener("blur",rt,{signal:b})},nE=function(e,c,d,h){this.width=d,this.height=h,this.x=e,this.y=c;const[g,b]=this.parentDimensions;this.setDims(g*d,b*h),this.fixAndSetPosition(),this._onResized()},s0=function(){if(!ut(this,Zl))return;const{savedX:e,savedY:c,savedWidth:d,savedHeight:h}=ut(this,Zl);At(this,Zl,null);const g=this.x,b=this.y,_e=this.width,et=this.height;g===e&&b===c&&_e===d&&et===h||this.addCommands({cmd:$t(this,sr,nE).bind(this,g,b,_e,et),undo:$t(this,sr,nE).bind(this,e,c,d,h),mustExec:!0})},rE=function(e,c){const[d,h]=this.parentDimensions,g=this.x,b=this.y,_e=this.width,et=this.height,rt=fr.MIN_SIZE/d,st=fr.MIN_SIZE/h,$=$t(this,sr,r0).call(this,this.rotation),_=(Tt,It)=>[$[0]*Tt+$[2]*It,$[1]*Tt+$[3]*It],nt=$t(this,sr,r0).call(this,360-this.rotation),it=(Tt,It)=>[nt[0]*Tt+nt[2]*It,nt[1]*Tt+nt[3]*It];let ot,lt,at=!1,ct=!1;switch(e){case"topLeft":at=!0,ot=(Tt,It)=>[0,0],lt=(Tt,It)=>[Tt,It];break;case"topMiddle":ot=(Tt,It)=>[Tt/2,0],lt=(Tt,It)=>[Tt/2,It];break;case"topRight":at=!0,ot=(Tt,It)=>[Tt,0],lt=(Tt,It)=>[0,It];break;case"middleRight":ct=!0,ot=(Tt,It)=>[Tt,It/2],lt=(Tt,It)=>[0,It/2];break;case"bottomRight":at=!0,ot=(Tt,It)=>[Tt,It],lt=(Tt,It)=>[0,0];break;case"bottomMiddle":ot=(Tt,It)=>[Tt/2,It],lt=(Tt,It)=>[Tt/2,0];break;case"bottomLeft":at=!0,ot=(Tt,It)=>[0,It],lt=(Tt,It)=>[Tt,0];break;case"middleLeft":ct=!0,ot=(Tt,It)=>[0,It/2],lt=(Tt,It)=>[Tt,It/2];break}const dt=ot(_e,et),ht=lt(_e,et);let pt=_(...ht);const ft=fr._round(g+pt[0]),mt=fr._round(b+pt[1]);let xt=1,gt=1,Et,St;if(c.fromKeyboard)({deltaX:Et,deltaY:St}=c);else{const{screenX:Tt,screenY:It}=c,[Vt,Bt]=ut(this,Vp);[Et,St]=this.screenToPageTranslation(Tt-Vt,It-Bt),ut(this,Vp)[0]=Tt,ut(this,Vp)[1]=It}if([Et,St]=it(Et/d,St/h),at){const Tt=Math.hypot(_e,et);xt=gt=Math.max(Math.min(Math.hypot(ht[0]-dt[0]-Et,ht[1]-dt[1]-St)/Tt,1/_e,1/et),rt/_e,st/et)}else ct?xt=MathClamp(Math.abs(ht[0]-dt[0]-Et),rt,1)/_e:gt=MathClamp(Math.abs(ht[1]-dt[1]-St),st,1)/et;const Pt=fr._round(_e*xt),Mt=fr._round(et*gt);pt=_(...lt(Pt,Mt));const Rt=ft-pt[0],Dt=mt-pt[1];ut(this,Zs)||At(this,Zs,[this.x,this.y,this.width,this.height]),this.width=Pt,this.height=Mt,this.x=Rt,this.y=Dt,this.setDims(d*Pt,h*Mt),this.fixAndSetPosition(),this._onResizing()},Lw=function(){var e;At(this,Zl,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=ut(this,Mr))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},$w=function(e,c,d){let g=.7*(d/c)+1-.7;if(g===1)return;const b=$t(this,sr,r0).call(this,this.rotation),_e=(ft,mt)=>[b[0]*ft+b[2]*mt,b[1]*ft+b[3]*mt],[et,rt]=this.parentDimensions,st=this.x,$=this.y,_=this.width,nt=this.height,it=fr.MIN_SIZE/et,ot=fr.MIN_SIZE/rt;g=Math.max(Math.min(g,1/_,1/nt),it/_,ot/nt);const lt=fr._round(_*g),at=fr._round(nt*g);if(lt===_&&at===nt)return;ut(this,Zs)||At(this,Zs,[st,$,_,nt]);const ct=_e(_/2,nt/2),dt=fr._round(st+ct[0]),ht=fr._round($+ct[1]),pt=_e(lt/2,at/2);this.x=dt-pt[0],this.y=ht-pt[1],this.width=lt,this.height=at,this.setDims(et*lt,rt*at),this.fixAndSetPosition(),this._onResizing()},Fw=function(){var e;(e=ut(this,Mr))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),$t(this,sr,s0).call(this)},sE=function(e){const{isMac:c}=util_FeatureTest.platform;e.ctrlKey&&!c||e.shiftKey||e.metaKey&&c?this.parent.toggleSelected(this):this.parent.setSelected(this)},Bw=function(e){const{isSelected:c}=this;this._uiManager.setUpDragSession();let d=!1;const h=new AbortController,g=this._uiManager.combinedSignal(h),b={capture:!0,passive:!1,signal:g},_e=rt=>{h.abort(),At(this,Hu,null),At(this,Hp,!1),this._uiManager.endDragSession()||$t(this,sr,sE).call(this,rt),d&&this._onStopDragging()};c&&(At(this,dx,e.clientX),At(this,hx,e.clientY),At(this,Hu,e.pointerId),At(this,Hy,e.pointerType),window.addEventListener("pointermove",rt=>{d||(d=!0,this._onStartDragging());const{clientX:st,clientY:$,pointerId:_}=rt;if(_!==ut(this,Hu)){stopEvent(rt);return}const[nt,it]=this.screenToPageTranslation(st-ut(this,dx),$-ut(this,hx));At(this,dx,st),At(this,hx,$),this._uiManager.dragSelectedEditors(nt,it)},b),window.addEventListener("touchmove",stopEvent,b),window.addEventListener("pointerdown",rt=>{rt.pointerType===ut(this,Hy)&&(ut(this,Wp)||rt.isPrimary)&&_e(rt),stopEvent(rt)},b));const et=rt=>{if(!ut(this,Hu)||ut(this,Hu)===rt.pointerId){_e(rt);return}stopEvent(rt)};window.addEventListener("pointerup",et,{signal:g}),window.addEventListener("blur",et,{signal:g})},iE=function(){if(ut(this,Gu)||!this.div)return;At(this,Gu,new AbortController);const e=this._uiManager.combinedSignal(ut(this,Gu));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Uw=function(e){fr._resizerKeyboardManager.exec(this,e)},zw=function(e){var c;ut(this,Ql)&&((c=e.relatedTarget)==null?void 0:c.parentNode)!==ut(this,xs)&&$t(this,sr,cy).call(this)},Vw=function(e){At(this,Gy,ut(this,Ql)?e:"")},oE=function(e){if(ut(this,Do))for(const c of ut(this,Do))c.tabIndex=e},cy=function(){At(this,Ql,!1),$t(this,sr,oE).call(this,-1),$t(this,sr,s0).call(this)},Lt(fr,Ky),Dn(fr,"_l10n",null),Dn(fr,"_l10nResizer",null),Dn(fr,"_borderLineWidth",-1),Dn(fr,"_colorManager",new ColorManager),Dn(fr,"_zIndex",1),Dn(fr,"_telemetryTimeout",1e3);let AnnotationEditor=fr;class FakeEditor extends AnnotationEditor{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const SEED=3285377520,MASK_HIGH=4294901760,MASK_LOW=65535;class MurmurHash3_64{constructor(e){this.h1=e?e&4294967295:SEED,this.h2=e?e&4294967295:SEED}update(e){let c,d;if(typeof e=="string"){c=new Uint8Array(e.length*2),d=0;for(let ot=0,lt=e.length;ot<lt;ot++){const at=e.charCodeAt(ot);at<=255?c[d++]=at:(c[d++]=at>>>8,c[d++]=at&255)}}else if(ArrayBuffer.isView(e))c=e.slice(),d=c.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const h=d>>2,g=d-h*4,b=new Uint32Array(c.buffer,0,h);let _e=0,et=0,rt=this.h1,st=this.h2;const $=3432918353,_=461845907,nt=$&MASK_LOW,it=_&MASK_LOW;for(let ot=0;ot<h;ot++)ot&1?(_e=b[ot],_e=_e*$&MASK_HIGH|_e*nt&MASK_LOW,_e=_e<<15|_e>>>17,_e=_e*_&MASK_HIGH|_e*it&MASK_LOW,rt^=_e,rt=rt<<13|rt>>>19,rt=rt*5+3864292196):(et=b[ot],et=et*$&MASK_HIGH|et*nt&MASK_LOW,et=et<<15|et>>>17,et=et*_&MASK_HIGH|et*it&MASK_LOW,st^=et,st=st<<13|st>>>19,st=st*5+3864292196);switch(_e=0,g){case 3:_e^=c[h*4+2]<<16;case 2:_e^=c[h*4+1]<<8;case 1:_e^=c[h*4],_e=_e*$&MASK_HIGH|_e*nt&MASK_LOW,_e=_e<<15|_e>>>17,_e=_e*_&MASK_HIGH|_e*it&MASK_LOW,h&1?rt^=_e:st^=_e}this.h1=rt,this.h2=st}hexdigest(){let e=this.h1,c=this.h2;return e^=c>>>1,e=e*3981806797&MASK_HIGH|e*36045&MASK_LOW,c=c*4283543511&MASK_HIGH|((c<<16|e>>>16)*2950163797&MASK_HIGH)>>>16,e^=c>>>1,e=e*444984403&MASK_HIGH|e*60499&MASK_LOW,c=c*3301882366&MASK_HIGH|((c<<16|e>>>16)*3120437893&MASK_HIGH)>>>16,e^=c>>>1,(e>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}const SerializableEmpty=Object.freeze({map:null,hash:"",transfer:void 0});var qp,Kp,ys,I0,Hw;class AnnotationStorage{constructor(){Lt(this,I0);Lt(this,qp,!1);Lt(this,Kp,null);Lt(this,ys,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,c){const d=ut(this,ys).get(e);return d===void 0?c:Object.assign(c,d)}getRawValue(e){return ut(this,ys).get(e)}remove(e){if(ut(this,ys).delete(e),ut(this,ys).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const c of ut(this,ys).values())if(c instanceof AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,c){const d=ut(this,ys).get(e);let h=!1;if(d!==void 0)for(const[g,b]of Object.entries(c))d[g]!==b&&(h=!0,d[g]=b);else h=!0,ut(this,ys).set(e,c);h&&$t(this,I0,Hw).call(this),c instanceof AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(c.constructor._type)}has(e){return ut(this,ys).has(e)}get size(){return ut(this,ys).size}resetModified(){ut(this,qp)&&(At(this,qp,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(ut(this,ys).size===0)return SerializableEmpty;const e=new Map,c=new MurmurHash3_64,d=[],h=Object.create(null);let g=!1;for(const[b,_e]of ut(this,ys)){const et=_e instanceof AnnotationEditor?_e.serialize(!1,h):_e;et&&(e.set(b,et),c.update(`${b}:${JSON.stringify(et)}`),g||(g=!!et.bitmap))}if(g)for(const b of e.values())b.bitmap&&d.push(b.bitmap);return e.size>0?{map:e,hash:c.hexdigest(),transfer:d}:SerializableEmpty}get editorStats(){let e=null;const c=new Map;for(const d of ut(this,ys).values()){if(!(d instanceof AnnotationEditor))continue;const h=d.telemetryFinalData;if(!h)continue;const{type:g}=h;c.has(g)||c.set(g,Object.getPrototypeOf(d).constructor),e||(e=Object.create(null));const b=e[g]||(e[g]=new Map);for(const[_e,et]of Object.entries(h)){if(_e==="type")continue;let rt=b.get(_e);rt||(rt=new Map,b.set(_e,rt));const st=rt.get(et)??0;rt.set(et,st+1)}}for(const[d,h]of c)e[d]=h.computeTelemetryFinalData(e[d]);return e}resetModifiedIds(){At(this,Kp,null)}get modifiedIds(){if(ut(this,Kp))return ut(this,Kp);const e=[];for(const c of ut(this,ys).values())!(c instanceof AnnotationEditor)||!c.annotationElementId||!c.serialize()||e.push(c.annotationElementId);return At(this,Kp,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return ut(this,ys).entries()}}qp=new WeakMap,Kp=new WeakMap,ys=new WeakMap,I0=new WeakSet,Hw=function(){ut(this,qp)||(At(this,qp,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Xy;class PrintAnnotationStorage extends AnnotationStorage{constructor(c){super();Lt(this,Xy);const{map:d,hash:h,transfer:g}=c.serializable,b=structuredClone(d,g?{transfer:g}:null);At(this,Xy,{map:b,hash:h,transfer:g})}get print(){unreachable("Should not call PrintAnnotationStorage.print")}get serializable(){return ut(this,Xy)}get modifiedIds(){return shadow(this,"modifiedIds",{ids:new Set,hash:""})}}Xy=new WeakMap;var px;class FontLoader{constructor({ownerDocument:e=globalThis.document,styleElement:c=null}){Lt(this,px,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const c=this.styleElement.sheet;c.insertRule(e,c.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),ut(this,px).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:c,_inspectFont:d}){if(!(!e||ut(this,px).has(e.loadedName))){if(assert(!c,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:h,src:g,style:b}=e,_e=new FontFace(h,g,b);this.addNativeFontFace(_e);try{await _e.load(),ut(this,px).add(h),d==null||d(e)}catch{warn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(_e)}return}unreachable("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const d=e.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(h){throw warn(`Failed to load font '${d.family}': '${h}'.`),e.disableFontFace=!0,h}}return}const c=e.createFontFaceRule();if(c){if(this.insertRule(c),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const h=this._queueLoadingCallback(d);this._prepareFontLoadEvent(e,h)})}}get isFontLoadingAPISupported(){var c;const e=!!((c=this._document)!=null&&c.fonts);return shadow(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return shadow(this,"isSyncFontLoadingSupported",isNodeJS||util_FeatureTest.platform.isFirefox)}_queueLoadingCallback(e){function c(){for(assert(!h.done,"completeRequest() cannot be called twice."),h.done=!0;d.length>0&&d[0].done;){const g=d.shift();setTimeout(g.callback,0)}}const{loadingRequests:d}=this,h={done:!1,complete:c,callback:e};return d.push(h),h}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return shadow(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,c){function d(ht,pt){return ht.charCodeAt(pt)<<24|ht.charCodeAt(pt+1)<<16|ht.charCodeAt(pt+2)<<8|ht.charCodeAt(pt+3)&255}function h(ht,pt,ft,mt){const xt=ht.substring(0,pt),gt=ht.substring(pt+ft);return xt+mt+gt}let g,b;const _e=this._document.createElement("canvas");_e.width=1,_e.height=1;const et=_e.getContext("2d");let rt=0;function st(ht,pt){if(++rt>30){warn("Load test font never loaded."),pt();return}if(et.font="30px "+ht,et.fillText(".",0,20),et.getImageData(0,0,1,1).data[3]>0){pt();return}setTimeout(st.bind(null,ht,pt))}const $=`lt${Date.now()}${this.loadTestFontId++}`;let _=this._loadTestFont;_=h(_,976,$.length,$);const it=16,ot=1482184792;let lt=d(_,it);for(g=0,b=$.length-3;g<b;g+=4)lt=lt-ot+d($,g)|0;g<$.length&&(lt=lt-ot+d($+"XXX",g)|0),_=h(_,it,4,string32(lt));const at=`url(data:font/opentype;base64,${btoa(_)});`,ct=`@font-face {font-family:"${$}";src:${at}}`;this.insertRule(ct);const dt=this._document.createElement("div");dt.style.visibility="hidden",dt.style.width=dt.style.height="10px",dt.style.position="absolute",dt.style.top=dt.style.left="0px";for(const ht of[e.loadedName,$]){const pt=this._document.createElement("span");pt.textContent="Hi",pt.style.fontFamily=ht,dt.append(pt)}this._document.body.append(dt),st($,()=>{dt.remove(),c.complete()})}}px=new WeakMap;class FontFaceObject{constructor(e,c=null){this.compiledGlyphs=Object.create(null);for(const d in e)this[d]=e[d];this._inspectFont=c}createNativeFontFace(){var c;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(c=this._inspectFont)==null||c.call(this,this),e}createFontFaceRule(){var d;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let h=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(h+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${h}src:${e}}`}return(d=this._inspectFont)==null||d.call(this,this,e),c}getPathGenerator(e,c){if(this.compiledGlyphs[c]!==void 0)return this.compiledGlyphs[c];const d=this.loadedName+"_path_"+c;let h;try{h=e.get(d)}catch(b){warn(`getPathGenerator - ignoring character: "${b}".`)}const g=new Path2D(h||"");return this.fontExtraProperties||e.delete(d),this.compiledGlyphs[c]=g}}function getUrlProp(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(isNodeJS)return a;const e=URL.parse(a,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(a){if(isNodeJS&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return stringToBytes(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a==null?void 0:a.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function getFactoryUrlProp(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const isRefProxy=a=>typeof a=="object"&&Number.isInteger(a==null?void 0:a.num)&&a.num>=0&&Number.isInteger(a==null?void 0:a.gen)&&a.gen>=0,isNameProxy=a=>typeof a=="object"&&typeof(a==null?void 0:a.name)=="string",isValidExplicitDest=_isValidExplicitDest.bind(null,isRefProxy,isNameProxy);var Jl,O0;class LoopbackPort{constructor(){Lt(this,Jl,new Map);Lt(this,O0,Promise.resolve())}postMessage(e,c){const d={data:structuredClone(e,c?{transfer:c}:null)};ut(this,O0).then(()=>{for(const[h]of ut(this,Jl))h.call(this,d)})}addEventListener(e,c,d=null){let h=null;if((d==null?void 0:d.signal)instanceof AbortSignal){const{signal:g}=d;if(g.aborted){warn("LoopbackPort - cannot use an `aborted` signal.");return}const b=()=>this.removeEventListener(e,c);h=()=>g.removeEventListener("abort",b),g.addEventListener("abort",b)}ut(this,Jl).set(c,h)}removeEventListener(e,c){const d=ut(this,Jl).get(c);d==null||d(),ut(this,Jl).delete(c)}terminate(){for(const[,e]of ut(this,Jl))e==null||e();ut(this,Jl).clear()}}Jl=new WeakMap,O0=new WeakMap;const CallbackKind={DATA:1,ERROR:2},StreamKind={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function onFn(){}function wrapReason(a){if(a instanceof AbortException||a instanceof InvalidPDFException||a instanceof PasswordException||a instanceof ResponseException||a instanceof UnknownErrorException)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||unreachable('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new AbortException(a.message);case"InvalidPDFException":return new InvalidPDFException(a.message);case"PasswordException":return new PasswordException(a.message,a.code);case"ResponseException":return new ResponseException(a.message,a.status,a.missing);case"UnknownErrorException":return new UnknownErrorException(a.message,a.details)}return new UnknownErrorException(a.message,a.toString())}var fx,To,Gw,Ww,qw,i0;class MessageHandler{constructor(e,c,d){Lt(this,To);Lt(this,fx,new AbortController);this.sourceName=e,this.targetName=c,this.comObj=d,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),d.addEventListener("message",$t(this,To,Gw).bind(this),{signal:ut(this,fx).signal})}on(e,c){const d=this.actionHandler;if(d[e])throw new Error(`There is already an actionName called "${e}"`);d[e]=c}send(e,c,d){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:c},d)}sendWithPromise(e,c,d){const h=this.callbackId++,g=Promise.withResolvers();this.callbackCapabilities[h]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:h,data:c},d)}catch(b){g.reject(b)}return g.promise}sendWithStream(e,c,d,h){const g=this.streamId++,b=this.sourceName,_e=this.targetName,et=this.comObj;return new ReadableStream({start:rt=>{const st=Promise.withResolvers();return this.streamControllers[g]={controller:rt,startCall:st,pullCall:null,cancelCall:null,isClosed:!1},et.postMessage({sourceName:b,targetName:_e,action:e,streamId:g,data:c,desiredSize:rt.desiredSize},h),st.promise},pull:rt=>{const st=Promise.withResolvers();return this.streamControllers[g].pullCall=st,et.postMessage({sourceName:b,targetName:_e,stream:StreamKind.PULL,streamId:g,desiredSize:rt.desiredSize}),st.promise},cancel:rt=>{assert(rt instanceof Error,"cancel must have a valid reason");const st=Promise.withResolvers();return this.streamControllers[g].cancelCall=st,this.streamControllers[g].isClosed=!0,et.postMessage({sourceName:b,targetName:_e,stream:StreamKind.CANCEL,streamId:g,reason:wrapReason(rt)}),st.promise}},d)}destroy(){var e;(e=ut(this,fx))==null||e.abort(),At(this,fx,null)}}fx=new WeakMap,To=new WeakSet,Gw=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){$t(this,To,qw).call(this,e);return}if(e.callback){const d=e.callbackId,h=this.callbackCapabilities[d];if(!h)throw new Error(`Cannot resolve callback ${d}`);if(delete this.callbackCapabilities[d],e.callback===CallbackKind.DATA)h.resolve(e.data);else if(e.callback===CallbackKind.ERROR)h.reject(wrapReason(e.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[e.action];if(!c)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const d=this.sourceName,h=e.sourceName,g=this.comObj;Promise.try(c,e.data).then(function(b){g.postMessage({sourceName:d,targetName:h,callback:CallbackKind.DATA,callbackId:e.callbackId,data:b})},function(b){g.postMessage({sourceName:d,targetName:h,callback:CallbackKind.ERROR,callbackId:e.callbackId,reason:wrapReason(b)})});return}if(e.streamId){$t(this,To,Ww).call(this,e);return}c(e.data)},Ww=function(e){const c=e.streamId,d=this.sourceName,h=e.sourceName,g=this.comObj,b=this,_e=this.actionHandler[e.action],et={enqueue(rt,st=1,$){if(this.isCancelled)return;const _=this.desiredSize;this.desiredSize-=st,_>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),g.postMessage({sourceName:d,targetName:h,stream:StreamKind.ENQUEUE,streamId:c,chunk:rt},$)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:d,targetName:h,stream:StreamKind.CLOSE,streamId:c}),delete b.streamSinks[c])},error(rt){assert(rt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:d,targetName:h,stream:StreamKind.ERROR,streamId:c,reason:wrapReason(rt)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};et.sinkCapability.resolve(),et.ready=et.sinkCapability.promise,this.streamSinks[c]=et,Promise.try(_e,e.data,et).then(function(){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.START_COMPLETE,streamId:c,success:!0})},function(rt){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.START_COMPLETE,streamId:c,reason:wrapReason(rt)})})},qw=function(e){const c=e.streamId,d=this.sourceName,h=e.sourceName,g=this.comObj,b=this.streamControllers[c],_e=this.streamSinks[c];switch(e.stream){case StreamKind.START_COMPLETE:e.success?b.startCall.resolve():b.startCall.reject(wrapReason(e.reason));break;case StreamKind.PULL_COMPLETE:e.success?b.pullCall.resolve():b.pullCall.reject(wrapReason(e.reason));break;case StreamKind.PULL:if(!_e){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.PULL_COMPLETE,streamId:c,success:!0});break}_e.desiredSize<=0&&e.desiredSize>0&&_e.sinkCapability.resolve(),_e.desiredSize=e.desiredSize,Promise.try(_e.onPull||onFn).then(function(){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.PULL_COMPLETE,streamId:c,success:!0})},function(rt){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.PULL_COMPLETE,streamId:c,reason:wrapReason(rt)})});break;case StreamKind.ENQUEUE:if(assert(b,"enqueue should have stream controller"),b.isClosed)break;b.controller.enqueue(e.chunk);break;case StreamKind.CLOSE:if(assert(b,"close should have stream controller"),b.isClosed)break;b.isClosed=!0,b.controller.close(),$t(this,To,i0).call(this,b,c);break;case StreamKind.ERROR:assert(b,"error should have stream controller"),b.controller.error(wrapReason(e.reason)),$t(this,To,i0).call(this,b,c);break;case StreamKind.CANCEL_COMPLETE:e.success?b.cancelCall.resolve():b.cancelCall.reject(wrapReason(e.reason)),$t(this,To,i0).call(this,b,c);break;case StreamKind.CANCEL:if(!_e)break;const et=wrapReason(e.reason);Promise.try(_e.onCancel||onFn,et).then(function(){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.CANCEL_COMPLETE,streamId:c,success:!0})},function(rt){g.postMessage({sourceName:d,targetName:h,stream:StreamKind.CANCEL_COMPLETE,streamId:c,reason:wrapReason(rt)})}),_e.sinkCapability.reject(et),_e.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}},i0=async function(e,c){var d,h,g;await Promise.allSettled([(d=e.startCall)==null?void 0:d.promise,(h=e.pullCall)==null?void 0:h.promise,(g=e.cancelCall)==null?void 0:g.promise]),delete this.streamControllers[c]};var Yy;class BaseCanvasFactory{constructor({enableHWA:e=!1}){Lt(this,Yy,!1);At(this,Yy,e)}create(e,c){if(e<=0||c<=0)throw new Error("Invalid canvas size");const d=this._createCanvas(e,c);return{canvas:d,context:d.getContext("2d",{willReadFrequently:!ut(this,Yy)})}}reset(e,c,d){if(!e.canvas)throw new Error("Canvas is not specified");if(c<=0||d<=0)throw new Error("Invalid canvas size");e.canvas.width=c,e.canvas.height=d}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,c){unreachable("Abstract method `_createCanvas` called.")}}Yy=new WeakMap;class DOMCanvasFactory extends BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document,enableHWA:c=!1}){super({enableHWA:c}),this._document=e}_createCanvas(e,c){const d=this._document.createElement("canvas");return d.width=e,d.height=c,d}}class BaseCMapReaderFactory{constructor({baseUrl:e=null,isCompressed:c=!0}){this.baseUrl=e,this.isCompressed=c}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const c=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(c).then(d=>({cMapData:d,isCompressed:this.isCompressed})).catch(d=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${c}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){const c=await fetchData(e,this.isCompressed?"arraybuffer":"text");return c instanceof ArrayBuffer?new Uint8Array(c):stringToBytes(c)}}class BaseFilterFactory{addFilter(e){return"none"}addHCMFilter(e,c){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,c,d,h,g){return"none"}destroy(e=!1){}}var Xp,mx,_c,eu,Rs,Yp,Zp,Kn,Ts,uy,Lm,o0,$m,Kw,aE,Fm,dy,hy,lE,py;class DOMFilterFactory extends BaseFilterFactory{constructor({docId:c,ownerDocument:d=globalThis.document}){super();Lt(this,Kn);Lt(this,Xp);Lt(this,mx);Lt(this,_c);Lt(this,eu);Lt(this,Rs);Lt(this,Yp);Lt(this,Zp,0);At(this,eu,c),At(this,Rs,d)}addFilter(c){if(!c)return"none";let d=ut(this,Kn,Ts).get(c);if(d)return d;const[h,g,b]=$t(this,Kn,o0).call(this,c),_e=c.length===1?h:`${h}${g}${b}`;if(d=ut(this,Kn,Ts).get(_e),d)return ut(this,Kn,Ts).set(c,d),d;const et=`g_${ut(this,eu)}_transfer_map_${as(this,Zp)._++}`,rt=$t(this,Kn,$m).call(this,et);ut(this,Kn,Ts).set(c,rt),ut(this,Kn,Ts).set(_e,rt);const st=$t(this,Kn,Fm).call(this,et);return $t(this,Kn,hy).call(this,h,g,b,st),rt}addHCMFilter(c,d){var it;const h=`${c}-${d}`,g="base";let b=ut(this,Kn,uy).get(g);if((b==null?void 0:b.key)===h||(b?((it=b.filter)==null||it.remove(),b.key=h,b.url="none",b.filter=null):(b={key:h,url:"none",filter:null},ut(this,Kn,uy).set(g,b)),!c||!d))return b.url;const _e=$t(this,Kn,py).call(this,c);c=Util.makeHexColor(..._e);const et=$t(this,Kn,py).call(this,d);if(d=Util.makeHexColor(...et),ut(this,Kn,Lm).style.color="",c==="#000000"&&d==="#ffffff"||c===d)return b.url;const rt=new Array(256);for(let ot=0;ot<=255;ot++){const lt=ot/255;rt[ot]=lt<=.03928?lt/12.92:((lt+.055)/1.055)**2.4}const st=rt.join(","),$=`g_${ut(this,eu)}_hcm_filter`,_=b.filter=$t(this,Kn,Fm).call(this,$);$t(this,Kn,hy).call(this,st,st,st,_),$t(this,Kn,aE).call(this,_);const nt=(ot,lt)=>{const at=_e[ot]/255,ct=et[ot]/255,dt=new Array(lt+1);for(let ht=0;ht<=lt;ht++)dt[ht]=at+ht/lt*(ct-at);return dt.join(",")};return $t(this,Kn,hy).call(this,nt(0,5),nt(1,5),nt(2,5),_),b.url=$t(this,Kn,$m).call(this,$),b.url}addAlphaFilter(c){let d=ut(this,Kn,Ts).get(c);if(d)return d;const[h]=$t(this,Kn,o0).call(this,[c]),g=`alpha_${h}`;if(d=ut(this,Kn,Ts).get(g),d)return ut(this,Kn,Ts).set(c,d),d;const b=`g_${ut(this,eu)}_alpha_map_${as(this,Zp)._++}`,_e=$t(this,Kn,$m).call(this,b);ut(this,Kn,Ts).set(c,_e),ut(this,Kn,Ts).set(g,_e);const et=$t(this,Kn,Fm).call(this,b);return $t(this,Kn,lE).call(this,h,et),_e}addLuminosityFilter(c){let d=ut(this,Kn,Ts).get(c||"luminosity");if(d)return d;let h,g;if(c?([h]=$t(this,Kn,o0).call(this,[c]),g=`luminosity_${h}`):g="luminosity",d=ut(this,Kn,Ts).get(g),d)return ut(this,Kn,Ts).set(c,d),d;const b=`g_${ut(this,eu)}_luminosity_map_${as(this,Zp)._++}`,_e=$t(this,Kn,$m).call(this,b);ut(this,Kn,Ts).set(c,_e),ut(this,Kn,Ts).set(g,_e);const et=$t(this,Kn,Fm).call(this,b);return $t(this,Kn,Kw).call(this,et),c&&$t(this,Kn,lE).call(this,h,et),_e}addHighlightHCMFilter(c,d,h,g,b){var ct;const _e=`${d}-${h}-${g}-${b}`;let et=ut(this,Kn,uy).get(c);if((et==null?void 0:et.key)===_e||(et?((ct=et.filter)==null||ct.remove(),et.key=_e,et.url="none",et.filter=null):(et={key:_e,url:"none",filter:null},ut(this,Kn,uy).set(c,et)),!d||!h))return et.url;const[rt,st]=[d,h].map($t(this,Kn,py).bind(this));let $=Math.round(.2126*rt[0]+.7152*rt[1]+.0722*rt[2]),_=Math.round(.2126*st[0]+.7152*st[1]+.0722*st[2]),[nt,it]=[g,b].map($t(this,Kn,py).bind(this));_<$&&([$,_,nt,it]=[_,$,it,nt]),ut(this,Kn,Lm).style.color="";const ot=(dt,ht,pt)=>{const ft=new Array(256),mt=(_-$)/pt,xt=dt/255,gt=(ht-dt)/(255*pt);let Et=0;for(let St=0;St<=pt;St++){const Pt=Math.round($+St*mt),Mt=xt+St*gt;for(let Rt=Et;Rt<=Pt;Rt++)ft[Rt]=Mt;Et=Pt+1}for(let St=Et;St<256;St++)ft[St]=ft[Et-1];return ft.join(",")},lt=`g_${ut(this,eu)}_hcm_${c}_filter`,at=et.filter=$t(this,Kn,Fm).call(this,lt);return $t(this,Kn,aE).call(this,at),$t(this,Kn,hy).call(this,ot(nt[0],it[0],5),ot(nt[1],it[1],5),ot(nt[2],it[2],5),at),et.url=$t(this,Kn,$m).call(this,lt),et.url}destroy(c=!1){var d,h,g,b;c&&((d=ut(this,Yp))!=null&&d.size)||((h=ut(this,_c))==null||h.parentNode.parentNode.remove(),At(this,_c,null),(g=ut(this,mx))==null||g.clear(),At(this,mx,null),(b=ut(this,Yp))==null||b.clear(),At(this,Yp,null),At(this,Zp,0))}}Xp=new WeakMap,mx=new WeakMap,_c=new WeakMap,eu=new WeakMap,Rs=new WeakMap,Yp=new WeakMap,Zp=new WeakMap,Kn=new WeakSet,Ts=function(){return ut(this,mx)||At(this,mx,new Map)},uy=function(){return ut(this,Yp)||At(this,Yp,new Map)},Lm=function(){if(!ut(this,_c)){const c=ut(this,Rs).createElement("div"),{style:d}=c;d.visibility="hidden",d.contain="strict",d.width=d.height=0,d.position="absolute",d.top=d.left=0,d.zIndex=-1;const h=ut(this,Rs).createElementNS(SVG_NS,"svg");h.setAttribute("width",0),h.setAttribute("height",0),At(this,_c,ut(this,Rs).createElementNS(SVG_NS,"defs")),c.append(h),h.append(ut(this,_c)),ut(this,Rs).body.append(c)}return ut(this,_c)},o0=function(c){if(c.length===1){const rt=c[0],st=new Array(256);for(let _=0;_<256;_++)st[_]=rt[_]/255;const $=st.join(",");return[$,$,$]}const[d,h,g]=c,b=new Array(256),_e=new Array(256),et=new Array(256);for(let rt=0;rt<256;rt++)b[rt]=d[rt]/255,_e[rt]=h[rt]/255,et[rt]=g[rt]/255;return[b.join(","),_e.join(","),et.join(",")]},$m=function(c){if(ut(this,Xp)===void 0){At(this,Xp,"");const d=ut(this,Rs).URL;d!==ut(this,Rs).baseURI&&(isDataScheme(d)?warn('#createUrl: ignore "data:"-URL for performance reasons.'):At(this,Xp,updateUrlHash(d,"")))}return`url(${ut(this,Xp)}#${c})`},Kw=function(c){const d=ut(this,Rs).createElementNS(SVG_NS,"feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),c.append(d)},aE=function(c){const d=ut(this,Rs).createElementNS(SVG_NS,"feColorMatrix");d.setAttribute("type","matrix"),d.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),c.append(d)},Fm=function(c){const d=ut(this,Rs).createElementNS(SVG_NS,"filter");return d.setAttribute("color-interpolation-filters","sRGB"),d.setAttribute("id",c),ut(this,Kn,Lm).append(d),d},dy=function(c,d,h){const g=ut(this,Rs).createElementNS(SVG_NS,d);g.setAttribute("type","discrete"),g.setAttribute("tableValues",h),c.append(g)},hy=function(c,d,h,g){const b=ut(this,Rs).createElementNS(SVG_NS,"feComponentTransfer");g.append(b),$t(this,Kn,dy).call(this,b,"feFuncR",c),$t(this,Kn,dy).call(this,b,"feFuncG",d),$t(this,Kn,dy).call(this,b,"feFuncB",h)},lE=function(c,d){const h=ut(this,Rs).createElementNS(SVG_NS,"feComponentTransfer");d.append(h),$t(this,Kn,dy).call(this,h,"feFuncA",c)},py=function(c){return ut(this,Kn,Lm).style.color=c,getRGB(getComputedStyle(ut(this,Kn,Lm)).getPropertyValue("color"))};class BaseStandardFontDataFactory{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const c=`${this.baseUrl}${e}`;return this._fetch(c).catch(d=>{throw new Error(`Unable to load font data at: ${c}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){const c=await fetchData(e,"arraybuffer");return new Uint8Array(c)}}class BaseWasmFactory{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const c=`${this.baseUrl}${e}`;return this._fetch(c).catch(d=>{throw new Error(`Unable to load wasm data at: ${c}`)})}async _fetch(e){unreachable("Abstract method `_fetch` called.")}}class DOMWasmFactory extends BaseWasmFactory{async _fetch(e){const c=await fetchData(e,"arraybuffer");return new Uint8Array(c)}}isNodeJS&&warn("Please use the `legacy` build in Node.js environments.");async function node_utils_fetchData(a){const c=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(c)}class NodeFilterFactory extends BaseFilterFactory{}class NodeCanvasFactory extends BaseCanvasFactory{_createCanvas(e,c){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,c)}}class NodeCMapReaderFactory extends BaseCMapReaderFactory{async _fetch(e){return node_utils_fetchData(e)}}class NodeStandardFontDataFactory extends BaseStandardFontDataFactory{async _fetch(e){return node_utils_fetchData(e)}}class NodeWasmFactory extends BaseWasmFactory{async _fetch(e){return node_utils_fetchData(e)}}const PathType={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function applyBoundingBox(a,e){if(!e)return;const c=e[2]-e[0],d=e[3]-e[1],h=new Path2D;h.rect(e[0],e[1],c,d),a.clip(h)}class BaseShadingPattern{isModifyingCurrentTransform(){return!1}getPattern(){unreachable("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let c;this._type==="axial"?c=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(c=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)c.addColorStop(d[0],d[1]);return c}getPattern(e,c,d,h){let g;if(h===PathType.STROKE||h===PathType.FILL){const b=c.current.getClippedPathBoundingBox(h,getCurrentTransform(e))||[0,0,0,0],_e=Math.ceil(b[2]-b[0])||1,et=Math.ceil(b[3]-b[1])||1,rt=c.cachedCanvases.getCanvas("pattern",_e,et),st=rt.context;st.clearRect(0,0,st.canvas.width,st.canvas.height),st.beginPath(),st.rect(0,0,st.canvas.width,st.canvas.height),st.translate(-b[0],-b[1]),d=Util.transform(d,[1,0,0,1,b[0],b[1]]),st.transform(...c.baseTransform),this.matrix&&st.transform(...this.matrix),applyBoundingBox(st,this._bbox),st.fillStyle=this._createGradient(st),st.fill(),g=e.createPattern(rt.canvas,"no-repeat");const $=new DOMMatrix(d);g.setTransform($)}else applyBoundingBox(e,this._bbox),g=this._createGradient(e);return g}}function drawTriangle(a,e,c,d,h,g,b,_e){const et=e.coords,rt=e.colors,st=a.data,$=a.width*4;let _;et[c+1]>et[d+1]&&(_=c,c=d,d=_,_=g,g=b,b=_),et[d+1]>et[h+1]&&(_=d,d=h,h=_,_=b,b=_e,_e=_),et[c+1]>et[d+1]&&(_=c,c=d,d=_,_=g,g=b,b=_);const nt=(et[c]+e.offsetX)*e.scaleX,it=(et[c+1]+e.offsetY)*e.scaleY,ot=(et[d]+e.offsetX)*e.scaleX,lt=(et[d+1]+e.offsetY)*e.scaleY,at=(et[h]+e.offsetX)*e.scaleX,ct=(et[h+1]+e.offsetY)*e.scaleY;if(it>=ct)return;const dt=rt[g],ht=rt[g+1],pt=rt[g+2],ft=rt[b],mt=rt[b+1],xt=rt[b+2],gt=rt[_e],Et=rt[_e+1],St=rt[_e+2],Pt=Math.round(it),Mt=Math.round(ct);let Rt,Dt,Tt,It,Vt,Bt,Ct,en;for(let sn=Pt;sn<=Mt;sn++){if(sn<lt){const Gt=sn<it?0:(it-sn)/(it-lt);Rt=nt-(nt-ot)*Gt,Dt=dt-(dt-ft)*Gt,Tt=ht-(ht-mt)*Gt,It=pt-(pt-xt)*Gt}else{let Gt;sn>ct?Gt=1:lt===ct?Gt=0:Gt=(lt-sn)/(lt-ct),Rt=ot-(ot-at)*Gt,Dt=ft-(ft-gt)*Gt,Tt=mt-(mt-Et)*Gt,It=xt-(xt-St)*Gt}let kt;sn<it?kt=0:sn>ct?kt=1:kt=(it-sn)/(it-ct),Vt=nt-(nt-at)*kt,Bt=dt-(dt-gt)*kt,Ct=ht-(ht-Et)*kt,en=pt-(pt-St)*kt;const Ut=Math.round(Math.min(Rt,Vt)),Jt=Math.round(Math.max(Rt,Vt));let tn=$*sn+Ut*4;for(let Gt=Ut;Gt<=Jt;Gt++)kt=(Rt-Gt)/(Rt-Vt),kt<0?kt=0:kt>1&&(kt=1),st[tn++]=Dt-(Dt-Bt)*kt|0,st[tn++]=Tt-(Tt-Ct)*kt|0,st[tn++]=It-(It-en)*kt|0,st[tn++]=255}}function drawFigure(a,e,c){const d=e.coords,h=e.colors;let g,b;switch(e.type){case"lattice":const _e=e.verticesPerRow,et=Math.floor(d.length/_e)-1,rt=_e-1;for(g=0;g<et;g++){let st=g*_e;for(let $=0;$<rt;$++,st++)drawTriangle(a,c,d[st],d[st+1],d[st+_e],h[st],h[st+1],h[st+_e]),drawTriangle(a,c,d[st+_e+1],d[st+1],d[st+_e],h[st+_e+1],h[st+1],h[st+_e])}break;case"triangles":for(g=0,b=d.length;g<b;g+=3)drawTriangle(a,c,d[g],d[g+1],d[g+2],h[g],h[g+1],h[g+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,c,d){const _e=Math.floor(this._bounds[0]),et=Math.floor(this._bounds[1]),rt=Math.ceil(this._bounds[2])-_e,st=Math.ceil(this._bounds[3])-et,$=Math.min(Math.ceil(Math.abs(rt*e[0]*1.1)),3e3),_=Math.min(Math.ceil(Math.abs(st*e[1]*1.1)),3e3),nt=rt/$,it=st/_,ot={coords:this._coords,colors:this._colors,offsetX:-_e,offsetY:-et,scaleX:1/nt,scaleY:1/it},lt=$+2*2,at=_+2*2,ct=d.getCanvas("mesh",lt,at),dt=ct.context,ht=dt.createImageData($,_);if(c){const ft=ht.data;for(let mt=0,xt=ft.length;mt<xt;mt+=4)ft[mt]=c[0],ft[mt+1]=c[1],ft[mt+2]=c[2],ft[mt+3]=255}for(const ft of this._figures)drawFigure(ht,ft,ot);return dt.putImageData(ht,2,2),{canvas:ct.canvas,offsetX:_e-2*nt,offsetY:et-2*it,scaleX:nt,scaleY:it}}isModifyingCurrentTransform(){return!0}getPattern(e,c,d,h){applyBoundingBox(e,this._bbox);const g=new Float32Array(2);if(h===PathType.SHADING)Util.singularValueDecompose2dScale(getCurrentTransform(e),g);else if(this.matrix){Util.singularValueDecompose2dScale(this.matrix,g);const[_e,et]=g;Util.singularValueDecompose2dScale(c.baseTransform,g),g[0]*=_e,g[1]*=et}else Util.singularValueDecompose2dScale(c.baseTransform,g);const b=this._createMeshCanvas(g,h===PathType.SHADING?null:this._background,c.cachedCanvases);return h!==PathType.SHADING&&(e.setTransform(...c.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(b.offsetX,b.offsetY),e.scale(b.scaleX,b.scaleY),e.createPattern(b.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}function getShadingPattern(a){switch(a[0]){case"RadialAxial":return new RadialAxialShadingPattern(a);case"Mesh":return new MeshShadingPattern(a);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${a[0]}`)}const PaintType={COLORED:1,UNCOLORED:2},D0=class D0{constructor(e,c,d,h){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=c,this.canvasGraphicsFactory=d,this.baseTransform=h}createPatternCanvas(e){const{bbox:c,operatorList:d,paintType:h,tilingType:g,color:b,canvasGraphicsFactory:_e}=this;let{xstep:et,ystep:rt}=this;et=Math.abs(et),rt=Math.abs(rt),info("TilingType: "+g);const st=c[0],$=c[1],_=c[2],nt=c[3],it=_-st,ot=nt-$,lt=new Float32Array(2);Util.singularValueDecompose2dScale(this.matrix,lt);const[at,ct]=lt;Util.singularValueDecompose2dScale(this.baseTransform,lt);const dt=at*lt[0],ht=ct*lt[1];let pt=it,ft=ot,mt=!1,xt=!1;const gt=Math.ceil(et*dt),Et=Math.ceil(rt*ht),St=Math.ceil(it*dt),Pt=Math.ceil(ot*ht);gt>=St?pt=et:mt=!0,Et>=Pt?ft=rt:xt=!0;const Mt=this.getSizeAndScale(pt,this.ctx.canvas.width,dt),Rt=this.getSizeAndScale(ft,this.ctx.canvas.height,ht),Dt=e.cachedCanvases.getCanvas("pattern",Mt.size,Rt.size),Tt=Dt.context,It=_e.createCanvasGraphics(Tt);if(It.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(It,h,b),Tt.translate(-Mt.scale*st,-Rt.scale*$),It.transform(Mt.scale,0,0,Rt.scale,0,0),Tt.save(),this.clipBbox(It,st,$,_,nt),It.baseTransform=getCurrentTransform(It.ctx),It.executeOperatorList(d),It.endDrawing(),Tt.restore(),mt||xt){const Vt=Dt.canvas;mt&&(pt=et),xt&&(ft=rt);const Bt=this.getSizeAndScale(pt,this.ctx.canvas.width,dt),Ct=this.getSizeAndScale(ft,this.ctx.canvas.height,ht),en=Bt.size,sn=Ct.size,kt=e.cachedCanvases.getCanvas("pattern-workaround",en,sn),Ut=kt.context,Jt=mt?Math.floor(it/et):0,tn=xt?Math.floor(ot/rt):0;for(let Gt=0;Gt<=Jt;Gt++)for(let hn=0;hn<=tn;hn++)Ut.drawImage(Vt,en*Gt,sn*hn,en,sn,0,0,en,sn);return{canvas:kt.canvas,scaleX:Bt.scale,scaleY:Ct.scale,offsetX:st,offsetY:$}}return{canvas:Dt.canvas,scaleX:Mt.scale,scaleY:Rt.scale,offsetX:st,offsetY:$}}getSizeAndScale(e,c,d){const h=Math.max(D0.MAX_PATTERN_SIZE,c);let g=Math.ceil(e*d);return g>=h?g=h:d=g/e,{scale:d,size:g}}clipBbox(e,c,d,h,g){const b=h-c,_e=g-d;e.ctx.rect(c,d,b,_e),Util.axialAlignedBoundingBox([c,d,h,g],getCurrentTransform(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,c,d){const h=e.ctx,g=e.current;switch(c){case PaintType.COLORED:const{fillStyle:b,strokeStyle:_e}=this.ctx;h.fillStyle=g.fillColor=b,h.strokeStyle=g.strokeColor=_e;break;case PaintType.UNCOLORED:h.fillStyle=h.strokeStyle=d,g.fillColor=g.strokeColor=d;break;default:throw new FormatError(`Unsupported paint type: ${c}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,c,d,h){let g=d;h!==PathType.SHADING&&(g=Util.transform(g,c.baseTransform),this.matrix&&(g=Util.transform(g,this.matrix)));const b=this.createPatternCanvas(c);let _e=new DOMMatrix(g);_e=_e.translate(b.offsetX,b.offsetY),_e=_e.scale(1/b.scaleX,1/b.scaleY);const et=e.createPattern(b.canvas,"repeat");return et.setTransform(_e),et}};Dn(D0,"MAX_PATTERN_SIZE",3e3);let TilingPattern=D0;function convertBlackAndWhiteToRGBA({src:a,srcPos:e=0,dest:c,width:d,height:h,nonBlackColor:g=4294967295,inverseDecode:b=!1}){const _e=util_FeatureTest.isLittleEndian?4278190080:255,[et,rt]=b?[g,_e]:[_e,g],st=d>>3,$=d&7,_=a.length;c=new Uint32Array(c.buffer);let nt=0;for(let it=0;it<h;it++){for(const lt=e+st;e<lt;e++){const at=e<_?a[e]:255;c[nt++]=at&128?rt:et,c[nt++]=at&64?rt:et,c[nt++]=at&32?rt:et,c[nt++]=at&16?rt:et,c[nt++]=at&8?rt:et,c[nt++]=at&4?rt:et,c[nt++]=at&2?rt:et,c[nt++]=at&1?rt:et}if($===0)continue;const ot=e<_?a[e++]:255;for(let lt=0;lt<$;lt++)c[nt++]=ot&1<<7-lt?rt:et}return{srcPos:e,destPos:nt}}const MIN_FONT_SIZE=16,MAX_FONT_SIZE=100,EXECUTION_TIME=15,EXECUTION_STEPS=10,FULL_CHUNK_HEIGHT=16,SCALE_MATRIX=new DOMMatrix,XY=new Float32Array(2),MIN_MAX_INIT=new Float32Array([1/0,1/0,-1/0,-1/0]);function mirrorContextOperations(a,e){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){e.save(),this.__originalSave()},a.restore=function(){e.restore(),this.__originalRestore()},a.translate=function(c,d){e.translate(c,d),this.__originalTranslate(c,d)},a.scale=function(c,d){e.scale(c,d),this.__originalScale(c,d)},a.transform=function(c,d,h,g,b,_e){e.transform(c,d,h,g,b,_e),this.__originalTransform(c,d,h,g,b,_e)},a.setTransform=function(c,d,h,g,b,_e){e.setTransform(c,d,h,g,b,_e),this.__originalSetTransform(c,d,h,g,b,_e)},a.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},a.rotate=function(c){e.rotate(c),this.__originalRotate(c)},a.clip=function(c){e.clip(c),this.__originalClip(c)},a.moveTo=function(c,d){e.moveTo(c,d),this.__originalMoveTo(c,d)},a.lineTo=function(c,d){e.lineTo(c,d),this.__originalLineTo(c,d)},a.bezierCurveTo=function(c,d,h,g,b,_e){e.bezierCurveTo(c,d,h,g,b,_e),this.__originalBezierCurveTo(c,d,h,g,b,_e)},a.rect=function(c,d,h,g){e.rect(c,d,h,g),this.__originalRect(c,d,h,g)},a.closePath=function(){e.closePath(),this.__originalClosePath()},a.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class CachedCanvases{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,c,d){let h;return this.cache[e]!==void 0?(h=this.cache[e],this.canvasFactory.reset(h,c,d)):(h=this.canvasFactory.create(c,d),this.cache[e]=h),h}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const c=this.cache[e];this.canvasFactory.destroy(c),delete this.cache[e]}}}function drawImageAtIntegerCoords(a,e,c,d,h,g,b,_e,et,rt){const[st,$,_,nt,it,ot]=getCurrentTransform(a);if($===0&&_===0){const ct=b*st+it,dt=Math.round(ct),ht=_e*nt+ot,pt=Math.round(ht),ft=(b+et)*st+it,mt=Math.abs(Math.round(ft)-dt)||1,xt=(_e+rt)*nt+ot,gt=Math.abs(Math.round(xt)-pt)||1;return a.setTransform(Math.sign(st),0,0,Math.sign(nt),dt,pt),a.drawImage(e,c,d,h,g,0,0,mt,gt),a.setTransform(st,$,_,nt,it,ot),[mt,gt]}if(st===0&&nt===0){const ct=_e*_+it,dt=Math.round(ct),ht=b*$+ot,pt=Math.round(ht),ft=(_e+rt)*_+it,mt=Math.abs(Math.round(ft)-dt)||1,xt=(b+et)*$+ot,gt=Math.abs(Math.round(xt)-pt)||1;return a.setTransform(0,Math.sign($),Math.sign(_),0,dt,pt),a.drawImage(e,c,d,h,g,0,0,gt,mt),a.setTransform(st,$,_,nt,it,ot),[gt,mt]}a.drawImage(e,c,d,h,g,b,_e,et,rt);const lt=Math.hypot(st,$),at=Math.hypot(_,nt);return[lt*et,at*rt]}class CanvasExtraState{constructor(e,c){Dn(this,"alphaIsShape",!1);Dn(this,"fontSize",0);Dn(this,"fontSizeScale",1);Dn(this,"textMatrix",null);Dn(this,"textMatrixScale",1);Dn(this,"fontMatrix",FONT_IDENTITY_MATRIX);Dn(this,"leading",0);Dn(this,"x",0);Dn(this,"y",0);Dn(this,"lineX",0);Dn(this,"lineY",0);Dn(this,"charSpacing",0);Dn(this,"wordSpacing",0);Dn(this,"textHScale",1);Dn(this,"textRenderingMode",TextRenderingMode.FILL);Dn(this,"textRise",0);Dn(this,"fillColor","#000000");Dn(this,"strokeColor","#000000");Dn(this,"patternFill",!1);Dn(this,"patternStroke",!1);Dn(this,"fillAlpha",1);Dn(this,"strokeAlpha",1);Dn(this,"lineWidth",1);Dn(this,"activeSMask",null);Dn(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,c]),this.minMax=MIN_MAX_INIT.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=PathType.FILL,c=null){const d=this.minMax.slice();if(e===PathType.STROKE){c||unreachable("Stroke bounding box must include transform."),Util.singularValueDecompose2dScale(c,XY);const h=XY[0]*this.lineWidth/2,g=XY[1]*this.lineWidth/2;d[0]-=h,d[1]-=g,d[2]+=h,d[3]+=g}return d}updateClipFromPath(){const e=Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(MIN_MAX_INIT,0)}getClippedPathBoundingBox(e=PathType.FILL,c=null){return Util.intersect(this.clipBox,this.getPathBoundingBox(e,c))}}function putBinaryImageData(a,e){if(e instanceof ImageData){a.putImageData(e,0,0);return}const c=e.height,d=e.width,h=c%FULL_CHUNK_HEIGHT,g=(c-h)/FULL_CHUNK_HEIGHT,b=h===0?g:g+1,_e=a.createImageData(d,FULL_CHUNK_HEIGHT);let et=0,rt;const st=e.data,$=_e.data;let _,nt,it,ot;if(e.kind===util_ImageKind.GRAYSCALE_1BPP){const lt=st.byteLength,at=new Uint32Array($.buffer,0,$.byteLength>>2),ct=at.length,dt=d+7>>3,ht=4294967295,pt=util_FeatureTest.isLittleEndian?4278190080:255;for(_=0;_<b;_++){for(it=_<g?FULL_CHUNK_HEIGHT:h,rt=0,nt=0;nt<it;nt++){const ft=lt-et;let mt=0;const xt=ft>dt?d:ft*8-7,gt=xt&-8;let Et=0,St=0;for(;mt<gt;mt+=8)St=st[et++],at[rt++]=St&128?ht:pt,at[rt++]=St&64?ht:pt,at[rt++]=St&32?ht:pt,at[rt++]=St&16?ht:pt,at[rt++]=St&8?ht:pt,at[rt++]=St&4?ht:pt,at[rt++]=St&2?ht:pt,at[rt++]=St&1?ht:pt;for(;mt<xt;mt++)Et===0&&(St=st[et++],Et=128),at[rt++]=St&Et?ht:pt,Et>>=1}for(;rt<ct;)at[rt++]=0;a.putImageData(_e,0,_*FULL_CHUNK_HEIGHT)}}else if(e.kind===util_ImageKind.RGBA_32BPP){for(nt=0,ot=d*FULL_CHUNK_HEIGHT*4,_=0;_<g;_++)$.set(st.subarray(et,et+ot)),et+=ot,a.putImageData(_e,0,nt),nt+=FULL_CHUNK_HEIGHT;_<b&&(ot=d*h*4,$.set(st.subarray(et,et+ot)),a.putImageData(_e,0,nt))}else if(e.kind===util_ImageKind.RGB_24BPP)for(it=FULL_CHUNK_HEIGHT,ot=d*it,_=0;_<b;_++){for(_>=g&&(it=h,ot=d*it),rt=0,nt=ot;nt--;)$[rt++]=st[et++],$[rt++]=st[et++],$[rt++]=st[et++],$[rt++]=255;a.putImageData(_e,0,_*FULL_CHUNK_HEIGHT)}else throw new Error(`bad image kind: ${e.kind}`)}function putBinaryImageMask(a,e){if(e.bitmap){a.drawImage(e.bitmap,0,0);return}const c=e.height,d=e.width,h=c%FULL_CHUNK_HEIGHT,g=(c-h)/FULL_CHUNK_HEIGHT,b=h===0?g:g+1,_e=a.createImageData(d,FULL_CHUNK_HEIGHT);let et=0;const rt=e.data,st=_e.data;for(let $=0;$<b;$++){const _=$<g?FULL_CHUNK_HEIGHT:h;({srcPos:et}=convertBlackAndWhiteToRGBA({src:rt,srcPos:et,dest:st,width:d,height:_,nonBlackColor:0})),a.putImageData(_e,0,$*FULL_CHUNK_HEIGHT)}}function copyCtxState(a,e){const c=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const d of c)a[d]!==void 0&&(e[d]=a[d]);a.setLineDash!==void 0&&(e.setLineDash(a.getLineDash()),e.lineDashOffset=a.lineDashOffset)}function resetCtxToDefault(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:e}=a;e!=="none"&&e!==""&&(a.filter="none")}function getImageSmoothingEnabled(a,e){if(e)return!0;Util.singularValueDecompose2dScale(a,XY);const c=Math.fround(OutputScale.pixelRatio*PixelsPerInch.PDF_TO_CSS_UNITS);return XY[0]<=c&&XY[1]<=c}const LINE_CAP_STYLES=["butt","round","square"],LINE_JOIN_STYLES=["miter","round","bevel"],NORMAL_CLIP={},EO_CLIP={};var qo,cE,uE,dE;const HE=class HE{constructor(e,c,d,h,g,{optionalContentConfig:b,markedContentStack:_e=null},et,rt){Lt(this,qo);this.ctx=e,this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=c,this.objs=d,this.canvasFactory=h,this.filterFactory=g,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=_e||[],this.optionalContentConfig=b,this.cachedCanvases=new CachedCanvases(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=et,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=rt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,c=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):c}beginDrawing({transform:e,viewport:c,transparency:d=!1,background:h=null}){const g=this.ctx.canvas.width,b=this.ctx.canvas.height,_e=this.ctx.fillStyle;if(this.ctx.fillStyle=h||"#ffffff",this.ctx.fillRect(0,0,g,b),this.ctx.fillStyle=_e,d){const et=this.cachedCanvases.getCanvas("transparent",g,b);this.compositeCtx=this.ctx,this.transparentCanvas=et.canvas,this.ctx=et.context,this.ctx.save(),this.ctx.transform(...getCurrentTransform(this.compositeCtx))}this.ctx.save(),resetCtxToDefault(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...c.transform),this.viewportScale=c.scale,this.baseTransform=getCurrentTransform(this.ctx)}executeOperatorList(e,c,d,h){const g=e.argsArray,b=e.fnArray;let _e=c||0;const et=g.length;if(et===_e)return _e;const rt=et-_e>EXECUTION_STEPS&&typeof d=="function",st=rt?Date.now()+EXECUTION_TIME:0;let $=0;const _=this.commonObjs,nt=this.objs;let it;for(;;){if(h!==void 0&&_e===h.nextBreakPoint)return h.breakIt(_e,d),_e;if(it=b[_e],it!==OPS.dependency)this[it].apply(this,g[_e]);else for(const ot of g[_e]){const lt=ot.startsWith("g_")?_:nt;if(!lt.has(ot))return lt.get(ot,d),_e}if(_e++,_e===et)return _e;if(rt&&++$>EXECUTION_STEPS){if(Date.now()>st)return d(),_e;$=0}}}endDrawing(){$t(this,qo,cE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const c of e.values())typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement&&(c.width=c.height=0);e.clear()}this._cachedBitmapsMap.clear(),$t(this,qo,uE).call(this)}_scaleImage(e,c){const d=e.width??e.displayWidth,h=e.height??e.displayHeight;let g=Math.max(Math.hypot(c[0],c[1]),1),b=Math.max(Math.hypot(c[2],c[3]),1),_e=d,et=h,rt="prescale1",st,$;for(;g>2&&_e>1||b>2&&et>1;){let _=_e,nt=et;g>2&&_e>1&&(_=_e>=16384?Math.floor(_e/2)-1||1:Math.ceil(_e/2),g/=_e/_),b>2&&et>1&&(nt=et>=16384?Math.floor(et/2)-1||1:Math.ceil(et)/2,b/=et/nt),st=this.cachedCanvases.getCanvas(rt,_,nt),$=st.context,$.clearRect(0,0,_,nt),$.drawImage(e,0,0,_e,et,0,0,_,nt),e=st.canvas,_e=_,et=nt,rt=rt==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:_e,paintHeight:et}}_createMaskCanvas(e){const c=this.ctx,{width:d,height:h}=e,g=this.current.fillColor,b=this.current.patternFill,_e=getCurrentTransform(c);let et,rt,st,$;if((e.bitmap||e.data)&&e.count>1){const gt=e.bitmap||e.data.buffer;rt=JSON.stringify(b?_e:[_e.slice(0,4),g]),et=this._cachedBitmapsMap.get(gt),et||(et=new Map,this._cachedBitmapsMap.set(gt,et));const Et=et.get(rt);if(Et&&!b){const St=Math.round(Math.min(_e[0],_e[2])+_e[4]),Pt=Math.round(Math.min(_e[1],_e[3])+_e[5]);return{canvas:Et,offsetX:St,offsetY:Pt}}st=Et}st||($=this.cachedCanvases.getCanvas("maskCanvas",d,h),putBinaryImageMask($.context,e));let _=Util.transform(_e,[1/d,0,0,-1/h,0,0]);_=Util.transform(_,[1,0,0,1,0,-h]);const nt=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,d,h],_,nt);const[it,ot,lt,at]=nt,ct=Math.round(lt-it)||1,dt=Math.round(at-ot)||1,ht=this.cachedCanvases.getCanvas("fillCanvas",ct,dt),pt=ht.context,ft=it,mt=ot;pt.translate(-ft,-mt),pt.transform(..._),st||(st=this._scaleImage($.canvas,getCurrentTransformInverse(pt)),st=st.img,et&&b&&et.set(rt,st)),pt.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(pt),e.interpolate),drawImageAtIntegerCoords(pt,st,0,0,st.width,st.height,0,0,d,h),pt.globalCompositeOperation="source-in";const xt=Util.transform(getCurrentTransformInverse(pt),[1,0,0,1,-ft,-mt]);return pt.fillStyle=b?g.getPattern(c,this,xt,PathType.FILL):g,pt.fillRect(0,0,d,h),et&&!b&&(this.cachedCanvases.delete("fillCanvas"),et.set(rt,ht.canvas)),{canvas:ht.canvas,offsetX:Math.round(ft),offsetY:Math.round(mt)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=LINE_CAP_STYLES[e]}setLineJoin(e){this.ctx.lineJoin=LINE_JOIN_STYLES[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,c){const d=this.ctx;d.setLineDash!==void 0&&(d.setLineDash(e),d.lineDashOffset=c)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[c,d]of e)switch(c){case"LW":this.setLineWidth(d);break;case"LC":this.setLineCap(d);break;case"LJ":this.setLineJoin(d);break;case"ML":this.setMiterLimit(d);break;case"D":this.setDash(d[0],d[1]);break;case"RI":this.setRenderingIntent(d);break;case"FL":this.setFlatness(d);break;case"Font":this.setFont(d[0],d[1]);break;case"CA":this.current.strokeAlpha=d;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":this.ctx.globalCompositeOperation=d;break;case"SMask":this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,c=this.ctx.canvas.height,d="smaskGroupAt"+this.groupLevel,h=this.cachedCanvases.getCanvas(d,e,c);this.suspendedCtx=this.ctx;const g=this.ctx=h.context;g.setTransform(this.suspendedCtx.getTransform()),copyCtxState(this.suspendedCtx,g),mirrorContextOperations(g,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),copyCtxState(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const c=this.current.activeSMask,d=this.suspendedCtx;this.composeSMask(d,c,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,c,d,h){const g=h[0],b=h[1],_e=h[2]-g,et=h[3]-b;_e===0||et===0||(this.genericComposeSMask(c.context,d,_e,et,c.subtype,c.backdrop,c.transferMap,g,b,c.offsetX,c.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(d.canvas,0,0),e.restore())}genericComposeSMask(e,c,d,h,g,b,_e,et,rt,st,$){let _=e.canvas,nt=et-st,it=rt-$;if(b)if(nt<0||it<0||nt+d>_.width||it+h>_.height){const lt=this.cachedCanvases.getCanvas("maskExtension",d,h),at=lt.context;at.drawImage(_,-nt,-it),at.globalCompositeOperation="destination-atop",at.fillStyle=b,at.fillRect(0,0,d,h),at.globalCompositeOperation="source-over",_=lt.canvas,nt=it=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const lt=new Path2D;lt.rect(nt,it,d,h),e.clip(lt),e.globalCompositeOperation="destination-atop",e.fillStyle=b,e.fillRect(nt,it,d,h),e.restore()}c.save(),c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),g==="Alpha"&&_e?c.filter=this.filterFactory.addAlphaFilter(_e):g==="Luminosity"&&(c.filter=this.filterFactory.addLuminosityFilter(_e));const ot=new Path2D;ot.rect(et,rt,d,h),c.clip(ot),c.globalCompositeOperation="destination-in",c.drawImage(_,nt,it,d,h,et,rt,d,h),c.restore()}save(){this.inSMaskMode&&copyCtxState(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&copyCtxState(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,c,d,h,g,b){this.ctx.transform(e,c,d,h,g,b),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,c,d){let[h]=c;if(!d){h||(h=c[0]=new Path2D),this[e](h);return}if(!(h instanceof Path2D)){const g=c[0]=new Path2D;for(let b=0,_e=h.length;b<_e;)switch(h[b++]){case DrawOPS.moveTo:g.moveTo(h[b++],h[b++]);break;case DrawOPS.lineTo:g.lineTo(h[b++],h[b++]);break;case DrawOPS.curveTo:g.bezierCurveTo(h[b++],h[b++],h[b++],h[b++],h[b++],h[b++]);break;case DrawOPS.closePath:g.closePath();break;default:warn(`Unrecognized drawing path operator: ${h[b-1]}`);break}h=g}Util.axialAlignedBoundingBox(d,getCurrentTransform(this.ctx),this.current.minMax),this[e](h)}closePath(){this.ctx.closePath()}stroke(e,c=!0){const d=this.ctx,h=this.current.strokeColor;if(d.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof h=="object"&&(h!=null&&h.getPattern)){const g=h.isModifyingCurrentTransform()?d.getTransform():null;if(d.save(),d.strokeStyle=h.getPattern(d,this,getCurrentTransformInverse(d),PathType.STROKE),g){const b=new Path2D;b.addPath(e,d.getTransform().invertSelf().multiplySelf(g)),e=b}this.rescaleAndStroke(e,!1),d.restore()}else this.rescaleAndStroke(e,!0);c&&this.consumePath(e,this.current.getClippedPathBoundingBox(PathType.STROKE,getCurrentTransform(this.ctx))),d.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,c=!0){const d=this.ctx,h=this.current.fillColor,g=this.current.patternFill;let b=!1;if(g){const et=h.isModifyingCurrentTransform()?d.getTransform():null;if(d.save(),d.fillStyle=h.getPattern(d,this,getCurrentTransformInverse(d),PathType.FILL),et){const rt=new Path2D;rt.addPath(e,d.getTransform().invertSelf().multiplySelf(et)),e=rt}b=!0}const _e=this.current.getClippedPathBoundingBox();this.contentVisible&&_e!==null&&(this.pendingEOFill?(d.fill(e,"evenodd"),this.pendingEOFill=!1):d.fill(e)),b&&d.restore(),c&&this.consumePath(e,_e)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=NORMAL_CLIP}eoClip(){this.pendingClip=EO_CLIP}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,c=this.ctx;if(e===void 0)return;const d=new Path2D,h=c.getTransform().invertSelf();for(const{transform:g,x:b,y:_e,fontSize:et,path:rt}of e)d.addPath(rt,new DOMMatrix(g).preMultiplySelf(h).translate(b,_e).scale(et,-et));c.clip(d),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,c){var st;const d=this.commonObjs.get(e),h=this.current;if(!d)throw new Error(`Can't find font for ${e}`);if(h.fontMatrix=d.fontMatrix||FONT_IDENTITY_MATRIX,(h.fontMatrix[0]===0||h.fontMatrix[3]===0)&&warn("Invalid font matrix for font "+e),c<0?(c=-c,h.fontDirection=-1):h.fontDirection=1,this.current.font=d,this.current.fontSize=c,d.isType3Font)return;const g=d.loadedName||"sans-serif",b=((st=d.systemFontInfo)==null?void 0:st.css)||`"${g}", ${d.fallbackName}`;let _e="normal";d.black?_e="900":d.bold&&(_e="bold");const et=d.italic?"italic":"normal";let rt=c;c<MIN_FONT_SIZE?rt=MIN_FONT_SIZE:c>MAX_FONT_SIZE&&(rt=MAX_FONT_SIZE),this.current.fontSizeScale=c/rt,this.ctx.font=`${et} ${_e} ${rt}px ${b}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,c){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=c}setLeadingMoveText(e,c){this.setLeading(-c),this.moveText(e,c)}setTextMatrix(e){const{current:c}=this;c.textMatrix=e,c.textMatrixScale=Math.hypot(e[0],e[1]),c.x=c.lineX=0,c.y=c.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,c,d,h,g){const b=this.ctx,_e=this.current,et=_e.font,rt=_e.textRenderingMode,st=_e.fontSize/_e.fontSizeScale,$=rt&TextRenderingMode.FILL_STROKE_MASK,_=!!(rt&TextRenderingMode.ADD_TO_PATH_FLAG),nt=_e.patternFill&&!et.missingFile,it=_e.patternStroke&&!et.missingFile;let ot;if((et.disableFontFace||_||nt||it)&&(ot=et.getPathGenerator(this.commonObjs,e)),et.disableFontFace||nt||it){b.save(),b.translate(c,d),b.scale(st,-st);let lt;if(($===TextRenderingMode.FILL||$===TextRenderingMode.FILL_STROKE)&&(h?(lt=b.getTransform(),b.setTransform(...h),b.fill($t(this,qo,dE).call(this,ot,lt,h))):b.fill(ot)),$===TextRenderingMode.STROKE||$===TextRenderingMode.FILL_STROKE)if(g){lt||(lt=b.getTransform()),b.setTransform(...g);const{a:at,b:ct,c:dt,d:ht}=lt,pt=Util.inverseTransform(g),ft=Util.transform([at,ct,dt,ht,0,0],pt);Util.singularValueDecompose2dScale(ft,XY),b.lineWidth*=Math.max(XY[0],XY[1])/st,b.stroke($t(this,qo,dE).call(this,ot,lt,g))}else b.lineWidth/=st,b.stroke(ot);b.restore()}else($===TextRenderingMode.FILL||$===TextRenderingMode.FILL_STROKE)&&b.fillText(e,c,d),($===TextRenderingMode.STROKE||$===TextRenderingMode.FILL_STROKE)&&b.strokeText(e,c,d);_&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:getCurrentTransform(b),x:c,y:d,fontSize:st,path:ot})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const c=e.getImageData(0,0,10,10).data;let d=!1;for(let h=3;h<c.length;h+=4)if(c[h]>0&&c[h]<255){d=!0;break}return shadow(this,"isFontSubpixelAAEnabled",d)}showText(e){const c=this.current,d=c.font;if(d.isType3Font)return this.showType3Text(e);const h=c.fontSize;if(h===0)return;const g=this.ctx,b=c.fontSizeScale,_e=c.charSpacing,et=c.wordSpacing,rt=c.fontDirection,st=c.textHScale*rt,$=e.length,_=d.vertical,nt=_?1:-1,it=d.defaultVMetrics,ot=h*c.fontMatrix[0],lt=c.textRenderingMode===TextRenderingMode.FILL&&!d.disableFontFace&&!c.patternFill;g.save(),c.textMatrix&&g.transform(...c.textMatrix),g.translate(c.x,c.y+c.textRise),rt>0?g.scale(st,-1):g.scale(st,1);let at,ct;if(c.patternFill){g.save();const mt=c.fillColor.getPattern(g,this,getCurrentTransformInverse(g),PathType.FILL);at=getCurrentTransform(g),g.restore(),g.fillStyle=mt}if(c.patternStroke){g.save();const mt=c.strokeColor.getPattern(g,this,getCurrentTransformInverse(g),PathType.STROKE);ct=getCurrentTransform(g),g.restore(),g.strokeStyle=mt}let dt=c.lineWidth;const ht=c.textMatrixScale;if(ht===0||dt===0){const mt=c.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;(mt===TextRenderingMode.STROKE||mt===TextRenderingMode.FILL_STROKE)&&(dt=this.getSinglePixelWidth())}else dt/=ht;if(b!==1&&(g.scale(b,b),dt/=b),g.lineWidth=dt,d.isInvalidPDFjsFont){const mt=[];let xt=0;for(const gt of e)mt.push(gt.unicode),xt+=gt.width;g.fillText(mt.join(""),0,0),c.x+=xt*ot*st,g.restore(),this.compose();return}let pt=0,ft;for(ft=0;ft<$;++ft){const mt=e[ft];if(typeof mt=="number"){pt+=nt*mt*h/1e3;continue}let xt=!1;const gt=(mt.isSpace?et:0)+_e,Et=mt.fontChar,St=mt.accent;let Pt,Mt,Rt=mt.width;if(_){const Tt=mt.vmetric||it,It=-(mt.vmetric?Tt[1]:Rt*.5)*ot,Vt=Tt[2]*ot;Rt=Tt?-Tt[0]:Rt,Pt=It/b,Mt=(pt+Vt)/b}else Pt=pt/b,Mt=0;if(d.remeasure&&Rt>0){const Tt=g.measureText(Et).width*1e3/h*b;if(Rt<Tt&&this.isFontSubpixelAAEnabled){const It=Rt/Tt;xt=!0,g.save(),g.scale(It,1),Pt/=It}else Rt!==Tt&&(Pt+=(Rt-Tt)/2e3*h/b)}if(this.contentVisible&&(mt.isInFont||d.missingFile)){if(lt&&!St)g.fillText(Et,Pt,Mt);else if(this.paintChar(Et,Pt,Mt,at,ct),St){const Tt=Pt+h*St.offset.x/b,It=Mt-h*St.offset.y/b;this.paintChar(St.fontChar,Tt,It,at,ct)}}const Dt=_?Rt*ot-gt*rt:Rt*ot+gt*rt;pt+=Dt,xt&&g.restore()}_?c.y-=pt:c.x+=pt*st,g.restore(),this.compose()}showType3Text(e){const c=this.ctx,d=this.current,h=d.font,g=d.fontSize,b=d.fontDirection,_e=h.vertical?1:-1,et=d.charSpacing,rt=d.wordSpacing,st=d.textHScale*b,$=d.fontMatrix||FONT_IDENTITY_MATRIX,_=e.length,nt=d.textRenderingMode===TextRenderingMode.INVISIBLE;let it,ot,lt,at;if(!(nt||g===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,c.save(),d.textMatrix&&c.transform(...d.textMatrix),c.translate(d.x,d.y+d.textRise),c.scale(st,b),it=0;it<_;++it){if(ot=e[it],typeof ot=="number"){at=_e*ot*g/1e3,this.ctx.translate(at,0),d.x+=at*st;continue}const ct=(ot.isSpace?rt:0)+et,dt=h.charProcOperatorList[ot.operatorListId];dt?this.contentVisible&&(this.save(),c.scale(g,g),c.transform(...$),this.executeOperatorList(dt),this.restore()):warn(`Type3 character "${ot.operatorListId}" is not available.`);const ht=[ot.width,0];Util.applyTransform(ht,$),lt=ht[0]*g+ct,c.translate(lt,0),d.x+=lt*st}c.restore()}}setCharWidth(e,c){}setCharWidthAndBounds(e,c,d,h,g,b){const _e=new Path2D;_e.rect(d,h,g-d,b-h),this.ctx.clip(_e),this.endPath()}getColorN_Pattern(e){let c;if(e[0]==="TilingPattern"){const d=this.baseTransform||getCurrentTransform(this.ctx),h={createCanvasGraphics:g=>new HE(g,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};c=new TilingPattern(e,this.ctx,h,d)}else c=this._getPattern(e[1],e[2]);return c}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,c=null){let d;return this.cachedPatterns.has(e)?d=this.cachedPatterns.get(e):(d=getShadingPattern(this.getObject(e)),this.cachedPatterns.set(e,d)),c&&(d.matrix=c),d}shadingFill(e){if(!this.contentVisible)return;const c=this.ctx;this.save();const d=this._getPattern(e);c.fillStyle=d.getPattern(c,this,getCurrentTransformInverse(c),PathType.SHADING);const h=getCurrentTransformInverse(c);if(h){const{width:g,height:b}=c.canvas,_e=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,g,b],h,_e);const[et,rt,st,$]=_e;this.ctx.fillRect(et,rt,st-et,$-rt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){unreachable("Should not call beginInlineImage")}beginImageData(){unreachable("Should not call beginImageData")}paintFormXObjectBegin(e,c){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=getCurrentTransform(this.ctx),c)){Util.axialAlignedBoundingBox(c,this.baseTransform,this.current.minMax);const[d,h,g,b]=c,_e=new Path2D;_e.rect(d,h,g-d,b-h),this.ctx.clip(_e),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const c=this.ctx;e.isolated||info("TODO: Support non-isolated groups."),e.knockout&&warn("Knockout groups not supported.");const d=getCurrentTransform(c);if(e.matrix&&c.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let h=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox(e.bbox,getCurrentTransform(c),h);const g=[0,0,c.canvas.width,c.canvas.height];h=Util.intersect(h,g)||[0,0,0,0];const b=Math.floor(h[0]),_e=Math.floor(h[1]),et=Math.max(Math.ceil(h[2])-b,1),rt=Math.max(Math.ceil(h[3])-_e,1);this.current.startNewPathAndClipBox([0,0,et,rt]);let st="groupAt"+this.groupLevel;e.smask&&(st+="_smask_"+this.smaskCounter++%2);const $=this.cachedCanvases.getCanvas(st,et,rt),_=$.context;_.translate(-b,-_e),_.transform(...d);let nt=new Path2D;const[it,ot,lt,at]=e.bbox;if(nt.rect(it,ot,lt-it,at-ot),e.matrix){const ct=new Path2D;ct.addPath(nt,new DOMMatrix(e.matrix)),nt=ct}_.clip(nt),e.smask?this.smaskStack.push({canvas:$.canvas,context:_,offsetX:b,offsetY:_e,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(c.setTransform(1,0,0,1,0,0),c.translate(b,_e),c.save()),copyCtxState(c,_),this.ctx=_,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(c),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const c=this.ctx,d=this.groupStack.pop();if(this.ctx=d,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const h=getCurrentTransform(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...h);const g=MIN_MAX_INIT.slice();Util.axialAlignedBoundingBox([0,0,c.canvas.width,c.canvas.height],h,g),this.ctx.drawImage(c.canvas,0,0),this.ctx.restore(),this.compose(g)}}beginAnnotation(e,c,d,h,g){if($t(this,qo,cE).call(this),resetCtxToDefault(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),c){const b=c[2]-c[0],_e=c[3]-c[1];if(g&&this.annotationCanvasMap){d=d.slice(),d[4]-=c[0],d[5]-=c[1],c=c.slice(),c[0]=c[1]=0,c[2]=b,c[3]=_e,Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx),XY);const{viewportScale:et}=this,rt=Math.ceil(b*this.outputScaleX*et),st=Math.ceil(_e*this.outputScaleY*et);this.annotationCanvas=this.canvasFactory.create(rt,st);const{canvas:$,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(e,$),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(XY[0],0,0,-XY[1],0,_e*XY[1]),resetCtxToDefault(this.ctx)}else{resetCtxToDefault(this.ctx),this.endPath();const et=new Path2D;et.rect(c[0],c[1],b,_e),this.ctx.clip(et)}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...d),this.transform(...h)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),$t(this,qo,uE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const c=e.count;e=this.getObject(e.data,e),e.count=c;const d=this.ctx,h=this._createMaskCanvas(e),g=h.canvas;d.save(),d.setTransform(1,0,0,1,0,0),d.drawImage(g,h.offsetX,h.offsetY),d.restore(),this.compose()}paintImageMaskXObjectRepeat(e,c,d=0,h=0,g,b){if(!this.contentVisible)return;e=this.getObject(e.data,e);const _e=this.ctx;_e.save();const et=getCurrentTransform(_e);_e.transform(c,d,h,g,0,0);const rt=this._createMaskCanvas(e);_e.setTransform(1,0,0,1,rt.offsetX-et[4],rt.offsetY-et[5]);for(let st=0,$=b.length;st<$;st+=2){const _=Util.transform(et,[c,d,h,g,b[st],b[st+1]]);_e.drawImage(rt.canvas,_[4],_[5])}_e.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const c=this.ctx,d=this.current.fillColor,h=this.current.patternFill;for(const g of e){const{data:b,width:_e,height:et,transform:rt}=g,st=this.cachedCanvases.getCanvas("maskCanvas",_e,et),$=st.context;$.save();const _=this.getObject(b,g);putBinaryImageMask($,_),$.globalCompositeOperation="source-in",$.fillStyle=h?d.getPattern($,this,getCurrentTransformInverse(c),PathType.FILL):d,$.fillRect(0,0,_e,et),$.restore(),c.save(),c.transform(...rt),c.scale(1,-1),drawImageAtIntegerCoords(c,st.canvas,0,0,_e,et,0,-1,1,1),c.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const c=this.getObject(e);if(!c){warn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(c)}paintImageXObjectRepeat(e,c,d,h){if(!this.contentVisible)return;const g=this.getObject(e);if(!g){warn("Dependent image isn't ready yet");return}const b=g.width,_e=g.height,et=[];for(let rt=0,st=h.length;rt<st;rt+=2)et.push({transform:[c,0,0,d,h[rt],h[rt+1]],x:0,y:0,w:b,h:_e});this.paintInlineImageXObjectGroup(g,et)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:c,width:d,height:h}=e,g=this.cachedCanvases.getCanvas("inlineImage",d,h),b=g.context;return b.filter=this.current.transferMaps,b.drawImage(c,0,0),b.filter="none",g.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const c=e.width,d=e.height,h=this.ctx;this.save();const{filter:g}=h;g!=="none"&&g!==""&&(h.filter="none"),h.scale(1/c,-1/d);let b;if(e.bitmap)b=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)b=e;else{const rt=this.cachedCanvases.getCanvas("inlineImage",c,d).context;putBinaryImageData(rt,e),b=this.applyTransferMapsToCanvas(rt)}const _e=this._scaleImage(b,getCurrentTransformInverse(h));h.imageSmoothingEnabled=getImageSmoothingEnabled(getCurrentTransform(h),e.interpolate),drawImageAtIntegerCoords(h,_e.img,0,0,_e.paintWidth,_e.paintHeight,0,-d,c,d),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,c){if(!this.contentVisible)return;const d=this.ctx;let h;if(e.bitmap)h=e.bitmap;else{const g=e.width,b=e.height,et=this.cachedCanvases.getCanvas("inlineImage",g,b).context;putBinaryImageData(et,e),h=this.applyTransferMapsToCanvas(et)}for(const g of c)d.save(),d.transform(...g.transform),d.scale(1,-1),drawImageAtIntegerCoords(d,h,g.x,g.y,g.w,g.h,0,-1,1,1),d.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,c){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,c){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(c)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,c){const d=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(c);const h=this.ctx;this.pendingClip&&(d||(this.pendingClip===EO_CLIP?h.clip(e,"evenodd"):h.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=getCurrentTransform(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const c=Math.abs(e[0]*e[3]-e[2]*e[1]),d=Math.hypot(e[0],e[2]),h=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(d,h)/c}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:c,b:d,c:h,d:g}=this.ctx.getTransform();let b,_e;if(d===0&&h===0){const et=Math.abs(c),rt=Math.abs(g);if(et===rt)if(e===0)b=_e=1/et;else{const st=et*e;b=_e=st<1?1/st:1}else if(e===0)b=1/et,_e=1/rt;else{const st=et*e,$=rt*e;b=st<1?1/st:1,_e=$<1?1/$:1}}else{const et=Math.abs(c*g-d*h),rt=Math.hypot(c,d),st=Math.hypot(h,g);if(e===0)b=st/et,_e=rt/et;else{const $=e*et;b=st>$?st/$:1,_e=rt>$?rt/$:1}}this._cachedScaleForStroking[0]=b,this._cachedScaleForStroking[1]=_e}return this._cachedScaleForStroking}rescaleAndStroke(e,c){const{ctx:d,current:{lineWidth:h}}=this,[g,b]=this.getScaleForStroking();if(g===b){d.lineWidth=(h||1)*g,d.stroke(e);return}const _e=d.getLineDash();c&&d.save(),d.scale(g,b),SCALE_MATRIX.a=1/g,SCALE_MATRIX.d=1/b;const et=new Path2D;if(et.addPath(e,SCALE_MATRIX),_e.length>0){const rt=Math.max(g,b);d.setLineDash(_e.map(st=>st/rt)),d.lineDashOffset/=rt}d.lineWidth=h||1,d.stroke(et),c&&d.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};qo=new WeakSet,cE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},uE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const c=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=c}}},dE=function(e,c,d){const h=new Path2D;return h.addPath(e,new DOMMatrix(d).invertSelf().multiplySelf(c)),h};let CanvasGraphics=HE;for(const a in OPS)CanvasGraphics.prototype[a]!==void 0&&(CanvasGraphics.prototype[OPS[a]]=CanvasGraphics.prototype[a]);var Zy,Qy;class GlobalWorkerOptions{static get workerPort(){return ut(this,Zy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");At(this,Zy,e)}static get workerSrc(){return ut(this,Qy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");At(this,Qy,e)}}Zy=new WeakMap,Qy=new WeakMap,Lt(GlobalWorkerOptions,Zy,null),Lt(GlobalWorkerOptions,Qy,"");var gx,Jy;class Metadata{constructor({parsedData:e,rawData:c}){Lt(this,gx);Lt(this,Jy);At(this,gx,e),At(this,Jy,c)}getRaw(){return ut(this,Jy)}get(e){return ut(this,gx).get(e)??null}[Symbol.iterator](){return ut(this,gx).entries()}}gx=new WeakMap,Jy=new WeakMap;const INTERNAL=Symbol("INTERNAL");var _b,ev,tv,xx;class OptionalContentGroup{constructor(e,{name:c,intent:d,usage:h,rbGroups:g}){Lt(this,_b,!1);Lt(this,ev,!1);Lt(this,tv,!1);Lt(this,xx,!0);At(this,_b,!!(e&RenderingIntentFlag.DISPLAY)),At(this,ev,!!(e&RenderingIntentFlag.PRINT)),this.name=c,this.intent=d,this.usage=h,this.rbGroups=g}get visible(){if(ut(this,tv))return ut(this,xx);if(!ut(this,xx))return!1;const{print:e,view:c}=this.usage;return ut(this,_b)?(c==null?void 0:c.viewState)!=="OFF":ut(this,ev)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,c,d=!1){e!==INTERNAL&&unreachable("Internal method `_setVisible` called."),At(this,tv,d),At(this,xx,c)}}_b=new WeakMap,ev=new WeakMap,tv=new WeakMap,xx=new WeakMap;var Wu,Pr,yx,bx,nv,hE;class OptionalContentConfig{constructor(e,c=RenderingIntentFlag.DISPLAY){Lt(this,nv);Lt(this,Wu,null);Lt(this,Pr,new Map);Lt(this,yx,null);Lt(this,bx,null);if(this.renderingIntent=c,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,At(this,bx,e.order);for(const d of e.groups)ut(this,Pr).set(d.id,new OptionalContentGroup(c,d));if(e.baseState==="OFF")for(const d of ut(this,Pr).values())d._setVisible(INTERNAL,!1);for(const d of e.on)ut(this,Pr).get(d)._setVisible(INTERNAL,!0);for(const d of e.off)ut(this,Pr).get(d)._setVisible(INTERNAL,!1);At(this,yx,this.getHash())}}isVisible(e){if(ut(this,Pr).size===0)return!0;if(!e)return info("Optional content group not defined."),!0;if(e.type==="OCG")return ut(this,Pr).has(e.id)?ut(this,Pr).get(e.id).visible:(warn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return $t(this,nv,hE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const c of e.ids){if(!ut(this,Pr).has(c))return warn(`Optional content group not found: ${c}`),!0;if(ut(this,Pr).get(c).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const c of e.ids){if(!ut(this,Pr).has(c))return warn(`Optional content group not found: ${c}`),!0;if(!ut(this,Pr).get(c).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const c of e.ids){if(!ut(this,Pr).has(c))return warn(`Optional content group not found: ${c}`),!0;if(!ut(this,Pr).get(c).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const c of e.ids){if(!ut(this,Pr).has(c))return warn(`Optional content group not found: ${c}`),!0;if(ut(this,Pr).get(c).visible)return!1}return!0}return warn(`Unknown optional content policy ${e.policy}.`),!0}return warn(`Unknown group type ${e.type}.`),!0}setVisibility(e,c=!0,d=!0){var g;const h=ut(this,Pr).get(e);if(!h){warn(`Optional content group not found: ${e}`);return}if(d&&c&&h.rbGroups.length)for(const b of h.rbGroups)for(const _e of b)_e!==e&&((g=ut(this,Pr).get(_e))==null||g._setVisible(INTERNAL,!1,!0));h._setVisible(INTERNAL,!!c,!0),At(this,Wu,null)}setOCGState({state:e,preserveRB:c}){let d;for(const h of e){switch(h){case"ON":case"OFF":case"Toggle":d=h;continue}const g=ut(this,Pr).get(h);if(g)switch(d){case"ON":this.setVisibility(h,!0,c);break;case"OFF":this.setVisibility(h,!1,c);break;case"Toggle":this.setVisibility(h,!g.visible,c);break}}At(this,Wu,null)}get hasInitialVisibility(){return ut(this,yx)===null||this.getHash()===ut(this,yx)}getOrder(){return ut(this,Pr).size?ut(this,bx)?ut(this,bx).slice():[...ut(this,Pr).keys()]:null}getGroup(e){return ut(this,Pr).get(e)||null}getHash(){if(ut(this,Wu)!==null)return ut(this,Wu);const e=new MurmurHash3_64;for(const[c,d]of ut(this,Pr))e.update(`${c}:${d.visible}`);return At(this,Wu,e.hexdigest())}[Symbol.iterator](){return ut(this,Pr).entries()}}Wu=new WeakMap,Pr=new WeakMap,yx=new WeakMap,bx=new WeakMap,nv=new WeakSet,hE=function(e){const c=e.length;if(c<2)return!0;const d=e[0];for(let h=1;h<c;h++){const g=e[h];let b;if(Array.isArray(g))b=$t(this,nv,hE).call(this,g);else if(ut(this,Pr).has(g))b=ut(this,Pr).get(g).visible;else return warn(`Optional content group not found: ${g}`),!0;switch(d){case"And":if(!b)return!1;break;case"Or":if(b)return!0;break;case"Not":return!b;default:return!0}}return d==="And"};class PDFDataTransportStream{constructor(e,{disableRange:c=!1,disableStream:d=!1}){assert(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:h,initialData:g,progressiveDone:b,contentDispositionFilename:_e}=e;if(this._queuedChunks=[],this._progressiveDone=b,this._contentDispositionFilename=_e,(g==null?void 0:g.length)>0){const et=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(et)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!d,this._isRangeSupported=!c,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((et,rt)=>{this._onReceiveData({begin:et,chunk:rt})}),e.addProgressListener((et,rt)=>{this._onProgress({loaded:et,total:rt})}),e.addProgressiveReadListener(et=>{this._onReceiveData({chunk:et})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:c}){const d=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(d):this._queuedChunks.push(d);else{const h=this._rangeReaders.some(function(g){return g._begin!==e?!1:(g._enqueue(d),!0)});assert(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var c,d,h,g;e.total===void 0?(d=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||d.call(c,{loaded:e.loaded}):(g=(h=this._fullRequestReader)==null?void 0:h.onProgress)==null||g.call(h,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const c=this._rangeReaders.indexOf(e);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){assert(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new PDFDataTransportStreamReader(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,c){if(c<=this._progressiveDataLength)return null;const d=new PDFDataTransportStreamRangeReader(this,e,c);return this._pdfDataRangeTransport.requestDataRange(e,c),this._rangeReaders.push(d),d}cancelAllRequests(e){var c;(c=this._fullRequestReader)==null||c.cancel(e);for(const d of this._rangeReaders.slice(0))d.cancel(e);this._pdfDataRangeTransport.abort()}}class PDFDataTransportStreamReader{constructor(e,c,d=!1,h=null){this._stream=e,this._done=d||!1,this._filename=isPdfFile(h)?h:null,this._queuedChunks=c||[],this._loaded=0;for(const g of this._queuedChunks)this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(e,c,d){this._stream=e,this._begin=c,this._end=d,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function getFilenameFromContentDispositionHeader(a){let e=!0,c=d("filename\\*","i").exec(a);if(c){c=c[1];let st=_e(c);return st=unescape(st),st=et(st),st=rt(st),g(st)}if(c=b(a),c){const st=rt(c);return g(st)}if(c=d("filename","i").exec(a),c){c=c[1];let st=_e(c);return st=rt(st),g(st)}function d(st,$){return new RegExp("(?:^|;)\\s*"+st+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',$)}function h(st,$){if(st){if(!/^[\x00-\xFF]+$/.test($))return $;try{const _=new TextDecoder(st,{fatal:!0}),nt=stringToBytes($);$=_.decode(nt),e=!1}catch{}}return $}function g(st){return e&&/[\x80-\xff]/.test(st)&&(st=h("utf-8",st),e&&(st=h("iso-8859-1",st))),st}function b(st){const $=[];let _;const nt=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=nt.exec(st))!==null;){let[,ot,lt,at]=_;if(ot=parseInt(ot,10),ot in $){if(ot===0)break;continue}$[ot]=[lt,at]}const it=[];for(let ot=0;ot<$.length&&ot in $;++ot){let[lt,at]=$[ot];at=_e(at),lt&&(at=unescape(at),ot===0&&(at=et(at))),it.push(at)}return it.join("")}function _e(st){if(st.startsWith('"')){const $=st.slice(1).split('\\"');for(let _=0;_<$.length;++_){const nt=$[_].indexOf('"');nt!==-1&&($[_]=$[_].slice(0,nt),$.length=_+1),$[_]=$[_].replaceAll(/\\(.)/g,"$1")}st=$.join('"')}return st}function et(st){const $=st.indexOf("'");if($===-1)return st;const _=st.slice(0,$),it=st.slice($+1).replace(/^[^']*'/,"");return h(_,it)}function rt(st){return!st.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(st)?st:st.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function($,_,nt,it){if(nt==="q"||nt==="Q")return it=it.replaceAll("_"," "),it=it.replaceAll(/=([0-9a-fA-F]{2})/g,function(ot,lt){return String.fromCharCode(parseInt(lt,16))}),h(_,it);try{it=atob(it)}catch{}return h(_,it)})}return""}function createHeaders(a,e){const c=new Headers;if(!a||!e||typeof e!="object")return c;for(const d in e){const h=e[d];h!==void 0&&c.append(d,h)}return c}function getResponseOrigin(a){var e;return((e=URL.parse(a))==null?void 0:e.origin)??null}function validateRangeRequestCapabilities({responseHeaders:a,isHttp:e,rangeChunkSize:c,disableRange:d}){const h={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(a.get("Content-Length"),10);return!Number.isInteger(g)||(h.suggestedLength=g,g<=2*c)||d||!e||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(h.allowRangeRequests=!0),h}function extractFilenameFromHeader(a){const e=a.get("Content-Disposition");if(e){let c=getFilenameFromContentDispositionHeader(e);if(c.includes("%"))try{c=decodeURIComponent(c)}catch{}if(isPdfFile(c))return c}return null}function createResponseError(a,e){return new ResponseException(`Unexpected server response (${a}) while retrieving PDF "${e}".`,a,a===404||a===0&&e.startsWith("file:"))}function validateResponseStatus(a){return a===200||a===206}function createFetchOptions(a,e,c){return{method:"GET",headers:a,signal:c.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function getArrayBuffer(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(warn(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class PDFFetchStream{constructor(e){Dn(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=createHeaders(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new PDFFetchStreamReader(this),this._fullRequestReader}getRangeReader(e,c){if(c<=this._progressiveDataLength)return null;const d=new PDFFetchStreamRangeReader(this,e,c);return this._rangeRequestReaders.push(d),d}cancelAllRequests(e){var c;(c=this._fullRequestReader)==null||c.cancel(e);for(const d of this._rangeRequestReaders.slice(0))d.cancel(e)}}class PDFFetchStreamReader{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const c=e.source;this._withCredentials=c.withCredentials||!1,this._contentLength=c.length,this._headersCapability=Promise.withResolvers(),this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange;const d=new Headers(e.headers),h=c.url;fetch(h,createFetchOptions(d,this._withCredentials,this._abortController)).then(g=>{if(e._responseOrigin=getResponseOrigin(g.url),!validateResponseStatus(g.status))throw createResponseError(g.status,h);this._reader=g.body.getReader(),this._headersCapability.resolve();const b=g.headers,{allowRangeRequests:_e,suggestedLength:et}=validateRangeRequestCapabilities({responseHeaders:b,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_e,this._contentLength=et||this._contentLength,this._filename=extractFilenameFromHeader(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._headersCapability.promise;const{value:e,done:c}=await this._reader.read();return c?{value:e,done:c}:(this._loaded+=e.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:getArrayBuffer(e),done:!1})}cancel(e){var c;(c=this._reader)==null||c.cancel(e),this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(e,c,d){this._stream=e,this._reader=null,this._loaded=0;const h=e.source;this._withCredentials=h.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController;const g=new Headers(e.headers);g.append("Range",`bytes=${c}-${d-1}`);const b=h.url;fetch(b,createFetchOptions(g,this._withCredentials,this._abortController)).then(_e=>{const et=getResponseOrigin(_e.url);if(et!==e._responseOrigin)throw new Error(`Expected range response-origin "${et}" to match "${e._responseOrigin}".`);if(!validateResponseStatus(_e.status))throw createResponseError(_e.status,b);this._readCapability.resolve(),this._reader=_e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;await this._readCapability.promise;const{value:e,done:c}=await this._reader.read();return c?{value:e,done:c}:(this._loaded+=e.byteLength,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:getArrayBuffer(e),done:!1})}cancel(e){var c;(c=this._reader)==null||c.cancel(e),this._abortController.abort()}}const OK_RESPONSE=200,PARTIAL_CONTENT_RESPONSE=206;function network_getArrayBuffer(a){const e=a.response;return typeof e!="string"?e:stringToBytes(e).buffer}class NetworkManager{constructor({url:e,httpHeaders:c,withCredentials:d}){Dn(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=createHeaders(this.isHttp,c),this.withCredentials=d||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const c=new XMLHttpRequest,d=this.currXhrId++,h=this.pendingRequests[d]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const[g,b]of this.headers)c.setRequestHeader(g,b);return this.isHttp&&"begin"in e&&"end"in e?(c.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),h.expectedStatus=PARTIAL_CONTENT_RESPONSE):h.expectedStatus=OK_RESPONSE,c.responseType="arraybuffer",assert(e.onError,"Expected `onError` callback to be provided."),c.onerror=()=>{e.onError(c.status)},c.onreadystatechange=this.onStateChange.bind(this,d),c.onprogress=this.onProgress.bind(this,d),h.onHeadersReceived=e.onHeadersReceived,h.onDone=e.onDone,h.onError=e.onError,h.onProgress=e.onProgress,c.send(null),d}onProgress(e,c){var h;const d=this.pendingRequests[e];d&&((h=d.onProgress)==null||h.call(d,c))}onStateChange(e,c){const d=this.pendingRequests[e];if(!d)return;const h=d.xhr;if(h.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),h.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],h.status===0&&this.isHttp){d.onError(h.status);return}const g=h.status||OK_RESPONSE;if(!(g===OK_RESPONSE&&d.expectedStatus===PARTIAL_CONTENT_RESPONSE)&&g!==d.expectedStatus){d.onError(h.status);return}const _e=network_getArrayBuffer(h);if(g===PARTIAL_CONTENT_RESPONSE){const et=h.getResponseHeader("Content-Range"),rt=/bytes (\d+)-(\d+)\/(\d+)/.exec(et);rt?d.onDone({begin:parseInt(rt[1],10),chunk:_e}):(warn('Missing or invalid "Content-Range" header.'),d.onError(0))}else _e?d.onDone({begin:0,chunk:_e}):d.onError(h.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const c=this.pendingRequests[e].xhr;delete this.pendingRequests[e],c.abort()}}class PDFNetworkStream{constructor(e){this._source=e,this._manager=new NetworkManager(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const c=this._rangeRequestReaders.indexOf(e);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return assert(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source),this._fullRequestReader}getRangeReader(e,c){const d=new PDFNetworkStreamRangeRequestReader(this._manager,e,c);return d.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(d),d}cancelAllRequests(e){var c;(c=this._fullRequestReader)==null||c.cancel(e);for(const d of this._rangeRequestReaders.slice(0))d.cancel(e)}}class PDFNetworkStreamFullRequestReader{constructor(e,c){this._manager=e,this._url=c.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,c=this._manager.getRequestXhr(e);this._manager._responseOrigin=getResponseOrigin(c.responseURL);const d=c.getAllResponseHeaders(),h=new Headers(d?d.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(_e=>{const[et,...rt]=_e.split(": ");return[et,rt.join(": ")]}):[]),{allowRangeRequests:g,suggestedLength:b}=validateRangeRequestCapabilities({responseHeaders:h,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});g&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=extractFilenameFromHeader(h),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=createResponseError(e,this._url),this._headersCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var c;(c=this.onProgress)==null||c.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(e,c,d){this._manager=e,this._url=e.url,this._requestId=e.request({begin:c,end:d,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var c;const e=getResponseOrigin((c=this._manager.getRequestXhr(this._requestId))==null?void 0:c.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const c=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=createResponseError(e,this._url));for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var c;this.isStreamingSupported||(c=this.onProgress)==null||c.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const urlRegex=/^[a-z][a-z0-9\-+.]+:/i;function parseUrlOrPath(a){if(urlRegex.test(a))return new URL(a);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(a))}class PDFNodeStream{constructor(e){this.source=e,this.url=parseUrlOrPath(e.url),assert(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return assert(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new PDFNodeStreamFsFullReader(this),this._fullRequestReader}getRangeReader(e,c){if(c<=this._progressiveDataLength)return null;const d=new PDFNodeStreamFsRangeReader(this,e,c);return this._rangeRequestReaders.push(d),d}cancelAllRequests(e){var c;(c=this._fullRequestReader)==null||c.cancel(e);for(const d of this._rangeRequestReaders.slice(0))d.cancel(e)}}class PDFNodeStreamFsFullReader{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const c=e.source;this._contentLength=c.length,this._loaded=0,this._filename=null,this._disableRange=c.disableRange||!1,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!c.disableStream,this._isRangeSupported=!c.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const d=process.getBuiltinModule("fs");d.promises.lstat(this._url).then(h=>{this._contentLength=h.size,this._setReadableStream(d.createReadStream(this._url)),this._headersCapability.resolve()},h=>{h.code==="ENOENT"&&(h=createResponseError(0,this._url.href)),this._storedError=h,this._headersCapability.reject(h)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",c=>{this._error(c)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class PDFNodeStreamFsRangeReader{constructor(e,c,d){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const h=e.source;this._isStreamingSupported=!h.disableStream;const g=process.getBuiltinModule("fs");this._setReadableStream(g.createReadStream(this._url,{start:c,end:d-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var d;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(d=this.onProgress)==null||d.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",c=>{this._error(c)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const INITIAL_DATA=Symbol("INITIAL_DATA");var Qs,rv,pE;class PDFObjects{constructor(){Lt(this,rv);Lt(this,Qs,Object.create(null))}get(e,c=null){if(c){const h=$t(this,rv,pE).call(this,e);return h.promise.then(()=>c(h.data)),null}const d=ut(this,Qs)[e];if(!d||d.data===INITIAL_DATA)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return d.data}has(e){const c=ut(this,Qs)[e];return!!c&&c.data!==INITIAL_DATA}delete(e){const c=ut(this,Qs)[e];return!c||c.data===INITIAL_DATA?!1:(delete ut(this,Qs)[e],!0)}resolve(e,c=null){const d=$t(this,rv,pE).call(this,e);d.data=c,d.resolve()}clear(){var e;for(const c in ut(this,Qs)){const{data:d}=ut(this,Qs)[c];(e=d==null?void 0:d.bitmap)==null||e.close()}At(this,Qs,Object.create(null))}*[Symbol.iterator](){for(const e in ut(this,Qs)){const{data:c}=ut(this,Qs)[e];c!==INITIAL_DATA&&(yield[e,c])}}}Qs=new WeakMap,rv=new WeakSet,pE=function(e){var c;return(c=ut(this,Qs))[e]||(c[e]={...Promise.withResolvers(),data:INITIAL_DATA})};const MAX_TEXT_DIVS_TO_RENDER=1e5,DEFAULT_FONT_SIZE=30;var dw,qu,Hs,sv,iv,Qp,tu,ov,av,Jp,vx,Ex,Ku,wx,lv,Sx,_f,cv,uv,Yr,Tx,em,dv,Xu,Ax,vu,Xw,Yw,fE,lo,a0,mE,Zw,Qw;let TextLayer$1=(Yr=class{constructor({textContentSource:e,container:c,viewport:d}){Lt(this,vu);Lt(this,qu,Promise.withResolvers());Lt(this,Hs,null);Lt(this,sv,!1);Lt(this,iv,!!((dw=globalThis.FontInspector)!=null&&dw.enabled));Lt(this,Qp,null);Lt(this,tu,null);Lt(this,ov,0);Lt(this,av,0);Lt(this,Jp,null);Lt(this,vx,null);Lt(this,Ex,0);Lt(this,Ku,0);Lt(this,wx,Object.create(null));Lt(this,lv,[]);Lt(this,Sx,null);Lt(this,_f,[]);Lt(this,cv,new WeakMap);Lt(this,uv,null);var et;if(e instanceof ReadableStream)At(this,Sx,e);else if(typeof e=="object")At(this,Sx,new ReadableStream({start(rt){rt.enqueue(e),rt.close()}}));else throw new Error('No "textContentSource" parameter specified.');At(this,Hs,At(this,vx,c)),At(this,Ku,d.scale*OutputScale.pixelRatio),At(this,Ex,d.rotation),At(this,tu,{div:null,properties:null,ctx:null});const{pageWidth:h,pageHeight:g,pageX:b,pageY:_e}=d.rawDims;At(this,uv,[1,0,0,-1,-b,_e+g]),At(this,av,h),At(this,ov,g),$t(et=Yr,lo,Zw).call(et),setLayerDimensions(c,d),ut(this,qu).promise.finally(()=>{ut(Yr,Ax).delete(this),At(this,tu,null),At(this,wx,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:c}=util_FeatureTest.platform;return shadow(this,"fontFamilyMap",new Map([["sans-serif",`${e&&c?"Calibri, ":""}sans-serif`],["monospace",`${e&&c?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{ut(this,Jp).read().then(({value:c,done:d})=>{if(d){ut(this,qu).resolve();return}ut(this,Qp)??At(this,Qp,c.lang),Object.assign(ut(this,wx),c.styles),$t(this,vu,Xw).call(this,c.items),e()},ut(this,qu).reject)};return At(this,Jp,ut(this,Sx).getReader()),ut(Yr,Ax).add(this),e(),ut(this,qu).promise}update({viewport:e,onBefore:c=null}){var g;const d=e.scale*OutputScale.pixelRatio,h=e.rotation;if(h!==ut(this,Ex)&&(c==null||c(),At(this,Ex,h),setLayerDimensions(ut(this,vx),{rotation:h})),d!==ut(this,Ku)){c==null||c(),At(this,Ku,d);const b={div:null,properties:null,ctx:$t(g=Yr,lo,a0).call(g,ut(this,Qp))};for(const _e of ut(this,_f))b.properties=ut(this,cv).get(_e),b.div=_e,$t(this,vu,fE).call(this,b)}}cancel(){var c;const e=new AbortException("TextLayer task cancelled.");(c=ut(this,Jp))==null||c.cancel(e).catch(()=>{}),At(this,Jp,null),ut(this,qu).reject(e)}get textDivs(){return ut(this,_f)}get textContentItemsStr(){return ut(this,lv)}static cleanup(){if(!(ut(this,Ax).size>0)){ut(this,Tx).clear();for(const{canvas:e}of ut(this,em).values())e.remove();ut(this,em).clear()}}},qu=new WeakMap,Hs=new WeakMap,sv=new WeakMap,iv=new WeakMap,Qp=new WeakMap,tu=new WeakMap,ov=new WeakMap,av=new WeakMap,Jp=new WeakMap,vx=new WeakMap,Ex=new WeakMap,Ku=new WeakMap,wx=new WeakMap,lv=new WeakMap,Sx=new WeakMap,_f=new WeakMap,cv=new WeakMap,uv=new WeakMap,Tx=new WeakMap,em=new WeakMap,dv=new WeakMap,Xu=new WeakMap,Ax=new WeakMap,vu=new WeakSet,Xw=function(e){var h,g;if(ut(this,sv))return;(g=ut(this,tu)).ctx??(g.ctx=$t(h=Yr,lo,a0).call(h,ut(this,Qp)));const c=ut(this,_f),d=ut(this,lv);for(const b of e){if(c.length>MAX_TEXT_DIVS_TO_RENDER){warn("Ignoring additional textDivs for performance reasons."),At(this,sv,!0);return}if(b.str===void 0){if(b.type==="beginMarkedContentProps"||b.type==="beginMarkedContent"){const _e=ut(this,Hs);At(this,Hs,document.createElement("span")),ut(this,Hs).classList.add("markedContent"),b.id!==null&&ut(this,Hs).setAttribute("id",`${b.id}`),_e.append(ut(this,Hs))}else b.type==="endMarkedContent"&&At(this,Hs,ut(this,Hs).parentNode);continue}d.push(b.str),$t(this,vu,Yw).call(this,b)}},Yw=function(e){var ot;const c=document.createElement("span"),d={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};ut(this,_f).push(c);const h=Util.transform(ut(this,uv),e.transform);let g=Math.atan2(h[1],h[0]);const b=ut(this,wx)[e.fontName];b.vertical&&(g+=Math.PI/2);let _e=ut(this,iv)&&b.fontSubstitution||b.fontFamily;_e=Yr.fontFamilyMap.get(_e)||_e;const et=Math.hypot(h[2],h[3]),rt=et*$t(ot=Yr,lo,Qw).call(ot,_e,b,ut(this,Qp));let st,$;g===0?(st=h[4],$=h[5]-rt):(st=h[4]+rt*Math.sin(g),$=h[5]-rt*Math.cos(g));const _="calc(var(--total-scale-factor) *",nt=c.style;ut(this,Hs)===ut(this,vx)?(nt.left=`${(100*st/ut(this,av)).toFixed(2)}%`,nt.top=`${(100*$/ut(this,ov)).toFixed(2)}%`):(nt.left=`${_}${st.toFixed(2)}px)`,nt.top=`${_}${$.toFixed(2)}px)`),nt.fontSize=`${_}${(ut(Yr,Xu)*et).toFixed(2)}px)`,nt.fontFamily=_e,d.fontSize=et,c.setAttribute("role","presentation"),c.textContent=e.str,c.dir=e.dir,ut(this,iv)&&(c.dataset.fontName=b.fontSubstitutionLoadedName||e.fontName),g!==0&&(d.angle=g*(180/Math.PI));let it=!1;if(e.str.length>1)it=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const lt=Math.abs(e.transform[0]),at=Math.abs(e.transform[3]);lt!==at&&Math.max(lt,at)/Math.min(lt,at)>1.5&&(it=!0)}if(it&&(d.canvasWidth=b.vertical?e.height:e.width),ut(this,cv).set(c,d),ut(this,tu).div=c,ut(this,tu).properties=d,$t(this,vu,fE).call(this,ut(this,tu)),d.hasText&&ut(this,Hs).append(c),d.hasEOL){const lt=document.createElement("br");lt.setAttribute("role","presentation"),ut(this,Hs).append(lt)}},fE=function(e){var _e;const{div:c,properties:d,ctx:h}=e,{style:g}=c;let b="";if(ut(Yr,Xu)>1&&(b=`scale(${1/ut(Yr,Xu)})`),d.canvasWidth!==0&&d.hasText){const{fontFamily:et}=g,{canvasWidth:rt,fontSize:st}=d;$t(_e=Yr,lo,mE).call(_e,h,st*ut(this,Ku),et);const{width:$}=h.measureText(c.textContent);$>0&&(b=`scaleX(${rt*ut(this,Ku)/$}) ${b}`)}d.angle!==0&&(b=`rotate(${d.angle}deg) ${b}`),b.length>0&&(g.transform=b)},lo=new WeakSet,a0=function(e=null){let c=ut(this,em).get(e||(e=""));if(!c){const d=document.createElement("canvas");d.className="hiddenCanvasElement",d.lang=e,document.body.append(d),c=d.getContext("2d",{alpha:!1,willReadFrequently:!0}),ut(this,em).set(e,c),ut(this,dv).set(c,{size:0,family:""})}return c},mE=function(e,c,d){const h=ut(this,dv).get(e);c===h.size&&d===h.family||(e.font=`${c}px ${d}`,h.size=c,h.family=d)},Zw=function(){if(ut(this,Xu)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),At(this,Xu,e.getBoundingClientRect().height),e.remove()},Qw=function(e,c,d){const h=ut(this,Tx).get(e);if(h)return h;const g=$t(this,lo,a0).call(this,d);g.canvas.width=g.canvas.height=DEFAULT_FONT_SIZE,$t(this,lo,mE).call(this,g,DEFAULT_FONT_SIZE,e);const b=g.measureText(""),_e=b.fontBoundingBoxAscent,et=Math.abs(b.fontBoundingBoxDescent);g.canvas.width=g.canvas.height=0;let rt=.8;return _e?rt=_e/(_e+et):(util_FeatureTest.platform.isFirefox&&warn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),c.ascent?rt=c.ascent:c.descent&&(rt=1+c.descent)),ut(this,Tx).set(e,rt),rt},Lt(Yr,lo),Lt(Yr,Tx,new Map),Lt(Yr,em,new Map),Lt(Yr,dv,new WeakMap),Lt(Yr,Xu,null),Lt(Yr,Ax,new Set),Yr);class XfaText{static textContent(e){const c=[],d={items:c,styles:Object.create(null)};function h(g){var et;if(!g)return;let b=null;const _e=g.name;if(_e==="#text")b=g.value;else if(XfaText.shouldBuildText(_e))(et=g==null?void 0:g.attributes)!=null&&et.textContent?b=g.attributes.textContent:g.value&&(b=g.value);else return;if(b!==null&&c.push({str:b}),!!g.children)for(const rt of g.children)h(rt)}return h(e),d}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const RENDERING_CANCELLED_TIMEOUT=100;function getDocument(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const e=new PDFDocumentLoadingTask,{docId:c}=e,d=a.url?getUrlProp(a.url):null,h=a.data?getDataProp(a.data):null,g=a.httpHeaders||null,b=a.withCredentials===!0,_e=a.password??null,et=a.range instanceof PDFDataRangeTransport$1?a.range:null,rt=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let st=a.worker instanceof PDFWorker?a.worker:null;const $=a.verbosity,_=typeof a.docBaseUrl=="string"&&!isDataScheme(a.docBaseUrl)?a.docBaseUrl:null,nt=getFactoryUrlProp(a.cMapUrl),it=a.cMapPacked!==!1,ot=a.CMapReaderFactory||(isNodeJS?NodeCMapReaderFactory:DOMCMapReaderFactory),lt=getFactoryUrlProp(a.iccUrl),at=getFactoryUrlProp(a.standardFontDataUrl),ct=a.StandardFontDataFactory||(isNodeJS?NodeStandardFontDataFactory:DOMStandardFontDataFactory),dt=getFactoryUrlProp(a.wasmUrl),ht=a.WasmFactory||(isNodeJS?NodeWasmFactory:DOMWasmFactory),pt=a.stopAtErrors!==!0,ft=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,mt=a.isEvalSupported!==!1,xt=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!isNodeJS,gt=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!isNodeJS&&(util_FeatureTest.platform.isFirefox||!globalThis.chrome),Et=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,St=typeof a.disableFontFace=="boolean"?a.disableFontFace:isNodeJS,Pt=a.fontExtraProperties===!0,Mt=a.enableXfa===!0,Rt=a.ownerDocument||globalThis.document,Dt=a.disableRange===!0,Tt=a.disableStream===!0,It=a.disableAutoFetch===!0,Vt=a.pdfBug===!0,Bt=a.CanvasFactory||(isNodeJS?NodeCanvasFactory:DOMCanvasFactory),Ct=a.FilterFactory||(isNodeJS?NodeFilterFactory:DOMFilterFactory),en=a.enableHWA===!0,sn=a.useWasm!==!1,kt=et?et.length:a.length??NaN,Ut=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!isNodeJS&&!St,Jt=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(ot===DOMCMapReaderFactory&&ct===DOMStandardFontDataFactory&&ht===DOMWasmFactory&&nt&&at&&dt&&isValidFetchUrl(nt,document.baseURI)&&isValidFetchUrl(at,document.baseURI)&&isValidFetchUrl(dt,document.baseURI)),tn=null;setVerbosityLevel($);const Gt={canvasFactory:new Bt({ownerDocument:Rt,enableHWA:en}),filterFactory:new Ct({docId:c,ownerDocument:Rt}),cMapReaderFactory:Jt?null:new ot({baseUrl:nt,isCompressed:it}),standardFontDataFactory:Jt?null:new ct({baseUrl:at}),wasmFactory:Jt?null:new ht({baseUrl:dt})};st||(st=PDFWorker.create({verbosity:$,port:GlobalWorkerOptions.workerPort}),e._worker=st);const hn={docId:c,apiVersion:"5.3.31",data:h,password:_e,disableAutoFetch:It,rangeChunkSize:rt,length:kt,docBaseUrl:_,enableXfa:Mt,evaluatorOptions:{maxImageSize:ft,disableFontFace:St,ignoreErrors:pt,isEvalSupported:mt,isOffscreenCanvasSupported:xt,isImageDecoderSupported:gt,canvasMaxAreaInBytes:Et,fontExtraProperties:Pt,useSystemFonts:Ut,useWasm:sn,useWorkerFetch:Jt,cMapUrl:nt,iccUrl:lt,standardFontDataUrl:at,wasmUrl:dt}},fn={ownerDocument:Rt,pdfBug:Vt,styleElement:tn,loadingParams:{disableAutoFetch:It,enableXfa:Mt}};return st.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(st.destroyed)throw new Error("Worker was destroyed");const gn=st.messageHandler.sendWithPromise("GetDocRequest",hn,h?[h.buffer]:null);let kn;if(et)kn=new PDFDataTransportStream(et,{disableRange:Dt,disableStream:Tt});else if(!h){if(!d)throw new Error("getDocument - no `url` parameter provided.");const On=isValidFetchUrl(d)?PDFFetchStream:isNodeJS?PDFNodeStream:PDFNetworkStream;kn=new On({url:d,length:kt,httpHeaders:g,withCredentials:b,rangeChunkSize:rt,disableRange:Dt,disableStream:Tt})}return gn.then(On=>{if(e.destroyed)throw new Error("Loading aborted");if(st.destroyed)throw new Error("Worker was destroyed");const un=new MessageHandler(c,On,st.port),Sn=new WorkerTransport(un,e,kn,fn,Gt);e._transport=Sn,un.send("Ready",null)})}).catch(e._capability.reject),e}var M0;const L0=class L0{constructor(){Dn(this,"_capability",Promise.withResolvers());Dn(this,"_transport",null);Dn(this,"_worker",null);Dn(this,"docId",`d${as(L0,M0)._++}`);Dn(this,"destroyed",!1);Dn(this,"onPassword",null);Dn(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,c,d,h;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((c=this._transport)==null?void 0:c.destroy())}catch(g){throw(d=this._worker)!=null&&d.port&&delete this._worker._pendingDestroy,g}this._transport=null,(h=this._worker)==null||h.destroy(),this._worker=null}async getData(){return this._transport.getData()}};M0=new WeakMap,Lt(L0,M0,0);let PDFDocumentLoadingTask=L0;var tm,hv,pv,fv,mv,hw;let PDFDataRangeTransport$1=(hw=class{constructor(e,c,d=!1,h=null){Lt(this,tm,Promise.withResolvers());Lt(this,hv,[]);Lt(this,pv,[]);Lt(this,fv,[]);Lt(this,mv,[]);this.length=e,this.initialData=c,this.progressiveDone=d,this.contentDispositionFilename=h}addRangeListener(e){ut(this,mv).push(e)}addProgressListener(e){ut(this,fv).push(e)}addProgressiveReadListener(e){ut(this,pv).push(e)}addProgressiveDoneListener(e){ut(this,hv).push(e)}onDataRange(e,c){for(const d of ut(this,mv))d(e,c)}onDataProgress(e,c){ut(this,tm).promise.then(()=>{for(const d of ut(this,fv))d(e,c)})}onDataProgressiveRead(e){ut(this,tm).promise.then(()=>{for(const c of ut(this,pv))c(e)})}onDataProgressiveDone(){ut(this,tm).promise.then(()=>{for(const e of ut(this,hv))e()})}transportReady(){ut(this,tm).resolve()}requestDataRange(e,c){unreachable("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},tm=new WeakMap,hv=new WeakMap,pv=new WeakMap,fv=new WeakMap,mv=new WeakMap,hw);class PDFDocumentProxy{constructor(e,c){this._pdfInfo=e,this._transport=c}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:c}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(c)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var nu,nm,fy;class PDFPageProxy{constructor(e,c,d,h=!1){Lt(this,nm);Lt(this,nu,!1);this._pageIndex=e,this._pageInfo=c,this._transport=d,this._stats=h?new StatTimer:null,this._pdfBug=h,this.commonObjs=d.commonObjs,this.objs=new PDFObjects,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:c=this.rotate,offsetX:d=0,offsetY:h=0,dontFlip:g=!1}={}){return new PageViewport({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:c,offsetX:d,offsetY:h,dontFlip:g})}getAnnotations({intent:e="display"}={}){const{renderingIntent:c}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,c)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return shadow(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:c,intent:d="display",annotationMode:h=AnnotationMode.ENABLE,transform:g=null,background:b=null,optionalContentConfigPromise:_e=null,annotationCanvasMap:et=null,pageColors:rt=null,printAnnotationStorage:st=null,isEditing:$=!1}){var ht,pt;(ht=this._stats)==null||ht.time("Overall");const _=this._transport.getRenderingIntent(d,h,st,$),{renderingIntent:nt,cacheKey:it}=_;At(this,nu,!1),_e||(_e=this._transport.getOptionalContentConfig(nt));let ot=this._intentStates.get(it);ot||(ot=Object.create(null),this._intentStates.set(it,ot)),ot.streamReaderCancelTimeout&&(clearTimeout(ot.streamReaderCancelTimeout),ot.streamReaderCancelTimeout=null);const lt=!!(nt&RenderingIntentFlag.PRINT);ot.displayReadyCapability||(ot.displayReadyCapability=Promise.withResolvers(),ot.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(pt=this._stats)==null||pt.time("Page Request"),this._pumpOperatorList(_));const at=ft=>{var mt;ot.renderTasks.delete(ct),lt&&At(this,nu,!0),$t(this,nm,fy).call(this),ft?(ct.capability.reject(ft),this._abortOperatorList({intentState:ot,reason:ft instanceof Error?ft:new Error(ft)})):ct.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(mt=globalThis.Stats)!=null&&mt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},ct=new InternalRenderTask({callback:at,params:{canvasContext:e,viewport:c,transform:g,background:b},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:et,operatorList:ot.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!lt,pdfBug:this._pdfBug,pageColors:rt});(ot.renderTasks||(ot.renderTasks=new Set)).add(ct);const dt=ct.task;return Promise.all([ot.displayReadyCapability.promise,_e]).then(([ft,mt])=>{var xt;if(this.destroyed){at();return}if((xt=this._stats)==null||xt.time("Rendering"),!(mt.renderingIntent&nt))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");ct.initializeGraphics({transparency:ft,optionalContentConfig:mt}),ct.operatorListChanged()}).catch(at),dt}getOperatorList({intent:e="display",annotationMode:c=AnnotationMode.ENABLE,printAnnotationStorage:d=null,isEditing:h=!1}={}){var rt;function g(){_e.operatorList.lastChunk&&(_e.opListReadCapability.resolve(_e.operatorList),_e.renderTasks.delete(et))}const b=this._transport.getRenderingIntent(e,c,d,h,!0);let _e=this._intentStates.get(b.cacheKey);_e||(_e=Object.create(null),this._intentStates.set(b.cacheKey,_e));let et;return _e.opListReadCapability||(et=Object.create(null),et.operatorListChanged=g,_e.opListReadCapability=Promise.withResolvers(),(_e.renderTasks||(_e.renderTasks=new Set)).add(et),_e.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList(b)),_e.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:c=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:c===!0},{highWaterMark:100,size(h){return h.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(d=>XfaText.textContent(d));const c=this.streamTextContent(e);return new Promise(function(d,h){function g(){b.read().then(function({value:et,done:rt}){if(rt){d(_e);return}_e.lang??(_e.lang=et.lang),Object.assign(_e.styles,et.styles),_e.items.push(...et.items),g()},h)}const b=c.getReader(),_e={items:[],styles:Object.create(null),lang:null};g()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const c of this._intentStates.values())if(this._abortOperatorList({intentState:c,reason:new Error("Page was destroyed."),force:!0}),!c.opListReadCapability)for(const d of c.renderTasks)e.push(d.completed),d.cancel();return this.objs.clear(),At(this,nu,!1),Promise.all(e)}cleanup(e=!1){At(this,nu,!0);const c=$t(this,nm,fy).call(this);return e&&c&&this._stats&&(this._stats=new StatTimer),c}_startRenderPage(e,c){var h,g;const d=this._intentStates.get(c);d&&((h=this._stats)==null||h.timeEnd("Page Request"),(g=d.displayReadyCapability)==null||g.resolve(e))}_renderPageChunk(e,c){for(let d=0,h=e.length;d<h;d++)c.operatorList.fnArray.push(e.fnArray[d]),c.operatorList.argsArray.push(e.argsArray[d]);c.operatorList.lastChunk=e.lastChunk,c.operatorList.separateAnnots=e.separateAnnots;for(const d of c.renderTasks)d.operatorListChanged();e.lastChunk&&$t(this,nm,fy).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:c,annotationStorageSerializable:d,modifiedIds:h}){const{map:g,transfer:b}=d,et=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:c,annotationStorage:g,modifiedIds:h},b).getReader(),rt=this._intentStates.get(c);rt.streamReader=et;const st=()=>{et.read().then(({value:$,done:_})=>{if(_){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk($,rt),st())},$=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const _ of rt.renderTasks)_.operatorListChanged();$t(this,nm,fy).call(this)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject($);else if(rt.opListReadCapability)rt.opListReadCapability.reject($);else throw $}})};st()}_abortOperatorList({intentState:e,reason:c,force:d=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!d){if(e.renderTasks.size>0)return;if(c instanceof RenderingCancelledException){let h=RENDERING_CANCELLED_TIMEOUT;c.extraDelay>0&&c.extraDelay<1e3&&(h+=c.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:c,force:!0})},h);return}}if(e.streamReader.cancel(new AbortException(c.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[h,g]of this._intentStates)if(g===e){this._intentStates.delete(h);break}this.cleanup()}}}get stats(){return this._stats}}nu=new WeakMap,nm=new WeakSet,fy=function(){if(!ut(this,nu)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:c}of this._intentStates.values())if(e.size>0||!c.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),At(this,nu,!1),!0};var Yu,Mo,ru,rm,$0,sm,im,Ls,l0,Jw,e1,my,_x,c0;const Fr=class Fr{constructor({name:e=null,port:c=null,verbosity:d=getVerbosityLevel()}={}){Lt(this,Ls);Lt(this,Yu,Promise.withResolvers());Lt(this,Mo,null);Lt(this,ru,null);Lt(this,rm,null);if(this.name=e,this.destroyed=!1,this.verbosity=d,c){if(ut(Fr,im).has(c))throw new Error("Cannot use more than one PDFWorker per port.");ut(Fr,im).set(c,this),$t(this,Ls,Jw).call(this,c)}else $t(this,Ls,e1).call(this)}get promise(){return ut(this,Yu).promise}get port(){return ut(this,ru)}get messageHandler(){return ut(this,Mo)}destroy(){var e,c;this.destroyed=!0,(e=ut(this,rm))==null||e.terminate(),At(this,rm,null),ut(Fr,im).delete(ut(this,ru)),At(this,ru,null),(c=ut(this,Mo))==null||c.destroy(),At(this,Mo,null)}static create(e){const c=ut(this,im).get(e==null?void 0:e.port);if(c){if(c._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return c}return new Fr(e)}static get workerSrc(){if(GlobalWorkerOptions.workerSrc)return GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return shadow(this,"_setupFakeWorkerGlobal",(async()=>ut(this,_x,c0)?ut(this,_x,c0):(await import(this.workerSrc)).WorkerMessageHandler)())}};Yu=new WeakMap,Mo=new WeakMap,ru=new WeakMap,rm=new WeakMap,$0=new WeakMap,sm=new WeakMap,im=new WeakMap,Ls=new WeakSet,l0=function(){ut(this,Yu).resolve(),ut(this,Mo).send("configure",{verbosity:this.verbosity})},Jw=function(e){At(this,ru,e),At(this,Mo,new MessageHandler("main","worker",e)),ut(this,Mo).on("ready",()=>{}),$t(this,Ls,l0).call(this)},e1=function(){if(ut(Fr,sm)||ut(Fr,_x,c0)){$t(this,Ls,my).call(this);return}let{workerSrc:e}=Fr;try{Fr._isSameOrigin(window.location,e)||(e=Fr._createCDNWrapper(new URL(e,window.location).href));const c=new Worker(e,{type:"module"}),d=new MessageHandler("main","worker",c),h=()=>{g.abort(),d.destroy(),c.terminate(),this.destroyed?ut(this,Yu).reject(new Error("Worker was destroyed")):$t(this,Ls,my).call(this)},g=new AbortController;c.addEventListener("error",()=>{ut(this,rm)||h()},{signal:g.signal}),d.on("test",_e=>{if(g.abort(),this.destroyed||!_e){h();return}At(this,Mo,d),At(this,ru,c),At(this,rm,c),$t(this,Ls,l0).call(this)}),d.on("ready",_e=>{if(g.abort(),this.destroyed){h();return}try{b()}catch{$t(this,Ls,my).call(this)}});const b=()=>{const _e=new Uint8Array;d.send("test",_e,[_e.buffer])};b();return}catch{info("The worker has been disabled.")}$t(this,Ls,my).call(this)},my=function(){ut(Fr,sm)||(warn("Setting up fake worker."),At(Fr,sm,!0)),Fr._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){ut(this,Yu).reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;At(this,ru,c);const d=`fake${as(Fr,$0)._++}`,h=new MessageHandler(d+"_worker",d,c);e.setup(h,c),At(this,Mo,new MessageHandler(d,d+"_worker",c)),$t(this,Ls,l0).call(this)}).catch(e=>{ut(this,Yu).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},_x=new WeakSet,c0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},Lt(Fr,_x),Lt(Fr,$0,0),Lt(Fr,sm,!1),Lt(Fr,im,new WeakMap),isNodeJS&&(At(Fr,sm,!0),GlobalWorkerOptions.workerSrc||(GlobalWorkerOptions.workerSrc="./pdf.worker.mjs")),Fr._isSameOrigin=(e,c)=>{const d=URL.parse(e);if(!(d!=null&&d.origin)||d.origin==="null")return!1;const h=new URL(c,d);return d.origin===h.origin},Fr._createCDNWrapper=e=>{const c=`await import("${e}");`;return URL.createObjectURL(new Blob([c],{type:"text/javascript"}))},Fr.fromPort=e=>{if(deprecated("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Fr.create(e)};let PDFWorker=Fr;var su,Sl,Rx,Cx,iu,om,gy;class WorkerTransport{constructor(e,c,d,h,g){Lt(this,om);Lt(this,su,new Map);Lt(this,Sl,new Map);Lt(this,Rx,new Map);Lt(this,Cx,new Map);Lt(this,iu,null);this.messageHandler=e,this.loadingTask=c,this.commonObjs=new PDFObjects,this.fontLoader=new FontLoader({ownerDocument:h.ownerDocument,styleElement:h.styleElement}),this.loadingParams=h.loadingParams,this._params=h,this.canvasFactory=g.canvasFactory,this.filterFactory=g.filterFactory,this.cMapReaderFactory=g.cMapReaderFactory,this.standardFontDataFactory=g.standardFontDataFactory,this.wasmFactory=g.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=d,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return shadow(this,"annotationStorage",new AnnotationStorage)}getRenderingIntent(e,c=AnnotationMode.ENABLE,d=null,h=!1,g=!1){let b=RenderingIntentFlag.DISPLAY,_e=SerializableEmpty;switch(e){case"any":b=RenderingIntentFlag.ANY;break;case"display":break;case"print":b=RenderingIntentFlag.PRINT;break;default:warn(`getRenderingIntent - invalid intent: ${e}`)}const et=b&RenderingIntentFlag.PRINT&&d instanceof PrintAnnotationStorage?d:this.annotationStorage;switch(c){case AnnotationMode.DISABLE:b+=RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case AnnotationMode.ENABLE:break;case AnnotationMode.ENABLE_FORMS:b+=RenderingIntentFlag.ANNOTATIONS_FORMS;break;case AnnotationMode.ENABLE_STORAGE:b+=RenderingIntentFlag.ANNOTATIONS_STORAGE,_e=et.serializable;break;default:warn(`getRenderingIntent - invalid annotationMode: ${c}`)}h&&(b+=RenderingIntentFlag.IS_EDITING),g&&(b+=RenderingIntentFlag.OPLIST);const{ids:rt,hash:st}=et.modifiedIds,$=[b,_e.hash,st];return{renderingIntent:b,cacheKey:$.join("_"),annotationStorageSerializable:_e,modifiedIds:rt}}destroy(){var d;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(d=ut(this,iu))==null||d.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const h of ut(this,Sl).values())e.push(h._destroy());ut(this,Sl).clear(),ut(this,Rx).clear(),ut(this,Cx).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const c=this.messageHandler.sendWithPromise("Terminate",null);return e.push(c),Promise.all(e).then(()=>{var h,g;this.commonObjs.clear(),this.fontLoader.clear(),ut(this,su).clear(),this.filterFactory.destroy(),TextLayer$1.cleanup(),(h=this._networkStream)==null||h.cancelAllRequests(new AbortException("Worker was terminated.")),(g=this.messageHandler)==null||g.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:c}=this;e.on("GetReader",(d,h)=>{assert(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=g=>{this._lastProgress={loaded:g.loaded,total:g.total}},h.onPull=()=>{this._fullReader.read().then(function({value:g,done:b}){if(b){h.close();return}assert(g instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(g),1,[g])}).catch(g=>{h.error(g)})},h.onCancel=g=>{this._fullReader.cancel(g),h.ready.catch(b=>{if(!this.destroyed)throw b})}}),e.on("ReaderHeadersReady",async d=>{var _e;await this._fullReader.headersReady;const{isStreamingSupported:h,isRangeSupported:g,contentLength:b}=this._fullReader;return(!h||!g)&&(this._lastProgress&&((_e=c.onProgress)==null||_e.call(c,this._lastProgress)),this._fullReader.onProgress=et=>{var rt;(rt=c.onProgress)==null||rt.call(c,{loaded:et.loaded,total:et.total})}),{isStreamingSupported:h,isRangeSupported:g,contentLength:b}}),e.on("GetRangeReader",(d,h)=>{assert(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const g=this._networkStream.getRangeReader(d.begin,d.end);if(!g){h.close();return}h.onPull=()=>{g.read().then(function({value:b,done:_e}){if(_e){h.close();return}assert(b instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(b),1,[b])}).catch(b=>{h.error(b)})},h.onCancel=b=>{g.cancel(b),h.ready.catch(_e=>{if(!this.destroyed)throw _e})}}),e.on("GetDoc",({pdfInfo:d})=>{this._numPages=d.numPages,this._htmlForXfa=d.htmlForXfa,delete d.htmlForXfa,c._capability.resolve(new PDFDocumentProxy(d,this))}),e.on("DocException",d=>{c._capability.reject(wrapReason(d))}),e.on("PasswordRequest",d=>{At(this,iu,Promise.withResolvers());try{if(!c.onPassword)throw wrapReason(d);const h=g=>{g instanceof Error?ut(this,iu).reject(g):ut(this,iu).resolve({password:g})};c.onPassword(h,d.code)}catch(h){ut(this,iu).reject(h)}return ut(this,iu).promise}),e.on("DataLoaded",d=>{var h;(h=c.onProgress)==null||h.call(c,{loaded:d.length,total:d.length}),this.downloadInfoCapability.resolve(d)}),e.on("StartRenderPage",d=>{if(this.destroyed)return;ut(this,Sl).get(d.pageIndex)._startRenderPage(d.transparency,d.cacheKey)}),e.on("commonobj",([d,h,g])=>{var b;if(this.destroyed||this.commonObjs.has(d))return null;switch(h){case"Font":if("error"in g){const st=g.error;warn(`Error during font loading: ${st}`),this.commonObjs.resolve(d,st);break}const _e=this._params.pdfBug&&((b=globalThis.FontInspector)!=null&&b.enabled)?(st,$)=>globalThis.FontInspector.fontAdded(st,$):null,et=new FontFaceObject(g,_e);this.fontLoader.bind(et).catch(()=>e.sendWithPromise("FontFallback",{id:d})).finally(()=>{!et.fontExtraProperties&&et.data&&(et.data=null),this.commonObjs.resolve(d,et)});break;case"CopyLocalImage":const{imageRef:rt}=g;assert(rt,"The imageRef must be defined.");for(const st of ut(this,Sl).values())for(const[,$]of st.objs)if(($==null?void 0:$.ref)===rt)return $.dataLen?(this.commonObjs.resolve(d,structuredClone($)),$.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(d,g);break;default:throw new Error(`Got unknown common object type ${h}`)}return null}),e.on("obj",([d,h,g,b])=>{var et;if(this.destroyed)return;const _e=ut(this,Sl).get(h);if(!_e.objs.has(d)){if(_e._intentStates.size===0){(et=b==null?void 0:b.bitmap)==null||et.close();return}switch(g){case"Image":case"Pattern":_e.objs.resolve(d,b);break;default:throw new Error(`Got unknown object type ${g}`)}}}),e.on("DocProgress",d=>{var h;this.destroyed||(h=c.onProgress)==null||h.call(c,{loaded:d.loaded,total:d.total})}),e.on("FetchBinaryData",async d=>{if(this.destroyed)throw new Error("Worker was destroyed.");const h=this[d.type];if(!h)throw new Error(`${d.type} not initialized, see the \`useWorkerFetch\` parameter.`);return h.fetch(d)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var d;this.annotationStorage.size<=0&&warn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:c}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((d=this._fullReader)==null?void 0:d.filename)??null},c).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const c=e-1,d=ut(this,Rx).get(c);if(d)return d;const h=this.messageHandler.sendWithPromise("GetPage",{pageIndex:c}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");g.refStr&&ut(this,Cx).set(g.refStr,e);const b=new PDFPageProxy(c,g,this,this._params.pdfBug);return ut(this,Sl).set(c,b),b});return ut(this,Rx).set(c,h),h}getPageIndex(e){return isRefProxy(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,c){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:c})}getFieldObjects(){return $t(this,om,gy).call(this,"GetFieldObjects")}hasJSActions(){return $t(this,om,gy).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return $t(this,om,gy).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return $t(this,om,gy).call(this,"GetOptionalContentConfig").then(c=>new OptionalContentConfig(c,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",c=ut(this,su).get(e);if(c)return c;const d=this.messageHandler.sendWithPromise(e,null).then(h=>{var g,b;return{info:h[0],metadata:h[1]?new Metadata(h[1]):null,contentDispositionFilename:((g=this._fullReader)==null?void 0:g.filename)??null,contentLength:((b=this._fullReader)==null?void 0:b.contentLength)??null}});return ut(this,su).set(e,d),d}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const c of ut(this,Sl).values())if(!c.cleanup())throw new Error(`startCleanup: Page ${c.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),ut(this,su).clear(),this.filterFactory.destroy(!0),TextLayer$1.cleanup()}}cachedPageNumber(e){if(!isRefProxy(e))return null;const c=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return ut(this,Cx).get(c)??null}}su=new WeakMap,Sl=new WeakMap,Rx=new WeakMap,Cx=new WeakMap,iu=new WeakMap,om=new WeakSet,gy=function(e,c=null){const d=ut(this,su).get(e);if(d)return d;const h=this.messageHandler.sendWithPromise(e,c);return ut(this,su).set(e,h),h};var Zu;class RenderTask{constructor(e){Lt(this,Zu,null);Dn(this,"onContinue",null);Dn(this,"onError",null);At(this,Zu,e)}get promise(){return ut(this,Zu).capability.promise}cancel(e=0){ut(this,Zu).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=ut(this,Zu).operatorList;if(!e)return!1;const{annotationCanvasMap:c}=ut(this,Zu);return e.form||e.canvas&&(c==null?void 0:c.size)>0}}Zu=new WeakMap;var Qu,am;const wp=class wp{constructor({callback:e,params:c,objs:d,commonObjs:h,annotationCanvasMap:g,operatorList:b,pageIndex:_e,canvasFactory:et,filterFactory:rt,useRequestAnimationFrame:st=!1,pdfBug:$=!1,pageColors:_=null}){Lt(this,Qu,null);this.callback=e,this.params=c,this.objs=d,this.commonObjs=h,this.annotationCanvasMap=g,this.operatorListIdx=null,this.operatorList=b,this._pageIndex=_e,this.canvasFactory=et,this.filterFactory=rt,this._pdfBug=$,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=st===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=c.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:c}){var _e,et;if(this.cancelled)return;if(this._canvas){if(ut(wp,am).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ut(wp,am).add(this._canvas)}this._pdfBug&&((_e=globalThis.StepperManager)!=null&&_e.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:d,viewport:h,transform:g,background:b}=this.params;this.gfx=new CanvasGraphics(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:c},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:g,viewport:h,transparency:e,background:b}),this.operatorListIdx=0,this.graphicsReady=!0,(et=this.graphicsReadyCallback)==null||et.call(this)}cancel(e=null,c=0){var d,h,g;this.running=!1,this.cancelled=!0,(d=this.gfx)==null||d.endDrawing(),ut(this,Qu)&&(window.cancelAnimationFrame(ut(this,Qu)),At(this,Qu,null)),ut(wp,am).delete(this._canvas),e||(e=new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,c)),this.callback(e),(g=(h=this.task).onError)==null||g.call(h,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?At(this,Qu,window.requestAnimationFrame(()=>{At(this,Qu,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ut(wp,am).delete(this._canvas),this.callback())))}};Qu=new WeakMap,am=new WeakMap,Lt(wp,am,new WeakSet);let InternalRenderTask=wp;const version="5.3.31",build="47ad820d9";function makeColorComp(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function scaleAndClamp(a){return Math.max(0,Math.min(255,255*a))}class ColorConverters{static CMYK_G([e,c,d,h]){return["G",1-Math.min(1,.3*e+.59*d+.11*c+h)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=scaleAndClamp(e),[e,e,e]}static G_HTML([e]){const c=makeColorComp(e);return`#${c}${c}${c}`}static RGB_G([e,c,d]){return["G",.3*e+.59*c+.11*d]}static RGB_rgb(e){return e.map(scaleAndClamp)}static RGB_HTML(e){return`#${e.map(makeColorComp).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,c,d,h]){return["RGB",1-Math.min(1,e+h),1-Math.min(1,d+h),1-Math.min(1,c+h)]}static CMYK_rgb([e,c,d,h]){return[scaleAndClamp(1-Math.min(1,e+h)),scaleAndClamp(1-Math.min(1,d+h)),scaleAndClamp(1-Math.min(1,c+h))]}static CMYK_HTML(e){const c=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(c)}static RGB_CMYK([e,c,d]){const h=1-e,g=1-c,b=1-d,_e=Math.min(h,g,b);return["CMYK",h,g,b,_e]}}class BaseSVGFactory{create(e,c,d=!1){if(e<=0||c<=0)throw new Error("Invalid SVG dimensions");const h=this._createSVG("svg:svg");return h.setAttribute("version","1.1"),d||(h.setAttribute("width",`${e}px`),h.setAttribute("height",`${c}px`)),h.setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox",`0 0 ${e} ${c}`),h}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){unreachable("Abstract method `_createSVG` called.")}}class DOMSVGFactory extends BaseSVGFactory{_createSVG(e){return document.createElementNS(SVG_NS,e)}}class XfaLayer{static setupStorage(e,c,d,h,g){const b=h.getValue(c,{value:null});switch(d.name){case"textarea":if(b.value!==null&&(e.textContent=b.value),g==="print")break;e.addEventListener("input",_e=>{h.setValue(c,{value:_e.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(b.value===d.attributes.xfaOn?e.setAttribute("checked",!0):b.value===d.attributes.xfaOff&&e.removeAttribute("checked"),g==="print")break;e.addEventListener("change",_e=>{h.setValue(c,{value:_e.target.checked?_e.target.getAttribute("xfaOn"):_e.target.getAttribute("xfaOff")})})}else{if(b.value!==null&&e.setAttribute("value",b.value),g==="print")break;e.addEventListener("input",_e=>{h.setValue(c,{value:_e.target.value})})}break;case"select":if(b.value!==null){e.setAttribute("value",b.value);for(const _e of d.children)_e.attributes.value===b.value?_e.attributes.selected=!0:_e.attributes.hasOwnProperty("selected")&&delete _e.attributes.selected}e.addEventListener("input",_e=>{const et=_e.target.options,rt=et.selectedIndex===-1?"":et[et.selectedIndex].value;h.setValue(c,{value:rt})});break}}static setAttributes({html:e,element:c,storage:d=null,intent:h,linkService:g}){const{attributes:b}=c,_e=e instanceof HTMLAnchorElement;b.type==="radio"&&(b.name=`${b.name}-${h}`);for(const[et,rt]of Object.entries(b))if(rt!=null)switch(et){case"class":rt.length&&e.setAttribute(et,rt.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",rt);break;case"style":Object.assign(e.style,rt);break;case"textContent":e.textContent=rt;break;default:(!_e||et!=="href"&&et!=="newWindow")&&e.setAttribute(et,rt)}_e&&g.addLinkAttributes(e,b.href,b.newWindow),d&&b.dataId&&this.setupStorage(e,b.dataId,c,d)}static render(e){var $,_;const c=e.annotationStorage,d=e.linkService,h=e.xfaHtml,g=e.intent||"display",b=document.createElement(h.name);h.attributes&&this.setAttributes({html:b,element:h,intent:g,linkService:d});const _e=g!=="richText",et=e.div;if(et.append(b),e.viewport){const nt=`matrix(${e.viewport.transform.join(",")})`;et.style.transform=nt}_e&&et.setAttribute("class","xfaLayer xfaFont");const rt=[];if(h.children.length===0){if(h.value){const nt=document.createTextNode(h.value);b.append(nt),_e&&XfaText.shouldBuildText(h.name)&&rt.push(nt)}return{textDivs:rt}}const st=[[h,-1,b]];for(;st.length>0;){const[nt,it,ot]=st.at(-1);if(it+1===nt.children.length){st.pop();continue}const lt=nt.children[++st.at(-1)[1]];if(lt===null)continue;const{name:at}=lt;if(at==="#text"){const dt=document.createTextNode(lt.value);rt.push(dt),ot.append(dt);continue}const ct=($=lt==null?void 0:lt.attributes)!=null&&$.xmlns?document.createElementNS(lt.attributes.xmlns,at):document.createElement(at);if(ot.append(ct),lt.attributes&&this.setAttributes({html:ct,element:lt,storage:c,intent:g,linkService:d}),((_=lt.children)==null?void 0:_.length)>0)st.push([lt,-1,ct]);else if(lt.value){const dt=document.createTextNode(lt.value);_e&&XfaText.shouldBuildText(at)&&rt.push(dt),ct.append(dt)}}for(const nt of et.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))nt.setAttribute("readOnly",!0);return{textDivs:rt}}static update(e){const c=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=c,e.div.hidden=!1}}const DEFAULT_TAB_INDEX=1e3,annotation_layer_DEFAULT_FONT_SIZE=9,GetElementsByNameSet=new WeakSet;class AnnotationElementFactory{static create(e){switch(e.data.annotationType){case AnnotationType.LINK:return new LinkAnnotationElement(e);case AnnotationType.TEXT:return new TextAnnotationElement(e);case AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(e);case"Btn":return e.data.radioButton?new RadioButtonWidgetAnnotationElement(e):e.data.checkBox?new CheckboxWidgetAnnotationElement(e):new PushButtonWidgetAnnotationElement(e);case"Ch":return new ChoiceWidgetAnnotationElement(e);case"Sig":return new SignatureWidgetAnnotationElement(e)}return new WidgetAnnotationElement(e);case AnnotationType.POPUP:return new PopupAnnotationElement(e);case AnnotationType.FREETEXT:return new FreeTextAnnotationElement(e);case AnnotationType.LINE:return new LineAnnotationElement(e);case AnnotationType.SQUARE:return new SquareAnnotationElement(e);case AnnotationType.CIRCLE:return new CircleAnnotationElement(e);case AnnotationType.POLYLINE:return new PolylineAnnotationElement(e);case AnnotationType.CARET:return new CaretAnnotationElement(e);case AnnotationType.INK:return new InkAnnotationElement(e);case AnnotationType.POLYGON:return new PolygonAnnotationElement(e);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(e);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(e);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(e);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(e);case AnnotationType.STAMP:return new StampAnnotationElement(e);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(e);default:return new AnnotationElement(e)}}}var lm,kx,jx,gv,gE;const GE=class GE{constructor(e,{isRenderable:c=!1,ignoreBorder:d=!1,createQuadrilaterals:h=!1}={}){Lt(this,gv);Lt(this,lm,null);Lt(this,kx,!1);Lt(this,jx,null);this.isRenderable=c,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,c&&(this.container=this._createContainer(d)),h&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:c,richText:d}){return!!(e!=null&&e.str||c!=null&&c.str||d!=null&&d.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return GE._hasPopupData(this.data)}updateEdited(e){var d;if(!this.container)return;ut(this,lm)||At(this,lm,{rect:this.data.rect.slice(0)});const{rect:c}=e;c&&$t(this,gv,gE).call(this,c),(d=ut(this,jx))==null||d.popup.updateEdited(e)}resetEdited(){var e;ut(this,lm)&&($t(this,gv,gE).call(this,ut(this,lm).rect),(e=ut(this,jx))==null||e.popup.resetEdited(),At(this,lm,null))}_createContainer(e){const{data:c,parent:{page:d,viewport:h}}=this,g=document.createElement("section");g.setAttribute("data-annotation-id",c.id),this instanceof WidgetAnnotationElement||(g.tabIndex=DEFAULT_TAB_INDEX);const{style:b}=g;if(b.zIndex=this.parent.zIndex++,c.alternativeText&&(g.title=c.alternativeText),c.noRotate&&g.classList.add("norotate"),!c.rect||this instanceof PopupAnnotationElement){const{rotation:ot}=c;return!c.hasOwnCanvas&&ot!==0&&this.setRotation(ot,g),g}const{width:_e,height:et}=this;if(!e&&c.borderStyle.width>0){b.borderWidth=`${c.borderStyle.width}px`;const ot=c.borderStyle.horizontalCornerRadius,lt=c.borderStyle.verticalCornerRadius;if(ot>0||lt>0){const ct=`calc(${ot}px * var(--total-scale-factor)) / calc(${lt}px * var(--total-scale-factor))`;b.borderRadius=ct}else if(this instanceof RadioButtonWidgetAnnotationElement){const ct=`calc(${_e}px * var(--total-scale-factor)) / calc(${et}px * var(--total-scale-factor))`;b.borderRadius=ct}switch(c.borderStyle.style){case AnnotationBorderStyleType.SOLID:b.borderStyle="solid";break;case AnnotationBorderStyleType.DASHED:b.borderStyle="dashed";break;case AnnotationBorderStyleType.BEVELED:warn("Unimplemented border style: beveled");break;case AnnotationBorderStyleType.INSET:warn("Unimplemented border style: inset");break;case AnnotationBorderStyleType.UNDERLINE:b.borderBottomStyle="solid";break}const at=c.borderColor||null;at?(At(this,kx,!0),b.borderColor=Util.makeHexColor(at[0]|0,at[1]|0,at[2]|0)):b.borderWidth=0}const rt=Util.normalizeRect([c.rect[0],d.view[3]-c.rect[1]+d.view[1],c.rect[2],d.view[3]-c.rect[3]+d.view[1]]),{pageWidth:st,pageHeight:$,pageX:_,pageY:nt}=h.rawDims;b.left=`${100*(rt[0]-_)/st}%`,b.top=`${100*(rt[1]-nt)/$}%`;const{rotation:it}=c;return c.hasOwnCanvas||it===0?(b.width=`${100*_e/st}%`,b.height=`${100*et/$}%`):this.setRotation(it,g),g}setRotation(e,c=this.container){if(!this.data.rect)return;const{pageWidth:d,pageHeight:h}=this.parent.viewport.rawDims;let{width:g,height:b}=this;e%180!==0&&([g,b]=[b,g]),c.style.width=`${100*g/d}%`,c.style.height=`${100*b/h}%`,c.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(c,d,h)=>{const g=h.detail[c],b=g[0],_e=g.slice(1);h.target.style[d]=ColorConverters[`${b}_HTML`](_e),this.annotationStorage.setValue(this.data.id,{[d]:ColorConverters[`${b}_rgb`](_e)})};return shadow(this,"_commonActions",{display:c=>{const{display:d}=c.detail,h=d%2===1;this.container.style.visibility=h?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:h,noPrint:d===1||d===2})},print:c=>{this.annotationStorage.setValue(this.data.id,{noPrint:!c.detail.print})},hidden:c=>{const{hidden:d}=c.detail;this.container.style.visibility=d?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:d,noView:d})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.target.disabled=c.detail.readonly},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{e("bgColor","backgroundColor",c)},fillColor:c=>{e("fillColor","backgroundColor",c)},fgColor:c=>{e("fgColor","color",c)},textColor:c=>{e("textColor","color",c)},borderColor:c=>{e("borderColor","borderColor",c)},strokeColor:c=>{e("strokeColor","borderColor",c)},rotation:c=>{const d=c.detail.rotation;this.setRotation(d),this.annotationStorage.setValue(this.data.id,{rotation:d})}})}_dispatchEventFromSandbox(e,c){const d=this._commonActions;for(const h of Object.keys(c.detail)){const g=e[h]||d[h];g==null||g(c)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const d=this._commonActions;for(const[h,g]of Object.entries(c)){const b=d[h];if(b){const _e={detail:{[h]:g},target:e};b(_e),delete c[h]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[c,d,h,g]=this.data.rect.map(ot=>Math.fround(ot));if(e.length===8){const[ot,lt,at,ct]=e.subarray(2,6);if(h===ot&&g===lt&&c===at&&d===ct)return}const{style:b}=this.container;let _e;if(ut(this,kx)){const{borderColor:ot,borderWidth:lt}=b;b.borderWidth=0,_e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ot}" stroke-width="${lt}">`],this.container.classList.add("hasBorder")}const et=h-c,rt=g-d,{svgFactory:st}=this,$=st.createElement("svg");$.classList.add("quadrilateralsContainer"),$.setAttribute("width",0),$.setAttribute("height",0);const _=st.createElement("defs");$.append(_);const nt=st.createElement("clipPath"),it=`clippath_${this.data.id}`;nt.setAttribute("id",it),nt.setAttribute("clipPathUnits","objectBoundingBox"),_.append(nt);for(let ot=2,lt=e.length;ot<lt;ot+=8){const at=e[ot],ct=e[ot+1],dt=e[ot+2],ht=e[ot+3],pt=st.createElement("rect"),ft=(dt-c)/et,mt=(g-ct)/rt,xt=(at-dt)/et,gt=(ct-ht)/rt;pt.setAttribute("x",ft),pt.setAttribute("y",mt),pt.setAttribute("width",xt),pt.setAttribute("height",gt),nt.append(pt),_e==null||_e.push(`<rect vector-effect="non-scaling-stroke" x="${ft}" y="${mt}" width="${xt}" height="${gt}"/>`)}ut(this,kx)&&(_e.push("</g></svg>')"),b.backgroundImage=_e.join("")),this.container.append($),this.container.style.clipPath=`url(#${it})`}_createPopup(){const{data:e}=this,c=At(this,jx,new PopupAnnotationElement({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(c.render())}render(){unreachable("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,c=null){const d=[];if(this._fieldObjects){const h=this._fieldObjects[e];if(h)for(const{page:g,id:b,exportValues:_e}of h){if(g===-1||b===c)continue;const et=typeof _e=="string"?_e:null,rt=document.querySelector(`[data-element-id="${b}"]`);if(rt&&!GetElementsByNameSet.has(rt)){warn(`_getElementsByName - element not allowed: ${b}`);continue}d.push({id:b,exportValue:et,domElement:rt})}return d}for(const h of document.getElementsByName(e)){const{exportValue:g}=h,b=h.getAttribute("data-element-id");b!==c&&GetElementsByNameSet.has(h)&&d.push({id:b,exportValue:g,domElement:h})}return d}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const c of e)c.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:c}}=this;this.container.addEventListener("dblclick",()=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("switchannotationeditormode",{source:this,mode:e,editId:c})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};lm=new WeakMap,kx=new WeakMap,jx=new WeakMap,gv=new WeakSet,gE=function(e){const{container:{style:c},data:{rect:d,rotation:h},parent:{viewport:{rawDims:{pageWidth:g,pageHeight:b,pageX:_e,pageY:et}}}}=this;d==null||d.splice(0,4,...e),c.left=`${100*(e[0]-_e)/g}%`,c.top=`${100*(b-e[3]+et)/b}%`,h===0?(c.width=`${100*(e[2]-e[0])/g}%`,c.height=`${100*(e[3]-e[1])/b}%`):this.setRotation(h)};let AnnotationElement=GE;var ao,yp,t1,n1;class LinkAnnotationElement extends AnnotationElement{constructor(c,d=null){super(c,{isRenderable:!0,ignoreBorder:!!(d!=null&&d.ignoreBorder),createQuadrilaterals:!0});Lt(this,ao);this.isTooltipOnly=c.data.isTooltipOnly}render(){const{data:c,linkService:d}=this,h=document.createElement("a");h.setAttribute("data-element-id",c.id);let g=!1;return c.url?(d.addLinkAttributes(h,c.url,c.newWindow),g=!0):c.action?(this._bindNamedAction(h,c.action),g=!0):c.attachment?($t(this,ao,t1).call(this,h,c.attachment,c.attachmentDest),g=!0):c.setOCGState?($t(this,ao,n1).call(this,h,c.setOCGState),g=!0):c.dest?(this._bindLink(h,c.dest),g=!0):(c.actions&&(c.actions.Action||c.actions["Mouse Up"]||c.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(h,c),g=!0),c.resetForm?(this._bindResetFormAction(h,c.resetForm),g=!0):this.isTooltipOnly&&!g&&(this._bindLink(h,""),g=!0)),this.container.classList.add("linkAnnotation"),g&&this.container.append(h),this.container}_bindLink(c,d){c.href=this.linkService.getDestinationHash(d),c.onclick=()=>(d&&this.linkService.goToDestination(d),!1),(d||d==="")&&$t(this,ao,yp).call(this)}_bindNamedAction(c,d){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeNamedAction(d),!1),$t(this,ao,yp).call(this)}_bindJSAction(c,d){c.href=this.linkService.getAnchorUrl("");const h=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const g of Object.keys(d.actions)){const b=h.get(g);b&&(c[b]=()=>{var _e;return(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d.id,name:g}}),!1})}c.onclick||(c.onclick=()=>!1),$t(this,ao,yp).call(this)}_bindResetFormAction(c,d){const h=c.onclick;if(h||(c.href=this.linkService.getAnchorUrl("")),$t(this,ao,yp).call(this),!this._fieldObjects){warn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),h||(c.onclick=()=>!1);return}c.onclick=()=>{var $;h==null||h();const{fields:g,refs:b,include:_e}=d,et=[];if(g.length!==0||b.length!==0){const _=new Set(b);for(const nt of g){const it=this._fieldObjects[nt]||[];for(const{id:ot}of it)_.add(ot)}for(const nt of Object.values(this._fieldObjects))for(const it of nt)_.has(it.id)===_e&&et.push(it)}else for(const _ of Object.values(this._fieldObjects))et.push(..._);const rt=this.annotationStorage,st=[];for(const _ of et){const{id:nt}=_;switch(st.push(nt),_.type){case"text":{const ot=_.defaultValue||"";rt.setValue(nt,{value:ot});break}case"checkbox":case"radiobutton":{const ot=_.defaultValue===_.exportValues;rt.setValue(nt,{value:ot});break}case"combobox":case"listbox":{const ot=_.defaultValue||"";rt.setValue(nt,{value:ot});break}default:continue}const it=document.querySelector(`[data-element-id="${nt}"]`);if(it){if(!GetElementsByNameSet.has(it)){warn(`_bindResetFormAction - element not allowed: ${nt}`);continue}}else continue;it.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:st,name:"ResetForm"}})),!1}}}ao=new WeakSet,yp=function(){this.container.setAttribute("data-internal-link","")},t1=function(c,d,h=null){c.href=this.linkService.getAnchorUrl(""),d.description&&(c.title=d.description),c.onclick=()=>{var g;return(g=this.downloadManager)==null||g.openOrDownloadData(d.content,d.filename,h),!1},$t(this,ao,yp).call(this)},n1=function(c,d){c.href=this.linkService.getAnchorUrl(""),c.onclick=()=>(this.linkService.executeSetOCGState(d),!1),$t(this,ao,yp).call(this)};class TextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){return this.container}showElementAndHideCanvas(e){var c;this.data.hasOwnCanvas&&(((c=e.previousSibling)==null?void 0:c.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return util_FeatureTest.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,c,d,h,g){d.includes("mouse")?e.addEventListener(d,b=>{var _e;(_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:g(b),shift:b.shiftKey,modifier:this._getKeyModifier(b)}})}):e.addEventListener(d,b=>{var _e;if(d==="blur"){if(!c.focused||!b.relatedTarget)return;c.focused=!1}else if(d==="focus"){if(c.focused)return;c.focused=!0}g&&((_e=this.linkService.eventBus)==null||_e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:g(b)}}))})}_setEventListeners(e,c,d,h){var g,b,_e;for(const[et,rt]of d)(rt==="Action"||(g=this.data.actions)!=null&&g[rt])&&((rt==="Focus"||rt==="Blur")&&(c||(c={focused:!1})),this._setEventListener(e,c,et,rt,h),rt==="Focus"&&!((b=this.data.actions)!=null&&b.Blur)?this._setEventListener(e,c,"blur","Blur",null):rt==="Blur"&&!((_e=this.data.actions)!=null&&_e.Focus)&&this._setEventListener(e,c,"focus","Focus",null))}_setBackgroundColor(e){const c=this.data.backgroundColor||null;e.style.backgroundColor=c===null?"transparent":Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle(e){const c=["left","center","right"],{fontColor:d}=this.data.defaultAppearanceData,h=this.data.defaultAppearanceData.fontSize||annotation_layer_DEFAULT_FONT_SIZE,g=e.style;let b;const _e=2,et=rt=>Math.round(10*rt)/10;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-_e),st=Math.round(rt/(LINE_FACTOR*h))||1,$=rt/st;b=Math.min(h,et($/LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-_e);b=Math.min(h,et(rt/LINE_FACTOR))}g.fontSize=`calc(${b}px * var(--total-scale-factor))`,g.color=Util.makeHexColor(d[0],d[1],d[2]),this.data.textAlignment!==null&&(g.textAlign=c[this.data.textAlignment])}_setRequired(e,c){c?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",c)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){const c=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:c})}setPropertyOnSiblings(e,c,d,h){const g=this.annotationStorage;for(const b of this._getElementsByName(e.name,e.id))b.domElement&&(b.domElement[c]=d),g.setValue(b.id,{[h]:d})}render(){var h,g;const e=this.annotationStorage,c=this.data.id;this.container.classList.add("textWidgetAnnotation");let d=null;if(this.renderForms){const b=e.getValue(c,{value:this.data.fieldValue});let _e=b.value||"";const et=e.getValue(c,{charLimit:this.data.maxLen}).charLimit;et&&_e.length>et&&(_e=_e.slice(0,et));let rt=b.formattedValue||((h=this.data.textContent)==null?void 0:h.join(`
`))||null;rt&&this.data.comb&&(rt=rt.replaceAll(/\s+/g,""));const st={userValue:_e,formattedValue:rt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(d=document.createElement("textarea"),d.textContent=rt??_e,this.data.doNotScroll&&(d.style.overflowY="hidden")):(d=document.createElement("input"),d.type=this.data.password?"password":"text",d.setAttribute("value",rt??_e),this.data.doNotScroll&&(d.style.overflowX="hidden")),this.data.hasOwnCanvas&&(d.hidden=!0),GetElementsByNameSet.add(d),d.setAttribute("data-element-id",c),d.disabled=this.data.readOnly,d.name=this.data.fieldName,d.tabIndex=DEFAULT_TAB_INDEX,this._setRequired(d,this.data.required),et&&(d.maxLength=et),d.addEventListener("input",_=>{e.setValue(c,{value:_.target.value}),this.setPropertyOnSiblings(d,"value",_.target.value,"value"),st.formattedValue=null}),d.addEventListener("resetform",_=>{const nt=this.data.defaultFieldValue??"";d.value=st.userValue=nt,st.formattedValue=null});let $=_=>{const{formattedValue:nt}=st;nt!=null&&(_.target.value=nt),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){d.addEventListener("focus",nt=>{var ot;if(st.focused)return;const{target:it}=nt;st.userValue&&(it.value=st.userValue),st.lastCommittedValue=it.value,st.commitKey=1,(ot=this.data.actions)!=null&&ot.Focus||(st.focused=!0)}),d.addEventListener("updatefromsandbox",nt=>{this.showElementAndHideCanvas(nt.target);const it={value(ot){st.userValue=ot.detail.value??"",e.setValue(c,{value:st.userValue.toString()}),ot.target.value=st.userValue},formattedValue(ot){const{formattedValue:lt}=ot.detail;st.formattedValue=lt,lt!=null&&ot.target!==document.activeElement&&(ot.target.value=lt),e.setValue(c,{formattedValue:lt})},selRange(ot){ot.target.setSelectionRange(...ot.detail.selRange)},charLimit:ot=>{var dt;const{charLimit:lt}=ot.detail,{target:at}=ot;if(lt===0){at.removeAttribute("maxLength");return}at.setAttribute("maxLength",lt);let ct=st.userValue;!ct||ct.length<=lt||(ct=ct.slice(0,lt),at.value=st.userValue=ct,e.setValue(c,{value:ct}),(dt=this.linkService.eventBus)==null||dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:ct,willCommit:!0,commitKey:1,selStart:at.selectionStart,selEnd:at.selectionEnd}}))}};this._dispatchEventFromSandbox(it,nt)}),d.addEventListener("keydown",nt=>{var lt;st.commitKey=1;let it=-1;if(nt.key==="Escape"?it=0:nt.key==="Enter"&&!this.data.multiLine?it=2:nt.key==="Tab"&&(st.commitKey=3),it===-1)return;const{value:ot}=nt.target;st.lastCommittedValue!==ot&&(st.lastCommittedValue=ot,st.userValue=ot,(lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:ot,willCommit:!0,commitKey:it,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}}))});const _=$;$=null,d.addEventListener("blur",nt=>{var ot,lt;if(!st.focused||!nt.relatedTarget)return;(ot=this.data.actions)!=null&&ot.Blur||(st.focused=!1);const{value:it}=nt.target;st.userValue=it,st.lastCommittedValue!==it&&((lt=this.linkService.eventBus)==null||lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:it,willCommit:!0,commitKey:st.commitKey,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}})),_(nt)}),(g=this.data.actions)!=null&&g.Keystroke&&d.addEventListener("beforeinput",nt=>{var pt;st.lastCommittedValue=null;const{data:it,target:ot}=nt,{value:lt,selectionStart:at,selectionEnd:ct}=ot;let dt=at,ht=ct;switch(nt.inputType){case"deleteWordBackward":{const ft=lt.substring(0,at).match(/\w*[^\w]*$/);ft&&(dt-=ft[0].length);break}case"deleteWordForward":{const ft=lt.substring(at).match(/^[^\w]*\w*/);ft&&(ht+=ft[0].length);break}case"deleteContentBackward":at===ct&&(dt-=1);break;case"deleteContentForward":at===ct&&(ht+=1);break}nt.preventDefault(),(pt=this.linkService.eventBus)==null||pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:lt,change:it||"",willCommit:!1,selStart:dt,selEnd:ht}})}),this._setEventListeners(d,st,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.value)}if($&&d.addEventListener("blur",$),this.data.comb){const nt=(this.data.rect[2]-this.data.rect[0])/et;d.classList.add("comb"),d.style.letterSpacing=`calc(${nt}px * var(--total-scale-factor) - 1ch)`}}else d=document.createElement("div"),d.textContent=this.data.fieldValue,d.style.verticalAlign="middle",d.style.display="table-cell",this.data.hasOwnCanvas&&(d.hidden=!0);return this._setTextStyle(d),this._setBackgroundColor(d),this._setDefaultPropertiesFromJS(d),this.container.append(d),this.container}}class SignatureWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,c=this.data,d=c.id;let h=e.getValue(d,{value:c.exportValue===c.fieldValue}).value;typeof h=="string"&&(h=h!=="Off",e.setValue(d,{value:h})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const g=document.createElement("input");return GetElementsByNameSet.add(g),g.setAttribute("data-element-id",d),g.disabled=c.readOnly,this._setRequired(g,this.data.required),g.type="checkbox",g.name=c.fieldName,h&&g.setAttribute("checked",!0),g.setAttribute("exportValue",c.exportValue),g.tabIndex=DEFAULT_TAB_INDEX,g.addEventListener("change",b=>{const{name:_e,checked:et}=b.target;for(const rt of this._getElementsByName(_e,d)){const st=et&&rt.exportValue===c.exportValue;rt.domElement&&(rt.domElement.checked=st),e.setValue(rt.id,{value:st})}e.setValue(d,{value:et})}),g.addEventListener("resetform",b=>{const _e=c.defaultFieldValue||"Off";b.target.checked=_e===c.exportValue}),this.enableScripting&&this.hasJSActions&&(g.addEventListener("updatefromsandbox",b=>{const _e={value(et){et.target.checked=et.detail.value!=="Off",e.setValue(d,{value:et.target.checked})}};this._dispatchEventFromSandbox(_e,b)}),this._setEventListeners(g,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.checked)),this._setBackgroundColor(g),this._setDefaultPropertiesFromJS(g),this.container.append(g),this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,c=this.data,d=c.id;let h=e.getValue(d,{value:c.fieldValue===c.buttonValue}).value;if(typeof h=="string"&&(h=h!==c.buttonValue,e.setValue(d,{value:h})),h)for(const b of this._getElementsByName(c.fieldName,d))e.setValue(b.id,{value:!1});const g=document.createElement("input");if(GetElementsByNameSet.add(g),g.setAttribute("data-element-id",d),g.disabled=c.readOnly,this._setRequired(g,this.data.required),g.type="radio",g.name=c.fieldName,h&&g.setAttribute("checked",!0),g.tabIndex=DEFAULT_TAB_INDEX,g.addEventListener("change",b=>{const{name:_e,checked:et}=b.target;for(const rt of this._getElementsByName(_e,d))e.setValue(rt.id,{value:!1});e.setValue(d,{value:et})}),g.addEventListener("resetform",b=>{const _e=c.defaultFieldValue;b.target.checked=_e!=null&&_e===c.buttonValue}),this.enableScripting&&this.hasJSActions){const b=c.buttonValue;g.addEventListener("updatefromsandbox",_e=>{const et={value:rt=>{const st=b===rt.detail.value;for(const $ of this._getElementsByName(rt.target.name)){const _=st&&$.id===d;$.domElement&&($.domElement.checked=_),e.setValue($.id,{value:_})}}};this._dispatchEventFromSandbox(et,_e)}),this._setEventListeners(g,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_e=>_e.target.checked)}return this._setBackgroundColor(g),this._setDefaultPropertiesFromJS(g),this.container.append(g),this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const c=e.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",d=>{this._dispatchEventFromSandbox({},d)})),e}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,c=this.data.id,d=e.getValue(c,{value:this.data.fieldValue}),h=document.createElement("select");GetElementsByNameSet.add(h),h.setAttribute("data-element-id",c),h.disabled=this.data.readOnly,this._setRequired(h,this.data.required),h.name=this.data.fieldName,h.tabIndex=DEFAULT_TAB_INDEX;let g=this.data.combo&&this.data.options.length>0;this.data.combo||(h.size=this.data.options.length,this.data.multiSelect&&(h.multiple=!0)),h.addEventListener("resetform",st=>{const $=this.data.defaultFieldValue;for(const _ of h.options)_.selected=_.value===$});for(const st of this.data.options){const $=document.createElement("option");$.textContent=st.displayValue,$.value=st.exportValue,d.value.includes(st.exportValue)&&($.setAttribute("selected",!0),g=!1),h.append($)}let b=null;if(g){const st=document.createElement("option");st.value=" ",st.setAttribute("hidden",!0),st.setAttribute("selected",!0),h.prepend(st),b=()=>{st.remove(),h.removeEventListener("input",b),b=null},h.addEventListener("input",b)}const _e=st=>{const $=st?"value":"textContent",{options:_,multiple:nt}=h;return nt?Array.prototype.filter.call(_,it=>it.selected).map(it=>it[$]):_.selectedIndex===-1?null:_[_.selectedIndex][$]};let et=_e(!1);const rt=st=>{const $=st.target.options;return Array.prototype.map.call($,_=>({displayValue:_.textContent,exportValue:_.value}))};return this.enableScripting&&this.hasJSActions?(h.addEventListener("updatefromsandbox",st=>{const $={value(_){b==null||b();const nt=_.detail.value,it=new Set(Array.isArray(nt)?nt:[nt]);for(const ot of h.options)ot.selected=it.has(ot.value);e.setValue(c,{value:_e(!0)}),et=_e(!1)},multipleSelection(_){h.multiple=!0},remove(_){const nt=h.options,it=_.detail.remove;nt[it].selected=!1,h.remove(it),nt.length>0&&Array.prototype.findIndex.call(nt,lt=>lt.selected)===-1&&(nt[0].selected=!0),e.setValue(c,{value:_e(!0),items:rt(_)}),et=_e(!1)},clear(_){for(;h.length!==0;)h.remove(0);e.setValue(c,{value:null,items:[]}),et=_e(!1)},insert(_){const{index:nt,displayValue:it,exportValue:ot}=_.detail.insert,lt=h.children[nt],at=document.createElement("option");at.textContent=it,at.value=ot,lt?lt.before(at):h.append(at),e.setValue(c,{value:_e(!0),items:rt(_)}),et=_e(!1)},items(_){const{items:nt}=_.detail;for(;h.length!==0;)h.remove(0);for(const it of nt){const{displayValue:ot,exportValue:lt}=it,at=document.createElement("option");at.textContent=ot,at.value=lt,h.append(at)}h.options.length>0&&(h.options[0].selected=!0),e.setValue(c,{value:_e(!0),items:rt(_)}),et=_e(!1)},indices(_){const nt=new Set(_.detail.indices);for(const it of _.target.options)it.selected=nt.has(it.index);e.setValue(c,{value:_e(!0)}),et=_e(!1)},editable(_){_.target.disabled=!_.detail.editable}};this._dispatchEventFromSandbox($,st)}),h.addEventListener("input",st=>{var nt;const $=_e(!0),_=_e(!1);e.setValue(c,{value:$}),st.preventDefault(),(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:et,change:_,changeEx:$,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(h,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],st=>st.target.value)):h.addEventListener("input",function(st){e.setValue(c,{value:_e(!0)})}),this.data.combo&&this._setTextStyle(h),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.append(h),this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(e){const{data:c,elements:d}=e;super(e,{isRenderable:AnnotationElement._hasPopupData(c)}),this.elements=d,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new PopupElement({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),c=[];for(const d of this.elements)d.popup=e,d.container.ariaHasPopup="dialog",c.push(d.data.id),d.addHighlightArea();return this.container.setAttribute("aria-controls",c.map(d=>`${AnnotationPrefix}${d}`).join(",")),this.container}}var Px,F0,B0,Nx,Ix,Xr,ou,Ox,xv,yv,Dx,au,Lo,lu,bv,cu,vv,cm,um,Ir,u0,xE,r1,s1,i1,o1,d0,h0,yE;class PopupElement{constructor({container:e,color:c,elements:d,titleObj:h,modificationDate:g,contentsObj:b,richText:_e,parent:et,rect:rt,parentRect:st,open:$}){Lt(this,Ir);Lt(this,Px,$t(this,Ir,i1).bind(this));Lt(this,F0,$t(this,Ir,yE).bind(this));Lt(this,B0,$t(this,Ir,h0).bind(this));Lt(this,Nx,$t(this,Ir,d0).bind(this));Lt(this,Ix,null);Lt(this,Xr,null);Lt(this,ou,null);Lt(this,Ox,null);Lt(this,xv,null);Lt(this,yv,null);Lt(this,Dx,null);Lt(this,au,!1);Lt(this,Lo,null);Lt(this,lu,null);Lt(this,bv,null);Lt(this,cu,null);Lt(this,vv,null);Lt(this,cm,null);Lt(this,um,!1);var _;At(this,Xr,e),At(this,vv,h),At(this,ou,b),At(this,cu,_e),At(this,yv,et),At(this,Ix,c),At(this,bv,rt),At(this,Dx,st),At(this,xv,d),At(this,Ox,PDFDateString.toDateObject(g)),this.trigger=d.flatMap(nt=>nt.getElementsToTriggerPopup());for(const nt of this.trigger)nt.addEventListener("click",ut(this,Nx)),nt.addEventListener("mouseenter",ut(this,B0)),nt.addEventListener("mouseleave",ut(this,F0)),nt.classList.add("popupTriggerArea");for(const nt of d)(_=nt.container)==null||_.addEventListener("keydown",ut(this,Px));ut(this,Xr).hidden=!0,$&&$t(this,Ir,d0).call(this)}render(){if(ut(this,Lo))return;const e=At(this,Lo,document.createElement("div"));if(e.className="popup",ut(this,Ix)){const g=e.style.outlineColor=Util.makeHexColor(...ut(this,Ix));e.style.backgroundColor=`color-mix(in srgb, ${g} 30%, white)`}const c=document.createElement("span");c.className="header";const d=document.createElement("h1");if(c.append(d),{dir:d.dir,str:d.textContent}=ut(this,vv),e.append(c),ut(this,Ox)){const g=document.createElement("span");g.classList.add("popupDate"),g.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),g.setAttribute("data-l10n-args",JSON.stringify({dateObj:ut(this,Ox).valueOf()})),c.append(g)}const h=ut(this,Ir,u0);if(h)XfaLayer.render({xfaHtml:h,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const g=this._formatContents(ut(this,ou));e.append(g)}ut(this,Xr).append(e)}_formatContents({str:e,dir:c}){const d=document.createElement("p");d.classList.add("popupContent"),d.dir=c;const h=e.split(/(?:\r\n?|\n)/);for(let g=0,b=h.length;g<b;++g){const _e=h[g];d.append(document.createTextNode(_e)),g<b-1&&d.append(document.createElement("br"))}return d}updateEdited({rect:e,popupContent:c}){var d;ut(this,cm)||At(this,cm,{contentsObj:ut(this,ou),richText:ut(this,cu)}),e&&At(this,lu,null),c&&(At(this,cu,$t(this,Ir,s1).call(this,c)),At(this,ou,null)),(d=ut(this,Lo))==null||d.remove(),At(this,Lo,null)}resetEdited(){var e;ut(this,cm)&&({contentsObj:as(this,ou)._,richText:as(this,cu)._}=ut(this,cm),At(this,cm,null),(e=ut(this,Lo))==null||e.remove(),At(this,Lo,null),At(this,lu,null))}forceHide(){At(this,um,this.isVisible),ut(this,um)&&(ut(this,Xr).hidden=!0)}maybeShow(){ut(this,um)&&(ut(this,Lo)||$t(this,Ir,h0).call(this),At(this,um,!1),ut(this,Xr).hidden=!1)}get isVisible(){return ut(this,Xr).hidden===!1}}Px=new WeakMap,F0=new WeakMap,B0=new WeakMap,Nx=new WeakMap,Ix=new WeakMap,Xr=new WeakMap,ou=new WeakMap,Ox=new WeakMap,xv=new WeakMap,yv=new WeakMap,Dx=new WeakMap,au=new WeakMap,Lo=new WeakMap,lu=new WeakMap,bv=new WeakMap,cu=new WeakMap,vv=new WeakMap,cm=new WeakMap,um=new WeakMap,Ir=new WeakSet,u0=function(){const e=ut(this,cu),c=ut(this,ou);return e!=null&&e.str&&(!(c!=null&&c.str)||c.str===e.str)&&ut(this,cu).html||null},xE=function(){var e,c,d;return((d=(c=(e=ut(this,Ir,u0))==null?void 0:e.attributes)==null?void 0:c.style)==null?void 0:d.fontSize)||0},r1=function(){var e,c,d;return((d=(c=(e=ut(this,Ir,u0))==null?void 0:e.attributes)==null?void 0:c.style)==null?void 0:d.color)||null},s1=function(e){const c=[],d={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:c}]}},h={style:{color:ut(this,Ir,r1),fontSize:ut(this,Ir,xE)?`calc(${ut(this,Ir,xE)}px * var(--total-scale-factor))`:""}};for(const g of e.split(`
`))c.push({name:"span",value:g,attributes:h});return d},i1=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&ut(this,au))&&$t(this,Ir,d0).call(this)},o1=function(){if(ut(this,lu)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:c,pageHeight:d,pageX:h,pageY:g}}}=ut(this,yv);let b=!!ut(this,Dx),_e=b?ut(this,Dx):ut(this,bv);for(const it of ut(this,xv))if(!_e||Util.intersect(it.data.rect,_e)!==null){_e=it.data.rect,b=!0;break}const et=Util.normalizeRect([_e[0],e[3]-_e[1]+e[1],_e[2],e[3]-_e[3]+e[1]]),st=b?_e[2]-_e[0]+5:0,$=et[0]+st,_=et[1];At(this,lu,[100*($-h)/c,100*(_-g)/d]);const{style:nt}=ut(this,Xr);nt.left=`${ut(this,lu)[0]}%`,nt.top=`${ut(this,lu)[1]}%`},d0=function(){At(this,au,!ut(this,au)),ut(this,au)?($t(this,Ir,h0).call(this),ut(this,Xr).addEventListener("click",ut(this,Nx)),ut(this,Xr).addEventListener("keydown",ut(this,Px))):($t(this,Ir,yE).call(this),ut(this,Xr).removeEventListener("click",ut(this,Nx)),ut(this,Xr).removeEventListener("keydown",ut(this,Px)))},h0=function(){ut(this,Lo)||this.render(),this.isVisible?ut(this,au)&&ut(this,Xr).classList.add("focused"):($t(this,Ir,o1).call(this),ut(this,Xr).hidden=!1,ut(this,Xr).style.zIndex=parseInt(ut(this,Xr).style.zIndex)+1e3)},yE=function(){ut(this,Xr).classList.remove("focused"),!(ut(this,au)||!this.isVisible)&&(ut(this,Xr).hidden=!0,ut(this,Xr).style.zIndex=parseInt(ut(this,Xr).style.zIndex)-1e3)};class FreeTextAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const c of this.textContent){const d=document.createElement("span");d.textContent=c,e.append(d)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ev;class LineAnnotationElement extends AnnotationElement{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});Lt(this,Ev,null)}render(){this.container.classList.add("lineAnnotation");const{data:c,width:d,height:h}=this,g=this.svgFactory.create(d,h,!0),b=At(this,Ev,this.svgFactory.createElement("svg:line"));return b.setAttribute("x1",c.rect[2]-c.lineCoordinates[0]),b.setAttribute("y1",c.rect[3]-c.lineCoordinates[1]),b.setAttribute("x2",c.rect[2]-c.lineCoordinates[2]),b.setAttribute("y2",c.rect[3]-c.lineCoordinates[3]),b.setAttribute("stroke-width",c.borderStyle.width||1),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),g.append(b),this.container.append(g),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ut(this,Ev)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ev=new WeakMap;var wv;class SquareAnnotationElement extends AnnotationElement{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});Lt(this,wv,null)}render(){this.container.classList.add("squareAnnotation");const{data:c,width:d,height:h}=this,g=this.svgFactory.create(d,h,!0),b=c.borderStyle.width,_e=At(this,wv,this.svgFactory.createElement("svg:rect"));return _e.setAttribute("x",b/2),_e.setAttribute("y",b/2),_e.setAttribute("width",d-b),_e.setAttribute("height",h-b),_e.setAttribute("stroke-width",b||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),g.append(_e),this.container.append(g),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ut(this,wv)}addHighlightArea(){this.container.classList.add("highlightArea")}}wv=new WeakMap;var Sv;class CircleAnnotationElement extends AnnotationElement{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});Lt(this,Sv,null)}render(){this.container.classList.add("circleAnnotation");const{data:c,width:d,height:h}=this,g=this.svgFactory.create(d,h,!0),b=c.borderStyle.width,_e=At(this,Sv,this.svgFactory.createElement("svg:ellipse"));return _e.setAttribute("cx",d/2),_e.setAttribute("cy",h/2),_e.setAttribute("rx",d/2-b/2),_e.setAttribute("ry",h/2-b/2),_e.setAttribute("stroke-width",b||1),_e.setAttribute("stroke","transparent"),_e.setAttribute("fill","transparent"),g.append(_e),this.container.append(g),!c.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ut(this,Sv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sv=new WeakMap;var Tv;class PolylineAnnotationElement extends AnnotationElement{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});Lt(this,Tv,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:c,vertices:d,borderStyle:h,popupRef:g},width:b,height:_e}=this;if(!d)return this.container;const et=this.svgFactory.create(b,_e,!0);let rt=[];for(let $=0,_=d.length;$<_;$+=2){const nt=d[$]-c[0],it=c[3]-d[$+1];rt.push(`${nt},${it}`)}rt=rt.join(" ");const st=At(this,Tv,this.svgFactory.createElement(this.svgElementName));return st.setAttribute("points",rt),st.setAttribute("stroke-width",h.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),et.append(st),this.container.append(et),!g&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return ut(this,Tv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tv=new WeakMap;class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Av,dm,_v,bE;class InkAnnotationElement extends AnnotationElement{constructor(c){super(c,{isRenderable:!0,ignoreBorder:!0});Lt(this,_v);Lt(this,Av,null);Lt(this,dm,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?AnnotationEditorType.HIGHLIGHT:AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:c,rotation:d,inkLists:h,borderStyle:g,popupRef:b}}=this,{transform:_e,width:et,height:rt}=$t(this,_v,bE).call(this,d,c),st=this.svgFactory.create(et,rt,!0),$=At(this,Av,this.svgFactory.createElement("svg:g"));st.append($),$.setAttribute("stroke-width",g.width||1),$.setAttribute("stroke-linecap","round"),$.setAttribute("stroke-linejoin","round"),$.setAttribute("stroke-miterlimit",10),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),$.setAttribute("transform",_e);for(let _=0,nt=h.length;_<nt;_++){const it=this.svgFactory.createElement(this.svgElementName);ut(this,dm).push(it),it.setAttribute("points",h[_].join(",")),$.append(it)}return!b&&this.hasPopupData&&this._createPopup(),this.container.append(st),this._editOnDoubleClick(),this.container}updateEdited(c){super.updateEdited(c);const{thickness:d,points:h,rect:g}=c,b=ut(this,Av);if(d>=0&&b.setAttribute("stroke-width",d||1),h)for(let _e=0,et=ut(this,dm).length;_e<et;_e++)ut(this,dm)[_e].setAttribute("points",h[_e].join(","));if(g){const{transform:_e,width:et,height:rt}=$t(this,_v,bE).call(this,this.data.rotation,g);b.parentElement.setAttribute("viewBox",`0 0 ${et} ${rt}`),b.setAttribute("transform",_e)}}getElementsToTriggerPopup(){return ut(this,dm)}addHighlightArea(){this.container.classList.add("highlightArea")}}Av=new WeakMap,dm=new WeakMap,_v=new WeakSet,bE=function(c,d){switch(c){case 90:return{transform:`rotate(90) translate(${-d[0]},${d[1]}) scale(1,-1)`,width:d[3]-d[1],height:d[2]-d[0]};case 180:return{transform:`rotate(180) translate(${-d[2]},${d[1]}) scale(1,-1)`,width:d[2]-d[0],height:d[3]-d[1]};case 270:return{transform:`rotate(270) translate(${-d[2]},${d[3]}) scale(1,-1)`,width:d[3]-d[1],height:d[2]-d[0]};default:return{transform:`translate(${-d[0]},${d[3]}) scale(1,-1)`,width:d[2]-d[0],height:d[3]-d[1]}}};class HighlightAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=AnnotationEditorType.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class StampAnnotationElement extends AnnotationElement{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=AnnotationEditorType.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rv,Cv,vE;class FileAttachmentAnnotationElement extends AnnotationElement{constructor(c){var h;super(c,{isRenderable:!0});Lt(this,Cv);Lt(this,Rv,null);const{file:d}=this.data;this.filename=d.filename,this.content=d.content,(h=this.linkService.eventBus)==null||h.dispatch("fileattachmentannotation",{source:this,...d})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:c,data:d}=this;let h;d.hasAppearance||d.fillAlpha===0?h=document.createElement("div"):(h=document.createElement("img"),h.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(d.name)?"paperclip":"pushpin"}.svg`,d.fillAlpha&&d.fillAlpha<1&&(h.style=`filter: opacity(${Math.round(d.fillAlpha*100)}%);`)),h.addEventListener("dblclick",$t(this,Cv,vE).bind(this)),At(this,Rv,h);const{isMac:g}=util_FeatureTest.platform;return c.addEventListener("keydown",b=>{b.key==="Enter"&&(g?b.metaKey:b.ctrlKey)&&$t(this,Cv,vE).call(this)}),!d.popupRef&&this.hasPopupData?this._createPopup():h.classList.add("popupTriggerArea"),c.append(h),c}getElementsToTriggerPopup(){return ut(this,Rv)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rv=new WeakMap,Cv=new WeakSet,vE=function(){var c;(c=this.downloadManager)==null||c.openOrDownloadData(this.content,this.filename)};var kv,hm,Ju,jv,fp,EE,wE,Mx;let AnnotationLayer$1=(Mx=class{constructor({div:e,accessibilityManager:c,annotationCanvasMap:d,annotationEditorUIManager:h,page:g,viewport:b,structTreeLayer:_e}){Lt(this,fp);Lt(this,kv,null);Lt(this,hm,null);Lt(this,Ju,new Map);Lt(this,jv,null);this.div=e,At(this,kv,c),At(this,hm,d),At(this,jv,_e||null),this.page=g,this.viewport=b,this.zIndex=0,this._annotationEditorUIManager=h}hasEditableAnnotations(){return ut(this,Ju).size>0}async render(e){var b;const{annotations:c}=e,d=this.div;setLayerDimensions(d,this.viewport);const h=new Map,g={data:null,layer:d,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new DOMSVGFactory,annotationStorage:e.annotationStorage||new AnnotationStorage,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const _e of c){if(_e.noHTML)continue;const et=_e.annotationType===AnnotationType.POPUP;if(et){const $=h.get(_e.id);if(!$)continue;g.elements=$}else if(_e.rect[2]===_e.rect[0]||_e.rect[3]===_e.rect[1])continue;g.data=_e;const rt=AnnotationElementFactory.create(g);if(!rt.isRenderable)continue;if(!et&&_e.popupRef){const $=h.get(_e.popupRef);$?$.push(rt):h.set(_e.popupRef,[rt])}const st=rt.render();_e.hidden&&(st.style.visibility="hidden"),await $t(this,fp,EE).call(this,st,_e.id),rt._isEditable&&(ut(this,Ju).set(rt.data.id,rt),(b=this._annotationEditorUIManager)==null||b.renderAnnotationElement(rt))}$t(this,fp,wE).call(this)}async addLinkAnnotations(e,c){const d={data:null,layer:this.div,linkService:c,svgFactory:new DOMSVGFactory,parent:this};for(const h of e){h.borderStyle||(h.borderStyle=Mx._defaultBorderStyle),d.data=h;const g=AnnotationElementFactory.create(d);if(!g.isRenderable)continue;const b=g.render();await $t(this,fp,EE).call(this,b,h.id)}}update({viewport:e}){const c=this.div;this.viewport=e,setLayerDimensions(c,{rotation:e.rotation}),$t(this,fp,wE).call(this),c.hidden=!1}getEditableAnnotations(){return Array.from(ut(this,Ju).values())}getEditableAnnotation(e){return ut(this,Ju).get(e)}static get _defaultBorderStyle(){return shadow(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:AnnotationBorderStyleType.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},kv=new WeakMap,hm=new WeakMap,Ju=new WeakMap,jv=new WeakMap,fp=new WeakSet,EE=async function(e,c){var b,_e;const d=e.firstChild||e,h=d.id=`${AnnotationPrefix}${c}`,g=await((b=ut(this,jv))==null?void 0:b.getAriaAttributes(h));if(g)for(const[et,rt]of g)d.setAttribute(et,rt);this.div.append(e),(_e=ut(this,kv))==null||_e.moveElementInDOM(this.div,e,d,!1)},wE=function(){var c;if(!ut(this,hm))return;const e=this.div;for(const[d,h]of ut(this,hm)){const g=e.querySelector(`[data-annotation-id="${d}"]`);if(!g)continue;h.className="annotationContent";const{firstChild:b}=g;b?b.nodeName==="CANVAS"?b.replaceWith(h):b.classList.contains("annotationContent")?b.after(h):b.before(h):g.append(h);const _e=ut(this,Ju).get(d);_e&&(_e._hasNoCanvas?((c=this._annotationEditorUIManager)==null||c.setMissingCanvas(d,g.id,h),_e._hasNoCanvas=!1):_e.canvas=h)}ut(this,hm).clear()},Mx);const EOL_PATTERN=/\r\n?|\n/g;var $o,Js,Pv,pm,_i,es,a1,l1,c1,p0,bu,f0,m0,u1,SE,d1;const Or=class Or extends AnnotationEditor{constructor(c){super({...c,name:"freeTextEditor"});Lt(this,es);Lt(this,$o);Lt(this,Js,"");Lt(this,Pv,`${this.id}-editor`);Lt(this,pm,null);Lt(this,_i);At(this,$o,c.color||Or._defaultColor||AnnotationEditor._defaultLineColor),At(this,_i,c.fontSize||Or._defaultFontSize)}static get _keyboardManager(){const c=Or.prototype,d=b=>b.isEmpty(),h=AnnotationEditorUIManager.TRANSLATE_SMALL,g=AnnotationEditorUIManager.TRANSLATE_BIG;return shadow(this,"_keyboardManager",new KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],c.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],c._translateEmpty,{args:[-h,0],checker:d}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],c._translateEmpty,{args:[-g,0],checker:d}],[["ArrowRight","mac+ArrowRight"],c._translateEmpty,{args:[h,0],checker:d}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],c._translateEmpty,{args:[g,0],checker:d}],[["ArrowUp","mac+ArrowUp"],c._translateEmpty,{args:[0,-h],checker:d}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],c._translateEmpty,{args:[0,-g],checker:d}],[["ArrowDown","mac+ArrowDown"],c._translateEmpty,{args:[0,h],checker:d}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],c._translateEmpty,{args:[0,g],checker:d}]]))}static initialize(c,d){AnnotationEditor.initialize(c,d);const h=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(h.getPropertyValue("--freetext-padding"))}static updateDefaultParams(c,d){switch(c){case AnnotationEditorParamsType.FREETEXT_SIZE:Or._defaultFontSize=d;break;case AnnotationEditorParamsType.FREETEXT_COLOR:Or._defaultColor=d;break}}updateParams(c,d){switch(c){case AnnotationEditorParamsType.FREETEXT_SIZE:$t(this,es,a1).call(this,d);break;case AnnotationEditorParamsType.FREETEXT_COLOR:$t(this,es,l1).call(this,d);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,Or._defaultFontSize],[AnnotationEditorParamsType.FREETEXT_COLOR,Or._defaultColor||AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.FREETEXT_SIZE,ut(this,_i)],[AnnotationEditorParamsType.FREETEXT_COLOR,ut(this,$o)]]}_translateEmpty(c,d){this._uiManager.translateSelectedEditors(c,d,!0)}getInitialTranslation(){const c=this.parentScale;return[-Or._internalPadding*c,-(Or._internalPadding+ut(this,_i))*c]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),At(this,pm,new AbortController);const c=this._uiManager.combinedSignal(ut(this,pm));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:c}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:c}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:c}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:c}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:c}),!0}disableEditMode(){var c;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",ut(this,Pv)),this._isDraggable=!0,(c=ut(this,pm))==null||c.abort(),At(this,pm,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(c){this._focusEventsAllowed&&(super.focusin(c),c.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(c){var d;this.width||(this.enableEditMode(),c&&this.editorDiv.focus(),(d=this._initialOptions)!=null&&d.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const c=ut(this,Js),d=At(this,Js,$t(this,es,c1).call(this).trimEnd());if(c===d)return;const h=g=>{if(At(this,Js,g),!g){this.remove();return}$t(this,es,m0).call(this),this._uiManager.rebuild(this),$t(this,es,p0).call(this)};this.addCommands({cmd:()=>{h(d)},undo:()=>{h(c)},mustExec:!1}),$t(this,es,p0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(c){c.target===this.div&&c.key==="Enter"&&(this.enterInEditMode(),c.preventDefault())}editorDivKeydown(c){Or._keyboardManager.exec(this,c)}editorDivFocus(c){this.isEditing=!0}editorDivBlur(c){this.isEditing=!1}editorDivInput(c){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let c,d;(this._isCopy||this.annotationElementId)&&(c=this.x,d=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",ut(this,Pv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:h}=this.editorDiv;if(h.fontSize=`calc(${ut(this,_i)}px * var(--total-scale-factor))`,h.color=ut(this,$o),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[g,b]=this.parentDimensions;if(this.annotationElementId){const{position:_e}=this._initialData;let[et,rt]=this.getInitialTranslation();[et,rt]=this.pageTranslationToScreen(et,rt);const[st,$]=this.pageDimensions,[_,nt]=this.pageTranslation;let it,ot;switch(this.rotation){case 0:it=c+(_e[0]-_)/st,ot=d+this.height-(_e[1]-nt)/$;break;case 90:it=c+(_e[0]-_)/st,ot=d-(_e[1]-nt)/$,[et,rt]=[rt,-et];break;case 180:it=c-this.width+(_e[0]-_)/st,ot=d-(_e[1]-nt)/$,[et,rt]=[-et,-rt];break;case 270:it=c+(_e[0]-_-this.height*$)/st,ot=d+(_e[1]-nt-this.width*st)/$,[et,rt]=[-rt,et];break}this.setAt(it*g,ot*b,et,rt)}else this._moveAfterPaste(c,d);$t(this,es,m0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(c){var it,ot,lt;const d=c.clipboardData||window.clipboardData,{types:h}=d;if(h.length===1&&h[0]==="text/plain")return;c.preventDefault();const g=$t(it=Or,bu,SE).call(it,d.getData("text")||"").replaceAll(EOL_PATTERN,`
`);if(!g)return;const b=window.getSelection();if(!b.rangeCount)return;this.editorDiv.normalize(),b.deleteFromDocument();const _e=b.getRangeAt(0);if(!g.includes(`
`)){_e.insertNode(document.createTextNode(g)),this.editorDiv.normalize(),b.collapseToStart();return}const{startContainer:et,startOffset:rt}=_e,st=[],$=[];if(et.nodeType===Node.TEXT_NODE){const at=et.parentElement;if($.push(et.nodeValue.slice(rt).replaceAll(EOL_PATTERN,"")),at!==this.editorDiv){let ct=st;for(const dt of this.editorDiv.childNodes){if(dt===at){ct=$;continue}ct.push($t(ot=Or,bu,f0).call(ot,dt))}}st.push(et.nodeValue.slice(0,rt).replaceAll(EOL_PATTERN,""))}else if(et===this.editorDiv){let at=st,ct=0;for(const dt of this.editorDiv.childNodes)ct++===rt&&(at=$),at.push($t(lt=Or,bu,f0).call(lt,dt))}At(this,Js,`${st.join(`
`)}${g}${$.join(`
`)}`),$t(this,es,m0).call(this);const _=new Range;let nt=Math.sumPrecise(st.map(at=>at.length));for(const{firstChild:at}of this.editorDiv.childNodes)if(at.nodeType===Node.TEXT_NODE){const ct=at.nodeValue.length;if(nt<=ct){_.setStart(at,nt),_.setEnd(at,nt);break}nt-=ct}b.removeAllRanges(),b.addRange(_)}get contentDiv(){return this.editorDiv}static async deserialize(c,d,h){var _e;let g=null;if(c instanceof FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:et,fontColor:rt},rect:st,rotation:$,id:_,popupRef:nt},textContent:it,textPosition:ot,parent:{page:{pageNumber:lt}}}=c;if(!it||it.length===0)return null;g=c={annotationType:AnnotationEditorType.FREETEXT,color:Array.from(rt),fontSize:et,value:it.join(`
`),position:ot,pageIndex:lt-1,rect:st.slice(0),rotation:$,id:_,deleted:!1,popupRef:nt}}const b=await super.deserialize(c,d,h);return At(b,_i,c.fontSize),At(b,$o,Util.makeHexColor(...c.color)),At(b,Js,$t(_e=Or,bu,SE).call(_e,c.value)),b.annotationElementId=c.id||null,b._initialData=g,b}serialize(c=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const d=Or._internalPadding*this.parentScale,h=this.getRect(d,d),g=AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:ut(this,$o)),b={annotationType:AnnotationEditorType.FREETEXT,color:g,fontSize:ut(this,_i),value:$t(this,es,u1).call(this),pageIndex:this.pageIndex,rect:h,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return c?(b.isCopy=!0,b):this.annotationElementId&&!$t(this,es,d1).call(this,b)?null:(b.id=this.annotationElementId,b)}renderAnnotationElement(c){const d=super.renderAnnotationElement(c);if(this.deleted)return d;const{style:h}=d;h.fontSize=`calc(${ut(this,_i)}px * var(--total-scale-factor))`,h.color=ut(this,$o),d.replaceChildren();for(const b of ut(this,Js).split(`
`)){const _e=document.createElement("div");_e.append(b?document.createTextNode(b):document.createElement("br")),d.append(_e)}const g=Or._internalPadding*this.parentScale;return c.updateEdited({rect:this.getRect(g,g),popupContent:ut(this,Js)}),d}resetAnnotationElement(c){super.resetAnnotationElement(c),c.resetEdited()}};$o=new WeakMap,Js=new WeakMap,Pv=new WeakMap,pm=new WeakMap,_i=new WeakMap,es=new WeakSet,a1=function(c){const d=g=>{this.editorDiv.style.fontSize=`calc(${g}px * var(--total-scale-factor))`,this.translate(0,-(g-ut(this,_i))*this.parentScale),At(this,_i,g),$t(this,es,p0).call(this)},h=ut(this,_i);this.addCommands({cmd:d.bind(this,c),undo:d.bind(this,h),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},l1=function(c){const d=g=>{At(this,$o,this.editorDiv.style.color=g)},h=ut(this,$o);this.addCommands({cmd:d.bind(this,c),undo:d.bind(this,h),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},c1=function(){var h;const c=[];this.editorDiv.normalize();let d=null;for(const g of this.editorDiv.childNodes)(d==null?void 0:d.nodeType)===Node.TEXT_NODE&&g.nodeName==="BR"||(c.push($t(h=Or,bu,f0).call(h,g)),d=g);return c.join(`
`)},p0=function(){const[c,d]=this.parentDimensions;let h;if(this.isAttachedToDOM)h=this.div.getBoundingClientRect();else{const{currentLayer:g,div:b}=this,_e=b.style.display,et=b.classList.contains("hidden");b.classList.remove("hidden"),b.style.display="hidden",g.div.append(this.div),h=b.getBoundingClientRect(),b.remove(),b.style.display=_e,b.classList.toggle("hidden",et)}this.rotation%180===this.parentRotation%180?(this.width=h.width/c,this.height=h.height/d):(this.width=h.height/c,this.height=h.width/d),this.fixAndSetPosition()},bu=new WeakSet,f0=function(c){return(c.nodeType===Node.TEXT_NODE?c.nodeValue:c.innerText).replaceAll(EOL_PATTERN,"")},m0=function(){if(this.editorDiv.replaceChildren(),!!ut(this,Js))for(const c of ut(this,Js).split(`
`)){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),this.editorDiv.append(d)}},u1=function(){return ut(this,Js).replaceAll(" "," ")},SE=function(c){return c.replaceAll(" "," ")},d1=function(c){const{value:d,fontSize:h,color:g,pageIndex:b}=this._initialData;return this._hasBeenMoved||c.value!==d||c.fontSize!==h||c.color.some((_e,et)=>_e!==g[et])||c.pageIndex!==b},Lt(Or,bu),Dn(Or,"_freeTextDefaultContent",""),Dn(Or,"_internalPadding",0),Dn(Or,"_defaultColor",null),Dn(Or,"_defaultFontSize",10),Dn(Or,"_type","freetext"),Dn(Or,"_editorType",AnnotationEditorType.FREETEXT);let FreeTextEditor=Or;class Outline{toSVGPath(){unreachable("Abstract method `toSVGPath` must be implemented.")}get box(){unreachable("Abstract getter `box` must be implemented.")}serialize(e,c){unreachable("Abstract method `serialize` must be implemented.")}static _rescale(e,c,d,h,g,b){b||(b=new Float32Array(e.length));for(let _e=0,et=e.length;_e<et;_e+=2)b[_e]=c+e[_e]*h,b[_e+1]=d+e[_e+1]*g;return b}static _rescaleAndSwap(e,c,d,h,g,b){b||(b=new Float32Array(e.length));for(let _e=0,et=e.length;_e<et;_e+=2)b[_e]=c+e[_e+1]*h,b[_e+1]=d+e[_e]*g;return b}static _translate(e,c,d,h){h||(h=new Float32Array(e.length));for(let g=0,b=e.length;g<b;g+=2)h[g]=c+e[g],h[g+1]=d+e[g+1];return h}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,c,d,h,g){switch(g){case 90:return[1-c/d,e/h];case 180:return[1-e/d,1-c/h];case 270:return[c/d,1-e/h];default:return[e/d,c/h]}}static _normalizePagePoint(e,c,d){switch(d){case 90:return[1-c,e];case 180:return[1-e,1-c];case 270:return[c,1-e];default:return[e,c]}}static createBezierPoints(e,c,d,h,g,b){return[(e+5*d)/6,(c+5*h)/6,(5*d+g)/6,(5*h+b)/6,(d+g)/2,(h+b)/2]}}Dn(Outline,"PRECISION",1e-4);var eo,Fo,Lx,$x,Tl,xr,fm,mm,Nv,Iv,Fx,Bx,_d,Ov,U0,z0,os,xy,h1,p1,f1,m1,g1,x1;const Ul=class Ul{constructor({x:e,y:c},d,h,g,b,_e=0){Lt(this,os);Lt(this,eo);Lt(this,Fo,[]);Lt(this,Lx);Lt(this,$x);Lt(this,Tl,[]);Lt(this,xr,new Float32Array(18));Lt(this,fm);Lt(this,mm);Lt(this,Nv);Lt(this,Iv);Lt(this,Fx);Lt(this,Bx);Lt(this,_d,[]);At(this,eo,d),At(this,Bx,g*h),At(this,$x,b),ut(this,xr).set([NaN,NaN,NaN,NaN,e,c],6),At(this,Lx,_e),At(this,Iv,ut(Ul,Ov)*h),At(this,Nv,ut(Ul,z0)*h),At(this,Fx,h),ut(this,_d).push(e,c)}isEmpty(){return isNaN(ut(this,xr)[8])}add({x:e,y:c}){var gt;At(this,fm,e),At(this,mm,c);const[d,h,g,b]=ut(this,eo);let[_e,et,rt,st]=ut(this,xr).subarray(8,12);const $=e-rt,_=c-st,nt=Math.hypot($,_);if(nt<ut(this,Nv))return!1;const it=nt-ut(this,Iv),ot=it/nt,lt=ot*$,at=ot*_;let ct=_e,dt=et;_e=rt,et=st,rt+=lt,st+=at,(gt=ut(this,_d))==null||gt.push(e,c);const ht=-at/it,pt=lt/it,ft=ht*ut(this,Bx),mt=pt*ut(this,Bx);return ut(this,xr).set(ut(this,xr).subarray(2,8),0),ut(this,xr).set([rt+ft,st+mt],4),ut(this,xr).set(ut(this,xr).subarray(14,18),12),ut(this,xr).set([rt-ft,st-mt],16),isNaN(ut(this,xr)[6])?(ut(this,Tl).length===0&&(ut(this,xr).set([_e+ft,et+mt],2),ut(this,Tl).push(NaN,NaN,NaN,NaN,(_e+ft-d)/g,(et+mt-h)/b),ut(this,xr).set([_e-ft,et-mt],14),ut(this,Fo).push(NaN,NaN,NaN,NaN,(_e-ft-d)/g,(et-mt-h)/b)),ut(this,xr).set([ct,dt,_e,et,rt,st],6),!this.isEmpty()):(ut(this,xr).set([ct,dt,_e,et,rt,st],6),Math.abs(Math.atan2(dt-et,ct-_e)-Math.atan2(at,lt))<Math.PI/2?([_e,et,rt,st]=ut(this,xr).subarray(2,6),ut(this,Tl).push(NaN,NaN,NaN,NaN,((_e+rt)/2-d)/g,((et+st)/2-h)/b),[_e,et,ct,dt]=ut(this,xr).subarray(14,18),ut(this,Fo).push(NaN,NaN,NaN,NaN,((ct+_e)/2-d)/g,((dt+et)/2-h)/b),!0):([ct,dt,_e,et,rt,st]=ut(this,xr).subarray(0,6),ut(this,Tl).push(((ct+5*_e)/6-d)/g,((dt+5*et)/6-h)/b,((5*_e+rt)/6-d)/g,((5*et+st)/6-h)/b,((_e+rt)/2-d)/g,((et+st)/2-h)/b),[rt,st,_e,et,ct,dt]=ut(this,xr).subarray(12,18),ut(this,Fo).push(((ct+5*_e)/6-d)/g,((dt+5*et)/6-h)/b,((5*_e+rt)/6-d)/g,((5*et+st)/6-h)/b,((_e+rt)/2-d)/g,((et+st)/2-h)/b),!0))}toSVGPath(){if(this.isEmpty())return"";const e=ut(this,Tl),c=ut(this,Fo);if(isNaN(ut(this,xr)[6])&&!this.isEmpty())return $t(this,os,h1).call(this);const d=[];d.push(`M${e[4]} ${e[5]}`);for(let h=6;h<e.length;h+=6)isNaN(e[h])?d.push(`L${e[h+4]} ${e[h+5]}`):d.push(`C${e[h]} ${e[h+1]} ${e[h+2]} ${e[h+3]} ${e[h+4]} ${e[h+5]}`);$t(this,os,f1).call(this,d);for(let h=c.length-6;h>=6;h-=6)isNaN(c[h])?d.push(`L${c[h+4]} ${c[h+5]}`):d.push(`C${c[h]} ${c[h+1]} ${c[h+2]} ${c[h+3]} ${c[h+4]} ${c[h+5]}`);return $t(this,os,p1).call(this,d),d.join(" ")}newFreeDrawOutline(e,c,d,h,g,b){return new FreeDrawOutline(e,c,d,h,g,b)}getOutlines(){var $;const e=ut(this,Tl),c=ut(this,Fo),d=ut(this,xr),[h,g,b,_e]=ut(this,eo),et=new Float32Array(((($=ut(this,_d))==null?void 0:$.length)??0)+2);for(let _=0,nt=et.length-2;_<nt;_+=2)et[_]=(ut(this,_d)[_]-h)/b,et[_+1]=(ut(this,_d)[_+1]-g)/_e;if(et[et.length-2]=(ut(this,fm)-h)/b,et[et.length-1]=(ut(this,mm)-g)/_e,isNaN(d[6])&&!this.isEmpty())return $t(this,os,m1).call(this,et);const rt=new Float32Array(ut(this,Tl).length+24+ut(this,Fo).length);let st=e.length;for(let _=0;_<st;_+=2){if(isNaN(e[_])){rt[_]=rt[_+1]=NaN;continue}rt[_]=e[_],rt[_+1]=e[_+1]}st=$t(this,os,x1).call(this,rt,st);for(let _=c.length-6;_>=6;_-=6)for(let nt=0;nt<6;nt+=2){if(isNaN(c[_+nt])){rt[st]=rt[st+1]=NaN,st+=2;continue}rt[st]=c[_+nt],rt[st+1]=c[_+nt+1],st+=2}return $t(this,os,g1).call(this,rt,st),this.newFreeDrawOutline(rt,et,ut(this,eo),ut(this,Fx),ut(this,Lx),ut(this,$x))}};eo=new WeakMap,Fo=new WeakMap,Lx=new WeakMap,$x=new WeakMap,Tl=new WeakMap,xr=new WeakMap,fm=new WeakMap,mm=new WeakMap,Nv=new WeakMap,Iv=new WeakMap,Fx=new WeakMap,Bx=new WeakMap,_d=new WeakMap,Ov=new WeakMap,U0=new WeakMap,z0=new WeakMap,os=new WeakSet,xy=function(){const e=ut(this,xr).subarray(4,6),c=ut(this,xr).subarray(16,18),[d,h,g,b]=ut(this,eo);return[(ut(this,fm)+(e[0]-c[0])/2-d)/g,(ut(this,mm)+(e[1]-c[1])/2-h)/b,(ut(this,fm)+(c[0]-e[0])/2-d)/g,(ut(this,mm)+(c[1]-e[1])/2-h)/b]},h1=function(){const[e,c,d,h]=ut(this,eo),[g,b,_e,et]=$t(this,os,xy).call(this);return`M${(ut(this,xr)[2]-e)/d} ${(ut(this,xr)[3]-c)/h} L${(ut(this,xr)[4]-e)/d} ${(ut(this,xr)[5]-c)/h} L${g} ${b} L${_e} ${et} L${(ut(this,xr)[16]-e)/d} ${(ut(this,xr)[17]-c)/h} L${(ut(this,xr)[14]-e)/d} ${(ut(this,xr)[15]-c)/h} Z`},p1=function(e){const c=ut(this,Fo);e.push(`L${c[4]} ${c[5]} Z`)},f1=function(e){const[c,d,h,g]=ut(this,eo),b=ut(this,xr).subarray(4,6),_e=ut(this,xr).subarray(16,18),[et,rt,st,$]=$t(this,os,xy).call(this);e.push(`L${(b[0]-c)/h} ${(b[1]-d)/g} L${et} ${rt} L${st} ${$} L${(_e[0]-c)/h} ${(_e[1]-d)/g}`)},m1=function(e){const c=ut(this,xr),[d,h,g,b]=ut(this,eo),[_e,et,rt,st]=$t(this,os,xy).call(this),$=new Float32Array(36);return $.set([NaN,NaN,NaN,NaN,(c[2]-d)/g,(c[3]-h)/b,NaN,NaN,NaN,NaN,(c[4]-d)/g,(c[5]-h)/b,NaN,NaN,NaN,NaN,_e,et,NaN,NaN,NaN,NaN,rt,st,NaN,NaN,NaN,NaN,(c[16]-d)/g,(c[17]-h)/b,NaN,NaN,NaN,NaN,(c[14]-d)/g,(c[15]-h)/b],0),this.newFreeDrawOutline($,e,ut(this,eo),ut(this,Fx),ut(this,Lx),ut(this,$x))},g1=function(e,c){const d=ut(this,Fo);return e.set([NaN,NaN,NaN,NaN,d[4],d[5]],c),c+=6},x1=function(e,c){const d=ut(this,xr).subarray(4,6),h=ut(this,xr).subarray(16,18),[g,b,_e,et]=ut(this,eo),[rt,st,$,_]=$t(this,os,xy).call(this);return e.set([NaN,NaN,NaN,NaN,(d[0]-g)/_e,(d[1]-b)/et,NaN,NaN,NaN,NaN,rt,st,NaN,NaN,NaN,NaN,$,_,NaN,NaN,NaN,NaN,(h[0]-g)/_e,(h[1]-b)/et],c),c+=24},Lt(Ul,Ov,8),Lt(Ul,U0,2),Lt(Ul,z0,ut(Ul,Ov)+ut(Ul,U0));let FreeDrawOutliner=Ul;var Ux,gm,uu,Dv,to,Mv,Qr,V0,y1;class FreeDrawOutline extends Outline{constructor(c,d,h,g,b,_e){super();Lt(this,V0);Lt(this,Ux);Lt(this,gm,new Float32Array(4));Lt(this,uu);Lt(this,Dv);Lt(this,to);Lt(this,Mv);Lt(this,Qr);At(this,Qr,c),At(this,to,d),At(this,Ux,h),At(this,Mv,g),At(this,uu,b),At(this,Dv,_e),this.lastPoint=[NaN,NaN],$t(this,V0,y1).call(this,_e);const[et,rt,st,$]=ut(this,gm);for(let _=0,nt=c.length;_<nt;_+=2)c[_]=(c[_]-et)/st,c[_+1]=(c[_+1]-rt)/$;for(let _=0,nt=d.length;_<nt;_+=2)d[_]=(d[_]-et)/st,d[_+1]=(d[_+1]-rt)/$}toSVGPath(){const c=[`M${ut(this,Qr)[4]} ${ut(this,Qr)[5]}`];for(let d=6,h=ut(this,Qr).length;d<h;d+=6){if(isNaN(ut(this,Qr)[d])){c.push(`L${ut(this,Qr)[d+4]} ${ut(this,Qr)[d+5]}`);continue}c.push(`C${ut(this,Qr)[d]} ${ut(this,Qr)[d+1]} ${ut(this,Qr)[d+2]} ${ut(this,Qr)[d+3]} ${ut(this,Qr)[d+4]} ${ut(this,Qr)[d+5]}`)}return c.push("Z"),c.join(" ")}serialize([c,d,h,g],b){const _e=h-c,et=g-d;let rt,st;switch(b){case 0:rt=Outline._rescale(ut(this,Qr),c,g,_e,-et),st=Outline._rescale(ut(this,to),c,g,_e,-et);break;case 90:rt=Outline._rescaleAndSwap(ut(this,Qr),c,d,_e,et),st=Outline._rescaleAndSwap(ut(this,to),c,d,_e,et);break;case 180:rt=Outline._rescale(ut(this,Qr),h,d,-_e,et),st=Outline._rescale(ut(this,to),h,d,-_e,et);break;case 270:rt=Outline._rescaleAndSwap(ut(this,Qr),h,g,-_e,-et),st=Outline._rescaleAndSwap(ut(this,to),h,g,-_e,-et);break}return{outline:Array.from(rt),points:[Array.from(st)]}}get box(){return ut(this,gm)}newOutliner(c,d,h,g,b,_e=0){return new FreeDrawOutliner(c,d,h,g,b,_e)}getNewOutline(c,d){const[h,g,b,_e]=ut(this,gm),[et,rt,st,$]=ut(this,Ux),_=b*st,nt=_e*$,it=h*st+et,ot=g*$+rt,lt=this.newOutliner({x:ut(this,to)[0]*_+it,y:ut(this,to)[1]*nt+ot},ut(this,Ux),ut(this,Mv),c,ut(this,Dv),d??ut(this,uu));for(let at=2;at<ut(this,to).length;at+=2)lt.add({x:ut(this,to)[at]*_+it,y:ut(this,to)[at+1]*nt+ot});return lt.getOutlines()}}Ux=new WeakMap,gm=new WeakMap,uu=new WeakMap,Dv=new WeakMap,to=new WeakMap,Mv=new WeakMap,Qr=new WeakMap,V0=new WeakSet,y1=function(c){const d=ut(this,Qr);let h=d[4],g=d[5];const b=[h,g,h,g];let _e=h,et=g;const rt=c?Math.max:Math.min;for(let $=6,_=d.length;$<_;$+=6){const nt=d[$+4],it=d[$+5];if(isNaN(d[$]))Util.pointBoundingBox(nt,it,b),et<it?(_e=nt,et=it):et===it&&(_e=rt(_e,nt));else{const ot=[1/0,1/0,-1/0,-1/0];Util.bezierBoundingBox(h,g,...d.slice($,$+6),ot),Util.rectBoundingBox(...ot,b),et<ot[3]?(_e=ot[2],et=ot[3]):et===ot[3]&&(_e=rt(_e,ot[2]))}h=nt,g=it}const st=ut(this,gm);st[0]=b[0]-ut(this,uu),st[1]=b[1]-ut(this,uu),st[2]=b[2]-b[0]+2*ut(this,uu),st[3]=b[3]-b[1]+2*ut(this,uu),this.lastPoint=[_e,et]};var Lv,$v,_h,Bo,$s,b1,g0,v1,E1,TE;class HighlightOutliner{constructor(e,c=0,d=0,h=!0){Lt(this,$s);Lt(this,Lv);Lt(this,$v);Lt(this,_h,[]);Lt(this,Bo,[]);const g=[1/0,1/0,-1/0,-1/0],b=10**-4;for(const{x:nt,y:it,width:ot,height:lt}of e){const at=Math.floor((nt-c)/b)*b,ct=Math.ceil((nt+ot+c)/b)*b,dt=Math.floor((it-c)/b)*b,ht=Math.ceil((it+lt+c)/b)*b,pt=[at,dt,ht,!0],ft=[ct,dt,ht,!1];ut(this,_h).push(pt,ft),Util.rectBoundingBox(at,dt,ct,ht,g)}const _e=g[2]-g[0]+2*d,et=g[3]-g[1]+2*d,rt=g[0]-d,st=g[1]-d,$=ut(this,_h).at(h?-1:-2),_=[$[0],$[2]];for(const nt of ut(this,_h)){const[it,ot,lt]=nt;nt[0]=(it-rt)/_e,nt[1]=(ot-st)/et,nt[2]=(lt-st)/et}At(this,Lv,new Float32Array([rt,st,_e,et])),At(this,$v,_)}getOutlines(){ut(this,_h).sort((c,d)=>c[0]-d[0]||c[1]-d[1]||c[2]-d[2]);const e=[];for(const c of ut(this,_h))c[3]?(e.push(...$t(this,$s,TE).call(this,c)),$t(this,$s,v1).call(this,c)):($t(this,$s,E1).call(this,c),e.push(...$t(this,$s,TE).call(this,c)));return $t(this,$s,b1).call(this,e)}}Lv=new WeakMap,$v=new WeakMap,_h=new WeakMap,Bo=new WeakMap,$s=new WeakSet,b1=function(e){const c=[],d=new Set;for(const b of e){const[_e,et,rt]=b;c.push([_e,et,b],[_e,rt,b])}c.sort((b,_e)=>b[1]-_e[1]||b[0]-_e[0]);for(let b=0,_e=c.length;b<_e;b+=2){const et=c[b][2],rt=c[b+1][2];et.push(rt),rt.push(et),d.add(et),d.add(rt)}const h=[];let g;for(;d.size>0;){const b=d.values().next().value;let[_e,et,rt,st,$]=b;d.delete(b);let _=_e,nt=et;for(g=[_e,rt],h.push(g);;){let it;if(d.has(st))it=st;else if(d.has($))it=$;else break;d.delete(it),[_e,et,rt,st,$]=it,_!==_e&&(g.push(_,nt,_e,nt===et?et:rt),_=_e),nt=nt===et?rt:et}g.push(_,nt)}return new HighlightOutline(h,ut(this,Lv),ut(this,$v))},g0=function(e){const c=ut(this,Bo);let d=0,h=c.length-1;for(;d<=h;){const g=d+h>>1,b=c[g][0];if(b===e)return g;b<e?d=g+1:h=g-1}return h+1},v1=function([,e,c]){const d=$t(this,$s,g0).call(this,e);ut(this,Bo).splice(d,0,[e,c])},E1=function([,e,c]){const d=$t(this,$s,g0).call(this,e);for(let h=d;h<ut(this,Bo).length;h++){const[g,b]=ut(this,Bo)[h];if(g!==e)break;if(g===e&&b===c){ut(this,Bo).splice(h,1);return}}for(let h=d-1;h>=0;h--){const[g,b]=ut(this,Bo)[h];if(g!==e)break;if(g===e&&b===c){ut(this,Bo).splice(h,1);return}}},TE=function(e){const[c,d,h]=e,g=[[c,d,h]],b=$t(this,$s,g0).call(this,h);for(let _e=0;_e<b;_e++){const[et,rt]=ut(this,Bo)[_e];for(let st=0,$=g.length;st<$;st++){const[,_,nt]=g[st];if(!(rt<=_||nt<=et)){if(_>=et){if(nt>rt)g[st][1]=rt;else{if($===1)return[];g.splice(st,1),st--,$--}continue}g[st][2]=et,nt>rt&&g.push([c,rt,nt])}}}return g};var Fv,zx;class HighlightOutline extends Outline{constructor(c,d,h){super();Lt(this,Fv);Lt(this,zx);At(this,zx,c),At(this,Fv,d),this.lastPoint=h}toSVGPath(){const c=[];for(const d of ut(this,zx)){let[h,g]=d;c.push(`M${h} ${g}`);for(let b=2;b<d.length;b+=2){const _e=d[b],et=d[b+1];_e===h?(c.push(`V${et}`),g=et):et===g&&(c.push(`H${_e}`),h=_e)}c.push("Z")}return c.join(" ")}serialize([c,d,h,g],b){const _e=[],et=h-c,rt=g-d;for(const st of ut(this,zx)){const $=new Array(st.length);for(let _=0;_<st.length;_+=2)$[_]=c+st[_]*et,$[_+1]=g-st[_+1]*rt;_e.push($)}return _e}get box(){return ut(this,Fv)}get classNamesForOutlining(){return["highlightOutline"]}}Fv=new WeakMap,zx=new WeakMap;class FreeHighlightOutliner extends FreeDrawOutliner{newFreeDrawOutline(e,c,d,h,g,b){return new FreeHighlightOutline(e,c,d,h,g,b)}}class FreeHighlightOutline extends FreeDrawOutline{newOutliner(e,c,d,h,g,b=0){return new FreeHighlightOutliner(e,c,d,h,g,b)}}var Uo,xm,Vx,ss,Bv,Hx,Uv,zv,ep,zo,Gx,Vv,Nr,AE,_E,RE,bp,w1,Au;const zs=class zs{constructor({editor:e=null,uiManager:c=null}){Lt(this,Nr);Lt(this,Uo,null);Lt(this,xm,null);Lt(this,Vx);Lt(this,ss,null);Lt(this,Bv,!1);Lt(this,Hx,!1);Lt(this,Uv,null);Lt(this,zv);Lt(this,ep,null);Lt(this,zo,null);Lt(this,Gx);var d;e?(At(this,Hx,!1),At(this,Gx,AnnotationEditorParamsType.HIGHLIGHT_COLOR),At(this,Uv,e)):(At(this,Hx,!0),At(this,Gx,AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR)),At(this,zo,(e==null?void 0:e._uiManager)||c),At(this,zv,ut(this,zo)._eventBus),At(this,Vx,(e==null?void 0:e.color)||((d=ut(this,zo))==null?void 0:d.highlightColors.values().next().value)||"#FFFF98"),ut(zs,Vv)||At(zs,Vv,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return shadow(this,"_keyboardManager",new KeyboardManager([[["Escape","mac+Escape"],zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zs.prototype._moveToPrevious],[["Home","mac+Home"],zs.prototype._moveToBeginning],[["End","mac+End"],zs.prototype._moveToEnd]]))}renderButton(){const e=At(this,Uo,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const c=ut(this,zo)._signal;e.addEventListener("click",$t(this,Nr,bp).bind(this),{signal:c}),e.addEventListener("keydown",$t(this,Nr,RE).bind(this),{signal:c});const d=At(this,xm,document.createElement("span"));return d.className="swatch",d.setAttribute("aria-hidden",!0),d.style.backgroundColor=ut(this,Vx),e.append(d),e}renderMainDropdown(){const e=At(this,ss,$t(this,Nr,AE).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===ut(this,Uo)){$t(this,Nr,bp).call(this,e);return}const c=e.target.getAttribute("data-color");c&&$t(this,Nr,_E).call(this,c,e)}_moveToNext(e){var c,d;if(!ut(this,Nr,Au)){$t(this,Nr,bp).call(this,e);return}if(e.target===ut(this,Uo)){(c=ut(this,ss).firstChild)==null||c.focus();return}(d=e.target.nextSibling)==null||d.focus()}_moveToPrevious(e){var c,d;if(e.target===((c=ut(this,ss))==null?void 0:c.firstChild)||e.target===ut(this,Uo)){ut(this,Nr,Au)&&this._hideDropdownFromKeyboard();return}ut(this,Nr,Au)||$t(this,Nr,bp).call(this,e),(d=e.target.previousSibling)==null||d.focus()}_moveToBeginning(e){var c;if(!ut(this,Nr,Au)){$t(this,Nr,bp).call(this,e);return}(c=ut(this,ss).firstChild)==null||c.focus()}_moveToEnd(e){var c;if(!ut(this,Nr,Au)){$t(this,Nr,bp).call(this,e);return}(c=ut(this,ss).lastChild)==null||c.focus()}hideDropdown(){var e,c;(e=ut(this,ss))==null||e.classList.add("hidden"),(c=ut(this,ep))==null||c.abort(),At(this,ep,null)}_hideDropdownFromKeyboard(){var e;if(!ut(this,Hx)){if(!ut(this,Nr,Au)){(e=ut(this,Uv))==null||e.unselect();return}this.hideDropdown(),ut(this,Uo).focus({preventScroll:!0,focusVisible:ut(this,Bv)})}}updateColor(e){if(ut(this,xm)&&(ut(this,xm).style.backgroundColor=e),!ut(this,ss))return;const c=ut(this,zo).highlightColors.values();for(const d of ut(this,ss).children)d.setAttribute("aria-selected",c.next().value===e)}destroy(){var e,c;(e=ut(this,Uo))==null||e.remove(),At(this,Uo,null),At(this,xm,null),(c=ut(this,ss))==null||c.remove(),At(this,ss,null)}};Uo=new WeakMap,xm=new WeakMap,Vx=new WeakMap,ss=new WeakMap,Bv=new WeakMap,Hx=new WeakMap,Uv=new WeakMap,zv=new WeakMap,ep=new WeakMap,zo=new WeakMap,Gx=new WeakMap,Vv=new WeakMap,Nr=new WeakSet,AE=function(){const e=document.createElement("div"),c=ut(this,zo)._signal;e.addEventListener("contextmenu",noContextMenu,{signal:c}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[d,h]of ut(this,zo).highlightColors){const g=document.createElement("button");g.tabIndex="0",g.role="option",g.setAttribute("data-color",h),g.title=d,g.setAttribute("data-l10n-id",ut(zs,Vv)[d]);const b=document.createElement("span");g.append(b),b.className="swatch",b.style.backgroundColor=h,g.setAttribute("aria-selected",h===ut(this,Vx)),g.addEventListener("click",$t(this,Nr,_E).bind(this,h),{signal:c}),e.append(g)}return e.addEventListener("keydown",$t(this,Nr,RE).bind(this),{signal:c}),e},_E=function(e,c){c.stopPropagation(),ut(this,zv).dispatch("switchannotationeditorparams",{source:this,type:ut(this,Gx),value:e})},RE=function(e){zs._keyboardManager.exec(this,e)},bp=function(e){if(ut(this,Nr,Au)){this.hideDropdown();return}if(At(this,Bv,e.detail===0),ut(this,ep)||(At(this,ep,new AbortController),window.addEventListener("pointerdown",$t(this,Nr,w1).bind(this),{signal:ut(this,zo).combinedSignal(ut(this,ep))})),ut(this,ss)){ut(this,ss).classList.remove("hidden");return}const c=At(this,ss,$t(this,Nr,AE).call(this));ut(this,Uo).append(c)},w1=function(e){var c;(c=ut(this,ss))!=null&&c.contains(e.target)||this.hideDropdown()},Au=function(){return ut(this,ss)&&!ut(this,ss).classList.contains("hidden")},Lt(zs,Vv,null);let ColorPicker=zs;var Wx,Hv,du,ym,qx,Gs,Gv,Wv,bm,bo,no,bs,Kx,hu,Cs,Xx,vo,qv,hr,CE,x0,S1,T1,A1,kE,vp,So,Bm,_1,y0,yy,R1,C1,k1,j1,P1;const _r=class _r extends AnnotationEditor{constructor(c){super({...c,name:"highlightEditor"});Lt(this,hr);Lt(this,Wx,null);Lt(this,Hv,0);Lt(this,du);Lt(this,ym,null);Lt(this,qx,null);Lt(this,Gs,null);Lt(this,Gv,null);Lt(this,Wv,0);Lt(this,bm,null);Lt(this,bo,null);Lt(this,no,null);Lt(this,bs,!1);Lt(this,Kx,null);Lt(this,hu);Lt(this,Cs,null);Lt(this,Xx,"");Lt(this,vo);Lt(this,qv,"");this.color=c.color||_r._defaultColor,At(this,vo,c.thickness||_r._defaultThickness),At(this,hu,c.opacity||_r._defaultOpacity),At(this,du,c.boxes||null),At(this,qv,c.methodOfCreation||""),At(this,Xx,c.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",c.highlightId>-1?(At(this,bs,!0),$t(this,hr,x0).call(this,c),$t(this,hr,vp).call(this)):ut(this,du)&&(At(this,Wx,c.anchorNode),At(this,Hv,c.anchorOffset),At(this,Gv,c.focusNode),At(this,Wv,c.focusOffset),$t(this,hr,CE).call(this),$t(this,hr,vp).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const c=_r.prototype;return shadow(this,"_keyboardManager",new KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],c._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],c._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],c._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],c._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:ut(this,bs)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:ut(this,vo),methodOfCreation:ut(this,qv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(c){return{numberOfColors:c.get("color").size}}static initialize(c,d){var h;AnnotationEditor.initialize(c,d),_r._defaultColor||(_r._defaultColor=((h=d.highlightColors)==null?void 0:h.values().next().value)||"#fff066")}static updateDefaultParams(c,d){switch(c){case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:_r._defaultColor=d;break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:_r._defaultThickness=d;break}}translateInPage(c,d){}get toolbarPosition(){return ut(this,Kx)}updateParams(c,d){switch(c){case AnnotationEditorParamsType.HIGHLIGHT_COLOR:$t(this,hr,S1).call(this,d);break;case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:$t(this,hr,T1).call(this,d);break}}static get defaultPropertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,_r._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,_r._defaultThickness]]}get propertiesToUpdate(){return[[AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||_r._defaultColor],[AnnotationEditorParamsType.HIGHLIGHT_THICKNESS,ut(this,vo)||_r._defaultThickness],[AnnotationEditorParamsType.HIGHLIGHT_FREE,ut(this,bs)]]}async addEditToolbar(){const c=await super.addEditToolbar();return c?(this._uiManager.highlightColors&&(At(this,qx,new ColorPicker({editor:this})),c.addColorPicker(ut(this,qx))),c):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition($t(this,hr,yy).call(this))}getBaseTranslation(){return[0,0]}getRect(c,d){return super.getRect(c,d,$t(this,hr,yy).call(this))}onceAdded(c){this.annotationElementId||this.parent.addUndoableEditor(this),c&&this.div.focus()}remove(){$t(this,hr,kE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($t(this,hr,vp).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(c){var h;let d=!1;this.parent&&!c?$t(this,hr,kE).call(this):c&&($t(this,hr,vp).call(this,c),d=!this.parent&&((h=this.div)==null?void 0:h.classList.contains("selectedEditor"))),super.setParent(c),this.show(this._isVisible),d&&this.select()}rotate(c){var g,b,_e;const{drawLayer:d}=this.parent;let h;ut(this,bs)?(c=(c-this.rotation+360)%360,h=$t(g=_r,So,Bm).call(g,ut(this,bo).box,c)):h=$t(b=_r,So,Bm).call(b,[this.x,this.y,this.width,this.height],c),d.updateProperties(ut(this,no),{bbox:h,root:{"data-main-rotation":c}}),d.updateProperties(ut(this,Cs),{bbox:$t(_e=_r,So,Bm).call(_e,ut(this,Gs).box,c),root:{"data-main-rotation":c}})}render(){if(this.div)return this.div;const c=super.render();ut(this,Xx)&&(c.setAttribute("aria-label",ut(this,Xx)),c.setAttribute("role","mark")),ut(this,bs)?c.classList.add("free"):this.div.addEventListener("keydown",$t(this,hr,_1).bind(this),{signal:this._uiManager._signal});const d=At(this,bm,document.createElement("div"));c.append(d),d.setAttribute("aria-hidden","true"),d.className="internal",d.style.clipPath=ut(this,ym);const[h,g]=this.parentDimensions;return this.setDims(this.width*h,this.height*g),bindEvents(this,ut(this,bm),["pointerover","pointerleave"]),this.enableEditing(),c}pointerover(){var c;this.isSelected||(c=this.parent)==null||c.drawLayer.updateProperties(ut(this,Cs),{rootClass:{hovered:!0}})}pointerleave(){var c;this.isSelected||(c=this.parent)==null||c.drawLayer.updateProperties(ut(this,Cs),{rootClass:{hovered:!1}})}_moveCaret(c){switch(this.parent.unselect(this),c){case 0:case 2:$t(this,hr,y0).call(this,!0);break;case 1:case 3:$t(this,hr,y0).call(this,!1);break}}select(){var c;super.select(),ut(this,Cs)&&((c=this.parent)==null||c.drawLayer.updateProperties(ut(this,Cs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var c;super.unselect(),ut(this,Cs)&&((c=this.parent)==null||c.drawLayer.updateProperties(ut(this,Cs),{rootClass:{selected:!1}}),ut(this,bs)||$t(this,hr,y0).call(this,!1))}get _mustFixPosition(){return!ut(this,bs)}show(c=this._isVisible){super.show(c),this.parent&&(this.parent.drawLayer.updateProperties(ut(this,no),{rootClass:{hidden:!c}}),this.parent.drawLayer.updateProperties(ut(this,Cs),{rootClass:{hidden:!c}}))}static startHighlighting(c,d,{target:h,x:g,y:b}){const{x:_e,y:et,width:rt,height:st}=h.getBoundingClientRect(),$=new AbortController,_=c.combinedSignal($),nt=it=>{$.abort(),$t(this,So,j1).call(this,c,it)};window.addEventListener("blur",nt,{signal:_}),window.addEventListener("pointerup",nt,{signal:_}),window.addEventListener("pointerdown",stopEvent,{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",noContextMenu,{signal:_}),h.addEventListener("pointermove",$t(this,So,k1).bind(this,c),{signal:_}),this._freeHighlight=new FreeHighlightOutliner({x:g,y:b},[_e,et,rt,st],c.scale,this._defaultThickness/2,d,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=c.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(c,d,h){var ot,lt,at,ct;let g=null;if(c instanceof HighlightAnnotationElement){const{data:{quadPoints:dt,rect:ht,rotation:pt,id:ft,color:mt,opacity:xt,popupRef:gt},parent:{page:{pageNumber:Et}}}=c;g=c={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(mt),opacity:xt,quadPoints:dt,boxes:null,pageIndex:Et-1,rect:ht.slice(0),rotation:pt,id:ft,deleted:!1,popupRef:gt}}else if(c instanceof InkAnnotationElement){const{data:{inkLists:dt,rect:ht,rotation:pt,id:ft,color:mt,borderStyle:{rawWidth:xt},popupRef:gt},parent:{page:{pageNumber:Et}}}=c;g=c={annotationType:AnnotationEditorType.HIGHLIGHT,color:Array.from(mt),thickness:xt,inkLists:dt,boxes:null,pageIndex:Et-1,rect:ht.slice(0),rotation:pt,id:ft,deleted:!1,popupRef:gt}}const{color:b,quadPoints:_e,inkLists:et,opacity:rt}=c,st=await super.deserialize(c,d,h);st.color=Util.makeHexColor(...b),At(st,hu,rt||1),et&&At(st,vo,c.thickness),st.annotationElementId=c.id||null,st._initialData=g;const[$,_]=st.pageDimensions,[nt,it]=st.pageTranslation;if(_e){const dt=At(st,du,[]);for(let ht=0;ht<_e.length;ht+=8)dt.push({x:(_e[ht]-nt)/$,y:1-(_e[ht+1]-it)/_,width:(_e[ht+2]-_e[ht])/$,height:(_e[ht+1]-_e[ht+5])/_});$t(ot=st,hr,CE).call(ot),$t(lt=st,hr,vp).call(lt),st.rotate(st.rotation)}else if(et){At(st,bs,!0);const dt=et[0],ht={x:dt[0]-nt,y:_-(dt[1]-it)},pt=new FreeHighlightOutliner(ht,[0,0,$,_],1,ut(st,vo)/2,!0,.001);for(let xt=0,gt=dt.length;xt<gt;xt+=2)ht.x=dt[xt]-nt,ht.y=_-(dt[xt+1]-it),pt.add(ht);const{id:ft,clipPathId:mt}=d.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:st.color,"fill-opacity":st._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:pt.toSVGPath()}},!0,!0);$t(at=st,hr,x0).call(at,{highlightOutlines:pt.getOutlines(),highlightId:ft,clipPathId:mt}),$t(ct=st,hr,vp).call(ct),st.rotate(st.parentRotation)}return st}serialize(c=!1){if(this.isEmpty()||c)return null;if(this.deleted)return this.serializeDeleted();const d=this.getRect(0,0),h=AnnotationEditor._colorManager.convert(this.color),g={annotationType:AnnotationEditorType.HIGHLIGHT,color:h,opacity:ut(this,hu),thickness:ut(this,vo),quadPoints:$t(this,hr,R1).call(this),outlines:$t(this,hr,C1).call(this,d),pageIndex:this.pageIndex,rect:d,rotation:$t(this,hr,yy).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!$t(this,hr,P1).call(this,g)?null:(g.id=this.annotationElementId,g)}renderAnnotationElement(c){return c.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Wx=new WeakMap,Hv=new WeakMap,du=new WeakMap,ym=new WeakMap,qx=new WeakMap,Gs=new WeakMap,Gv=new WeakMap,Wv=new WeakMap,bm=new WeakMap,bo=new WeakMap,no=new WeakMap,bs=new WeakMap,Kx=new WeakMap,hu=new WeakMap,Cs=new WeakMap,Xx=new WeakMap,vo=new WeakMap,qv=new WeakMap,hr=new WeakSet,CE=function(){const c=new HighlightOutliner(ut(this,du),.001);At(this,bo,c.getOutlines()),[this.x,this.y,this.width,this.height]=ut(this,bo).box;const d=new HighlightOutliner(ut(this,du),.0025,.001,this._uiManager.direction==="ltr");At(this,Gs,d.getOutlines());const{lastPoint:h}=ut(this,Gs);At(this,Kx,[(h[0]-this.x)/this.width,(h[1]-this.y)/this.height])},x0=function({highlightOutlines:c,highlightId:d,clipPathId:h}){var $,_;if(At(this,bo,c),At(this,Gs,c.getNewOutline(ut(this,vo)/2+1.5,.0025)),d>=0)At(this,no,d),At(this,ym,h),this.parent.drawLayer.finalizeDraw(d,{bbox:c.box,path:{d:c.toSVGPath()}}),At(this,Cs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:ut(this,Gs).box,path:{d:ut(this,Gs).toSVGPath()}},!0));else if(this.parent){const nt=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(ut(this,no),{bbox:$t($=_r,So,Bm).call($,ut(this,bo).box,(nt-this.rotation+360)%360),path:{d:c.toSVGPath()}}),this.parent.drawLayer.updateProperties(ut(this,Cs),{bbox:$t(_=_r,So,Bm).call(_,ut(this,Gs).box,nt),path:{d:ut(this,Gs).toSVGPath()}})}const[b,_e,et,rt]=c.box;switch(this.rotation){case 0:this.x=b,this.y=_e,this.width=et,this.height=rt;break;case 90:{const[nt,it]=this.parentDimensions;this.x=_e,this.y=1-b,this.width=et*it/nt,this.height=rt*nt/it;break}case 180:this.x=1-b,this.y=1-_e,this.width=et,this.height=rt;break;case 270:{const[nt,it]=this.parentDimensions;this.x=1-_e,this.y=b,this.width=et*it/nt,this.height=rt*nt/it;break}}const{lastPoint:st}=ut(this,Gs);At(this,Kx,[(st[0]-b)/et,(st[1]-_e)/rt])},S1=function(c){const d=(b,_e)=>{var et,rt;this.color=b,At(this,hu,_e),(et=this.parent)==null||et.drawLayer.updateProperties(ut(this,no),{root:{fill:b,"fill-opacity":_e}}),(rt=ut(this,qx))==null||rt.updateColor(b)},h=this.color,g=ut(this,hu);this.addCommands({cmd:d.bind(this,c,_r._defaultOpacity),undo:d.bind(this,h,g),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(c)},!0)},T1=function(c){const d=ut(this,vo),h=g=>{At(this,vo,g),$t(this,hr,A1).call(this,g)};this.addCommands({cmd:h.bind(this,c),undo:h.bind(this,d),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:c},!0)},A1=function(c){if(!ut(this,bs))return;$t(this,hr,x0).call(this,{highlightOutlines:ut(this,bo).getNewOutline(c/2)}),this.fixAndSetPosition();const[d,h]=this.parentDimensions;this.setDims(this.width*d,this.height*h)},kE=function(){ut(this,no)===null||!this.parent||(this.parent.drawLayer.remove(ut(this,no)),At(this,no,null),this.parent.drawLayer.remove(ut(this,Cs)),At(this,Cs,null))},vp=function(c=this.parent){ut(this,no)===null&&({id:as(this,no)._,clipPathId:as(this,ym)._}=c.drawLayer.draw({bbox:ut(this,bo).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":ut(this,hu)},rootClass:{highlight:!0,free:ut(this,bs)},path:{d:ut(this,bo).toSVGPath()}},!1,!0),At(this,Cs,c.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:ut(this,bs)},bbox:ut(this,Gs).box,path:{d:ut(this,Gs).toSVGPath()}},ut(this,bs))),ut(this,bm)&&(ut(this,bm).style.clipPath=ut(this,ym)))},So=new WeakSet,Bm=function([c,d,h,g],b){switch(b){case 90:return[1-d-g,c,g,h];case 180:return[1-c-h,1-d-g,h,g];case 270:return[d,1-c-h,g,h]}return[c,d,h,g]},_1=function(c){_r._keyboardManager.exec(this,c)},y0=function(c){if(!ut(this,Wx))return;const d=window.getSelection();c?d.setPosition(ut(this,Wx),ut(this,Hv)):d.setPosition(ut(this,Gv),ut(this,Wv))},yy=function(){return ut(this,bs)?this.rotation:0},R1=function(){if(ut(this,bs))return null;const[c,d]=this.pageDimensions,[h,g]=this.pageTranslation,b=ut(this,du),_e=new Float32Array(b.length*8);let et=0;for(const{x:rt,y:st,width:$,height:_}of b){const nt=rt*c+h,it=(1-st)*d+g;_e[et]=_e[et+4]=nt,_e[et+1]=_e[et+3]=it,_e[et+2]=_e[et+6]=nt+$*c,_e[et+5]=_e[et+7]=it-_*d,et+=8}return _e},C1=function(c){return ut(this,bo).serialize(c,$t(this,hr,yy).call(this))},k1=function(c,d){this._freeHighlight.add(d)&&c.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},j1=function(c,d){this._freeHighlight.isEmpty()?c.drawLayer.remove(this._freeHighlightId):c.createAndAddNewEditor(d,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},P1=function(c){const{color:d}=this._initialData;return c.color.some((h,g)=>h!==d[g])},Lt(_r,So),Dn(_r,"_defaultColor",null),Dn(_r,"_defaultOpacity",1),Dn(_r,"_defaultThickness",12),Dn(_r,"_type","highlight"),Dn(_r,"_editorType",AnnotationEditorType.HIGHLIGHT),Dn(_r,"_freeHighlightId",-1),Dn(_r,"_freeHighlight",null),Dn(_r,"_freeHighlightClipId","");let HighlightEditor=_r;var vm;class DrawingOptions{constructor(){Lt(this,vm,Object.create(null))}updateProperty(e,c){this[e]=c,this.updateSVGProperty(e,c)}updateProperties(e){if(e)for(const[c,d]of Object.entries(e))c.startsWith("_")||this.updateProperty(c,d)}updateSVGProperty(e,c){ut(this,vm)[e]=c}toSVGProperties(){const e=ut(this,vm);return At(this,vm,Object.create(null)),{root:e}}reset(){At(this,vm,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){unreachable("Not implemented")}}vm=new WeakMap;var ro,Yx,us,Em,wm,tp,np,rp,Sm,Tr,jE,PE,NE,by,N1,b0,vy,Um;const Yn=class Yn extends AnnotationEditor{constructor(c){super(c);Lt(this,Tr);Lt(this,ro,null);Lt(this,Yx);Dn(this,"_drawId",null);At(this,Yx,c.mustBeCommitted||!1),this._addOutlines(c)}_addOutlines(c){c.drawOutlines&&($t(this,Tr,jE).call(this,c),$t(this,Tr,by).call(this))}static _mergeSVGProperties(c,d){const h=new Set(Object.keys(c));for(const[g,b]of Object.entries(d))h.has(g)?Object.assign(c[g],b):c[g]=b;return c}static getDefaultDrawingOptions(c){unreachable("Not implemented")}static get typesMap(){unreachable("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(c,d){const h=this.typesMap.get(c);h&&this._defaultDrawingOptions.updateProperty(h,d),this._currentParent&&(ut(Yn,us).updateProperty(h,d),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(c,d){const h=this.constructor.typesMap.get(c);h&&this._updateProperty(c,h,d)}static get defaultPropertiesToUpdate(){const c=[],d=this._defaultDrawingOptions;for(const[h,g]of this.typesMap)c.push([h,d[g]]);return c}get propertiesToUpdate(){const c=[],{_drawingOptions:d}=this;for(const[h,g]of this.constructor.typesMap)c.push([h,d[g]]);return c}_updateProperty(c,d,h){const g=this._drawingOptions,b=g[d],_e=et=>{var st;g.updateProperty(d,et);const rt=ut(this,ro).updateProperty(d,et);rt&&$t(this,Tr,vy).call(this,rt),(st=this.parent)==null||st.drawLayer.updateProperties(this._drawId,g.toSVGProperties())};this.addCommands({cmd:_e.bind(this,h),undo:_e.bind(this,b),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:c,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var c;(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,Yn._mergeSVGProperties(ut(this,ro).getPathResizingSVGProperties($t(this,Tr,b0).call(this)),{bbox:$t(this,Tr,Um).call(this)}))}_onResized(){var c;(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,Yn._mergeSVGProperties(ut(this,ro).getPathResizedSVGProperties($t(this,Tr,b0).call(this)),{bbox:$t(this,Tr,Um).call(this)}))}_onTranslating(c,d){var h;(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,{bbox:$t(this,Tr,Um).call(this)})}_onTranslated(){var c;(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,Yn._mergeSVGProperties(ut(this,ro).getPathTranslatedSVGProperties($t(this,Tr,b0).call(this),this.parentDimensions),{bbox:$t(this,Tr,Um).call(this)}))}_onStartDragging(){var c;(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var c;(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(c){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,ut(this,Yx)&&(At(this,Yx,!1),this.commit(),this.parent.setSelected(this),c&&this.isOnScreen&&this.div.focus())}remove(){$t(this,Tr,NE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&($t(this,Tr,by).call(this),$t(this,Tr,vy).call(this,ut(this,ro).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(c){var h;let d=!1;this.parent&&!c?(this._uiManager.removeShouldRescale(this),$t(this,Tr,NE).call(this)):c&&(this._uiManager.addShouldRescale(this),$t(this,Tr,by).call(this,c),d=!this.parent&&((h=this.div)==null?void 0:h.classList.contains("selectedEditor"))),super.setParent(c),d&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Yn._mergeSVGProperties({bbox:$t(this,Tr,Um).call(this)},ut(this,ro).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&$t(this,Tr,vy).call(this,ut(this,ro).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let c,d;this._isCopy&&(c=this.x,d=this.y);const h=super.render();h.classList.add("draw");const g=document.createElement("div");h.append(g),g.setAttribute("aria-hidden","true"),g.className="internal";const[b,_e]=this.parentDimensions;return this.setDims(this.width*b,this.height*_e),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(c,d),h}static createDrawerInstance(c,d,h,g,b){unreachable("Not implemented")}static startDrawing(c,d,h,g){var lt;const{target:b,offsetX:_e,offsetY:et,pointerId:rt,pointerType:st}=g;if(ut(Yn,np)&&ut(Yn,np)!==st)return;const{viewport:{rotation:$}}=c,{width:_,height:nt}=b.getBoundingClientRect(),it=At(Yn,Em,new AbortController),ot=c.combinedSignal(it);if(ut(Yn,tp)||At(Yn,tp,rt),ut(Yn,np)??At(Yn,np,st),window.addEventListener("pointerup",at=>{var ct;ut(Yn,tp)===at.pointerId?this._endDraw(at):(ct=ut(Yn,rp))==null||ct.delete(at.pointerId)},{signal:ot}),window.addEventListener("pointercancel",at=>{var ct;ut(Yn,tp)===at.pointerId?this._currentParent.endDrawingSession():(ct=ut(Yn,rp))==null||ct.delete(at.pointerId)},{signal:ot}),window.addEventListener("pointerdown",at=>{ut(Yn,np)===at.pointerType&&((ut(Yn,rp)||At(Yn,rp,new Set)).add(at.pointerId),ut(Yn,us).isCancellable()&&(ut(Yn,us).removeLastElement(),ut(Yn,us).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:ot}),window.addEventListener("contextmenu",noContextMenu,{signal:ot}),b.addEventListener("pointermove",this._drawMove.bind(this),{signal:ot}),b.addEventListener("touchmove",at=>{at.timeStamp===ut(Yn,Sm)&&stopEvent(at)},{signal:ot}),c.toggleDrawing(),(lt=d._editorUndoBar)==null||lt.hide(),ut(Yn,us)){c.drawLayer.updateProperties(this._currentDrawId,ut(Yn,us).startNew(_e,et,_,nt,$));return}d.updateUIForDefaultProperties(this),At(Yn,us,this.createDrawerInstance(_e,et,_,nt,$)),At(Yn,wm,this.getDefaultDrawingOptions()),this._currentParent=c,{id:this._currentDrawId}=c.drawLayer.draw(this._mergeSVGProperties(ut(Yn,wm).toSVGProperties(),ut(Yn,us).defaultSVGProperties),!0,!1)}static _drawMove(c){var b;if(At(Yn,Sm,-1),!ut(Yn,us))return;const{offsetX:d,offsetY:h,pointerId:g}=c;if(ut(Yn,tp)===g){if(((b=ut(Yn,rp))==null?void 0:b.size)>=1){this._endDraw(c);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ut(Yn,us).add(d,h)),At(Yn,Sm,c.timeStamp),stopEvent(c)}}static _cleanup(c){c&&(this._currentDrawId=-1,this._currentParent=null,At(Yn,us,null),At(Yn,wm,null),At(Yn,np,null),At(Yn,Sm,NaN)),ut(Yn,Em)&&(ut(Yn,Em).abort(),At(Yn,Em,null),At(Yn,tp,NaN),At(Yn,rp,null))}static _endDraw(c){const d=this._currentParent;if(d){if(d.toggleDrawing(!0),this._cleanup(!1),(c==null?void 0:c.target)===d.div&&d.drawLayer.updateProperties(this._currentDrawId,ut(Yn,us).end(c.offsetX,c.offsetY)),this.supportMultipleDrawings){const h=ut(Yn,us),g=this._currentDrawId,b=h.getLastElement();d.addCommands({cmd:()=>{d.drawLayer.updateProperties(g,h.setLastElement(b))},undo:()=>{d.drawLayer.updateProperties(g,h.removeLastElement())},mustExec:!1,type:AnnotationEditorParamsType.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(c){const d=this._currentParent;if(!d)return null;if(d.toggleDrawing(!0),d.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP),!ut(Yn,us).isEmpty()){const{pageDimensions:[h,g],scale:b}=d,_e=d.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ut(Yn,us).getOutlines(h*b,g*b,b,this._INNER_MARGIN),drawingOptions:ut(Yn,wm),mustBeCommitted:!c});return this._cleanup(!0),_e}return d.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(c){}static deserializeDraw(c,d,h,g,b,_e){unreachable("Not implemented")}static async deserialize(c,d,h){var $,_;const{rawDims:{pageWidth:g,pageHeight:b,pageX:_e,pageY:et}}=d.viewport,rt=this.deserializeDraw(_e,et,g,b,this._INNER_MARGIN,c),st=await super.deserialize(c,d,h);return st.createDrawingOptions(c),$t($=st,Tr,jE).call($,{drawOutlines:rt}),$t(_=st,Tr,by).call(_),st.onScaleChanging(),st.rotate(),st}serializeDraw(c){const[d,h]=this.pageTranslation,[g,b]=this.pageDimensions;return ut(this,ro).serialize([d,h,g,b],c)}renderAnnotationElement(c){return c.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ro=new WeakMap,Yx=new WeakMap,us=new WeakMap,Em=new WeakMap,wm=new WeakMap,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,Sm=new WeakMap,Tr=new WeakSet,jE=function({drawOutlines:c,drawId:d,drawingOptions:h}){At(this,ro,c),this._drawingOptions||(this._drawingOptions=h),d>=0?(this._drawId=d,this.parent.drawLayer.finalizeDraw(d,c.defaultProperties)):this._drawId=$t(this,Tr,PE).call(this,c,this.parent),$t(this,Tr,vy).call(this,c.box)},PE=function(c,d){const{id:h}=d.drawLayer.draw(Yn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),c.defaultSVGProperties),!1,!1);return h},NE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},by=function(c=this.parent){if(!(this._drawId!==null&&this.parent===c)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,c.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=$t(this,Tr,PE).call(this,ut(this,ro),c)}},N1=function([c,d,h,g]){const{parentDimensions:[b,_e],rotation:et}=this;switch(et){case 90:return[d,1-c,h*(_e/b),g*(b/_e)];case 180:return[1-c,1-d,h,g];case 270:return[1-d,c,h*(_e/b),g*(b/_e)];default:return[c,d,h,g]}},b0=function(){const{x:c,y:d,width:h,height:g,parentDimensions:[b,_e],rotation:et}=this;switch(et){case 90:return[1-d,c,h*(b/_e),g*(_e/b)];case 180:return[1-c,1-d,h,g];case 270:return[d,1-c,h*(b/_e),g*(_e/b)];default:return[c,d,h,g]}},vy=function(c){if([this.x,this.y,this.width,this.height]=$t(this,Tr,N1).call(this,c),this.div){this.fixAndSetPosition();const[d,h]=this.parentDimensions;this.setDims(this.width*d,this.height*h)}this._onResized()},Um=function(){const{x:c,y:d,width:h,height:g,rotation:b,parentRotation:_e,parentDimensions:[et,rt]}=this;switch((b*4+_e)/90){case 1:return[1-d-g,c,g,h];case 2:return[1-c-h,1-d-g,h,g];case 3:return[d,1-c-h,g,h];case 4:return[c,d-h*(et/rt),g*(rt/et),h*(et/rt)];case 5:return[1-d,c,h*(et/rt),g*(rt/et)];case 6:return[1-c-g*(rt/et),1-d,g*(rt/et),h*(et/rt)];case 7:return[d-h*(et/rt),1-c-g*(rt/et),h*(et/rt),g*(rt/et)];case 8:return[c-h,d-g,h,g];case 9:return[1-d,c-h,g,h];case 10:return[1-c,1-d,h,g];case 11:return[d-g,1-c,g,h];case 12:return[c-g*(rt/et),d,g*(rt/et),h*(et/rt)];case 13:return[1-d-h*(et/rt),c-g*(rt/et),h*(et/rt),g*(rt/et)];case 14:return[1-c,1-d-h*(et/rt),g*(rt/et),h*(et/rt)];case 15:return[d,1-c,h*(et/rt),g*(rt/et)];default:return[c,d,h,g]}},Dn(Yn,"_currentDrawId",-1),Dn(Yn,"_currentParent",null),Lt(Yn,us,null),Lt(Yn,Em,null),Lt(Yn,wm,null),Lt(Yn,tp,NaN),Lt(Yn,np,null),Lt(Yn,rp,null),Lt(Yn,Sm,NaN),Dn(Yn,"_INNER_MARGIN",3);let DrawingEditor=Yn;var Al,ds,hs,Tm,Zx,Os,vs,Eo,Am,_m,Rm,Qx,v0;class InkDrawOutliner{constructor(e,c,d,h,g,b){Lt(this,Qx);Lt(this,Al,new Float64Array(6));Lt(this,ds);Lt(this,hs);Lt(this,Tm);Lt(this,Zx);Lt(this,Os);Lt(this,vs,"");Lt(this,Eo,0);Lt(this,Am,new InkDrawOutline);Lt(this,_m);Lt(this,Rm);At(this,_m,d),At(this,Rm,h),At(this,Tm,g),At(this,Zx,b),[e,c]=$t(this,Qx,v0).call(this,e,c);const _e=At(this,ds,[NaN,NaN,NaN,NaN,e,c]);At(this,Os,[e,c]),At(this,hs,[{line:_e,points:ut(this,Os)}]),ut(this,Al).set(_e,0)}updateProperty(e,c){e==="stroke-width"&&At(this,Zx,c)}isEmpty(){return!ut(this,hs)||ut(this,hs).length===0}isCancellable(){return ut(this,Os).length<=10}add(e,c){[e,c]=$t(this,Qx,v0).call(this,e,c);const[d,h,g,b]=ut(this,Al).subarray(2,6),_e=e-g,et=c-b;return Math.hypot(ut(this,_m)*_e,ut(this,Rm)*et)<=2?null:(ut(this,Os).push(e,c),isNaN(d)?(ut(this,Al).set([g,b,e,c],2),ut(this,ds).push(NaN,NaN,NaN,NaN,e,c),{path:{d:this.toSVGPath()}}):(isNaN(ut(this,Al)[0])&&ut(this,ds).splice(6,6),ut(this,Al).set([d,h,g,b,e,c],0),ut(this,ds).push(...Outline.createBezierPoints(d,h,g,b,e,c)),{path:{d:this.toSVGPath()}}))}end(e,c){const d=this.add(e,c);return d||(ut(this,Os).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,c,d,h,g){At(this,_m,d),At(this,Rm,h),At(this,Tm,g),[e,c]=$t(this,Qx,v0).call(this,e,c);const b=At(this,ds,[NaN,NaN,NaN,NaN,e,c]);At(this,Os,[e,c]);const _e=ut(this,hs).at(-1);return _e&&(_e.line=new Float32Array(_e.line),_e.points=new Float32Array(_e.points)),ut(this,hs).push({line:b,points:ut(this,Os)}),ut(this,Al).set(b,0),At(this,Eo,0),this.toSVGPath(),null}getLastElement(){return ut(this,hs).at(-1)}setLastElement(e){return ut(this,hs)?(ut(this,hs).push(e),At(this,ds,e.line),At(this,Os,e.points),At(this,Eo,0),{path:{d:this.toSVGPath()}}):ut(this,Am).setLastElement(e)}removeLastElement(){if(!ut(this,hs))return ut(this,Am).removeLastElement();ut(this,hs).pop(),At(this,vs,"");for(let e=0,c=ut(this,hs).length;e<c;e++){const{line:d,points:h}=ut(this,hs)[e];At(this,ds,d),At(this,Os,h),At(this,Eo,0),this.toSVGPath()}return{path:{d:ut(this,vs)}}}toSVGPath(){const e=Outline.svgRound(ut(this,ds)[4]),c=Outline.svgRound(ut(this,ds)[5]);if(ut(this,Os).length===2)return At(this,vs,`${ut(this,vs)} M ${e} ${c} Z`),ut(this,vs);if(ut(this,Os).length<=6){const h=ut(this,vs).lastIndexOf("M");At(this,vs,`${ut(this,vs).slice(0,h)} M ${e} ${c}`),At(this,Eo,6)}if(ut(this,Os).length===4){const h=Outline.svgRound(ut(this,ds)[10]),g=Outline.svgRound(ut(this,ds)[11]);return At(this,vs,`${ut(this,vs)} L ${h} ${g}`),At(this,Eo,12),ut(this,vs)}const d=[];ut(this,Eo)===0&&(d.push(`M ${e} ${c}`),At(this,Eo,6));for(let h=ut(this,Eo),g=ut(this,ds).length;h<g;h+=6){const[b,_e,et,rt,st,$]=ut(this,ds).slice(h,h+6).map(Outline.svgRound);d.push(`C${b} ${_e} ${et} ${rt} ${st} ${$}`)}return At(this,vs,ut(this,vs)+d.join(" ")),At(this,Eo,ut(this,ds).length),ut(this,vs)}getOutlines(e,c,d,h){const g=ut(this,hs).at(-1);return g.line=new Float32Array(g.line),g.points=new Float32Array(g.points),ut(this,Am).build(ut(this,hs),e,c,d,ut(this,Tm),ut(this,Zx),h),At(this,Al,null),At(this,ds,null),At(this,hs,null),At(this,vs,null),ut(this,Am)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Al=new WeakMap,ds=new WeakMap,hs=new WeakMap,Tm=new WeakMap,Zx=new WeakMap,Os=new WeakMap,vs=new WeakMap,Eo=new WeakMap,Am=new WeakMap,_m=new WeakMap,Rm=new WeakMap,Qx=new WeakSet,v0=function(e,c){return Outline._normalizePoint(e,c,ut(this,_m),ut(this,Rm),ut(this,Tm))};var Ds,Kv,Xv,so,_l,Rl,Jx,ey,Cm,Es,Fl,I1,O1,D1;class InkDrawOutline extends Outline{constructor(){super(...arguments);Lt(this,Es);Lt(this,Ds);Lt(this,Kv,0);Lt(this,Xv);Lt(this,so);Lt(this,_l);Lt(this,Rl);Lt(this,Jx);Lt(this,ey);Lt(this,Cm)}build(c,d,h,g,b,_e,et){At(this,_l,d),At(this,Rl,h),At(this,Jx,g),At(this,ey,b),At(this,Cm,_e),At(this,Xv,et??0),At(this,so,c),$t(this,Es,O1).call(this)}get thickness(){return ut(this,Cm)}setLastElement(c){return ut(this,so).push(c),{path:{d:this.toSVGPath()}}}removeLastElement(){return ut(this,so).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const c=[];for(const{line:d}of ut(this,so)){if(c.push(`M${Outline.svgRound(d[4])} ${Outline.svgRound(d[5])}`),d.length===6){c.push("Z");continue}if(d.length===12&&isNaN(d[6])){c.push(`L${Outline.svgRound(d[10])} ${Outline.svgRound(d[11])}`);continue}for(let h=6,g=d.length;h<g;h+=6){const[b,_e,et,rt,st,$]=d.subarray(h,h+6).map(Outline.svgRound);c.push(`C${b} ${_e} ${et} ${rt} ${st} ${$}`)}}return c.join("")}serialize([c,d,h,g],b){const _e=[],et=[],[rt,st,$,_]=$t(this,Es,I1).call(this);let nt,it,ot,lt,at,ct,dt,ht,pt;switch(ut(this,ey)){case 0:pt=Outline._rescale,nt=c,it=d+g,ot=h,lt=-g,at=c+rt*h,ct=d+(1-st-_)*g,dt=c+(rt+$)*h,ht=d+(1-st)*g;break;case 90:pt=Outline._rescaleAndSwap,nt=c,it=d,ot=h,lt=g,at=c+st*h,ct=d+rt*g,dt=c+(st+_)*h,ht=d+(rt+$)*g;break;case 180:pt=Outline._rescale,nt=c+h,it=d,ot=-h,lt=g,at=c+(1-rt-$)*h,ct=d+st*g,dt=c+(1-rt)*h,ht=d+(st+_)*g;break;case 270:pt=Outline._rescaleAndSwap,nt=c+h,it=d+g,ot=-h,lt=-g,at=c+(1-st-_)*h,ct=d+(1-rt-$)*g,dt=c+(1-st)*h,ht=d+(1-rt)*g;break}for(const{line:ft,points:mt}of ut(this,so))_e.push(pt(ft,nt,it,ot,lt,b?new Array(ft.length):null)),et.push(pt(mt,nt,it,ot,lt,b?new Array(mt.length):null));return{lines:_e,points:et,rect:[at,ct,dt,ht]}}static deserialize(c,d,h,g,b,{paths:{lines:_e,points:et},rotation:rt,thickness:st}){const $=[];let _,nt,it,ot,lt;switch(rt){case 0:lt=Outline._rescale,_=-c/h,nt=d/g+1,it=1/h,ot=-1/g;break;case 90:lt=Outline._rescaleAndSwap,_=-d/g,nt=-c/h,it=1/g,ot=1/h;break;case 180:lt=Outline._rescale,_=c/h+1,nt=-d/g,it=-1/h,ot=1/g;break;case 270:lt=Outline._rescaleAndSwap,_=d/g+1,nt=c/h+1,it=-1/g,ot=-1/h;break}if(!_e){_e=[];for(const ct of et){const dt=ct.length;if(dt===2){_e.push(new Float32Array([NaN,NaN,NaN,NaN,ct[0],ct[1]]));continue}if(dt===4){_e.push(new Float32Array([NaN,NaN,NaN,NaN,ct[0],ct[1],NaN,NaN,NaN,NaN,ct[2],ct[3]]));continue}const ht=new Float32Array(3*(dt-2));_e.push(ht);let[pt,ft,mt,xt]=ct.subarray(0,4);ht.set([NaN,NaN,NaN,NaN,pt,ft],0);for(let gt=4;gt<dt;gt+=2){const Et=ct[gt],St=ct[gt+1];ht.set(Outline.createBezierPoints(pt,ft,mt,xt,Et,St),(gt-2)*3),[pt,ft,mt,xt]=[mt,xt,Et,St]}}}for(let ct=0,dt=_e.length;ct<dt;ct++)$.push({line:lt(_e[ct].map(ht=>ht??NaN),_,nt,it,ot),points:lt(et[ct].map(ht=>ht??NaN),_,nt,it,ot)});const at=new this.prototype.constructor;return at.build($,h,g,1,rt,st,b),at}get box(){return ut(this,Ds)}updateProperty(c,d){return c==="stroke-width"?$t(this,Es,D1).call(this,d):null}updateParentDimensions([c,d],h){const[g,b]=$t(this,Es,Fl).call(this);At(this,_l,c),At(this,Rl,d),At(this,Jx,h);const[_e,et]=$t(this,Es,Fl).call(this),rt=_e-g,st=et-b,$=ut(this,Ds);return $[0]-=rt,$[1]-=st,$[2]+=2*rt,$[3]+=2*st,$}updateRotation(c){return At(this,Kv,c),{path:{transform:this.rotationTransform}}}get viewBox(){return ut(this,Ds).map(Outline.svgRound).join(" ")}get defaultProperties(){const[c,d]=ut(this,Ds);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`}}}get rotationTransform(){const[,,c,d]=ut(this,Ds);let h=0,g=0,b=0,_e=0,et=0,rt=0;switch(ut(this,Kv)){case 90:g=d/c,b=-c/d,et=c;break;case 180:h=-1,_e=-1,et=c,rt=d;break;case 270:g=-d/c,b=c/d,rt=d;break;default:return""}return`matrix(${h} ${g} ${b} ${_e} ${Outline.svgRound(et)} ${Outline.svgRound(rt)})`}getPathResizingSVGProperties([c,d,h,g]){const[b,_e]=$t(this,Es,Fl).call(this),[et,rt,st,$]=ut(this,Ds);if(Math.abs(st-b)<=Outline.PRECISION||Math.abs($-_e)<=Outline.PRECISION){const lt=c+h/2-(et+st/2),at=d+g/2-(rt+$/2);return{path:{"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`,transform:`${this.rotationTransform} translate(${lt} ${at})`}}}const _=(h-2*b)/(st-2*b),nt=(g-2*_e)/($-2*_e),it=st/h,ot=$/g;return{path:{"transform-origin":`${Outline.svgRound(et)} ${Outline.svgRound(rt)}`,transform:`${this.rotationTransform} scale(${it} ${ot}) translate(${Outline.svgRound(b)} ${Outline.svgRound(_e)}) scale(${_} ${nt}) translate(${Outline.svgRound(-b)} ${Outline.svgRound(-_e)})`}}}getPathResizedSVGProperties([c,d,h,g]){const[b,_e]=$t(this,Es,Fl).call(this),et=ut(this,Ds),[rt,st,$,_]=et;if(et[0]=c,et[1]=d,et[2]=h,et[3]=g,Math.abs($-b)<=Outline.PRECISION||Math.abs(_-_e)<=Outline.PRECISION){const at=c+h/2-(rt+$/2),ct=d+g/2-(st+_/2);for(const{line:dt,points:ht}of ut(this,so))Outline._translate(dt,at,ct,dt),Outline._translate(ht,at,ct,ht);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const nt=(h-2*b)/($-2*b),it=(g-2*_e)/(_-2*_e),ot=-nt*(rt+b)+c+b,lt=-it*(st+_e)+d+_e;if(nt!==1||it!==1||ot!==0||lt!==0)for(const{line:at,points:ct}of ut(this,so))Outline._rescale(at,ot,lt,nt,it,at),Outline._rescale(ct,ot,lt,nt,it,ct);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([c,d],h){const[g,b]=h,_e=ut(this,Ds),et=c-_e[0],rt=d-_e[1];if(ut(this,_l)===g&&ut(this,Rl)===b)for(const{line:st,points:$}of ut(this,so))Outline._translate(st,et,rt,st),Outline._translate($,et,rt,$);else{const st=ut(this,_l)/g,$=ut(this,Rl)/b;At(this,_l,g),At(this,Rl,b);for(const{line:_,points:nt}of ut(this,so))Outline._rescale(_,et,rt,st,$,_),Outline._rescale(nt,et,rt,st,$,nt);_e[2]*=st,_e[3]*=$}return _e[0]=c,_e[1]=d,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(c)} ${Outline.svgRound(d)}`}}}get defaultSVGProperties(){const c=ut(this,Ds);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Outline.svgRound(c[0])} ${Outline.svgRound(c[1])}`,transform:this.rotationTransform||null},bbox:c}}}Ds=new WeakMap,Kv=new WeakMap,Xv=new WeakMap,so=new WeakMap,_l=new WeakMap,Rl=new WeakMap,Jx=new WeakMap,ey=new WeakMap,Cm=new WeakMap,Es=new WeakSet,Fl=function(c=ut(this,Cm)){const d=ut(this,Xv)+c/2*ut(this,Jx);return ut(this,ey)%180===0?[d/ut(this,_l),d/ut(this,Rl)]:[d/ut(this,Rl),d/ut(this,_l)]},I1=function(){const[c,d,h,g]=ut(this,Ds),[b,_e]=$t(this,Es,Fl).call(this,0);return[c+b,d+_e,h-2*b,g-2*_e]},O1=function(){const c=At(this,Ds,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:g}of ut(this,so)){if(g.length<=12){for(let et=4,rt=g.length;et<rt;et+=6)Util.pointBoundingBox(g[et],g[et+1],c);continue}let b=g[4],_e=g[5];for(let et=6,rt=g.length;et<rt;et+=6){const[st,$,_,nt,it,ot]=g.subarray(et,et+6);Util.bezierBoundingBox(b,_e,st,$,_,nt,it,ot,c),b=it,_e=ot}}const[d,h]=$t(this,Es,Fl).call(this);c[0]=MathClamp(c[0]-d,0,1),c[1]=MathClamp(c[1]-h,0,1),c[2]=MathClamp(c[2]+d,0,1),c[3]=MathClamp(c[3]+h,0,1),c[2]-=c[0],c[3]-=c[1]},D1=function(c){const[d,h]=$t(this,Es,Fl).call(this);At(this,Cm,c);const[g,b]=$t(this,Es,Fl).call(this),[_e,et]=[g-d,b-h],rt=ut(this,Ds);return rt[0]-=_e,rt[1]-=et,rt[2]+=2*_e,rt[3]+=2*et,rt};class InkDrawingOptions extends DrawingOptions{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:AnnotationEditor._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,c){e==="stroke-width"&&(c??(c=this["stroke-width"]),c*=this._viewParameters.realScale),super.updateSVGProperty(e,c)}clone(){const e=new InkDrawingOptions(this._viewParameters);return e.updateAll(this),e}}var H0,M1;const Vm=class Vm extends DrawingEditor{constructor(c){super({...c,name:"inkEditor"});Lt(this,H0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(c,d){AnnotationEditor.initialize(c,d),this._defaultDrawingOptions=new InkDrawingOptions(d.viewParameters)}static getDefaultDrawingOptions(c){const d=this._defaultDrawingOptions.clone();return d.updateProperties(c),d}static get supportMultipleDrawings(){return!0}static get typesMap(){return shadow(this,"typesMap",new Map([[AnnotationEditorParamsType.INK_THICKNESS,"stroke-width"],[AnnotationEditorParamsType.INK_COLOR,"stroke"],[AnnotationEditorParamsType.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(c,d,h,g,b){return new InkDrawOutliner(c,d,h,g,b,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(c,d,h,g,b,_e){return InkDrawOutline.deserialize(c,d,h,g,b,_e)}static async deserialize(c,d,h){let g=null;if(c instanceof InkAnnotationElement){const{data:{inkLists:_e,rect:et,rotation:rt,id:st,color:$,opacity:_,borderStyle:{rawWidth:nt},popupRef:it},parent:{page:{pageNumber:ot}}}=c;g=c={annotationType:AnnotationEditorType.INK,color:Array.from($),thickness:nt,opacity:_,paths:{points:_e},boxes:null,pageIndex:ot-1,rect:et.slice(0),rotation:rt,id:st,deleted:!1,popupRef:it}}const b=await super.deserialize(c,d,h);return b.annotationElementId=c.id||null,b._initialData=g,b}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:c,_drawingOptions:d,parent:h}=this;d.updateSVGProperty("stroke-width"),h.drawLayer.updateProperties(c,d.toSVGProperties())}static onScaleChangingWhenDrawing(){const c=this._currentParent;c&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),c.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:c,thickness:d,opacity:h}){this._drawingOptions=Vm.getDefaultDrawingOptions({stroke:Util.makeHexColor(...c),"stroke-width":d,"stroke-opacity":h})}serialize(c=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:d,points:h,rect:g}=this.serializeDraw(c),{_drawingOptions:{stroke:b,"stroke-opacity":_e,"stroke-width":et}}=this,rt={annotationType:AnnotationEditorType.INK,color:AnnotationEditor._colorManager.convert(b),opacity:_e,thickness:et,paths:{lines:d,points:h},pageIndex:this.pageIndex,rect:g,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return c?(rt.isCopy=!0,rt):this.annotationElementId&&!$t(this,H0,M1).call(this,rt)?null:(rt.id=this.annotationElementId,rt)}renderAnnotationElement(c){const{points:d,rect:h}=this.serializeDraw(!1);return c.updateEdited({rect:h,thickness:this._drawingOptions["stroke-width"],points:d}),null}};H0=new WeakSet,M1=function(c){const{color:d,thickness:h,opacity:g,pageIndex:b}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||c.color.some((_e,et)=>_e!==d[et])||c.thickness!==h||c.opacity!==g||c.pageIndex!==b},Dn(Vm,"_type","ink"),Dn(Vm,"_editorType",AnnotationEditorType.INK),Dn(Vm,"_defaultDrawingOptions",null);let InkEditor=Vm;class ContourDrawOutline extends InkDrawOutline{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const BASE_HEADER_LENGTH=8,POINTS_PROPERTIES_NUMBER=3;var km,Rr,IE,Vo,L1,$1,OE,E0,F1,B1,U1,DE,ME,z1;class SignatureExtractor{static extractContoursFromText(e,{fontFamily:c,fontStyle:d,fontWeight:h},g,b,_e,et){let rt=new OffscreenCanvas(1,1),st=rt.getContext("2d",{alpha:!1});const $=200,_=st.font=`${d} ${h} ${$}px ${c}`,{actualBoundingBoxLeft:nt,actualBoundingBoxRight:it,actualBoundingBoxAscent:ot,actualBoundingBoxDescent:lt,fontBoundingBoxAscent:at,fontBoundingBoxDescent:ct,width:dt}=st.measureText(e),ht=1.5,pt=Math.ceil(Math.max(Math.abs(nt)+Math.abs(it)||0,dt)*ht),ft=Math.ceil(Math.max(Math.abs(ot)+Math.abs(lt)||$,Math.abs(at)+Math.abs(ct)||$)*ht);rt=new OffscreenCanvas(pt,ft),st=rt.getContext("2d",{alpha:!0,willReadFrequently:!0}),st.font=_,st.filter="grayscale(1)",st.fillStyle="white",st.fillRect(0,0,pt,ft),st.fillStyle="black",st.fillText(e,pt*(ht-1)/2,ft*(3-ht)/2);const mt=$t(this,Rr,DE).call(this,st.getImageData(0,0,pt,ft).data),xt=$t(this,Rr,U1).call(this,mt),gt=$t(this,Rr,ME).call(this,xt),Et=$t(this,Rr,OE).call(this,mt,pt,ft,gt);return this.processDrawnLines({lines:{curves:Et,width:pt,height:ft},pageWidth:g,pageHeight:b,rotation:_e,innerMargin:et,mustSmooth:!0,areContours:!0})}static process(e,c,d,h,g){const[b,_e,et]=$t(this,Rr,z1).call(this,e),[rt,st]=$t(this,Rr,B1).call(this,b,_e,et,Math.hypot(_e,et)*ut(this,km).sigmaSFactor,ut(this,km).sigmaR,ut(this,km).kernelSize),$=$t(this,Rr,ME).call(this,st),_=$t(this,Rr,OE).call(this,rt,_e,et,$);return this.processDrawnLines({lines:{curves:_,width:_e,height:et},pageWidth:c,pageHeight:d,rotation:h,innerMargin:g,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:c,pageHeight:d,rotation:h,innerMargin:g,mustSmooth:b,areContours:_e}){h%180!==0&&([c,d]=[d,c]);const{curves:et,width:rt,height:st}=e,$=e.thickness??0,_=[],nt=Math.min(c/rt,d/st),it=nt/c,ot=nt/d,lt=[];for(const{points:ct}of et){const dt=b?$t(this,Rr,F1).call(this,ct):ct;if(!dt)continue;lt.push(dt);const ht=dt.length,pt=new Float32Array(ht),ft=new Float32Array(3*(ht===2?2:ht-2));if(_.push({line:ft,points:pt}),ht===2){pt[0]=dt[0]*it,pt[1]=dt[1]*ot,ft.set([NaN,NaN,NaN,NaN,pt[0],pt[1]],0);continue}let[mt,xt,gt,Et]=dt;mt*=it,xt*=ot,gt*=it,Et*=ot,pt.set([mt,xt,gt,Et],0),ft.set([NaN,NaN,NaN,NaN,mt,xt],0);for(let St=4;St<ht;St+=2){const Pt=pt[St]=dt[St]*it,Mt=pt[St+1]=dt[St+1]*ot;ft.set(Outline.createBezierPoints(mt,xt,gt,Et,Pt,Mt),(St-2)*3),[mt,xt,gt,Et]=[gt,Et,Pt,Mt]}}if(_.length===0)return null;const at=_e?new ContourDrawOutline:new InkDrawOutline;return at.build(_,c,d,1,h,_e?0:$,g),{outline:at,newCurves:lt,areContours:_e,thickness:$,width:rt,height:st}}static async compressSignature({outlines:e,areContours:c,thickness:d,width:h,height:g}){let b=1/0,_e=-1/0,et=0;for(const dt of e){et+=dt.length;for(let ht=2,pt=dt.length;ht<pt;ht++){const ft=dt[ht]-dt[ht-2];b=Math.min(b,ft),_e=Math.max(_e,ft)}}let rt;b>=-128&&_e<=127?rt=Int8Array:b>=-32768&&_e<=32767?rt=Int16Array:rt=Int32Array;const st=e.length,$=BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*st,_=new Uint32Array($);let nt=0;_[nt++]=$*Uint32Array.BYTES_PER_ELEMENT+(et-2*st)*rt.BYTES_PER_ELEMENT,_[nt++]=0,_[nt++]=h,_[nt++]=g,_[nt++]=c?0:1,_[nt++]=Math.max(0,Math.floor(d??0)),_[nt++]=st,_[nt++]=rt.BYTES_PER_ELEMENT;for(const dt of e)_[nt++]=dt.length-2,_[nt++]=dt[0],_[nt++]=dt[1];const it=new CompressionStream("deflate-raw"),ot=it.writable.getWriter();await ot.ready,ot.write(_);const lt=rt.prototype.constructor;for(const dt of e){const ht=new lt(dt.length-2);for(let pt=2,ft=dt.length;pt<ft;pt++)ht[pt-2]=dt[pt]-dt[pt-2];ot.write(ht)}ot.close();const at=await new Response(it.readable).arrayBuffer(),ct=new Uint8Array(at);return toBase64Util(ct)}static async decompressSignature(e){try{const c=fromBase64Util(e),{readable:d,writable:h}=new DecompressionStream("deflate-raw"),g=h.getWriter();await g.ready,g.write(c).then(async()=>{await g.ready,await g.close()}).catch(()=>{});let b=null,_e=0;for await(const dt of d)b||(b=new Uint8Array(new Uint32Array(dt.buffer,0,4)[0])),b.set(dt,_e),_e+=dt.length;const et=new Uint32Array(b.buffer,0,b.length>>2),rt=et[1];if(rt!==0)throw new Error(`Invalid version: ${rt}`);const st=et[2],$=et[3],_=et[4]===0,nt=et[5],it=et[6],ot=et[7],lt=[],at=(BASE_HEADER_LENGTH+POINTS_PROPERTIES_NUMBER*it)*Uint32Array.BYTES_PER_ELEMENT;let ct;switch(ot){case Int8Array.BYTES_PER_ELEMENT:ct=new Int8Array(b.buffer,at);break;case Int16Array.BYTES_PER_ELEMENT:ct=new Int16Array(b.buffer,at);break;case Int32Array.BYTES_PER_ELEMENT:ct=new Int32Array(b.buffer,at);break}_e=0;for(let dt=0;dt<it;dt++){const ht=et[POINTS_PROPERTIES_NUMBER*dt+BASE_HEADER_LENGTH],pt=new Float32Array(ht+2);lt.push(pt);for(let ft=0;ft<POINTS_PROPERTIES_NUMBER-1;ft++)pt[ft]=et[POINTS_PROPERTIES_NUMBER*dt+BASE_HEADER_LENGTH+ft+1];for(let ft=0;ft<ht;ft++)pt[ft+2]=pt[ft]+ct[_e++]}return{areContours:_,thickness:nt,outlines:lt,width:st,height:$}}catch(c){return warn(`decompressSignature: ${c}`),null}}}km=new WeakMap,Rr=new WeakSet,IE=function(e,c,d,h){return d-=e,h-=c,d===0?h>0?0:4:d===1?h+6:2-h},Vo=new WeakMap,L1=function(e,c,d,h,g,b,_e){const et=$t(this,Rr,IE).call(this,d,h,g,b);for(let rt=0;rt<8;rt++){const st=(-rt+et-_e+16)%8,$=ut(this,Vo)[2*st],_=ut(this,Vo)[2*st+1];if(e[(d+$)*c+(h+_)]!==0)return st}return-1},$1=function(e,c,d,h,g,b,_e){const et=$t(this,Rr,IE).call(this,d,h,g,b);for(let rt=0;rt<8;rt++){const st=(rt+et+_e+16)%8,$=ut(this,Vo)[2*st],_=ut(this,Vo)[2*st+1];if(e[(d+$)*c+(h+_)]!==0)return st}return-1},OE=function(e,c,d,h){const g=e.length,b=new Int32Array(g);for(let st=0;st<g;st++)b[st]=e[st]<=h?1:0;for(let st=1;st<d-1;st++)b[st*c]=b[st*c+c-1]=0;for(let st=0;st<c;st++)b[st]=b[c*d-1-st]=0;let _e=1,et;const rt=[];for(let st=1;st<d-1;st++){et=1;for(let $=1;$<c-1;$++){const _=st*c+$,nt=b[_];if(nt===0)continue;let it=st,ot=$;if(nt===1&&b[_-1]===0)_e+=1,ot-=1;else if(nt>=1&&b[_+1]===0)_e+=1,ot+=1,nt>1&&(et=nt);else{nt!==1&&(et=Math.abs(nt));continue}const lt=[$,st],at=ot===$+1,ct={isHole:at,points:lt,id:_e,parent:0};rt.push(ct);let dt;for(const St of rt)if(St.id===et){dt=St;break}dt?dt.isHole?ct.parent=at?dt.parent:et:ct.parent=at?et:dt.parent:ct.parent=at?et:0;const ht=$t(this,Rr,L1).call(this,b,c,st,$,it,ot,0);if(ht===-1){b[_]=-_e,b[_]!==1&&(et=Math.abs(b[_]));continue}let pt=ut(this,Vo)[2*ht],ft=ut(this,Vo)[2*ht+1];const mt=st+pt,xt=$+ft;it=mt,ot=xt;let gt=st,Et=$;for(;;){const St=$t(this,Rr,$1).call(this,b,c,gt,Et,it,ot,1);pt=ut(this,Vo)[2*St],ft=ut(this,Vo)[2*St+1];const Pt=gt+pt,Mt=Et+ft;lt.push(Mt,Pt);const Rt=gt*c+Et;if(b[Rt+1]===0?b[Rt]=-_e:b[Rt]===1&&(b[Rt]=_e),Pt===st&&Mt===$&&gt===mt&&Et===xt){b[_]!==1&&(et=Math.abs(b[_]));break}else it=gt,ot=Et,gt=Pt,Et=Mt}}}return rt},E0=function(e,c,d,h){if(d-c<=4){for(let mt=c;mt<d-2;mt+=2)h.push(e[mt],e[mt+1]);return}const g=e[c],b=e[c+1],_e=e[d-4]-g,et=e[d-3]-b,rt=Math.hypot(_e,et),st=_e/rt,$=et/rt,_=st*b-$*g,nt=et/_e,it=1/rt,ot=Math.atan(nt),lt=Math.cos(ot),at=Math.sin(ot),ct=it*(Math.abs(lt)+Math.abs(at)),dt=it*(1-ct+ct**2),ht=Math.max(Math.atan(Math.abs(at+lt)*dt),Math.atan(Math.abs(at-lt)*dt));let pt=0,ft=c;for(let mt=c+2;mt<d-2;mt+=2){const xt=Math.abs(_-st*e[mt+1]+$*e[mt]);xt>pt&&(ft=mt,pt=xt)}pt>(rt*ht)**2?($t(this,Rr,E0).call(this,e,c,ft+2,h),$t(this,Rr,E0).call(this,e,ft,d,h)):h.push(g,b)},F1=function(e){const c=[],d=e.length;return $t(this,Rr,E0).call(this,e,0,d,c),c.push(e[d-2],e[d-1]),c.length<=4?null:c},B1=function(e,c,d,h,g,b){const _e=new Float32Array(b**2),et=-2*h**2,rt=b>>1;for(let ot=0;ot<b;ot++){const lt=(ot-rt)**2;for(let at=0;at<b;at++)_e[ot*b+at]=Math.exp((lt+(at-rt)**2)/et)}const st=new Float32Array(256),$=-2*g**2;for(let ot=0;ot<256;ot++)st[ot]=Math.exp(ot**2/$);const _=e.length,nt=new Uint8Array(_),it=new Uint32Array(256);for(let ot=0;ot<d;ot++)for(let lt=0;lt<c;lt++){const at=ot*c+lt,ct=e[at];let dt=0,ht=0;for(let ft=0;ft<b;ft++){const mt=ot+ft-rt;if(!(mt<0||mt>=d))for(let xt=0;xt<b;xt++){const gt=lt+xt-rt;if(gt<0||gt>=c)continue;const Et=e[mt*c+gt],St=_e[ft*b+xt]*st[Math.abs(Et-ct)];dt+=Et*St,ht+=St}}const pt=nt[at]=Math.round(dt/ht);it[pt]++}return[nt,it]},U1=function(e){const c=new Uint32Array(256);for(const d of e)c[d]++;return c},DE=function(e){const c=e.length,d=new Uint8ClampedArray(c>>2);let h=-1/0,g=1/0;for(let _e=0,et=d.length;_e<et;_e++){if(e[(_e<<2)+3]===0){h=d[_e]=255;continue}const st=d[_e]=e[_e<<2];st>h&&(h=st),st<g&&(g=st)}const b=255/(h-g);for(let _e=0;_e<c;_e++)d[_e]=(d[_e]-g)*b;return d},ME=function(e){let c,d=-1/0,h=-1/0;const g=e.findIndex(et=>et!==0);let b=g,_e=g;for(c=g;c<256;c++){const et=e[c];et>d&&(c-b>h&&(h=c-b,_e=c-1),d=et,b=c)}for(c=_e-1;c>=0&&!(e[c]>e[c+1]);c--);return c},z1=function(e){const c=e,{width:d,height:h}=e,{maxDim:g}=ut(this,km);let b=d,_e=h;if(d>g||h>g){let _=d,nt=h,it=Math.log2(Math.max(d,h)/g);const ot=Math.floor(it);it=it===ot?ot-1:ot;for(let at=0;at<it;at++){b=Math.ceil(_/2),_e=Math.ceil(nt/2);const ct=new OffscreenCanvas(b,_e);ct.getContext("2d").drawImage(e,0,0,_,nt,0,0,b,_e),_=b,nt=_e,e!==c&&e.close(),e=ct.transferToImageBitmap()}const lt=Math.min(g/b,g/_e);b=Math.round(b*lt),_e=Math.round(_e*lt)}const rt=new OffscreenCanvas(b,_e).getContext("2d",{willReadFrequently:!0});rt.filter="grayscale(1)",rt.drawImage(e,0,0,e.width,e.height,0,0,b,_e);const st=rt.getImageData(0,0,b,_e).data;return[$t(this,Rr,DE).call(this,st),b,_e]},Lt(SignatureExtractor,Rr),Lt(SignatureExtractor,km,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),Lt(SignatureExtractor,Vo,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class SignatureOptions extends DrawingOptions{constructor(){super(),super.updateProperties({fill:AnnotationEditor._defaultLineColor,"stroke-width":0})}clone(){const e=new SignatureOptions;return e.updateAll(this),e}}class DrawnSignatureOptions extends InkDrawingOptions{constructor(e){super(e),super.updateProperties({stroke:AnnotationEditor._defaultLineColor,"stroke-width":1})}clone(){const e=new DrawnSignatureOptions(this._viewParameters);return e.updateAll(this),e}}var sp,io,ip,op;const Ks=class Ks extends DrawingEditor{constructor(c){super({...c,mustBeCommitted:!0,name:"signatureEditor"});Lt(this,sp,!1);Lt(this,io,null);Lt(this,ip,null);Lt(this,op,null);this._willKeepAspectRatio=!0,At(this,ip,c.signatureData||null),At(this,io,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(c,d){AnnotationEditor.initialize(c,d),this._defaultDrawingOptions=new SignatureOptions,this._defaultDrawnSignatureOptions=new DrawnSignatureOptions(d.viewParameters)}static getDefaultDrawingOptions(c){const d=this._defaultDrawingOptions.clone();return d.updateProperties(c),d}static get supportMultipleDrawings(){return!1}static get typesMap(){return shadow(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!ut(this,io)}}static computeTelemetryFinalData(c){const d=c.get("hasDescription");return{hasAltText:d.get(!0)??0,hasNoAltText:d.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let c,d;const{_isCopy:h}=this;if(h&&(this._isCopy=!1,c=this.x,d=this.y),super.render(),this._drawId===null)if(ut(this,ip)){const{lines:g,mustSmooth:b,areContours:_e,description:et,uuid:rt,heightInPage:st}=ut(this,ip),{rawDims:{pageWidth:$,pageHeight:_},rotation:nt}=this.parent.viewport,it=SignatureExtractor.processDrawnLines({lines:g,pageWidth:$,pageHeight:_,rotation:nt,innerMargin:Ks._INNER_MARGIN,mustSmooth:b,areContours:_e});this.addSignature(it,st,et,rt)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return h&&(this._isCopy=!0,this._moveAfterPaste(c,d)),this.div}setUuid(c){At(this,op,c),this.addEditToolbar()}getUuid(){return ut(this,op)}get description(){return ut(this,io)}set description(c){At(this,io,c),super.addEditToolbar().then(d=>{d==null||d.updateEditSignatureButton(c)})}getSignaturePreview(){const{newCurves:c,areContours:d,thickness:h,width:g,height:b}=ut(this,ip),_e=Math.max(g,b),et=SignatureExtractor.processDrawnLines({lines:{curves:c.map(rt=>({points:rt})),thickness:h,width:g,height:b},pageWidth:_e,pageHeight:_e,rotation:0,innerMargin:0,mustSmooth:!1,areContours:d});return{areContours:d,outline:et.outline}}async addEditToolbar(){const c=await super.addEditToolbar();return c?(this._uiManager.signatureManager&&ut(this,io)!==null&&(await c.addEditSignatureButton(this._uiManager.signatureManager,ut(this,op),ut(this,io)),c.show()),c):null}addSignature(c,d,h,g){const{x:b,y:_e}=this,{outline:et}=At(this,ip,c);At(this,sp,et instanceof ContourDrawOutline),At(this,io,h),this.div.setAttribute("data-l10n-args",JSON.stringify({description:h}));let rt;ut(this,sp)?rt=Ks.getDefaultDrawingOptions():(rt=Ks._defaultDrawnSignatureOptions.clone(),rt.updateProperties({"stroke-width":et.thickness})),this._addOutlines({drawOutlines:et,drawingOptions:rt});const[st,$]=this.parentDimensions,[,_]=this.pageDimensions;let nt=d/_;nt=nt>=1?.5:nt,this.width*=nt/this.height,this.width>=1&&(nt*=.9/this.width,this.width=.9),this.height=nt,this.setDims(st*this.width,$*this.height),this.x=b,this.y=_e,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(g),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!g,hasDescription:!!h}}),this.div.hidden=!1}getFromImage(c){const{rawDims:{pageWidth:d,pageHeight:h},rotation:g}=this.parent.viewport;return SignatureExtractor.process(c,d,h,g,Ks._INNER_MARGIN)}getFromText(c,d){const{rawDims:{pageWidth:h,pageHeight:g},rotation:b}=this.parent.viewport;return SignatureExtractor.extractContoursFromText(c,d,h,g,b,Ks._INNER_MARGIN)}getDrawnSignature(c){const{rawDims:{pageWidth:d,pageHeight:h},rotation:g}=this.parent.viewport;return SignatureExtractor.processDrawnLines({lines:c,pageWidth:d,pageHeight:h,rotation:g,innerMargin:Ks._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:c,thickness:d}){c?this._drawingOptions=Ks.getDefaultDrawingOptions():(this._drawingOptions=Ks._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":d}))}serialize(c=!1){if(this.isEmpty())return null;const{lines:d,points:h,rect:g}=this.serializeDraw(c),{_drawingOptions:{"stroke-width":b}}=this,_e={annotationType:AnnotationEditorType.SIGNATURE,isSignature:!0,areContours:ut(this,sp),color:[0,0,0],thickness:ut(this,sp)?0:b,pageIndex:this.pageIndex,rect:g,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return c?(_e.paths={lines:d,points:h},_e.uuid=ut(this,op),_e.isCopy=!0):_e.lines=d,ut(this,io)&&(_e.accessibilityData={type:"Figure",alt:ut(this,io)}),_e}static deserializeDraw(c,d,h,g,b,_e){return _e.areContours?ContourDrawOutline.deserialize(c,d,h,g,b,_e):InkDrawOutline.deserialize(c,d,h,g,b,_e)}static async deserialize(c,d,h){var b;const g=await super.deserialize(c,d,h);return At(g,sp,c.areContours),At(g,io,((b=c.accessibilityData)==null?void 0:b.alt)||""),At(g,op,c.uuid),g}};sp=new WeakMap,io=new WeakMap,ip=new WeakMap,op=new WeakMap,Dn(Ks,"_type","signature"),Dn(Ks,"_editorType",AnnotationEditorType.SIGNATURE),Dn(Ks,"_defaultDrawingOptions",null);let SignatureEditor=Ks;var Br,ps,ap,pu,lp,ty,fu,jm,Cl,oo,ny,Ar,Ey,wy,w0,S0,T0,LE,A0,V1;class StampEditor extends AnnotationEditor{constructor(c){super({...c,name:"stampEditor"});Lt(this,Ar);Lt(this,Br,null);Lt(this,ps,null);Lt(this,ap,null);Lt(this,pu,null);Lt(this,lp,null);Lt(this,ty,"");Lt(this,fu,null);Lt(this,jm,!1);Lt(this,Cl,null);Lt(this,oo,!1);Lt(this,ny,!1);At(this,pu,c.bitmapUrl),At(this,lp,c.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(c,d){AnnotationEditor.initialize(c,d)}static isHandlingMimeForPasting(c){return SupportedImageMimeTypes.includes(c)}static paste(c,d){d.pasteEditor({mode:AnnotationEditorType.STAMP},{bitmapFile:c.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var c;return{type:"stamp",hasAltText:!!((c=this.altTextData)!=null&&c.altText)}}static computeTelemetryFinalData(c){const d=c.get("hasAltText");return{hasAltText:d.get(!0)??0,hasNoAltText:d.get(!1)??0}}async mlGuessAltText(c=null,d=!0){if(this.hasAltTextData())return null;const{mlManager:h}=this._uiManager;if(!h)throw new Error("No ML.");if(!await h.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:g,width:b,height:_e}=c||this.copyCanvas(null,null,!0).imageData,et=await h.guess({name:"altText",request:{data:g,width:b,height:_e,channels:g.length/(b*_e)}});if(!et)throw new Error("No response from the AI service.");if(et.error)throw new Error("Error from the AI service.");if(et.cancel)return null;if(!et.output)throw new Error("No valid response from the AI service.");const rt=et.output;return await this.setGuessedAltText(rt),d&&!this.hasAltTextData()&&(this.altTextData={alt:rt,decorative:!1}),rt}remove(){var c;ut(this,ps)&&(At(this,Br,null),this._uiManager.imageManager.deleteId(ut(this,ps)),(c=ut(this,fu))==null||c.remove(),At(this,fu,null),ut(this,Cl)&&(clearTimeout(ut(this,Cl)),At(this,Cl,null))),super.remove()}rebuild(){if(!this.parent){ut(this,ps)&&$t(this,Ar,w0).call(this);return}super.rebuild(),this.div!==null&&(ut(this,ps)&&ut(this,fu)===null&&$t(this,Ar,w0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(c){this._isDraggable=!0,c&&this.div.focus()}isEmpty(){return!(ut(this,ap)||ut(this,Br)||ut(this,pu)||ut(this,lp)||ut(this,ps)||ut(this,jm))}get isResizable(){return!0}render(){if(this.div)return this.div;let c,d;return this._isCopy&&(c=this.x,d=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),ut(this,jm)||(ut(this,Br)?$t(this,Ar,S0).call(this):$t(this,Ar,w0).call(this)),this._isCopy&&this._moveAfterPaste(c,d),this._uiManager.addShouldRescale(this),this.div}setCanvas(c,d){const{id:h,bitmap:g}=this._uiManager.imageManager.getFromCanvas(c,d);d.remove(),h&&this._uiManager.imageManager.isValidId(h)&&(At(this,ps,h),g&&At(this,Br,g),At(this,jm,!1),$t(this,Ar,S0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;ut(this,Cl)!==null&&clearTimeout(ut(this,Cl)),At(this,Cl,setTimeout(()=>{At(this,Cl,null),$t(this,Ar,LE).call(this)},200))}copyCanvas(c,d,h=!1){var nt;c||(c=224);const{width:g,height:b}=ut(this,Br),_e=new OutputScale;let et=ut(this,Br),rt=g,st=b,$=null;if(d){if(g>d||b>d){const xt=Math.min(d/g,d/b);rt=Math.floor(g*xt),st=Math.floor(b*xt)}$=document.createElement("canvas");const it=$.width=Math.ceil(rt*_e.sx),ot=$.height=Math.ceil(st*_e.sy);ut(this,oo)||(et=$t(this,Ar,T0).call(this,it,ot));const lt=$.getContext("2d");lt.filter=this._uiManager.hcmFilter;let at="white",ct="#cfcfd8";this._uiManager.hcmFilter!=="none"?ct="black":(nt=window.matchMedia)!=null&&nt.call(window,"(prefers-color-scheme: dark)").matches&&(at="#8f8f9d",ct="#42414d");const dt=15,ht=dt*_e.sx,pt=dt*_e.sy,ft=new OffscreenCanvas(ht*2,pt*2),mt=ft.getContext("2d");mt.fillStyle=at,mt.fillRect(0,0,ht*2,pt*2),mt.fillStyle=ct,mt.fillRect(0,0,ht,pt),mt.fillRect(ht,pt,ht,pt),lt.fillStyle=lt.createPattern(ft,"repeat"),lt.fillRect(0,0,it,ot),lt.drawImage(et,0,0,et.width,et.height,0,0,it,ot)}let _=null;if(h){let it,ot;if(_e.symmetric&&et.width<c&&et.height<c)it=et.width,ot=et.height;else if(et=ut(this,Br),g>c||b>c){const ct=Math.min(c/g,c/b);it=Math.floor(g*ct),ot=Math.floor(b*ct),ut(this,oo)||(et=$t(this,Ar,T0).call(this,it,ot))}const at=new OffscreenCanvas(it,ot).getContext("2d",{willReadFrequently:!0});at.drawImage(et,0,0,et.width,et.height,0,0,it,ot),_={width:it,height:ot,data:at.getImageData(0,0,it,ot).data}}return{canvas:$,width:rt,height:st,imageData:_}}static async deserialize(c,d,h){var lt;let g=null,b=!1;if(c instanceof StampAnnotationElement){const{data:{rect:at,rotation:ct,id:dt,structParent:ht,popupRef:pt},container:ft,parent:{page:{pageNumber:mt}},canvas:xt}=c;let gt,Et;xt?(delete c.canvas,{id:gt,bitmap:Et}=h.imageManager.getFromCanvas(ft.id,xt),xt.remove()):(b=!0,c._hasNoCanvas=!0);const St=((lt=await d._structTree.getAriaAttributes(`${AnnotationPrefix}${dt}`))==null?void 0:lt.get("aria-label"))||"";g=c={annotationType:AnnotationEditorType.STAMP,bitmapId:gt,bitmap:Et,pageIndex:mt-1,rect:at.slice(0),rotation:ct,id:dt,deleted:!1,accessibilityData:{decorative:!1,altText:St},isSvg:!1,structParent:ht,popupRef:pt}}const _e=await super.deserialize(c,d,h),{rect:et,bitmap:rt,bitmapUrl:st,bitmapId:$,isSvg:_,accessibilityData:nt}=c;b?(h.addMissingCanvas(c.id,_e),At(_e,jm,!0)):$&&h.imageManager.isValidId($)?(At(_e,ps,$),rt&&At(_e,Br,rt)):At(_e,pu,st),At(_e,oo,_);const[it,ot]=_e.pageDimensions;return _e.width=(et[2]-et[0])/it,_e.height=(et[3]-et[1])/ot,_e.annotationElementId=c.id||null,nt&&(_e.altTextData=nt),_e._initialData=g,At(_e,ny,!!g),_e}serialize(c=!1,d=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const h={annotationType:AnnotationEditorType.STAMP,bitmapId:ut(this,ps),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:ut(this,oo),structTreeParentId:this._structTreeParentId};if(c)return h.bitmapUrl=$t(this,Ar,A0).call(this,!0),h.accessibilityData=this.serializeAltText(!0),h.isCopy=!0,h;const{decorative:g,altText:b}=this.serializeAltText(!1);if(!g&&b&&(h.accessibilityData={type:"Figure",alt:b}),this.annotationElementId){const et=$t(this,Ar,V1).call(this,h);if(et.isSame)return null;et.isSameAltText?delete h.accessibilityData:h.accessibilityData.structParent=this._initialData.structParent??-1}if(h.id=this.annotationElementId,d===null)return h;d.stamps||(d.stamps=new Map);const _e=ut(this,oo)?(h.rect[2]-h.rect[0])*(h.rect[3]-h.rect[1]):null;if(!d.stamps.has(ut(this,ps)))d.stamps.set(ut(this,ps),{area:_e,serialized:h}),h.bitmap=$t(this,Ar,A0).call(this,!1);else if(ut(this,oo)){const et=d.stamps.get(ut(this,ps));_e>et.area&&(et.area=_e,et.serialized.bitmap.close(),et.serialized.bitmap=$t(this,Ar,A0).call(this,!1))}return h}renderAnnotationElement(c){return c.updateEdited({rect:this.getRect(0,0)}),null}}Br=new WeakMap,ps=new WeakMap,ap=new WeakMap,pu=new WeakMap,lp=new WeakMap,ty=new WeakMap,fu=new WeakMap,jm=new WeakMap,Cl=new WeakMap,oo=new WeakMap,ny=new WeakMap,Ar=new WeakSet,Ey=function(c,d=!1){if(!c){this.remove();return}At(this,Br,c.bitmap),d||(At(this,ps,c.id),At(this,oo,c.isSvg)),c.file&&At(this,ty,c.file.name),$t(this,Ar,S0).call(this)},wy=function(){if(At(this,ap,null),this._uiManager.enableWaiting(!1),!!ut(this,fu)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ut(this,Br)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&ut(this,Br)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},w0=function(){if(ut(this,ps)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(ut(this,ps)).then(h=>$t(this,Ar,Ey).call(this,h,!0)).finally(()=>$t(this,Ar,wy).call(this));return}if(ut(this,pu)){const h=ut(this,pu);At(this,pu,null),this._uiManager.enableWaiting(!0),At(this,ap,this._uiManager.imageManager.getFromUrl(h).then(g=>$t(this,Ar,Ey).call(this,g)).finally(()=>$t(this,Ar,wy).call(this)));return}if(ut(this,lp)){const h=ut(this,lp);At(this,lp,null),this._uiManager.enableWaiting(!0),At(this,ap,this._uiManager.imageManager.getFromFile(h).then(g=>$t(this,Ar,Ey).call(this,g)).finally(()=>$t(this,Ar,wy).call(this)));return}const c=document.createElement("input");c.type="file",c.accept=SupportedImageMimeTypes.join(",");const d=this._uiManager._signal;At(this,ap,new Promise(h=>{c.addEventListener("change",async()=>{if(!c.files||c.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const g=await this._uiManager.imageManager.getFromFile(c.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),$t(this,Ar,Ey).call(this,g)}h()},{signal:d}),c.addEventListener("cancel",()=>{this.remove(),h()},{signal:d})}).finally(()=>$t(this,Ar,wy).call(this))),c.click()},S0=function(){var $;const{div:c}=this;let{width:d,height:h}=ut(this,Br);const[g,b]=this.pageDimensions,_e=.75;if(this.width)d=this.width*g,h=this.height*b;else if(d>_e*g||h>_e*b){const _=Math.min(_e*g/d,_e*b/h);d*=_,h*=_}const[et,rt]=this.parentDimensions;this.setDims(d*et/g,h*rt/b),this._uiManager.enableWaiting(!1);const st=At(this,fu,document.createElement("canvas"));st.setAttribute("role","img"),this.addContainer(st),this.width=d/g,this.height=h/b,($=this._initialOptions)!=null&&$.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(c.hidden=!1),$t(this,Ar,LE).call(this),ut(this,ny)||(this.parent.addUndoableEditor(this),At(this,ny,!0)),this._reportTelemetry({action:"inserted_image"}),ut(this,ty)&&this.div.setAttribute("aria-description",ut(this,ty))},T0=function(c,d){const{width:h,height:g}=ut(this,Br);let b=h,_e=g,et=ut(this,Br);for(;b>2*c||_e>2*d;){const rt=b,st=_e;b>2*c&&(b=b>=16384?Math.floor(b/2)-1:Math.ceil(b/2)),_e>2*d&&(_e=_e>=16384?Math.floor(_e/2)-1:Math.ceil(_e/2));const $=new OffscreenCanvas(b,_e);$.getContext("2d").drawImage(et,0,0,rt,st,0,0,b,_e),et=$.transferToImageBitmap()}return et},LE=function(){const[c,d]=this.parentDimensions,{width:h,height:g}=this,b=new OutputScale,_e=Math.ceil(h*c*b.sx),et=Math.ceil(g*d*b.sy),rt=ut(this,fu);if(!rt||rt.width===_e&&rt.height===et)return;rt.width=_e,rt.height=et;const st=ut(this,oo)?ut(this,Br):$t(this,Ar,T0).call(this,_e,et),$=rt.getContext("2d");$.filter=this._uiManager.hcmFilter,$.drawImage(st,0,0,st.width,st.height,0,0,_e,et)},A0=function(c){if(c){if(ut(this,oo)){const g=this._uiManager.imageManager.getSvgUrl(ut(this,ps));if(g)return g}const d=document.createElement("canvas");return{width:d.width,height:d.height}=ut(this,Br),d.getContext("2d").drawImage(ut(this,Br),0,0),d.toDataURL()}if(ut(this,oo)){const[d,h]=this.pageDimensions,g=Math.round(this.width*d*PixelsPerInch.PDF_TO_CSS_UNITS),b=Math.round(this.height*h*PixelsPerInch.PDF_TO_CSS_UNITS),_e=new OffscreenCanvas(g,b);return _e.getContext("2d").drawImage(ut(this,Br),0,0,ut(this,Br).width,ut(this,Br).height,0,0,g,b),_e.transferToImageBitmap()}return structuredClone(ut(this,Br))},V1=function(c){var _e;const{pageIndex:d,accessibilityData:{altText:h}}=this._initialData,g=c.pageIndex===d,b=(((_e=c.accessibilityData)==null?void 0:_e.alt)||"")===h;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&g&&b,isSameAltText:b}},Dn(StampEditor,"_type","stamp"),Dn(StampEditor,"_editorType",AnnotationEditorType.STAMP);var Pm,ry,Pl,cp,mu,wo,up,sy,Nm,Ho,gu,ks,xu,Qn,dp,Ur,H1,Yo,$E,FE,_0;const jo=class jo{constructor({uiManager:e,pageIndex:c,div:d,structTreeLayer:h,accessibilityManager:g,annotationLayer:b,drawLayer:_e,textLayer:et,viewport:rt,l10n:st}){Lt(this,Ur);Lt(this,Pm);Lt(this,ry,!1);Lt(this,Pl,null);Lt(this,cp,null);Lt(this,mu,null);Lt(this,wo,new Map);Lt(this,up,!1);Lt(this,sy,!1);Lt(this,Nm,!1);Lt(this,Ho,null);Lt(this,gu,null);Lt(this,ks,null);Lt(this,xu,null);Lt(this,Qn);const $=[...ut(jo,dp).values()];if(!jo._initialized){jo._initialized=!0;for(const _ of $)_.initialize(st,e)}e.registerEditorTypes($),At(this,Qn,e),this.pageIndex=c,this.div=d,At(this,Pm,g),At(this,Pl,b),this.viewport=rt,At(this,ks,et),this.drawLayer=_e,this._structTree=h,ut(this,Qn).addLayer(this)}get isEmpty(){return ut(this,wo).size===0}get isInvisible(){return this.isEmpty&&ut(this,Qn).getMode()===AnnotationEditorType.NONE}updateToolbar(e){ut(this,Qn).updateToolbar(e)}updateMode(e=ut(this,Qn).getMode()){switch($t(this,Ur,_0).call(this),e){case AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case AnnotationEditorType.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:c}=this.div;for(const d of ut(jo,dp).values())c.toggle(`${d._type}Editing`,e===d._editorType);this.div.hidden=!1}hasTextLayer(e){var c;return e===((c=ut(this,ks))==null?void 0:c.div)}setEditingState(e){ut(this,Qn).setEditingState(e)}addCommands(e){ut(this,Qn).addCommands(e)}cleanUndoStack(e){ut(this,Qn).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var c;(c=ut(this,Pl))==null||c.div.classList.toggle("disabled",!e)}async enable(){At(this,Nm,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const d of ut(this,wo).values())d.enableEditing(),d.show(!0),d.annotationElementId&&(ut(this,Qn).removeChangedExistingAnnotation(d),e.add(d.annotationElementId));if(!ut(this,Pl)){At(this,Nm,!1);return}const c=ut(this,Pl).getEditableAnnotations();for(const d of c){if(d.hide(),ut(this,Qn).isDeletedAnnotationElement(d.data.id)||e.has(d.data.id))continue;const h=await this.deserialize(d);h&&(this.addOrRebuild(h),h.enableEditing())}At(this,Nm,!1)}disable(){var h;At(this,sy,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,c=new Map;for(const g of ut(this,wo).values())if(g.disableEditing(),!!g.annotationElementId){if(g.serialize()!==null){e.set(g.annotationElementId,g);continue}else c.set(g.annotationElementId,g);(h=this.getEditableAnnotation(g.annotationElementId))==null||h.show(),g.remove()}if(ut(this,Pl)){const g=ut(this,Pl).getEditableAnnotations();for(const b of g){const{id:_e}=b.data;if(ut(this,Qn).isDeletedAnnotationElement(_e))continue;let et=c.get(_e);if(et){et.resetAnnotationElement(b),et.show(!1),b.show();continue}et=e.get(_e),et&&(ut(this,Qn).addChangedExistingAnnotation(et),et.renderAnnotationElement(b)&&et.show(!1)),b.show()}}$t(this,Ur,_0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:d}=this.div;for(const g of ut(jo,dp).values())d.remove(`${g._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),At(this,sy,!1)}getEditableAnnotation(e){var c;return((c=ut(this,Pl))==null?void 0:c.getEditableAnnotation(e))||null}setActiveEditor(e){ut(this,Qn).getActive()!==e&&ut(this,Qn).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=ut(this,ks))!=null&&e.div&&!ut(this,xu)){At(this,xu,new AbortController);const c=ut(this,Qn).combinedSignal(ut(this,xu));ut(this,ks).div.addEventListener("pointerdown",$t(this,Ur,H1).bind(this),{signal:c}),ut(this,ks).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=ut(this,ks))!=null&&e.div&&ut(this,xu)&&(ut(this,xu).abort(),At(this,xu,null),ut(this,ks).div.classList.remove("highlighting"))}enableClick(){if(ut(this,cp))return;At(this,cp,new AbortController);const e=ut(this,Qn).combinedSignal(ut(this,cp));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const c=this.pointerup.bind(this);this.div.addEventListener("pointerup",c,{signal:e}),this.div.addEventListener("pointercancel",c,{signal:e})}disableClick(){var e;(e=ut(this,cp))==null||e.abort(),At(this,cp,null)}attach(e){ut(this,wo).set(e.id,e);const{annotationElementId:c}=e;c&&ut(this,Qn).isDeletedAnnotationElement(c)&&ut(this,Qn).removeDeletedAnnotationElement(e)}detach(e){var c;ut(this,wo).delete(e.id),(c=ut(this,Pm))==null||c.removePointerInTextLayer(e.contentDiv),!ut(this,sy)&&e.annotationElementId&&ut(this,Qn).addDeletedAnnotationElement(e)}remove(e){this.detach(e),ut(this,Qn).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var c;e.parent!==this&&(e.parent&&e.annotationElementId&&(ut(this,Qn).addDeletedAnnotationElement(e.annotationElementId),AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(c=e.parent)==null||c.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),ut(this,Qn).addEditor(e),this.attach(e),!e.isAttachedToDOM){const c=e.render();this.div.append(c),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!ut(this,Nm)),ut(this,Qn).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var d;if(!e.isAttachedToDOM)return;const{activeElement:c}=document;e.div.contains(c)&&!ut(this,mu)&&(e._focusEventsAllowed=!1,At(this,mu,setTimeout(()=>{At(this,mu,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:ut(this,Qn)._signal}),c.focus())},0))),e._structTreeParentId=(d=ut(this,Pm))==null?void 0:d.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const c=()=>e._uiManager.rebuild(e),d=()=>{e.remove()};this.addCommands({cmd:c,undo:d,mustExec:!1})}getNextId(){return ut(this,Qn).getId()}combinedSignal(e){return ut(this,Qn).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=ut(this,Ur,Yo))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,c){this.updateToolbar(e),await ut(this,Qn).updateMode(e.mode);const{offsetX:d,offsetY:h}=$t(this,Ur,FE).call(this),g=this.getNextId(),b=$t(this,Ur,$E).call(this,{parent:this,id:g,x:d,y:h,uiManager:ut(this,Qn),isCentered:!0,...c});b&&this.add(b)}async deserialize(e){var c;return await((c=ut(jo,dp).get(e.annotationType??e.annotationEditorType))==null?void 0:c.deserialize(e,this,ut(this,Qn)))||null}createAndAddNewEditor(e,c,d={}){const h=this.getNextId(),g=$t(this,Ur,$E).call(this,{parent:this,id:h,x:e.offsetX,y:e.offsetY,uiManager:ut(this,Qn),isCentered:c,...d});return g&&this.add(g),g}addNewEditor(e={}){this.createAndAddNewEditor($t(this,Ur,FE).call(this),!0,e)}setSelected(e){ut(this,Qn).setSelected(e)}toggleSelected(e){ut(this,Qn).toggleSelected(e)}unselect(e){ut(this,Qn).unselect(e)}pointerup(e){var h;const{isMac:c}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&c||e.target!==this.div||!ut(this,up)||(At(this,up,!1),(h=ut(this,Ur,Yo))!=null&&h.isDrawer&&ut(this,Ur,Yo).supportMultipleDrawings))return;if(!ut(this,ry)){At(this,ry,!0);return}const d=ut(this,Qn).getMode();if(d===AnnotationEditorType.STAMP||d===AnnotationEditorType.SIGNATURE){ut(this,Qn).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var h;if(ut(this,Qn).getMode()===AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),ut(this,up)){At(this,up,!1);return}const{isMac:c}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&c||e.target!==this.div)return;if(At(this,up,!0),(h=ut(this,Ur,Yo))!=null&&h.isDrawer){this.startDrawingSession(e);return}const d=ut(this,Qn).getActive();At(this,ry,!d||d.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),ut(this,Ho)){ut(this,Ur,Yo).startDrawing(this,ut(this,Qn),!1,e);return}ut(this,Qn).setCurrentDrawingSession(this),At(this,Ho,new AbortController);const c=ut(this,Qn).combinedSignal(ut(this,Ho));this.div.addEventListener("blur",({relatedTarget:d})=>{d&&!this.div.contains(d)&&(At(this,gu,null),this.commitOrRemove())},{signal:c}),ut(this,Ur,Yo).startDrawing(this,ut(this,Qn),!1,e)}pause(e){if(e){const{activeElement:c}=document;this.div.contains(c)&&At(this,gu,c);return}ut(this,gu)&&setTimeout(()=>{var c;(c=ut(this,gu))==null||c.focus(),At(this,gu,null)},0)}endDrawingSession(e=!1){return ut(this,Ho)?(ut(this,Qn).setCurrentDrawingSession(null),ut(this,Ho).abort(),At(this,Ho,null),At(this,gu,null),ut(this,Ur,Yo).endDrawing(e)):null}findNewParent(e,c,d){const h=ut(this,Qn).findParent(c,d);return h===null||h===this?!1:(h.changeParent(e),!0)}commitOrRemove(){return ut(this,Ho)?(this.endDrawingSession(),!0):!1}onScaleChanging(){ut(this,Ho)&&ut(this,Ur,Yo).onScaleChangingWhenDrawing(this)}destroy(){var e,c;this.commitOrRemove(),((e=ut(this,Qn).getActive())==null?void 0:e.parent)===this&&(ut(this,Qn).commitOrRemove(),ut(this,Qn).setActiveEditor(null)),ut(this,mu)&&(clearTimeout(ut(this,mu)),At(this,mu,null));for(const d of ut(this,wo).values())(c=ut(this,Pm))==null||c.removePointerInTextLayer(d.contentDiv),d.setParent(null),d.isAttachedToDOM=!1,d.div.remove();this.div=null,ut(this,wo).clear(),ut(this,Qn).removeLayer(this)}render({viewport:e}){this.viewport=e,setLayerDimensions(this.div,e);for(const c of ut(this,Qn).getEditors(this.pageIndex))this.add(c),c.rebuild();this.updateMode()}update({viewport:e}){ut(this,Qn).commitOrRemove(),$t(this,Ur,_0).call(this);const c=this.viewport.rotation,d=e.rotation;if(this.viewport=e,setLayerDimensions(this.div,{rotation:d}),c!==d)for(const h of ut(this,wo).values())h.rotate(d)}get pageDimensions(){const{pageWidth:e,pageHeight:c}=this.viewport.rawDims;return[e,c]}get scale(){return ut(this,Qn).viewParameters.realScale}};Pm=new WeakMap,ry=new WeakMap,Pl=new WeakMap,cp=new WeakMap,mu=new WeakMap,wo=new WeakMap,up=new WeakMap,sy=new WeakMap,Nm=new WeakMap,Ho=new WeakMap,gu=new WeakMap,ks=new WeakMap,xu=new WeakMap,Qn=new WeakMap,dp=new WeakMap,Ur=new WeakSet,H1=function(e){ut(this,Qn).unselectAll();const{target:c}=e;if(c===ut(this,ks).div||(c.getAttribute("role")==="img"||c.classList.contains("endOfContent"))&&ut(this,ks).div.contains(c)){const{isMac:d}=util_FeatureTest.platform;if(e.button!==0||e.ctrlKey&&d)return;ut(this,Qn).showAllEditors("highlight",!0,!0),ut(this,ks).div.classList.add("free"),this.toggleDrawing(),HighlightEditor.startHighlighting(this,ut(this,Qn).direction==="ltr",{target:ut(this,ks).div,x:e.x,y:e.y}),ut(this,ks).div.addEventListener("pointerup",()=>{ut(this,ks).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:ut(this,Qn)._signal}),e.preventDefault()}},Yo=function(){return ut(jo,dp).get(ut(this,Qn).getMode())},$E=function(e){const c=ut(this,Ur,Yo);return c?new c.prototype.constructor(e):null},FE=function(){const{x:e,y:c,width:d,height:h}=this.div.getBoundingClientRect(),g=Math.max(0,e),b=Math.max(0,c),_e=Math.min(window.innerWidth,e+d),et=Math.min(window.innerHeight,c+h),rt=(g+_e)/2-e,st=(b+et)/2-c,[$,_]=this.viewport.rotation%180===0?[rt,st]:[st,rt];return{offsetX:$,offsetY:_}},_0=function(){for(const e of ut(this,wo).values())e.isEmpty()&&e.remove()},Dn(jo,"_initialized",!1),Lt(jo,dp,new Map([FreeTextEditor,InkEditor,StampEditor,HighlightEditor,SignatureEditor].map(e=>[e._editorType,e])));let AnnotationEditorLayer=jo;var Go,Ms,Im,Yv,G0,G1,Nl,BE,W1,UE;const ns=class ns{constructor({pageIndex:e}){Lt(this,Nl);Lt(this,Go,null);Lt(this,Ms,new Map);Lt(this,Im,new Map);this.pageIndex=e}setParent(e){if(!ut(this,Go)){At(this,Go,e);return}if(ut(this,Go)!==e){if(ut(this,Ms).size>0)for(const c of ut(this,Ms).values())c.remove(),e.append(c);At(this,Go,e)}}static get _svgFactory(){return shadow(this,"_svgFactory",new DOMSVGFactory)}draw(e,c=!1,d=!1){const h=as(ns,Yv)._++,g=$t(this,Nl,BE).call(this),b=ns._svgFactory.createElement("defs");g.append(b);const _e=ns._svgFactory.createElement("path");b.append(_e);const et=`path_p${this.pageIndex}_${h}`;_e.setAttribute("id",et),_e.setAttribute("vector-effect","non-scaling-stroke"),c&&ut(this,Im).set(h,_e);const rt=d?$t(this,Nl,W1).call(this,b,et):null,st=ns._svgFactory.createElement("use");return g.append(st),st.setAttribute("href",`#${et}`),this.updateProperties(g,e),ut(this,Ms).set(h,g),{id:h,clipPathId:`url(#${rt})`}}drawOutline(e,c){const d=as(ns,Yv)._++,h=$t(this,Nl,BE).call(this),g=ns._svgFactory.createElement("defs");h.append(g);const b=ns._svgFactory.createElement("path");g.append(b);const _e=`path_p${this.pageIndex}_${d}`;b.setAttribute("id",_e),b.setAttribute("vector-effect","non-scaling-stroke");let et;if(c){const $=ns._svgFactory.createElement("mask");g.append($),et=`mask_p${this.pageIndex}_${d}`,$.setAttribute("id",et),$.setAttribute("maskUnits","objectBoundingBox");const _=ns._svgFactory.createElement("rect");$.append(_),_.setAttribute("width","1"),_.setAttribute("height","1"),_.setAttribute("fill","white");const nt=ns._svgFactory.createElement("use");$.append(nt),nt.setAttribute("href",`#${_e}`),nt.setAttribute("stroke","none"),nt.setAttribute("fill","black"),nt.setAttribute("fill-rule","nonzero"),nt.classList.add("mask")}const rt=ns._svgFactory.createElement("use");h.append(rt),rt.setAttribute("href",`#${_e}`),et&&rt.setAttribute("mask",`url(#${et})`);const st=rt.cloneNode();return h.append(st),rt.classList.add("mainOutline"),st.classList.add("secondaryOutline"),this.updateProperties(h,e),ut(this,Ms).set(d,h),d}finalizeDraw(e,c){ut(this,Im).delete(e),this.updateProperties(e,c)}updateProperties(e,c){var et;if(!c)return;const{root:d,bbox:h,rootClass:g,path:b}=c,_e=typeof e=="number"?ut(this,Ms).get(e):e;if(_e){if(d&&$t(this,Nl,UE).call(this,_e,d),h&&$t(et=ns,G0,G1).call(et,_e,h),g){const{classList:rt}=_e;for(const[st,$]of Object.entries(g))rt.toggle(st,$)}if(b){const st=_e.firstChild.firstChild;$t(this,Nl,UE).call(this,st,b)}}}updateParent(e,c){if(c===this)return;const d=ut(this,Ms).get(e);d&&(ut(c,Go).append(d),ut(this,Ms).delete(e),ut(c,Ms).set(e,d))}remove(e){ut(this,Im).delete(e),ut(this,Go)!==null&&(ut(this,Ms).get(e).remove(),ut(this,Ms).delete(e))}destroy(){At(this,Go,null);for(const e of ut(this,Ms).values())e.remove();ut(this,Ms).clear(),ut(this,Im).clear()}};Go=new WeakMap,Ms=new WeakMap,Im=new WeakMap,Yv=new WeakMap,G0=new WeakSet,G1=function(e,[c,d,h,g]){const{style:b}=e;b.top=`${100*d}%`,b.left=`${100*c}%`,b.width=`${100*h}%`,b.height=`${100*g}%`},Nl=new WeakSet,BE=function(){const e=ns._svgFactory.create(1,1,!0);return ut(this,Go).append(e),e.setAttribute("aria-hidden",!0),e},W1=function(e,c){const d=ns._svgFactory.createElement("clipPath");e.append(d);const h=`clip_${c}`;d.setAttribute("id",h),d.setAttribute("clipPathUnits","objectBoundingBox");const g=ns._svgFactory.createElement("use");return d.append(g),g.setAttribute("href",`#${c}`),g.classList.add("clip"),h},UE=function(e,c){for(const[d,h]of Object.entries(c))h===null?e.removeAttribute(d):e.setAttribute(d,h)},Lt(ns,G0),Lt(ns,Yv,0);let DrawLayer=ns;globalThis._pdfjsTestingUtils={HighlightOutliner};globalThis.pdfjsLib={AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,build,ColorPicker,createValidAbsoluteUrl,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getUuid,getXfaPageViewport,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,isDataScheme,isPdfFile,isValidExplicitDest,MathClamp,noContextMenu,normalizeUnicode,OPS,OutputScale,PasswordResponses:PasswordResponses$1,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,setLayerDimensions,shadow,SignatureExtractor,stopEvent,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,updateUrlHash,Util,VerbosityLevel,version,XfaLayer};const pdfjs=Object.freeze(Object.defineProperty({__proto__:null,AbortException,AnnotationEditorLayer,AnnotationEditorParamsType,AnnotationEditorType,AnnotationEditorUIManager,AnnotationLayer:AnnotationLayer$1,AnnotationMode,AnnotationType,ColorPicker,DOMSVGFactory,DrawLayer,FeatureTest:util_FeatureTest,GlobalWorkerOptions,ImageKind:util_ImageKind,InvalidPDFException,MathClamp,OPS,OutputScale,PDFDataRangeTransport:PDFDataRangeTransport$1,PDFDateString,PDFWorker,PasswordResponses:PasswordResponses$1,PermissionFlag,PixelsPerInch,RenderingCancelledException,ResponseException,SignatureExtractor,SupportedImageMimeTypes,TextLayer:TextLayer$1,TouchManager,Util,VerbosityLevel,XfaLayer,build,createValidAbsoluteUrl,fetchData,getDocument,getFilenameFromUrl,getPdfFilenameFromUrl,getUuid,getXfaPageViewport,isDataScheme,isPdfFile,isValidExplicitDest,noContextMenu,normalizeUnicode,setLayerDimensions,shadow,stopEvent,updateUrlHash,version},Symbol.toStringTag,{value:"Module"})),clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=[...clipboardEvents,...compositionEvents,...focusEvents,...formEvents,...imageEvents,...keyboardEvents,...mediaEvents,...mouseEvents,...dragEvents,...selectionEvents,...touchEvents,...pointerEvents,...uiEvents,...wheelEvents,...animationEvents,...transitionEvents,...changeEvents,...otherEvents];function makeEventProps(a,e){const c={};for(const d of allEvents){const h=a[d];h&&(e?c[d]=g=>h(g,e(d)):c[d]=h)}return c}function makeCancellablePromise(a){let e=!1;return{promise:new Promise((d,h)=>{a.then(g=>!e&&d(g)).catch(g=>!e&&h(g))}),cancel(){e=!0}}}var prefix="Invariant failed";function invariant(a,e){if(!a)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(a,e,c){for(c of a.keys())if(dequal(c,e))return c}function dequal(a,e){var c,d,h;if(a===e)return!0;if(a&&e&&(c=a.constructor)===e.constructor){if(c===Date)return a.getTime()===e.getTime();if(c===RegExp)return a.toString()===e.toString();if(c===Array){if((d=a.length)===e.length)for(;d--&&dequal(a[d],e[d]););return d===-1}if(c===Set){if(a.size!==e.size)return!1;for(d of a)if(h=d,h&&typeof h=="object"&&(h=find(e,h),!h)||!e.has(h))return!1;return!0}if(c===Map){if(a.size!==e.size)return!1;for(d of a)if(h=d[0],h&&typeof h=="object"&&(h=find(e,h),!h)||!dequal(d[1],e.get(h)))return!1;return!0}if(c===ArrayBuffer)a=new Uint8Array(a),e=new Uint8Array(e);else if(c===DataView){if((d=a.byteLength)===e.byteLength)for(;d--&&a.getInt8(d)===e.getInt8(d););return d===-1}if(ArrayBuffer.isView(a)){if((d=a.byteLength)===e.byteLength)for(;d--&&a[d]===e[d];);return d===-1}if(!c||typeof a=="object"){d=0;for(c in a)if(has.call(a,c)&&++d&&!has.call(e,c)||!(c in e)||!dequal(a[c],e[c]))return!1;return Object.keys(e).length===d}}return a!==a&&e!==e}const documentContext=reactExports.createContext(null);function Message({children:a,type:e}){return jsxRuntimeExports.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:a})}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(c=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(c):Array.isArray(e)?c(e):e.then(c)}).then(c=>{invariant(Array.isArray(c));const d=c[0];new Promise(h=>{invariant(this.pdfDocument),d instanceof Object?this.pdfDocument.getPageIndex(d).then(g=>{h(g)}).catch(()=>{invariant(!1)}):typeof d=="number"?h(d):invariant(!1)}).then(h=>{const g=h+1;invariant(this.pdfViewer),invariant(g>=1&&g<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:c,pageIndex:h,pageNumber:g})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const c=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:c,pageNumber:e})}addLinkAttributes(e,c,d){e.href=c,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=d?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof window<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(a){return typeof a<"u"}function isProvided(a){return isDefined(a)&&a!==null}function isString(a){return typeof a=="string"}function isArrayBuffer(a){return a instanceof ArrayBuffer}function isBlob(a){return invariant(isBrowser),a instanceof Blob}function isDataURI(a){return isString(a)&&/^data:/.test(a)}function dataURItoByteString(a){invariant(isDataURI(a));const[e="",c=""]=a.split(",");return e.split(";").indexOf("base64")!==-1?atob(c):unescape(c)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(a){a!=null&&a.cancel&&a.cancel()}function makePageCallback(a,e){return Object.defineProperty(a,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function isCancelException(a){return a.name==="RenderingCancelledException"}function loadFromFile(a){return new Promise((e,c)=>{const d=new FileReader;d.onload=()=>{if(!d.result)return c(new Error("Error while reading a file."));e(d.result)},d.onerror=h=>{if(!h.target)return c(new Error("Error while reading a file."));const{error:g}=h.target;if(!g)return c(new Error("Error while reading a file."));switch(g.code){case g.NOT_FOUND_ERR:return c(new Error("Error while reading a file: File not found."));case g.SECURITY_ERR:return c(new Error("Error while reading a file: Security error."));case g.ABORT_ERR:return c(new Error("Error while reading a file: Aborted."));default:return c(new Error("Error while reading a file."))}},d.readAsArrayBuffer(a)})}function reducer(a,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}var __rest$1=function(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(a,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const c=prompt("Enter the password to open this PDF file.");a(c);break}case PasswordResponses.INCORRECT_PASSWORD:{const c=prompt("Invalid password. Please try again.");a(c);break}}};function isParameterObject(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const Document=reactExports.forwardRef(function a(e,c){var{children:d,className:h,error:g="Failed to load PDF file.",externalLinkRel:b,externalLinkTarget:_e,file:et,inputRef:rt,imageResourcesPath:st,loading:$="Loading PDF…",noData:_="No PDF file specified.",onItemClick:nt,onLoadError:it,onLoadProgress:ot,onLoadSuccess:lt,onPassword:at=defaultOnPassword,onSourceError:ct,onSourceSuccess:dt,options:ht,renderMode:pt,rotate:ft,scale:mt}=e,xt=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"]);const[gt,Et]=useResolver(),{value:St,error:Pt}=gt,[Mt,Rt]=useResolver(),{value:Dt,error:Tt}=Mt,It=reactExports.useRef(new LinkService),Vt=reactExports.useRef([]),Bt=reactExports.useRef(void 0),Ct=reactExports.useRef(void 0);et&&et!==Bt.current&&isParameterObject(et)&&(warning$1(!dequal(et,Bt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Bt.current=et),ht&&ht!==Ct.current&&(warning$1(!dequal(ht,Ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Ct.current=ht);const en=reactExports.useRef({scrollPageIntoView:Sn=>{const{dest:Ln,pageNumber:$n,pageIndex:Wn=$n-1}=Sn;if(nt){nt({dest:Ln,pageIndex:Wn,pageNumber:$n});return}const Pn=Vt.current[Wn];if(Pn){Pn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${$n} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(c,()=>({linkService:It,pages:Vt,viewer:en}),[]);function sn(){dt&&dt()}function kt(){Pt&&(warning$1(!1,Pt.toString()),ct&&ct(Pt))}function Ut(){Et({type:"RESET"})}reactExports.useEffect(Ut,[et,Et]);const Jt=reactExports.useCallback(async()=>{if(!et)return null;if(typeof et=="string")return isDataURI(et)?{data:dataURItoByteString(et)}:(displayCORSWarning(),{url:et});if(et instanceof PDFDataRangeTransport)return{range:et};if(isArrayBuffer(et))return{data:et};if(isBrowser&&isBlob(et))return{data:await loadFromFile(et)};if(invariant(typeof et=="object"),invariant(isParameterObject(et)),"url"in et&&typeof et.url=="string"){if(isDataURI(et.url)){const{url:Sn}=et,Ln=__rest$1(et,["url"]),$n=dataURItoByteString(Sn);return Object.assign({data:$n},Ln)}displayCORSWarning()}return et},[et]);reactExports.useEffect(()=>{const Sn=makeCancellablePromise(Jt());return Sn.promise.then(Ln=>{Et({type:"RESOLVE",value:Ln})}).catch(Ln=>{Et({type:"REJECT",error:Ln})}),()=>{cancelRunningTask(Sn)}},[Jt,Et]),reactExports.useEffect(()=>{if(!(typeof St>"u")){if(St===!1){kt();return}sn()}},[St]);function tn(){Dt&&(lt&&lt(Dt),Vt.current=new Array(Dt.numPages),It.current.setDocument(Dt))}function Gt(){Tt&&(warning$1(!1,Tt.toString()),it&&it(Tt))}reactExports.useEffect(function(){Rt({type:"RESET"})},[Rt,St]),reactExports.useEffect(function(){if(!St)return;const Ln=ht?Object.assign(Object.assign({},St),ht):St,$n=getDocument(Ln);ot&&($n.onProgress=ot),at&&($n.onPassword=at);const Wn=$n,Pn=Wn.promise.then(or=>{Rt({type:"RESOLVE",value:or})}).catch(or=>{Wn.destroyed||Rt({type:"REJECT",error:or})});return()=>{Pn.finally(()=>Wn.destroy())}},[ht,Rt,St]),reactExports.useEffect(()=>{if(!(typeof Dt>"u")){if(Dt===!1){Gt();return}tn()}},[Dt]),reactExports.useEffect(function(){It.current.setViewer(en.current),It.current.setExternalLinkRel(b),It.current.setExternalLinkTarget(_e)},[b,_e]);const hn=reactExports.useCallback((Sn,Ln)=>{Vt.current[Sn]=Ln},[]),fn=reactExports.useCallback(Sn=>{delete Vt.current[Sn]},[]),gn=reactExports.useMemo(()=>({imageResourcesPath:st,linkService:It.current,onItemClick:nt,pdf:Dt,registerPage:hn,renderMode:pt,rotate:ft,scale:mt,unregisterPage:fn}),[st,nt,Dt,hn,pt,ft,mt,fn]),kn=reactExports.useMemo(()=>makeEventProps(xt,()=>Dt),[xt,Dt]);function On(){return jsxRuntimeExports.jsx(documentContext.Provider,{value:gn,children:d})}function un(){return et?Dt==null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof $=="function"?$():$}):Dt===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof g=="function"?g():g}):On():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof _=="function"?_():_})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx("react-pdf__Document",h),ref:rt},kn,{children:un()}))});function useDocumentContext(){return reactExports.useContext(documentContext)}function mergeRefs(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];var c=a.filter(Boolean);if(c.length<=1){var d=c[0];return d||null}return function(g){for(var b=0,_e=c;b<_e.length;b++){var et=_e[b];typeof et=="function"?et(g):et&&(et.current=g)}}}const pageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(a){return a in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(a){return"children"in a}function isStructTreeNodeWithOnlyContentChild(a){return isStructTreeNode(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function getRoleAttributes(a){const e={};if(isStructTreeNode(a)){const{role:c}=a,d=c.match(HEADING_PATTERN);if(d)e.role="heading",e["aria-level"]=Number(d[1]);else if(isPdfRole(c)){const h=PDF_ROLE_TO_HTML_ROLE[c];h&&(e.role=h)}}return e}function getBaseAttributes(a){const e={};if(isStructTreeNode(a)){if(a.alt!==void 0&&(e["aria-label"]=a.alt),a.lang!==void 0&&(e.lang=a.lang),isStructTreeNodeWithOnlyContentChild(a)){const[c]=a.children;if(c){const d=getBaseAttributes(c);return Object.assign(Object.assign({},e),d)}}}else"id"in a&&(e["aria-owns"]=a.id);return e}function getAttributes(a){return a?Object.assign(Object.assign({},getRoleAttributes(a)),getBaseAttributes(a)):null}function StructTreeItem({className:a,node:e}){const c=reactExports.useMemo(()=>getAttributes(e),[e]),d=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((h,g)=>jsxRuntimeExports.jsx(StructTreeItem,{node:h},g)),[e]);return jsxRuntimeExports.jsx("span",Object.assign({className:a},c,{children:d}))}function usePageContext(){return reactExports.useContext(pageContext)}function StructTree(){const a=usePageContext();invariant(a);const{onGetStructTreeError:e,onGetStructTreeSuccess:c}=a,[d,h]=useResolver(),{value:g,error:b}=d,{customTextRenderer:_e,page:et}=a;function rt(){g&&c&&c(g)}function st(){b&&(warning$1(!1,b.toString()),e&&e(b))}return reactExports.useEffect(function(){h({type:"RESET"})},[h,et]),reactExports.useEffect(function(){if(_e||!et)return;const _=makeCancellablePromise(et.getStructTree()),nt=_;return _.promise.then(it=>{h({type:"RESOLVE",value:it})}).catch(it=>{h({type:"REJECT",error:it})}),()=>cancelRunningTask(nt)},[_e,et,h]),reactExports.useEffect(()=>{if(g!==void 0){if(g===!1){st();return}rt()}},[g]),g?jsxRuntimeExports.jsx(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:g}):null}const ANNOTATION_MODE=AnnotationMode;function Canvas(a){const e=usePageContext();invariant(e);const c=Object.assign(Object.assign({},e),a),{_className:d,canvasBackground:h,devicePixelRatio:g=getDevicePixelRatio(),onRenderError:b,onRenderSuccess:_e,page:et,renderForms:rt,renderTextLayer:st,rotate:$,scale:_}=c,{canvasRef:nt}=a;invariant(et);const it=reactExports.useRef(null);function ot(){et&&_e&&_e(makePageCallback(et,_))}function lt(ht){isCancelException(ht)||(warning$1(!1,ht.toString()),b&&b(ht))}const at=reactExports.useMemo(()=>et.getViewport({scale:_*g,rotation:$}),[g,et,$,_]),ct=reactExports.useMemo(()=>et.getViewport({scale:_,rotation:$}),[et,$,_]);reactExports.useEffect(function(){if(!et)return;et.cleanup();const{current:pt}=it;if(!pt)return;pt.width=at.width,pt.height=at.height,pt.style.width=`${Math.floor(ct.width)}px`,pt.style.height=`${Math.floor(ct.height)}px`,pt.style.visibility="hidden";const ft={annotationMode:rt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:pt.getContext("2d",{alpha:!1}),viewport:at};h&&(ft.background=h);const mt=et.render(ft),xt=mt;return mt.promise.then(()=>{pt.style.visibility="",ot()}).catch(lt),()=>cancelRunningTask(xt)},[h,et,rt,at,ct]);const dt=reactExports.useCallback(()=>{const{current:ht}=it;ht&&(ht.width=0,ht.height=0)},[]);return reactExports.useEffect(()=>dt,[dt]),jsxRuntimeExports.jsx("canvas",{className:`${d}__canvas`,dir:"ltr",ref:mergeRefs(nt,it),style:{display:"block",userSelect:"none"},children:st?jsxRuntimeExports.jsx(StructTree,{}):null})}function isTextItem(a){return"str"in a}function TextLayer(){const a=usePageContext();invariant(a);const{customTextRenderer:e,onGetTextError:c,onGetTextSuccess:d,onRenderTextLayerError:h,onRenderTextLayerSuccess:g,page:b,pageIndex:_e,pageNumber:et,rotate:rt,scale:st}=a;invariant(b);const[$,_]=useResolver(),{value:nt,error:it}=$,ot=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function lt(){nt&&d&&d(nt)}function at(){it&&(warning$1(!1,it.toString()),c&&c(it))}reactExports.useEffect(function(){_({type:"RESET"})},[b,_]),reactExports.useEffect(function(){if(!b)return;const xt=makeCancellablePromise(b.getTextContent()),gt=xt;return xt.promise.then(Et=>{_({type:"RESOLVE",value:Et})}).catch(Et=>{_({type:"REJECT",error:Et})}),()=>cancelRunningTask(gt)},[b,_]),reactExports.useEffect(()=>{if(nt!==void 0){if(nt===!1){at();return}lt()}},[nt]);const ct=reactExports.useCallback(()=>{g&&g()},[g]),dt=reactExports.useCallback(mt=>{warning$1(!1,mt.toString()),h&&h(mt)},[h]);function ht(){const mt=ot.current;mt&&mt.classList.add("selecting")}function pt(){const mt=ot.current;mt&&mt.classList.remove("selecting")}const ft=reactExports.useMemo(()=>b.getViewport({scale:st,rotation:rt}),[b,rt,st]);return reactExports.useLayoutEffect(function(){if(!b||!nt)return;const{current:xt}=ot;if(!xt)return;xt.innerHTML="";const gt=b.streamTextContent({includeMarkedContent:!0}),Et={container:xt,textContentSource:gt,viewport:ft},St=new TextLayer$1(Et),Pt=St;return St.render().then(()=>{const Mt=document.createElement("div");Mt.className="endOfContent",xt.append(Mt);const Rt=xt.querySelectorAll('[role="presentation"]');if(e){let Dt=0;nt.items.forEach((Tt,It)=>{if(!isTextItem(Tt))return;const Vt=Rt[Dt];if(!Vt)return;const Bt=e(Object.assign({pageIndex:_e,pageNumber:et,itemIndex:It},Tt));Vt.innerHTML=Bt,Dt+=Tt.str&&Tt.hasEOL?2:1})}ct()}).catch(dt),()=>cancelRunningTask(Pt)},[e,dt,ct,b,_e,et,nt,ft]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:pt,onMouseDown:ht,ref:ot})}function AnnotationLayer(){const a=useDocumentContext(),e=usePageContext();invariant(e);const c=Object.assign(Object.assign({},a),e),{imageResourcesPath:d,linkService:h,onGetAnnotationsError:g,onGetAnnotationsSuccess:b,onRenderAnnotationLayerError:_e,onRenderAnnotationLayerSuccess:et,page:rt,pdf:st,renderForms:$,rotate:_,scale:nt=1}=c;invariant(st),invariant(rt),invariant(h);const[it,ot]=useResolver(),{value:lt,error:at}=it,ct=reactExports.useRef(null);warning$1(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function dt(){lt&&b&&b(lt)}function ht(){at&&(warning$1(!1,at.toString()),g&&g(at))}reactExports.useEffect(function(){ot({type:"RESET"})},[ot,rt]),reactExports.useEffect(function(){if(!rt)return;const gt=makeCancellablePromise(rt.getAnnotations()),Et=gt;return gt.promise.then(St=>{ot({type:"RESOLVE",value:St})}).catch(St=>{ot({type:"REJECT",error:St})}),()=>{cancelRunningTask(Et)}},[ot,rt]),reactExports.useEffect(()=>{if(lt!==void 0){if(lt===!1){ht();return}dt()}},[lt]);function pt(){et&&et()}function ft(xt){warning$1(!1,`${xt}`),_e&&_e(xt)}const mt=reactExports.useMemo(()=>rt.getViewport({scale:nt,rotation:_}),[rt,_,nt]);return reactExports.useEffect(function(){if(!st||!rt||!h||!lt)return;const{current:gt}=ct;if(!gt)return;const Et=mt.clone({dontFlip:!0}),St={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:gt,l10n:null,page:rt,structTreeLayer:null,viewport:Et},Pt={annotations:lt,annotationStorage:st.annotationStorage,div:gt,imageResourcesPath:d,linkService:h,page:rt,renderForms:$,viewport:Et};gt.innerHTML="";try{new AnnotationLayer$1(St).render(Pt),pt()}catch(Mt){ft(Mt)}return()=>{}},[lt,d,h,rt,st,$,mt]),jsxRuntimeExports.jsx("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:ct})}var __rest=function(a,e){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&e.indexOf(d)<0&&(c[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,d=Object.getOwnPropertySymbols(a);h<d.length;h++)e.indexOf(d[h])<0&&Object.prototype.propertyIsEnumerable.call(a,d[h])&&(c[d[h]]=a[d[h]]);return c};const defaultScale=1;function Page(a){const e=useDocumentContext(),c=Object.assign(Object.assign({},e),a),{_className:d="react-pdf__Page",_enableRegisterUnregisterPage:h=!0,canvasBackground:g,canvasRef:b,children:_e,className:et,customRenderer:rt,customTextRenderer:st,devicePixelRatio:$,error:_="Failed to load the page.",height:nt,inputRef:it,loading:ot="Loading page…",noData:lt="No page specified.",onGetAnnotationsError:at,onGetAnnotationsSuccess:ct,onGetStructTreeError:dt,onGetStructTreeSuccess:ht,onGetTextError:pt,onGetTextSuccess:ft,onLoadError:mt,onLoadSuccess:xt,onRenderAnnotationLayerError:gt,onRenderAnnotationLayerSuccess:Et,onRenderError:St,onRenderSuccess:Pt,onRenderTextLayerError:Mt,onRenderTextLayerSuccess:Rt,pageIndex:Dt,pageNumber:Tt,pdf:It,registerPage:Vt,renderAnnotationLayer:Bt=!0,renderForms:Ct=!1,renderMode:en="canvas",renderTextLayer:sn=!0,rotate:kt,scale:Ut=defaultScale,unregisterPage:Jt,width:tn}=c,Gt=__rest(c,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[hn,fn]=useResolver(),{value:gn,error:kn}=hn,On=reactExports.useRef(null);invariant(It);const un=isProvided(Tt)?Tt-1:Dt??null,Sn=Tt??(isProvided(Dt)?Dt+1:null),Ln=kt??(gn?gn.rotate:null),$n=reactExports.useMemo(()=>{if(!gn)return null;let Qt=1;const bn=Ut??defaultScale;if(tn||nt){const An=gn.getViewport({scale:1,rotation:Ln});tn?Qt=tn/An.width:nt&&(Qt=nt/An.height)}return bn*Qt},[nt,gn,Ln,Ut,tn]);reactExports.useEffect(function(){return()=>{isProvided(un)&&h&&Jt&&Jt(un)}},[h,It,un,Jt]);function Wn(){if(xt){if(!gn||!$n)return;xt(makePageCallback(gn,$n))}if(h&&Vt){if(!isProvided(un)||!On.current)return;Vt(un,On.current)}}function Pn(){kn&&(warning$1(!1,kn.toString()),mt&&mt(kn))}reactExports.useEffect(function(){fn({type:"RESET"})},[fn,It,un]),reactExports.useEffect(function(){if(!It||!Sn)return;const bn=makeCancellablePromise(It.getPage(Sn)),An=bn;return bn.promise.then(In=>{fn({type:"RESOLVE",value:In})}).catch(In=>{fn({type:"REJECT",error:In})}),()=>cancelRunningTask(An)},[fn,It,Sn]),reactExports.useEffect(()=>{if(gn!==void 0){if(gn===!1){Pn();return}Wn()}},[gn,$n]);const or=reactExports.useMemo(()=>gn&&isProvided(un)&&Sn&&isProvided(Ln)&&isProvided($n)?{_className:d,canvasBackground:g,customTextRenderer:st,devicePixelRatio:$,onGetAnnotationsError:at,onGetAnnotationsSuccess:ct,onGetStructTreeError:dt,onGetStructTreeSuccess:ht,onGetTextError:pt,onGetTextSuccess:ft,onRenderAnnotationLayerError:gt,onRenderAnnotationLayerSuccess:Et,onRenderError:St,onRenderSuccess:Pt,onRenderTextLayerError:Mt,onRenderTextLayerSuccess:Rt,page:gn,pageIndex:un,pageNumber:Sn,renderForms:Ct,renderTextLayer:sn,rotate:Ln,scale:$n}:null,[d,g,st,$,at,ct,dt,ht,pt,ft,gt,Et,St,Pt,Mt,Rt,gn,un,Sn,Ct,sn,Ln,$n]),Kt=reactExports.useMemo(()=>makeEventProps(Gt,()=>gn&&($n?makePageCallback(gn,$n):void 0)),[Gt,gn,$n]),Xt=`${un}@${$n}/${Ln}`;function on(){switch(en){case"custom":return invariant(rt),jsxRuntimeExports.jsx(rt,{},`${Xt}_custom`);case"none":return null;case"canvas":default:return jsxRuntimeExports.jsx(Canvas,{canvasRef:b},`${Xt}_canvas`)}}function vn(){return sn?jsxRuntimeExports.jsx(TextLayer,{},`${Xt}_text`):null}function Cn(){return Bt?jsxRuntimeExports.jsx(AnnotationLayer,{},`${Xt}_annotations`):null}function yn(){return jsxRuntimeExports.jsxs(pageContext.Provider,{value:or,children:[on(),vn(),Cn(),_e]})}function nn(){return Sn?It===null||gn===void 0||gn===null?jsxRuntimeExports.jsx(Message,{type:"loading",children:typeof ot=="function"?ot():ot}):It===!1||gn===!1?jsxRuntimeExports.jsx(Message,{type:"error",children:typeof _=="function"?_():_}):yn():jsxRuntimeExports.jsx(Message,{type:"no-data",children:typeof lt=="function"?lt():lt})}return jsxRuntimeExports.jsx("div",Object.assign({className:clsx(d,et),"data-page-number":Sn,ref:mergeRefs(it,On),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${$n}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:g||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Kt,{children:nn()}))}displayWorkerWarning();GlobalWorkerOptions.workerSrc="pdf.worker.mjs";function YouTubeTranscript({fileId:a,onTimestampClick:e,videoId:c}){const[d,h]=reactExports.useState(null),[g,b]=reactExports.useState(null),[_e,et]=reactExports.useState(null),[rt,st]=reactExports.useState(!0),[$,_]=reactExports.useState(null),[nt,it]=reactExports.useState(""),[ot,lt]=reactExports.useState("transcript");reactExports.useEffect(()=>{a&&(async()=>{try{st(!0),_(null);const pt=localStorage.getItem("authToken"),ft=await fetch(buildApiUrl(API_ENDPOINTS.TRANSCRIBE.TRANSCRIPT(a)),{headers:{Authorization:`Bearer ${pt}`}});if(!ft.ok)throw new Error("Failed to fetch transcript");const mt=await ft.json();mt.success?(h(mt.data.transcript),b(mt.data.processedTranscript),et(mt.data.summary)):_(mt.message||"Transcript not available")}catch(pt){_(pt instanceof Error?pt.message:"Failed to load transcript")}finally{st(!1)}})()},[a]),d!=null&&d.snippets.filter(ht=>ht.text.toLowerCase().includes(nt.toLowerCase()));const at=(g==null?void 0:g.sentences.filter(ht=>ht.text.toLowerCase().includes(nt.toLowerCase())))||[],ct=ht=>c?`https://www.youtube.com/embed/${c}?start=${Math.floor(ht)}`:null,dt=ht=>{if(e&&e(ht),c){const pt=ct(ht);if(pt){const ft=document.querySelector('iframe[src*="youtube.com/embed"]');ft&&(ft.src=pt)}}};return rt?jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),"Transcript"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-8",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin mr-2"}),jsxRuntimeExports.jsx("span",{children:"Loading transcript..."})]})})]}):$||!d?jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),"Transcript"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:$||"No transcript available for this video"})]})})]}):jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[g&&jsxRuntimeExports.jsx(Button,{variant:ot==="transcript"?"default":"ghost",size:"sm",onClick:()=>lt("transcript"),children:"Transcript"}),_e&&jsxRuntimeExports.jsx(Button,{variant:ot==="summary"?"default":"ghost",size:"sm",onClick:()=>lt("summary"),children:"AI Summary"})]})}),jsxRuntimeExports.jsx(CardContent,{children:ot==="transcript"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Search transcript...",value:nt,onChange:ht=>it(ht.target.value),className:"pl-10"})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"h-96",children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:at.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-muted-foreground",children:nt?"No matches found":"No transcript available"}):at.map((ht,pt)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-border/50 hover:bg-muted/30 transition-colors",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"flex-shrink-0 h-auto p-1 text-xs font-mono text-muted-foreground hover:text-primary",onClick:()=>dt(ht.startTimestamp),children:ht.formattedTimestamp}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed",children:ht.text})})]},ht.id))})}),nt&&at.length>0&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["Found ",at.length," result",at.length!==1?"s":"",' for "',nt,'"']})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none",children:jsxRuntimeExports.jsx("div",{className:"text-sm leading-relaxed",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],components:{h2:({children:ht})=>jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-foreground mt-6 mb-3 first:mt-0",children:ht}),h3:({children:ht})=>jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-foreground mt-4 mb-2",children:ht}),p:({children:ht})=>jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:ht}),ul:({children:ht})=>jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside text-sm text-muted-foreground mb-3 space-y-1",children:ht}),li:({children:ht})=>jsxRuntimeExports.jsx("li",{className:"text-sm text-muted-foreground",children:ht}),strong:({children:ht})=>jsxRuntimeExports.jsx("strong",{className:"font-semibold text-foreground",children:ht}),em:({children:ht})=>jsxRuntimeExports.jsx("em",{className:"italic text-muted-foreground",children:ht})},children:_e||""})})})})})]})}const MessageWithSources$1=React$1.memo(({message:a,onSourceClick:e})=>{const c=[/\[SOURCE (\d+)(?:, (\d+))*\]/g,/\[Source (\d+)(?:, (\d+))*\]/g,/\[source (\d+)(?:, (\d+))*\]/g,/SOURCE (\d+)(?:, (\d+))*\b/g,/Source (\d+)(?:, (\d+))*\b/g,/\(SOURCE (\d+)(?:, (\d+))*\)/g,/\(Source (\d+)(?:, (\d+))*\)/g,/"SOURCE (\d+)(?:, (\d+))*"/g,/"Source (\d+)(?:, (\d+))*"/g,/• \[SOURCE (\d+)(?:, (\d+))*\]/g,/• \[Source (\d+)(?:, (\d+))*\]/g];let d=!1,h=[],g=0;for(const b of c){const _e=[...a.content.matchAll(b)];if(_e.length>0){d=!0,_e.forEach(et=>{et.index>g&&h.push({type:"text",content:a.content.slice(g,et.index),sourceNumbers:[],fullMatch:""});const rt=et.slice(1).filter(Boolean).map(Number);h.push({type:"citation",content:et[0],sourceNumbers:rt,fullMatch:et[0]}),g=et.index+et[0].length});break}}if(g<a.content.length&&h.push({type:"text",content:a.content.slice(g),sourceNumbers:[],fullMatch:""}),!d){const b=/\[([^\]]+)\]/g,_e=[...a.content.matchAll(b)];if(_e.length>0){const et=[];let rt=0;return _e.forEach((st,$)=>{st.index>rt&&et.push({type:"text",content:a.content.slice(rt,st.index)}),et.push({type:"fallback_citation",content:st[0],citationText:st[1]}),rt=st.index+st[0].length}),rt<a.content.length&&et.push({type:"text",content:a.content.slice(rt)}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:et.map((st,$)=>{var _,nt,it;if(st.type==="text")return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:st.content})},$);{const ot=(_=a.sourceCitations)==null?void 0:_[0];if(((nt=ot==null?void 0:ot.metadata)==null?void 0:nt.type)==="youtube"&&((it=ot.metadata)!=null&&it.timestamp)){const lt=ot.metadata.timestamp,at=Math.floor(lt/60),ct=Math.floor(lt%60);return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1",children:jsxRuntimeExports.jsx("span",{className:"text-foreground text-sm",children:`${at}:${ct.toString().padStart(2,"0")}`})},$)}return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{console.log("Fallback citation clicked:",st.citationText),ot&&e(ot)},children:st.content})},$)}})})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:a.content})})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:jsxRuntimeExports.jsx("div",{className:"inline",children:h.map((b,_e)=>{if(b.type==="text")return jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:b.content})},_e);{const et=b.sourceNumbers.map(rt=>{var $,_,nt,it;let st=($=a.sourceCitations)==null?void 0:$.find(ot=>ot.chunkIndex===rt-1);return!st&&a.sourceCitations&&a.sourceCitations.length>=rt&&(st=a.sourceCitations[rt-1]),!st&&a.sourceCitations&&a.sourceCitations.length>0&&(st=a.sourceCitations[0]),console.log(`🔍 Looking for citation ${rt}:`),console.log(`   - By chunkIndex ${rt-1}:`,(_=a.sourceCitations)==null?void 0:_.find(ot=>ot.chunkIndex===rt-1)),console.log(`   - By array index ${rt-1}:`,(nt=a.sourceCitations)==null?void 0:nt[rt-1]),console.log("   - Final result:",st),console.log("📋 Available citations:",(it=a.sourceCitations)==null?void 0:it.map(ot=>({chunkIndex:ot.chunkIndex,fileName:ot.fileName}))),st}).filter(Boolean);return console.log(`✅ Citations found for part ${_e}:`,et),jsxRuntimeExports.jsx("span",{className:"inline",children:(()=>{var st,$;const rt=et[0];if(((st=rt==null?void 0:rt.metadata)==null?void 0:st.type)==="youtube"&&(($=rt.metadata)!=null&&$.timestamp)){const _=rt.metadata.timestamp,nt=Math.floor(_/60),it=Math.floor(_%60);return jsxRuntimeExports.jsx("span",{className:"text-foreground text-sm",children:`${nt}:${it.toString().padStart(2,"0")}`})}return jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{console.log("🎯 Citation clicked:",b.fullMatch),console.log("📄 Citation data:",et[0]),et[0]&&e(et[0])},children:b.fullMatch})})()},_e)}})})})}),FileVoiceCallPanel=({isOpen:a,onClose:e,fileId:c,fileName:d,workspaceId:h})=>{console.log("🎤 [FILE-VOICE] Component loaded - isOpen:",a);const{toast:g}=useToast(),b=useNavigate(),_e=reactExports.useRef(null),[et,rt]=reactExports.useState(!1),[st,$]=reactExports.useState("manual"),[_,nt]=reactExports.useState(!1),[it,ot]=reactExports.useState(null),[lt,at]=reactExports.useState([]),ct=reactExports.useRef(null),[dt,ht]=reactExports.useState(!1),[pt,ft]=reactExports.useState(!1),[mt,xt]=reactExports.useState(!1),[gt,Et]=reactExports.useState(null),[St,Pt]=reactExports.useState([{id:"1",content:`Hi! I'm your AI assistant. I can help you understand "${d}" through voice conversation. Click 'Start Recording' to begin speaking, then click 'Stop Recording' when you're done.`,isUser:!1,timestamp:new Date}]),[Mt,Rt]=reactExports.useState(!1),[Dt,Tt]=reactExports.useState(null),[It,Vt]=reactExports.useState("gemini-2.5-flash"),[Bt,Ct]=reactExports.useState("regular"),en=async(Xt,on)=>{try{const vn=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MESSAGES(Xt)),{method:"PUT",headers:{Authorization:`Bearer ${vn}`,"Content-Type":"application/json"},body:JSON.stringify({messages:on.map(yn=>({content:yn.content,isUser:yn.isUser,sourceCitations:yn.sourceCitations||[]}))})})).ok||console.error("Failed to update session")}catch(vn){console.error("Error updating session:",vn)}},{isVADReady:sn,isInitializing:kt,startVAD:Ut,pauseVAD:Jt,destroyVAD:tn,resetVAD:Gt}=useDisposableVAD({onSpeechStart:()=>{console.log("🎤 [VAD] Speech detected - user started speaking")},onSpeechEnd:Xt=>{console.log("🎤 [VAD] Speech ended - processing user input"),un(Xt)},onVADMisfire:()=>{console.log("🎤 [VAD] VAD misfire detected")}},{positiveSpeechThreshold:.8,negativeSpeechThreshold:.3,redemptionFrames:8,preSpeechPadFrames:1,minSpeechFrames:3,frameSamples:1536}),hn=reactExports.useCallback(()=>{if(console.log("🧹 [CLEANUP] Stopping all audio and VAD"),gt&&(gt.pause(),gt.currentTime=0,Et(null),xt(!1)),Jt(),tn(),ct.current&&ct.current.state!=="closed"&&!dt)try{ct.current.close(),ht(!0)}catch(Xt){console.warn("AudioContext already closed or in invalid state:",Xt),ht(!0)}},[gt,Jt,tn,dt]),fn=reactExports.useCallback(async()=>{if(Dt&&St.length>1)try{await en(Dt,St),console.log("💾 [SESSION] Session saved successfully")}catch(Xt){console.error("❌ [SESSION] Failed to save session:",Xt)}},[Dt,St]);reactExports.useEffect(()=>{st==="continuous"&&!sn&&!kt&&Ut().catch(Xt=>{console.error("❌ [VAD] Failed to initialize VAD:",Xt),g({title:"VAD Initialization Failed",description:"Voice activity detection could not be initialized",variant:"destructive"})})},[st,sn,kt,Ut]);const gn=async()=>{try{const Xt=await navigator.mediaDevices.getUserMedia({audio:!0}),on=new MediaRecorder(Xt);on.ondataavailable=vn=>{vn.data.size>0&&at(Cn=>[...Cn,vn.data])},on.onstop=async()=>{const vn=new Blob(lt,{type:"audio/wav"});at([]),await On(vn),Xt.getTracks().forEach(Cn=>Cn.stop())},ot(on),at([]),on.start(),nt(!0),console.log("🎤 [MANUAL] Started recording")}catch(Xt){console.error("❌ [MANUAL] Failed to start recording:",Xt),g({title:"Recording Failed",description:"Could not access microphone",variant:"destructive"})}},kn=()=>{it&&_&&(it.stop(),nt(!1),console.log("🎤 [MANUAL] Stopped recording"))},On=async Xt=>{if(console.log("🎤 [MANUAL] Processing recorded audio"),mt){console.log("🎤 [MANUAL] Ignoring speech while AI is speaking");return}ft(!0);try{const on=await $n(Xt);if(on.trim()){console.log("🎤 [MANUAL] Transcription:",on);const vn={id:Date.now().toString(),content:on,isUser:!0,timestamp:new Date};Pt(Cn=>[...Cn,vn]),await Wn(on)}}catch(on){console.error("❌ [MANUAL] Failed to process manual recording:",on),g({title:"Processing Failed",description:"Could not process your voice input",variant:"destructive"})}finally{ft(!1)}},un=reactExports.useCallback(async Xt=>{if(console.log("🎤 [SPEECH-END] Processing user speech"),mt){console.log("🎤 [SPEECH-END] Ignoring speech while AI is speaking");return}ft(!0);try{const on=await Sn(Xt),vn=await $n(on);vn&&vn.trim()?(console.log("🎤 [SPEECH-END] Transcribed text:",vn),await Wn(vn)):(console.log("🎤 [SPEECH-END] No speech detected in audio"),g({title:"No speech detected",description:"Please try speaking more clearly",variant:"destructive"}))}catch(on){console.error("❌ [SPEECH-END] Error processing speech:",on),g({title:"Speech processing failed",description:on.message||"Please try again",variant:"destructive"})}finally{ft(!1),Gt()}},[mt,Gt]),Sn=async Xt=>{if(!ct.current||ct.current.state==="closed"||dt)try{ct.current=new(window.AudioContext||window.webkitAudioContext),ht(!1)}catch(Qt){throw console.error("Failed to create AudioContext:",Qt),new Error("Failed to initialize audio processing")}const Cn=ct.current.createBuffer(1,Xt.length,16e3);return Cn.getChannelData(0).set(Xt),await Ln(Cn)},Ln=async Xt=>{const on=Xt.length,vn=Xt.numberOfChannels,Cn=Xt.sampleRate,yn=new ArrayBuffer(44+on*vn*2),nn=new DataView(yn),Qt=(An,In)=>{for(let Un=0;Un<In.length;Un++)nn.setUint8(An+Un,In.charCodeAt(Un))};Qt(0,"RIFF"),nn.setUint32(4,36+on*vn*2,!0),Qt(8,"WAVE"),Qt(12,"fmt "),nn.setUint32(16,16,!0),nn.setUint16(20,1,!0),nn.setUint16(22,vn,!0),nn.setUint32(24,Cn,!0),nn.setUint32(28,Cn*vn*2,!0),nn.setUint16(32,vn*2,!0),nn.setUint16(34,16,!0),Qt(36,"data"),nn.setUint32(40,on*vn*2,!0);let bn=44;for(let An=0;An<on;An++)for(let In=0;In<vn;In++){const Un=Math.max(-1,Math.min(1,Xt.getChannelData(In)[An]));nn.setInt16(bn,Un<0?Un*32768:Un*32767,!0),bn+=2}return new Blob([yn],{type:"audio/wav"})},$n=async Xt=>{const on=new FormData;on.append("audio",Xt,"recording.wav"),on.append("fileId",c);const vn=await fetch(buildApiUrl(API_ENDPOINTS.TRANSCRIBE.TRANSCRIBE),{method:"POST",body:on});if(!vn.ok){const yn=await vn.text();throw new Error(`Transcription failed: ${vn.status} ${yn}`)}return(await vn.json()).text},Wn=async Xt=>{var vn,Cn,yn,nn;if(!(Xt!=null&&Xt.trim())||Mt)return;if(console.log("🔍 [FileVoiceCallPanel] Processing message with fileId:",c,"type:",typeof c),console.log("🔍 [FileVoiceCallPanel] Processing message with workspaceId:",h,"type:",typeof h),!c||c==="undefined"||c==="null"){console.error("❌ [FileVoiceCallPanel] Invalid fileId:",c),g({title:"Error",description:"Invalid file ID. Please try refreshing the page.",variant:"destructive"});return}if(!h||h==="undefined"||h==="null"){console.error("❌ [FileVoiceCallPanel] Invalid workspaceId:",h),g({title:"Error",description:"Invalid workspace ID. Please try refreshing the page.",variant:"destructive"});return}const on={id:Date.now().toString(),content:Xt.trim(),isUser:!0,timestamp:new Date};Pt(Qt=>[...Qt,on]),Rt(!0);try{const Qt=localStorage.getItem("authToken");if(!Dt){const Un=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{method:"POST",headers:{Authorization:`Bearer ${Qt}`,"Content-Type":"application/json"},body:JSON.stringify({name:`Voice Call about ${d}`,workspaceId:h,fileId:c,mode:"call"})});if(Un.ok){const Vn=await Un.json();Vn.success&&Tt(Vn.data.id)}}const bn=[...St,on].map(Un=>({role:Un.isUser?"user":"assistant",content:Un.content}));console.log("🔍 [FileVoiceCallPanel] Sending RAG request with:",{workspaceId:parseInt(h),fileId:parseInt(c),sessionId:Dt,modelName:It,messageCount:bn.length});const An=await fetch(buildApiUrl(API_ENDPOINTS.RAG.MESSAGE),{method:"POST",headers:{Authorization:`Bearer ${Qt}`,"Content-Type":"application/json"},body:JSON.stringify({messages:bn,workspaceId:parseInt(h),fileId:parseInt(c),sessionId:Dt,modelName:It,chatMode:Bt})});if(console.log("🔍 [FileVoiceCallPanel] RAG response status:",An.status),!An.ok){const Un=await An.text();throw console.error("❌ [FileVoiceCallPanel] RAG API error:",Un),new Error(`Failed to send message: ${An.status} - ${Un}`)}const In=await An.json();if(console.log("🔍 [FileVoiceCallPanel] RAG response data:",{success:In.success,messageLength:(vn=In.message)==null?void 0:vn.length,sourceCitations:(yn=(Cn=In.context)==null?void 0:Cn.sourceCitations)==null?void 0:yn.length}),In.success){const Un={id:(Date.now()+1).toString(),content:In.message,isUser:!1,timestamp:new Date,sourceCitations:((nn=In.context)==null?void 0:nn.sourceCitations)||[]};Pt(Vn=>[...Vn,Un]),Un.content&&await Pn(Un.content)}else throw new Error(In.message||"Failed to get response")}catch(Qt){console.error("Error processing message:",Qt),g({title:"Error",description:Qt.message||"Failed to send message",variant:"destructive"})}finally{Rt(!1)}},Pn=async Xt=>{try{const on=localStorage.getItem("authToken"),vn=await fetch(buildApiUrl(API_ENDPOINTS.TTS.TTS),{method:"POST",headers:{Authorization:`Bearer ${on}`,"Content-Type":"application/json"},body:JSON.stringify({text:Xt})});if(vn.ok){const Cn=await vn.blob(),yn=URL.createObjectURL(Cn),nn=new Audio(yn);gt&&(gt.pause(),gt.currentTime=0),Et(nn),xt(!0),nn.onended=()=>{URL.revokeObjectURL(yn),Et(null),xt(!1),console.log("🎤 [TTS] AI finished speaking - ready for next user input"),Gt()},nn.onpause=()=>{xt(!1)},nn.play()}}catch(on){console.error("Error with text-to-speech:",on),xt(!1)}},or=async()=>{if(st==="manual")_?kn():await gn();else{if(!sn){g({title:"VAD Not Ready",description:"Voice activity detection is still initializing",variant:"destructive"});return}et?(console.log("📞 [CALL] Stopping voice call"),rt(!1),hn(),await fn(),g({title:"Speech Ended",description:"Voice call has been stopped and session saved"})):(console.log("📞 [CALL] Starting voice call"),rt(!0),Ut(),g({title:"Speech Started",description:"Voice call is now active - just start speaking!"}))}},Kt=Xt=>{console.log("📄 [CITATION] Clicked citation:",Xt),Xt.pageNumber?b(`/file/${Xt.fileId}?page=${Xt.pageNumber}`):b(`/file/${Xt.fileId}`),e()};return reactExports.useEffect(()=>{(()=>{_e.current&&(_e.current.scrollTop=_e.current.scrollHeight)})()},[St]),reactExports.useEffect(()=>{a||(console.log("🔇 [FILE-VOICE] Panel closing - cleaning up"),rt(!1),_&&it&&kn(),st==="continuous"&&hn(),et&&fn())},[a,hn,fn,et,_,it,st]),reactExports.useEffect(()=>()=>{st==="continuous"&&tn(),hn(),et&&fn()},[hn,fn,et,st,tn]),a?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-background",style:{height:"600px"},children:[jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",ref:_e,children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[St.map(Xt=>jsxRuntimeExports.jsx("div",{className:`flex ${Xt.isUser?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${Xt.isUser?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[Xt.isUser?jsxRuntimeExports.jsx("p",{className:"text-sm",children:Xt.content}):jsxRuntimeExports.jsx(MessageWithSources$1,{message:Xt,onSourceClick:Kt}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70 mt-1",children:Xt.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},Xt.id)),Mt&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"max-w-[80%] p-3 rounded-lg bg-muted text-foreground",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"AI is thinking..."})]})})})]})})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-t border-border",children:jsxRuntimeExports.jsx(ChatModeSelector,{selectedMode:Bt,onModeChange:Ct})}),jsxRuntimeExports.jsx("div",{className:"p-2 border-t border-border bg-background flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"speech-mode",className:"text-xs",children:"Speech Mode:"}),jsxRuntimeExports.jsx(Switch,{id:"speech-mode",checked:st==="continuous",onCheckedChange:Xt=>$(Xt?"continuous":"manual")}),jsxRuntimeExports.jsx(Label$2,{htmlFor:"speech-mode",className:"text-xs",children:st==="manual"?"Manual":"Continuous"})]}),jsxRuntimeExports.jsx(Button,{onClick:or,disabled:pt||mt||st==="continuous"&&!sn,className:`w-full h-12 ${st==="manual"&&_||st==="continuous"&&et?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary/90"}`,children:pt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),jsxRuntimeExports.jsx("span",{children:"Processing..."})]}):mt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Volume2,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"AI Speaking..."})]}):st==="manual"&&_||st==="continuous"&&et?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{children:"Stop Recording"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mic,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{children:"Start Recording"})]})}),jsxRuntimeExports.jsx("div",{className:"flex justify-center w-full",children:jsxRuntimeExports.jsx(ModelSelector,{selectedModel:It,onModelChange:Vt})})]})})]}):null},URLContentViewer$1=({file:a})=>{if(!a.metadata)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No content available"});const{metadata:e}=a;return e.type==="youtube"?jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"aspect-video",children:jsxRuntimeExports.jsx("iframe",{src:e.embedUrl,title:e.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Youtube,{className:"w-6 h-6 text-red-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e.title})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>window.open(e.originalUrl,"_blank"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open Original"]})]})}),jsxRuntimeExports.jsx(YouTubeTranscript,{fileId:a.id,videoId:e.videoId})]})})}):e.type==="website"?jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-6 h-6 text-blue-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e.title})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>window.open(e.originalUrl,"_blank"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open Original"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.description})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"AI Summary"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.summary})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Content"}),jsxRuntimeExports.jsx("div",{className:"bg-muted p-4 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:e.content})})]})]})]})})})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Unknown content type"})},PDFViewer$1=({file:a,viewMode:e,onExplainSelected:c,onAskSelected:d,pageNumber:h,onPageChange:g})=>{const[b,_e]=reactExports.useState(null),[et,rt]=reactExports.useState(null),[st,$]=reactExports.useState(800),_=localStorage.getItem("authToken"),nt=`${buildApiUrl(API_ENDPOINTS.FILES.PREVIEW(a.id))}?token=${_}`,it=reactExports.useRef(null),ot=reactExports.useRef(null),[lt,at]=reactExports.useState(!1),[ct,dt]=reactExports.useState(""),[ht,pt]=reactExports.useState(null);GlobalWorkerOptions.workerSrc="/pdf.worker.js",reactExports.useEffect(()=>{const xt=()=>{if(it.current){const Et=it.current.clientWidth;$(Math.max(300,Et-48))}};xt();const gt=new ResizeObserver(xt);return it.current&&gt.observe(it.current),()=>{gt.disconnect()}},[]),reactExports.useEffect(()=>{e==="continuous"&&ot.current&&b&&h>0&&(console.log("🔄 [Scroll Effect Triggered]",{viewMode:e,pageNumber:h,numPages:b}),setTimeout(()=>{if(ot.current){console.log("🔍 [Looking for page elements]");const xt=ot.current.querySelectorAll("[data-page-number]");console.log("📄 [Found page elements]",xt.length);const gt=Array.from(xt).find(Et=>Et.getAttribute("data-page-number")===h.toString());if(console.log("🎯 [Target page element]",gt),gt)console.log("📜 [Scrolling to target element]"),gt.scrollIntoView({behavior:"smooth",block:"start"});else{console.log("📜 [Using fallback scroll calculation]");const St=(h-1)*1100;ot.current.scrollTo({top:St,behavior:"smooth"})}}},100))},[h,e,b]);const ft=()=>{g(Math.max(1,h-1))},mt=()=>{g(Math.min(b||1,h+1))};return reactExports.useEffect(()=>{const xt=()=>{const gt=window.getSelection();if(gt&&gt.rangeCount>0){const Et=gt.getRangeAt(0);if(Et&&Et.toString().trim()&&it.current&&it.current.contains(Et.commonAncestorContainer)){const St=Et.getBoundingClientRect();rt(St)}else rt(null)}else rt(null)};return document.addEventListener("selectionchange",xt),()=>document.removeEventListener("selectionchange",xt)},[]),reactExports.useEffect(()=>{et?pt({top:et.bottom+window.scrollY+4,left:et.right+window.scrollX+8}):(at(!1),dt(""),pt(null))},[et]),jsxRuntimeExports.jsxs("div",{ref:it,className:"w-full h-full relative",children:[e==="single"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface border-b border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:ft,disabled:h<=1,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-4 h-4"}),"Previous"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",h," of ",b||"..."]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:mt,disabled:h>=(b||1),className:"flex items-center gap-2",children:["Next",jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:b||1,value:h,onChange:xt=>{const gt=parseInt(xt.target.value);gt>=1&&gt<=(b||1)&&g(gt)},className:"w-16 px-2 py-1 text-sm border border-border rounded"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",b||"..."]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(Document,{file:nt,onLoadSuccess:({numPages:xt})=>_e(xt),loading:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading PDF..."}),error:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:"Failed to load PDF"}),className:"bg-white rounded-lg shadow-lg",children:b&&jsxRuntimeExports.jsx(Page,{pageNumber:h,width:Math.min(800,st),renderTextLayer:!0,renderAnnotationLayer:!1})})})})]}),e==="continuous"&&jsxRuntimeExports.jsx("div",{ref:ot,className:"w-full h-full overflow-auto bg-muted rounded-lg",children:jsxRuntimeExports.jsx(Document,{file:nt,onLoadSuccess:({numPages:xt})=>_e(xt),loading:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading PDF..."}),error:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:"Failed to load PDF"}),className:"w-full h-full",children:b&&Array.from(new Array(b),(xt,gt)=>jsxRuntimeExports.jsx("div",{"data-page-number":gt+1,children:jsxRuntimeExports.jsx(Page,{pageNumber:gt+1,width:Math.min(800,st),renderTextLayer:!0,renderAnnotationLayer:!1})},`page_${gt+1}`))})}),et&&jsxRuntimeExports.jsxs("div",{style:{position:"fixed",top:et.bottom+window.scrollY+4,left:et.right+window.scrollX+8,zIndex:1e3,background:"white",border:"1px solid #e5e7eb",borderRadius:8,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",padding:"4px 8px",display:"flex",gap:4,alignItems:"center"},children:[jsxRuntimeExports.jsx("button",{style:{background:"#f3f4f6",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:14},onClick:()=>{var xt;return d(((xt=window.getSelection())==null?void 0:xt.toString())||"")},children:"Ask"}),jsxRuntimeExports.jsx("button",{style:{background:"#f3f4f6",border:"none",borderRadius:4,padding:"2px 8px",cursor:"pointer",fontSize:14},onClick:()=>{var xt;return c(((xt=window.getSelection())==null?void 0:xt.toString())||"")},children:"Explain"})]})]})},FilePreviewPage=()=>{var co,Om,Dm,iy,fs,mp;const{fileId:a}=useParams(),e=useNavigate(),[c]=useSearchParams(),{toast:d}=useToast(),[h,g]=reactExports.useState([]),[b,_e]=reactExports.useState(null),[et,rt]=reactExports.useState(null),[st,$]=reactExports.useState(!0),[_,nt]=reactExports.useState([{id:"1",content:"Hi! I'm your AI assistant. I can help you understand this content, answer questions about it, and provide insights. What would you like to know?",isUser:!1,timestamp:new Date}]),[it,ot]=reactExports.useState([{id:"1",content:"Hi! I'm your AI assistant. I can help you understand this content through voice conversation. What would you like to know?",isUser:!1,timestamp:new Date}]),[lt,at]=reactExports.useState(""),[ct,dt]=reactExports.useState(!1),[ht,pt]=reactExports.useState("single"),[ft,mt]=reactExports.useState(1),[xt,gt]=reactExports.useState(null),[Et,St]=reactExports.useState(null),[Pt,Mt]=reactExports.useState(800),[Rt,Dt]=reactExports.useState(null),[Tt,It]=reactExports.useState([]),[Vt,Bt]=reactExports.useState(!1),[Ct,en]=reactExports.useState(!1),[sn,kt]=reactExports.useState(!1),[Ut,Jt]=reactExports.useState("chat"),[tn,Gt]=reactExports.useState("gpt-4o-mini"),[hn,fn]=reactExports.useState("regular"),[gn,kn]=reactExports.useState(!1),{isCollapsed:On,toggleCollapse:un}=useSidebar();reactExports.useEffect(()=>{et&&Ut==="chat"&&ts()},[et,Ut]);const[Sn,Ln]=reactExports.useState("exam"),[$n,Wn]=reactExports.useState(!1),[Pn,or]=reactExports.useState([]),[Kt,Xt]=reactExports.useState(!1),[on,vn]=reactExports.useState(!1),[Cn,yn]=reactExports.useState({numQuestions:10,questionType:"both"}),[nn,Qt]=reactExports.useState(!1),[bn,An]=reactExports.useState({numMultipleChoice:5,numShortAnswer:3,numEssay:2,totalPoints:100}),In=[{value:"exam",label:"Exam Questions",description:"Create comprehensive exam questions",icon:FileText},{value:"quiz",label:"Quiz",description:"Quick quiz questions for review",icon:CircleCheckBig},{value:"flashcards",label:"Flashcards",description:"Create study flashcards",icon:BookOpen},{value:"cheat_sheet",label:"Cheat Sheet",description:"Generate a concise reference guide",icon:Lightbulb},{value:"study_guide",label:"Study Guide",description:"Comprehensive study material",icon:BookOpen},{value:"notes",label:"Notes",description:"Organized study notes",icon:FileText}],Un=reactExports.useRef(null),Vn=reactExports.useRef(null);reactExports.useRef(0);const[ir,Fn]=reactExports.useState(!0),[cr,Gn]=reactExports.useState(null),[Cr,kr]=reactExports.useState(!1),[mr,Fs]=reactExports.useState(null),[Ao,js]=reactExports.useState(null),Xn=()=>Ut==="call"?it:_,Zn=()=>Ut==="call"?ot:nt,Nn=()=>Ut==="call"?Ao:mr,pr=()=>Ut==="call"?js:Fs,yr=()=>{cr&&(console.log("🔇 [TTS] Stopping audio - leaving voice chat mode"),cr.pause(),cr.currentTime=0,Gn(null))};reactExports.useEffect(()=>{if(Cr)return;const mn=()=>{if(Vn.current){const Hn=Vn.current.querySelector("[data-radix-scroll-area-viewport]");Hn&&(Hn.scrollTop=Hn.scrollHeight)}};mn();const Mn=setTimeout(mn,100);return()=>clearTimeout(Mn)},[Xn(),Cr]),reactExports.useEffect(()=>{if(et&&Ut==="chat"){const mn=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},200);return()=>clearTimeout(mn)}},[et,Ut]),reactExports.useEffect(()=>{Ut!=="call"&&yr()},[Ut]),reactExports.useEffect(()=>()=>{cr&&(console.log("🔇 [TTS] Stopping audio - leaving page"),cr.pause(),cr.currentTime=0,Gn(null))},[cr]);const zr=mn=>{Ut==="call"&&mn!=="call"&&console.log("📞 [MODE-SWITCH] Switching away from call mode - ensuring cleanup"),cr&&(console.log("🔇 [TTS] Stopping audio - switching modes"),cr.pause(),cr.currentTime=0,Gn(null)),kr(!0),Jt(mn),setTimeout(()=>{kr(!1)},200)};reactExports.useEffect(()=>{(async()=>{try{const Mn=localStorage.getItem("authToken"),Hn=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${Mn}`,"Content-Type":"application/json"}}),Jn=await Hn.json();Hn.ok&&Jn.success?g(Jn.data.map(nr=>({id:nr.id.toString(),name:nr.name,description:nr.description||null,isActive:!1}))):d({title:"Error fetching workspaces",description:Jn.message||"Failed to load workspaces",variant:"destructive"})}catch{d({title:"Error fetching workspaces",description:"Network error occurred",variant:"destructive"})}})()},[d]),reactExports.useEffect(()=>{a&&Dl()},[a]),reactExports.useEffect(()=>{const mn=c.get("sessionId");mn&&!Nn()&&$r(mn)},[c,Nn()]),reactExports.useEffect(()=>{et&&a&&Lr()},[et,a,Ut]),reactExports.useEffect(()=>{et&&a&&xn()},[et,a]),reactExports.useEffect(()=>{et&&a&&!Nn()&&Xn().length===1&&Vr()},[et,a,Nn(),Xn().length]);const Lr=async()=>{try{Bt(!0);const mn=localStorage.getItem("authToken"),Mn=new URLSearchParams;et!=null&&et.workspaceId&&Mn.append("workspaceId",et.workspaceId.toString()),a&&Mn.append("fileId",a),Mn.append("mode",Ut);const Hn=await fetch(buildApiUrl(`/chat-sessions/sessions?${Mn}`),{headers:{Authorization:`Bearer ${mn}`}}),Jn=await Hn.json();return Hn.ok&&Jn.success?(It(Jn.data),Jn.data):(d({title:"Error loading chat history",description:Jn.message||"Failed to load chat sessions",variant:"destructive"}),[])}catch{return d({title:"Error loading chat history",description:"Network error occurred",variant:"destructive"}),[]}finally{Bt(!1)}},ts=async()=>{try{const mn=await Lr();if(mn.length>0){const Mn=mn[0];console.log(`💬 [FilePreviewPage] Loading most recent session: ${Mn.id}`),await $r(Mn.id)}else console.log("💬 [FilePreviewPage] No existing sessions, creating new session"),Vr()}catch(mn){console.error("❌ [FilePreviewPage] Error loading most recent session:",mn),Vr()}},Vr=async()=>{try{const mn=localStorage.getItem("authToken"),Mn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{method:"POST",headers:{Authorization:`Bearer ${mn}`,"Content-Type":"application/json"},body:JSON.stringify({name:`${Ut==="call"?"Voice Call":"Chat"} about ${(et==null?void 0:et.originalName)||"document"}`,workspaceId:et==null?void 0:et.workspaceId,fileId:a,mode:Ut})}),Hn=await Mn.json();if(Mn.ok&&Hn.success){const Jn=Hn.data.id;console.log(`✅ [FilePreviewPage] Created new session: ${Jn}`),pr()(Jn);const nr={id:Date.now().toString(),content:Ut==="call"?"Hi! I'm your AI assistant. I can help you understand this content through voice conversation. What would you like to know?":"Hi! I'm your AI assistant. I can help you understand this content, answer questions about it, and provide insights. What would you like to know?",isUser:!1,timestamp:new Date};Zn()([nr]),await _o(Jn,[nr]),await Lr()}else console.error("❌ [FilePreviewPage] Failed to create new session:",Hn),d({title:"Error",description:"Failed to create new chat session",variant:"destructive"})}catch(mn){console.error("❌ [FilePreviewPage] Error creating new session:",mn),d({title:"Error",description:"Failed to create new chat session",variant:"destructive"})}},$r=async mn=>{try{const Mn=localStorage.getItem("authToken"),Hn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(mn)),{headers:{Authorization:`Bearer ${Mn}`}}),Jn=await Hn.json();if(Hn.ok&&Jn.success){const nr=Jn.data;pr()(nr.id);const br=nr.messages.map(Dr=>({id:Dr.id.toString(),content:Dr.content,isUser:Dr.isUser,timestamp:new Date(Dr.createdAt),sourceCitations:Dr.sourceCitations||Dr.source_citations||[]}));Zn()(br),en(!1)}else d({title:"Error loading chat session",description:Jn.message||"Failed to load session",variant:"destructive"})}catch{d({title:"Error loading chat session",description:"Network error occurred",variant:"destructive"})}},Jr=async mn=>{try{const Mn=localStorage.getItem("authToken");(await fetch(buildApiUrl(`/chat-sessions/${mn}`),{method:"DELETE",headers:{Authorization:`Bearer ${Mn}`}})).ok?(It(Jn=>Jn.filter(nr=>nr.id!==mn)),Nn()===mn&&(pr()(null),Zn()([]),Vr()),d({title:"Session Deleted",description:"Chat session has been deleted"})):d({title:"Error",description:"Failed to delete session",variant:"destructive"})}catch(Mn){console.error("Error deleting session:",Mn),d({title:"Error",description:"Failed to delete session",variant:"destructive"})}},_o=async(mn,Mn)=>{try{console.log(`💾 [FilePreviewPage] Updating session ${mn} with ${Mn.length} messages`);const Hn=localStorage.getItem("authToken"),Jn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MESSAGES(mn)),{method:"PUT",headers:{Authorization:`Bearer ${Hn}`,"Content-Type":"application/json"},body:JSON.stringify({messages:Mn.map(br=>({content:br.content,isUser:br.isUser,timestamp:br.timestamp.toISOString(),sourceCitations:br.sourceCitations||null}))})}),nr=await Jn.json();Jn.ok&&nr.success?console.log(`✅ [FilePreviewPage] Session ${mn} updated successfully`):console.error(`❌ [FilePreviewPage] Failed to update session ${mn}:`,nr.message)}catch(Hn){console.error(`❌ [FilePreviewPage] Error updating session ${mn}:`,Hn)}};reactExports.useEffect(()=>{h.length>0&&g(mn=>mn.map(Mn=>({...Mn,isActive:Mn.id===b})))},[b,h.length]);const Bs=mn=>{_e(mn),g(Mn=>Mn.map(Hn=>({...Hn,isActive:Hn.id===mn}))),e("/",{state:{workspaceId:mn}})},Ro=()=>{e("/")},Il=async mn=>{console.log("Delete workspace:",mn)},Ol=async(mn,Mn)=>{console.log("Rename workspace:",mn,"to",Mn)},Dl=async()=>{if(a){$(!0);try{const mn=localStorage.getItem("authToken"),Mn=await fetch(buildApiUrl(`/files/${a}`),{headers:{Authorization:`Bearer ${mn}`,"Content-Type":"application/json"}}),Hn=await Mn.json();Mn.ok&&Hn.success?(rt(Hn.data),_e(Hn.data.workspaceId.toString()),g(Jn=>Jn.map(nr=>({...nr,isActive:nr.id===Hn.data.workspaceId.toString()})))):(d({title:"Error fetching file",description:Hn.message||"Failed to load file details",variant:"destructive"}),e("/"))}catch{d({title:"Error fetching file",description:"Network error occurred",variant:"destructive"}),e("/")}finally{$(!1)}}},Ht=async mn=>{var nr,br,Dr,Us;const Mn=lt;if(!Mn.trim()||ct||!a)return;let Hn=Mn;Rt&&(Hn=`Question: ${Mn}
Context: ${Rt}`,Dt(null));const Jn={id:Date.now().toString(),content:Hn,isUser:!0,timestamp:new Date};Zn()(Ws=>[...Ws,Jn]),at(""),dt(!0);try{const Ws=localStorage.getItem("authToken"),Co=[...Xn(),Jn].map(ms=>({role:ms.isUser?"user":"assistant",content:ms.content})),Ko=await fetch(buildApiUrl(API_ENDPOINTS.RAG.MESSAGE),{method:"POST",headers:{Authorization:`Bearer ${Ws}`,"Content-Type":"application/json"},body:JSON.stringify({messages:Co,workspaceId:(et==null?void 0:et.workspaceId)||1,fileId:parseInt(a),modelName:tn,chatMode:hn,contextOnly:gn})}),Ss=await Ko.json();if(Ko.ok&&Ss.success){console.log("📨 [handleSendMessage] Received response:",Ss),console.log("📄 [handleSendMessage] Source citations received:",(nr=Ss.context)==null?void 0:nr.sourceCitations);let ms=Ss.message;((br=et==null?void 0:et.metadata)==null?void 0:br.type)==="youtube"&&((Dr=Ss.context)!=null&&Dr.sourceCitations)&&(ms=ms.replace(/\[SOURCE\s+(\d+)(?:,\s*(\d+))*\]/gi,(Eu,...uo)=>{const ko=uo.filter(Boolean).map(Number).map(lr=>{var ho;const tr=Ss.context.sourceCitations[lr-1];if((ho=tr==null?void 0:tr.metadata)!=null&&ho.timestamp){const qs=tr.metadata.timestamp,wu=Math.floor(qs/60),Su=Math.floor(qs%60);return`${wu}:${Su.toString().padStart(2,"0")}`}return""}).filter(Boolean);return ko.length>0?ko.join(", "):""}),ms=ms.replace(/\[source\s+(\d+)(?:,\s*(\d+))*\]/gi,(Eu,...uo)=>{const ko=uo.filter(Boolean).map(Number).map(lr=>{var ho;const tr=Ss.context.sourceCitations[lr-1];if((ho=tr==null?void 0:tr.metadata)!=null&&ho.timestamp){const qs=tr.metadata.timestamp,wu=Math.floor(qs/60),Su=Math.floor(qs%60);return`${wu}:${Su.toString().padStart(2,"0")}`}return""}).filter(Boolean);return ko.length>0?ko.join(", "):""}),ms=ms.replace(/\[Source\s+(\d+)(?:,\s*(\d+))*\]/gi,(Eu,...uo)=>{const ko=uo.filter(Boolean).map(Number).map(lr=>{var ho;const tr=Ss.context.sourceCitations[lr-1];if((ho=tr==null?void 0:tr.metadata)!=null&&ho.timestamp){const qs=tr.metadata.timestamp,wu=Math.floor(qs/60),Su=Math.floor(qs%60);return`${wu}:${Su.toString().padStart(2,"0")}`}return""}).filter(Boolean);return ko.length>0?ko.join(", "):""}),ms=ms.replace(/\s+/g," ").trim());const gp={id:(Date.now()+1).toString(),content:ms,isUser:!1,timestamp:new Date,sourceCitations:((Us=Ss.context)==null?void 0:Us.sourceCitations)||[]};console.log("💬 [handleSendMessage] Created AI response with citations:",gp.sourceCitations),Zn()(Eu=>{const uo=[...Eu,gp];return Nn()?(console.log(`💾 [FilePreviewPage] Updating session ${Nn()} with ${uo.length} messages`),_o(Nn(),uo).catch(ur=>{console.error("❌ [FilePreviewPage] Error saving session:",ur)})):console.error("❌ [FilePreviewPage] No current session ID found"),uo})}else{const ms={id:(Date.now()+1).toString(),content:Ss.message||"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};Zn()(gp=>[...gp,ms]),d({title:"Chat Error",description:Ss.message||"Failed to get AI response",variant:"destructive"})}}catch(Ws){console.error("Error sending message:",Ws);const Co={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again.",isUser:!1,timestamp:new Date};Zn()(Ko=>[...Ko,Co]),d({title:"Connection Error",description:"Failed to connect to AI service",variant:"destructive"})}finally{dt(!1)}},Zt=async()=>{if(et)try{const mn=localStorage.getItem("authToken"),Mn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DOWNLOAD(et.id)),{headers:{Authorization:`Bearer ${mn}`}});if(Mn.ok){const Hn=await Mn.json();Hn.success&&Hn.data.downloadUrl?(window.open(Hn.data.downloadUrl,"_blank"),d({title:"File opened",description:"Your file has been opened in a new tab"})):d({title:"Download failed",description:"Unable to get download URL",variant:"destructive"})}else d({title:"Download failed",description:"Unable to download the file",variant:"destructive"})}catch{d({title:"Download failed",description:"Network error occurred",variant:"destructive"})}},ln=async mn=>{var Hn;if(!mn.trim()||!a)return;const Mn={id:Date.now().toString(),content:`Explain this: ${mn}`,isUser:!0,timestamp:new Date};Zn()(Jn=>[...Jn,Mn]),dt(!0);try{const Jn=localStorage.getItem("authToken"),nr=await fetch(buildApiUrl(API_ENDPOINTS.RAG.MESSAGE),{method:"POST",headers:{Authorization:`Bearer ${Jn}`,"Content-Type":"application/json"},body:JSON.stringify({messages:[...Xn(),Mn],workspaceId:(et==null?void 0:et.workspaceId)||1,fileId:parseInt(a)})}),br=await nr.json();if(nr.ok&&br.success){const Dr={id:(Date.now()+1).toString(),content:br.message,isUser:!1,timestamp:new Date,sourceCitations:((Hn=br.context)==null?void 0:Hn.sourceCitations)||[]};Zn()(Us=>[...Us,Dr]),Nn()&&await _o(Nn(),[...Xn(),Mn,Dr])}else{const Dr={id:(Date.now()+1).toString(),content:br.message||"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};Zn()(Us=>[...Us,Dr])}}catch{const nr={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again.",isUser:!1,timestamp:new Date};Zn()(br=>[...br,nr])}finally{dt(!1)}},dn=mn=>{mn.trim()&&(Dt(mn),at(""),setTimeout(()=>{var Mn;(Mn=Un.current)==null||Mn.focus()},0))},xn=async()=>{if(!(!a||!(et!=null&&et.workspaceId)))try{Xt(!0);const mn=localStorage.getItem("authToken"),Mn=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.FILES(et.workspaceId.toString())),{headers:{Authorization:`Bearer ${mn}`}}),Hn=await Mn.json();if(Mn.ok&&Hn.success){console.log("🔍 [GENERATE] All files from workspace:",Hn.data),console.log("🔍 [GENERATE] Looking for files with sourceFileId:",a);const Jn=Hn.data.filter(nr=>{var Co,Ko;const br=((Co=nr.metadata)==null?void 0:Co.type)==="generated",Dr=(Ko=nr.metadata)==null?void 0:Ko.sourceFileId,Us=parseInt(a),Ws=Dr===Us||typeof Dr=="string"&&Dr===a;return console.log("🔍 [GENERATE] File:",nr.originalName,"isGenerated:",br,"sourceFileId:",Dr,"currentFileId:",Us,"matchesSource:",Ws),br&&Ws});console.log("🔍 [GENERATE] Found files from this file:",Jn),or(Jn)}else d({title:"Error fetching generated files",description:Hn.message||"Failed to load generated files",variant:"destructive"})}catch{d({title:"Error fetching generated files",description:"Network error occurred",variant:"destructive"})}finally{Xt(!1)}},wn=async()=>{if(!(!a||!Sn)){if(Sn==="quiz"){vn(!0);return}if(Sn==="exam"){Qt(!0);return}await an()}},an=async mn=>{if(!(!a||!Sn)){Wn(!0);try{const Mn=localStorage.getItem("authToken"),Hn={type:Sn};if(Sn==="quiz"){const br=mn||Cn;Hn.numQuestions=br.numQuestions,Hn.questionType=br.questionType}if(Sn==="exam"){const br=mn||bn;Hn.numMultipleChoice=br.numMultipleChoice,Hn.numShortAnswer=br.numShortAnswer,Hn.numEssay=br.numEssay,Hn.totalPoints=br.totalPoints}const Jn=await fetch(buildApiUrl(API_ENDPOINTS.GENERATE.FILE(a)),{method:"POST",headers:{Authorization:`Bearer ${Mn}`,"Content-Type":"application/json"},body:JSON.stringify(Hn)}),nr=await Jn.json();Jn.ok&&nr.success?(console.log("✅ [GENERATE] Content generated successfully:",nr.data),d({title:"Content Generated!",description:"Your content has been created successfully"}),xn()):d({title:"Generation Failed",description:nr.message||"Failed to generate content",variant:"destructive"})}catch{d({title:"Generation Failed",description:"Network error occurred",variant:"destructive"})}finally{Wn(!1)}}},jn=async mn=>{yn(mn),vn(!1),await an(mn)},Rn=async mn=>{An(mn),Qt(!1),await an(mn)},qn=async mn=>{try{const Mn=localStorage.getItem("authToken"),Hn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DOWNLOAD(mn.id)),{headers:{Authorization:`Bearer ${Mn}`}});if(Hn.ok){const Jn=await Hn.json();Jn.success&&Jn.data.downloadUrl?window.open(Jn.data.downloadUrl,"_blank"):d({title:"Error opening file",description:"Unable to open the generated file",variant:"destructive"})}else d({title:"Error opening file",description:"Unable to open the generated file",variant:"destructive"})}catch{d({title:"Error opening file",description:"Network error occurred",variant:"destructive"})}},rr=async(mn,Mn)=>{if(Mn.stopPropagation(),!!confirm(`Are you sure you want to delete "${mn.originalName}"?`))try{const Hn=localStorage.getItem("authToken"),Jn=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DELETE(mn.id)),{method:"DELETE",headers:{Authorization:`Bearer ${Hn}`}});if(Jn.ok)d({title:"File deleted",description:"Generated file has been deleted successfully"}),xn();else{const nr=await Jn.json();d({title:"Error deleting file",description:nr.message||"Failed to delete the file",variant:"destructive"})}}catch{d({title:"Error deleting file",description:"Network error occurred",variant:"destructive"})}},[ar,wr]=reactExports.useState("All"),En=()=>{const mn=new Set;return Pn.forEach(Mn=>{var Jn;const Hn=((Jn=Mn.metadata)==null?void 0:Jn.generationType)||"Unknown";mn.add(Hn)}),["All",...Array.from(mn).sort()]},dr=ar==="All"?Pn:Pn.filter(mn=>{var Mn;return((Mn=mn.metadata)==null?void 0:Mn.generationType)===ar}),Sr=mn=>({practice_questions:"Practice Questions",exam:"Exam",quiz:"Quiz",flashcards:"Flashcards",cheat_sheet:"Cheat Sheet",study_guide:"Study Guide",notes:"Notes"})[mn]||mn,Hr=mn=>{var Mn,Hn;if(console.log("🎯 [Source Citation Clicked]",mn),console.log("📄 [Current View Mode]",ht),console.log("📄 [Current Page Number]",ft),mn.fileId===parseInt(a||"0")){if(((Mn=et==null?void 0:et.metadata)==null?void 0:Mn.type)==="youtube"&&((Hn=mn.metadata)!=null&&Hn.timestamp)){const Jn=mn.metadata.timestamp;console.log("🎬 [YouTube Timestamp]",Jn);const nr=document.querySelector('iframe[src*="youtube.com/embed"]');if(nr&&et.metadata.videoId){const br=`https://www.youtube.com/embed/${et.metadata.videoId}?start=${Math.floor(Jn)}`;nr.src=br,d({title:"Video timestamp found",description:`Navigated to ${mn.fileName} at ${Math.floor(Jn/60)}:${(Jn%60).toString().padStart(2,"0")}`})}}else mn.pageNumber&&(console.log("🔄 [Setting Page Number]",mn.pageNumber),mt(mn.pageNumber),d({title:"Source found",description:`Navigated to ${mn.fileName}, page ${mn.pageNumber}`}));St(mn)}else e(`/file/${mn.fileId}?sessionId=${Nn()}&citation=${encodeURIComponent(JSON.stringify(mn))}`)};return reactExports.useEffect(()=>{var Jn;const mn=c.get("citation"),Mn=c.get("page"),Hn=c.get("timestamp");if(mn)try{const nr=JSON.parse(decodeURIComponent(mn));St(nr),nr.pageNumber&&mt(nr.pageNumber)}catch(nr){console.error("Failed to parse citation parameter:",nr)}if(Mn){const nr=parseInt(Mn);nr>0&&mt(nr)}if(Hn&&((Jn=et==null?void 0:et.metadata)==null?void 0:Jn.type)==="youtube"){const nr=parseFloat(Hn);if(!isNaN(nr)&&et.metadata.videoId){const br=document.querySelector('iframe[src*="youtube.com/embed"]');if(br){const Dr=`https://www.youtube.com/embed/${et.metadata.videoId}?start=${Math.floor(nr)}`;br.src=Dr;const Us=Math.floor(nr/60),Ws=Math.floor(nr%60),Co=`${Us}:${Ws.toString().padStart(2,"0")}`;d({title:"Video timestamp found",description:`Navigated to ${et.metadata.title} at ${Co}`})}}}},[c,et]),st?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading file..."})]})}):et?jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex bg-background overflow-hidden",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:h,onWorkspaceSelect:Bs,onDeleteWorkspace:Il,onRenameWorkspace:Ol,onHomeSelect:Ro,isHomeActive:!1,isCollapsed:On,onToggleCollapse:un}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsx("header",{className:"border-b border-border bg-surface/50 backdrop-blur-sm flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>e(`/workspace/${et.workspaceId}`),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[((co=et.metadata)==null?void 0:co.type)==="youtube"?jsxRuntimeExports.jsx(Youtube,{className:"w-5 h-5 text-red-500"}):((Om=et.metadata)==null?void 0:Om.type)==="website"?jsxRuntimeExports.jsx(Globe,{className:"w-5 h-5 text-blue-500"}):jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-primary"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-lg font-medium text-foreground",children:et.originalName}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:[((Dm=et.metadata)==null?void 0:Dm.type)==="youtube"?"YouTube Video":((iy=et.metadata)==null?void 0:iy.type)==="website"?"Website":`${(et.fileSize/1024/1024).toFixed(2)} MB`," • ",new Date(et.createdAt).toLocaleDateString()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[!et.metadata||et.metadata.type!=="youtube"&&et.metadata.type!=="website"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:"View:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 border border-border rounded-lg p-1",children:[jsxRuntimeExports.jsx(Button,{variant:ht==="continuous"?"default":"ghost",size:"sm",onClick:()=>pt("continuous"),className:"h-8 px-3",title:"Continuous scroll view",children:jsxRuntimeExports.jsx(List$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:ht==="single"?"default":"ghost",size:"sm",onClick:()=>pt("single"),className:"h-8 px-3",title:"Single page view",children:jsxRuntimeExports.jsx(Grid3x3,{className:"w-4 h-4"})})]})]}):null,jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:Zt,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download"]})]})]})})}),jsxRuntimeExports.jsxs(ResizablePanelGroup,{direction:"horizontal",className:"flex-1 min-h-0",children:[jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:70,minSize:30,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col min-h-0 h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-auto",children:jsxRuntimeExports.jsx("div",{className:`bg-card border border-border rounded-lg min-h-full ${ht==="single"?"single-page-view":""}`,style:{position:"relative"},children:et.metadata&&(et.metadata.type==="youtube"||et.metadata.type==="website")?jsxRuntimeExports.jsx(URLContentViewer$1,{file:et}):jsxRuntimeExports.jsx(PDFViewer$1,{file:et,viewMode:ht,onExplainSelected:ln,onAskSelected:dn,pageNumber:ft,onPageChange:mt})})})})}),jsxRuntimeExports.jsx(ResizableHandle,{withHandle:!0}),jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:45,minSize:30,maxSize:65,children:jsxRuntimeExports.jsxs("div",{className:"bg-background border-l border-border flex flex-col flex-shrink-0 h-full min-w-0 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 border-b border-border flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto scrollbar-hide pb-1",children:[jsxRuntimeExports.jsxs(Button,{variant:Ut==="chat"?"default":"ghost",size:"sm",onClick:()=>zr("chat"),className:"flex items-center gap-1.5 px-2.5 py-1.5 flex-shrink-0 text-xs",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Ut==="chat"?"bg-green-500":"bg-transparent"}`}),jsxRuntimeExports.jsx(MessageCircle,{className:"w-3 h-3"}),"Chat"]}),jsxRuntimeExports.jsxs(Button,{variant:Ut==="call"?"default":"ghost",size:"sm",onClick:()=>zr("call"),className:"flex items-center gap-1.5 px-2.5 py-1.5 flex-shrink-0 text-xs",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Ut==="call"?"bg-green-500":"bg-transparent"}`}),jsxRuntimeExports.jsx(Phone,{className:"w-3 h-3"}),"Call"]}),jsxRuntimeExports.jsxs(Button,{variant:Ut==="generate"?"default":"ghost",size:"sm",onClick:()=>zr("generate"),className:"flex items-center gap-1.5 px-2.5 py-1.5 flex-shrink-0 text-xs",children:[jsxRuntimeExports.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Ut==="generate"?"bg-green-500":"bg-transparent"}`}),jsxRuntimeExports.jsx(Brain,{className:"w-3 h-3"}),"Generate"]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"w-7 h-7 bg-gradient-primary rounded-lg flex items-center justify-center flex-shrink-0",children:Ut==="chat"?jsxRuntimeExports.jsx(MessageCircle,{className:"w-3.5 h-3.5 text-primary-foreground"}):Ut==="call"?jsxRuntimeExports.jsx(Phone,{className:"w-3.5 h-3.5 text-primary-foreground"}):jsxRuntimeExports.jsx(Brain,{className:"w-3.5 h-3.5 text-primary-foreground"})}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground text-sm truncate",children:Ut==="chat"?"Ask Sparqy":Ut==="call"?"Speech":"Generate Content"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:Ut==="chat"?"Ask questions about this document":Ut==="call"?"Voice chat with AI assistant":"Generate content from this document"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Ut==="chat"&&jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>{Zn()([]),pr()(null),Vr()},className:"h-7 px-2 text-xs",title:"Start a new chat",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3.5 h-3.5 mr-1"}),"New Chat"]}),(Ut==="chat"||Ut==="call")&&jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs(Dialog,{open:Ct,onOpenChange:en,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(History,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-md",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Chat History"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Vt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}):Tt.length===0?jsxRuntimeExports.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No saved chat sessions"}):jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:Tt.map(mn=>jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-muted/50 w-full max-w-full ${Nn()===mn.id?"bg-primary/10 border-primary":"border-border"}`,onClick:()=>$r(mn.id),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm truncate",children:mn.summary&&mn.summary!=="null"?mn.summary.length>30?mn.summary.substring(0,30)+"...":mn.summary:mn.name||"Unnamed Session"}),mn.mode&&jsxRuntimeExports.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${mn.mode==="call"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:mn.mode==="call"?"Speech":"Chat"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-muted-foreground truncate",children:new Date(mn.updatedAt).toLocaleDateString()}),!mn.isStarred&&jsxRuntimeExports.jsx("span",{className:"text-xs text-orange-500 truncate",children:"• Auto-delete in 24h"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Mn=>{Mn.stopPropagation(),Jr(mn.id)},className:"h-6 w-6 p-0 text-red-500 hover:text-red-600",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})})]},mn.id))}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{en(!1),Vr()},className:"w-full",disabled:sn,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),sn?"Creating...":"New Chat"]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:["View chat history and manage sessions",jsxRuntimeExports.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-b-4 border-transparent border-b-gray-900"})]})]})]})]})]}),Ut==="chat"&&jsxRuntimeExports.jsx("div",{className:"px-3 py-2 border-b border-border flex-shrink-0",children:jsxRuntimeExports.jsx(ChatModeSelector,{selectedMode:hn,onModeChange:fn})}),Ut==="chat"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",ref:Vn,children:jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[Xn().map(mn=>jsxRuntimeExports.jsx("div",{className:`flex ${mn.isUser?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[85%] p-3 rounded-lg ${mn.isUser?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[mn.isUser?jsxRuntimeExports.jsx("p",{className:"text-sm",children:mn.content}):jsxRuntimeExports.jsx(MessageWithSources,{message:mn,onSourceClick:Hr}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70 mt-1",children:mn.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},mn.id)),ct&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"max-w-[85%] p-3 rounded-lg bg-muted text-foreground",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"AI is thinking..."})]})})})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-border flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"mb-3 flex justify-end items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsxs(Button,{variant:gn?"default":"outline",size:"sm",onClick:()=>kn(!gn),className:"flex items-center gap-1.5 h-8 px-2",children:[jsxRuntimeExports.jsx(Shield,{className:"w-3.5 h-3.5"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Context"})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50",children:[gn?"Context only mode enabled - AI will only respond based on your workspace documents":"Context only mode disabled - AI can use general knowledge",jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}),jsxRuntimeExports.jsx(ModelSelector,{selectedModel:tn,onModelChange:Gt})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Rt&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-lg border",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Context:"}),jsxRuntimeExports.jsx("input",{type:"text",value:Rt,onChange:mn=>Dt(mn.target.value),className:"flex-1 text-xs bg-transparent border-none outline-none resize-none",placeholder:"Edit context..."}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>Dt(null),className:"h-6 w-6 p-0 text-muted-foreground hover:text-foreground",children:jsxRuntimeExports.jsx(X,{className:"w-3 h-3"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("textarea",{ref:Un,value:lt,onChange:mn=>at(mn.target.value),placeholder:Rt?"Ask about the selected context...":"Ask about this document...",onKeyDown:mn=>{mn.key==="Enter"&&!mn.shiftKey&&(mn.preventDefault(),Ht())},className:"flex-1 min-h-[44px] max-h-[120px] resize-none rounded-lg border border-input bg-background px-4 py-3 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",disabled:ct,rows:1,style:{height:"auto",overflow:"hidden"},onInput:mn=>{const Mn=mn.target;Mn.style.height="auto",Mn.style.height=Math.min(Mn.scrollHeight,120)+"px"}}),jsxRuntimeExports.jsx(Button,{onClick:()=>Ht(),size:"sm",className:"px-4 h-[44px] rounded-lg transition-all duration-200",disabled:ct||!lt.trim(),children:jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]})]})]})]}),Ut==="call"&&jsxRuntimeExports.jsx(FileVoiceCallPanel,{isOpen:!0,onClose:()=>Jt("chat"),fileId:a,fileName:(et==null?void 0:et.originalName)||"document",workspaceId:((fs=et==null?void 0:et.workspaceId)==null?void 0:fs.toString())||""}),Ut==="generate"&&jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{className:"text-sm font-medium",children:"Content Type"}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"w-full justify-between",children:[jsxRuntimeExports.jsx("span",{children:((mp=In.find(mn=>mn.value===Sn))==null?void 0:mp.label)||"Select type"}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})]})}),jsxRuntimeExports.jsx(DropdownMenuContent,{className:"w-full",children:In.map(mn=>{const Mn=mn.icon;return jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:()=>Ln(mn.value),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Mn,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:mn.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted-foreground",children:mn.description})]})]},mn.value)})})]})]}),jsxRuntimeExports.jsx(Button,{onClick:wn,disabled:$n,className:"w-full",size:"lg",children:$n?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"w-4 h-4 mr-2"}),Sn==="quiz"||Sn==="exam"?"Next":"Generate Content"]})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:"Generated Content"}),Kt&&jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})]}),Pn.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:'No content generated yet. Select a type above and click "Generate Content" to get started.'})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"generated-category-filter",className:"text-xs text-muted-foreground whitespace-nowrap",children:"Filter by:"}),jsxRuntimeExports.jsxs(Select,{value:ar,onValueChange:wr,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-8 text-xs",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:En().map(mn=>jsxRuntimeExports.jsx(SelectItem,{value:mn,children:mn==="All"?"All Types":Sr(mn)},mn))})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:dr.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-4",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:["No ",ar==="All"?"":Sr(ar).toLowerCase()," content found."]})}):dr.map(mn=>{var Mn;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",onClick:()=>qn(mn),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 text-primary flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium truncate",children:mn.originalName}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:Sr(((Mn=mn.metadata)==null?void 0:Mn.generationType)||"Unknown")}),jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsxs("span",{children:["Generated ",new Date(mn.createdAt).toLocaleDateString()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"flex-shrink-0 h-8 w-8 p-0",onClick:Hn=>{Hn.stopPropagation(),qn(mn)},children:jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Open generated content"})})]})}),jsxRuntimeExports.jsx(TooltipProvider,{children:jsxRuntimeExports.jsxs(Tooltip,{children:[jsxRuntimeExports.jsx(TooltipTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"flex-shrink-0 h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",onClick:Hn=>{Hn.stopPropagation(),rr(mn,Hn)},children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsx(TooltipContent,{children:jsxRuntimeExports.jsx("p",{children:"Delete generated content"})})]})})]})]},mn.id)})})]})]})]})]})})]})]}),jsxRuntimeExports.jsx(QuizConfigDialog,{isOpen:on,onClose:()=>vn(!1),onConfirm:jn,isGenerating:$n}),jsxRuntimeExports.jsx(ExamConfigDialog,{isOpen:nn,onClose:()=>Qt(!1),onConfirm:Rn,isGenerating:$n})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"File not found"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>e("/"),className:"mt-4",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})})},MessageWithSources=React$1.memo(({message:a,onSourceClick:e})=>{const c=[/\[SOURCE (\d+)(?:, (\d+))*\]/g,/\[Source (\d+)(?:, (\d+))*\]/g,/\[source (\d+)(?:, (\d+))*\]/g,/SOURCE (\d+)(?:, (\d+))*\b/g,/Source (\d+)(?:, (\d+))*\b/g,/\(SOURCE (\d+)(?:, (\d+))*\)/g,/\(Source (\d+)(?:, (\d+))*\)/g,/"SOURCE (\d+)(?:, (\d+))*"/g,/"Source (\d+)(?:, (\d+))*"/g,/• \[SOURCE (\d+)(?:, (\d+))*\]/g,/• \[Source (\d+)(?:, (\d+))*\]/g];let d=!1,h=[],g=0;for(const b of c){const _e=[...a.content.matchAll(b)];if(_e.length>0){d=!0,_e.forEach(et=>{et.index>g&&h.push({type:"text",content:a.content.slice(g,et.index),sourceNumbers:[],fullMatch:""});const rt=et.slice(1).filter(Boolean).map(Number);h.push({type:"citation",content:et[0],sourceNumbers:rt,fullMatch:et[0]}),g=et.index+et[0].length});break}}if(g<a.content.length&&h.push({type:"text",content:a.content.slice(g),sourceNumbers:[],fullMatch:""}),!d){const b=/\[([^\]]+)\]/g,_e=[...a.content.matchAll(b)];if(_e.length>0){const et=[];let rt=0;return _e.forEach((st,$)=>{st.index>rt&&et.push({type:"text",content:a.content.slice(rt,st.index)}),et.push({type:"fallback_citation",content:st[0],citationText:st[1]}),rt=st.index+st[0].length}),rt<a.content.length&&et.push({type:"text",content:a.content.slice(rt)}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:et.map((st,$)=>{var _,nt,it;if(st.type==="text")return jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:st.content})},$);{const ot=(_=a.sourceCitations)==null?void 0:_[0];if(((nt=ot==null?void 0:ot.metadata)==null?void 0:nt.type)==="youtube"&&((it=ot.metadata)!=null&&it.timestamp)){const lt=ot.metadata.timestamp,at=Math.floor(lt/60),ct=Math.floor(lt%60);return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1",children:jsxRuntimeExports.jsx("span",{className:"text-foreground text-sm",children:`${at}:${ct.toString().padStart(2,"0")}`})},$)}return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center gap-1",children:jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{console.log("Fallback citation clicked:",st.citationText),ot&&e(ot)},children:st.content})},$)}})})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:a.content})})}return jsxRuntimeExports.jsx("div",{className:"prose prose-sm max-w-none space-y-4",children:jsxRuntimeExports.jsx("div",{className:"inline",children:h.map((b,_e)=>{if(b.type==="text")return jsxRuntimeExports.jsx("span",{className:"inline",children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],children:b.content})},_e);{const et=b.sourceNumbers.map(rt=>{var $,_,nt,it;let st=($=a.sourceCitations)==null?void 0:$.find(ot=>ot.chunkIndex===rt-1);return!st&&a.sourceCitations&&a.sourceCitations.length>=rt&&(st=a.sourceCitations[rt-1]),!st&&a.sourceCitations&&a.sourceCitations.length>0&&(st=a.sourceCitations[0]),console.log(`🔍 Looking for citation ${rt}:`),console.log(`   - By chunkIndex ${rt-1}:`,(_=a.sourceCitations)==null?void 0:_.find(ot=>ot.chunkIndex===rt-1)),console.log(`   - By array index ${rt-1}:`,(nt=a.sourceCitations)==null?void 0:nt[rt-1]),console.log("   - Final result:",st),console.log("📋 Available citations:",(it=a.sourceCitations)==null?void 0:it.map(ot=>({chunkIndex:ot.chunkIndex,fileName:ot.fileName}))),st}).filter(Boolean);return console.log(`✅ Citations found for part ${_e}:`,et),jsxRuntimeExports.jsx("span",{className:"inline",children:(()=>{var st,$;const rt=et[0];if(((st=rt==null?void 0:rt.metadata)==null?void 0:st.type)==="youtube"&&(($=rt.metadata)!=null&&$.timestamp)){const _=rt.metadata.timestamp,nt=Math.floor(_/60),it=Math.floor(_%60);return jsxRuntimeExports.jsx("span",{className:"text-foreground text-sm",children:`${nt}:${it.toString().padStart(2,"0")}`})}return jsxRuntimeExports.jsx("span",{className:"text-blue-600 font-medium cursor-pointer hover:underline hover:bg-blue-50 px-1 rounded",onClick:()=>{console.log("🎯 Citation clicked:",b.fullMatch),console.log("📄 Citation data:",et[0]),et[0]&&e(et[0])},children:b.fullMatch})})()},_e)}})})})}),URLContentViewer=({file:a})=>{if(!a.metadata)return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"No content available"});const{metadata:e}=a;return e.type==="youtube"?jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"aspect-video",children:jsxRuntimeExports.jsx("iframe",{src:e.embedUrl,title:e.title,className:"w-full h-full",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Youtube,{className:"w-6 h-6 text-red-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e.title})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>window.open(e.originalUrl,"_blank"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open Original"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Channel"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.channel})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.description})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"AI Summary"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.summary})]})]})]}),jsxRuntimeExports.jsx(YouTubeTranscript,{fileId:a.id})]})})}):e.type==="website"?jsxRuntimeExports.jsx("div",{className:"flex flex-col h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Globe,{className:"w-6 h-6 text-blue-500"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e.title})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>window.open(e.originalUrl,"_blank"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Open Original"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.description})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"AI Summary"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:e.summary})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Content"}),jsxRuntimeExports.jsx("div",{className:"bg-muted p-4 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-muted-foreground whitespace-pre-wrap",children:e.content})})]})]})]})})})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Unknown content type"})},PDFViewer=({file:a,viewMode:e})=>{const[c,d]=reactExports.useState(null),[h,g]=reactExports.useState(1),[b,_e]=reactExports.useState(null),[et,rt]=reactExports.useState(800),st=localStorage.getItem("authToken"),$=`${buildApiUrl(API_ENDPOINTS.FILES.PREVIEW(a.id))}?token=${st}`,_=reactExports.useRef(null),[nt,it]=reactExports.useState(!1),[ot,lt]=reactExports.useState(""),[at,ct]=reactExports.useState(null);GlobalWorkerOptions.workerSrc="/pdf.worker.js",reactExports.useEffect(()=>{const pt=()=>{if(_.current){const mt=_.current.clientWidth;rt(Math.max(300,mt-48))}};pt();const ft=new ResizeObserver(pt);return _.current&&ft.observe(_.current),()=>{ft.disconnect()}},[]);const dt=()=>{g(pt=>Math.max(1,pt-1))},ht=()=>{g(pt=>Math.min(c||1,pt+1))};return reactExports.useEffect(()=>{const pt=()=>{const ft=window.getSelection();if(ft&&ft.rangeCount>0){const mt=ft.getRangeAt(0);if(mt&&mt.toString().trim()&&_.current&&_.current.contains(mt.commonAncestorContainer)){const xt=mt.getBoundingClientRect();_e(xt)}else _e(null)}else _e(null)};return document.addEventListener("selectionchange",pt),()=>document.removeEventListener("selectionchange",pt)},[]),reactExports.useEffect(()=>{b?ct({top:b.bottom+window.scrollY+4,left:b.right+window.scrollX+8}):(it(!1),lt(""),ct(null))},[b]),jsxRuntimeExports.jsxs("div",{ref:_,className:"w-full h-full relative",children:[e==="single"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-surface border-b border-border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:dt,disabled:h<=1,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-4 h-4"}),"Previous"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",h," of ",c||"..."]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:ht,disabled:h>=(c||1),className:"flex items-center gap-2",children:["Next",jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"1",max:c||1,value:h,onChange:pt=>{const ft=parseInt(pt.target.value);ft>=1&&ft<=(c||1)&&g(ft)},className:"w-16 px-2 py-1 text-sm border border-border rounded"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",c||"..."]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-muted p-4",children:jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(Document,{file:$,onLoadSuccess:({numPages:pt})=>d(pt),loading:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading PDF..."}),error:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:"Failed to load PDF"}),className:"bg-white rounded-lg shadow-lg",children:c&&jsxRuntimeExports.jsx(Page,{pageNumber:h,width:Math.min(800,et),renderTextLayer:!0,renderAnnotationLayer:!1})})})})]}),e==="continuous"&&jsxRuntimeExports.jsx("div",{className:"w-full h-full overflow-auto bg-muted rounded-lg",children:jsxRuntimeExports.jsx(Document,{file:$,onLoadSuccess:({numPages:pt})=>d(pt),loading:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full",children:"Loading PDF..."}),error:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:"Failed to load PDF"}),className:"w-full h-full",children:c&&Array.from(new Array(c),(pt,ft)=>jsxRuntimeExports.jsx(Page,{pageNumber:ft+1,width:Math.min(800,et),renderTextLayer:!0,renderAnnotationLayer:!1},`page_${ft+1}`))})})]})},DocumentPreviewPage=()=>{var xt,gt,Et,St;const{fileId:a}=useParams(),e=useNavigate(),[c]=useSearchParams(),{toast:d}=useToast(),[h,g]=reactExports.useState([]),[b,_e]=reactExports.useState(null),[et,rt]=reactExports.useState(null),[st,$]=reactExports.useState(!0),[_,nt]=reactExports.useState("continuous"),[it,ot]=reactExports.useState(!1),[lt,at]=reactExports.useState(!1),{isCollapsed:ct,toggleCollapse:dt}=useSidebar();reactExports.useEffect(()=>{(async()=>{try{const Mt=localStorage.getItem("authToken"),Rt=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${Mt}`,"Content-Type":"application/json"}}),Dt=await Rt.json();Rt.ok&&Dt.success?g(Dt.data.map(Tt=>({id:Tt.id.toString(),name:Tt.name,description:Tt.description||null,isActive:!1}))):d({title:"Error fetching workspaces",description:Dt.message||"Failed to load workspaces",variant:"destructive"})}catch{d({title:"Error fetching workspaces",description:"Network error occurred",variant:"destructive"})}})()},[d]),reactExports.useEffect(()=>{const Pt=c.get("chat")==="true",Mt=c.get("sessionId");Pt&&a&&e(Mt?`/chat?sessionId=${Mt}&fileId=${a}`:`/chat?fileId=${a}`)},[c,a,e]),reactExports.useEffect(()=>{a&&ft()},[a]),reactExports.useEffect(()=>{h.length>0&&g(Pt=>Pt.map(Mt=>({...Mt,isActive:Mt.id===b})))},[b,h.length]);const ht=Pt=>{_e(Pt),g(Mt=>Mt.map(Rt=>({...Rt,isActive:Rt.id===Pt}))),e("/",{state:{workspaceId:Pt}})},pt=()=>{_e(null),g(Pt=>Pt.map(Mt=>({...Mt,isActive:!1}))),e("/")},ft=async()=>{if(a){$(!0);try{const Pt=localStorage.getItem("authToken"),Mt=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DELETE(a)),{headers:{Authorization:`Bearer ${Pt}`,"Content-Type":"application/json"}}),Rt=await Mt.json();Mt.ok&&Rt.success?(rt(Rt.data),_e(Rt.data.workspaceId.toString()),g(Dt=>Dt.map(Tt=>({...Tt,isActive:Tt.id===Rt.data.workspaceId.toString()})))):(d({title:"Error fetching file",description:Rt.message||"Failed to load file details",variant:"destructive"}),e("/"))}catch{d({title:"Error fetching file",description:"Network error occurred",variant:"destructive"}),e("/")}finally{$(!1)}}},mt=async()=>{if(et)try{const Pt=localStorage.getItem("authToken"),Mt=await fetch(buildApiUrl(API_ENDPOINTS.FILES.DOWNLOAD(et.id)),{headers:{Authorization:`Bearer ${Pt}`}});if(Mt.ok){const Rt=await Mt.json();Rt.success&&Rt.data.downloadUrl?(window.open(Rt.data.downloadUrl,"_blank"),d({title:"File opened",description:"Your file has been opened in a new tab"})):d({title:"Download failed",description:"Unable to get download URL",variant:"destructive"})}else d({title:"Download failed",description:"Unable to download the file",variant:"destructive"})}catch{d({title:"Download failed",description:"Network error occurred",variant:"destructive"})}};return st?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Loading file..."})]})}):et?jsxRuntimeExports.jsxs("div",{className:"h-screen w-full flex bg-background overflow-hidden",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:h,onWorkspaceSelect:ht,onDeleteWorkspace:()=>{},onRenameWorkspace:()=>{},onHomeSelect:pt,isHomeActive:b===null,recentItems:[],starredItems:[],starredChatSessions:[],onRecentItemSelect:()=>{},onStarredItemSelect:()=>{},onStarredChatSessionSelect:()=>{},isCollapsed:ct,onToggleCollapse:dt}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsx("header",{className:"border-b border-border bg-surface/50 backdrop-blur-sm flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>e(`/workspace/${et.workspaceId}`),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[((xt=et.metadata)==null?void 0:xt.type)==="youtube"?jsxRuntimeExports.jsx(Youtube,{className:"w-5 h-5 text-red-500"}):((gt=et.metadata)==null?void 0:gt.type)==="website"?jsxRuntimeExports.jsx(Globe,{className:"w-5 h-5 text-blue-500"}):jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5 text-primary"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"font-semibold text-foreground",children:et.originalName}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:[((Et=et.metadata)==null?void 0:Et.type)==="youtube"?"YouTube Video":((St=et.metadata)==null?void 0:St.type)==="website"?"Website":`${(et.fileSize/1024/1024).toFixed(2)} MB`," • ",new Date(et.createdAt).toLocaleDateString()]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[!et.metadata||et.metadata.type!=="youtube"&&et.metadata.type!=="website"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:"View:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 border border-border rounded-lg p-1",children:[jsxRuntimeExports.jsx(Button,{variant:_==="continuous"?"default":"ghost",size:"sm",onClick:()=>nt("continuous"),className:"h-8 px-3",title:"Continuous scroll view",children:jsxRuntimeExports.jsx(List$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx(Button,{variant:_==="single"?"default":"ghost",size:"sm",onClick:()=>nt("single"),className:"h-8 px-3",title:"Single page view",children:jsxRuntimeExports.jsx(Grid3x3,{className:"w-4 h-4"})})]})]}):null,jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:mt,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Download"]})]})]})})}),jsxRuntimeExports.jsx(ResizablePanelGroup,{direction:"horizontal",className:"flex-1 min-h-0",children:jsxRuntimeExports.jsx(ResizablePanel,{defaultSize:70,minSize:30,children:jsxRuntimeExports.jsx("div",{className:"flex flex-col min-h-0 h-full",children:jsxRuntimeExports.jsx("div",{className:"flex-1 p-6 overflow-auto",children:jsxRuntimeExports.jsx("div",{className:`bg-card border border-border rounded-lg min-h-full ${_==="single"?"single-page-view":""}`,style:{position:"relative"},children:et.metadata&&(et.metadata.type==="youtube"||et.metadata.type==="website")?jsxRuntimeExports.jsx(URLContentViewer,{file:et}):jsxRuntimeExports.jsx(PDFViewer,{file:et,viewMode:_})})})})})}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>e(`/file/${a}`),className:"w-14 h-14 rounded-full shadow-lg bg-primary hover:bg-primary/90 text-primary-foreground group relative",size:"lg",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-6 h-6"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-1 bg-foreground text-background text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:["Ask Sparqy",jsxRuntimeExports.jsx("div",{className:"absolute top-full right-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-foreground"})]})]})})]})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"File not found"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>e("/"),className:"mt-4",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})})},ChatPage=()=>{var sn;const a=useNavigate(),[e]=useSearchParams(),[c,d]=reactExports.useState([]),[h,g]=reactExports.useState(""),[b,_e]=reactExports.useState(!1),[et,rt]=reactExports.useState(null),[st,$]=reactExports.useState([]),[_,nt]=reactExports.useState(!1),[it,ot]=reactExports.useState(!1),[lt,at]=reactExports.useState(!1),[ct,dt]=reactExports.useState([]),[ht,pt]=reactExports.useState(null),[ft,mt]=reactExports.useState(null),[xt,gt]=reactExports.useState("regular"),Et=reactExports.useRef(null),{toast:St}=useToast(),{isCollapsed:Pt,toggleCollapse:Mt}=useSidebar();reactExports.useEffect(()=>{var kt;(kt=Et.current)==null||kt.scrollIntoView({behavior:"smooth"})},[c]),reactExports.useEffect(()=>{Rt()},[]),reactExports.useEffect(()=>{Dt()},[ct]),reactExports.useEffect(()=>{const kt=e.get("sessionId"),Ut=e.get("workspaceId"),Jt=e.get("fileId");console.log("💬 [CHAT-PAGE-DEBUG] URL parameters:",{sessionIdFromUrl:kt,workspaceIdFromUrl:Ut,fileIdFromUrl:Jt,currentSessionId:et,searchParams:Object.fromEntries(e.entries())}),kt&&!et?(console.log(`💬 [CHAT-PAGE-DEBUG] Loading session: ${kt}`),It(kt)):Ut&&!et?(console.log(`💬 [CHAT-PAGE-DEBUG] Setting workspace: ${Ut}`),pt(Ut)):Jt&&!et&&(console.log(`💬 [CHAT-PAGE-DEBUG] Setting fileId: ${Jt}`),mt(Jt))},[e,et]),reactExports.useEffect(()=>{!et&&c.length===0&&!e.get("sessionId")&&Tt()},[et,e]);const Rt=async()=>{try{const kt=localStorage.getItem("authToken"),Ut=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${kt}`,"Content-Type":"application/json"}}),Jt=await Ut.json();Ut.ok&&Jt.success&&dt(Jt.data.map(tn=>({id:tn.id.toString(),name:tn.name,description:tn.description||null,isActive:!1})))}catch(kt){console.error("Error fetching workspaces:",kt)}},Dt=async()=>{try{nt(!0);const kt=localStorage.getItem("authToken"),Ut=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{headers:{Authorization:`Bearer ${kt}`}}),Jt=await Ut.json();if(Ut.ok&&Jt.success){const tn=Jt.data.map(Gt=>{var fn;let hn="General Chat";if(Gt.workspaceId){const gn=ct.find(kn=>kn.id===Gt.workspaceId.toString());hn=gn?gn.name:"General Chat"}return{...Gt,workspaceName:hn,fileName:((fn=Gt.file)==null?void 0:fn.originalName)||void 0}});$(tn)}else St({title:"Error loading chat history",description:Jt.message||"Failed to load chat sessions",variant:"destructive"})}catch{St({title:"Error loading chat history",description:"Network error occurred",variant:"destructive"})}finally{nt(!1)}},Tt=async()=>{var kt;try{at(!0);const Ut=localStorage.getItem("authToken"),Jt=ht?((kt=ct.find(hn=>hn.id===ht))==null?void 0:kt.name)||"New Chat":ft?"File Chat":"New Chat",tn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSIONS),{method:"POST",headers:{Authorization:`Bearer ${Ut}`,"Content-Type":"application/json"},body:JSON.stringify({name:Jt,workspaceId:ht||null,fileId:ft||null})}),Gt=await tn.json();if(tn.ok&&Gt.success){rt(Gt.data.id);const hn={id:Date.now().toString(),content:"Hi! I'm your AI assistant. How can I help you today?",isUser:!1,timestamp:new Date};d([hn]),Dt()}else St({title:"Error creating chat session",description:Gt.message||"Failed to create new session",variant:"destructive"})}catch{St({title:"Error creating chat session",description:"Network error occurred",variant:"destructive"})}finally{at(!1)}},It=async kt=>{try{const Ut=localStorage.getItem("authToken"),Jt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(kt)),{headers:{Authorization:`Bearer ${Ut}`}}),tn=await Jt.json();if(Jt.ok&&tn.success){const Gt=tn.data;rt(Gt.id);const hn=Gt.messages.map(fn=>({id:fn.id.toString(),content:fn.content,isUser:fn.isUser,timestamp:new Date(fn.createdAt)}));d(hn),ot(!1),Dt()}else St({title:"Error loading chat session",description:tn.message||"Failed to load session",variant:"destructive"})}catch{St({title:"Error loading chat session",description:"Network error occurred",variant:"destructive"})}},Vt=async kt=>{try{const Ut=localStorage.getItem("authToken"),Jt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.SESSION(kt)),{method:"DELETE",headers:{Authorization:`Bearer ${Ut}`}}),tn=await Jt.json();Jt.ok&&tn.success?($(Gt=>Gt.filter(hn=>hn.id!==kt)),et===kt&&(rt(null),d([]),Tt()),St({title:"Session deleted",description:"Chat session deleted successfully"}),Dt()):St({title:"Error deleting session",description:tn.message||"Failed to delete session",variant:"destructive"})}catch{St({title:"Error deleting session",description:"Network error occurred",variant:"destructive"})}},Bt=async(kt,Ut)=>{try{const Jt=localStorage.getItem("authToken"),tn=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.STAR(kt)),{method:"PATCH",headers:{Authorization:`Bearer ${Jt}`,"Content-Type":"application/json"},body:JSON.stringify({isStarred:Ut})}),Gt=await tn.json();tn.ok&&Gt.success?($(hn=>hn.map(fn=>fn.id===kt?{...fn,isStarred:Ut}:fn)),St({title:Ut?"Session starred":"Session unstarred",description:Ut?"Chat session saved permanently":"Chat session will be auto-deleted after 24 hours of inactivity"}),Dt()):St({title:"Error updating session",description:Gt.message||"Failed to update session",variant:"destructive"})}catch{St({title:"Error updating session",description:"Network error occurred",variant:"destructive"})}},Ct=async()=>{if(!h.trim()||b||!et)return;const kt={id:Date.now().toString(),content:h.trim(),isUser:!0,timestamp:new Date};d(Ut=>[...Ut,kt]),g(""),_e(!0);try{const Ut=localStorage.getItem("authToken"),Jt=await fetch(buildApiUrl(API_ENDPOINTS.CHAT.MESSAGES(et)),{method:"POST",headers:{Authorization:`Bearer ${Ut}`,"Content-Type":"application/json"},body:JSON.stringify({content:h.trim(),chatMode:xt})});console.log("🎯 [ChatPage] Sending request with chat mode:",xt);const tn=await Jt.json();if(Jt.ok&&tn.success){const Gt={id:(Date.now()+1).toString(),content:tn.data.assistantMessage.content,isUser:!1,timestamp:new Date};d(hn=>[...hn,Gt]),Dt()}else{const Gt={id:(Date.now()+1).toString(),content:tn.message||"Sorry, I encountered an error. Please try again.",isUser:!1,timestamp:new Date};d(hn=>[...hn,Gt]),St({title:"Chat Error",description:tn.message||"Failed to get AI response",variant:"destructive"})}}catch(Ut){console.error("Chat error:",Ut);const Jt={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again.",isUser:!1,timestamp:new Date};d(tn=>[...tn,Jt]),St({title:"Connection Error",description:"Failed to connect to AI service",variant:"destructive"})}finally{_e(!1)}},en=kt=>{kt.key==="Enter"&&!kt.shiftKey&&(kt.preventDefault(),Ct())};return jsxRuntimeExports.jsxs("div",{className:"flex flex-1 h-screen",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:ct.map(kt=>({...kt,isActive:ht===kt.id})),onWorkspaceSelect:kt=>{pt(kt),a(`/workspace/${kt}`)},onCreateWorkspace:async kt=>{try{const Ut=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{method:"POST",headers:{Authorization:`Bearer ${Ut}`,"Content-Type":"application/json"},body:JSON.stringify({name:kt})})).ok&&Rt()}catch(Ut){console.error("Error creating workspace:",Ut)}},onDeleteWorkspace:async kt=>{try{const Ut=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(kt)),{method:"DELETE",headers:{Authorization:`Bearer ${Ut}`}})).ok&&(Rt(),ht===kt&&pt(null))}catch(Ut){console.error("Error deleting workspace:",Ut)}},onRenameWorkspace:async(kt,Ut)=>{try{const Jt=localStorage.getItem("authToken");(await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.UPDATE(kt)),{method:"PUT",headers:{Authorization:`Bearer ${Jt}`,"Content-Type":"application/json"},body:JSON.stringify({name:Ut})})).ok&&Rt()}catch(Jt){console.error("Error renaming workspace:",Jt)}},onHomeSelect:()=>a("/"),isHomeActive:!1,recentItems:[],starredItems:[],starredChatSessions:[],onRecentItemSelect:(kt,Ut)=>{Ut==="workspace"&&(pt(kt),a(`/workspace/${kt}`))},onStarredItemSelect:(kt,Ut)=>{Ut==="workspace"&&(pt(kt),a(`/workspace/${kt}`))},onStarredChatSessionSelect:()=>{},isCollapsed:Pt,onToggleCollapse:Mt}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-background transition-all duration-300 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-border bg-surface/50 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>a("/"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[jsxRuntimeExports.jsx(MessageCircle,{className:"w-6 h-6"}),"AI Chat"]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Have a conversation with your AI assistant"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[et&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{const kt=st.find(Ut=>Ut.id===et);kt&&Bt(et,!kt.isStarred)},className:"flex items-center gap-2",children:jsxRuntimeExports.jsx(Star,{className:`w-4 h-4 ${et&&((sn=st.find(kt=>kt.id===et))!=null&&sn.isStarred)?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})}),jsxRuntimeExports.jsxs(Dialog,{open:it,onOpenChange:ot,children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(History,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(DialogTitle,{children:"Chat History"})}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:_?jsxRuntimeExports.jsx("div",{className:"text-center py-4",children:"Loading..."}):st.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No chat history yet"}):st.map(kt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",onClick:()=>It(kt.id),children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-foreground truncate mb-1",children:kt.summary||kt.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[kt.fileName&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-blue-100 text-blue-700",children:kt.fileName}),kt.workspaceName&&kt.workspaceName!=="General Chat"&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-primary/10 text-primary",children:kt.workspaceName}),(kt.fileName||kt.workspaceName&&kt.workspaceName!=="General Chat")&&jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsx("span",{children:new Date(kt.lastActivityAt||kt.updatedAt).toLocaleDateString()}),kt.isStarred&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsx("span",{className:"text-yellow-600",children:"Starred"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Ut=>{Ut.stopPropagation(),Bt(kt.id,!kt.isStarred)},children:jsxRuntimeExports.jsx(Star,{className:`w-4 h-4 ${kt.isStarred?"fill-yellow-400 text-yellow-400":"text-muted-foreground"}`})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Ut=>{Ut.stopPropagation(),Vt(kt.id)},children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 text-destructive"})})]})]},kt.id))})]})]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"px-8 py-4 border-b border-border",children:jsxRuntimeExports.jsx(ChatModeSelector,{selectedMode:xt,onModeChange:gt})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col h-[calc(100vh-120px)]",children:[jsxRuntimeExports.jsx(ScrollArea,{className:"flex-1 p-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[c.map(kt=>jsxRuntimeExports.jsx("div",{className:`flex ${kt.isUser?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[70%] rounded-lg p-4 ${kt.isUser?"bg-primary text-primary-foreground":"bg-muted text-foreground"}`,children:[jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap",children:kt.content}),jsxRuntimeExports.jsx("p",{className:"text-xs opacity-70 mt-2",children:kt.timestamp.toLocaleTimeString()})]})},kt.id)),jsxRuntimeExports.jsx("div",{ref:Et})]})}),jsxRuntimeExports.jsx("div",{className:"border-t border-border p-6 bg-background",children:jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Input,{value:h,onChange:kt=>g(kt.target.value),onKeyPress:en,placeholder:"Type your message...",className:"h-12",disabled:b})}),jsxRuntimeExports.jsx(Button,{onClick:Ct,disabled:!h.trim()||b,className:"h-12 px-6",children:b?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"})})]})})})]})]})]})};var CHECKBOX_NAME="Checkbox",[createCheckboxContext,createCheckboxScope]=createContextScope(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(a){const{__scopeCheckbox:e,checked:c,children:d,defaultChecked:h,disabled:g,form:b,name:_e,onCheckedChange:et,required:rt,value:st="on",internal_do_not_use_render:$}=a,[_,nt]=useControllableState({prop:c,defaultProp:h??!1,onChange:et,caller:CHECKBOX_NAME}),[it,ot]=reactExports.useState(null),[lt,at]=reactExports.useState(null),ct=reactExports.useRef(!1),dt=it?!!b||!!it.closest("form"):!0,ht={checked:_,disabled:g,setChecked:nt,control:it,setControl:ot,name:_e,form:b,value:st,hasConsumerStoppedPropagationRef:ct,required:rt,defaultChecked:isIndeterminate(h)?!1:h,isFormControl:dt,bubbleInput:lt,setBubbleInput:at};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:e,...ht,children:isFunction($)?$(ht):d})}var TRIGGER_NAME="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox:a,onKeyDown:e,onClick:c,...d},h)=>{const{control:g,value:b,disabled:_e,checked:et,required:rt,setControl:st,setChecked:$,hasConsumerStoppedPropagationRef:_,isFormControl:nt,bubbleInput:it}=useCheckboxContext(TRIGGER_NAME,a),ot=useComposedRefs(h,st),lt=reactExports.useRef(et);return reactExports.useEffect(()=>{const at=g==null?void 0:g.form;if(at){const ct=()=>$(lt.current);return at.addEventListener("reset",ct),()=>at.removeEventListener("reset",ct)}},[g,$]),jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(et)?"mixed":et,"aria-required":rt,"data-state":getState(et),"data-disabled":_e?"":void 0,disabled:_e,value:b,...d,ref:ot,onKeyDown:composeEventHandlers(e,at=>{at.key==="Enter"&&at.preventDefault()}),onClick:composeEventHandlers(c,at=>{$(ct=>isIndeterminate(ct)?!0:!ct),it&&nt&&(_.current=at.isPropagationStopped(),_.current||at.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME;var Checkbox$1=reactExports.forwardRef((a,e)=>{const{__scopeCheckbox:c,name:d,checked:h,defaultChecked:g,required:b,disabled:_e,value:et,onCheckedChange:rt,form:st,...$}=a;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox:c,checked:h,defaultChecked:g,disabled:_e,required:b,onCheckedChange:rt,name:d,form:st,value:et,internal_do_not_use_render:({isFormControl:_})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...$,ref:e,__scopeCheckbox:c}),_&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox:c})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((a,e)=>{const{__scopeCheckbox:c,forceMount:d,...h}=a,g=useCheckboxContext(INDICATOR_NAME,c);return jsxRuntimeExports.jsx(Presence,{present:d||isIndeterminate(g.checked)||g.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(g.checked),"data-disabled":g.disabled?"":void 0,...h,ref:e,style:{pointerEvents:"none",...a.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME;var BUBBLE_INPUT_NAME="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox:a,...e},c)=>{const{control:d,hasConsumerStoppedPropagationRef:h,checked:g,defaultChecked:b,required:_e,disabled:et,name:rt,value:st,form:$,bubbleInput:_,setBubbleInput:nt}=useCheckboxContext(BUBBLE_INPUT_NAME,a),it=useComposedRefs(c,nt),ot=usePrevious(g),lt=useSize(d);reactExports.useEffect(()=>{const ct=_;if(!ct)return;const dt=window.HTMLInputElement.prototype,pt=Object.getOwnPropertyDescriptor(dt,"checked").set,ft=!h.current;if(ot!==g&&pt){const mt=new Event("click",{bubbles:ft});ct.indeterminate=isIndeterminate(g),pt.call(ct,isIndeterminate(g)?!1:g),ct.dispatchEvent(mt)}},[_,ot,g,h]);const at=reactExports.useRef(isIndeterminate(g)?!1:g);return jsxRuntimeExports.jsx(Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??at.current,required:_e,disabled:et,name:rt,value:st,form:$,...e,tabIndex:-1,ref:it,style:{...e.style,...lt,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME;function isFunction(a){return typeof a=="function"}function isIndeterminate(a){return a==="indeterminate"}function getState(a){return isIndeterminate(a)?"indeterminate":a?"checked":"unchecked"}const Checkbox=reactExports.forwardRef(({className:a,...e},c)=>jsxRuntimeExports.jsx(Checkbox$1,{ref:c,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...e,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn("flex items-center justify-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;function FileSelectionDialog({isOpen:a,onClose:e,workspaceId:c,generationType:d,onConfirm:h}){const[g,b]=reactExports.useState([]),[_e,et]=reactExports.useState([]),[rt,st]=reactExports.useState(!1),{toast:$}=useToast();reactExports.useEffect(()=>{a&&c&&_()},[a,c]);const _=async()=>{st(!0);try{const dt=localStorage.getItem("authToken"),ht=await fetch(buildApiUrl(API_ENDPOINTS.FILES.WORKSPACE(c)),{headers:{Authorization:`Bearer ${dt}`,"Content-Type":"application/json"}}),pt=await ht.json();if(ht.ok&&pt.success){const ft=pt.data.filter(mt=>{var xt;return mt.processingStatus==="completed"&&((xt=mt.metadata)==null?void 0:xt.type)!=="generated"});b(ft)}else $({title:"Error fetching files",description:pt.message||"Failed to load files",variant:"destructive"})}catch{$({title:"Error fetching files",description:"Network error occurred",variant:"destructive"})}finally{st(!1)}},nt=dt=>{et(ht=>ht.includes(dt)?ht.filter(pt=>pt!==dt):[...ht,dt])},it=()=>{_e.length===g.length?et([]):et(g.map(dt=>dt.id))},ot=()=>{if(_e.length===0){$({title:"No files selected",description:"Please select at least one file to generate content from",variant:"destructive"});return}h(_e),e()},lt=dt=>{var ht,pt,ft;return((ht=dt.metadata)==null?void 0:ht.type)==="youtube"?jsxRuntimeExports.jsx(Video,{className:"w-4 h-4"}):((pt=dt.metadata)==null?void 0:pt.type)==="website"?jsxRuntimeExports.jsx(Globe,{className:"w-4 h-4"}):(ft=dt.mimeType)!=null&&ft.startsWith("image/")?jsxRuntimeExports.jsx(Image$2,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"})},at=dt=>{if(dt===0)return"0 Bytes";const ht=1024,pt=["Bytes","KB","MB","GB"],ft=Math.floor(Math.log(dt)/Math.log(ht));return parseFloat((dt/Math.pow(ht,ft)).toFixed(2))+" "+pt[ft]},ct=dt=>({exam:"Exam",quiz:"Quiz",practice:"Practice Questions",flashcards:"Flashcards",cheatsheet:"Cheat Sheet",studyguide:"Study Guide",notes:"Notes"})[dt]||dt;return jsxRuntimeExports.jsx(Dialog,{open:a,onOpenChange:e,children:jsxRuntimeExports.jsxs(DialogContent,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsxs(DialogTitle,{children:["Select Files for ",ct(d)," Generation"]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0",children:rt?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-32",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[jsxRuntimeExports.jsx(File$1,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No processed files found in this workspace."}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Upload and process some files first to generate content."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs(Label$2,{className:"text-sm font-medium",children:[_e.length," of ",g.length," files selected"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:it,children:_e.length===g.length?"Deselect All":"Select All"})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"h-64 border rounded-md p-4",children:jsxRuntimeExports.jsx("div",{className:"space-y-2",children:g.map(dt=>jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border hover:bg-accent/50 transition-colors",children:[jsxRuntimeExports.jsx(Checkbox,{id:dt.id,checked:_e.includes(dt.id),onCheckedChange:()=>nt(dt.id)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[lt(dt),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:dt.id,className:"text-sm font-medium truncate cursor-pointer",children:dt.originalName}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[at(dt.fileSize)," • ",dt.category||"Uncategorized"]})]})]})]},dt.id))})})]})}),jsxRuntimeExports.jsxs(DialogFooter,{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:e,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:ot,disabled:_e.length===0||rt,children:["Generate ",ct(d)]})]})]})})}const GeneratePage=()=>{const a=useNavigate(),[e,c]=reactExports.useState([]),[d,h]=reactExports.useState(null),[g,b]=reactExports.useState("exam"),[_e,et]=reactExports.useState(!1),[rt,st]=reactExports.useState([]),[$,_]=reactExports.useState(!1),[nt,it]=reactExports.useState(!1),{toast:ot}=useToast(),{isCollapsed:lt,toggleCollapse:at}=useSidebar(),ct=[{value:"exam",label:"Exam Questions",description:"Create comprehensive exam questions",icon:FileText},{value:"quiz",label:"Quiz",description:"Quick quiz questions for review",icon:CircleCheckBig},{value:"flashcards",label:"Flashcards",description:"Create study flashcards",icon:BookOpen},{value:"cheat_sheet",label:"Cheat Sheet",description:"Generate a concise reference guide",icon:Lightbulb},{value:"study_guide",label:"Study Guide",description:"Comprehensive study material",icon:BookOpen},{value:"notes",label:"Notes",description:"Organized study notes",icon:FileText}];reactExports.useEffect(()=>{dt(),ht()},[d]);const dt=async()=>{try{const Et=localStorage.getItem("authToken"),St=await fetch(buildApiUrl(API_ENDPOINTS.WORKSPACES.LIST),{headers:{Authorization:`Bearer ${Et}`,"Content-Type":"application/json"}}),Pt=await St.json();St.ok&&Pt.success&&c(Pt.data.map(Mt=>({id:Mt.id.toString(),name:Mt.name,description:Mt.description||null,isActive:!1})))}catch(Et){console.error("Error fetching workspaces:",Et)}},ht=async()=>{if(d){_(!0);try{const Et=localStorage.getItem("authToken"),St=await fetch(buildApiUrl(API_ENDPOINTS.FILES.WORKSPACE(d)),{headers:{Authorization:`Bearer ${Et}`,"Content-Type":"application/json"}}),Pt=await St.json();if(St.ok&&Pt.success){const Mt=Pt.data.filter(Rt=>{var Dt;return((Dt=Rt.metadata)==null?void 0:Dt.type)==="generated"});st(Mt.map(Rt=>{var Dt,Tt;return{id:Rt.id,title:Rt.originalName,type:((Dt=Rt.metadata)==null?void 0:Dt.generationType)||"unknown",content:((Tt=Rt.metadata)==null?void 0:Tt.content)||"",createdAt:Rt.createdAt,workspaceId:Rt.workspaceId.toString(),workspaceName:Rt.workspaceName||"Unknown Workspace"}}))}}catch{ot({title:"Error loading generated content",description:"Failed to load generated content",variant:"destructive"})}finally{_(!1)}}},pt=async()=>{if(!d){ot({title:"Missing information",description:"Please select a workspace",variant:"destructive"});return}it(!0)},ft=async Et=>{if(d){et(!0);try{const St=localStorage.getItem("authToken"),Pt=await fetch(buildApiUrl(API_ENDPOINTS.GENERATE.CONTENT),{method:"POST",headers:{Authorization:`Bearer ${St}`,"Content-Type":"application/json"},body:JSON.stringify({type:g,workspaceId:d,fileIds:Et})}),Mt=await Pt.json();Pt.ok&&Mt.success?(ot({title:"Content generated successfully",description:"Your content has been created and saved to your workspace"}),ht()):ot({title:"Generation failed",description:Mt.message||"Failed to generate content",variant:"destructive"})}catch{ot({title:"Generation failed",description:"Network error occurred",variant:"destructive"})}finally{et(!1)}}},mt=Et=>{const St=ct.find(Pt=>Pt.value===Et);return(St==null?void 0:St.icon)||FileText},xt=Et=>{const St=ct.find(Pt=>Pt.value===Et);return(St==null?void 0:St.label)||Et},gt=Et=>new Date(Et).toLocaleDateString();return jsxRuntimeExports.jsxs("div",{className:"flex flex-1 h-screen",children:[jsxRuntimeExports.jsx(AppSidebar,{workspaces:e,onWorkspaceSelect:Et=>h(Et),onCreateWorkspace:()=>{},onDeleteWorkspace:()=>{},onRenameWorkspace:()=>{},onHomeSelect:()=>a("/"),isHomeActive:!1,recentItems:[],starredItems:[],starredChatSessions:[],onRecentItemSelect:()=>{},onStarredItemSelect:()=>{},onStarredChatSessionSelect:()=>{},isCollapsed:lt,onToggleCollapse:at}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-background transition-all duration-300 flex-1",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-border bg-surface/50 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:()=>a("/"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6"}),"Generate Content"]}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Create educational content with AI assistance"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-8 space-y-8 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),"Generate New Content"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Choose a type to generate educational content based on your workspace files"})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"workspace",children:"Workspace"}),jsxRuntimeExports.jsxs(Select,{value:d||"",onValueChange:h,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select a workspace"})}),jsxRuntimeExports.jsx(SelectContent,{children:e.map(Et=>jsxRuntimeExports.jsx(SelectItem,{value:Et.id,children:Et.name},Et.id))})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"type",children:"Content Type"}),jsxRuntimeExports.jsxs(Select,{value:g,onValueChange:b,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsx(SelectContent,{children:ct.map(Et=>jsxRuntimeExports.jsx(SelectItem,{value:Et.value,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Et.icon,{className:"w-4 h-4"}),Et.label]})},Et.value))})]})]}),jsxRuntimeExports.jsx(Button,{onClick:pt,disabled:!d||_e,className:"w-full",size:"lg",children:_e?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Brain,{className:"w-4 h-4 mr-2"}),"Generate Content"]})})]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),"Generated Content"]}),jsxRuntimeExports.jsx(CardDescription,{children:"Your previously generated content"})]}),jsxRuntimeExports.jsx(CardContent,{children:$?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-8",children:jsxRuntimeExports.jsx(LoaderCircle,{className:"w-6 h-6 animate-spin"})}):rt.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),jsxRuntimeExports.jsx("p",{children:"No generated content yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Generate your first piece of content to see it here"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:rt.map(Et=>{const St=mt(Et.type);return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",onClick:()=>a(`/file/${Et.id}`),children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(St,{className:"w-5 h-5 text-primary"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-foreground truncate",children:Et.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("span",{children:xt(Et.type)}),jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsx("span",{children:Et.workspaceName}),jsxRuntimeExports.jsx("span",{children:"•"}),jsxRuntimeExports.jsx("span",{children:gt(Et.createdAt)})]})]})]},Et.id)})})})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Available Content Types"}),jsxRuntimeExports.jsx(CardDescription,{children:"Choose from various types of educational content you can generate"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ct.map(Et=>{const St=Et.icon;return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg border border-border hover:bg-muted/50 cursor-pointer",onClick:()=>b(Et.value),children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(St,{className:"w-6 h-6 text-primary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-foreground",children:Et.label}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:Et.description})]})]},Et.value)})})})]})]})]}),jsxRuntimeExports.jsx(FileSelectionDialog,{isOpen:nt,onClose:()=>it(!1),workspaceId:d||"",generationType:g,onConfirm:ft})]})},queryClient=new QueryClient,App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(SidebarProvider,{children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(DashboardIndex,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/workspace/:workspaceId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(WorkspacePage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/file/:fileId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(FilePreviewPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/document/:fileId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(DocumentPreviewPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/chat",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(ChatPage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"/generate",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(FileProvider,{children:jsxRuntimeExports.jsx(GeneratePage,{})})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})]})})})});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
